<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head>  <body><code><font color="#000000">
&lt;head&gt;<br>&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;<br>&lt;/head&gt;<br><font color="#0000bb">&lt;?<br>&nbsp;&nbsp;$nas_soubor</font><font color="#007700">=</font><font color="#dd0000">"./finance.xml"</font><font color="#007700">;<br>&nbsp;&nbsp;</font><font color="#0000bb">$jeprijem</font><font color="#007700">=</font><font color="#0000bb">false</font><font color="#007700">;<br>&nbsp;&nbsp;</font><font color="#0000bb">$znacka</font><font color="#007700">=</font><font color="#dd0000">""</font><font color="#007700">;<br>&nbsp;&nbsp;</font><font color="#0000bb">$bilance</font><font color="#007700">=</font><font color="#0000bb">0</font><font color="#007700">;<br><br>&nbsp;&nbsp;</font><font color="#ff8000">//co se má stát, když narazíme na počáteční a koncovou značku<br>&nbsp;&nbsp;</font><font color="#007700">function </font><font color="#0000bb">PocatecniZnacka </font><font color="#007700">(</font><font color="#0000bb">$parser</font><font color="#007700">, </font><font color="#0000bb">$nazev</font><font color="#007700">, </font><font color="#0000bb">$atributy</font><font color="#007700">)<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;global </font><font color="#0000bb">$znacka</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;global </font><font color="#0000bb">$jeprijem</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$znacka</font><font color="#007700">=</font><font color="#0000bb">$nazev</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000bb">$znacka</font><font color="#007700">==</font><font color="#dd0000">"PRIJEM"</font><font color="#007700">) </font><font color="#0000bb">$jeprijem</font><font color="#007700">=</font><font color="#0000bb">true</font><font color="#007700">; <br>&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000bb">$znacka</font><font color="#007700">==</font><font color="#dd0000">"VYDAJ"</font><font color="#007700">) </font><font color="#0000bb">$jeprijem</font><font color="#007700">=</font><font color="#0000bb">false</font><font color="#007700">;<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;function </font><font color="#0000bb">KoncovaZnacka </font><font color="#007700">(</font><font color="#0000bb">$parser</font><font color="#007700">, </font><font color="#0000bb">$nazev</font><font color="#007700">) {}<br>&nbsp;&nbsp;<br>&nbsp;&nbsp;function </font><font color="#0000bb">data </font><font color="#007700">(</font><font color="#0000bb">$parser</font><font color="#007700">, </font><font color="#0000bb">$data</font><font color="#007700">)<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;global </font><font color="#0000bb">$znacka</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;global </font><font color="#0000bb">$bilance</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;global </font><font color="#0000bb">$jeprijem</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000bb">$znacka</font><font color="#007700">==</font><font color="#dd0000">"CASTKA" </font><font color="#007700">and </font><font color="#0000bb">$jeprijem</font><font color="#007700">) </font><font color="#0000bb">$bilance</font><font color="#007700">+=</font><font color="#0000bb">$data</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000bb">$znacka</font><font color="#007700">==</font><font color="#dd0000">"CASTKA" </font><font color="#007700">and !</font><font color="#0000bb">$jeprijem</font><font color="#007700">) </font><font color="#0000bb">$bilance</font><font color="#007700">-=</font><font color="#0000bb">$data</font><font color="#007700">;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<br>&nbsp;&nbsp;</font><font color="#0000bb">$nas_parser</font><font color="#007700">=</font><font color="#0000bb">xml_parser_create</font><font color="#007700">();&nbsp;&nbsp;<br>&nbsp;&nbsp;</font><font color="#0000bb">xml_set_element_handler </font><font color="#007700">(</font><font color="#0000bb">$nas_parser</font><font color="#007700">, </font><font color="#dd0000">"PocatecniZnacka"</font><font color="#007700">, </font><font color="#dd0000">"KoncovaZnacka"</font><font color="#007700">);<br>&nbsp;&nbsp;</font><font color="#0000bb">xml_set_character_data_handler</font><font color="#007700">(</font><font color="#0000bb">$nas_parser</font><font color="#007700">, </font><font color="#dd0000">"data"</font><font color="#007700">);<br>&nbsp;&nbsp;</font><font color="#ff8000">// fáze 3) vlastní čtení souboru, práce s ním a ukončení parseru<br>&nbsp;&nbsp;</font><font color="#007700">if (!(</font><font color="#0000bb">$obsahsouboru </font><font color="#007700">= </font><font color="#0000bb">fopen</font><font color="#007700">(</font><font color="#0000bb">$nas_soubor</font><font color="#007700">, </font><font color="#dd0000">"r"</font><font color="#007700">))) <br>&nbsp;&nbsp;&nbsp;&nbsp;die(</font><font color="#dd0000">"Nemohu otevřít XML pro čtení."</font><font color="#007700">);<br><br>&nbsp;&nbsp;while (</font><font color="#0000bb">$data </font><font color="#007700">= </font><font color="#0000bb">fread</font><font color="#007700">(</font><font color="#0000bb">$obsahsouboru</font><font color="#007700">, </font><font color="#0000bb">1024</font><font color="#007700">)) <br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">xml_parse</font><font color="#007700">(</font><font color="#0000bb">$nas_parser</font><font color="#007700">, </font><font color="#0000bb">$data</font><font color="#007700">, </font><font color="#0000bb">feof</font><font color="#007700">(</font><font color="#0000bb">$obsahsouboru</font><font color="#007700">));<br><br>&nbsp;&nbsp;</font><font color="#0000bb">xml_parser_free</font><font color="#007700">(</font><font color="#0000bb">$nas_parser</font><font color="#007700">);<br>&nbsp;&nbsp;echo </font><font color="#0000bb">$bilance</font><font color="#007700">;<br></font><font color="#0000bb">?&gt;<br></font>
</font>
</code>
</body></html>