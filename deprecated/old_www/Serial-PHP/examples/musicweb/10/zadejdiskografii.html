<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head>  <body><code><font color="#000000">
<font color="#0000bb">&lt;?<br>&nbsp;&nbsp;</font><font color="#007700">function </font><font color="#0000bb">naplnseznam </font><font color="#007700">(</font><font color="#0000bb">$albapisne</font><font color="#007700">, </font><font color="#0000bb">$zvoleno</font><font color="#007700">=</font><font color="#0000bb">0</font><font color="#007700">)<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$options</font><font color="#007700">=</font><font color="#dd0000">""</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$vysledek</font><font color="#007700">=</font><font color="#0000bb">mysql_query</font><font color="#007700">(</font><font color="#dd0000">"select id, nazev from $albapisne order by nazev"</font><font color="#007700">,</font><font color="#0000bb">$GLOBALS</font><font color="#007700">[</font><font color="#dd0000">"link"</font><font color="#007700">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;while (</font><font color="#0000bb">$zaznam</font><font color="#007700">=</font><font color="#0000bb">MySQL_Fetch_Array</font><font color="#007700">(</font><font color="#0000bb">$vysledek</font><font color="#007700">)):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000bb">$zaznam</font><font color="#007700">[</font><font color="#dd0000">"id"</font><font color="#007700">]==</font><font color="#0000bb">$zvoleno</font><font color="#007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$options</font><font color="#007700">.=</font><font color="#dd0000">"&lt;option value=\""</font><font color="#007700">.</font><font color="#0000bb">$zaznam</font><font color="#007700">[</font><font color="#dd0000">"id"</font><font color="#007700">].</font><font color="#dd0000">"\" selected&gt;"</font><font color="#007700">.</font><font color="#0000bb">$zaznam</font><font color="#007700">[</font><font color="#dd0000">"nazev"</font><font color="#007700">].</font><font color="#dd0000">"&lt;/option&gt;\n"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$options</font><font color="#007700">.=</font><font color="#dd0000">"&lt;option value=\""</font><font color="#007700">.</font><font color="#0000bb">$zaznam</font><font color="#007700">[</font><font color="#dd0000">"id"</font><font color="#007700">].</font><font color="#dd0000">"\"&gt;"</font><font color="#007700">.</font><font color="#0000bb">$zaznam</font><font color="#007700">[</font><font color="#dd0000">"nazev"</font><font color="#007700">].</font><font color="#dd0000">"&lt;/option&gt;\n"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;endwhile;<br>&nbsp;&nbsp;&nbsp;&nbsp;return </font><font color="#0000bb">$options</font><font color="#007700">;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;if (!</font><font color="#0000bb">jeadmin</font><font color="#007700">()) return;<br>&nbsp;&nbsp;</font><font color="#0000bb">$BudemeZobrazovat</font><font color="#007700">=</font><font color="#0000bb">true</font><font color="#007700">;<br>&nbsp;&nbsp;if (!empty(</font><font color="#0000bb">$_POST</font><font color="#007700">)) </font><font color="#ff8000">// už se odeslalo<br>&nbsp;&nbsp;</font><font color="#007700">{<br>&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"odesli"</font><font color="#007700">]==</font><font color="#dd0000">"Přidat píseň"</font><font color="#007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ((</font><font color="#0000bb">strlen </font><font color="#007700">(</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"nazevpisne"</font><font color="#007700">])&gt;</font><font color="#0000bb">50</font><font color="#007700">) | </font><font color="#0000bb">strlen </font><font color="#007700">(</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"nazevpisne"</font><font color="#007700">])&lt;</font><font color="#0000bb">3</font><font color="#007700">) echo </font><font color="#dd0000">"Název písně musí mít 3-50 znaků"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">mysql_query </font><font color="#007700">(</font><font color="#dd0000">"insert into pisne (nazev) values ('"</font><font color="#007700">.</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"nazevpisne"</font><font color="#007700">].</font><font color="#dd0000">"');"</font><font color="#007700">, </font><font color="#0000bb">$GLOBALS</font><font color="#007700">[</font><font color="#dd0000">"link"</font><font color="#007700">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$chyba </font><font color="#007700">= </font><font color="#0000bb">mysql_error</font><font color="#007700">(</font><font color="#0000bb">$GLOBALS</font><font color="#007700">[</font><font color="#dd0000">"link"</font><font color="#007700">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000bb">$chyba</font><font color="#007700">===</font><font color="#dd0000">''</font><font color="#007700">) </font><font color="#0000bb">$BudemeZobrazovat</font><font color="#007700">=</font><font color="#0000bb">false</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else echo </font><font color="#dd0000">"Píseň NEBYLA přidána. Databáze vrátila chybu $chyba"</font><font color="#007700">;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;elseif (</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"odesli"</font><font color="#007700">]==</font><font color="#dd0000">"Přidat album"</font><font color="#007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ((</font><font color="#0000bb">strlen </font><font color="#007700">(</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"nazevalba"</font><font color="#007700">])&gt;</font><font color="#0000bb">50</font><font color="#007700">) | </font><font color="#0000bb">strlen </font><font color="#007700">(</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"nazevalba"</font><font color="#007700">])&lt;</font><font color="#0000bb">3</font><font color="#007700">) echo </font><font color="#dd0000">"Název alba musí mít 3-50 znaků"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">mysql_query </font><font color="#007700">(</font><font color="#dd0000">"insert into alba (nazev) values ('"</font><font color="#007700">.</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"nazevalba"</font><font color="#007700">].</font><font color="#dd0000">"');"</font><font color="#007700">, </font><font color="#0000bb">$GLOBALS</font><font color="#007700">[</font><font color="#dd0000">"link"</font><font color="#007700">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$chyba </font><font color="#007700">= </font><font color="#0000bb">mysql_error</font><font color="#007700">(</font><font color="#0000bb">$GLOBALS</font><font color="#007700">[</font><font color="#dd0000">"link"</font><font color="#007700">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000bb">$chyba</font><font color="#007700">===</font><font color="#dd0000">''</font><font color="#007700">) </font><font color="#0000bb">$BudemeZobrazovat</font><font color="#007700">=</font><font color="#0000bb">false</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else echo </font><font color="#dd0000">"Album NEBYLO přidáno. Databáze vrátila chybu $chyba"</font><font color="#007700">;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;elseif (</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"odesli"</font><font color="#007700">]==</font><font color="#dd0000">"Přidat píseň do alba"</font><font color="#007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">mysql_query </font><font color="#007700">(</font><font color="#dd0000">"insert into obsahyalb (album, pisen) values ("</font><font color="#007700">.</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"zaradit_album"</font><font color="#007700">].</font><font color="#dd0000">","</font><font color="#007700">.</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"zaradit_pisen"</font><font color="#007700">].</font><font color="#dd0000">");"</font><font color="#007700">, </font><font color="#0000bb">$GLOBALS</font><font color="#007700">[</font><font color="#dd0000">"link"</font><font color="#007700">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$chyba </font><font color="#007700">= </font><font color="#0000bb">mysql_error</font><font color="#007700">(</font><font color="#0000bb">$GLOBALS</font><font color="#007700">[</font><font color="#dd0000">"link"</font><font color="#007700">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000bb">$chyba</font><font color="#007700">===</font><font color="#dd0000">''</font><font color="#007700">) </font><font color="#0000bb">$BudemeZobrazovat</font><font color="#007700">=</font><font color="#0000bb">false</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else echo </font><font color="#dd0000">"Píseň NEBYLA přidána do alba. Databáze vrátila chybu $chyba"</font><font color="#007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;elseif (</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"odesli"</font><font color="#007700">]==</font><font color="#dd0000">"Odebrat píseň z alba"</font><font color="#007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">mysql_query </font><font color="#007700">(</font><font color="#dd0000">"delete from obsahyalb where album="</font><font color="#007700">.</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"zaradit_album"</font><font color="#007700">].</font><font color="#dd0000">" and pisen="</font><font color="#007700">.</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"zaradit_pisen"</font><font color="#007700">].</font><font color="#dd0000">" limit 1;"</font><font color="#007700">, </font><font color="#0000bb">$GLOBALS</font><font color="#007700">[</font><font color="#dd0000">"link"</font><font color="#007700">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$chyba </font><font color="#007700">= </font><font color="#0000bb">mysql_error</font><font color="#007700">(</font><font color="#0000bb">$GLOBALS</font><font color="#007700">[</font><font color="#dd0000">"link"</font><font color="#007700">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000bb">$chyba</font><font color="#007700">===</font><font color="#dd0000">''</font><font color="#007700">) </font><font color="#0000bb">$BudemeZobrazovat</font><font color="#007700">=</font><font color="#0000bb">false</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else echo </font><font color="#dd0000">"Píseň NEBYLA odebrána z alba. Databáze vrátila chybu $chyba"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>if (</font><font color="#0000bb">$BudemeZobrazovat</font><font color="#007700">):</font><font color="#0000bb">?&gt;<br></font>&nbsp;&nbsp;&lt;form method="post" action="index.php?clanek=zadejdiskografii"&gt;<br>&nbsp;&nbsp;&lt;table&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;Název písně:&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;&lt;input name="nazevpisne" value="<font color="#0000bb">&lt;?</font><font color="#007700">echo </font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"nazevpisne"</font><font color="#007700">]</font><font color="#0000bb">?&gt;</font>"&gt;&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td
colspan="2"&gt;&lt;input type="Submit" name="odesli" value="Přidat
píseň"&gt;&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br>&nbsp;&nbsp;&lt;/table&gt;<br>&nbsp;&nbsp;&lt;/form&gt;<br><br>&nbsp;&nbsp;&lt;form method="post" action="index.php?clanek=zadejdiskografii"&gt;<br>&nbsp;&nbsp;&lt;table&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;Název alba:&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;&lt;input name="nazevalba" value="<font color="#0000bb">&lt;?</font><font color="#007700">echo </font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"nazevalba"</font><font color="#007700">]</font><font color="#0000bb">?&gt;</font>"&gt;&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td
colspan="2"&gt;&lt;input type="Submit" name="odesli" value="Přidat
album"&gt;&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br>&nbsp;&nbsp;&lt;/table&gt;<br>&nbsp;&nbsp;&lt;/form&gt;<br><br>&nbsp;&nbsp;&lt;form method="post" action="index.php?clanek=zadejdiskografii"&gt;<br>&nbsp;&nbsp;&lt;table&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;Název alba:&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;Název písně:&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;select name="zaradit_album"&gt;<font color="#0000bb">&lt;?</font><font color="#007700">echo </font><font color="#0000bb">naplnseznam</font><font color="#007700">(</font><font color="#dd0000">"alba"</font><font color="#007700">,</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"zaradit_album"</font><font color="#007700">])</font><font color="#0000bb">?&gt;</font>&lt;/select&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;select name="zaradit_pisen"&gt;<font color="#0000bb">&lt;?</font><font color="#007700">echo </font><font color="#0000bb">naplnseznam</font><font color="#007700">(</font><font color="#dd0000">"pisne"</font><font color="#007700">,</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"zaradit_pisen"</font><font color="#007700">])</font><font color="#0000bb">?&gt;</font>&lt;/select&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td colspan="2"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input type="Submit" name="odesli" value="Přidat píseň do alba"&gt;&amp;nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input type="Submit" name="odesli" value="Odebrat píseň z alba"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br>&nbsp;&nbsp;&lt;/table&gt;<br>&nbsp;&nbsp;&lt;/form&gt;<br><font color="#0000bb">&lt;?</font><font color="#007700">else:</font><font color="#0000bb">?&gt;</font>&nbsp;&nbsp;<br>&nbsp;&nbsp;&lt;p&gt;Změna byla zapsána. &lt;a href="index.php?clanek=zadejdiskografii"&gt;Zadat diskografii&lt;/a&gt;&lt;/p&gt;<br><font color="#0000bb">&lt;?</font><font color="#007700">endif;</font><font color="#0000bb">?&gt;<br></font><br></font>
</code>
</body></html>