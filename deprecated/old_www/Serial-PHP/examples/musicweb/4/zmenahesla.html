<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head>  <body><code><font color="#000000">
<font color="#0000bb">&lt;?<br>&nbsp;&nbsp;</font><font color="#ff8000">// tělo skriptu - nejprve si vytvoříme odkaz na databázi<br>&nbsp;&nbsp;</font><font color="#0000bb">$link</font><font color="#007700">=</font><font color="#0000bb">mysql_connect</font><font color="#007700">(</font><font color="#0000bb">SQL_HOST</font><font color="#007700">, </font><font color="#0000bb">SQL_USERNAME</font><font color="#007700">, </font><font color="#0000bb">SQL_PASSWORD</font><font color="#007700">);<br>&nbsp;&nbsp;</font><font color="#0000bb">mysql_select_db</font><font color="#007700">(</font><font color="#0000bb">SQL_DBNAME</font><font color="#007700">);<br>&nbsp;&nbsp;<br>&nbsp;&nbsp;</font><font color="#0000bb">$BudemeZobrazovat</font><font color="#007700">=</font><font color="#0000bb">true</font><font color="#007700">;<br>&nbsp;&nbsp;if (!empty(</font><font color="#0000bb">$_POST</font><font color="#007700">)) </font><font color="#ff8000">// už se odeslalo<br>&nbsp;&nbsp;</font><font color="#007700">{<br>&nbsp;&nbsp;&nbsp;&nbsp;if ((</font><font color="#0000bb">strlen </font><font color="#007700">(</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"heslo"</font><font color="#007700">])&gt;</font><font color="#0000bb">50</font><font color="#007700">) | </font><font color="#0000bb">strlen </font><font color="#007700">(</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"heslo"</font><font color="#007700">])&lt;</font><font color="#0000bb">3</font><font color="#007700">) echo </font><font color="#dd0000">"Heslo musí mít 3-50 znaků"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff8000">// kontolou jsme prošli<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$BudemeZobrazovat</font><font color="#007700">=</font><font color="#0000bb">false</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff8000">// poděkujeme uživateli<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">echo </font><font color="#dd0000">"Vaše heslo bylo změněno"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff8000">// uložíme změny do databáze<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">if (isset(</font><font color="#0000bb">$_SESSION</font><font color="#007700">[</font><font color="#dd0000">"id"</font><font color="#007700">])) </font><font color="#0000bb">mysql_query </font><font color="#007700">(</font><font color="#dd0000">"update uzivatele set heslo = '"</font><font color="#007700">.</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"heslo"</font><font color="#007700">].</font><font color="#dd0000">"' where id="</font><font color="#007700">.</font><font color="#0000bb">$_SESSION</font><font color="#007700">[</font><font color="#dd0000">"id"</font><font color="#007700">].</font><font color="#dd0000">";"</font><font color="#007700">, </font><font color="#0000bb">$link</font><font color="#007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>if (</font><font color="#0000bb">$BudemeZobrazovat</font><font color="#007700">):</font><font color="#0000bb">?&gt;<br></font>&nbsp;&nbsp;&lt;form method="post" action="index.php?clanek=zmenahesla"&gt;<br>&nbsp;&nbsp;&lt;table&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;Nové heslo:&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;&lt;input name="heslo" type = "password" value="<font color="#0000bb">&lt;?</font><font color="#007700">echo </font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"heslo"</font><font color="#007700">]</font><font color="#0000bb">?&gt;</font>"&gt;&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td
colspan="2"&gt;&lt;input type="Submit" name="odesli" value="Změnit
heslo"&gt;&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br>&nbsp;&nbsp;&lt;/table&gt;<br>&nbsp;&nbsp;&lt;/form&gt;<br><font color="#0000bb">&lt;?</font><font color="#007700">endif;</font><font color="#0000bb">?&gt;<br></font>
</font>
</code>
</body></html>