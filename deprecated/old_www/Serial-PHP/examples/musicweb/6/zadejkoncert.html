<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head>  <body><code><font color="#000000">
<font color="#0000bb">&lt;?<br>&nbsp;&nbsp;</font><font color="#007700">function </font><font color="#0000bb">jedatum</font><font color="#007700">(</font><font color="#0000bb">$datum</font><font color="#007700">)<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff8000">//řetězec musí obsahovat dvě tečky, a po rozdělení těmito tečkami 3 čísla<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$test</font><font color="#007700">=</font><font color="#0000bb">explode</font><font color="#007700">(</font><font color="#dd0000">"."</font><font color="#007700">,</font><font color="#0000bb">$datum</font><font color="#007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;if(!(</font><font color="#0000bb">count</font><font color="#007700">(</font><font color="#0000bb">$test</font><font color="#007700">))==</font><font color="#0000bb">3</font><font color="#007700">) return </font><font color="#0000bb">false</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;return </font><font color="#0000bb">checkdate</font><font color="#007700">(</font><font color="#0000bb">$test</font><font color="#007700">[</font><font color="#0000bb">1</font><font color="#007700">],</font><font color="#0000bb">$test</font><font color="#007700">[</font><font color="#0000bb">0</font><font color="#007700">],</font><font color="#0000bb">$test</font><font color="#007700">[</font><font color="#0000bb">2</font><font color="#007700">]);<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<br>&nbsp;&nbsp;function </font><font color="#0000bb">jecas</font><font color="#007700">(</font><font color="#0000bb">$cas</font><font color="#007700">)<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff8000">//řetězec musí obsahovat jednu dvojtečku, a po rozdělení 2 čísla<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$test</font><font color="#007700">=</font><font color="#0000bb">explode</font><font color="#007700">(</font><font color="#dd0000">":"</font><font color="#007700">,</font><font color="#0000bb">$cas</font><font color="#007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;if(!(</font><font color="#0000bb">count</font><font color="#007700">(</font><font color="#0000bb">$test</font><font color="#007700">))==</font><font color="#0000bb">2</font><font color="#007700">) return </font><font color="#0000bb">false</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if (!</font><font color="#0000bb">is_numeric</font><font color="#007700">(</font><font color="#0000bb">$test</font><font color="#007700">[</font><font color="#0000bb">0</font><font color="#007700">])) return </font><font color="#0000bb">false</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if (!</font><font color="#0000bb">is_numeric</font><font color="#007700">(</font><font color="#0000bb">$test</font><font color="#007700">[</font><font color="#0000bb">1</font><font color="#007700">])) return </font><font color="#0000bb">false</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if ((</font><font color="#0000bb">$test</font><font color="#007700">[</font><font color="#0000bb">0</font><font color="#007700">]&lt;</font><font color="#0000bb">0</font><font color="#007700">) | (</font><font color="#0000bb">$test</font><font color="#007700">[</font><font color="#0000bb">0</font><font color="#007700">]&gt;</font><font color="#0000bb">23</font><font color="#007700">)) return </font><font color="#0000bb">false</font><font color="#007700">; <br>&nbsp;&nbsp;&nbsp;&nbsp;if ((</font><font color="#0000bb">$test</font><font color="#007700">[</font><font color="#0000bb">1</font><font color="#007700">]&lt;</font><font color="#0000bb">0</font><font color="#007700">) | (</font><font color="#0000bb">$test</font><font color="#007700">[</font><font color="#0000bb">1</font><font color="#007700">]&gt;</font><font color="#0000bb">59</font><font color="#007700">)) return </font><font color="#0000bb">false</font><font color="#007700">; <br>&nbsp;&nbsp;&nbsp;&nbsp;return </font><font color="#0000bb">true</font><font color="#007700">;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;function </font><font color="#0000bb">sqldatum </font><font color="#007700">(</font><font color="#0000bb">$datum</font><font color="#007700">)<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$test</font><font color="#007700">=</font><font color="#0000bb">explode</font><font color="#007700">(</font><font color="#dd0000">"."</font><font color="#007700">,</font><font color="#0000bb">$datum</font><font color="#007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;return </font><font color="#0000bb">$test</font><font color="#007700">[</font><font color="#0000bb">2</font><font color="#007700">].</font><font color="#dd0000">"-"</font><font color="#007700">.</font><font color="#0000bb">$test</font><font color="#007700">[</font><font color="#0000bb">1</font><font color="#007700">].</font><font color="#dd0000">"-"</font><font color="#007700">.</font><font color="#0000bb">$test</font><font color="#007700">[</font><font color="#0000bb">0</font><font color="#007700">];&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;<br>&nbsp;&nbsp;if (!</font><font color="#0000bb">jeadmin</font><font color="#007700">()) return;<br>&nbsp;&nbsp;</font><font color="#0000bb">$BudemeZobrazovat</font><font color="#007700">=</font><font color="#0000bb">true</font><font color="#007700">;<br>&nbsp;&nbsp;if (!empty(</font><font color="#0000bb">$_POST</font><font color="#007700">)) </font><font color="#ff8000">// už se odeslalo<br>&nbsp;&nbsp;</font><font color="#007700">{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff8000">/*<br>&nbsp;&nbsp;&nbsp;&nbsp;budeme kontrolovat následující věci:<br>&nbsp;&nbsp;&nbsp;&nbsp;1) formát data<br>&nbsp;&nbsp;&nbsp;&nbsp;2) formát času<br>&nbsp;&nbsp;&nbsp;&nbsp;3) místo - 3 až 50 znaků<br>&nbsp;&nbsp;&nbsp;&nbsp;*/<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">if (!</font><font color="#0000bb">jedatum</font><font color="#007700">(</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"datum"</font><font color="#007700">])) echo </font><font color="#dd0000">"Formát data není platný"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;elseif (!</font><font color="#0000bb">jecas</font><font color="#007700">(</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"cas"</font><font color="#007700">])) echo </font><font color="#dd0000">"Formát času není platný"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;elseif ((</font><font color="#0000bb">strlen </font><font color="#007700">(</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"misto"</font><font color="#007700">])&gt;</font><font color="#0000bb">50</font><font color="#007700">) | </font><font color="#0000bb">strlen </font><font color="#007700">(</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"misto"</font><font color="#007700">])&lt;</font><font color="#0000bb">3</font><font color="#007700">)echo </font><font color="#dd0000">"Místo konání koncertu musí mít 3-50 znaků"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#ff8000">// pokusíme se uložit koncert...<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">mysql_query </font><font color="#007700">(</font><font color="#dd0000">"insert into koncerty (datum, cas, misto) values ('"</font><font color="#007700">.</font><font color="#0000bb">sqldatum</font><font color="#007700">(</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"datum"</font><font color="#007700">]).</font><font color="#dd0000">"', '"</font><font color="#007700">.</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"cas"</font><font color="#007700">].</font><font color="#dd0000">"', '"</font><font color="#007700">.</font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"misto"</font><font color="#007700">].</font><font color="#dd0000">"');"</font><font color="#007700">, </font><font color="#0000bb">$GLOBALS</font><font color="#007700">[</font><font color="#dd0000">"link"</font><font color="#007700">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$chyba </font><font color="#007700">= </font><font color="#0000bb">mysql_error</font><font color="#007700">(</font><font color="#0000bb">$GLOBALS</font><font color="#007700">[</font><font color="#dd0000">"link"</font><font color="#007700">]);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000bb">$chyba</font><font color="#007700">===</font><font color="#dd0000">''</font><font color="#007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$BudemeZobrazovat</font><font color="#007700">=</font><font color="#0000bb">false</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$path</font><font color="#007700">=</font><font color="#0000bb">SubStr</font><font color="#007700">(</font><font color="#0000bb">$_SERVER</font><font color="#007700">[</font><font color="#dd0000">"SCRIPT_NAME"</font><font color="#007700">], </font><font color="#0000bb">0</font><font color="#007700">, </font><font color="#0000bb">StrRPos</font><font color="#007700">(</font><font color="#0000bb">$_SERVER</font><font color="#007700">[</font><font color="#dd0000">"SCRIPT_NAME"</font><font color="#007700">],</font><font color="#dd0000">"/"</font><font color="#007700">)).</font><font color="#dd0000">"/index.php?clanek=koncerty"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">Header</font><font color="#007700">(</font><font color="#dd0000">"Location: http://"</font><font color="#007700">.</font><font color="#0000bb">$_SERVER</font><font color="#007700">[</font><font color="#dd0000">"SERVER_NAME"</font><font color="#007700">].</font><font color="#dd0000">":"</font><font color="#007700">.</font><font color="#0000bb">$_SERVER</font><font color="#007700">[</font><font color="#dd0000">"SERVER_PORT"</font><font color="#007700">].</font><font color="#0000bb">$path</font><font color="#007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#dd0000">"Koncert NEBYL přidán. Databáze vrátila chybu&lt;BR&gt;"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#0000bb">$chyba</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>if (</font><font color="#0000bb">$BudemeZobrazovat</font><font color="#007700">):</font><font color="#0000bb">?&gt;<br></font>&nbsp;&nbsp;&lt;form method="post" action="index.php?clanek=zadejkoncert"&gt;<br>&nbsp;&nbsp;&lt;table&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;Datum:&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;&lt;input name="datum" value="<font color="#0000bb">&lt;?</font><font color="#007700">echo </font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"datum"</font><font color="#007700">]</font><font color="#0000bb">?&gt;</font>"&gt;&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;ve formátu d.m.yyyy&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;Čas:&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;&lt;input name="cas" value="<font color="#0000bb">&lt;?</font><font color="#007700">echo </font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"cas"</font><font color="#007700">]</font><font color="#0000bb">?&gt;</font>"&gt;&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;ve formátu hh:mm&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;Místo:&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;&lt;input name="misto" value="<font color="#0000bb">&lt;?</font><font color="#007700">echo </font><font color="#0000bb">$_POST</font><font color="#007700">[</font><font color="#dd0000">"misto"</font><font color="#007700">]</font><font color="#0000bb">?&gt;</font>"&gt;&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;&amp;nbsp;&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;tr&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;td
colspan="2"&gt;&lt;input type="Submit" name="odesli" value="Přidat
koncert"&gt;&lt;/td&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/tr&gt;<br>&nbsp;&nbsp;&lt;/table&gt;<br>&nbsp;&nbsp;&lt;/form&gt;<br><font color="#0000bb">&lt;?</font><font color="#007700">endif;</font><font color="#0000bb">?&gt;<br></font><br></font>
</code>
</body></html>