<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head>  <body><code><font color="#000000">
&lt;head&gt;<br>&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;<br>&lt;/head&gt;<br>&lt;h1&gt;Naše kniha hostů&lt;/h1&gt;<br>&lt;p&gt;&lt;a href="40_insert.php"&gt;Vložit nový záznam do knihy hostů&lt;/a&gt;&lt;/p&gt;<br><font color="#0000bb">&lt;?<br>&nbsp;&nbsp;define </font><font color="#007700">(</font><font color="#dd0000">"ROWS"</font><font color="#007700">, </font><font color="#0000bb">10</font><font color="#007700">);<br>&nbsp;&nbsp;</font><font color="#ff8000">// zde je include souboru s konstantami<br>&nbsp;&nbsp;</font><font color="#0000bb">mysql_connect</font><font color="#007700">(</font><font color="#0000bb">SQL_HOST</font><font color="#007700">, </font><font color="#0000bb">SQL_USERNAME</font><font color="#007700">, </font><font color="#0000bb">SQL_PASSWORD</font><font color="#007700">);<br>&nbsp;&nbsp;</font><font color="#0000bb">mysql_select_db</font><font color="#007700">(</font><font color="#0000bb">SQL_DBNAME</font><font color="#007700">);<br>&nbsp;&nbsp;if (!isset(</font><font color="#0000bb">$_GET</font><font color="#007700">[</font><font color="#dd0000">"celkem"</font><font color="#007700">])) </font><font color="#ff8000">//pokud nevíme, kolik bude záznamů tak to zjistíme... <br>&nbsp;&nbsp;</font><font color="#007700">{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$vysledek</font><font color="#007700">=</font><font color="#0000bb">mysql_query</font><font color="#007700">(</font><font color="#dd0000">"select count(*) as pocet from kniha_hostu"</font><font color="#007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$zaznam</font><font color="#007700">=</font><font color="#0000bb">mysql_fetch_array</font><font color="#007700">(</font><font color="#0000bb">$vysledek</font><font color="#007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$celkem</font><font color="#007700">=</font><font color="#0000bb">$zaznam</font><font color="#007700">[</font><font color="#dd0000">"pocet"</font><font color="#007700">];<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;else<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$celkem</font><font color="#007700">=</font><font color="#0000bb">$_GET</font><font color="#007700">[</font><font color="#dd0000">"celkem"</font><font color="#007700">];<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;if (</font><font color="#0000bb">$celkem</font><font color="#007700">&gt;</font><font color="#0000bb">ROWS</font><font color="#007700">) <br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;if (!isset(</font><font color="#0000bb">$_GET</font><font color="#007700">[</font><font color="#dd0000">"od"</font><font color="#007700">])) </font><font color="#0000bb">$od</font><font color="#007700">=</font><font color="#0000bb">1</font><font color="#007700">; else </font><font color="#0000bb">$od</font><font color="#007700">=</font><font color="#0000bb">$_GET</font><font color="#007700">[</font><font color="#dd0000">"od"</font><font color="#007700">]; <br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$vysledek</font><font color="#007700">=</font><font color="#0000bb">mysql_query</font><font color="#007700">(</font><font color="#dd0000">"select cas, vzkaz from kniha_hostu order by cas desc"</font><font color="#007700">.</font><font color="#dd0000">" limit "</font><font color="#007700">.(</font><font color="#0000bb">$od</font><font color="#007700">-</font><font color="#0000bb">1</font><font color="#007700">).</font><font color="#dd0000">", "</font><font color="#007700">.</font><font color="#0000bb">ROWS</font><font color="#007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#dd0000">"Záznamů: "</font><font color="#007700">.</font><font color="#0000bb">$od</font><font color="#007700">.</font><font color="#dd0000">"-"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo ((</font><font color="#0000bb">$od</font><font color="#007700">+</font><font color="#0000bb">ROWS</font><font color="#007700">-</font><font color="#0000bb">1</font><font color="#007700">)&lt;=</font><font color="#0000bb">$celkem</font><font color="#007700">)?(</font><font color="#0000bb">$od</font><font color="#007700">+</font><font color="#0000bb">ROWS</font><font color="#007700">-</font><font color="#0000bb">1</font><font color="#007700">):</font><font color="#0000bb">$celkem</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#dd0000">" z celkem $celkem&amp;nbsp;&amp;nbsp;&amp;nbsp;"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000bb">$od</font><font color="#007700">==</font><font color="#0000bb">1</font><font color="#007700">) echo </font><font color="#dd0000">"Začátek&amp;nbsp;|&amp;nbsp;"</font><font color="#007700">; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else echo </font><font color="#dd0000">"&lt;a href=\""</font><font color="#007700">.</font><font color="#0000bb">$_SERVER</font><font color="#007700">[</font><font color="#dd0000">"PHP_SELF"</font><font color="#007700">].</font><font color="#dd0000">"?celkem=$celkem&amp;amp;od=1\"&gt;Začátek&lt;/a&gt;&amp;nbsp;|&amp;nbsp;"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000bb">$od</font><font color="#007700">&lt;</font><font color="#0000bb">ROWS</font><font color="#007700">) echo </font><font color="#dd0000">"Předchozí&amp;nbsp;|&amp;nbsp;"</font><font color="#007700">; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else echo </font><font color="#dd0000">"&lt;a href=\""</font><font color="#007700">.</font><font color="#0000bb">$_SERVER</font><font color="#007700">[</font><font color="#dd0000">"PHP_SELF"</font><font color="#007700">].</font><font color="#dd0000">"?celkem=$celkem&amp;amp;od="</font><font color="#007700">.(</font><font color="#0000bb">$od</font><font color="#007700">-</font><font color="#0000bb">ROWS</font><font color="#007700">).</font><font color="#dd0000">"\"&gt;Předchozí&lt;/a&gt;&amp;nbsp;|&amp;nbsp;"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000bb">$od</font><font color="#007700">+</font><font color="#0000bb">ROWS</font><font color="#007700">&gt;</font><font color="#0000bb">$celkem</font><font color="#007700">) echo </font><font color="#dd0000">"Následující&amp;nbsp;|&amp;nbsp;"</font><font color="#007700">; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else echo </font><font color="#dd0000">"&lt;a href=\""</font><font color="#007700">.</font><font color="#0000bb">$_SERVER</font><font color="#007700">[</font><font color="#dd0000">"PHP_SELF"</font><font color="#007700">].</font><font color="#dd0000">"?celkem=$celkem&amp;amp;od="</font><font color="#007700">.(</font><font color="#0000bb">$od</font><font color="#007700">+</font><font color="#0000bb">ROWS</font><font color="#007700">).</font><font color="#dd0000">"\"&gt;Následující&lt;/a&gt;&amp;nbsp;|&amp;nbsp;"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000bb">$od</font><font color="#007700">&gt;</font><font color="#0000bb">$celkem</font><font color="#007700">-</font><font color="#0000bb">ROWS</font><font color="#007700">) echo </font><font color="#dd0000">"Konec&amp;nbsp;&lt;BR&gt;"</font><font color="#007700">; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else echo </font><font color="#dd0000">"&lt;a href=\""</font><font color="#007700">.</font><font color="#0000bb">$_SERVER</font><font color="#007700">[</font><font color="#dd0000">"PHP_SELF"</font><font color="#007700">].</font><font color="#dd0000">"?celkem=$celkem&amp;amp;od="</font><font color="#007700">.(</font><font color="#0000bb">$celkem</font><font color="#007700">-</font><font color="#0000bb">$celkem</font><font color="#007700">%</font><font color="#0000bb">ROWS</font><font color="#007700">+</font><font color="#0000bb">1</font><font color="#007700">).</font><font color="#dd0000">"\"&gt;Konec&lt;/a&gt;&lt;BR&gt;"</font><font color="#007700">;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;else<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000bb">$vysledek</font><font color="#007700">=</font><font color="#0000bb">mysql_query</font><font color="#007700">(</font><font color="#dd0000">"select * from kniha_hostu order by cas desc"</font><font color="#007700">);&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;echo </font><font color="#dd0000">"&lt;B&gt;Pokud jste vkládali HTML kód, je při zobrazení ignorován.&lt;/B&gt;&lt;BR&gt;\n"</font><font color="#007700">;<br>&nbsp;&nbsp;while (</font><font color="#0000bb">$zaznam</font><font color="#007700">=</font><font color="#0000bb">MySQL_Fetch_Array</font><font color="#007700">(</font><font color="#0000bb">$vysledek</font><font color="#007700">)) <br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#dd0000">"&lt;p&gt;"</font><font color="#007700">.</font><font color="#0000bb">date</font><font color="#007700">(</font><font color="#dd0000">"j.n.Y G:i:s"</font><font color="#007700">, (</font><font color="#0000bb">$zaznam</font><font color="#007700">[</font><font color="#dd0000">"cas"</font><font color="#007700">])).</font><font color="#dd0000">"&lt;BR&gt;\n"</font><font color="#007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo </font><font color="#0000bb">strip_tags</font><font color="#007700">(</font><font color="#0000bb">$zaznam</font><font color="#007700">[</font><font color="#dd0000">"vzkaz"</font><font color="#007700">]).</font><font color="#dd0000">"&lt;/p&gt;\n"</font><font color="#007700">;<br>&nbsp;&nbsp;}<br></font><font color="#0000bb">?&gt;<br></font>
</font>
</code>
</body></html>