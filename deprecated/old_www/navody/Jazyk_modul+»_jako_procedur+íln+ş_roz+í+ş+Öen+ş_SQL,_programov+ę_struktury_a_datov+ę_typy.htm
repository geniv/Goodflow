<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" dir="ltr" lang="cs"><head>

  
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="KEYWORDS" content="Jazyk modulů jako procedurální rozšíření SQL, programové struktury a datové typy">
<meta name="robots" content="index,follow">
<link rel="shortcut icon" href="http://student.cvut.cz/favicon.ico"><title>Jazyk modulů jako procedurální rozšíření SQL, programové struktury a datové typy - ČWUT</title>
    
    <style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/cwut/skins/cwutskin/main.css"; /*]]>*/</style>
    <link rel="stylesheet" type="text/css" media="print" href="Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL,_programov%C3%A9_struktury_a_datov%C3%A9_typy_soubory/commonPrint.css"><!--[if lt IE 5.5000]><style type="text/css">@import "/cwut/skins/cwutskin/IE50Fixes.css";</style><![endif]--><!--[if IE 5.5000]><style type="text/css">@import "/cwut/skins/cwutskin/IE55Fixes.css";</style><![endif]--><!--[if IE 6]><style type="text/css">@import "/cwut/skins/cwutskin/IE60Fixes.css";</style><![endif]--><!--[if IE]><script type="text/javascript" src="/cwut/skins/common/IEFixes.js"></script>
    <meta http-equiv="imagetoolbar" content="no" /><![endif]-->
    
    
    
    
    <script type="text/javascript" src="Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL,_programov%C3%A9_struktury_a_datov%C3%A9_typy_soubory/index.php"></script>    <script type="text/javascript" src="Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL,_programov%C3%A9_struktury_a_datov%C3%A9_typy_soubory/wikibits.js"></script>
    <style type="text/css">/*<![CDATA[*/
@import "/cwut/index.php?title=MediaWiki:Cwutskin.css&action=raw&ctype=text/css&smaxage=18000";
@import "/cwut/index.php?title=-&action=raw&gen=css";
/*]]>*/</style>            <script src="Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL,_programov%C3%A9_struktury_a_datov%C3%A9_typy_soubory/urchin.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      _uacct = "UA-82145-1";
       urchinTracker();
    </script></head><body class="ns-0">
  
    <div id="cwutTop"> 
    <a href="http://www.student.cvut.cz/cwut/"><img src="Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL,_programov%C3%A9_struktury_a_datov%C3%A9_typy_soubory/cwut-logo.gif" alt="CWUT logo"></a>
    </div>

    <div class="rozcestnik">
      <h5>SU Media:</h5>
      <a href="http://www.student.cvut.cz/" title="Studentský informační server ČVUT">Student</a> |
      <a href="http://strednik.su.cvut.cz/" title="Středník - časopis Studentské unie ČVUT">Středník</a> |
      <a href="http://www.student.cvut.cz/cwut/" title="Studentův wiki průvodce po ČVUT">ČWUT</a> |
      <a href="http://avc.sh.cvut.cz/" title="Audiovizuální centrum Silicon Hill">AVC SH</a> |
      <a href="http://www.radioakropolis.cz/" title="Studentské rádio Akropolis">Akropolis</a> |
      <a href="http://www.ikariera.cz/" title="Nabídky práce pro studenty">iKariéra</a> 
    </div>    
               
    <div id="globalWrapper">
      <div id="column-content">
	<div id="content">
	  <a name="top" id="contentTop"></a>
	  	  <h1 class="firstHeading">Jazyk modulů jako procedurální rozšíření SQL, programové struktury a datové typy</h1>
	  <div id="bodyContent">
	    <h3 id="siteSub">&lt;small&gt;Z ČWUT&lt;/small&gt;</h3>
	    <div id="contentSub"></div>
	    	    	    <!-- start content -->
	    <table id="toc" border="0"><tbody><tr id="toctitle"><td align="center">
<b>Obsah</b> <script type="text/javascript">showTocToggle("zobrazit","skrýt")</script><span class="toctoggle">[<a href="javascript:toggleToc()" class="internal"><span id="showlink" style="display: none;">zobrazit</span><span id="hidelink">skrýt</span></a>]</span>
</td></tr><tr id="tocinside"><td>
<div class="tocline"><a href="#Anonymn.C3.AD_program_v_jazyku_modul.C5.AF">1 Anonymní program v jazyku modulů</a><br></div>
<div class="tocline"><a href="#Do_datab.C3.A1ze_ulo.C5.BEen.C3.A9_procedury_a_funkce">2 Do databáze uložené procedury a funkce</a><br></div>
<div class="tocline"><a href="#Seskupen.C3.AD_ulo.C5.BEen.C3.BDch_procedur_a_funkc.C3.AD_do_bal.C3.ADk.C5.AF_.28package.29">3 Seskupení uložených procedur a funkcí do balíků (package)</a><br></div>
<div class="tocline"><a href="#Vlastn.C3.AD_o.C5.A1et.C5.99en.C3.AD_v.C3.BDjime.C4.8Dn.C3.BDch_stav.C5.AF_p.C5.99i_zpracov.C3.A1n.C3.AD_programu">4 Vlastní ošetření výjimečných stavů při zpracování programu</a><br></div>
<div class="tocline"><a href="#Ud.C3.A1lostn.C3.AD_programov.C3.A1n.C3.AD_pomoc.C3.AD_datab.C3.A1zov.C3.BDch_trigger.C5.AF">5 Událostní programování pomocí databázových triggerů</a><br></div>
<div class="tocline"><a href="#Datov.C3.A9_typy">6 Datové typy</a><br></div>
<div class="tocindent">
<p><a href="#Skal.C3.A1rn.C3.AD_typy">6.1 Skalární typy</a><br>
<a href="#Record">6.2 Record</a><br>
<a href="#Kurzor">6.3 Kurzor</a><br>
<a href="#Exception">6.4 Exception</a><br>
<a href="#Kolekce_.28kompozitn.C3.AD_datov.C3.A9_typy.29">6.5 Kolekce (kompozitní datové typy)</a><br>
<a href="#Table">6.6 Table</a><br>
</p>
</div>
</td></tr></tbody></table>
<div class="editsection" style="float: right; margin-left: 5px;">[<a href="http://student.cvut.cz/cwut/index.php?title=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy&amp;action=edit&amp;section=1" title="Jazyk modulů jako procedurální rozšíření SQL, programové struktury a datové typy">editovat</a>]</div><a name="Anonymn.C3.AD_program_v_jazyku_modul.C5.AF"></a><h2> Anonymní program v jazyku modulů </h2>
<ul><li>PL/SQL je proceduralni jazyk (cykly, podminky, funkce, procedury).
</li><li>Základem je blok (nepojmenovaný - anonymní, funkce, procedura).
</li><li>Bloky mohou být vnořené. Struktura bloku:
</li></ul>
<pre>[DECLARE -- declarations] 
BEGIN -- statements 
 [EXCEPTION-- handlers]
END;
</pre>
<p><br>
</p>
<ul><li>Deklarační sekce obsahuje deklarace proměnných, konstant a
kurzorů. Tato sekce může také obsahovat deklaraci uživatelsky
definovaných výjimek, které se vyskytují ve výkonné sekci. Tato sekce
není povinná.
</li></ul>
<ul><li>Výkonná sekce obsahuje funkční logiku a je to tedy aplikační
jádro programového bloku. Pomocí příkazů v této sekci lze manipulovat s
daty v databázi, tuto manipulaci obstarávají SQL příkazy. PL/SQL
příkazy naopak manipulují s daty v programovém bloku. Tato sekce je
povinná.
</li></ul>
<ul><li>Tato sekce obsahuje ošetření chybových stavů, které mohou nastat ve výkonné sekci. Tato sekce není povinná.
</li></ul>
<div class="editsection" style="float: right; margin-left: 5px;">[<a href="http://student.cvut.cz/cwut/index.php?title=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy&amp;action=edit&amp;section=2" title="Jazyk modulů jako procedurální rozšíření SQL, programové struktury a datové typy">editovat</a>]</div><a name="Do_datab.C3.A1ze_ulo.C5.BEen.C3.A9_procedury_a_funkce"></a><h2> Do databáze uložené procedury a funkce </h2>
<ul><li>Jedná se o část programu, který je (nebo by aspoň měl být)
jasně funkčně oddělený od svého okolí, má interface (seznam parametrů)
pro komunikaci s jinými moduly programu. Může mít vlastní lokální
proměnné neviditelné pro ostatní části programu.
</li></ul>
<ul><li>K Uložené proceduře lze chovat stejně jako ke každému jinému
objektu databáze (indexu, pohledu, triggeru apod.). Lze jí založit,
upravovat a smazat pomocí příkazů dotazovacího jazyka databáze (v
případě relační databáze obvykle pomocí příkazů DDL SQL).
</li></ul>
<pre>[CREATE [OR REPLACE]] PROCEDURE jmeno_procedury (parametry) IS|AS
blok ... 

[CREATE [OR REPLACE]] FUNCTION jmeno_funkce (parametry) RETURN datovy_typ IS|AS
blok ...
</pre>
<ul><li>Parametry
</li><li>IN - vstupni parametr (default)
</li><li>OUT - vystupni parametr
</li><li>IN OUT - vstupne/vystupni parametr
</li></ul>
<pre>CREATE OR REPLACE PROCEDURE inc(a IN OUT INTEGER) AS
BEGIN
 a&nbsp;:= a + 1;
END;
</pre>
<ul><li>volání 
</li></ul>
<pre>promenna&nbsp;:= jmeno_funkce(parametry);
jmeno_procedury(parametry);
</pre>
<div class="editsection" style="float: right; margin-left: 5px;">[<a href="http://student.cvut.cz/cwut/index.php?title=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy&amp;action=edit&amp;section=3" title="Jazyk modulů jako procedurální rozšíření SQL, programové struktury a datové typy">editovat</a>]</div><a name="Seskupen.C3.AD_ulo.C5.BEen.C3.BDch_procedur_a_funkc.C3.AD_do_bal.C3.ADk.C5.AF_.28package.29"></a><h2> Seskupení uložených procedur a funkcí do balíků (package) </h2>
<p>Uložené balíky procedur a funkcí slouží ke sdružení logicky spolu
souvisejících procedur a funkcí. Definice balíku představuje definici
rozhraní balíku a těla balíku&nbsp;:
</p>
<ul><li>Rozhraní
</li></ul>
<pre>CREATE OR REPLACE PACKAGE arithmetic AS
 usage INTEGER&nbsp;:= 0;
 FUNCTION  add(a IN INTEGER, b IN INTEGER) RETURN INTEGER;
 FUNCTION  sub(a IN INTEGER, b IN INTEGER) RETURN INTEGER;
 PROCEDURE inc(a IN OUT INTEGER);
END;
</pre>
<ul><li>tělo
</li></ul>
<pre>CREATE OR REPLACE PACKAGE BODY arithmetic AS
 FUNCTION  add(a IN INTEGER, b IN INTEGER) RETURN INTEGER IS
 BEGIN
   usage&nbsp;:= usage + 1;
   RETURN (a + b);
 END;
 FUNCTION  sub(a IN INTEGER, b IN INTEGER) RETURN INTEGER IS
 BEGIN
   usage&nbsp;:= usage + 1;
   RETURN (a - b);
 END;
 PROCEDURE inc(a IN OUT INTEGER) AS
 BEGIN
   usage&nbsp;:= usage + 1;
    a&nbsp;:= a + 1;
 END;
END;
</pre>
<ul><li>Příklad použití balíku&nbsp;: 
</li></ul>
<pre>DECLARE
  a INTEGER;
  b INTEGER;
BEGIN
   a&nbsp;:= 6;
  b&nbsp;:= arithmetic.add(a, 3);
  arithmetic.inc(b);
  dbms_output.put_line('Vysledek&nbsp;: '||b);
  dbms_output.put_line('Pouzito '||arithmetic.usage||' krat.');
END;
</pre>
<div class="editsection" style="float: right; margin-left: 5px;">[<a href="http://student.cvut.cz/cwut/index.php?title=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy&amp;action=edit&amp;section=4" title="Jazyk modulů jako procedurální rozšíření SQL, programové struktury a datové typy">editovat</a>]</div><a name="Vlastn.C3.AD_o.C5.A1et.C5.99en.C3.AD_v.C3.BDjime.C4.8Dn.C3.BDch_stav.C5.AF_p.C5.99i_zpracov.C3.A1n.C3.AD_programu"></a><h2> Vlastní ošetření výjimečných stavů při zpracování programu </h2>
<ul><li>Pri vyvolani vyjimky je preruseno provadeni programu a je
spusteno osetreni vyjimky. Existuje cela rada standardnich vyjimek
(jako deleni nulou, chybejici data, timeout), krome toho je mozne
vytvaret a osetrovat uzivatelsky definovane vyjimky.
</li></ul>
<pre>EXCEPTION
WHEN vyjimky THEN 
...
WHEN VALUE_ERROR or ZERO_DIVIDE THEN
...
WHEN OTHERS THEN
...
</pre>
<ul><li>Ne vsechny interni vyjimky jsou pojmenovane (jako napr. ZERO_DIVIDE), proto je muzeme osetrovat v casti OTHERS nebo pojmenovat:
</li></ul>
<pre>PRAGMA EXCEPTION_INIT(exception_name, Oracle_error_number);
</pre>
<ul><li>Napr:
</li></ul>
<pre>DECLARE
 deadlock_detected EXCEPTION;
 PRAGMA EXCEPTION_INIT(deadlock_detected, -60);
BEGIN
 ...
 EXCEPTION
 WHEN deadlock_detected THEN
 ...
END;
</pre>
<ul><li>Manualni spusteni vyjimky: prikaz <b>RAISE</b> vyjimka;
</li><li>Manualni spusteni vyjimky a predani chybove zpravy (az 2048 znaku) aplikaci:
</li></ul>
<pre>raise_application_error(error_number, message[, {TRUE | FALSE}]);
</pre>
<ul><li>Pro ziskani chyb po vytvoreni procedury/funkce s chybami pouzijte prikaz show errors.
</li></ul>
<div class="editsection" style="float: right; margin-left: 5px;">[<a href="http://student.cvut.cz/cwut/index.php?title=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy&amp;action=edit&amp;section=5" title="Jazyk modulů jako procedurální rozšíření SQL, programové struktury a datové typy">editovat</a>]</div><a name="Ud.C3.A1lostn.C3.AD_programov.C3.A1n.C3.AD_pomoc.C3.AD_datab.C3.A1zov.C3.BDch_trigger.C5.AF"></a><h2> Událostní programování pomocí databázových triggerů </h2>
<ul><li>Triggery jsou pojmenované PL/SQL bloky, které se automaticky
provedou v případě předem definované operace s daty. Tato operace může
být například vložení nového záznamu do tabulky, vymazání záznamu z
tabulky nebo editace záznamu v tabulce.
</li><li>Triggery se nejčastěji využívají k zajištění referenční integrity.
</li><li>Triggery jsou velmi podobné uloženým procedurám. Jako uložené
procedury i triggery jsou uložené v databázi, ale na rozdíl od procedur
se triggery nespouštějí přímo, ale jsou spouštěny nějakou událostí.
</li><li>Při vytváření triggeru je třeba určit, kdy se trigger
aktivuje, možnosti jsou před vykonáním příslušné operace (trigger
BEFORE), po jejím vykonání (trigger AFTER) nebo se trigger vykoná místo
příslušné operace (trigger INSTEAD OF). Také je třeba určit událost, na
kterou má příslušný trigger reagovat. Tato událost je například INSERT,
UPDATE nebo DELETE.
</li></ul>
<ul><li>Zjednodušená syntaxe pro vytvoření triggeru je:
</li></ul>
<pre>CREATE [OR REPLACE] TRIGGER trigger_name
 {BEFORE|AFTER} [INSTEAD OF] event1 [OR event2 OR event3] ON table_name
 [FOR EACH ROW]
PL/SQL Block;
</pre>
<p><b>event</b> -- událost na kterou reagujeme
</p><p><b>FOR EACH ROW</b> -- tato klauzule určuje, zda se trigger
spustí pro každý zpracovávaný řádek nebo pouze jednou, při zpracování
každého řádku se lze v těle triggeru odkazovat na změněné záznamy, na
původní záznamy se odkazujeme <b>:OLD</b>, na nové záznamy se odkazujeme <b>:NEW</b>
</p>
<div class="editsection" style="float: right; margin-left: 5px;">[<a href="http://student.cvut.cz/cwut/index.php?title=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy&amp;action=edit&amp;section=6" title="Jazyk modulů jako procedurální rozšíření SQL, programové struktury a datové typy">editovat</a>]</div><a name="Datov.C3.A9_typy"></a><h2> Datové typy</h2>
<ul><li>Skalární datové typy - slouží pro ukládání jedné hodnoty
</li><li>Kompozitní datové typy - slouží pro ukládání složitějších datových struktur jako jsou pole atd.
</li><li>Referenční datové typy - slouží pro uchování objektu sloužícího jako ukazatel (pointer)
</li><li>LOB typy - slouží pro uchování lokátorů (specifikují umístění LOB objektu)
</li></ul>
<div class="editsection" style="float: right; margin-left: 5px;">[<a href="http://student.cvut.cz/cwut/index.php?title=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy&amp;action=edit&amp;section=7" title="Jazyk modulů jako procedurální rozšíření SQL, programové struktury a datové typy">editovat</a>]</div><a name="Skal.C3.A1rn.C3.AD_typy"></a><h3> Skalární typy </h3>
<ul><li><b>VARCHAR2</b>(maximální_délka) - Základní typ pro uchování řetězcových proměnných proměnné délky. Maximální počet bajtů je 32 767.
</li><li><b>NUMBER</b>[(p,s)] Základní typ pro uchování celých i desetinných čísel (s pevnou i pohyblivou řádovou čárkou).
</li><li><b>DATE</b> Základní typ pro uchování data a času.
</li><li><b>CHAR</b>[(maximální_délka)] Základní typ pro uchování řetězcových proměnných pevné délky.
</li><li><b>LONG</b> Typ pro uchování rozsáhlých řetězcových proměnných proměnné délky. Maximální počet bajtů je 2 147 483 647.
</li><li><b>BOOLEAN</b> Základní typ pro uchování tří možných hodnot TRUE,FALSE nebo NULL
</li><li><b>BINARY_INTEGER</b> Typ určený pro uchování čísel v intervalu (-2 147 483647; 2 147 483 647)
</li><li><b>PLS_INTEGER</b> Typ určený pro uchování označených čísel v intervalu (-2 147 483 647; 2 147 483 647)
</li></ul>
<pre>v_job VARCHAR2(9);
v_country VARCHAR2(30)&nbsp;:= 'Czech Republic';
v_count BINARY_INTEGER&nbsp;:= 0;
v_total_sal NUMBER(9,2)&nbsp;:= 0;
v_order_date DATE&nbsp;:= SYSDATE + 7;
c_tax_rate CONSTANT NUMBER(3,2)&nbsp;:= 8.25;
v_valid BOOLEAN NOT NULL&nbsp;:= TRUE;
</pre>
<div class="editsection" style="float: right; margin-left: 5px;">[<a href="http://student.cvut.cz/cwut/index.php?title=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy&amp;action=edit&amp;section=8" title="Jazyk modulů jako procedurální rozšíření SQL, programové struktury a datové typy">editovat</a>]</div><a name="Record"></a><h3> Record </h3>
<ul><li>Datový typ „RECORD“ je vlastně datovým typem proměnné typu
záznam. Proměnná typu záznam obsahuje logicky svázanou skupinu datových
polí. Každé datové pole v proměnné typu záznam má svůj vlastní název a
datový typ.
</li></ul>
<p>V proměnné typu záznam se mohou vyskytnout pole s těmito datovými typy: 
</p>
<ul><li><ul><li>skalární datové typy
</li><li>datové typy „RECORD“
</li><li>datové typy „TABLE“
</li></ul>
</li><li>Pro proměnné typu záznam platí tyto zásady:
<ul><li>počet polí záznamu není omezen
</li><li>polím záznamu mohou být přiřazeny inicializační hodnoty
</li><li>pole záznamu mohou být definovány s omezením „NOT NULL“
</li><li>pole bez inicializační hodnoty je inicializováno jako „NULL“
</li><li>proměnné typu záznam je třeba deklarovat v deklarační sekci
</li><li>v proměnné typu záznam lze jako pole deklarovat jinou proměnnou typu záznam
</li></ul>
</li></ul>
<ul><li>Na jednotlivá pole v proměnné typu záznam se odkazujeme tečkovou notací. Například na pole <b>job</b> v proměnné typu záznam <b>emp_record</b> se odkážeme „emp_record.job“. Pro inicializaci pole v proměnné typu záznam použijeme tento zápis <b>emp_record.job&nbsp;: = ‘CLERK’</b>. V tomto příkladu se pole „job“ inicializuje hodnotou "CERK".
</li></ul>
<p><b>definice:</b>
</p>
<pre>TYPE type_name IS RECORD
(field_declaration[,field_declaration] … );
identifier type_name;
</pre>
<p><b>příklad</b>
</p>
<pre>DECLARE
 -- deklarace RECORDu
 TYPE emp_record_type IS RECORD
    (empno NUMBER(4) NOT NULL&nbsp;:= 100,
    ename emp.ename%TYPE,
    job emp.job%TYPE);
 -- deklarace promenne typu RECORD
 emp_record emp_record_type;
BEGIN
 -- ulozeni dat do promenne typu RECORD
  SELECT empno,ename,job INTO emp_record FROM emp WHERE empno=7499;
  -- zobrazeni informaci z promenne typu RECORD
END;
</pre>
<div class="editsection" style="float: right; margin-left: 5px;">[<a href="http://student.cvut.cz/cwut/index.php?title=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy&amp;action=edit&amp;section=9" title="Jazyk modulů jako procedurální rozšíření SQL, programové struktury a datové typy">editovat</a>]</div><a name="Kurzor"></a><h3> Kurzor </h3>
<ul><li>Kurzor je abstraktní datový typ umožňující procházet záznamy
vybrané dotazem, který je s kurzorem spojen. *Nad kurzorem jsou
definovány následující operace&nbsp;: <ul><li>OPEN - otevření kurzoru 
</li><li>FETCH - přečtení dalšího záznamu 
</li><li>CLOSE - zavření kurzoru
</li></ul>
</li></ul>
<ul><li>Nejprve je nutne kursor deklarovat v casti declare. Tim se vsak prikaz SELECT jeste nevykonava.
</li><li>Syntaxe deklarace kursoru:
</li></ul>
<pre>CURSOR cursor_name [(parameter[, parameter]...)][RETURN return_type] IS select_statement;
</pre>
<ul><li>Parametr vypada:
</li></ul>
<pre>cursor_parameter_name [IN] datatype [{:= | DEFAULT} expression]
</pre>
<ul><li>Příklad
</li></ul>
<pre>DECLARE
 tmp  osoby%ROWTYPE;
 CURSOR  plist IS
   SELECT * FROM osoby;
BEGIN
 OPEN plist;
 LOOP
   FETCH plist INTO tmp;
   EXIT WHEN plist%NOTFOUND;
   dbms_output.put_line(plist%ROWCOUNT||'. '||tmp.jmeno||' '||tmp.prijmeni);
 END LOOP;
 CLOSE plist;
END;
</pre>
<div class="editsection" style="float: right; margin-left: 5px;">[<a href="http://student.cvut.cz/cwut/index.php?title=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy&amp;action=edit&amp;section=10" title="Jazyk modulů jako procedurální rozšíření SQL, programové struktury a datové typy">editovat</a>]</div><a name="Exception"></a><h3> Exception </h3>
<div class="editsection" style="float: right; margin-left: 5px;">[<a href="http://student.cvut.cz/cwut/index.php?title=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy&amp;action=edit&amp;section=11" title="Jazyk modulů jako procedurální rozšíření SQL, programové struktury a datové typy">editovat</a>]</div><a name="Kolekce_.28kompozitn.C3.AD_datov.C3.A9_typy.29"></a><h3> Kolekce (kompozitní datové typy)</h3>
<ul><li>RECORD
</li><li>TABLE
</li><li>Nested TABLE
</li><li>VARRAY
</li><li>Kompozitní datové typy obecně slouží k uchování nějaké množiny
dat, v této množině se pak lze pomocí různých metod pohybovat a
zjišťovat hodnoty záznamů
</li></ul>
<p>uložených na požadované pozici.
</p>
<div class="editsection" style="float: right; margin-left: 5px;">[<a href="http://student.cvut.cz/cwut/index.php?title=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy&amp;action=edit&amp;section=12" title="Jazyk modulů jako procedurální rozšíření SQL, programové struktury a datové typy">editovat</a>]</div><a name="Table"></a><h3> Table </h3>
<ul><li>PL/SQL tabulka se liší od SQL Tabulky. PL/SQL tabulka obsahuje
uspořádaný seznam elementů stejného typu, je tedy podobná poli (array),
které je známé z jiných programovacích jazyků.. Každý element je
identifikován primárním klíčem, který určuje jeho jednoznačnou pozici.
</li><li>PL/SQL tabulka musí obsahovat dva atributy (sloupce):
<ul><li>primární klíč, který je datového typu „BINARY_INTEGER“ a indexuje PL/SQL tabulku
</li><li>sloupec se skalárním datovým typem nebo s datovým typem záznam (record)
</li></ul>
</li></ul>
<ul><li>PL/SQL tabulka není omezena počtem elementů, může tedy
dynamicky růst. Rozsah datového typu „BINARY_INTEGER“ je (-2147483647;
2147483647) , hodnota primárního klíče může tady nabývat i záporných
hodnot.
</li></ul>
<p><b>Vytvoření PL/SQL tabulky sestává ze dvou kroků:</b>
</p>
<ul><li>deklarace datového typu „TABLE“
</li></ul>
<pre>TYPE type_name IS TABLE OF
{column_type | variable%TYPE | table.column%TYPE | table%ROWTYPE }
[NOT NULL] INDEX BY BINARY_INTEGER&nbsp;;
</pre>
<ul><li>deklarace proměnné pro deklarovaný datový typ „TABLE“
</li></ul>
<pre>identifier type_name;
</pre>
<pre>DECLARE
 -- deklarace datového typu TABLE s pouzitim atributu %ROWTYPE
 TYPE emp_table_type IS TABLE OF
    emp%ROWTYPE INDEX BY BINARY_INTEGER;
 emp_table emp_table_type;
BEGIN
 -- ulozeni dat do promenne typu TABLE
 SELECT * INTO emp_table(1) FROM emp WHERE empno = 7369;
 SELECT * INTO emp_table(2) FROM emp WHERE empno = 7499;
 SELECT * INTO emp_table(3) FROM emp WHERE empno = 7521;
END;
</pre>
<!-- Saved in parser cache with key student:pcache:idhash:2263-1!1!0!1!0!1!0!!cs and timestamp 20080529172918 -->
<div class="printfooter">
Citováno z „<a href="http://student.cvut.cz/cwut/index.php/Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy">http://student.cvut.cz/cwut/index.php/Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy</a>“</div>
	    <div id="catlinks"><p class="catlinks"><a href="http://student.cvut.cz/cwut/index.php?title=Speci%C3%A1ln%C3%AD:Categories&amp;article=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy" title="Speciální:Categories">Kategorie</a>: <a href="http://student.cvut.cz/cwut/index.php/Kategorie:St%C3%A1tnice_FEL" title="Kategorie:Státnice FEL">Státnice FEL</a></p></div>	    <!-- end content -->
	    <div class="visualClear"></div>
	  </div>
	</div>
      </div>
  
      <div id="column-one">
	<div id="p-cactions" class="portlet">
	  <h5>Views</h5>
	  <ul>
	    <li id="ca-nstab-main" class="selected"><a href="http://student.cvut.cz/cwut/index.php/Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy">Článek</a></li><li id="ca-talk" class="new"><a href="http://student.cvut.cz/cwut/index.php?title=Diskuse:Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy&amp;action=edit">Diskuse</a></li><li id="ca-edit"><a href="http://student.cvut.cz/cwut/index.php?title=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy&amp;action=edit">Editovat</a></li><li id="ca-history"><a href="http://student.cvut.cz/cwut/index.php?title=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy&amp;action=history">Historie</a></li>	  </ul>
	</div>
	
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class="portlet" id="p-nav">
	  <h5>Navigace</h5>
	  <div class="pBody">
	    <ul>
	      	      <li id="n-mainpage"><a href="http://student.cvut.cz/cwut/index.php/Hlavn%C3%AD_strana">Hlavní strana</a></li>	      <li id="n-PruvodcePrvaka"><a href="http://student.cvut.cz/cwut/index.php/Pr%C5%AFvodce_prv%C3%A1ka">Průvodce prváka</a></li>	      <li id="n-recentchanges"><a href="http://student.cvut.cz/cwut/index.php/Speci%C3%A1ln%C3%AD:Recentchanges">Poslední změny</a></li>	      <li id="n-randompage"><a href="http://student.cvut.cz/cwut/index.php/Speci%C3%A1ln%C3%AD:Randompage">Náhodná stránka</a></li>	      <li id="n-help"><a href="http://student.cvut.cz/cwut/index.php/N%C3%A1pov%C4%9Bda:Obsah">Nápověda</a></li>	    </ul>
	  </div>
	</div>
	<div id="p-search" class="portlet">
	  <h5><label for="searchInput">Hledat</label></h5>
	  <div class="pBody">
	    <form name="searchform" action="/cwut/index.php/Speci%C3%A1ln%C3%AD:Search" id="searchform">
	      <input id="searchInput" name="search" accesskey="f" value="" type="text">
	      <input name="go" class="searchButton" id="searchGoButton" value="Jít na" type="submit">&nbsp;<input name="fulltext" class="searchButton" value="Hledat" type="submit">
	    </form>
	  </div>
	</div>
	
	<div class="portlet" id="p-tb">
	  <h5>Nástroje</h5>
	  <div class="pBody">
	    <ul>
		  		  <li id="t-whatlinkshere"><a href="http://student.cvut.cz/cwut/index.php?title=Speci%C3%A1ln%C3%AD:Whatlinkshere&amp;target=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy">Odkazuje sem</a></li>
		  		  <li id="t-recentchangeslinked"><a href="http://student.cvut.cz/cwut/index.php?title=Speci%C3%A1ln%C3%AD:Recentchangeslinked&amp;target=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy">Související změny</a></li>
		  	      	      	      	      	      	      	      	      	      <li id="t-specialpages"><a href="http://student.cvut.cz/cwut/index.php/Speci%C3%A1ln%C3%AD:Specialpages">Speciální stránky</a></li>	      	    </ul>
	  </div>
	</div>
	
	<div class="portlet" id="p-personal">
	  <h5 id="pt-userpage">Osobní nástroje</h5>
	  <div class="pBody">
	    <ul>
	    <li id="pt-login"><a href="http://student.cvut.cz/cwut/index.php?title=Speci%C3%A1ln%C3%AD:Userlogin&amp;returnto=Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL%2C_programov%C3%A9_struktury_a_datov%C3%A9_typy">Přihlašte se</a></li>	    </ul>
	  </div>
	</div>
	
	      </div><!-- end of the left (by default at least) column -->
      <div class="visualClear"></div>
      <div id="footer">
    <div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL,_programov%C3%A9_struktury_a_datov%C3%A9_typy_soubory/poweredby_mediawiki_88x31.png" alt="MediaWiki"></a></div>		<ul id="f-list">
	  <li id="f-lastmod">  Stránka byla naposledy editována v 10:18, 26. 1. 2008.</li>	  <li id="f-viewcount">Stránka byla zobrazena 524-krát.</li>	  	  	  <li id="f-about"><a href="http://student.cvut.cz/cwut/index.php/%C4%8CWUT" title="ČWUT">O&nbsp;ČWUT</a></li>	  <li id="f-disclaimer"><a href="http://student.cvut.cz/cwut/index.php/%C4%8CWUT:Vylou%C4%8Den%C3%AD_odpov%C4%9Bdnosti" title="ČWUT:Vyloučení odpovědnosti">Vyloučení odpovědnosti</a></li>	</ul>
      </div>
	<div id="footer">
      <ul id="f-list">
      <li><a href="http://www.cvut.cz/cz/educa/grantped/studgran.html"><img src="Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL,_programov%C3%A9_struktury_a_datov%C3%A9_typy_soubory/SGS.gif"></a></li>
      <li><a href="http://www.student.cvut.cz/cwut/index.php/Isc_Media"><img src="Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL,_programov%C3%A9_struktury_a_datov%C3%A9_typy_soubory/ISCM.gif"></a></li>
      <li><a href="http://www.su.cvut.cz/"><img src="Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL,_programov%C3%A9_struktury_a_datov%C3%A9_typy_soubory/SU.gif"></a></li>
      <li><a href="http://www.isc.cvut.cz/"><img src="Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL,_programov%C3%A9_struktury_a_datov%C3%A9_typy_soubory/ISC.gif"></a></li>
      <li><a href="http://www.cvut.iaeste.cz/"><img src="Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL,_programov%C3%A9_struktury_a_datov%C3%A9_typy_soubory/IAESTE.gif"></a></li>
      <li><a href="http://www.stormtype.com/"><img src="Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL,_programov%C3%A9_struktury_a_datov%C3%A9_typy_soubory/STORM.gif"></a></li>
      </ul>
      </div>

    </div>
    <!-- Served by hades in 0.16 secs. -->
  <div style="position: absolute; left: 0px; top: 0px; z-index: 1000000000 ! important; visibility: hidden; opacity: 1;" id="linkalert-box"><img src="Jazyk_modul%C5%AF_jako_procedur%C3%A1ln%C3%AD_roz%C5%A1%C3%AD%C5%99en%C3%AD_SQL,_programov%C3%A9_struktury_a_datov%C3%A9_typy_soubory/none-icon.png" id="linkalert-icon-1"></div></body></html>