<!doctype html public "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-1250">
<title>Zjišování práv z jazyka SQL</title>
<link rel='stylesheet' style='text/css' href='../function.css'>
</head>

<body bgcolor="#FFFFFF" text="#000000"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
	<td style="background-image: url(../images/bghead.jpg);
		background-position: right;
		background-repeat: no-repeat;">
	<table width="100%" border="0" cellpadding="0" cellspacing="0"
		style="background-image:none">
	<tr>
		<td style="background-image:none" height="46"
			width="15%"><img src="../images/title-cz.gif"
			width="255" height="33"
			alt="602SQL-Úplná dokumentace"
			title="602SQL - Úplná dokumentace"
			border="0"></td>
		<td width="33%" align="right"><a href="../xml/html/top.html"><img class="floatno"
			src="../images/index.gif"
			width="15" height="16"
			alt="Index" title="Zpìt na obsah"
			border="0" vspace="2"></a> &nbsp;
			 </td>
	</tr>
	</table>
	</td>
</tr>
</table><table class="navigace" border="0" width="100%"  bgcolor="#FFFFBF"><tr> <td
width="20" align="center"><img class="floatno" src="../images/prev.gif"
width="15" height="13" alt="&lt;&shy;" title="Pøedcházející téma"
border="0"></td><td width="25%"><a
href="HE_SQL2_PRAVA.htm">Práva a subjekty práva v SQL</a></td> <td width="25%"
align="right"><img class="floatno" src="../images/up.gif" width="13"
height="15" alt="Nahoru" title="O jednu úroveò vıš" border="0"
align="middle"></td><td width="25%"><a href="HE_SQL2_PRAVA.htm">Práva a subjekty práva v SQL</a></td>
<td width="25%" align="right">&nbsp;</td>
<td width="20" align="center">&nbsp;</td>
</tr></table>





<h1><a name="he_sql2_privils"></a>Zjišování práv z jazyka SQL</h1>

<p>Pro zjištìní <a href="HE_SQL2_PRAVA.htm">práv</a> zadaného <a href="../xml/html/userinfo.html">subjektu práva</a> k zadané tabulce nebo záznamùm tabulky se vyuívá pìtice predikátù <code>has_select_privil</code> (pro právo èíst), <code>has_update_privil</code> (pro právo pøepisovat), <code>has_delete_privil</code> (pro právo mazat záznamy), <code>has_insert_privil</code> (pro právo vkládat záznamy) a <code>has_grant_privil</code> (pro právo poskytovat své právo dalším subjektùm).</p>

<p>Právo èíst a právo pøepisovat se zjišuje pro kadı sloupec zvláš, ostatní práva pro celou tabulku najednou.</p>

<p>Predikáty se uívají jako souèást <a href="HE_SQL2_DOTAZOVYVYRAZ.htm">dotazového vırazu</a> SELECT: vıbìr tabulky ve FROM urèuje, pro jakou tabulku se práva zjišují, podmínka ve WHERE stanoví, u jakıch záznamù se práva zjišují (má-li tabulka povolena záznamová práva).</p>

<p>Predikáty mají následující formát:</p>

<pre><code>privil_predikáty ::= predikáty_pro_sloupce | predikáty pro tabulku
predikáty_pro_sloupce ::= { has_select_privil | has_update_privil } 
	( sloupec, druh [, jméno_subjektu, kategorie_subjektu ] )
predikáty_pro_tabulku ::= { has_delete_privil | has_insert_privil | has_grant_privil } 
	( druh [, jméno_subjektu, kategorie_subjektu ] )
druh ::= {0 | 1 | 2}
kategorie_subjektu ::= { CATEG_USER | CATEG_GROUP | CATEG_ROLE }</code></pre>

<p><b>Popis</b></p>

<p>U <i>predikátù_pro_sloupce</i> se musí urèit vdy jeden <i>sloupec</i> uvedenı v èásti SELECT dotazového vırazu, pro nìj se právo zjišuje. U ostatních predikátù (delete, insert a grant) se neuvádí, protoe tato práva se definují pro tabulku jako celek.</p>

<p>Podle hodnoty <i>druh</i> se rozlišuje, jaké právo se zjišuje:</p>

<table border=1 cols=2>

<tr valign="top">
<td width=11%><b>druh</b></td>
<td width=89%><b>vıznam</b></td>
</tr>

<tr valign="top">
<td width=11%>0</td>
<td width=89%>práva pøidìlená záznamu (nejde pro insert a pro tabulky bez záznamovıch práv)</td>
</tr>

<tr valign="top">
<td width=11%>1</td>
<td width=89%>práva pøidìlená tabulce</td>
</tr>

<tr valign="top">
<td width=11%>2</td>
<td width=89%>efektivní práva</td>
</tr>
</table><br>

<p>U predikátù je moné uvést dvojici parametrù <i>jméno_subjektu</i> a <i>kategorie_subjektu</i>. Je-li tato dvojice uvedena, zjišuje se právo tohoto subjektu, není-li uvedena, uvauje se pøihlášenı uivatel kladoucí dotaz. Pøi vyhodnocování se nekontroluje existence zadaného subjektu práva - neexistující subjekt práva nemá pøidìlena. </p>

<p>Efektivní práva v&nbsp;sobì zahrnují práva získaná náleením uivatele do skupin a obsazením do rolí. Nejsou zde zahrnuta zvláštní práva, která uivatel má pøi <a href="../xml/html/admin_mode.html">provádìní procedur a vyhodnocování dotazù</a>, pro nì je nastaven administrátorskı reim provozování.</p>

<p><b>Pouití:</b></p>

<p>vdy jako souèást dotazového vırazu SELECT:

<ul>
	<li>v klauzuli SELECT pro zjištìní práv:</li>
</ul>

<pre><code>SELECT has_select_privil(a,2,'anonymous',CATEG_USER, has_select_privil(b,2,'anonymous',CATEG_USER)
FROM PrivTab</code></pre>

<p>Vypsat práva ke ètení anonymního uivatele ke dvìma sloupcùm tabulky</p>

<pre><code>SELECT has_delete_privil(2,'everybody', CATEG_GROUP) INTO lze_smazat
FROM PrivTab
WHERE a=1;</code></pre>

<p>Pøedat do promìnné typu BIT pøíznak, má-li kadı právo smazat vybranı záznam</p>

<ul>
	<li>v podmínce WHERE</li>
</ul>

<pre><code>SELECT *
FROM PrivTab
WHERE has_select_privil(b,2,'junior_user',CATEG_ROLE)</code></pre>

<p>Vypsat jen ty záznamy, u kterıch má role JUNIOR_USER právo èíst sloupec B</p>

<p><b>Editace práv</b></p>

<p>K nastavení práv (pøidání nebo odebrání) pro zadanı subjekt k tabulce nebo k záznamùm tabulky se pouívá dvojice SQL pøíkazù <a href="HE_SQL2_GRANT.htm"><code>GRANT</code></a> a <a href="HE_SQL2_REVOKE.htm"><code>REVOKE</code></a>.</p>

<p><b>Viz</b></p>

<ul class='viz'>
 <li><a href="../xml/html/sqlrights.html">Kontrola práv pøi provádìní SQL pøíkazù</a> </li>
</ul>



<table class="navigace" border="0" width="100%"  bgcolor="#FFFFBF"><tr> <td
width="20" align="center"><img class="floatno" src="../images/prev.gif"
width="15" height="13" alt="&lt;&shy;" title="Pøedcházející téma"
border="0"></td><td width="25%"><a
href="HE_SQL2_PRAVA.htm">Práva a subjekty práva v SQL</a></td> <td width="25%"
align="right"><img class="floatno" src="../images/up.gif" width="13"
height="15" alt="Nahoru" title="O jednu úroveò vıš" border="0"
align="middle"></td><td width="25%"><a href="HE_SQL2_PRAVA.htm">Práva a subjekty práva v SQL</a></td>
<td width="25%" align="right">&nbsp;</td>
<td width="20" align="center">&nbsp;</td>
</tr></table>

</body>
</html>
