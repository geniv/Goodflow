<!doctype html public "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-1250">
<title>Specifikace dotazu v SQL</title>
<link rel='stylesheet' style='text/css' href='../function.css'>
</head>

<body bgcolor="#FFFFFF" text="#000000"><table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
	<td style="background-image: url(../images/bghead.jpg);
		background-position: right;
		background-repeat: no-repeat;">
	<table width="100%" border="0" cellpadding="0" cellspacing="0"
		style="background-image:none">
	<tr>
		<td style="background-image:none" height="46"
			width="15%"><img src="../images/title-cz.gif"
			width="255" height="33"
			alt="602SQL-Úplná dokumentace"
			title="602SQL - Úplná dokumentace"
			border="0"></td>
		<td width="33%" align="right"><a href="../xml/html/top.html"><img class="floatno"
			src="../images/index.gif"
			width="15" height="16"
			alt="Index" title="Zpìt na obsah"
			border="0" vspace="2"></a> &nbsp;
			 </td>
	</tr>
	</table>
	</td>
</tr>
</table><table class="navigace" border="0" width="100%"  bgcolor="#FFFFBF"><tr> <td
width="20" align="center"><img class="floatno" src="../images/prev.gif"
width="15" height="13" alt="&lt;&shy;" title="Pøedcházející téma"
border="0"></td><td width="25%"><a
href="HE_SQL2_ZOBECNENATABULKA.htm">Zobecnìná tabulka</a></td> <td width="25%"
align="right"><img class="floatno" src="../images/up.gif" width="13"
height="15" alt="Nahoru" title="O jednu úroveò vıš" border="0"
align="middle"></td><td width="25%"><a href="HE_SQL2_DOTAZY.htm">Dotazy</a></td>
<td width="25%" align="right"><a
href="HE_SQL2_DOTAZOVYVYRAZ.htm">Dotazovı vıraz</a></td><td width="20"
align="center"><img class="floatno" src="../images/next.gif" width="15"
height="13" alt="&shy;&gt;" title="Následující téma" border="0"></td>
</tr></table>




<h1><a name="he_sql2_specifikacedotazu"></a>Specifikace dotazu (SQL)</h1>

<pre><code>specifikace_dotazu ::= SELECT [ ALL | DISTINCT ] vıraz [ pøejmenování ] { , vıraz [ pøejmenování ] }… 
FROM zobecnìná tabulka { , zobecnìná tabulka }… 
[ WHERE podmínka_where ] 
[ GROUP BY vıraz_group { , vıraz_group }… ]
[ HAVING podmínka_having ]
pøejmenování ::= AS jméno</code></pre>

<p><i>Specifikace dotazu</i> vybere nebo vytvoøí mnoinu záznamù ze záznamù uvedenıch <a href="HE_SQL2_ZOBECNENATABULKA.htm"><i>zobecnìnıch tabulek</i></a>.</p>

<p>Je-li uvedeno DISTINCT, vyberou se pouze odlišné záznamy (jen ve sloupcích pevné velikosti). Je-li uvedeno ALL (nebo nic), vyberou se všechny vyhovující záznamy.</p>

<p>Je-li uvedena více ne jedna <i>zobecnìná tabulka</i>, provede se mezi nimi operace JOIN, tedy kadı záznam se spojí s kadım. Jinak se pouijí všechny záznamy <i>zobecnìné tabulky</i>.</p>

<p>Je-li uvedena klauzule WHERE, ze získanıch záznamù se vyberou pouze ty, na nich je <i>podmínka_where</i> splnìna.</p>

<p>Je-li uvedena klauzule GROUP BY, záznamy se rozèlení do skupin tak, e kadá skupina obsahuje záznamy se stejnımi hodnotami všech <i>vırazù_group</i>. </p>

<p>Je-li uvedena klauzule HAVING, vyberou se pouze ty skupiny, na nich je splnìna <i>podmínka having</i>.</p>

<p>Odpovìï na dotaz tvoøí sloupce s hodnotami <i>vırazù</i> na získanıch záznamech nebo skupinách záznamù. Aby bylo mono vyhodnotit <i>vırazy</i> nad skupinami, vyaduje se, aby kadı <i>vıraz</i>
<ul>
  <li> byl buï totonı s nìkterım <i>vırazem_group</i> </li>
  <li>aby byl vytvoøen tak, e má v rámci kadé skupiny stejnou hodnotu - napø. aby obsahoval odkazy na sloupce pouze jako argumenty agregaèních funkcí </li>
</ul>
Pokud nejsou tyto podmínky splnìné, není obsah tohoto vırazu v odpovìdi definován.</p>

<p>V <i>podmínce where</i> se nesmí vyskytovat agregaèní funkce (s vıjimkou <a href="HE_SQL2_SUBDOTAZ.htm">subdotazù</a>). Tyto funkce je mono pouít pouze ve <i>vırazech</i> v klauzuli SELECT a v <i>podmínce having</i>. Pokud <i>specifikace dotazu</i> neobsahuje GROUP BY, pak se tyto agregaèní funkce poèítají vzhledem k celé odpovìdi na dotaz, jinak se poèítají zvláš pro kadou skupinu.</p>

<p>Jména sloupcù v odpovìdi na dotaz závisejí na struktuøe <i>vırazù.</i> Pokud <i>vıraz</i> je tvoøen jménem sloupce nìkteré <i>zobecnìné tabulky</i>, pak si jméno zachová, jinak je unikátní jméno pøidìleno automaticky (napø. Expr1 apod.). Vzniknou-li zachováním jmen sloupcù duplikátní jména, mohou bıt automaticky odstranìna pomocí nastavení pøíznaku SQLOPT_DUPLIC_COLNAMES (256) ve funkci <a href="HE_F_SETSQLOPTION.htm"><code>Set_sql_option</code></a>. Také je moné jména sloupcù urèit ji ve specifikaci - pomocí klauzule AS.</p>

<p><i>Vıraz</i> za SELECT mùe také bıt <code>*</code> - pak se v odpovìdi objeví všechny sloupce všech zobecnìnıch tabulek. Je-li <i>vıraz</i> ve tvaru <code>zobecnìná tabulka.*</code>, budou v odpovìdi všechny sloupce zobecnìné tabulky. Je-li pouito klauzule <code>SELECT *</code>, nesmí ji následovat další vırazy. Mají-li se do vıbìru sloupcù zadaného pomocí <code>SELECT *</code> pøidat i systémové sloupce (zaèínající _w5_...) je rozlišeno pomocí pøíznaku SQLOPT_USE_SYS_COLS (8192) ve funkci <a href="HE_F_SETSQLOPTION.htm"><code>Set_sql_option</code></a>.</p>

<p><i>Vırazem</i> mùe bıt <a href="HE_SQL2_VYRAZSLOUPEC.htm">jméno sloupce</a> (nebo *), konstanta, <a href="HE_SQL2_VYRAZCASE.htm">podmínìnı vıraz CASE</a>, <a href="HE_SQL2_FUNKCESQL.htm">standardní SQL funkce</a> nebo funkce vytvoøená pomocí <a href="HE_SQL2_STOREDPROCEDURE.htm">DECLARE FUNCTION</a>, <a href="HE_SQL2_AGREGACNI.htm">agregaèní funkce</a>, <a href="HE_SQL2_DEKLARACEPROMENNYCH.htm">promìnná serveru</a>, globální <a href="HE_SQL2_PROMENNEJAZYKA.htm">promìnná klienta</a>, <a href="HE_SQL2_SUBDOTAZ.htm">subdotaz</a> vracející jeden øádek a jeden sloupec nebo vıraz tvoøenı tìmito subvırazy.</p>

<p>Podrobnosti o sestavení podmínek ve <i>specifikaci dotazu</i> viz <a href="HE_SQL2_PODMINKA.htm">podmínka</a> </p>

<p><b>Pøíklady:</b></p>

<pre><code>SELECT Month(datum),SUM(Objednavky.objed)
FROM Firmy, Objednavky
WHERE Objednavky.firma=Firmy.firma
GROUP BY Month(datum)</code></pre>

<p><b>Viz</b></p>

<ul class='viz'>
 <li><a href="HE_SQL2_SELECTS.htm">Sbírka dotazù</a> 
 <li><a href="HE_SQL2_VYRAZY.htm">Vırazy v SQL</a>
</ul>



<table class="navigace" border="0" width="100%"  bgcolor="#FFFFBF"><tr> <td
width="20" align="center"><img class="floatno" src="../images/prev.gif"
width="15" height="13" alt="&lt;&shy;" title="Pøedcházející téma"
border="0"></td><td width="25%"><a
href="HE_SQL2_ZOBECNENATABULKA.htm">Zobecnìná tabulka</a></td> <td width="25%"
align="right"><img class="floatno" src="../images/up.gif" width="13"
height="15" alt="Nahoru" title="O jednu úroveò vıš" border="0"
align="middle"></td><td width="25%"><a href="HE_SQL2_DOTAZY.htm">Dotazy</a></td>
<td width="25%" align="right"><a
href="HE_SQL2_DOTAZOVYVYRAZ.htm">Dotazovı vıraz</a></td><td width="20"
align="center"><img class="floatno" src="../images/next.gif" width="15"
height="13" alt="&shy;&gt;" title="Následující téma" border="0"></td>
</tr></table>
</body>
</html>
