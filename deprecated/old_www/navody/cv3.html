<html><head>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2"><title>Cviceni 3</title></head><body>
<pre><b>-- vytvorime sekvenci se jmenem 'seq_zamest_id' s pocatecni hoidnotou 10 a
-- inkrementacnim krokem 2.
-- aktualni hodnota sekvence ziskame 'jmeno_sekvence.CURRVAL'
-- zvyseni hodnoty sekvence o stanoveny krok a vraceni nove hodnoty
-- provedeme pomoci 'jmeno_sekvence.NEXTVAL'</b>
SQL&gt; <font color="#0000ff"> CREATE SEQUENCE seq_zamest_id INCREMENT BY 2 START WITH 10;</font>

Sequence created.

<b>-- vytvorime sekvenci 'seq_limited' se zadanym omezenim pro minimalni a
-- maximalni hodnotu</b>
SQL&gt; <font color="#0000ff"> CREATE SEQUENCE seq_limited INCREMENT BY 1 START WITH 3 MAXVALUE 10 MINVALUE 3;</font>

Sequence created.

<b>-- zobrazime vytvorene sekvence</b>
SQL&gt; <font color="#0000ff"> SELECT sequence_name, increment_by, last_number FROM user_sequences;</font>

SEQUENCE_NAME                  INCREMENT_BY LAST_NUMBER
------------------------------ ------------ -----------
SEQ_ZAMEST_ID                             2          10
SEQ_LIMITED                               1           3

<b>-- tabulka zamestnancu</b>
SQL&gt; <font color="#0000ff"> CREATE TABLE zamestnanci(
	jmeno VARCHAR2(15), 
	prijmeni VARCHAR2(15), 
	id NUMBER CONSTRAINT pk_id PRIMARY KEY, 
	lokace VARCHAR2(10),
	plat NUMBER);</font>


Table created.

<b>-- naplneni tabulky zamestnanci</b>
SQL&gt; <font color="#0000ff"> INSERT INTO zamestnanci (jmeno, prijmeni, id, lokace, plat) VALUES ('Michal','Merta', seq_zamest_id.NEXTVAL,'Brno', 13000);</font>
SQL&gt; <font color="#0000ff"> INSERT INTO zamestnanci (jmeno, prijmeni, id, lokace, plat) VALUES ('Jan','Orel', seq_zamest_id.NEXTVAL,'Brno', 18000);</font>
SQL&gt; <font color="#0000ff"> INSERT INTO zamestnanci (jmeno, prijmeni, id, lokace, plat) VALUES ('Petr','Salava', seq_zamest_id.NEXTVAL,'Praha', 11000);</font>
SQL&gt; <font color="#0000ff"> INSERT INTO zamestnanci (jmeno, prijmeni, id, lokace, plat) VALUES ('Petr','Salava', seq_zamest_id.NEXTVAL,'Ostrava', 9000);</font>
SQL&gt; <font color="#0000ff"> INSERT INTO zamestnanci (jmeno, prijmeni, id, lokace, plat) VALUES ('Simon','Blazek', seq_zamest_id.NEXTVAL,'Praha', 21000);</font>
SQL&gt; <font color="#0000ff"> INSERT INTO zamestnanci (jmeno, prijmeni, id, lokace, plat) VALUES ('Petr','Miska', seq_zamest_id.NEXTVAL,'Brno', 8000);</font>

... 6 rows created ...

SQL&gt; <font color="#0000ff"> SELECT * FROM zamestnanci;</font>

JMENO           PRIJMENI                ID LOKACE           PLAT
--------------- --------------- ---------- ---------- ----------
Michal          Merta                   10 Brno            13000
Jan             Orel                    12 Brno            18000
Petr            Salava                  14 Praha           11000
Petr            Salava                  16 Ostrava          9000
Simon           Blazek                  18 Praha           21000
Petr            Miska                   20 Brno             8000

6 rows selected.

<b>-- zobrazime zamestnance bez opakovani</b>
SQL&gt; <font color="#0000ff"> SELECT DISTINCT jmeno, prijmeni FROM zamestnanci;</font>

JMENO           PRIJMENI
--------------- ---------------
Jan             Orel
Michal          Merta
Petr            Miska
Petr            Salava
Simon           Blazek


<b>-- zobrazime celkovy pocet zaznamu z tabulky zamestananci</b>
SQL&gt; <font color="#0000ff"> SELECT COUNT(*) AS "zaznamu v tab." FROM zamestnanci;</font>

zaznamu v tab.
-----------------
                6


<b>-- seradime zamestanace dle jejich prijmeni vzestupne 
-- zobrazeni vcetne duplicit</b>
SQL&gt; <font color="#0000ff"> SELECT * FROM zamestnanci ORDER BY prijmeni ASC;</font>

JMENO           PRIJMENI                ID LOKACE           PLAT
--------------- --------------- ---------- ---------- ----------
Simon           Blazek                  18 Praha           21000
Michal          Merta                   10 Brno            13000
Petr            Miska                   20 Brno             8000
Jan             Orel                    12 Brno            18000
Petr            Salava                  14 Praha           11000
Petr            Salava                  16 Ostrava          9000

6 rows selected.

<b>-- zobrazime vydelky jednotlivych zamestnancu</b>
SQL&gt; <font color="#0000ff"> SELECT jmeno, prijmeni, SUM(plat) FROM zamestnanci
GROUP BY jmeno, prijmeni;</font>

JMENO           PRIJMENI     SUM(PLAT)
--------------- --------------- ----------
Jan             Orel                 18000
Petr            Miska                 8000
Petr            Salava               20000
Simon           Blazek               21000
Michal          Merta                13000

<b>-- seskupeni zamestnancu dle jmena a prijmeni a zobrazeni pouze tech skupin,
-- ktera maji jmeno rovno 'Petr'</b>
SQL&gt; <font color="#0000ff"> SELECT jmeno, prijmeni, COUNT(*) FROM zamestnanci
GROUP BY jmeno, prijmeni HAVING jmeno = 'Petr';</font>

JMENO           PRIJMENI          COUNT(*)
--------------- --------------- ----------
Petr            Miska                    1
Petr            Salava                   2

<b>-- zobrazeni informaci o castkach, ktera jsou vyplacena zamestnancum v ruznych mestech</b>
SQL&gt; <font color="#0000ff"> SELECT lokace, COUNT(*), SUM(plat), AVG(plat), MIN(plat), MAX(plat) FROM zamestnanci
GROUP BY lokace;</font>

LOKACE       COUNT(*)  SUM(PLAT)  AVG(PLAT)  MIN(PLAT)  MAX(PLAT)
---------- ---------- ---------- ---------- ---------- ----------
Brno                3      39000      13000       8000      18000
Ostrava             1       9000       9000       9000       9000
Praha               2      32000      16000      11000      21000

<b>-- predchozi dotaz, avsak omezen na mesta, ktera maji vetsi prumerny plat
-- nez 12000, setrizeno vzestupne dle poctu zamestnancu</b>
SQL&gt; <font color="#0000ff"> SELECT lokace, COUNT(*), SUM(plat), AVG(plat), MIN(plat), MAX(plat) FROM zamestnanci
GROUP BY lokace HAVING AVG(plat) &gt; 12000 ORDER BY COUNT(*) ASC;</font>

LOKACE       COUNT(*)  SUM(PLAT)  AVG(PLAT)  MIN(PLAT)  MAX(PLAT)
---------- ---------- ---------- ---------- ---------- ----------
Praha               2      32000      16000      11000      21000
Brno                3      39000      13000       8000      18000

<b>-- zobrazeni zamestnance s maximalnim platem</b>
SQL&gt; <font color="#0000ff"> SELECT prijmeni, celk_plat FROM 
  (SELECT jmeno, prijmeni, SUM(plat) AS celk_plat FROM zamestnanci 
   GROUP BY jmeno, prijmeni)
  WHERE celk_plat = (SELECT MAX(celk_plat) FROM 
  (SELECT jmeno, prijmeni, SUM(plat) AS celk_plat FROM zamestnanci
   GROUP BY jmeno, prijmeni));</font>
  
PRIJMENI         CELK_PLAT
--------------- ----------
Blazek               21000

</pre><div style="position: absolute; left: 0px; top: 0px; z-index: 1000000000 ! important; visibility: hidden; opacity: 1;" id="linkalert-box"><img src="cv3_soubory/none-icon.png" id="linkalert-icon-1"></div></body></html>