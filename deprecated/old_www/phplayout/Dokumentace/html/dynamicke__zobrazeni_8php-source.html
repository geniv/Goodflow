<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Novy vychozi PHP layout: Zdrojový soubor /var/www/phplayout/modules/dynamicke_zobrazovani/dynamicke_zobrazeni.php</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generováno programem Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Hlavní&nbsp;stránka</span></a></li>
      <li><a href="annotated.html"><span>Třídy</span></a></li>
      <li class="current"><a href="files.html"><span>Soubory</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>Seznam&nbsp;souborů</span></a></li>
      <li><a href="globals.html"><span>Symboly&nbsp;v&nbsp;souborech</span></a></li>
    </ul>
  </div>
<h1>/var/www/phplayout/modules/dynamicke_zobrazovani/dynamicke_zobrazeni.php</h1><a href="dynamicke__zobrazeni_8php.html">Zobrazit dokumentaci tohoto souboru.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 
<a name="l00015"></a><a class="code" href="classDynamicZobrazeni.html">00015</a> <span class="keyword">class </span><a class="code" href="classDynamicZobrazeni.html">DynamicZobrazeni</a> <span class="keyword">extends</span> <a class="code" href="classDefaultModule.html">DefaultModule</a>
<a name="l00016"></a>00016 {
<a name="l00017"></a><a class="code" href="classDynamicZobrazeni.html#6594c4425d4c34335f29d6eb8c5da4bd">00017</a>   <span class="keyword">private</span> <a class="code" href="classDynamicZobrazeni.html#6594c4425d4c34335f29d6eb8c5da4bd">$var</a>, <a class="code" href="classDynamicZobrazeni.html#ff04ad4b4312adc5f7946621dc4c0c4f">$sqlite</a>, <a class="code" href="classDynamicZobrazeni.html#65283fe09b1a246d695a83dbd806beab">$dbname</a>, <a class="code" href="classDynamicZobrazeni.html#e5437b3151439049dbd6ec25216a95d1">$dirpath</a>, <a class="code" href="classDynamicZobrazeni.html#b95b4dbf8731aa1e27a7a037eeaac97a">$absolutni_url</a>, <a class="code" href="classDynamicZobrazeni.html#27cfa4eae41e1155f70e6d50998fed9e">$unikatni</a>;
<a name="l00018"></a><a class="code" href="classDynamicZobrazeni.html#0e4e94d34ea6c07e84c770ba564c5ae7">00018</a>   <span class="keyword">private</span> <a class="code" href="classDynamicZobrazeni.html#0e4e94d34ea6c07e84c770ba564c5ae7">$idmodul</a> = <span class="stringliteral">"dynzobr"</span>;  <span class="comment">//id pro rozliseni modulu v adminu</span>
<a name="l00019"></a><a class="code" href="classDynamicZobrazeni.html#933be3c0456d4fa2112bcfb204cce4af">00019</a>   <span class="keyword">private</span> <a class="code" href="classDynamicZobrazeni.html#933be3c0456d4fa2112bcfb204cce4af">$povolit_pridani</a> = <span class="keyword">true</span>; <span class="comment">//true/false - povolit / zakazat, pridavani (i mazani) dalsich polozek</span>
<a name="l00020"></a><a class="code" href="classDynamicZobrazeni.html#6b1fb4432cbe69c81bb235b6ee03a6d4">00020</a>   <span class="keyword">private</span> <a class="code" href="classDynamicZobrazeni.html#6b1fb4432cbe69c81bb235b6ee03a6d4">$vypis_chybu</a> = <span class="keyword">false</span>;
<a name="l00021"></a>00021 
<a name="l00022"></a><a class="code" href="classDynamicZobrazeni.html#2c5f7fc9f701289b6a21125ea159f5bb">00022</a>   <span class="keyword">private</span> <a class="code" href="classDynamicZobrazeni.html#2c5f7fc9f701289b6a21125ea159f5bb">$znacka_povinne</a> = <span class="stringliteral">"*"</span>;
<a name="l00023"></a><a class="code" href="classDynamicZobrazeni.html#60264e2e97dd5172555ede5447366d47">00023</a>   <span class="keyword">private</span> <a class="code" href="classDynamicZobrazeni.html#60264e2e97dd5172555ede5447366d47">$pathpicture</a> = <span class="stringliteral">"obrazky"</span>;
<a name="l00024"></a><a class="code" href="classDynamicZobrazeni.html#011d00e6cc3fdf9677917c7ca7edba92">00024</a>   <span class="keyword">private</span> <a class="code" href="classDynamicZobrazeni.html#011d00e6cc3fdf9677917c7ca7edba92">$minidir</a> = <span class="stringliteral">"mini"</span>;
<a name="l00025"></a><a class="code" href="classDynamicZobrazeni.html#361119aa26640b334a7fa05c00e5ed8e">00025</a>   <span class="keyword">private</span> <a class="code" href="classDynamicZobrazeni.html#361119aa26640b334a7fa05c00e5ed8e">$fulldir</a> = <span class="stringliteral">"full"</span>;
<a name="l00026"></a><a class="code" href="classDynamicZobrazeni.html#c3f1935d3aaff12d9f52fc5f78cef0e4">00026</a>   <span class="keyword">private</span> <a class="code" href="classDynamicZobrazeni.html#c3f1935d3aaff12d9f52fc5f78cef0e4">$conffile</a> = <span class="stringliteral">".config_file"</span>;
<a name="l00027"></a>00027 
<a name="l00028"></a><a class="code" href="classDynamicZobrazeni.html#b7e6f1936dbfc6fa2cc1320810238578">00028</a>   <span class="keyword">private</span> <a class="code" href="classDynamicZobrazeni.html#b7e6f1936dbfc6fa2cc1320810238578">$adresa_sekce</a> = <span class="stringliteral">"sekce"</span>;
<a name="l00029"></a><a class="code" href="classDynamicZobrazeni.html#04e257b4e6d194dc655736d042f4d28b">00029</a>   <span class="keyword">private</span> <a class="code" href="classDynamicZobrazeni.html#04e257b4e6d194dc655736d042f4d28b">$rsslink</a> = <span class="stringliteral">"rss"</span>;
<a name="l00030"></a>00030 
<a name="l00031"></a>00031                             <span class="comment">//index =&gt; slovní popis</span>
<a name="l00032"></a><a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">00032</a>   <span class="keyword">private</span> <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> = array (<span class="stringliteral">"nadpis"</span> =&gt;  <span class="stringliteral">"Napis"</span>,
<a name="l00033"></a>00033                             <span class="stringliteral">"popisek"</span> =&gt; <span class="stringliteral">"Krátký popisek"</span>,
<a name="l00034"></a>00034                             <span class="stringliteral">"text"</span> =&gt;    <span class="stringliteral">"Dlouhé texty"</span>,
<a name="l00035"></a>00035 
<a name="l00036"></a>00036                             <span class="stringliteral">"obrazek"</span> =&gt; <span class="stringliteral">"Obrázek"</span>,
<a name="l00037"></a>00037 
<a name="l00038"></a>00038                             <span class="stringliteral">"datum"</span> =&gt;   <span class="stringliteral">"Datum"</span>,
<a name="l00039"></a>00039                             <span class="stringliteral">"cas"</span> =&gt;     <span class="stringliteral">"Čas"</span>,
<a name="l00040"></a>00040                             <span class="stringliteral">"datumcas"</span> =&gt;<span class="stringliteral">"Datum a čas"</span>,
<a name="l00041"></a>00041 
<a name="l00042"></a>00042                             <span class="stringliteral">"checkbox"</span> =&gt; <span class="stringliteral">"Zaškrkávací políčko"</span>,
<a name="l00043"></a>00043 
<a name="l00044"></a>00044                             <span class="stringliteral">"autodel"</span> =&gt; <span class="stringliteral">"Automatické mazání"</span>,
<a name="l00045"></a>00045                             );
<a name="l00046"></a>00046 
<a name="l00047"></a><a class="code" href="classDynamicZobrazeni.html#1fa2962d94290e226b17cf4badb208d5">00047</a>   <span class="keyword">private</span> <a class="code" href="classDynamicZobrazeni.html#1fa2962d94290e226b17cf4badb208d5">$pocitadloporadi</a> = array (0 =&gt; 1,
<a name="l00048"></a>00048                                     1 =&gt; 1,
<a name="l00049"></a>00049                                     2 =&gt; 1,
<a name="l00050"></a>00050                                     3 =&gt; 2,
<a name="l00051"></a>00051                                     4 =&gt; 1,
<a name="l00052"></a>00052                                     5 =&gt; 1,
<a name="l00053"></a>00053                                     6 =&gt; 1,
<a name="l00054"></a>00054                                     7 =&gt; 1,
<a name="l00055"></a>00055                                     8 =&gt; 1);
<a name="l00056"></a>00056 
<a name="l00057"></a><a class="code" href="classDynamicZobrazeni.html#516969f810ae2c04eb430cbd056f0a85">00057</a>   <span class="keyword">private</span> <a class="code" href="classDynamicZobrazeni.html#516969f810ae2c04eb430cbd056f0a85">$vstupni_typ</a> = array (<span class="stringliteral">"text"</span>,
<a name="l00058"></a>00058                                 <span class="stringliteral">"integer"</span>,
<a name="l00059"></a>00059                                 <span class="stringliteral">"reg_exp"</span>);
<a name="l00060"></a>00060 
<a name="l00068"></a><a class="code" href="classDynamicZobrazeni.html#f771bb5753815e357ff05d8ff7b99c42">00068</a>   <span class="keyword">public</span> function <a class="code" href="classDynamicZobrazeni.html#f771bb5753815e357ff05d8ff7b99c42">__construct</a>(&amp;<a class="code" href="classDynamicZobrazeni.html#6594c4425d4c34335f29d6eb8c5da4bd">$var</a>, $index) <span class="comment">//konstruktor</span>
<a name="l00069"></a>00069   {
<a name="l00070"></a>00070     $this-&gt;var = <a class="code" href="classDynamicZobrazeni.html#6594c4425d4c34335f29d6eb8c5da4bd">$var</a>;
<a name="l00071"></a>00071     $this-&gt;dirpath = dirname($this-&gt;var-&gt;moduly[$index][<span class="stringliteral">"include"</span>]);
<a name="l00072"></a>00072     $this-&gt;dbname = $this-&gt;var-&gt;moduly[$index][<span class="stringliteral">"databaze"</span>];
<a name="l00073"></a>00073 
<a name="l00074"></a>00074     <span class="comment">//includovani unikatniho obsahu</span>
<a name="l00075"></a>00075     $this-&gt;unikatni = $this-&gt;<a class="code" href="classDefaultModule.html#f9bc13977b7099f00c4a74192ce85dce">NactiObsahSouboru</a>(<span class="stringliteral">"{$this-&gt;dirpath}/.unikatni_obsah.php"</span>);
<a name="l00076"></a>00076     $this-&gt;absolutni_url = $this-&gt;var-&gt;main[0]-&gt;NactiFunkci(<span class="stringliteral">"Funkce"</span>, <span class="stringliteral">"AbsoluteUrl"</span>);
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     $this-&gt;znacka_povinne = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_znacka_povinne"</span>]);
<a name="l00079"></a>00079     $this-&gt;pathpicture = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_pathpicture"</span>]);
<a name="l00080"></a>00080     $this-&gt;minidir = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_minidir"</span>]);
<a name="l00081"></a>00081     $this-&gt;fulldir = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_fulldir"</span>]);
<a name="l00082"></a>00082     $this-&gt;adresa_sekce = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_adresa_sekce"</span>]);
<a name="l00083"></a>00083     $this-&gt;rsslink = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_rsslink"</span>]);
<a name="l00084"></a>00084 
<a name="l00085"></a>00085     $this-&gt;povolit_pridani = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_povolit_pridani"</span>]);
<a name="l00086"></a>00086     $this-&gt;vypis_chybu = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_vypis_chybu"</span>]);
<a name="l00087"></a>00087     $this-&gt;conffile = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_conffile"</span>]);
<a name="l00088"></a>00088 
<a name="l00089"></a>00089     $this-&gt;conffile = <span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;conffile}"</span>;
<a name="l00090"></a>00090 
<a name="l00091"></a>00091     <span class="keywordflow">if</span> (!$this-&gt;sqlite = @<span class="keyword">new</span> SQLiteDatabase(<span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;dbname}"</span>, 0777, $error))
<a name="l00092"></a>00092     {
<a name="l00093"></a>00093       $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l00094"></a>00094     }
<a name="l00095"></a>00095 
<a name="l00096"></a>00096     $this-&gt;<a class="code" href="classDynamicZobrazeni.html#0195bcc1ee02e35f9552752cd928251f">Instalace</a>();
<a name="l00097"></a>00097 
<a name="l00098"></a>00098     $this-&gt;<a class="code" href="classDefaultModule.html#de138416b3a548d72b50432499895bb7">NastavitAdresuMenu</a>($this-&gt;<a class="code" href="classDynamicZobrazeni.html#357f3705740de7379812343c87ed5d1d">RozsiritAdminMenu</a>($this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_menu"</span>], $this-&gt;idmodul)));
<a name="l00099"></a>00099   }
<a name="l00100"></a>00100 
<a name="l00107"></a><a class="code" href="classDynamicZobrazeni.html#c049467278f90339586e39ec2a5fa0a0">00107</a>   <span class="keyword">public</span> function <a class="code" href="classDynamicZobrazeni.html#c049467278f90339586e39ec2a5fa0a0">AdminObsah</a>()
<a name="l00108"></a>00108   {
<a name="l00109"></a>00109     <span class="keywordflow">if</span> ($_GET[$this-&gt;var-&gt;get_kam] == $this-&gt;var-&gt;adresaadminu &amp;&amp;
<a name="l00110"></a>00110         $this-&gt;var-&gt;aktivniadmin)
<a name="l00111"></a>00111     {
<a name="l00112"></a>00112       $adr = explode(<span class="stringliteral">"__"</span>, $_GET[$this-&gt;var-&gt;get_idmodul]); <span class="comment">//rozdeleni adresy</span>
<a name="l00113"></a>00113       <span class="keywordflow">switch</span> ($adr[0])
<a name="l00114"></a>00114       {
<a name="l00115"></a>00115         <span class="keywordflow">case</span> $this-&gt;idmodul:  <span class="comment">//id modul</span>
<a name="l00116"></a>00116           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = (!Empty($adr[1]) ? $this-&gt;<a class="code" href="classDynamicZobrazeni.html#92f116c2d3a870a2c4a06fa0f448654a">AdminObsahSablony</a>($adr[1]) : $this-&gt;<a class="code" href="classDynamicZobrazeni.html#cefc4f6636e9ff9b0747f5a57add5c58">AdministraceObsahu</a>());
<a name="l00117"></a>00117         <span class="keywordflow">break</span>;
<a name="l00118"></a>00118       }
<a name="l00119"></a>00119     }
<a name="l00120"></a>00120 
<a name="l00121"></a>00121     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l00122"></a>00122   }
<a name="l00123"></a>00123 
<a name="l00129"></a><a class="code" href="classDynamicZobrazeni.html#0195bcc1ee02e35f9552752cd928251f">00129</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#0195bcc1ee02e35f9552752cd928251f">Instalace</a>()
<a name="l00130"></a>00130   {
<a name="l00131"></a>00131     <span class="keywordflow">if</span> (filesize(<span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;dbname}"</span>) == 0)
<a name="l00132"></a>00132     {
<a name="l00133"></a>00133       <span class="keywordflow">if</span> (!@$this-&gt;sqlite-&gt;queryExec(<span class="stringliteral">"CREATE TABLE sablona (</span>
<a name="l00134"></a>00134 <span class="stringliteral">                                      id INTEGER UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span>
<a name="l00135"></a>00135 <span class="stringliteral">                                      adresa TEXT,</span>
<a name="l00136"></a>00136 <span class="stringliteral">                                      razeni VARCHAR(50),</span>
<a name="l00137"></a>00137 <span class="stringliteral">                                      nove INTEGER UNSIGNED,</span>
<a name="l00138"></a>00138 <span class="stringliteral">                                      nove_rss INTEGER UNSIGNED,</span>
<a name="l00139"></a>00139 <span class="stringliteral">                                      nazev VARCHAR(200),</span>
<a name="l00140"></a>00140 <span class="stringliteral">                                      rewrite VARCHAR(200),</span>
<a name="l00141"></a>00141 <span class="stringliteral">                                      popisek TEXT,</span>
<a name="l00142"></a>00142 <span class="stringliteral">                                      href_id VARCHAR(200),</span>
<a name="l00143"></a>00143 <span class="stringliteral">                                      href_class VARCHAR(200),</span>
<a name="l00144"></a>00144 <span class="stringliteral">                                      href_akce VARCHAR(500),</span>
<a name="l00145"></a>00145 <span class="stringliteral">                                      zobrazit BOOL);</span>
<a name="l00146"></a>00146 <span class="stringliteral"></span>
<a name="l00147"></a>00147 <span class="stringliteral">                                      CREATE TABLE obsah_sablony (</span>
<a name="l00148"></a>00148 <span class="stringliteral">                                      id INTEGER UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span>
<a name="l00149"></a>00149 <span class="stringliteral">                                      sablona INTEGER UNSIGNED,</span>
<a name="l00150"></a>00150 <span class="stringliteral">                                      obsah TEXT,</span>
<a name="l00151"></a>00151 <span class="stringliteral">                                      pridano DATETIME,</span>
<a name="l00152"></a>00152 <span class="stringliteral">                                      nazev VARCHAR(200),</span>
<a name="l00153"></a>00153 <span class="stringliteral">                                      rewrite VARCHAR(200));</span>
<a name="l00154"></a>00154 <span class="stringliteral"></span>
<a name="l00155"></a>00155 <span class="stringliteral">                                      CREATE TABLE element (</span>
<a name="l00156"></a>00156 <span class="stringliteral">                                      id INTEGER UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span>
<a name="l00157"></a>00157 <span class="stringliteral">                                      sablona INTEGER UNSIGNED,</span>
<a name="l00158"></a>00158 <span class="stringliteral">                                      typ INTEGER UNSIGNED,</span>
<a name="l00159"></a>00159 <span class="stringliteral">                                      nazev VARCHAR(200),</span>
<a name="l00160"></a>00160 <span class="stringliteral">                                      value VARCHAR(200),</span>
<a name="l00161"></a>00161 <span class="stringliteral">                                      input_id VARCHAR(200),</span>
<a name="l00162"></a>00162 <span class="stringliteral">                                      input_class VARCHAR(200),</span>
<a name="l00163"></a>00163 <span class="stringliteral">                                      input_akce VARCHAR(500),</span>
<a name="l00164"></a>00164 <span class="stringliteral">                                      povinne BOOL,</span>
<a name="l00165"></a>00165 <span class="stringliteral">                                      vstupni_typ INTEGER UNSIGNED,</span>
<a name="l00166"></a>00166 <span class="stringliteral">                                      reg_exp VARCHAR(500),</span>
<a name="l00167"></a>00167 <span class="stringliteral">                                      vystupni_format VARCHAR(200),</span>
<a name="l00168"></a>00168 <span class="stringliteral">                                      min_poc INTEGER UNSIGNED,</span>
<a name="l00169"></a>00169 <span class="stringliteral">                                      max_poc INTEGER UNSIGNED,</span>
<a name="l00170"></a>00170 <span class="stringliteral">                                      poradi INTEGER UNSIGNED);</span>
<a name="l00171"></a>00171 <span class="stringliteral">                                      "</span>, $error))
<a name="l00172"></a>00172       {
<a name="l00173"></a>00173         $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l00174"></a>00174       }
<a name="l00175"></a>00175     }
<a name="l00176"></a>00176   }
<a name="l00177"></a>00177 
<a name="l00185"></a><a class="code" href="classDynamicZobrazeni.html#357f3705740de7379812343c87ed5d1d">00185</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#357f3705740de7379812343c87ed5d1d">RozsiritAdminMenu</a>($adresa)
<a name="l00186"></a>00186   {
<a name="l00187"></a>00187     $i = count($adresa);
<a name="l00188"></a>00188     <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT id, nazev, href_id, href_class, href_akce, zobrazit FROM sablona ORDER BY LOWER(nazev) ASC;"</span>, NULL, $error))
<a name="l00189"></a>00189     {
<a name="l00190"></a>00190       <span class="keywordflow">if</span> ($res-&gt;numRows() != 0)
<a name="l00191"></a>00191       {
<a name="l00192"></a>00192         <span class="keywordflow">while</span> ($data = $res-&gt;fetchObject())
<a name="l00193"></a>00193         {
<a name="l00194"></a>00194           $adresa[$i][<span class="stringliteral">"main_href"</span>] = <span class="stringliteral">"{$this-&gt;idmodul}__{$data-&gt;id}"</span>;
<a name="l00195"></a>00195           $adresa[$i][<span class="stringliteral">"odkaz"</span>] = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_tvar_menu_odkaz"</span>], $data-&gt;nazev);
<a name="l00196"></a>00196           $adresa[$i][<span class="stringliteral">"title"</span>] = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_tvar_menu_title"</span>], $data-&gt;nazev);
<a name="l00197"></a>00197           $adresa[$i][<span class="stringliteral">"id"</span>] = $data-&gt;href_id;
<a name="l00198"></a>00198           $adresa[$i][<span class="stringliteral">"class"</span>] = $data-&gt;href_class;
<a name="l00199"></a>00199           $adresa[$i][<span class="stringliteral">"akce"</span>] = $data-&gt;href_akce;
<a name="l00200"></a>00200           $adresa[$i][<span class="stringliteral">"zobrazit"</span>] = $data-&gt;zobrazit;
<a name="l00201"></a>00201           $i++;
<a name="l00202"></a>00202         }
<a name="l00203"></a>00203       }
<a name="l00204"></a>00204     }
<a name="l00205"></a>00205       <span class="keywordflow">else</span>
<a name="l00206"></a>00206     {
<a name="l00207"></a>00207       $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l00208"></a>00208     }
<a name="l00209"></a>00209 
<a name="l00210"></a>00210     <span class="keywordflow">return</span> $adresa;
<a name="l00211"></a>00211   }
<a name="l00212"></a>00212 
<a name="l00222"></a><a class="code" href="classDynamicZobrazeni.html#ed73caa357ebf1ca8314e46a5c93bd95">00222</a>   <span class="keyword">public</span> function <a class="code" href="classDynamicZobrazeni.html#ed73caa357ebf1ca8314e46a5c93bd95">KontrolaAutoMazani</a>($adr = NULL, $poradi)
<a name="l00223"></a>00223   {
<a name="l00224"></a>00224     <span class="keywordflow">if</span> (!Empty($adr))
<a name="l00225"></a>00225     {
<a name="l00226"></a>00226       <span class="keywordflow">if</span> (is_array($adr))
<a name="l00227"></a>00227       {
<a name="l00228"></a>00228         $uvoz = <span class="stringliteral">""</span>;
<a name="l00229"></a>00229         <span class="keywordflow">for</span> ($i = 0; $i &lt; count($adr); $i++)
<a name="l00230"></a>00230         {
<a name="l00231"></a>00231           $uvoz[] .= <span class="stringliteral">"'{$adr[$i]}'"</span>;
<a name="l00232"></a>00232         }
<a name="l00233"></a>00233         $uvoz = implode(<span class="stringliteral">", "</span>, $uvoz);
<a name="l00234"></a>00234         $adresa = <span class="stringliteral">" IN ({$uvoz})"</span>;
<a name="l00235"></a>00235         $podm_adresa = $adr[0];
<a name="l00236"></a>00236       }
<a name="l00237"></a>00237         <span class="keywordflow">else</span>
<a name="l00238"></a>00238       {
<a name="l00239"></a>00239         $adresa = <span class="stringliteral">"='{$adr}'"</span>;
<a name="l00240"></a>00240         $podm_adresa = $adr;
<a name="l00241"></a>00241       }
<a name="l00242"></a>00242     }
<a name="l00243"></a>00243       <span class="keywordflow">else</span>
<a name="l00244"></a>00244     {
<a name="l00245"></a>00245       $adr = stripslashes(htmlspecialchars($_SERVER[<span class="stringliteral">"QUERY_STRING"</span>], ENT_QUOTES));
<a name="l00246"></a>00246       $adresa = <span class="stringliteral">"='{$adr}'"</span>;
<a name="l00247"></a>00247       $podm_adresa = $adr;
<a name="l00248"></a>00248     }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250     $typelementu = array_flip(array_keys($this-&gt;element));
<a name="l00251"></a>00251     $typ = <span class="stringliteral">"autodel"</span>;
<a name="l00252"></a>00252 
<a name="l00253"></a>00253     <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT</span>
<a name="l00254"></a>00254 <span class="stringliteral">                                      element.typ typ,</span>
<a name="l00255"></a>00255 <span class="stringliteral">                                      element.poradi poradi</span>
<a name="l00256"></a>00256 <span class="stringliteral">                                      FROM sablona, element</span>
<a name="l00257"></a>00257 <span class="stringliteral">                                      WHERE</span>
<a name="l00258"></a>00258 <span class="stringliteral">                                      sablona.id=element.sablona AND</span>
<a name="l00259"></a>00259 <span class="stringliteral">                                      sablona.adresa{$adresa};"</span>, NULL, $error))
<a name="l00260"></a>00260     {
<a name="l00261"></a>00261       <span class="keywordflow">if</span> ($res-&gt;numRows() != 0)
<a name="l00262"></a>00262       {
<a name="l00263"></a>00263         $poc = 0;
<a name="l00264"></a>00264         <span class="keywordflow">while</span>($data = $res-&gt;fetchObject())
<a name="l00265"></a>00265         {
<a name="l00266"></a>00266           <span class="keywordflow">if</span> ($typelementu[$typ] == $data-&gt;typ &amp;&amp; $poradi == $data-&gt;poradi)
<a name="l00267"></a>00267           {
<a name="l00268"></a>00268             <span class="keywordflow">break</span>;
<a name="l00269"></a>00269           }
<a name="l00270"></a>00270             <span class="keywordflow">else</span>
<a name="l00271"></a>00271           {
<a name="l00272"></a>00272             $poc += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l00273"></a>00273           }
<a name="l00274"></a>00274         }
<a name="l00275"></a>00275       }
<a name="l00276"></a>00276     }
<a name="l00277"></a>00277       <span class="keywordflow">else</span>
<a name="l00278"></a>00278     {
<a name="l00279"></a>00279       $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l00280"></a>00280     }
<a name="l00281"></a>00281 
<a name="l00282"></a>00282     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="stringliteral">""</span>;
<a name="l00283"></a>00283     <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT</span>
<a name="l00284"></a>00284 <span class="stringliteral">                                      obsah_sablony.id id,</span>
<a name="l00285"></a>00285 <span class="stringliteral">                                      obsah_sablony.obsah obsah</span>
<a name="l00286"></a>00286 <span class="stringliteral">                                      FROM sablona, obsah_sablony</span>
<a name="l00287"></a>00287 <span class="stringliteral">                                      WHERE</span>
<a name="l00288"></a>00288 <span class="stringliteral">                                      sablona.id=obsah_sablony.sablona AND</span>
<a name="l00289"></a>00289 <span class="stringliteral">                                      sablona.adresa{$adresa}"</span>, NULL, $error))
<a name="l00290"></a>00290     {
<a name="l00291"></a>00291       <span class="keywordflow">if</span> ($res-&gt;numRows() != 0)
<a name="l00292"></a>00292       {
<a name="l00293"></a>00293         <span class="keywordflow">while</span>($data = $res-&gt;fetchObject())
<a name="l00294"></a>00294         {
<a name="l00295"></a>00295           $obsahpole = explode(<span class="stringliteral">"|-x-|"</span>, $data-&gt;obsah);
<a name="l00296"></a>00296           $vypis = <span class="stringliteral">""</span>;
<a name="l00297"></a>00297           <span class="keywordflow">for</span> ($j = 0; $j &lt; count($obsahpole); $j++)
<a name="l00298"></a>00298           {
<a name="l00299"></a>00299             <span class="keywordflow">if</span> (count(explode(<span class="stringliteral">"||--x--||"</span>, $obsahpole[$j])) == 5)
<a name="l00300"></a>00300             {
<a name="l00301"></a>00301               $obr = explode(<span class="stringliteral">"||--x--||"</span>, $obsahpole[$j]);
<a name="l00302"></a>00302               $vypis[] = <span class="stringliteral">""</span>;<span class="comment">//"{$this-&gt;absolutni_url}{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;minidir}/{$obr[0]}";</span>
<a name="l00303"></a>00303               $vypis[] = <span class="stringliteral">""</span>;<span class="comment">//"{$this-&gt;absolutni_url}{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;fulldir}/{$obr[0]}";</span>
<a name="l00304"></a>00304             }
<a name="l00305"></a>00305               <span class="keywordflow">else</span>
<a name="l00306"></a>00306             {
<a name="l00307"></a>00307               $vypis[] = $obsahpole[$j];
<a name="l00308"></a>00308             }
<a name="l00309"></a>00309           }
<a name="l00310"></a>00310 
<a name="l00311"></a>00311           <span class="keywordflow">if</span> (!Empty($vypis[$poc]) &amp;&amp; date(<span class="stringliteral">"Y-m-d H:i:s"</span>) &gt; $vypis[$poc]) <span class="comment">//porovna dotumy expirace</span>
<a name="l00312"></a>00312           {
<a name="l00313"></a>00313             <span class="keywordflow">if</span> (@$this-&gt;sqlite-&gt;queryExec(<span class="stringliteral">"DELETE FROM obsah_sablony WHERE id={$data-&gt;id};"</span>, $error)) <span class="comment">//provedeni dotazu</span>
<a name="l00314"></a>00314             {
<a name="l00315"></a>00315               $this-&gt;<a class="code" href="classDynamicZobrazeni.html#527aa78413315a3364cf487991543a92">SyncFileWithDB</a>();  <span class="comment">//+synchronizace</span>
<a name="l00316"></a>00316             }
<a name="l00317"></a>00317               <span class="keywordflow">else</span>
<a name="l00318"></a>00318             {
<a name="l00319"></a>00319               $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l00320"></a>00320             }
<a name="l00321"></a>00321           }
<a name="l00322"></a>00322         }
<a name="l00323"></a>00323       }
<a name="l00324"></a>00324     }
<a name="l00325"></a>00325       <span class="keywordflow">else</span>
<a name="l00326"></a>00326     {
<a name="l00327"></a>00327       $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l00328"></a>00328     }
<a name="l00329"></a>00329   }
<a name="l00330"></a>00330 
<a name="l00340"></a><a class="code" href="classDynamicZobrazeni.html#13cc9630944ea759546f28a8384f3756">00340</a>   <span class="keyword">public</span> function <a class="code" href="classDynamicZobrazeni.html#13cc9630944ea759546f28a8384f3756">ArrayVystupObsahu</a>($adr = NULL)
<a name="l00341"></a>00341   {
<a name="l00342"></a>00342     <span class="keywordflow">if</span> (!Empty($adr))
<a name="l00343"></a>00343     {
<a name="l00344"></a>00344       <span class="keywordflow">if</span> (is_array($adr))
<a name="l00345"></a>00345       {
<a name="l00346"></a>00346         $uvoz = <span class="stringliteral">""</span>;
<a name="l00347"></a>00347         <span class="keywordflow">for</span> ($i = 0; $i &lt; count($adr); $i++)
<a name="l00348"></a>00348         {
<a name="l00349"></a>00349           $uvoz[] .= <span class="stringliteral">"'{$adr[$i]}'"</span>;
<a name="l00350"></a>00350         }
<a name="l00351"></a>00351         $uvoz = implode(<span class="stringliteral">", "</span>, $uvoz);
<a name="l00352"></a>00352         $adresa = <span class="stringliteral">" IN ({$uvoz})"</span>;
<a name="l00353"></a>00353         $podm_adresa = $adr[0];
<a name="l00354"></a>00354       }
<a name="l00355"></a>00355         <span class="keywordflow">else</span>
<a name="l00356"></a>00356       {
<a name="l00357"></a>00357         $adresa = <span class="stringliteral">"='{$adr}'"</span>;
<a name="l00358"></a>00358         $podm_adresa = $adr;
<a name="l00359"></a>00359       }
<a name="l00360"></a>00360     }
<a name="l00361"></a>00361       <span class="keywordflow">else</span>
<a name="l00362"></a>00362     {
<a name="l00363"></a>00363       $adr = stripslashes(htmlspecialchars($_SERVER[<span class="stringliteral">"QUERY_STRING"</span>], ENT_QUOTES));
<a name="l00364"></a>00364       $adresa = <span class="stringliteral">"='{$adr}'"</span>;
<a name="l00365"></a>00365       $podm_adresa = $adr;
<a name="l00366"></a>00366     }
<a name="l00367"></a>00367 
<a name="l00368"></a>00368     $razeni = $this-&gt;<a class="code" href="classDynamicZobrazeni.html#e938b9560713f4aa2a14f22398e7d650">RychloVypisRazeni</a>($podm_adresa);  <span class="comment">//vrati smer razeni</span>
<a name="l00369"></a>00369 
<a name="l00370"></a>00370     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="stringliteral">""</span>;
<a name="l00371"></a>00371     <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT</span>
<a name="l00372"></a>00372 <span class="stringliteral">                                      obsah_sablony.sablona sablona,</span>
<a name="l00373"></a>00373 <span class="stringliteral">                                      obsah_sablony.obsah obsah,</span>
<a name="l00374"></a>00374 <span class="stringliteral">                                      obsah_sablony.pridano pridano,</span>
<a name="l00375"></a>00375 <span class="stringliteral">                                      obsah_sablony.nazev nazev,</span>
<a name="l00376"></a>00376 <span class="stringliteral">                                      obsah_sablony.rewrite rewrite</span>
<a name="l00377"></a>00377 <span class="stringliteral">                                      FROM sablona, obsah_sablony</span>
<a name="l00378"></a>00378 <span class="stringliteral">                                      WHERE</span>
<a name="l00379"></a>00379 <span class="stringliteral">                                      sablona.id=obsah_sablony.sablona AND</span>
<a name="l00380"></a>00380 <span class="stringliteral">                                      sablona.adresa{$adresa}</span>
<a name="l00381"></a>00381 <span class="stringliteral">                                      ORDER BY obsah_sablony.pridano {$razeni};"</span>, NULL, $error))  <span class="comment">//LIMIT 0,{$limit}</span>
<a name="l00382"></a>00382     {
<a name="l00383"></a>00383       <span class="keywordflow">if</span> ($res-&gt;numRows() != 0)
<a name="l00384"></a>00384       {
<a name="l00385"></a>00385         <span class="keywordflow">while</span>($data = $res-&gt;fetchObject())
<a name="l00386"></a>00386         {
<a name="l00387"></a>00387           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>[<span class="stringliteral">"sablona"</span>][] = $data-&gt;sablona;
<a name="l00388"></a>00388           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>[<span class="stringliteral">"obsah"</span>][] = $data-&gt;obsah;
<a name="l00389"></a>00389           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>[<span class="stringliteral">"pridano"</span>][] = $data-&gt;pridano;
<a name="l00390"></a>00390           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>[<span class="stringliteral">"nazev"</span>][] = $data-&gt;nazev;
<a name="l00391"></a>00391           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>[<span class="stringliteral">"rewrite"</span>][] = $data-&gt;rewrite;
<a name="l00392"></a>00392         }
<a name="l00393"></a>00393       }
<a name="l00394"></a>00394     }
<a name="l00395"></a>00395       <span class="keywordflow">else</span>
<a name="l00396"></a>00396     {
<a name="l00397"></a>00397       $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l00398"></a>00398     }
<a name="l00399"></a>00399 
<a name="l00400"></a>00400     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l00401"></a>00401   }
<a name="l00402"></a>00402 
<a name="l00410"></a><a class="code" href="classDynamicZobrazeni.html#e938b9560713f4aa2a14f22398e7d650">00410</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#e938b9560713f4aa2a14f22398e7d650">RychloVypisRazeni</a>($adresa)
<a name="l00411"></a>00411   {
<a name="l00412"></a>00412     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="stringliteral">""</span>;
<a name="l00413"></a>00413     <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT razeni</span>
<a name="l00414"></a>00414 <span class="stringliteral">                                      FROM sablona</span>
<a name="l00415"></a>00415 <span class="stringliteral">                                      WHERE</span>
<a name="l00416"></a>00416 <span class="stringliteral">                                      adresa='{$adresa}';"</span>, NULL, $error))
<a name="l00417"></a>00417     {
<a name="l00418"></a>00418       <span class="keywordflow">if</span> ($res-&gt;numRows() == 1)
<a name="l00419"></a>00419       {
<a name="l00420"></a>00420         $data = $res-&gt;fetchObject();
<a name="l00421"></a>00421         <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $data-&gt;razeni;
<a name="l00422"></a>00422       }
<a name="l00423"></a>00423     }
<a name="l00424"></a>00424       <span class="keywordflow">else</span>
<a name="l00425"></a>00425     {
<a name="l00426"></a>00426       $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l00427"></a>00427     }
<a name="l00428"></a>00428 
<a name="l00429"></a>00429     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l00430"></a>00430   }
<a name="l00431"></a>00431 
<a name="l00439"></a><a class="code" href="classDynamicZobrazeni.html#ebd8ae0f237d0674a3e9622c80362f65">00439</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#ebd8ae0f237d0674a3e9622c80362f65">RychloVypisLimit</a>($adresa)
<a name="l00440"></a>00440   {
<a name="l00441"></a>00441     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = 0;
<a name="l00442"></a>00442     <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT nove</span>
<a name="l00443"></a>00443 <span class="stringliteral">                                      FROM sablona</span>
<a name="l00444"></a>00444 <span class="stringliteral">                                      WHERE</span>
<a name="l00445"></a>00445 <span class="stringliteral">                                      adresa='{$adresa}';"</span>, NULL, $error))
<a name="l00446"></a>00446     {
<a name="l00447"></a>00447       <span class="keywordflow">if</span> ($res-&gt;numRows() == 1)
<a name="l00448"></a>00448       {
<a name="l00449"></a>00449         $data = $res-&gt;fetchObject();
<a name="l00450"></a>00450         <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $data-&gt;nove;
<a name="l00451"></a>00451       }
<a name="l00452"></a>00452     }
<a name="l00453"></a>00453       <span class="keywordflow">else</span>
<a name="l00454"></a>00454     {
<a name="l00455"></a>00455       $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l00456"></a>00456     }
<a name="l00457"></a>00457 
<a name="l00458"></a>00458     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l00459"></a>00459   }
<a name="l00460"></a>00460 
<a name="l00468"></a><a class="code" href="classDynamicZobrazeni.html#d1b50d0b7cc1d6c1ed8cdd8df7d9a2cc">00468</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#d1b50d0b7cc1d6c1ed8cdd8df7d9a2cc">VypisLimitRSS</a>($adresa)
<a name="l00469"></a>00469   {
<a name="l00470"></a>00470     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = 0;
<a name="l00471"></a>00471     <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT nove_rss</span>
<a name="l00472"></a>00472 <span class="stringliteral">                                      FROM sablona</span>
<a name="l00473"></a>00473 <span class="stringliteral">                                      WHERE</span>
<a name="l00474"></a>00474 <span class="stringliteral">                                      adresa='{$adresa}';"</span>, NULL, $error))
<a name="l00475"></a>00475     {
<a name="l00476"></a>00476       <span class="keywordflow">if</span> ($res-&gt;numRows() == 1)
<a name="l00477"></a>00477       {
<a name="l00478"></a>00478         $data = $res-&gt;fetchObject();
<a name="l00479"></a>00479         <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $data-&gt;nove_rss;
<a name="l00480"></a>00480       }
<a name="l00481"></a>00481     }
<a name="l00482"></a>00482       <span class="keywordflow">else</span>
<a name="l00483"></a>00483     {
<a name="l00484"></a>00484       $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l00485"></a>00485     }
<a name="l00486"></a>00486 
<a name="l00487"></a>00487     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l00488"></a>00488   }
<a name="l00489"></a>00489 
<a name="l00497"></a><a class="code" href="classDynamicZobrazeni.html#05e397753eae917d0d7deb470d81c172">00497</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#05e397753eae917d0d7deb470d81c172">VypisPopisku</a>($sablona)
<a name="l00498"></a>00498   {
<a name="l00499"></a>00499     settype($sablona, <span class="stringliteral">"integer"</span>);
<a name="l00500"></a>00500 
<a name="l00501"></a>00501     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="stringliteral">""</span>;
<a name="l00502"></a>00502     <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT popisek</span>
<a name="l00503"></a>00503 <span class="stringliteral">                                      FROM sablona</span>
<a name="l00504"></a>00504 <span class="stringliteral">                                      WHERE</span>
<a name="l00505"></a>00505 <span class="stringliteral">                                      id={$sablona};"</span>, NULL, $error))
<a name="l00506"></a>00506     {
<a name="l00507"></a>00507       <span class="keywordflow">if</span> ($res-&gt;numRows() == 1)
<a name="l00508"></a>00508       {
<a name="l00509"></a>00509         $data = $res-&gt;fetchObject();
<a name="l00510"></a>00510         <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $data-&gt;popisek;
<a name="l00511"></a>00511       }
<a name="l00512"></a>00512     }
<a name="l00513"></a>00513       <span class="keywordflow">else</span>
<a name="l00514"></a>00514     {
<a name="l00515"></a>00515       $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l00516"></a>00516     }
<a name="l00517"></a>00517 
<a name="l00518"></a>00518     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l00519"></a>00519   }
<a name="l00520"></a>00520 
<a name="l00533"></a><a class="code" href="classDynamicZobrazeni.html#92e22285d9d5c3e52d40f7e0adb72dfd">00533</a>   <span class="keyword">public</span> function <a class="code" href="classDynamicZobrazeni.html#92e22285d9d5c3e52d40f7e0adb72dfd">RSSLink</a>($vyber = NULL, $tvar = 1)
<a name="l00534"></a>00534   {
<a name="l00535"></a>00535     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="stringliteral">""</span>;
<a name="l00536"></a>00536     <span class="keywordflow">if</span> (!Empty($vyber))
<a name="l00537"></a>00537     {
<a name="l00538"></a>00538       <span class="keywordflow">if</span> (is_array($vyber))
<a name="l00539"></a>00539       {
<a name="l00540"></a>00540         $uvoz = <span class="stringliteral">""</span>;
<a name="l00541"></a>00541         <span class="keywordflow">for</span> ($i = 0; $i &lt; count($vyber); $i++)
<a name="l00542"></a>00542         {
<a name="l00543"></a>00543           $uvoz[] .= <span class="stringliteral">"'{$vyber[$i]}'"</span>;
<a name="l00544"></a>00544         }
<a name="l00545"></a>00545         $uvoz = implode(<span class="stringliteral">", "</span>, $uvoz);
<a name="l00546"></a>00546         $adresa = <span class="stringliteral">" IN ({$uvoz})"</span>;
<a name="l00547"></a>00547       }
<a name="l00548"></a>00548         <span class="keywordflow">else</span>
<a name="l00549"></a>00549       {
<a name="l00550"></a>00550         $adresa = <span class="stringliteral">"='{$vyber}'"</span>;
<a name="l00551"></a>00551       }
<a name="l00552"></a>00552 
<a name="l00553"></a>00553       <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT nazev, rewrite</span>
<a name="l00554"></a>00554 <span class="stringliteral">                                        FROM sablona</span>
<a name="l00555"></a>00555 <span class="stringliteral">                                        WHERE adresa{$adresa}</span>
<a name="l00556"></a>00556 <span class="stringliteral">                                        ORDER BY nazev ASC;"</span>, NULL, $error))
<a name="l00557"></a>00557       {
<a name="l00558"></a>00558         <span class="keywordflow">if</span> ($res-&gt;numRows() != 0)
<a name="l00559"></a>00559         {
<a name="l00560"></a>00560           <span class="keywordflow">while</span> ($data = $res-&gt;fetchObject())
<a name="l00561"></a>00561           {
<a name="l00562"></a>00562             <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_link_rss_{$tvar}"</span>],
<a name="l00563"></a>00563                                                 ($this-&gt;var-&gt;htaccess ? <span class="stringliteral">"{$this-&gt;absolutni_url}{$this-&gt;rsslink}/{$data-&gt;rewrite}"</span> : <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;rsslink}&amp;amp;sablona={$data-&gt;rewrite}"</span>),
<a name="l00564"></a>00564                                                 $data-&gt;nazev);
<a name="l00565"></a>00565           }
<a name="l00566"></a>00566         }
<a name="l00567"></a>00567       }
<a name="l00568"></a>00568         <span class="keywordflow">else</span>
<a name="l00569"></a>00569       {
<a name="l00570"></a>00570         $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l00571"></a>00571       }
<a name="l00572"></a>00572     }
<a name="l00573"></a>00573       <span class="keywordflow">else</span>
<a name="l00574"></a>00574     {
<a name="l00575"></a>00575       <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_once_link_rss_{$tvar}"</span>],
<a name="l00576"></a>00576                                           ($this-&gt;var-&gt;htaccess ? <span class="stringliteral">"{$this-&gt;absolutni_url}{$this-&gt;rsslink}"</span> : <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;rsslink}"</span>));
<a name="l00577"></a>00577     }
<a name="l00578"></a>00578 
<a name="l00579"></a>00579     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l00580"></a>00580   }
<a name="l00581"></a>00581 
<a name="l00594"></a><a class="code" href="classDynamicZobrazeni.html#fdebba03491811af4c00e71079d88d4a">00594</a>   <span class="keyword">public</span> function <a class="code" href="classDynamicZobrazeni.html#fdebba03491811af4c00e71079d88d4a">RSSLinkWeb</a>($vyber = NULL, $tvar = 1)
<a name="l00595"></a>00595   {
<a name="l00596"></a>00596     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="stringliteral">""</span>;
<a name="l00597"></a>00597     <span class="keywordflow">if</span> (!Empty($vyber))
<a name="l00598"></a>00598     {
<a name="l00599"></a>00599       <span class="keywordflow">if</span> (is_array($vyber))
<a name="l00600"></a>00600       {
<a name="l00601"></a>00601         $uvoz = <span class="stringliteral">""</span>;
<a name="l00602"></a>00602         <span class="keywordflow">for</span> ($i = 0; $i &lt; count($vyber); $i++)
<a name="l00603"></a>00603         {
<a name="l00604"></a>00604           $uvoz[] .= <span class="stringliteral">"'{$vyber[$i]}'"</span>;
<a name="l00605"></a>00605         }
<a name="l00606"></a>00606         $uvoz = implode(<span class="stringliteral">", "</span>, $uvoz);
<a name="l00607"></a>00607         $adresa = <span class="stringliteral">" IN ({$uvoz})"</span>;
<a name="l00608"></a>00608       }
<a name="l00609"></a>00609         <span class="keywordflow">else</span>
<a name="l00610"></a>00610       {
<a name="l00611"></a>00611         $adresa = <span class="stringliteral">"='{$vyber}'"</span>;
<a name="l00612"></a>00612       }
<a name="l00613"></a>00613 
<a name="l00614"></a>00614       <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT nazev, rewrite</span>
<a name="l00615"></a>00615 <span class="stringliteral">                                        FROM sablona</span>
<a name="l00616"></a>00616 <span class="stringliteral">                                        WHERE adresa{$adresa}</span>
<a name="l00617"></a>00617 <span class="stringliteral">                                        ORDER BY nazev ASC;"</span>, NULL, $error))
<a name="l00618"></a>00618       {
<a name="l00619"></a>00619         <span class="keywordflow">if</span> ($res-&gt;numRows() != 0)
<a name="l00620"></a>00620         {
<a name="l00621"></a>00621           <span class="keywordflow">while</span> ($data = $res-&gt;fetchObject())
<a name="l00622"></a>00622           {
<a name="l00623"></a>00623             <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_link_rss_web_{$tvar}"</span>],
<a name="l00624"></a>00624                                                 ($this-&gt;var-&gt;htaccess ? <span class="stringliteral">"{$this-&gt;absolutni_url}{$this-&gt;rsslink}/{$data-&gt;rewrite}"</span> : <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;rsslink}&amp;amp;sablona={$data-&gt;rewrite}"</span>),
<a name="l00625"></a>00625                                                 $data-&gt;nazev);
<a name="l00626"></a>00626           }
<a name="l00627"></a>00627         }
<a name="l00628"></a>00628       }
<a name="l00629"></a>00629         <span class="keywordflow">else</span>
<a name="l00630"></a>00630       {
<a name="l00631"></a>00631         $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l00632"></a>00632       }
<a name="l00633"></a>00633     }
<a name="l00634"></a>00634       <span class="keywordflow">else</span>
<a name="l00635"></a>00635     {
<a name="l00636"></a>00636       <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_once_link_rss_web_{$tvar}"</span>],
<a name="l00637"></a>00637                                           ($this-&gt;var-&gt;htaccess ? <span class="stringliteral">"{$this-&gt;absolutni_url}{$this-&gt;rsslink}"</span> : <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;rsslink}"</span>));
<a name="l00638"></a>00638     }
<a name="l00639"></a>00639 
<a name="l00640"></a>00640     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l00641"></a>00641   }
<a name="l00642"></a>00642 
<a name="l00654"></a><a class="code" href="classDynamicZobrazeni.html#5a7133a10a9f8267799c56a9298b0548">00654</a>   <span class="keyword">public</span> function <a class="code" href="classDynamicZobrazeni.html#5a7133a10a9f8267799c56a9298b0548">RSSVystup</a>($adr = NULL, $tvar = 1)
<a name="l00655"></a>00655   {
<a name="l00656"></a>00656     <span class="keywordflow">if</span> (!Empty($adr))
<a name="l00657"></a>00657     {
<a name="l00658"></a>00658       <span class="keywordflow">if</span> (is_array($adr))
<a name="l00659"></a>00659       {
<a name="l00660"></a>00660         $uvoz = <span class="stringliteral">""</span>;
<a name="l00661"></a>00661         <span class="keywordflow">for</span> ($i = 0; $i &lt; count($adr); $i++)
<a name="l00662"></a>00662         {
<a name="l00663"></a>00663           $uvoz[] .= <span class="stringliteral">"'{$adr[$i]}'"</span>;
<a name="l00664"></a>00664         }
<a name="l00665"></a>00665         $uvoz = implode(<span class="stringliteral">", "</span>, $uvoz);
<a name="l00666"></a>00666         $adresa = <span class="stringliteral">" IN ({$uvoz})"</span>;
<a name="l00667"></a>00667         $podm_adresa = $adr[0];
<a name="l00668"></a>00668       }
<a name="l00669"></a>00669         <span class="keywordflow">else</span>
<a name="l00670"></a>00670       {
<a name="l00671"></a>00671         $adresa = <span class="stringliteral">"='{$adr}'"</span>;
<a name="l00672"></a>00672         $podm_adresa = $adr;
<a name="l00673"></a>00673       }
<a name="l00674"></a>00674     }
<a name="l00675"></a>00675       <span class="keywordflow">else</span>
<a name="l00676"></a>00676     {
<a name="l00677"></a>00677       $adr = stripslashes(htmlspecialchars($_SERVER[<span class="stringliteral">"QUERY_STRING"</span>], ENT_QUOTES));
<a name="l00678"></a>00678       $adresa = <span class="stringliteral">"='{$adr}'"</span>;
<a name="l00679"></a>00679       $podm_adresa = $adr;
<a name="l00680"></a>00680     }
<a name="l00681"></a>00681 
<a name="l00682"></a>00682     $razeni = $this-&gt;<a class="code" href="classDynamicZobrazeni.html#e938b9560713f4aa2a14f22398e7d650">RychloVypisRazeni</a>($podm_adresa);  <span class="comment">//vrati smer razeni</span>
<a name="l00683"></a>00683     $limit = $this-&gt;<a class="code" href="classDynamicZobrazeni.html#d1b50d0b7cc1d6c1ed8cdd8df7d9a2cc">VypisLimitRSS</a>($podm_adresa);  <span class="comment">//vrati pocet polozek v rychlo vypisu</span>
<a name="l00684"></a>00684 
<a name="l00685"></a>00685     $this-&gt;rss_kodovani = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_rss_kodovani_{$tvar}"</span>]);
<a name="l00686"></a>00686     $this-&gt;rss_title = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_rss_title_{$tvar}"</span>]);
<a name="l00687"></a>00687     $this-&gt;rss_category = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_rss_category_{$tvar}"</span>]);
<a name="l00688"></a>00688     $this-&gt;rss_description = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_rss_description_{$tvar}"</span>]);
<a name="l00689"></a>00689     $this-&gt;rss_language = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_rss_language_{$tvar}"</span>]);
<a name="l00690"></a>00690     $this-&gt;rss_copyright = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_rss_copyright_{$tvar}"</span>]);
<a name="l00691"></a>00691     $this-&gt;rss_managingEditor = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_rss_managingEditor_{$tvar}"</span>]);
<a name="l00692"></a>00692     $this-&gt;rss_webMaster = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_rss_webMaster_{$tvar}"</span>]);
<a name="l00693"></a>00693     $this-&gt;rss_ttl = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_rss_ttl_{$tvar}"</span>]);
<a name="l00694"></a>00694     $this-&gt;rss_image_title = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_rss_image_title_{$tvar}"</span>]);
<a name="l00695"></a>00695     $this-&gt;rss_image_link = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_rss_image_link_{$tvar}"</span>], $this-&gt;absolutni_url);
<a name="l00696"></a>00696     $this-&gt;rss_image_url = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"set_rss_image_url_{$tvar}"</span>], $this-&gt;absolutni_url);
<a name="l00697"></a>00697 
<a name="l00698"></a>00698     <span class="keywordflow">if</span> ($_GET[$this-&gt;var-&gt;get_kam] == $this-&gt;rsslink)  <span class="comment">//ceka na danou adresu</span>
<a name="l00699"></a>00699     {
<a name="l00700"></a>00700       <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_rss_header_{$tvar}"</span>],
<a name="l00701"></a>00701                                           $this-&gt;rss_kodovani,
<a name="l00702"></a>00702                                           $this-&gt;rss_title,
<a name="l00703"></a>00703                                           $this-&gt;absolutni_url,
<a name="l00704"></a>00704                                           $this-&gt;rss_category,
<a name="l00705"></a>00705                                           $this-&gt;rss_description,
<a name="l00706"></a>00706                                           $this-&gt;rss_language,
<a name="l00707"></a>00707                                           $this-&gt;rss_copyright,
<a name="l00708"></a>00708                                           $this-&gt;rss_managingEditor,
<a name="l00709"></a>00709                                           $this-&gt;rss_webMaster,
<a name="l00710"></a>00710                                           $this-&gt;rss_ttl,
<a name="l00711"></a>00711                                           gmdate(<span class="stringliteral">"D, d M Y H:i:s \G\M\T"</span>),
<a name="l00712"></a>00712                                           $this-&gt;rss_image_url);
<a name="l00713"></a>00713 
<a name="l00714"></a>00714       <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT obsah_sablony.nazev nazev,</span>
<a name="l00715"></a>00715 <span class="stringliteral">                                        obsah_sablony.rewrite rewrite,</span>
<a name="l00716"></a>00716 <span class="stringliteral">                                        obsah_sablony.obsah obsah,</span>
<a name="l00717"></a>00717 <span class="stringliteral">                                        obsah_sablony.pridano datum</span>
<a name="l00718"></a>00718 <span class="stringliteral">                                        FROM sablona, obsah_sablony</span>
<a name="l00719"></a>00719 <span class="stringliteral">                                        WHERE</span>
<a name="l00720"></a>00720 <span class="stringliteral">                                        sablona.id=obsah_sablony.sablona AND</span>
<a name="l00721"></a>00721 <span class="stringliteral">                                        sablona.adresa{$adresa}</span>
<a name="l00722"></a>00722 <span class="stringliteral">                                        ORDER BY obsah_sablony.pridano {$razeni}</span>
<a name="l00723"></a>00723 <span class="stringliteral">                                        LIMIT 0,{$limit};"</span>, NULL, $error))
<a name="l00724"></a>00724       {
<a name="l00725"></a>00725         <span class="keywordflow">if</span> ($res-&gt;numRows() != 0)
<a name="l00726"></a>00726         {
<a name="l00727"></a>00727           $i = 0;
<a name="l00728"></a>00728           <span class="keywordflow">while</span> ($data = $res-&gt;fetchObject())
<a name="l00729"></a>00729           {
<a name="l00730"></a>00730             $obsahpole = explode(<span class="stringliteral">"|-x-|"</span>, $data-&gt;obsah);
<a name="l00731"></a>00731 
<a name="l00732"></a>00732             $vypis = array(<span class="stringliteral">"array_args"</span>,
<a name="l00733"></a>00733                           $this-&gt;absolutni_url,
<a name="l00734"></a>00734                           $data-&gt;rewrite,
<a name="l00735"></a>00735                           $data-&gt;nazev,
<a name="l00736"></a>00736                           date(<span class="stringliteral">"D, d M Y H:i:s \G\M\T"</span>, strtotime($data-&gt;datum)),
<a name="l00737"></a>00737                           $i);
<a name="l00738"></a>00738 
<a name="l00739"></a>00739             <span class="keywordflow">for</span> ($j = 0; $j &lt; count($obsahpole); $j++)
<a name="l00740"></a>00740             {
<a name="l00741"></a>00741               <span class="keywordflow">if</span> (count(explode(<span class="stringliteral">"||--x--||"</span>, $obsahpole[$j])) == 5)
<a name="l00742"></a>00742               {
<a name="l00743"></a>00743                 $obr = explode(<span class="stringliteral">"||--x--||"</span>, $obsahpole[$j]);
<a name="l00744"></a>00744                 $vypis[] = <span class="stringliteral">"{$this-&gt;absolutni_url}{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;minidir}/{$obr[0]}"</span>;
<a name="l00745"></a>00745                 $vypis[] = <span class="stringliteral">"{$this-&gt;absolutni_url}{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;fulldir}/{$obr[0]}"</span>;
<a name="l00746"></a>00746               }
<a name="l00747"></a>00747                 <span class="keywordflow">else</span>
<a name="l00748"></a>00748               {
<a name="l00749"></a>00749                 $vypis[] = $obsahpole[$j];
<a name="l00750"></a>00750               }
<a name="l00751"></a>00751             }
<a name="l00752"></a>00752 
<a name="l00753"></a>00753             <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_rss_item_{$tvar}"</span>], $vypis);
<a name="l00754"></a>00754             $i++;
<a name="l00755"></a>00755           }
<a name="l00756"></a>00756         }
<a name="l00757"></a>00757       }
<a name="l00758"></a>00758 
<a name="l00759"></a>00759       <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_rss_end_{$tvar}"</span>]);
<a name="l00760"></a>00760 
<a name="l00761"></a>00761       echo <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l00762"></a>00762       exit(0);
<a name="l00763"></a>00763     }
<a name="l00764"></a>00764   }
<a name="l00765"></a>00765 
<a name="l00778"></a><a class="code" href="classDynamicZobrazeni.html#272954222097a95ba2a15a9387df3506">00778</a>   <span class="keyword">public</span> function <a class="code" href="classDynamicZobrazeni.html#272954222097a95ba2a15a9387df3506">RychloVypis</a>($adr = NULL, $tvar = 1)
<a name="l00779"></a>00779   {
<a name="l00780"></a>00780     <span class="keywordflow">if</span> (!Empty($adr))
<a name="l00781"></a>00781     {
<a name="l00782"></a>00782       <span class="keywordflow">if</span> (is_array($adr))
<a name="l00783"></a>00783       {
<a name="l00784"></a>00784         $uvoz = <span class="stringliteral">""</span>;
<a name="l00785"></a>00785         <span class="keywordflow">for</span> ($i = 0; $i &lt; count($adr); $i++)
<a name="l00786"></a>00786         {
<a name="l00787"></a>00787           $uvoz[] .= <span class="stringliteral">"'{$adr[$i]}'"</span>;
<a name="l00788"></a>00788         }
<a name="l00789"></a>00789         $uvoz = implode(<span class="stringliteral">", "</span>, $uvoz);
<a name="l00790"></a>00790         $adresa = <span class="stringliteral">" IN ({$uvoz})"</span>;
<a name="l00791"></a>00791         $podm_adresa = $adr[0];
<a name="l00792"></a>00792       }
<a name="l00793"></a>00793         <span class="keywordflow">else</span>
<a name="l00794"></a>00794       {
<a name="l00795"></a>00795         $adresa = <span class="stringliteral">"='{$adr}'"</span>;
<a name="l00796"></a>00796         $podm_adresa = $adr;
<a name="l00797"></a>00797       }
<a name="l00798"></a>00798     }
<a name="l00799"></a>00799       <span class="keywordflow">else</span>
<a name="l00800"></a>00800     {
<a name="l00801"></a>00801       $adr = stripslashes(htmlspecialchars($_SERVER[<span class="stringliteral">"QUERY_STRING"</span>], ENT_QUOTES));
<a name="l00802"></a>00802       $adresa = <span class="stringliteral">"='{$adr}'"</span>;
<a name="l00803"></a>00803       $podm_adresa = $adr;
<a name="l00804"></a>00804     }
<a name="l00805"></a>00805 
<a name="l00806"></a>00806     $razeni = $this-&gt;<a class="code" href="classDynamicZobrazeni.html#e938b9560713f4aa2a14f22398e7d650">RychloVypisRazeni</a>($podm_adresa);  <span class="comment">//vrati smer razeni</span>
<a name="l00807"></a>00807     $limit = $this-&gt;<a class="code" href="classDynamicZobrazeni.html#ebd8ae0f237d0674a3e9622c80362f65">RychloVypisLimit</a>($podm_adresa);  <span class="comment">//vrati pocet polozek v rychlo vypisu</span>
<a name="l00808"></a>00808 
<a name="l00809"></a>00809     $prvni = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_rychlo_vypis_prvni_{$tvar}"</span>]);
<a name="l00810"></a>00810     $posledni = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_rychlo_vypis_posledni_{$tvar}"</span>]);
<a name="l00811"></a>00811     $ente_def_array = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_rychlo_vypis_ente_def_array_{$tvar}"</span>]);
<a name="l00812"></a>00812     $ente_def = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_rychlo_vypis_ente_def_{$tvar}"</span>]);
<a name="l00813"></a>00813     $ente_od = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_rychlo_vypis_ente_od_{$tvar}"</span>]);
<a name="l00814"></a>00814     $ente_po = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_rychlo_vypis_ente_po_{$tvar}"</span>]);
<a name="l00815"></a>00815     $ente = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_rychlo_vypis_ente_{$tvar}"</span>]);
<a name="l00816"></a>00816 
<a name="l00817"></a>00817     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="stringliteral">""</span>;
<a name="l00818"></a>00818     <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT obsah_sablony.nazev nazev,</span>
<a name="l00819"></a>00819 <span class="stringliteral">                                      obsah_sablony.rewrite rewrite,</span>
<a name="l00820"></a>00820 <span class="stringliteral">                                      obsah_sablony.obsah obsah</span>
<a name="l00821"></a>00821 <span class="stringliteral">                                      FROM sablona, obsah_sablony</span>
<a name="l00822"></a>00822 <span class="stringliteral">                                      WHERE</span>
<a name="l00823"></a>00823 <span class="stringliteral">                                      sablona.id=obsah_sablony.sablona AND</span>
<a name="l00824"></a>00824 <span class="stringliteral">                                      sablona.adresa{$adresa}</span>
<a name="l00825"></a>00825 <span class="stringliteral">                                      ORDER BY obsah_sablony.pridano {$razeni}</span>
<a name="l00826"></a>00826 <span class="stringliteral">                                      LIMIT 0,{$limit};"</span>, NULL, $error))
<a name="l00827"></a>00827     {
<a name="l00828"></a>00828       <span class="keywordflow">if</span> ($res-&gt;numRows() != 0)
<a name="l00829"></a>00829       {
<a name="l00830"></a>00830         $i = 0;
<a name="l00831"></a>00831         <span class="keywordflow">while</span> ($data = $res-&gt;fetchObject())
<a name="l00832"></a>00832         {
<a name="l00833"></a>00833           $obsahpole = explode(<span class="stringliteral">"|-x-|"</span>, $data-&gt;obsah);
<a name="l00834"></a>00834 
<a name="l00835"></a>00835           $vypis = array(<span class="stringliteral">"array_args"</span>,
<a name="l00836"></a>00836                         $this-&gt;absolutni_url,
<a name="l00837"></a>00837                         $data-&gt;rewrite,
<a name="l00838"></a>00838                         $data-&gt;nazev,
<a name="l00839"></a>00839                         (!Empty($data-&gt;rewrite) &amp;&amp; $_GET[$this-&gt;var-&gt;get_kam] == $data-&gt;rewrite ? $this-&gt;NactiUnikatniObsah($this-&gt;unikatni[<span class="stringliteral">"normal_rychlo_vypis_oznaceni_{$tvar}"</span>]) : <span class="stringliteral">""</span>),
<a name="l00840"></a>00840                         ($i == 0 ? $prvni : <span class="stringliteral">""</span>),
<a name="l00841"></a>00841                         ($i == ($res-&gt;numRows() - 1) ? $posledni : <span class="stringliteral">""</span>),
<a name="l00842"></a>00842                         (in_array($i, $ente_def_array) ? $ente_def : <span class="stringliteral">""</span>),
<a name="l00843"></a>00843                         ((($i + $ente_od) % $ente_po) == 0 ? $ente : <span class="stringliteral">""</span>));
<a name="l00844"></a>00844 
<a name="l00845"></a>00845           <span class="keywordflow">for</span> ($j = 0; $j &lt; count($obsahpole); $j++)
<a name="l00846"></a>00846           {
<a name="l00847"></a>00847             <span class="keywordflow">if</span> (count(explode(<span class="stringliteral">"||--x--||"</span>, $obsahpole[$j])) == 5)
<a name="l00848"></a>00848             {
<a name="l00849"></a>00849               $obr = explode(<span class="stringliteral">"||--x--||"</span>, $obsahpole[$j]);
<a name="l00850"></a>00850               $vypis[] = <span class="stringliteral">"{$this-&gt;absolutni_url}{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;minidir}/{$obr[0]}"</span>;
<a name="l00851"></a>00851               $vypis[] = <span class="stringliteral">"{$this-&gt;absolutni_url}{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;fulldir}/{$obr[0]}"</span>;
<a name="l00852"></a>00852             }
<a name="l00853"></a>00853               <span class="keywordflow">else</span>
<a name="l00854"></a>00854             {
<a name="l00855"></a>00855               $vypis[] = $obsahpole[$j];
<a name="l00856"></a>00856             }
<a name="l00857"></a>00857           }
<a name="l00858"></a>00858 
<a name="l00859"></a>00859           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_rychlo_vypis_{$tvar}"</span>], $vypis);
<a name="l00860"></a>00860           $i++;
<a name="l00861"></a>00861         }
<a name="l00862"></a>00862       }
<a name="l00863"></a>00863         <span class="keywordflow">else</span>
<a name="l00864"></a>00864       {
<a name="l00865"></a>00865         <span class="keywordflow">if</span> ($this-&gt;vypis_chybu)
<a name="l00866"></a>00866         {
<a name="l00867"></a>00867           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_rychlo_vypis_null_{$tvar}"</span>]);
<a name="l00868"></a>00868         }
<a name="l00869"></a>00869       }
<a name="l00870"></a>00870     }
<a name="l00871"></a>00871       <span class="keywordflow">else</span>
<a name="l00872"></a>00872     {
<a name="l00873"></a>00873       $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l00874"></a>00874     }
<a name="l00875"></a>00875 
<a name="l00876"></a>00876     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l00877"></a>00877   }
<a name="l00878"></a>00878 
<a name="l00887"></a><a class="code" href="classDynamicZobrazeni.html#c88531d48ea37f9adeb65a912cfc7216">00887</a>   <span class="keyword">public</span> function <a class="code" href="classDynamicZobrazeni.html#c88531d48ea37f9adeb65a912cfc7216">Title</a>()
<a name="l00888"></a>00888   {
<a name="l00889"></a>00889     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="stringliteral">""</span>;
<a name="l00890"></a>00890     <span class="keywordflow">if</span> (!Empty($_GET[$this-&gt;adresa_sekce]))
<a name="l00891"></a>00891     {
<a name="l00892"></a>00892       $adresa = $_GET[$this-&gt;adresa_sekce];
<a name="l00893"></a>00893       <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT nazev</span>
<a name="l00894"></a>00894 <span class="stringliteral">                                        FROM obsah_sablony</span>
<a name="l00895"></a>00895 <span class="stringliteral">                                        WHERE</span>
<a name="l00896"></a>00896 <span class="stringliteral">                                        rewrite='{$adresa}';"</span>, NULL, $error))
<a name="l00897"></a>00897       {
<a name="l00898"></a>00898         <span class="keywordflow">if</span> ($res-&gt;numRows() == 1)
<a name="l00899"></a>00899         {
<a name="l00900"></a>00900           $data = $res-&gt;fetchObject();
<a name="l00901"></a>00901           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_vypis_title"</span>],  $data-&gt;nazev);
<a name="l00902"></a>00902         }
<a name="l00903"></a>00903       }
<a name="l00904"></a>00904         <span class="keywordflow">else</span>
<a name="l00905"></a>00905       {
<a name="l00906"></a>00906         $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l00907"></a>00907       }
<a name="l00908"></a>00908     }
<a name="l00909"></a>00909 
<a name="l00910"></a>00910     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l00911"></a>00911   }
<a name="l00912"></a>00912 
<a name="l00925"></a><a class="code" href="classDynamicZobrazeni.html#3abf7d2b5f9997064f0adb1869fbad68">00925</a>   <span class="keyword">public</span> function <a class="code" href="classDynamicZobrazeni.html#3abf7d2b5f9997064f0adb1869fbad68">DynamickeZobrazeni</a>($adr = NULL, $kontrola = <span class="keyword">true</span>, $pridavek = NULL, $tvar = 1)
<a name="l00926"></a>00926   {
<a name="l00927"></a>00927     <span class="keywordflow">if</span> (!Empty($adr))
<a name="l00928"></a>00928     {
<a name="l00929"></a>00929       $adresa = $adr;
<a name="l00930"></a>00930     }
<a name="l00931"></a>00931       <span class="keywordflow">else</span>
<a name="l00932"></a>00932     {
<a name="l00933"></a>00933       $adresa = stripslashes(htmlspecialchars($_SERVER[<span class="stringliteral">"QUERY_STRING"</span>], ENT_QUOTES));
<a name="l00934"></a>00934     }
<a name="l00935"></a>00935 
<a name="l00936"></a>00936     $razeni = $this-&gt;<a class="code" href="classDynamicZobrazeni.html#e938b9560713f4aa2a14f22398e7d650">RychloVypisRazeni</a>($adresa);  <span class="comment">//vrati smer razeni</span>
<a name="l00937"></a>00937 
<a name="l00938"></a>00938     $prvni = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_vypis_prvni_{$tvar}"</span>]);
<a name="l00939"></a>00939     $posledni = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_vypis_posledni_{$tvar}"</span>]);
<a name="l00940"></a>00940     $ente_def_array = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_vypis_ente_def_array_{$tvar}"</span>]);
<a name="l00941"></a>00941     $ente_def = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_vypis_ente_def_{$tvar}"</span>]);
<a name="l00942"></a>00942     $ente_od = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_vypis_ente_od_{$tvar}"</span>]);
<a name="l00943"></a>00943     $ente_po = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_vypis_ente_po_{$tvar}"</span>]);
<a name="l00944"></a>00944     $ente = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_vypis_ente_{$tvar}"</span>]);
<a name="l00945"></a>00945 
<a name="l00946"></a>00946     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="stringliteral">""</span>;
<a name="l00947"></a>00947     <span class="keywordflow">if</span> (Empty($_GET[$this-&gt;adresa_sekce]))  <span class="comment">//normalni vypis</span>
<a name="l00948"></a>00948     {
<a name="l00949"></a>00949       <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT obsah_sablony.obsah obsah,</span>
<a name="l00950"></a>00950 <span class="stringliteral">                                        obsah_sablony.nazev nazev,</span>
<a name="l00951"></a>00951 <span class="stringliteral">                                        obsah_sablony.rewrite rewrite</span>
<a name="l00952"></a>00952 <span class="stringliteral">                                        FROM sablona, obsah_sablony</span>
<a name="l00953"></a>00953 <span class="stringliteral">                                        WHERE</span>
<a name="l00954"></a>00954 <span class="stringliteral">                                        sablona.id=obsah_sablony.sablona AND</span>
<a name="l00955"></a>00955 <span class="stringliteral">                                        sablona.adresa='{$adresa}'</span>
<a name="l00956"></a>00956 <span class="stringliteral">                                        ORDER BY obsah_sablony.pridano {$razeni};"</span>, NULL, $error))
<a name="l00957"></a>00957       {
<a name="l00958"></a>00958         <span class="keywordflow">if</span> ($res-&gt;numRows() != 0)
<a name="l00959"></a>00959         {
<a name="l00960"></a>00960           $i = 0;
<a name="l00961"></a>00961           <span class="keywordflow">while</span> ($data = $res-&gt;fetchObject())
<a name="l00962"></a>00962           {
<a name="l00963"></a>00963             $obsahpole = explode(<span class="stringliteral">"|-x-|"</span>, $data-&gt;obsah);
<a name="l00964"></a>00964 
<a name="l00965"></a>00965             $vypis = array(<span class="stringliteral">"array_args"</span>,
<a name="l00966"></a>00966                           $this-&gt;absolutni_url,
<a name="l00967"></a>00967                           $data-&gt;rewrite,
<a name="l00968"></a>00968                           $data-&gt;nazev,
<a name="l00969"></a>00969                           ($i == 0 ? $prvni : <span class="stringliteral">""</span>),
<a name="l00970"></a>00970                           ($i == ($res-&gt;numRows() - 1) ? $posledni : <span class="stringliteral">""</span>),
<a name="l00971"></a>00971                           (in_array($i, $ente_def_array) ? $ente_def : <span class="stringliteral">""</span>),
<a name="l00972"></a>00972                           ((($i + $ente_od) % $ente_po) == 0 ? $ente : <span class="stringliteral">""</span>));
<a name="l00973"></a>00973 
<a name="l00974"></a>00974             <span class="keywordflow">for</span> ($j = 0; $j &lt; count($obsahpole); $j++)
<a name="l00975"></a>00975             {
<a name="l00976"></a>00976               <span class="keywordflow">if</span> (count(explode(<span class="stringliteral">"||--x--||"</span>, $obsahpole[$j])) == 5)
<a name="l00977"></a>00977               {
<a name="l00978"></a>00978                 $obr = explode(<span class="stringliteral">"||--x--||"</span>, $obsahpole[$j]);
<a name="l00979"></a>00979                 $vypis[] = <span class="stringliteral">"{$this-&gt;absolutni_url}{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;minidir}/{$obr[0]}"</span>;
<a name="l00980"></a>00980                 $vypis[] = <span class="stringliteral">"{$this-&gt;absolutni_url}{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;fulldir}/{$obr[0]}"</span>;
<a name="l00981"></a>00981               }
<a name="l00982"></a>00982                 <span class="keywordflow">else</span>
<a name="l00983"></a>00983               {
<a name="l00984"></a>00984                 $vypis[] = ($kontrola ? htmlspecialchars_decode(html_entity_decode($obsahpole[$j])) : $obsahpole[$j]);
<a name="l00985"></a>00985               }
<a name="l00986"></a>00986             }
<a name="l00987"></a>00987 
<a name="l00988"></a>00988             $dalsi[] = $this-&gt;absolutni_url;  <span class="comment">//vklada se za vygenerovany vypis a neplati dosavadni promenne</span>
<a name="l00989"></a>00989             <span class="keywordflow">for</span> ($j = 0; $j &lt; count($pridavek); $j++)
<a name="l00990"></a>00990             {
<a name="l00991"></a>00991               $dalsi[] = $pridavek[$j]; <span class="comment">//naplneni pole pro doplnkove %% parametry</span>
<a name="l00992"></a>00992             }
<a name="l00993"></a>00993 
<a name="l00994"></a>00994             <span class="keywordflow">if</span> (!Empty($dalsi)) <span class="comment">//pokud je pridavek pouzit</span>
<a name="l00995"></a>00995             {
<a name="l00996"></a>00996               $vypis = array_merge($vypis, $dalsi); <span class="comment">//slouceni pole</span>
<a name="l00997"></a>00997             }
<a name="l00998"></a>00998 
<a name="l00999"></a>00999             <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_vypis_{$tvar}"</span>], <span class="comment">//klasický %% výpis!!</span>
<a name="l01000"></a>01000                                                 $vypis);
<a name="l01001"></a>01001             $i++;
<a name="l01002"></a>01002           }
<a name="l01003"></a>01003         }
<a name="l01004"></a>01004           <span class="keywordflow">else</span>
<a name="l01005"></a>01005         {
<a name="l01006"></a>01006           <span class="keywordflow">if</span> ($this-&gt;vypis_chybu)
<a name="l01007"></a>01007           {
<a name="l01008"></a>01008             <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_vypis_null_{$tvar}"</span>]);
<a name="l01009"></a>01009           }
<a name="l01010"></a>01010         }
<a name="l01011"></a>01011       }
<a name="l01012"></a>01012         <span class="keywordflow">else</span>
<a name="l01013"></a>01013       {
<a name="l01014"></a>01014         $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l01015"></a>01015       }
<a name="l01016"></a>01016     }
<a name="l01017"></a>01017       <span class="keywordflow">else</span>
<a name="l01018"></a>01018     {
<a name="l01019"></a>01019       $adresa = $_GET[$this-&gt;adresa_sekce]; <span class="comment">//full one vypis</span>
<a name="l01020"></a>01020       <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT obsah, nazev, rewrite</span>
<a name="l01021"></a>01021 <span class="stringliteral">                                        FROM obsah_sablony</span>
<a name="l01022"></a>01022 <span class="stringliteral">                                        WHERE</span>
<a name="l01023"></a>01023 <span class="stringliteral">                                        rewrite='{$adresa}';"</span>, NULL, $error))
<a name="l01024"></a>01024       {
<a name="l01025"></a>01025         <span class="keywordflow">if</span> ($res-&gt;numRows() == 1)
<a name="l01026"></a>01026         {
<a name="l01027"></a>01027           $data = $res-&gt;fetchObject();
<a name="l01028"></a>01028 
<a name="l01029"></a>01029           $obsahpole = explode(<span class="stringliteral">"|-x-|"</span>, $data-&gt;obsah);
<a name="l01030"></a>01030 
<a name="l01031"></a>01031           $vypis = array(<span class="stringliteral">"array_args"</span>);
<a name="l01032"></a>01032           <span class="keywordflow">for</span> ($i = 0; $i &lt; count($obsahpole); $i++)
<a name="l01033"></a>01033           {
<a name="l01034"></a>01034             <span class="keywordflow">if</span> (count(explode(<span class="stringliteral">"||--x--||"</span>, $obsahpole[$i])) == 5)
<a name="l01035"></a>01035             {
<a name="l01036"></a>01036               $obr = explode(<span class="stringliteral">"||--x--||"</span>, $obsahpole[$i]);
<a name="l01037"></a>01037               $vypis[] = <span class="stringliteral">"{$this-&gt;absolutni_url}{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;minidir}/{$obr[0]}"</span>;
<a name="l01038"></a>01038               $vypis[] = <span class="stringliteral">"{$this-&gt;absolutni_url}{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;fulldir}/{$obr[0]}"</span>;
<a name="l01039"></a>01039             }
<a name="l01040"></a>01040               <span class="keywordflow">else</span>
<a name="l01041"></a>01041             {
<a name="l01042"></a>01042               $vypis[] = $obsahpole[$i];
<a name="l01043"></a>01043             }
<a name="l01044"></a>01044           }
<a name="l01045"></a>01045 
<a name="l01046"></a>01046           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_vypis_full_{$tvar}"</span>], $vypis);
<a name="l01047"></a>01047         }
<a name="l01048"></a>01048           <span class="keywordflow">else</span>
<a name="l01049"></a>01049         {
<a name="l01050"></a>01050           <span class="comment">//if ($this-&gt;vypis_chybu)</span>
<a name="l01051"></a>01051           <span class="comment">//{</span>
<a name="l01052"></a>01052             <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"normal_vypis_full_error_{$tvar}"</span>]);
<a name="l01053"></a>01053           <span class="comment">//}</span>
<a name="l01054"></a>01054         }
<a name="l01055"></a>01055       }
<a name="l01056"></a>01056         <span class="keywordflow">else</span>
<a name="l01057"></a>01057       {
<a name="l01058"></a>01058         $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l01059"></a>01059       }
<a name="l01060"></a>01060     }
<a name="l01061"></a>01061 
<a name="l01062"></a>01062     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l01063"></a>01063   }
<a name="l01064"></a>01064 
<a name="l01072"></a><a class="code" href="classDynamicZobrazeni.html#92f116c2d3a870a2c4a06fa0f448654a">01072</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#92f116c2d3a870a2c4a06fa0f448654a">AdminObsahSablony</a>($sablona)
<a name="l01073"></a>01073   {
<a name="l01074"></a>01074     settype($sablona, <span class="stringliteral">"integer"</span>);
<a name="l01075"></a>01075 
<a name="l01076"></a>01076     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_obsah_sablony"</span>],
<a name="l01077"></a>01077                                         <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}__{$sablona}&amp;amp;co=addobsah"</span>,
<a name="l01078"></a>01078                                         $this-&gt;<a class="code" href="classDynamicZobrazeni.html#05e397753eae917d0d7deb470d81c172">VypisPopisku</a>($sablona),
<a name="l01079"></a>01079                                         $this-&gt;<a class="code" href="classDynamicZobrazeni.html#31f7ac3341daabbeb7f778bfdb21e292">AdminVypisObsahSablony</a>($sablona));
<a name="l01080"></a>01080 
<a name="l01081"></a>01081     $typelementu = array_keys($this-&gt;element);
<a name="l01082"></a>01082 
<a name="l01083"></a>01083     <span class="keywordflow">if</span> (!file_exists(<span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}"</span>))  <span class="comment">//vytvoreni slozek na obrazky</span>
<a name="l01084"></a>01084     {
<a name="l01085"></a>01085       mkdir(<span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}"</span>, 0777);
<a name="l01086"></a>01086     }
<a name="l01087"></a>01087 
<a name="l01088"></a>01088     <span class="keywordflow">if</span> (file_exists(<span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}"</span>) &amp;&amp;
<a name="l01089"></a>01089         !file_exists(<span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;minidir}"</span>))
<a name="l01090"></a>01090     {
<a name="l01091"></a>01091       mkdir(<span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;minidir}"</span>, 0777);
<a name="l01092"></a>01092     }
<a name="l01093"></a>01093 
<a name="l01094"></a>01094     <span class="keywordflow">if</span> (file_exists(<span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}"</span>) &amp;&amp;
<a name="l01095"></a>01095         !file_exists(<span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;fulldir}"</span>))
<a name="l01096"></a>01096     {
<a name="l01097"></a>01097       mkdir(<span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;fulldir}"</span>, 0777);
<a name="l01098"></a>01098     }
<a name="l01099"></a>01099 
<a name="l01100"></a>01100     $co = $_GET[<span class="stringliteral">"co"</span>];
<a name="l01101"></a>01101 
<a name="l01102"></a>01102     <span class="keywordflow">if</span> (!Empty($co))
<a name="l01103"></a>01103     {
<a name="l01104"></a>01104       <span class="keywordflow">switch</span> ($co)
<a name="l01105"></a>01105       {
<a name="l01106"></a>01106         <span class="keywordflow">case</span> <span class="stringliteral">"addobsah"</span>:  <span class="comment">//pridavani obsahu</span>
<a name="l01107"></a>01107           <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT id, sablona, typ, nazev, value,</span>
<a name="l01108"></a>01108 <span class="stringliteral">                                            input_id, input_class, input_akce,</span>
<a name="l01109"></a>01109 <span class="stringliteral">                                            povinne, vstupni_typ, reg_exp,</span>
<a name="l01110"></a>01110 <span class="stringliteral">                                            vystupni_format, min_poc, max_poc,</span>
<a name="l01111"></a>01111 <span class="stringliteral">                                            poradi</span>
<a name="l01112"></a>01112 <span class="stringliteral">                                            FROM element</span>
<a name="l01113"></a>01113 <span class="stringliteral">                                            WHERE sablona={$sablona}</span>
<a name="l01114"></a>01114 <span class="stringliteral">                                            ORDER BY poradi ASC;"</span>, NULL, $error))
<a name="l01115"></a>01115           {
<a name="l01116"></a>01116             <span class="keywordflow">if</span> ($res-&gt;numRows() != 0)
<a name="l01117"></a>01117             {
<a name="l01118"></a>01118               <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> = <span class="stringliteral">""</span>;
<a name="l01119"></a>01119               $i = 0;
<a name="l01120"></a>01120               $pocetelem = $res-&gt;numRows();
<a name="l01121"></a>01121               $poradielem = 7;  <span class="comment">//+7</span>
<a name="l01122"></a>01122               <span class="keywordflow">while</span>($data = $res-&gt;fetchObject())
<a name="l01123"></a>01123               {
<a name="l01124"></a>01124                 $povinne = ($data-&gt;povinne ? $this-&gt;znacka_povinne : <span class="stringliteral">""</span>);
<a name="l01125"></a>01125 
<a name="l01126"></a>01126                 $podminka[$i][<span class="stringliteral">"id"</span>] = $data-&gt;id;
<a name="l01127"></a>01127                 $podminka[$i][<span class="stringliteral">"name"</span>] = <span class="stringliteral">"elem_{$data-&gt;id}"</span>; <span class="comment">//jmeno elementu</span>
<a name="l01128"></a>01128                 $podminka[$i][<span class="stringliteral">"obr"</span>] = <span class="stringliteral">"elem_obr"</span>; <span class="comment">//nazev elementu obrazku</span>
<a name="l01129"></a>01129                 $podminka[$i][<span class="stringliteral">"nahled"</span>] = <span class="stringliteral">"nahled_obr"</span>; <span class="comment">//nazev elementu nahledu</span>
<a name="l01130"></a>01130                 $podminka[$i][<span class="stringliteral">"typ"</span>] = $typelementu[$data-&gt;typ];  <span class="comment">//textove oznaceni typu</span>
<a name="l01131"></a>01131                 $podminka[$i][<span class="stringliteral">"povinne"</span>] = $data-&gt;povinne;  <span class="comment">//bool vyraz povinne</span>
<a name="l01132"></a>01132                 $podminka[$i][<span class="stringliteral">"vstup"</span>] = $this-&gt;vstupni_typ[$data-&gt;vstupni_typ];  <span class="comment">//typ vstupu</span>
<a name="l01133"></a>01133                 $podminka[$i][<span class="stringliteral">"reg_exp"</span>] = $data-&gt;reg_exp;  <span class="comment">//regularni vyraz</span>
<a name="l01134"></a>01134                 $podminka[$i][<span class="stringliteral">"min"</span>] = $data-&gt;min_poc;  <span class="comment">//minimalni pocet</span>
<a name="l01135"></a>01135                 $podminka[$i][<span class="stringliteral">"max"</span>] = $data-&gt;max_poc;  <span class="comment">//maximalni pocet</span>
<a name="l01136"></a>01136 
<a name="l01137"></a>01137                 $input_id = (!Empty($data-&gt;input_id) ? $data-&gt;input_id : <span class="stringliteral">""</span>);
<a name="l01138"></a>01138                 $input_class = (!Empty($data-&gt;input_id) ? $data-&gt;input_class : <span class="stringliteral">""</span>);
<a name="l01139"></a>01139                 $input_akce = (!Empty($data-&gt;input_id) ? $data-&gt;input_akce : <span class="stringliteral">""</span>);
<a name="l01140"></a>01140 
<a name="l01141"></a>01141                 <span class="keywordflow">switch</span> ($typelementu[$data-&gt;typ])
<a name="l01142"></a>01142                 {
<a name="l01143"></a>01143                   <span class="keywordflow">case</span> <span class="stringliteral">"nadpis"</span>: <span class="comment">//nadpis</span>
<a name="l01144"></a>01144                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01145"></a>01145                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_nadpis"</span>],
<a name="l01146"></a>01146                                                           $data-&gt;nazev,
<a name="l01147"></a>01147                                                           $data-&gt;id,
<a name="l01148"></a>01148                                                           $data-&gt;value,
<a name="l01149"></a>01149                                                           $input_id,
<a name="l01150"></a>01150                                                           $input_class,
<a name="l01151"></a>01151                                                           $input_akce,
<a name="l01152"></a>01152                                                           $povinne,
<a name="l01153"></a>01153                                                           $poradielem);
<a name="l01154"></a>01154                   <span class="keywordflow">break</span>;
<a name="l01155"></a>01155 
<a name="l01156"></a>01156                   <span class="keywordflow">case</span> <span class="stringliteral">"popisek"</span>: <span class="comment">//popisek</span>
<a name="l01157"></a>01157                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01158"></a>01158                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_popisek"</span>],
<a name="l01159"></a>01159                                                           $data-&gt;nazev,
<a name="l01160"></a>01160                                                           $data-&gt;id,
<a name="l01161"></a>01161                                                           $data-&gt;value,
<a name="l01162"></a>01162                                                           $input_id,
<a name="l01163"></a>01163                                                           $input_class,
<a name="l01164"></a>01164                                                           $input_akce,
<a name="l01165"></a>01165                                                           $povinne,
<a name="l01166"></a>01166                                                           $poradielem);
<a name="l01167"></a>01167                   <span class="keywordflow">break</span>;
<a name="l01168"></a>01168 
<a name="l01169"></a>01169                   <span class="keywordflow">case</span> <span class="stringliteral">"text"</span>: <span class="comment">//text</span>
<a name="l01170"></a>01170                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01171"></a>01171                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_text"</span>],
<a name="l01172"></a>01172                                                           $data-&gt;nazev,
<a name="l01173"></a>01173                                                           $data-&gt;id,
<a name="l01174"></a>01174                                                           $data-&gt;value,
<a name="l01175"></a>01175                                                           $input_id,
<a name="l01176"></a>01176                                                           $input_class,
<a name="l01177"></a>01177                                                           $input_akce,
<a name="l01178"></a>01178                                                           $povinne,
<a name="l01179"></a>01179                                                           $poradielem);
<a name="l01180"></a>01180                   <span class="keywordflow">break</span>;
<a name="l01181"></a>01181 
<a name="l01182"></a>01182                   <span class="keywordflow">case</span> <span class="stringliteral">"obrazek"</span>: <span class="comment">//obrazek</span>
<a name="l01183"></a>01183                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01184"></a>01184                     $rozdelit = explode(<span class="stringliteral">"|-|"</span>, $data-&gt;value);
<a name="l01185"></a>01185                     $w_mini = $rozdelit[0];
<a name="l01186"></a>01186                     $h_mini = $rozdelit[1];
<a name="l01187"></a>01187                     $w_full = $rozdelit[2];
<a name="l01188"></a>01188                     $h_full = $rozdelit[3];
<a name="l01189"></a>01189 
<a name="l01190"></a>01190                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_obrazek"</span>],
<a name="l01191"></a>01191                                                           $data-&gt;nazev,
<a name="l01192"></a>01192                                                           $data-&gt;id,
<a name="l01193"></a>01193                                                           $input_id,
<a name="l01194"></a>01194                                                           $input_class,
<a name="l01195"></a>01195                                                           $input_akce,
<a name="l01196"></a>01196                                                           $povinne,
<a name="l01197"></a>01197                                                           $w_mini,
<a name="l01198"></a>01198                                                           $h_mini,
<a name="l01199"></a>01199                                                           $w_full,
<a name="l01200"></a>01200                                                           $h_full,
<a name="l01201"></a>01201                                                           ($w_mini != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01202"></a>01202                                                           ($h_mini != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01203"></a>01203                                                           ($w_mini != 0 &amp;&amp; $h_mini != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01204"></a>01204                                                           ($w_mini == 0 &amp;&amp; $h_mini == 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01205"></a>01205                                                           ($w_full != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01206"></a>01206                                                           ($h_full != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01207"></a>01207                                                           ($w_full != 0 &amp;&amp; $h_full != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01208"></a>01208                                                           ($w_full == 0 &amp;&amp; $h_full == 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01209"></a>01209                                                           ($w_mini == 0 &amp;&amp; $h_mini == 0 ? <span class="stringliteral">"mini_4{$data-&gt;id}()"</span> : ($w_mini != 0 &amp;&amp; $h_mini != 0 ? <span class="stringliteral">"mini_3{$data-&gt;id}();"</span> : ($h_mini != 0 ? <span class="stringliteral">"mini_2{$data-&gt;id}();"</span> : ($w_mini != 0 ? <span class="stringliteral">"mini_1{$data-&gt;id}();"</span> : <span class="stringliteral">""</span>)))),
<a name="l01210"></a>01210                                                           ($w_full == 0 &amp;&amp; $h_full == 0 ? <span class="stringliteral">"full_4{$data-&gt;id}();"</span> : ($w_full != 0 &amp;&amp; $h_full != 0 ? <span class="stringliteral">"full_3{$data-&gt;id}();"</span> : ($h_full != 0 ? <span class="stringliteral">"full_2{$data-&gt;id}();"</span> : ($w_full != 0 ? <span class="stringliteral">"full_1{$data-&gt;id}();"</span> : <span class="stringliteral">""</span>)))),
<a name="l01211"></a>01211                                                           <span class="stringliteral">""</span>,
<a name="l01212"></a>01212                                                           <span class="stringliteral">""</span>,
<a name="l01213"></a>01213                                                           $poradielem);
<a name="l01214"></a>01214                   <span class="keywordflow">break</span>;
<a name="l01215"></a>01215 
<a name="l01216"></a>01216                   <span class="keywordflow">case</span> <span class="stringliteral">"datum"</span>: <span class="comment">//datum</span>
<a name="l01217"></a>01217                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01218"></a>01218                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_datum"</span>],
<a name="l01219"></a>01219                                                           $data-&gt;nazev,
<a name="l01220"></a>01220                                                           $data-&gt;id,
<a name="l01221"></a>01221                                                           date($data-&gt;vystupni_format),<span class="comment">//$data-&gt;value,</span>
<a name="l01222"></a>01222                                                           $input_id,
<a name="l01223"></a>01223                                                           $input_class,
<a name="l01224"></a>01224                                                           $input_akce,
<a name="l01225"></a>01225                                                           $povinne,
<a name="l01226"></a>01226                                                           $data-&gt;vystupni_format,
<a name="l01227"></a>01227                                                           date($data-&gt;vystupni_format),
<a name="l01228"></a>01228                                                           $poradielem);
<a name="l01229"></a>01229                   <span class="keywordflow">break</span>;
<a name="l01230"></a>01230 
<a name="l01231"></a>01231                   <span class="keywordflow">case</span> <span class="stringliteral">"cas"</span>: <span class="comment">//cas</span>
<a name="l01232"></a>01232                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01233"></a>01233                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_cas"</span>],
<a name="l01234"></a>01234                                                           $data-&gt;nazev,
<a name="l01235"></a>01235                                                           $data-&gt;id,
<a name="l01236"></a>01236                                                           date($data-&gt;vystupni_format),<span class="comment">//$data-&gt;value,</span>
<a name="l01237"></a>01237                                                           $input_id,
<a name="l01238"></a>01238                                                           $input_class,
<a name="l01239"></a>01239                                                           $input_akce,
<a name="l01240"></a>01240                                                           $povinne,
<a name="l01241"></a>01241                                                           $data-&gt;vystupni_format,
<a name="l01242"></a>01242                                                           date($data-&gt;vystupni_format),
<a name="l01243"></a>01243                                                           $poradielem);
<a name="l01244"></a>01244                   <span class="keywordflow">break</span>;
<a name="l01245"></a>01245 
<a name="l01246"></a>01246                   <span class="keywordflow">case</span> <span class="stringliteral">"datumcas"</span>: <span class="comment">//datumcas</span>
<a name="l01247"></a>01247                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01248"></a>01248                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_datumcas"</span>],
<a name="l01249"></a>01249                                                           $data-&gt;nazev,
<a name="l01250"></a>01250                                                           $data-&gt;id,
<a name="l01251"></a>01251                                                           date($data-&gt;vystupni_format),<span class="comment">//$data-&gt;value,</span>
<a name="l01252"></a>01252                                                           $input_id,
<a name="l01253"></a>01253                                                           $input_class,
<a name="l01254"></a>01254                                                           $input_akce,
<a name="l01255"></a>01255                                                           $povinne,
<a name="l01256"></a>01256                                                           $data-&gt;vystupni_format,
<a name="l01257"></a>01257                                                           date($data-&gt;vystupni_format),
<a name="l01258"></a>01258                                                           $poradielem);
<a name="l01259"></a>01259                   <span class="keywordflow">break</span>;
<a name="l01260"></a>01260 
<a name="l01261"></a>01261                   <span class="keywordflow">case</span> <span class="stringliteral">"checkbox"</span>: <span class="comment">//checkbox</span>
<a name="l01262"></a>01262                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01263"></a>01263                     $val = htmlspecialchars_decode(html_entity_decode($data-&gt;value));
<a name="l01264"></a>01264                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_checkbox"</span>],
<a name="l01265"></a>01265                                                           $data-&gt;nazev,
<a name="l01266"></a>01266                                                           $data-&gt;id,
<a name="l01267"></a>01267                                                           (!Empty($data-&gt;value) ? <span class="stringliteral">" value=\"{$val}\""</span> : <span class="stringliteral">""</span>),
<a name="l01268"></a>01268                                                           $input_id,
<a name="l01269"></a>01269                                                           $input_class,
<a name="l01270"></a>01270                                                           $input_akce,
<a name="l01271"></a>01271                                                           $povinne,
<a name="l01272"></a>01272                                                           <span class="stringliteral">""</span>,
<a name="l01273"></a>01273                                                           $poradielem);
<a name="l01274"></a>01274                   <span class="keywordflow">break</span>;
<a name="l01275"></a>01275 
<a name="l01276"></a>01276                   <span class="keywordflow">case</span> <span class="stringliteral">"autodel"</span>:
<a name="l01277"></a>01277                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01278"></a>01278                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_autodel"</span>],
<a name="l01279"></a>01279                                                           $data-&gt;nazev,
<a name="l01280"></a>01280                                                           $data-&gt;id,
<a name="l01281"></a>01281                                                           date(<span class="stringliteral">"Y-m-d H:i:s"</span>),
<a name="l01282"></a>01282                                                           $input_id,
<a name="l01283"></a>01283                                                           $input_class,
<a name="l01284"></a>01284                                                           $input_akce,
<a name="l01285"></a>01285                                                           $povinne,
<a name="l01286"></a>01286                                                           <span class="stringliteral">"Y-m-d H:i:s"</span>,
<a name="l01287"></a>01287                                                           date(<span class="stringliteral">"Y-m-d H:i:s"</span>),
<a name="l01288"></a>01288                                                           $poradielem);
<a name="l01289"></a>01289                   <span class="keywordflow">break</span>;
<a name="l01290"></a>01290                 }
<a name="l01291"></a>01291 
<a name="l01292"></a>01292                 $i++;
<a name="l01293"></a>01293               }
<a name="l01294"></a>01294             }
<a name="l01295"></a>01295           }
<a name="l01296"></a>01296             <span class="keywordflow">else</span>
<a name="l01297"></a>01297           {
<a name="l01298"></a>01298             $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l01299"></a>01299           }
<a name="l01300"></a>01300 
<a name="l01301"></a>01301           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addobsah_form"</span>], <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a>, $this-&gt;dirpath);
<a name="l01302"></a>01302 
<a name="l01303"></a>01303           $poc = 0;
<a name="l01304"></a>01304           $check = <span class="keyword">true</span>;
<a name="l01305"></a>01305           <span class="keywordflow">for</span> ($i = 0; $i &lt; $pocetelem; $i++) <span class="comment">//kontrola vyplneni</span>
<a name="l01306"></a>01306           {
<a name="l01307"></a>01307             <span class="keywordflow">switch</span> ($podminka[$i][<span class="stringliteral">"typ"</span>]) <span class="comment">//rozliseni kontroly podle typu</span>
<a name="l01308"></a>01308             {
<a name="l01309"></a>01309               <span class="keywordflow">case</span> <span class="stringliteral">"nadpis"</span>:
<a name="l01310"></a>01310               <span class="keywordflow">case</span> <span class="stringliteral">"popisek"</span>:
<a name="l01311"></a>01311               <span class="keywordflow">case</span> <span class="stringliteral">"text"</span>:
<a name="l01312"></a>01312                 $zpost = $_POST[$podminka[$i][<span class="stringliteral">"name"</span>]];
<a name="l01313"></a>01313 
<a name="l01314"></a>01314                 <span class="keywordflow">if</span> ($podminka[$i][<span class="stringliteral">"min"</span>] &gt; 0 &amp;&amp;
<a name="l01315"></a>01315                     $podminka[$i][<span class="stringliteral">"max"</span>] &gt; 0)
<a name="l01316"></a>01316                 {
<a name="l01317"></a>01317                   <span class="keywordflow">if</span> (strlen($zpost) &lt; $podminka[$i][<span class="stringliteral">"min"</span>] ||
<a name="l01318"></a>01318                       strlen($zpost) &gt; $podminka[$i][<span class="stringliteral">"max"</span>])
<a name="l01319"></a>01319                   {
<a name="l01320"></a>01320                     $zpost = <span class="stringliteral">""</span>;
<a name="l01321"></a>01321                   }
<a name="l01322"></a>01322                 }
<a name="l01323"></a>01323                   <span class="keywordflow">else</span>
<a name="l01324"></a>01324                 <span class="keywordflow">if</span> ($podminka[$i][<span class="stringliteral">"min"</span>] &gt; 0)  <span class="comment">//kontrola minina</span>
<a name="l01325"></a>01325                 {
<a name="l01326"></a>01326                   <span class="keywordflow">if</span> (strlen($zpost) &lt; $podminka[$i][<span class="stringliteral">"min"</span>])
<a name="l01327"></a>01327                   {
<a name="l01328"></a>01328                     $zpost = <span class="stringliteral">""</span>;
<a name="l01329"></a>01329                   }
<a name="l01330"></a>01330                 }
<a name="l01331"></a>01331                   <span class="keywordflow">else</span>
<a name="l01332"></a>01332                 <span class="keywordflow">if</span> ($podminka[$i][<span class="stringliteral">"max"</span>] &gt; 0)  <span class="comment">//kontrola maxima</span>
<a name="l01333"></a>01333                 {
<a name="l01334"></a>01334                   <span class="keywordflow">if</span> (strlen($zpost) &gt; $podminka[$i][<span class="stringliteral">"max"</span>])
<a name="l01335"></a>01335                   {
<a name="l01336"></a>01336                     $zpost = <span class="stringliteral">""</span>;
<a name="l01337"></a>01337                   }
<a name="l01338"></a>01338                 }
<a name="l01339"></a>01339 
<a name="l01340"></a>01340                 <span class="keywordflow">switch</span> ($podminka[$i][<span class="stringliteral">"vstup"</span>])
<a name="l01341"></a>01341                 {
<a name="l01342"></a>01342                   <span class="keywordflow">case</span> <span class="stringliteral">"text"</span>:  <span class="comment">//konvert textu</span>
<a name="l01343"></a>01343                     settype($zpost, <span class="stringliteral">"string"</span>);
<a name="l01344"></a>01344                   <span class="keywordflow">break</span>;
<a name="l01345"></a>01345 
<a name="l01346"></a>01346                   <span class="keywordflow">case</span> <span class="stringliteral">"integer"</span>: <span class="comment">//konvert cisla</span>
<a name="l01347"></a>01347                     settype($zpost, <span class="stringliteral">"integer"</span>);
<a name="l01348"></a>01348                   <span class="keywordflow">break</span>;
<a name="l01349"></a>01349 
<a name="l01350"></a>01350                   <span class="keywordflow">case</span> <span class="stringliteral">"reg_exp"</span>: <span class="comment">//konrola reg_exp</span>
<a name="l01351"></a>01351                     preg_match($podminka[$i][<span class="stringliteral">"reg_exp"</span>], $zpost, $ret);
<a name="l01352"></a>01352                     $zpost = $ret[0];  <span class="comment">//vybere nulty index</span>
<a name="l01353"></a>01353                   <span class="keywordflow">break</span>;
<a name="l01354"></a>01354                 }
<a name="l01355"></a>01355 
<a name="l01356"></a>01356                 <span class="keywordflow">if</span> (Empty($zpost) &amp;&amp; $podminka[$i][<span class="stringliteral">"povinne"</span>])
<a name="l01357"></a>01357                 {
<a name="l01358"></a>01358                   $check = <span class="keyword">false</span>;
<a name="l01359"></a>01359                 }
<a name="l01360"></a>01360                   <span class="keywordflow">else</span>
<a name="l01361"></a>01361                 {
<a name="l01362"></a>01362                   $poc++;
<a name="l01363"></a>01363                 }
<a name="l01364"></a>01364               <span class="keywordflow">break</span>;
<a name="l01365"></a>01365 
<a name="l01366"></a>01366               <span class="keywordflow">case</span> <span class="stringliteral">"obrazek"</span>: <span class="comment">//kontrola $_FILES</span>
<a name="l01367"></a>01367                 <span class="keywordflow">if</span> (Empty($_FILES[<span class="stringliteral">"elem_obr"</span>][<span class="stringliteral">"tmp_name"</span>][$podminka[$i][<span class="stringliteral">"id"</span>]]) &amp;&amp; $podminka[$i][<span class="stringliteral">"povinne"</span>])
<a name="l01368"></a>01368                 {
<a name="l01369"></a>01369                   $check = <span class="keyword">false</span>;
<a name="l01370"></a>01370                 }
<a name="l01371"></a>01371                   <span class="keywordflow">else</span>
<a name="l01372"></a>01372                 {
<a name="l01373"></a>01373                   $poc++;
<a name="l01374"></a>01374                 }
<a name="l01375"></a>01375               <span class="keywordflow">break</span>;
<a name="l01376"></a>01376 
<a name="l01377"></a>01377               <span class="keywordflow">default</span>:  <span class="comment">//kontrola $_POST</span>
<a name="l01378"></a>01378                 <span class="keywordflow">if</span> (Empty($_POST[$podminka[$i][<span class="stringliteral">"name"</span>]]) &amp;&amp; $podminka[$i][<span class="stringliteral">"povinne"</span>])
<a name="l01379"></a>01379                 {
<a name="l01380"></a>01380                   $check = <span class="keyword">false</span>;
<a name="l01381"></a>01381                 }
<a name="l01382"></a>01382                   <span class="keywordflow">else</span>
<a name="l01383"></a>01383                 {
<a name="l01384"></a>01384                   $poc++;
<a name="l01385"></a>01385                 }
<a name="l01386"></a>01386               <span class="keywordflow">break</span>;
<a name="l01387"></a>01387             }
<a name="l01388"></a>01388           }
<a name="l01389"></a>01389 
<a name="l01390"></a>01390           <span class="keywordflow">if</span> (!Empty($_POST[<span class="stringliteral">"tlacitko"</span>]) &amp;&amp;
<a name="l01391"></a>01391               $poc == $pocetelem)
<a name="l01392"></a>01392           {
<a name="l01393"></a>01393             $ukladani[] = <span class="stringliteral">""</span>;
<a name="l01394"></a>01394             <span class="keywordflow">for</span> ($i = 0; $i &lt; $pocetelem; $i++)
<a name="l01395"></a>01395             {
<a name="l01396"></a>01396               <span class="keywordflow">switch</span> ($podminka[$i][<span class="stringliteral">"typ"</span>])
<a name="l01397"></a>01397               {
<a name="l01398"></a>01398                 <span class="keywordflow">case</span> <span class="stringliteral">"obrazek"</span>: <span class="comment">//upload obrazku</span>
<a name="l01399"></a>01399                   $w_mini = $_POST[<span class="stringliteral">"w_mini"</span>][$podminka[$i][<span class="stringliteral">"id"</span>]];
<a name="l01400"></a>01400                   settype($w_mini, <span class="stringliteral">"integer"</span>);
<a name="l01401"></a>01401 
<a name="l01402"></a>01402                   $h_mini = $_POST[<span class="stringliteral">"h_mini"</span>][$podminka[$i][<span class="stringliteral">"id"</span>]];
<a name="l01403"></a>01403                   settype($h_mini, <span class="stringliteral">"integer"</span>);
<a name="l01404"></a>01404 
<a name="l01405"></a>01405                   $w_full = $_POST[<span class="stringliteral">"w_full"</span>][$podminka[$i][<span class="stringliteral">"id"</span>]];
<a name="l01406"></a>01406                   settype($w_full, <span class="stringliteral">"integer"</span>);
<a name="l01407"></a>01407 
<a name="l01408"></a>01408                   $h_full = $_POST[<span class="stringliteral">"h_full"</span>][$podminka[$i][<span class="stringliteral">"id"</span>]];
<a name="l01409"></a>01409                   settype($h_full, <span class="stringliteral">"integer"</span>);
<a name="l01410"></a>01410 
<a name="l01411"></a>01411                   $url = <span class="stringliteral">""</span>;
<a name="l01412"></a>01412                   <span class="keywordflow">if</span> (!Empty($_FILES[$podminka[$i][<span class="stringliteral">"obr"</span>]][<span class="stringliteral">"tmp_name"</span>][$podminka[$i][<span class="stringliteral">"id"</span>]]))
<a name="l01413"></a>01413                   {
<a name="l01414"></a>01414                     $this-&gt;<a class="code" href="classDynamicZobrazeni.html#0774cf523607cbcca410795f9d974b50">ZpracujObrazek</a>($_FILES[$podminka[$i][<span class="stringliteral">"obr"</span>]], $podminka[$i][<span class="stringliteral">"id"</span>], $url, $w_mini, $h_mini, $w_full, $h_full, $_FILES[$podminka[$i][<span class="stringliteral">"nahled"</span>]]);
<a name="l01415"></a>01415                   }
<a name="l01416"></a>01416 
<a name="l01417"></a>01417                   $uloz_obr = <span class="stringliteral">""</span>;
<a name="l01418"></a>01418                   $uloz_obr[] = $url;
<a name="l01419"></a>01419                   $uloz_obr[] = $w_mini;
<a name="l01420"></a>01420                   $uloz_obr[] = $h_mini;
<a name="l01421"></a>01421                   $uloz_obr[] = $w_full;
<a name="l01422"></a>01422                   $uloz_obr[] = $h_full;
<a name="l01423"></a>01423 
<a name="l01424"></a>01424                   $ukladani[$i] = implode(<span class="stringliteral">"||--x--||"</span>, $uloz_obr);
<a name="l01425"></a>01425                 <span class="keywordflow">break</span>;
<a name="l01426"></a>01426 
<a name="l01427"></a>01427                 <span class="keywordflow">default</span>:  <span class="comment">//rozdeleni hodnot</span>
<a name="l01428"></a>01428                   $ukladani[$i] = stripslashes(htmlspecialchars($_POST[$podminka[$i][<span class="stringliteral">"name"</span>]], ENT_QUOTES));  <span class="comment">//osetreni textu!!</span>
<a name="l01429"></a>01429                 <span class="keywordflow">break</span>;
<a name="l01430"></a>01430               }
<a name="l01431"></a>01431             }
<a name="l01432"></a>01432 
<a name="l01433"></a>01433             $ulozit = implode(<span class="stringliteral">"|-x-|"</span>, $ukladani);  <span class="comment">//ulozit do DB</span>
<a name="l01434"></a>01434             $nazev = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"nazev"</span>], ENT_QUOTES));
<a name="l01435"></a>01435             $rewrite = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"rewrite"</span>], ENT_QUOTES));
<a name="l01436"></a>01436             $datum = date(<span class="stringliteral">"Y-m-d H:i:s"</span>);
<a name="l01437"></a>01437 
<a name="l01438"></a>01438             <span class="keywordflow">if</span> (@$this-&gt;sqlite-&gt;queryExec(<span class="stringliteral">"INSERT INTO obsah_sablony (id, sablona, obsah, pridano, nazev, rewrite) VALUES</span>
<a name="l01439"></a>01439 <span class="stringliteral">                                          (NULL, {$sablona}, '{$ulozit}', '{$datum}', '{$nazev}', '{$rewrite}');"</span>, $error))
<a name="l01440"></a>01440             {
<a name="l01441"></a>01441               $navic = $this-&gt;<a class="code" href="classDynamicZobrazeni.html#527aa78413315a3364cf487991543a92">SyncFileWithDB</a>();
<a name="l01442"></a>01442               $rozdel = explode(<span class="stringliteral">"|-x-|"</span>, $ulozit);
<a name="l01443"></a>01443               <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addobsah_hlaska"</span>], $rozdel[0], $navic);
<a name="l01444"></a>01444 
<a name="l01445"></a>01445               $this-&gt;var-&gt;main[0]-&gt;AutoClick(1, <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}__{$sablona}"</span>);  <span class="comment">//auto kliknuti</span>
<a name="l01446"></a>01446             }
<a name="l01447"></a>01447               <span class="keywordflow">else</span>
<a name="l01448"></a>01448             {
<a name="l01449"></a>01449               $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l01450"></a>01450             }
<a name="l01451"></a>01451           }
<a name="l01452"></a>01452             <span class="keywordflow">else</span>
<a name="l01453"></a>01453           {
<a name="l01454"></a>01454             <span class="keywordflow">if</span> (count($_POST) &gt; 0)
<a name="l01455"></a>01455             {
<a name="l01456"></a>01456               <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addobsah_error"</span>]);
<a name="l01457"></a>01457 
<a name="l01458"></a>01458               $this-&gt;var-&gt;main[0]-&gt;AutoClick(2, <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}__{$sablona}"</span>);  <span class="comment">//auto kliknuti</span>
<a name="l01459"></a>01459             }
<a name="l01460"></a>01460           }
<a name="l01461"></a>01461         <span class="keywordflow">break</span>;
<a name="l01462"></a>01462 
<a name="l01463"></a>01463         <span class="keywordflow">case</span> <span class="stringliteral">"editobsah"</span>: <span class="comment">//uprava obsahu</span>
<a name="l01464"></a>01464           $id = $_GET[<span class="stringliteral">"id"</span>];  <span class="comment">//cislo sekce</span>
<a name="l01465"></a>01465           settype($id, <span class="stringliteral">"integer"</span>);
<a name="l01466"></a>01466 
<a name="l01467"></a>01467           <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT sablona, obsah, pridano, nazev, rewrite FROM obsah_sablony WHERE id={$id};"</span>, NULL, $error))
<a name="l01468"></a>01468           {
<a name="l01469"></a>01469             <span class="keywordflow">if</span> ($res-&gt;numRows() == 1)
<a name="l01470"></a>01470             {
<a name="l01471"></a>01471               $data = $res-&gt;fetchObject();
<a name="l01472"></a>01472               $obsah = $data-&gt;obsah;
<a name="l01473"></a>01473               $nazev = $data-&gt;nazev;
<a name="l01474"></a>01474               $rewrite = $data-&gt;rewrite;
<a name="l01475"></a>01475             }
<a name="l01476"></a>01476           }
<a name="l01477"></a>01477             <span class="keywordflow">else</span>
<a name="l01478"></a>01478           {
<a name="l01479"></a>01479             $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l01480"></a>01480           }
<a name="l01481"></a>01481 
<a name="l01482"></a>01482           $nacist = explode(<span class="stringliteral">"|-x-|"</span>, $obsah); <span class="comment">//znovu rozdeleni</span>
<a name="l01483"></a>01483 
<a name="l01484"></a>01484           <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT id, sablona, typ, nazev, value,</span>
<a name="l01485"></a>01485 <span class="stringliteral">                                            input_id, input_class, input_akce,</span>
<a name="l01486"></a>01486 <span class="stringliteral">                                            povinne, vstupni_typ, reg_exp,</span>
<a name="l01487"></a>01487 <span class="stringliteral">                                            vystupni_format, min_poc, max_poc,</span>
<a name="l01488"></a>01488 <span class="stringliteral">                                            poradi</span>
<a name="l01489"></a>01489 <span class="stringliteral">                                            FROM element</span>
<a name="l01490"></a>01490 <span class="stringliteral">                                            WHERE sablona={$sablona}</span>
<a name="l01491"></a>01491 <span class="stringliteral">                                            ORDER BY poradi ASC;"</span>, NULL, $error))
<a name="l01492"></a>01492           {
<a name="l01493"></a>01493             <span class="keywordflow">if</span> ($res-&gt;numRows() != 0)
<a name="l01494"></a>01494             {
<a name="l01495"></a>01495               <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> = <span class="stringliteral">""</span>;
<a name="l01496"></a>01496               $i = 0;
<a name="l01497"></a>01497               $pocetelem = $res-&gt;numRows();
<a name="l01498"></a>01498               $poradielem = 7;  <span class="comment">//+7</span>
<a name="l01499"></a>01499               <span class="keywordflow">while</span>($data = $res-&gt;fetchObject())
<a name="l01500"></a>01500               {
<a name="l01501"></a>01501                 $povinne = ($data-&gt;povinne ? $this-&gt;znacka_povinne : <span class="stringliteral">""</span>);
<a name="l01502"></a>01502 
<a name="l01503"></a>01503                 $podminka[$i][<span class="stringliteral">"id"</span>] = $data-&gt;id;
<a name="l01504"></a>01504                 $podminka[$i][<span class="stringliteral">"name"</span>] = <span class="stringliteral">"elem_{$data-&gt;id}"</span>; <span class="comment">//jmeno elementu</span>
<a name="l01505"></a>01505                 $podminka[$i][<span class="stringliteral">"obr"</span>] = <span class="stringliteral">"elem_obr"</span>; <span class="comment">//nazev elementu obrazku</span>
<a name="l01506"></a>01506                 $podminka[$i][<span class="stringliteral">"nahled"</span>] = <span class="stringliteral">"nahled_obr"</span>; <span class="comment">//nazev elementu nahledu</span>
<a name="l01507"></a>01507                 $podminka[$i][<span class="stringliteral">"typ"</span>] = $typelementu[$data-&gt;typ];  <span class="comment">//textove oznaceni typu</span>
<a name="l01508"></a>01508                 $podminka[$i][<span class="stringliteral">"povinne"</span>] = $data-&gt;povinne;  <span class="comment">//bool vyraz povinne</span>
<a name="l01509"></a>01509                 $podminka[$i][<span class="stringliteral">"vstup"</span>] = $this-&gt;vstupni_typ[$data-&gt;vstupni_typ];  <span class="comment">//typ vstupu</span>
<a name="l01510"></a>01510                 $podminka[$i][<span class="stringliteral">"reg_exp"</span>] = $data-&gt;reg_exp;  <span class="comment">//regularni vyraz</span>
<a name="l01511"></a>01511                 $podminka[$i][<span class="stringliteral">"min"</span>] = $data-&gt;min_poc;  <span class="comment">//minimalni pocet</span>
<a name="l01512"></a>01512                 $podminka[$i][<span class="stringliteral">"max"</span>] = $data-&gt;max_poc;  <span class="comment">//maximalni pocet</span>
<a name="l01513"></a>01513 
<a name="l01514"></a>01514                 $input_id = (!Empty($data-&gt;input_id) ? $data-&gt;input_id : <span class="stringliteral">""</span>);
<a name="l01515"></a>01515                 $input_class = (!Empty($data-&gt;input_id) ? $data-&gt;input_class : <span class="stringliteral">""</span>);
<a name="l01516"></a>01516                 $input_akce = (!Empty($data-&gt;input_id) ? $data-&gt;input_akce : <span class="stringliteral">""</span>);
<a name="l01517"></a>01517 
<a name="l01518"></a>01518                 <span class="keywordflow">switch</span> ($typelementu[$data-&gt;typ])
<a name="l01519"></a>01519                 {
<a name="l01520"></a>01520                   <span class="keywordflow">case</span> <span class="stringliteral">"nadpis"</span>: <span class="comment">//nadpis</span>
<a name="l01521"></a>01521                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01522"></a>01522                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_nadpis"</span>],
<a name="l01523"></a>01523                                                           $data-&gt;nazev,
<a name="l01524"></a>01524                                                           $data-&gt;id,
<a name="l01525"></a>01525                                                           $nacist[$i],
<a name="l01526"></a>01526                                                           $input_id,
<a name="l01527"></a>01527                                                           $input_class,
<a name="l01528"></a>01528                                                           $input_akce,
<a name="l01529"></a>01529                                                           $povinne,
<a name="l01530"></a>01530                                                           $poradielem);
<a name="l01531"></a>01531                   <span class="keywordflow">break</span>;
<a name="l01532"></a>01532 
<a name="l01533"></a>01533                   <span class="keywordflow">case</span> <span class="stringliteral">"popisek"</span>: <span class="comment">//popisek</span>
<a name="l01534"></a>01534                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01535"></a>01535                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_popisek"</span>],
<a name="l01536"></a>01536                                                           $data-&gt;nazev,
<a name="l01537"></a>01537                                                           $data-&gt;id,
<a name="l01538"></a>01538                                                           $nacist[$i],
<a name="l01539"></a>01539                                                           $input_id,
<a name="l01540"></a>01540                                                           $input_class,
<a name="l01541"></a>01541                                                           $input_akce,
<a name="l01542"></a>01542                                                           $povinne,
<a name="l01543"></a>01543                                                           $poradielem);
<a name="l01544"></a>01544                   <span class="keywordflow">break</span>;
<a name="l01545"></a>01545 
<a name="l01546"></a>01546                   <span class="keywordflow">case</span> <span class="stringliteral">"text"</span>: <span class="comment">//text</span>
<a name="l01547"></a>01547                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01548"></a>01548                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_text"</span>],
<a name="l01549"></a>01549                                                           $data-&gt;nazev,
<a name="l01550"></a>01550                                                           $data-&gt;id,
<a name="l01551"></a>01551                                                           $nacist[$i],
<a name="l01552"></a>01552                                                           $input_id,
<a name="l01553"></a>01553                                                           $input_class,
<a name="l01554"></a>01554                                                           $input_akce,
<a name="l01555"></a>01555                                                           $povinne,
<a name="l01556"></a>01556                                                           $poradielem);
<a name="l01557"></a>01557                   <span class="keywordflow">break</span>;
<a name="l01558"></a>01558 
<a name="l01559"></a>01559                   <span class="keywordflow">case</span> <span class="stringliteral">"obrazek"</span>: <span class="comment">//obrazek</span>
<a name="l01560"></a>01560                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01561"></a>01561                     $rozdelit = explode(<span class="stringliteral">"||--x--||"</span>, $nacist[$i]);
<a name="l01562"></a>01562                     $w_mini = $rozdelit[1];
<a name="l01563"></a>01563                     $h_mini = $rozdelit[2];
<a name="l01564"></a>01564                     $w_full = $rozdelit[3];
<a name="l01565"></a>01565                     $h_full = $rozdelit[4];
<a name="l01566"></a>01566 
<a name="l01567"></a>01567                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_obrazek"</span>],
<a name="l01568"></a>01568                                                           $data-&gt;nazev,
<a name="l01569"></a>01569                                                           $data-&gt;id,
<a name="l01570"></a>01570                                                           $input_id,
<a name="l01571"></a>01571                                                           $input_class,
<a name="l01572"></a>01572                                                           $input_akce,
<a name="l01573"></a>01573                                                           $povinne,
<a name="l01574"></a>01574                                                           $w_mini,
<a name="l01575"></a>01575                                                           $h_mini,
<a name="l01576"></a>01576                                                           $w_full,
<a name="l01577"></a>01577                                                           $h_full,
<a name="l01578"></a>01578                                                           ($w_mini != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01579"></a>01579                                                           ($h_mini != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01580"></a>01580                                                           ($w_mini != 0 &amp;&amp; $h_mini != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01581"></a>01581                                                           ($w_mini == 0 &amp;&amp; $h_mini == 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01582"></a>01582                                                           ($w_full != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01583"></a>01583                                                           ($h_full != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01584"></a>01584                                                           ($w_full != 0 &amp;&amp; $h_full != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01585"></a>01585                                                           ($w_full == 0 &amp;&amp; $h_full == 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01586"></a>01586                                                           ($w_mini == 0 &amp;&amp; $h_mini == 0 ? <span class="stringliteral">"mini_4{$data-&gt;id}()"</span> : ($w_mini != 0 &amp;&amp; $h_mini != 0 ? <span class="stringliteral">"mini_3{$data-&gt;id}();"</span> : ($h_mini != 0 ? <span class="stringliteral">"mini_2{$data-&gt;id}();"</span> : ($w_mini != 0 ? <span class="stringliteral">"mini_1{$data-&gt;id}();"</span> : <span class="stringliteral">""</span>)))),
<a name="l01587"></a>01587                                                           ($w_full == 0 &amp;&amp; $h_full == 0 ? <span class="stringliteral">"full_4{$data-&gt;id}();"</span> : ($w_full != 0 &amp;&amp; $h_full != 0 ? <span class="stringliteral">"full_3{$data-&gt;id}();"</span> : ($h_full != 0 ? <span class="stringliteral">"full_2{$data-&gt;id}();"</span> : ($w_full != 0 ? <span class="stringliteral">"full_1{$data-&gt;id}();"</span> : <span class="stringliteral">""</span>)))),
<a name="l01588"></a>01588                                                           <span class="stringliteral">"{$this-&gt;absolutni_url}{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;minidir}/{$rozdelit[0]}"</span>,
<a name="l01589"></a>01589                                                           <span class="stringliteral">"{$this-&gt;absolutni_url}{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;fulldir}/{$rozdelit[0]}"</span>,
<a name="l01590"></a>01590                                                           $poradielem);
<a name="l01591"></a>01591                   <span class="keywordflow">break</span>;
<a name="l01592"></a>01592 
<a name="l01593"></a>01593                   <span class="keywordflow">case</span> <span class="stringliteral">"datum"</span>: <span class="comment">//datum</span>
<a name="l01594"></a>01594                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01595"></a>01595                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_datum"</span>],
<a name="l01596"></a>01596                                                           $data-&gt;nazev,
<a name="l01597"></a>01597                                                           $data-&gt;id,
<a name="l01598"></a>01598                                                           $nacist[$i],
<a name="l01599"></a>01599                                                           $input_id,
<a name="l01600"></a>01600                                                           $input_class,
<a name="l01601"></a>01601                                                           $input_akce,
<a name="l01602"></a>01602                                                           $povinne,
<a name="l01603"></a>01603                                                           $data-&gt;vystupni_format,
<a name="l01604"></a>01604                                                           date($data-&gt;vystupni_format),
<a name="l01605"></a>01605                                                           $poradielem);
<a name="l01606"></a>01606                   <span class="keywordflow">break</span>;
<a name="l01607"></a>01607 
<a name="l01608"></a>01608                   <span class="keywordflow">case</span> <span class="stringliteral">"cas"</span>: <span class="comment">//cas</span>
<a name="l01609"></a>01609                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01610"></a>01610                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_cas"</span>],
<a name="l01611"></a>01611                                                           $data-&gt;nazev,
<a name="l01612"></a>01612                                                           $data-&gt;id,
<a name="l01613"></a>01613                                                           $nacist[$i],
<a name="l01614"></a>01614                                                           $input_id,
<a name="l01615"></a>01615                                                           $input_class,
<a name="l01616"></a>01616                                                           $input_akce,
<a name="l01617"></a>01617                                                           $povinne,
<a name="l01618"></a>01618                                                           $data-&gt;vystupni_format,
<a name="l01619"></a>01619                                                           date($data-&gt;vystupni_format),
<a name="l01620"></a>01620                                                           $poradielem);
<a name="l01621"></a>01621                   <span class="keywordflow">break</span>;
<a name="l01622"></a>01622 
<a name="l01623"></a>01623                   <span class="keywordflow">case</span> <span class="stringliteral">"datumcas"</span>: <span class="comment">//datumcas</span>
<a name="l01624"></a>01624                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01625"></a>01625                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_datumcas"</span>],
<a name="l01626"></a>01626                                                           $data-&gt;nazev,
<a name="l01627"></a>01627                                                           $data-&gt;id,
<a name="l01628"></a>01628                                                           $nacist[$i],
<a name="l01629"></a>01629                                                           $input_id,
<a name="l01630"></a>01630                                                           $input_class,
<a name="l01631"></a>01631                                                           $input_akce,
<a name="l01632"></a>01632                                                           $povinne,
<a name="l01633"></a>01633                                                           $data-&gt;vystupni_format,
<a name="l01634"></a>01634                                                           date($data-&gt;vystupni_format),
<a name="l01635"></a>01635                                                           $poradielem);
<a name="l01636"></a>01636                   <span class="keywordflow">break</span>;
<a name="l01637"></a>01637 
<a name="l01638"></a>01638                   <span class="keywordflow">case</span> <span class="stringliteral">"checkbox"</span>: <span class="comment">//checkbox</span>
<a name="l01639"></a>01639                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01640"></a>01640                     $val = htmlspecialchars_decode(html_entity_decode($nacist[$i]));
<a name="l01641"></a>01641                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_checkbox"</span>],
<a name="l01642"></a>01642                                                           $data-&gt;nazev,
<a name="l01643"></a>01643                                                           $data-&gt;id,
<a name="l01644"></a>01644                                                           (!Empty($nacist[$i]) ? <span class="stringliteral">" value=\"{$val}\""</span> : <span class="stringliteral">""</span>),
<a name="l01645"></a>01645                                                           $input_id,
<a name="l01646"></a>01646                                                           $input_class,
<a name="l01647"></a>01647                                                           $input_akce,
<a name="l01648"></a>01648                                                           $povinne,
<a name="l01649"></a>01649                                                           (!Empty($nacist[$i]) ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l01650"></a>01650                                                           $poradielem);
<a name="l01651"></a>01651                   <span class="keywordflow">break</span>;
<a name="l01652"></a>01652 
<a name="l01653"></a>01653                   <span class="keywordflow">case</span> <span class="stringliteral">"autodel"</span>:
<a name="l01654"></a>01654                     $poradielem += $this-&gt;pocitadloporadi[$data-&gt;typ];
<a name="l01655"></a>01655                     <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditobsah_autodel"</span>],
<a name="l01656"></a>01656                                                           $data-&gt;nazev,
<a name="l01657"></a>01657                                                           $data-&gt;id,
<a name="l01658"></a>01658                                                           $nacist[$i],
<a name="l01659"></a>01659                                                           $input_id,
<a name="l01660"></a>01660                                                           $input_class,
<a name="l01661"></a>01661                                                           $input_akce,
<a name="l01662"></a>01662                                                           $povinne,
<a name="l01663"></a>01663                                                           <span class="stringliteral">"Y-m-d H:i:s"</span>,
<a name="l01664"></a>01664                                                           date(<span class="stringliteral">"Y-m-d H:i:s"</span>),
<a name="l01665"></a>01665                                                           $poradielem);
<a name="l01666"></a>01666                   <span class="keywordflow">break</span>;
<a name="l01667"></a>01667                 }
<a name="l01668"></a>01668 
<a name="l01669"></a>01669                 $i++;
<a name="l01670"></a>01670               }
<a name="l01671"></a>01671             }
<a name="l01672"></a>01672           }
<a name="l01673"></a>01673             <span class="keywordflow">else</span>
<a name="l01674"></a>01674           {
<a name="l01675"></a>01675             $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l01676"></a>01676           }
<a name="l01677"></a>01677 
<a name="l01678"></a>01678           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_editobsah_form"</span>],
<a name="l01679"></a>01679                                               <a class="code" href="classDynamicZobrazeni.html#80a0e6341faab51f7cb59c98942c32fe">$element</a>,
<a name="l01680"></a>01680                                               $nazev,
<a name="l01681"></a>01681                                               $rewrite,
<a name="l01682"></a>01682                                               $this-&gt;dirpath);
<a name="l01683"></a>01683 
<a name="l01684"></a>01684           $poc = 0;
<a name="l01685"></a>01685           $check = <span class="keyword">true</span>;
<a name="l01686"></a>01686           <span class="keywordflow">for</span> ($i = 0; $i &lt; $pocetelem; $i++) <span class="comment">//kontrola vyplneni</span>
<a name="l01687"></a>01687           {
<a name="l01688"></a>01688             <span class="keywordflow">switch</span> ($podminka[$i][<span class="stringliteral">"typ"</span>]) <span class="comment">//rozliseni kontroly podle typu</span>
<a name="l01689"></a>01689             {
<a name="l01690"></a>01690               <span class="keywordflow">case</span> <span class="stringliteral">"nadpis"</span>:
<a name="l01691"></a>01691               <span class="keywordflow">case</span> <span class="stringliteral">"popisek"</span>:
<a name="l01692"></a>01692               <span class="keywordflow">case</span> <span class="stringliteral">"text"</span>:
<a name="l01693"></a>01693                 $zpost = $_POST[$podminka[$i][<span class="stringliteral">"name"</span>]];
<a name="l01694"></a>01694 
<a name="l01695"></a>01695                 <span class="keywordflow">if</span> ($podminka[$i][<span class="stringliteral">"min"</span>] &gt; 0 &amp;&amp;
<a name="l01696"></a>01696                     $podminka[$i][<span class="stringliteral">"max"</span>] &gt; 0)
<a name="l01697"></a>01697                 {
<a name="l01698"></a>01698                   <span class="keywordflow">if</span> (strlen($zpost) &lt; $podminka[$i][<span class="stringliteral">"min"</span>] ||
<a name="l01699"></a>01699                       strlen($zpost) &gt; $podminka[$i][<span class="stringliteral">"max"</span>])
<a name="l01700"></a>01700                   {
<a name="l01701"></a>01701                     $zpost = <span class="stringliteral">""</span>;
<a name="l01702"></a>01702                   }
<a name="l01703"></a>01703                 }
<a name="l01704"></a>01704                   <span class="keywordflow">else</span>
<a name="l01705"></a>01705                 <span class="keywordflow">if</span> ($podminka[$i][<span class="stringliteral">"min"</span>] &gt; 0)  <span class="comment">//kontrola minina</span>
<a name="l01706"></a>01706                 {
<a name="l01707"></a>01707                   <span class="keywordflow">if</span> (strlen($zpost) &lt; $podminka[$i][<span class="stringliteral">"min"</span>])
<a name="l01708"></a>01708                   {
<a name="l01709"></a>01709                     $zpost = <span class="stringliteral">""</span>;
<a name="l01710"></a>01710                   }
<a name="l01711"></a>01711                 }
<a name="l01712"></a>01712                   <span class="keywordflow">else</span>
<a name="l01713"></a>01713                 <span class="keywordflow">if</span> ($podminka[$i][<span class="stringliteral">"max"</span>] &gt; 0)  <span class="comment">//kontrola maxima</span>
<a name="l01714"></a>01714                 {
<a name="l01715"></a>01715                   <span class="keywordflow">if</span> (strlen($zpost) &gt; $podminka[$i][<span class="stringliteral">"max"</span>])
<a name="l01716"></a>01716                   {
<a name="l01717"></a>01717                     $zpost = <span class="stringliteral">""</span>;
<a name="l01718"></a>01718                   }
<a name="l01719"></a>01719                 }
<a name="l01720"></a>01720 
<a name="l01721"></a>01721                 <span class="keywordflow">switch</span> ($podminka[$i][<span class="stringliteral">"vstup"</span>])
<a name="l01722"></a>01722                 {
<a name="l01723"></a>01723                   <span class="keywordflow">case</span> <span class="stringliteral">"text"</span>:  <span class="comment">//konvert textu</span>
<a name="l01724"></a>01724                     settype($zpost, <span class="stringliteral">"string"</span>);
<a name="l01725"></a>01725                   <span class="keywordflow">break</span>;
<a name="l01726"></a>01726 
<a name="l01727"></a>01727                   <span class="keywordflow">case</span> <span class="stringliteral">"integer"</span>: <span class="comment">//konvert cisla</span>
<a name="l01728"></a>01728                     settype($zpost, <span class="stringliteral">"integer"</span>);
<a name="l01729"></a>01729                   <span class="keywordflow">break</span>;
<a name="l01730"></a>01730 
<a name="l01731"></a>01731                   <span class="keywordflow">case</span> <span class="stringliteral">"reg_exp"</span>: <span class="comment">//konrola reg_exp</span>
<a name="l01732"></a>01732                     preg_match($podminka[$i][<span class="stringliteral">"reg_exp"</span>], $zpost, $ret);
<a name="l01733"></a>01733                     $zpost = $ret[0];  <span class="comment">//vybere nulty index</span>
<a name="l01734"></a>01734                   <span class="keywordflow">break</span>;
<a name="l01735"></a>01735                 }
<a name="l01736"></a>01736 
<a name="l01737"></a>01737                 <span class="keywordflow">if</span> (Empty($zpost) &amp;&amp; $podminka[$i][<span class="stringliteral">"povinne"</span>])
<a name="l01738"></a>01738                 {
<a name="l01739"></a>01739                   $check = <span class="keyword">false</span>;
<a name="l01740"></a>01740                 }
<a name="l01741"></a>01741                   <span class="keywordflow">else</span>
<a name="l01742"></a>01742                 {
<a name="l01743"></a>01743                   $poc++;
<a name="l01744"></a>01744                 }
<a name="l01745"></a>01745               <span class="keywordflow">break</span>;
<a name="l01746"></a>01746 
<a name="l01747"></a>01747               <span class="keywordflow">case</span> <span class="stringliteral">"obrazek"</span>: <span class="comment">//kontrola $_FILES</span>
<a name="l01748"></a>01748 <span class="comment">/*</span>
<a name="l01749"></a>01749 <span class="comment">              var_dump($_FILES[$podminka[$i]["obr"]]["tmp_name"][$podminka[$i]["id"]]);</span>
<a name="l01750"></a>01750 <span class="comment">                if (Empty($_FILES[$podminka[$i]["obr"]]["tmp_name"][$podminka[$i]["id"]]) &amp;&amp; $podminka[$i]["povinne"])</span>
<a name="l01751"></a>01751 <span class="comment">                {</span>
<a name="l01752"></a>01752 <span class="comment">                  $check = false;</span>
<a name="l01753"></a>01753 <span class="comment">                }</span>
<a name="l01754"></a>01754 <span class="comment">                  else</span>
<a name="l01755"></a>01755 <span class="comment">                {</span>
<a name="l01756"></a>01756 <span class="comment">*/</span>
<a name="l01757"></a>01757                   $poc++;
<a name="l01758"></a>01758                 <span class="comment">//}</span>
<a name="l01759"></a>01759               <span class="keywordflow">break</span>;
<a name="l01760"></a>01760 
<a name="l01761"></a>01761               <span class="keywordflow">default</span>:  <span class="comment">//kontrola $_POST</span>
<a name="l01762"></a>01762                 <span class="keywordflow">if</span> (Empty($_POST[$podminka[$i][<span class="stringliteral">"name"</span>]]) &amp;&amp; $podminka[$i][<span class="stringliteral">"povinne"</span>])
<a name="l01763"></a>01763                 {
<a name="l01764"></a>01764                   $check = <span class="keyword">false</span>;
<a name="l01765"></a>01765                 }
<a name="l01766"></a>01766                   <span class="keywordflow">else</span>
<a name="l01767"></a>01767                 {
<a name="l01768"></a>01768                   $poc++;
<a name="l01769"></a>01769                 }
<a name="l01770"></a>01770               <span class="keywordflow">break</span>;
<a name="l01771"></a>01771             }
<a name="l01772"></a>01772           }
<a name="l01773"></a>01773 
<a name="l01774"></a>01774           <span class="keywordflow">if</span> (!Empty($_POST[<span class="stringliteral">"tlacitko"</span>]) &amp;&amp;
<a name="l01775"></a>01775               $poc == $pocetelem &amp;&amp;
<a name="l01776"></a>01776               $id != 0)
<a name="l01777"></a>01777           {
<a name="l01778"></a>01778             $ukladani[] = <span class="stringliteral">""</span>;
<a name="l01779"></a>01779             <span class="keywordflow">for</span> ($i = 0; $i &lt; $pocetelem; $i++)
<a name="l01780"></a>01780             {
<a name="l01781"></a>01781               <span class="keywordflow">switch</span> ($podminka[$i][<span class="stringliteral">"typ"</span>])
<a name="l01782"></a>01782               {
<a name="l01783"></a>01783                 <span class="keywordflow">case</span> <span class="stringliteral">"obrazek"</span>: <span class="comment">//upload obrazku</span>
<a name="l01784"></a>01784                   $w_mini = $_POST[<span class="stringliteral">"w_mini"</span>][$podminka[$i][<span class="stringliteral">"id"</span>]];
<a name="l01785"></a>01785                   settype($w_mini, <span class="stringliteral">"integer"</span>);
<a name="l01786"></a>01786 
<a name="l01787"></a>01787                   $h_mini = $_POST[<span class="stringliteral">"h_mini"</span>][$podminka[$i][<span class="stringliteral">"id"</span>]];
<a name="l01788"></a>01788                   settype($h_mini, <span class="stringliteral">"integer"</span>);
<a name="l01789"></a>01789 
<a name="l01790"></a>01790                   $w_full = $_POST[<span class="stringliteral">"w_full"</span>][$podminka[$i][<span class="stringliteral">"id"</span>]];
<a name="l01791"></a>01791                   settype($w_full, <span class="stringliteral">"integer"</span>);
<a name="l01792"></a>01792 
<a name="l01793"></a>01793                   $h_full = $_POST[<span class="stringliteral">"h_full"</span>][$podminka[$i][<span class="stringliteral">"id"</span>]];
<a name="l01794"></a>01794                   settype($h_full, <span class="stringliteral">"integer"</span>);
<a name="l01795"></a>01795 
<a name="l01796"></a>01796                   $url = <span class="stringliteral">""</span>;
<a name="l01797"></a>01797                   <span class="keywordflow">if</span> (!Empty($_FILES[$podminka[$i][<span class="stringliteral">"obr"</span>]][<span class="stringliteral">"tmp_name"</span>][$podminka[$i][<span class="stringliteral">"id"</span>]]) &amp;&amp;
<a name="l01798"></a>01798                       ($w_mini == 0 &amp;&amp; $h_mini == 0 &amp;&amp; Empty($_FILES[$podminka[$i][<span class="stringliteral">"nahled"</span>]][<span class="stringliteral">"tmp_name"</span>][$podminka[$i][<span class="stringliteral">"id"</span>]]) ? <span class="keyword">false</span> : <span class="keyword">true</span>))
<a name="l01799"></a>01799                   {
<a name="l01800"></a>01800                     $this-&gt;<a class="code" href="classDynamicZobrazeni.html#0774cf523607cbcca410795f9d974b50">ZpracujObrazek</a>($_FILES[$podminka[$i][<span class="stringliteral">"obr"</span>]], $podminka[$i][<span class="stringliteral">"id"</span>], $url, $w_mini, $h_mini, $w_full, $h_full, $_FILES[$podminka[$i][<span class="stringliteral">"nahled"</span>]]);
<a name="l01801"></a>01801                   }
<a name="l01802"></a>01802                     <span class="keywordflow">else</span>
<a name="l01803"></a>01803                   {
<a name="l01804"></a>01804                     $rozdelit = explode(<span class="stringliteral">"||--x--||"</span>, $nacist[$i]);
<a name="l01805"></a>01805                     $url = $rozdelit[0];
<a name="l01806"></a>01806                   }
<a name="l01807"></a>01807 
<a name="l01808"></a>01808                   $uloz_obr = <span class="stringliteral">""</span>;
<a name="l01809"></a>01809                   $uloz_obr[] = $url;
<a name="l01810"></a>01810                   $uloz_obr[] = $w_mini;
<a name="l01811"></a>01811                   $uloz_obr[] = $h_mini;
<a name="l01812"></a>01812                   $uloz_obr[] = $w_full;
<a name="l01813"></a>01813                   $uloz_obr[] = $h_full;
<a name="l01814"></a>01814 
<a name="l01815"></a>01815                   $ukladani[$i] = implode(<span class="stringliteral">"||--x--||"</span>, $uloz_obr);
<a name="l01816"></a>01816                 <span class="keywordflow">break</span>;
<a name="l01817"></a>01817 
<a name="l01818"></a>01818                 <span class="keywordflow">default</span>:  <span class="comment">//rozdeleni hodnot</span>
<a name="l01819"></a>01819                   $ukladani[$i] = stripslashes(htmlspecialchars($_POST[$podminka[$i][<span class="stringliteral">"name"</span>]], ENT_QUOTES));  <span class="comment">//osetreni textu!!</span>
<a name="l01820"></a>01820                 <span class="keywordflow">break</span>;
<a name="l01821"></a>01821               }
<a name="l01822"></a>01822             }
<a name="l01823"></a>01823 
<a name="l01824"></a>01824             $ulozit = implode(<span class="stringliteral">"|-x-|"</span>, $ukladani);  <span class="comment">//ulozit do DB</span>
<a name="l01825"></a>01825             $nazev = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"nazev"</span>], ENT_QUOTES));
<a name="l01826"></a>01826             $rewrite = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"rewrite"</span>], ENT_QUOTES));
<a name="l01827"></a>01827 
<a name="l01828"></a>01828             <span class="keywordflow">if</span> (@$this-&gt;sqlite-&gt;queryExec(<span class="stringliteral">"UPDATE obsah_sablony SET sablona={$sablona},</span>
<a name="l01829"></a>01829 <span class="stringliteral">                                                                    obsah='{$ulozit}',</span>
<a name="l01830"></a>01830 <span class="stringliteral">                                                                    nazev='{$nazev}',</span>
<a name="l01831"></a>01831 <span class="stringliteral">                                                                    rewrite='{$rewrite}'</span>
<a name="l01832"></a>01832 <span class="stringliteral">                                                                    WHERE id={$id};"</span>, $error))
<a name="l01833"></a>01833             {
<a name="l01834"></a>01834               $navic = $this-&gt;<a class="code" href="classDynamicZobrazeni.html#527aa78413315a3364cf487991543a92">SyncFileWithDB</a>();
<a name="l01835"></a>01835               $rozdel = explode(<span class="stringliteral">"|-x-|"</span>, $ulozit);
<a name="l01836"></a>01836               <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_editobsah_hlaska"</span>], $rozdel[0], $navic);
<a name="l01837"></a>01837 
<a name="l01838"></a>01838               $this-&gt;var-&gt;main[0]-&gt;AutoClick(1, <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}__{$sablona}"</span>);  <span class="comment">//auto kliknuti</span>
<a name="l01839"></a>01839             }
<a name="l01840"></a>01840               <span class="keywordflow">else</span>
<a name="l01841"></a>01841             {
<a name="l01842"></a>01842               $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l01843"></a>01843             }
<a name="l01844"></a>01844           }
<a name="l01845"></a>01845             <span class="keywordflow">else</span>
<a name="l01846"></a>01846           {
<a name="l01847"></a>01847             <span class="keywordflow">if</span> (count($_POST) &gt; 0)
<a name="l01848"></a>01848             {
<a name="l01849"></a>01849               <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_editobsah_error"</span>]);
<a name="l01850"></a>01850 
<a name="l01851"></a>01851               $this-&gt;var-&gt;main[0]-&gt;AutoClick(2, <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}__{$sablona}"</span>);  <span class="comment">//auto kliknuti</span>
<a name="l01852"></a>01852             }
<a name="l01853"></a>01853           }
<a name="l01854"></a>01854         <span class="keywordflow">break</span>;
<a name="l01855"></a>01855 
<a name="l01856"></a>01856         <span class="keywordflow">case</span> <span class="stringliteral">"delobsah"</span>: <span class="comment">//mazani podle id obsahu</span>
<a name="l01857"></a>01857           $id = $_GET[<span class="stringliteral">"id"</span>];  <span class="comment">//cislo sekce</span>
<a name="l01858"></a>01858           settype($id, <span class="stringliteral">"integer"</span>);
<a name="l01859"></a>01859 
<a name="l01860"></a>01860           <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT obsah FROM obsah_sablony WHERE id={$id};"</span>, NULL, $error))
<a name="l01861"></a>01861           {
<a name="l01862"></a>01862             <span class="keywordflow">if</span> ($res-&gt;numRows() == 1)
<a name="l01863"></a>01863             {
<a name="l01864"></a>01864               $data = $res-&gt;fetchObject();
<a name="l01865"></a>01865 
<a name="l01866"></a>01866               <span class="keywordflow">if</span> (@$this-&gt;sqlite-&gt;queryExec(<span class="stringliteral">"DELETE FROM obsah_sablony WHERE id={$id};"</span>, $error)) <span class="comment">//provedeni dotazu</span>
<a name="l01867"></a>01867               {
<a name="l01868"></a>01868                 $navic = $this-&gt;<a class="code" href="classDynamicZobrazeni.html#527aa78413315a3364cf487991543a92">SyncFileWithDB</a>();
<a name="l01869"></a>01869                 $rozdel = explode(<span class="stringliteral">"|-x-|"</span>, $data-&gt;obsah);
<a name="l01870"></a>01870                 <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_delobsah_hlaska"</span>], $rozdel[0], $navic);
<a name="l01871"></a>01871 
<a name="l01872"></a>01872                 $this-&gt;var-&gt;main[0]-&gt;AutoClick(1, <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}__{$sablona}"</span>);  <span class="comment">//auto kliknuti</span>
<a name="l01873"></a>01873               }
<a name="l01874"></a>01874                 <span class="keywordflow">else</span>
<a name="l01875"></a>01875               {
<a name="l01876"></a>01876                 $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l01877"></a>01877               }
<a name="l01878"></a>01878             }
<a name="l01879"></a>01879           }
<a name="l01880"></a>01880             <span class="keywordflow">else</span>
<a name="l01881"></a>01881           {
<a name="l01882"></a>01882             $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l01883"></a>01883           }
<a name="l01884"></a>01884         <span class="keywordflow">break</span>;
<a name="l01885"></a>01885       }
<a name="l01886"></a>01886     }
<a name="l01887"></a>01887 
<a name="l01888"></a>01888     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l01889"></a>01889   }
<a name="l01890"></a>01890 
<a name="l01905"></a><a class="code" href="classDynamicZobrazeni.html#0774cf523607cbcca410795f9d974b50">01905</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#0774cf523607cbcca410795f9d974b50">ZpracujObrazek</a>($tmp, $cislo, &amp;$obrazek, $w_mini, $h_mini, $w_full, $h_full, $tmp2 = null)
<a name="l01906"></a>01906   {
<a name="l01907"></a>01907     settype($cislo, <span class="stringliteral">"integer"</span>);
<a name="l01908"></a>01908     list($old_w, $old_h) = getimagesize($tmp[<span class="stringliteral">"tmp_name"</span>][$cislo]);
<a name="l01909"></a>01909     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="keyword">true</span>;
<a name="l01910"></a>01910 
<a name="l01911"></a>01911     <span class="keywordflow">if</span> (Empty($tmp2[<span class="stringliteral">"tmp_name"</span>][$cislo]))
<a name="l01912"></a>01912     {
<a name="l01913"></a>01913       <span class="comment">//mini obr</span>
<a name="l01914"></a>01914       <span class="keywordflow">if</span> ($w_mini != 0 &amp;&amp; <span class="comment">//pevna velikost</span>
<a name="l01915"></a>01915           $h_mini != 0)
<a name="l01916"></a>01916       {
<a name="l01917"></a>01917         <span class="keywordflow">if</span> ($old_w &lt;= $w_mini &amp;&amp;
<a name="l01918"></a>01918             $old_h &lt;= $h_mini)
<a name="l01919"></a>01919         {
<a name="l01920"></a>01920           $new_w = $old_w;  <span class="comment">//zanechava</span>
<a name="l01921"></a>01921           $new_h = $old_h;
<a name="l01922"></a>01922         }
<a name="l01923"></a>01923           <span class="keywordflow">else</span>
<a name="l01924"></a>01924         {
<a name="l01925"></a>01925           $new_w = $w_mini; <span class="comment">//zmensuje</span>
<a name="l01926"></a>01926           $new_h = $h_mini;
<a name="l01927"></a>01927         }
<a name="l01928"></a>01928       }
<a name="l01929"></a>01929         <span class="keywordflow">else</span>
<a name="l01930"></a>01930       <span class="keywordflow">if</span> ($h_mini == 0) <span class="comment">//auto dopocitavani vysky</span>
<a name="l01931"></a>01931       {
<a name="l01932"></a>01932         <span class="keywordflow">if</span> ($old_w &lt;= $w_mini)
<a name="l01933"></a>01933         {
<a name="l01934"></a>01934           $new_w = $old_w;  <span class="comment">//zanechava</span>
<a name="l01935"></a>01935           $new_h = $old_h;
<a name="l01936"></a>01936         }
<a name="l01937"></a>01937           <span class="keywordflow">else</span>
<a name="l01938"></a>01938         {
<a name="l01939"></a>01939           $new_w = $w_mini; <span class="comment">//zmensuje</span>
<a name="l01940"></a>01940           $new_h = round($old_h / ($old_w / $w_mini));
<a name="l01941"></a>01941         }
<a name="l01942"></a>01942       }
<a name="l01943"></a>01943         <span class="keywordflow">else</span>
<a name="l01944"></a>01944       <span class="keywordflow">if</span> ($w_mini == 0) <span class="comment">//auto dopocitavani sirky</span>
<a name="l01945"></a>01945       {
<a name="l01946"></a>01946         <span class="keywordflow">if</span> ($old_w &lt;= $h_mini)
<a name="l01947"></a>01947         {
<a name="l01948"></a>01948           $new_w = $old_w;  <span class="comment">//zanechava</span>
<a name="l01949"></a>01949           $new_h = $old_h;
<a name="l01950"></a>01950         }
<a name="l01951"></a>01951           <span class="keywordflow">else</span>
<a name="l01952"></a>01952         {
<a name="l01953"></a>01953           $new_w = round($old_w / ($old_h / $h_mini)); <span class="comment">//zmensuje</span>
<a name="l01954"></a>01954           $new_h = $h_mini;
<a name="l01955"></a>01955         }
<a name="l01956"></a>01956       }
<a name="l01957"></a>01957         <span class="keywordflow">else</span>
<a name="l01958"></a>01958       {
<a name="l01959"></a>01959         <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="keyword">false</span>;
<a name="l01960"></a>01960       }
<a name="l01961"></a>01961     }
<a name="l01962"></a>01962 
<a name="l01963"></a>01963     <span class="comment">//full obr</span>
<a name="l01964"></a>01964     <span class="keywordflow">if</span> ($w_full == 0 &amp;&amp; <span class="comment">//pevna velikost</span>
<a name="l01965"></a>01965         $h_full == 0)
<a name="l01966"></a>01966     {
<a name="l01967"></a>01967       $new_w_obr = $old_w;  <span class="comment">//zanechava</span>
<a name="l01968"></a>01968       $new_h_obr = $old_h;
<a name="l01969"></a>01969     }
<a name="l01970"></a>01970       <span class="keywordflow">else</span>
<a name="l01971"></a>01971     <span class="keywordflow">if</span> ($w_full != 0 &amp;&amp; <span class="comment">//pevna velikost</span>
<a name="l01972"></a>01972         $h_full != 0)
<a name="l01973"></a>01973     {
<a name="l01974"></a>01974       <span class="keywordflow">if</span> ($old_w &lt;= $w_full &amp;&amp;
<a name="l01975"></a>01975           $old_h &lt;= $h_full)
<a name="l01976"></a>01976       {
<a name="l01977"></a>01977         $new_w_obr = $old_w;  <span class="comment">//zanechava</span>
<a name="l01978"></a>01978         $new_h_obr = $old_h;
<a name="l01979"></a>01979       }
<a name="l01980"></a>01980         <span class="keywordflow">else</span>
<a name="l01981"></a>01981       {
<a name="l01982"></a>01982         $new_w_obr = $w_full; <span class="comment">//zmensuje</span>
<a name="l01983"></a>01983         $new_h_obr = $h_full;
<a name="l01984"></a>01984       }
<a name="l01985"></a>01985     }
<a name="l01986"></a>01986       <span class="keywordflow">else</span>
<a name="l01987"></a>01987     <span class="keywordflow">if</span> ($h_full == 0) <span class="comment">//auto dopocitavani vysky</span>
<a name="l01988"></a>01988     {
<a name="l01989"></a>01989       <span class="keywordflow">if</span> ($old_w &lt;= $w_full)
<a name="l01990"></a>01990       {
<a name="l01991"></a>01991         $new_w_obr = $old_w;  <span class="comment">//zanechava</span>
<a name="l01992"></a>01992         $new_h_obr = $old_h;
<a name="l01993"></a>01993       }
<a name="l01994"></a>01994         <span class="keywordflow">else</span>
<a name="l01995"></a>01995       {
<a name="l01996"></a>01996         $new_w_obr = $w_full; <span class="comment">//zmensuje</span>
<a name="l01997"></a>01997         $new_h_obr = round($old_h / ($old_w / $w_full));
<a name="l01998"></a>01998       }
<a name="l01999"></a>01999     }
<a name="l02000"></a>02000       <span class="keywordflow">else</span>
<a name="l02001"></a>02001     <span class="keywordflow">if</span> ($w_full == 0) <span class="comment">//auto dopocitavani sirky</span>
<a name="l02002"></a>02002     {
<a name="l02003"></a>02003       <span class="keywordflow">if</span> ($old_w &lt;= $h_full)
<a name="l02004"></a>02004       {
<a name="l02005"></a>02005         $new_w_obr = $old_w;  <span class="comment">//zanechava</span>
<a name="l02006"></a>02006         $new_h_obr = $old_h;
<a name="l02007"></a>02007       }
<a name="l02008"></a>02008         <span class="keywordflow">else</span>
<a name="l02009"></a>02009       {
<a name="l02010"></a>02010         $new_w_obr = round($old_w / ($old_h / $h_full)); <span class="comment">//zmensuje</span>
<a name="l02011"></a>02011         $new_h_obr = $h_full;
<a name="l02012"></a>02012       }
<a name="l02013"></a>02013     }
<a name="l02014"></a>02014       <span class="keywordflow">else</span>
<a name="l02015"></a>02015     {
<a name="l02016"></a>02016       <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="keyword">false</span>;
<a name="l02017"></a>02017     }
<a name="l02018"></a>02018 
<a name="l02019"></a>02019     <span class="keywordflow">if</span> (($this-&gt;<a class="code" href="classDynamicZobrazeni.html#a6feccf42c5b1268b85c0f473bd57fc3">ValueConfig</a>(4) != 0 ? $tmp[<span class="stringliteral">"size"</span>][$cislo] &lt; (1024 * 1024 * $this-&gt;<a class="code" href="classDynamicZobrazeni.html#a6feccf42c5b1268b85c0f473bd57fc3">ValueConfig</a>(4)) : <span class="keyword">true</span>) &amp;&amp; <span class="comment">//je-li nastaven limit omezuje jinak pousti</span>
<a name="l02020"></a>02020         <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>)
<a name="l02021"></a>02021     {
<a name="l02022"></a>02022       $nazev = $this-&gt;<a class="code" href="classDynamicZobrazeni.html#7a6a513708228f0444f2b1cc6547d80f">VytvorJmenoObrazku</a>();
<a name="l02023"></a>02023 
<a name="l02024"></a>02024       <span class="keywordflow">switch</span> ($tmp[<span class="stringliteral">"type"</span>][$cislo])
<a name="l02025"></a>02025       {
<a name="l02026"></a>02026         <span class="keywordflow">case</span> <span class="stringliteral">"image/jpeg"</span>:
<a name="l02027"></a>02027           $pripona = <span class="stringliteral">"jpg"</span>;
<a name="l02028"></a>02028           ini_set(<span class="stringliteral">"memory_limit"</span>, <span class="stringliteral">"100M"</span>);  <span class="comment">//nasosne si vic mega</span>
<a name="l02029"></a>02029           $img_old = imagecreatefromjpeg($tmp[<span class="stringliteral">"tmp_name"</span>][$cislo]);
<a name="l02030"></a>02030 
<a name="l02031"></a>02031           <span class="keywordflow">if</span> (Empty($tmp2[<span class="stringliteral">"tmp_name"</span>][$cislo]))
<a name="l02032"></a>02032           {
<a name="l02033"></a>02033             $img_new = imagecreatetruecolor($new_w, $new_h);  <span class="comment">//mini</span>
<a name="l02034"></a>02034             imagecopyresampled($img_new, $img_old, 0, 0, 0, 0, $new_w, $new_h, $old_w, $old_h);
<a name="l02035"></a>02035             imagejpeg($img_new, <span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;minidir}/{$nazev}_{$cislo}.{$pripona}"</span>, 100);
<a name="l02036"></a>02036             imagedestroy($img_new);
<a name="l02037"></a>02037           }
<a name="l02038"></a>02038             <span class="keywordflow">else</span>
<a name="l02039"></a>02039           { <span class="comment">//nahradni mini</span>
<a name="l02040"></a>02040             <span class="keywordflow">if</span> (!move_uploaded_file($tmp2[<span class="stringliteral">"tmp_name"</span>][$cislo], <span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;minidir}/{$nazev}_{$cislo}.{$pripona}"</span>))
<a name="l02041"></a>02041             {
<a name="l02042"></a>02042               <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="keyword">false</span>;
<a name="l02043"></a>02043             }
<a name="l02044"></a>02044           }
<a name="l02045"></a>02045 
<a name="l02046"></a>02046           $img_new = imagecreatetruecolor($new_w_obr, $new_h_obr);  <span class="comment">//full</span>
<a name="l02047"></a>02047           imagecopyresampled($img_new, $img_old, 0, 0, 0, 0, $new_w_obr, $new_h_obr, $old_w, $old_h);
<a name="l02048"></a>02048           imagejpeg($img_new, <span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;fulldir}/{$nazev}_{$cislo}.{$pripona}"</span>, 100);
<a name="l02049"></a>02049           imagedestroy($img_new);
<a name="l02050"></a>02050         <span class="keywordflow">break</span>;
<a name="l02051"></a>02051 
<a name="l02052"></a>02052         <span class="keywordflow">case</span> <span class="stringliteral">"image/png"</span>:
<a name="l02053"></a>02053           $pripona = <span class="stringliteral">"png"</span>;
<a name="l02054"></a>02054           ini_set(<span class="stringliteral">"memory_limit"</span>, <span class="stringliteral">"100M"</span>);  <span class="comment">//nasosne si vic mega</span>
<a name="l02055"></a>02055           $img_old = imagecreatefrompng($tmp[<span class="stringliteral">"tmp_name"</span>][$cislo]);
<a name="l02056"></a>02056 
<a name="l02057"></a>02057           <span class="keywordflow">if</span> (Empty($tmp2[<span class="stringliteral">"tmp_name"</span>][$cislo]))
<a name="l02058"></a>02058           {
<a name="l02059"></a>02059             $img_new = imagecreatetruecolor($new_w, $new_h);  <span class="comment">//mini</span>
<a name="l02060"></a>02060             imagecopyresampled($img_new, $img_old, 0, 0, 0, 0, $new_w, $new_h, $old_w, $old_h);
<a name="l02061"></a>02061             imagepng($img_new, <span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;minidir}/{$nazev}_{$cislo}.{$pripona}"</span>);
<a name="l02062"></a>02062             imagedestroy($img_new);
<a name="l02063"></a>02063           }
<a name="l02064"></a>02064             <span class="keywordflow">else</span>
<a name="l02065"></a>02065           { <span class="comment">//nahradni mini</span>
<a name="l02066"></a>02066             <span class="keywordflow">if</span> (!move_uploaded_file($tmp2[<span class="stringliteral">"tmp_name"</span>][$cislo], <span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;minidir}/{$nazev}_{$cislo}.{$pripona}"</span>))
<a name="l02067"></a>02067             {
<a name="l02068"></a>02068               <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="keyword">false</span>;
<a name="l02069"></a>02069             }
<a name="l02070"></a>02070           }
<a name="l02071"></a>02071 
<a name="l02072"></a>02072           $img_new = imagecreatetruecolor($new_w_obr, $new_h_obr);  <span class="comment">//full</span>
<a name="l02073"></a>02073           imagecopyresampled($img_new, $img_old, 0, 0, 0, 0, $new_w_obr, $new_h_obr, $old_w, $old_h);
<a name="l02074"></a>02074           imagepng($img_new, <span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;fulldir}/{$nazev}_{$cislo}.{$pripona}"</span>);
<a name="l02075"></a>02075           imagedestroy($img_new);
<a name="l02076"></a>02076         <span class="keywordflow">break</span>;
<a name="l02077"></a>02077 
<a name="l02078"></a>02078         <span class="keywordflow">default</span>:
<a name="l02079"></a>02079           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="keyword">false</span>;
<a name="l02080"></a>02080         <span class="keywordflow">break</span>;
<a name="l02081"></a>02081       }
<a name="l02082"></a>02082 
<a name="l02083"></a>02083       $obrazek = <span class="stringliteral">"{$nazev}_{$cislo}.{$pripona}"</span>;
<a name="l02084"></a>02084     }
<a name="l02085"></a>02085       <span class="keywordflow">else</span>
<a name="l02086"></a>02086     {
<a name="l02087"></a>02087       <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="keyword">false</span>;
<a name="l02088"></a>02088     }
<a name="l02089"></a>02089 
<a name="l02090"></a>02090     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l02091"></a>02091   }
<a name="l02092"></a>02092 
<a name="l02099"></a><a class="code" href="classDynamicZobrazeni.html#7a6a513708228f0444f2b1cc6547d80f">02099</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#7a6a513708228f0444f2b1cc6547d80f">VytvorJmenoObrazku</a>()
<a name="l02100"></a>02100   {
<a name="l02101"></a>02101     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = date(<span class="stringliteral">"d-m-Y-H-i-s"</span>);
<a name="l02102"></a>02102 
<a name="l02103"></a>02103     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l02104"></a>02104   }
<a name="l02105"></a>02105 
<a name="l02111"></a><a class="code" href="classDynamicZobrazeni.html#527aa78413315a3364cf487991543a92">02111</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#527aa78413315a3364cf487991543a92">SyncFileWithDB</a>()
<a name="l02112"></a>02112   {
<a name="l02113"></a>02113     <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT obsah FROM obsah_sablony WHERE obsah LIKE ('%.jpg%') OR obsah LIKE('%.png%');"</span>, NULL, $error))
<a name="l02114"></a>02114     {
<a name="l02115"></a>02115       <span class="keywordflow">if</span> ($res-&gt;numRows() != 0)
<a name="l02116"></a>02116       {
<a name="l02117"></a>02117         $databaze = <span class="stringliteral">""</span>;
<a name="l02118"></a>02118         <span class="keywordflow">while</span> ($data = $res-&gt;fetchObject())
<a name="l02119"></a>02119         {
<a name="l02120"></a>02120           $obsahpole = explode(<span class="stringliteral">"|-x-|"</span>, $data-&gt;obsah);
<a name="l02121"></a>02121           <span class="keywordflow">for</span> ($i = 0; $i &lt; count($obsahpole); $i++)
<a name="l02122"></a>02122           {
<a name="l02123"></a>02123             <span class="keywordflow">if</span> (count(explode(<span class="stringliteral">"||--x--||"</span>, $obsahpole[$i])) == 5)
<a name="l02124"></a>02124             {
<a name="l02125"></a>02125               $obr = explode(<span class="stringliteral">"||--x--||"</span>, $obsahpole[$i]);
<a name="l02126"></a>02126               $databaze[] = $obr[0];
<a name="l02127"></a>02127             }
<a name="l02128"></a>02128           }
<a name="l02129"></a>02129         }
<a name="l02130"></a>02130       }
<a name="l02131"></a>02131     }
<a name="l02132"></a>02132       <span class="keywordflow">else</span>
<a name="l02133"></a>02133     {
<a name="l02134"></a>02134       $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02135"></a>02135     }
<a name="l02136"></a>02136 
<a name="l02137"></a>02137 
<a name="l02138"></a>02138     $j = 0;
<a name="l02139"></a>02139     $cesta = <span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;minidir}"</span>;  <span class="comment">//projiti miniatur</span>
<a name="l02140"></a>02140     $handle = opendir($cesta);
<a name="l02141"></a>02141     <span class="keywordflow">while</span>($soub = readdir($handle))
<a name="l02142"></a>02142     {
<a name="l02143"></a>02143       <span class="keywordflow">if</span> ($soub != <span class="stringliteral">"."</span> &amp;&amp; $soub != <span class="stringliteral">".."</span> &amp;&amp; filetype(<span class="stringliteral">"{$cesta}/{$soub}"</span>) == <span class="stringliteral">"file"</span>)
<a name="l02144"></a>02144       {
<a name="l02145"></a>02145         $mini[$j] = $soub;  <span class="comment">//nacitani souboru</span>
<a name="l02146"></a>02146         $j++;
<a name="l02147"></a>02147       }
<a name="l02148"></a>02148     }
<a name="l02149"></a>02149     closedir($handle);
<a name="l02150"></a>02150 
<a name="l02151"></a>02151     $j = 0;
<a name="l02152"></a>02152     $cesta = <span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;fulldir}"</span>;  <span class="comment">//projiti plnych velikosti</span>
<a name="l02153"></a>02153     $handle = opendir($cesta);
<a name="l02154"></a>02154     <span class="keywordflow">while</span>($soub = readdir($handle))
<a name="l02155"></a>02155     {
<a name="l02156"></a>02156       <span class="keywordflow">if</span> ($soub != <span class="stringliteral">"."</span> &amp;&amp; $soub != <span class="stringliteral">".."</span> &amp;&amp; filetype(<span class="stringliteral">"{$cesta}/{$soub}"</span>) == <span class="stringliteral">"file"</span>)
<a name="l02157"></a>02157       {
<a name="l02158"></a>02158         $full[$j] = $soub;  <span class="comment">//nacitani souboru</span>
<a name="l02159"></a>02159         $j++;
<a name="l02160"></a>02160       }
<a name="l02161"></a>02161     }
<a name="l02162"></a>02162     closedir($handle);
<a name="l02163"></a>02163 
<a name="l02164"></a>02164     $pocet1 = 0;
<a name="l02165"></a>02165     <span class="keywordflow">if</span> (count($databaze) != 0 &amp;&amp;  <span class="comment">//mini</span>
<a name="l02166"></a>02166         count($mini) != 0)
<a name="l02167"></a>02167     {
<a name="l02168"></a>02168       $diff = array_diff($mini, $databaze); <span class="comment">//vyhozeni rozdilu</span>
<a name="l02169"></a>02169       $diff = array_values($diff);  <span class="comment">//oprava indexu</span>
<a name="l02170"></a>02170       $pocet1 = count($diff);
<a name="l02171"></a>02171 
<a name="l02172"></a>02172       <span class="keywordflow">for</span> ($i = 0; $i &lt; $pocet1; $i++)
<a name="l02173"></a>02173       {
<a name="l02174"></a>02174         chmod(<span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;minidir}/{$diff[$i]}"</span>, 0777);
<a name="l02175"></a>02175         unlink(<span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;minidir}/{$diff[$i]}"</span>);
<a name="l02176"></a>02176       }
<a name="l02177"></a>02177     }
<a name="l02178"></a>02178 
<a name="l02179"></a>02179     $pocet2 = 0;
<a name="l02180"></a>02180     <span class="keywordflow">if</span> (count($databaze) != 0 &amp;&amp;  <span class="comment">//full</span>
<a name="l02181"></a>02181         count($full) != 0)
<a name="l02182"></a>02182     {
<a name="l02183"></a>02183       $diff = array_diff($full, $databaze); <span class="comment">//vyhozeni rozdilu</span>
<a name="l02184"></a>02184       $diff = array_values($diff);  <span class="comment">//oprava indexu</span>
<a name="l02185"></a>02185       $pocet2 = count($diff);
<a name="l02186"></a>02186 
<a name="l02187"></a>02187       <span class="keywordflow">for</span> ($i = 0; $i &lt; $pocet2; $i++)
<a name="l02188"></a>02188       {
<a name="l02189"></a>02189         chmod(<span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;fulldir}/{$diff[$i]}"</span>, 0777);
<a name="l02190"></a>02190         unlink(<span class="stringliteral">"{$this-&gt;dirpath}/{$this-&gt;pathpicture}/{$this-&gt;fulldir}/{$diff[$i]}"</span>);
<a name="l02191"></a>02191       }
<a name="l02192"></a>02192     }
<a name="l02193"></a>02193 
<a name="l02194"></a>02194     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $pocet1 + $pocet2;
<a name="l02195"></a>02195 
<a name="l02196"></a>02196     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l02197"></a>02197   }
<a name="l02198"></a>02198 
<a name="l02206"></a><a class="code" href="classDynamicZobrazeni.html#31f7ac3341daabbeb7f778bfdb21e292">02206</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#31f7ac3341daabbeb7f778bfdb21e292">AdminVypisObsahSablony</a>($sablona)
<a name="l02207"></a>02207   {
<a name="l02208"></a>02208     settype($sablona, <span class="stringliteral">"integer"</span>);
<a name="l02209"></a>02209 
<a name="l02210"></a>02210     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="stringliteral">""</span>;
<a name="l02211"></a>02211     <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT id, obsah, pridano, nazev, rewrite</span>
<a name="l02212"></a>02212 <span class="stringliteral">                                      FROM obsah_sablony</span>
<a name="l02213"></a>02213 <span class="stringliteral">                                      WHERE sablona={$sablona}</span>
<a name="l02214"></a>02214 <span class="stringliteral">                                      ORDER BY obsah_sablony.pridano DESC;"</span>, NULL, $error))
<a name="l02215"></a>02215     {
<a name="l02216"></a>02216       <span class="keywordflow">if</span> ($res-&gt;numRows() != 0)
<a name="l02217"></a>02217       {
<a name="l02218"></a>02218         <span class="keywordflow">while</span>($data = $res-&gt;fetchObject())
<a name="l02219"></a>02219         {
<a name="l02220"></a>02220           $rozdel = explode(<span class="stringliteral">"|-x-|"</span>, $data-&gt;obsah);
<a name="l02221"></a>02221           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_vypis_obsah"</span>],
<a name="l02222"></a>02222                                               $data-&gt;obsah,
<a name="l02223"></a>02223                                               $rozdel[0],
<a name="l02224"></a>02224                                               $data-&gt;pridano,
<a name="l02225"></a>02225                                               $data-&gt;nazev,
<a name="l02226"></a>02226                                               $data-&gt;rewrite,
<a name="l02227"></a>02227                                               <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}__{$sablona}&amp;amp;co=editobsah&amp;amp;id={$data-&gt;id}"</span>,
<a name="l02228"></a>02228                                               <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}__{$sablona}&amp;amp;co=delobsah&amp;amp;id={$data-&gt;id}"</span>);
<a name="l02229"></a>02229         }
<a name="l02230"></a>02230       }
<a name="l02231"></a>02231     }
<a name="l02232"></a>02232       <span class="keywordflow">else</span>
<a name="l02233"></a>02233     {
<a name="l02234"></a>02234       $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02235"></a>02235     }
<a name="l02236"></a>02236 
<a name="l02237"></a>02237     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l02238"></a>02238   }
<a name="l02239"></a>02239 
<a name="l02247"></a><a class="code" href="classDynamicZobrazeni.html#0bd0e7f4bbb1f89290bb3edf26d06978">02247</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#0bd0e7f4bbb1f89290bb3edf26d06978">ExistujeSablona</a>($adresa)
<a name="l02248"></a>02248   {
<a name="l02249"></a>02249     <span class="keywordflow">if</span> (!Empty($adresa))
<a name="l02250"></a>02250     {
<a name="l02251"></a>02251       <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT id FROM sablona WHERE adresa='{$adresa}';"</span>, NULL, $error))
<a name="l02252"></a>02252       {
<a name="l02253"></a>02253         <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = ($res-&gt;numRows() == 1 ? <span class="keyword">true</span> : <span class="keyword">false</span>);
<a name="l02254"></a>02254       }
<a name="l02255"></a>02255         <span class="keywordflow">else</span>
<a name="l02256"></a>02256       {
<a name="l02257"></a>02257         $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02258"></a>02258       }
<a name="l02259"></a>02259     }
<a name="l02260"></a>02260 
<a name="l02261"></a>02261     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l02262"></a>02262   }
<a name="l02263"></a>02263 
<a name="l02271"></a><a class="code" href="classDynamicZobrazeni.html#4acf254960e8b8a3f84bad0b35f7c4a4">02271</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#4acf254960e8b8a3f84bad0b35f7c4a4">VyberSablony</a>($id = NULL)
<a name="l02272"></a>02272   {
<a name="l02273"></a>02273     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="stringliteral">""</span>;
<a name="l02274"></a>02274     <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT id, adresa, nazev</span>
<a name="l02275"></a>02275 <span class="stringliteral">                                      FROM sablona;"</span>, NULL, $error))
<a name="l02276"></a>02276     {
<a name="l02277"></a>02277       <span class="keywordflow">if</span> ($res-&gt;numRows() != 0)
<a name="l02278"></a>02278       {
<a name="l02279"></a>02279         <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_vyber_sablony_begin"</span>]);
<a name="l02280"></a>02280         <span class="keywordflow">while</span> ($data = $res-&gt;fetchObject())
<a name="l02281"></a>02281         {
<a name="l02282"></a>02282           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_vyber_sablony"</span>],
<a name="l02283"></a>02283                                               $data-&gt;id,
<a name="l02284"></a>02284                                               (!Empty($id) &amp;&amp; $id == $data-&gt;id ? <span class="stringliteral">" selected=\"selected\""</span> : <span class="stringliteral">""</span>),
<a name="l02285"></a>02285                                               $data-&gt;nazev,
<a name="l02286"></a>02286                                               $data-&gt;adresa);
<a name="l02287"></a>02287         }
<a name="l02288"></a>02288         <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_vyber_sablony_end"</span>]);
<a name="l02289"></a>02289       }
<a name="l02290"></a>02290         <span class="keywordflow">else</span>
<a name="l02291"></a>02291       {
<a name="l02292"></a>02292         <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_vyber_sablony_null"</span>]);
<a name="l02293"></a>02293       }
<a name="l02294"></a>02294     }
<a name="l02295"></a>02295       <span class="keywordflow">else</span>
<a name="l02296"></a>02296     {
<a name="l02297"></a>02297       $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02298"></a>02298     }
<a name="l02299"></a>02299 
<a name="l02300"></a>02300     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l02301"></a>02301   }
<a name="l02302"></a>02302 
<a name="l02311"></a><a class="code" href="classDynamicZobrazeni.html#f3fca05b6e6e01959c3363e9f066ea7b">02311</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#f3fca05b6e6e01959c3363e9f066ea7b">VyberTypu</a>($id = NULL, $adresa = NULL)
<a name="l02312"></a>02312   {
<a name="l02313"></a>02313     $typ = array_keys($this-&gt;element);
<a name="l02314"></a>02314 
<a name="l02315"></a>02315     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_typ_select_begin"</span>], $adresa);
<a name="l02316"></a>02316     <span class="keywordflow">for</span> ($i = 0; $i &lt; count($typ); $i++)
<a name="l02317"></a>02317     {
<a name="l02318"></a>02318       <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_typ_select"</span>],
<a name="l02319"></a>02319                                           $i,
<a name="l02320"></a>02320                                           ($id == $i ? <span class="stringliteral">" selected=\"selected\""</span> : <span class="stringliteral">""</span>),
<a name="l02321"></a>02321                                           $typ[$i],
<a name="l02322"></a>02322                                           $this-&gt;element[$typ[$i]]);
<a name="l02323"></a>02323     }
<a name="l02324"></a>02324     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_typ_select_end"</span>]);
<a name="l02325"></a>02325 
<a name="l02326"></a>02326     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l02327"></a>02327   }
<a name="l02328"></a>02328 
<a name="l02337"></a><a class="code" href="classDynamicZobrazeni.html#a306c207be2e7caf6b27a06e30336cbb">02337</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#a306c207be2e7caf6b27a06e30336cbb">VyberVstupu</a>($id = NULL, $adresa = NULL)
<a name="l02338"></a>02338   {
<a name="l02339"></a>02339     $typ = $this-&gt;vstupni_typ;
<a name="l02340"></a>02340 
<a name="l02341"></a>02341     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_vstupni_typ_select_begin"</span>], $adresa);
<a name="l02342"></a>02342     <span class="keywordflow">for</span> ($i = 0; $i &lt; count($typ); $i++)
<a name="l02343"></a>02343     {
<a name="l02344"></a>02344       <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_vstupni_typ_select"</span>],
<a name="l02345"></a>02345                                           $i,
<a name="l02346"></a>02346                                           ($id == $i ? <span class="stringliteral">" selected=\"selected\""</span> : <span class="stringliteral">""</span>),
<a name="l02347"></a>02347                                           $typ[$i]);
<a name="l02348"></a>02348       ;
<a name="l02349"></a>02349     }
<a name="l02350"></a>02350     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_vstupni_typ_select_end"</span>]);
<a name="l02351"></a>02351 
<a name="l02352"></a>02352     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l02353"></a>02353   }
<a name="l02354"></a>02354 
<a name="l02363"></a><a class="code" href="classDynamicZobrazeni.html#84b44bf34e5d458e56bcefe2f4697a10">02363</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#84b44bf34e5d458e56bcefe2f4697a10">PocetRadku</a>($sablona, $inc = 0)
<a name="l02364"></a>02364   {
<a name="l02365"></a>02365     settype($sablona, <span class="stringliteral">"integer"</span>);
<a name="l02366"></a>02366     settype($inc, <span class="stringliteral">"integer"</span>);
<a name="l02367"></a>02367 
<a name="l02368"></a>02368     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = 0;
<a name="l02369"></a>02369     <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT COUNT(id) pocet FROM element WHERE sablona={$sablona};"</span>, NULL, $error))
<a name="l02370"></a>02370     {
<a name="l02371"></a>02371       <span class="keywordflow">if</span> ($res-&gt;numRows() == 1)
<a name="l02372"></a>02372       {
<a name="l02373"></a>02373         <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $res-&gt;fetchObject()-&gt;pocet + $inc;
<a name="l02374"></a>02374       }
<a name="l02375"></a>02375     }
<a name="l02376"></a>02376       <span class="keywordflow">else</span>
<a name="l02377"></a>02377     {
<a name="l02378"></a>02378       $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02379"></a>02379     }
<a name="l02380"></a>02380 
<a name="l02381"></a>02381     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l02382"></a>02382   }
<a name="l02383"></a>02383 
<a name="l02391"></a><a class="code" href="classDynamicZobrazeni.html#a6feccf42c5b1268b85c0f473bd57fc3">02391</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#a6feccf42c5b1268b85c0f473bd57fc3">ValueConfig</a>($cislo)
<a name="l02392"></a>02392   {
<a name="l02393"></a>02393     <span class="keywordflow">if</span> (file_exists($this-&gt;conffile))
<a name="l02394"></a>02394     {
<a name="l02395"></a>02395       $u = fopen($this-&gt;conffile, <span class="stringliteral">"r"</span>);
<a name="l02396"></a>02396       $data = explode(<span class="stringliteral">"-"</span>, fread($u, filesize($this-&gt;conffile)));
<a name="l02397"></a>02397       fclose($u);
<a name="l02398"></a>02398 
<a name="l02399"></a>02399       <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $data[$cislo];
<a name="l02400"></a>02400     }
<a name="l02401"></a>02401 
<a name="l02402"></a>02402     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l02403"></a>02403   }
<a name="l02404"></a>02404 
<a name="l02411"></a><a class="code" href="classDynamicZobrazeni.html#8c26bb6e76025973219a86cf0bff19f9">02411</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#8c26bb6e76025973219a86cf0bff19f9">LoadConfig</a>(&amp;$w_mini, &amp;$h_mini, &amp;$w_full, &amp;$h_full, &amp;$limit)
<a name="l02412"></a>02412   {
<a name="l02413"></a>02413     <span class="keywordflow">if</span> (file_exists($this-&gt;conffile))
<a name="l02414"></a>02414     {
<a name="l02415"></a>02415       $u = fopen($this-&gt;conffile, <span class="stringliteral">"r"</span>);
<a name="l02416"></a>02416       $data = fread($u, filesize($this-&gt;conffile));
<a name="l02417"></a>02417       fclose($u);
<a name="l02418"></a>02418 
<a name="l02419"></a>02419       $data = explode(<span class="stringliteral">"-"</span>, $data);
<a name="l02420"></a>02420       $w_mini = $data[0];
<a name="l02421"></a>02421       $h_mini = $data[1];
<a name="l02422"></a>02422       $w_full = $data[2];
<a name="l02423"></a>02423       $h_full = $data[3];
<a name="l02424"></a>02424       $limit = $data[4];  <span class="comment">//3</span>
<a name="l02425"></a>02425     }
<a name="l02426"></a>02426       <span class="keywordflow">else</span>
<a name="l02427"></a>02427     {
<a name="l02428"></a>02428       $u = fopen($this-&gt;conffile, <span class="stringliteral">"w"</span>);
<a name="l02429"></a>02429       fwrite($u, <span class="stringliteral">"0-135-0-400-3"</span>);
<a name="l02430"></a>02430       fclose($u);
<a name="l02431"></a>02431 
<a name="l02432"></a>02432       echo <span class="stringliteral">"soubor se vytvari, pro pokracovani refresujte a nebo zmente prava zapisu ve slozce"</span>;
<a name="l02433"></a>02433     }
<a name="l02434"></a>02434   }
<a name="l02435"></a>02435 
<a name="l02442"></a><a class="code" href="classDynamicZobrazeni.html#5c6017af2caea9b6a6ebcea13fe99ec0">02442</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#5c6017af2caea9b6a6ebcea13fe99ec0">SaveConfig</a>()
<a name="l02443"></a>02443   {
<a name="l02444"></a>02444     $w_mini = $_POST[<span class="stringliteral">"w_mini"</span>];
<a name="l02445"></a>02445     settype($w_mini, <span class="stringliteral">"integer"</span>);
<a name="l02446"></a>02446 
<a name="l02447"></a>02447     $h_mini = $_POST[<span class="stringliteral">"h_mini"</span>];
<a name="l02448"></a>02448     settype($h_mini, <span class="stringliteral">"integer"</span>);
<a name="l02449"></a>02449 
<a name="l02450"></a>02450     $w_full = $_POST[<span class="stringliteral">"w_full"</span>];
<a name="l02451"></a>02451     settype($w_full, <span class="stringliteral">"integer"</span>);
<a name="l02452"></a>02452 
<a name="l02453"></a>02453     $h_full = $_POST[<span class="stringliteral">"h_full"</span>];
<a name="l02454"></a>02454     settype($h_full, <span class="stringliteral">"integer"</span>);
<a name="l02455"></a>02455 
<a name="l02456"></a>02456     $limit = $_POST[<span class="stringliteral">"limit"</span>];
<a name="l02457"></a>02457     settype($limit, <span class="stringliteral">"integer"</span>);
<a name="l02458"></a>02458 
<a name="l02459"></a>02459     $u = fopen($this-&gt;conffile, <span class="stringliteral">"w"</span>);
<a name="l02460"></a>02460     fwrite($u, <span class="stringliteral">"{$w_mini}-{$h_mini}-{$w_full}-{$h_full}-{$limit}"</span>);
<a name="l02461"></a>02461     fclose($u);
<a name="l02462"></a>02462 
<a name="l02463"></a>02463     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_config_save"</span>]);
<a name="l02464"></a>02464 
<a name="l02465"></a>02465     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l02466"></a>02466   }
<a name="l02467"></a>02467 
<a name="l02474"></a><a class="code" href="classDynamicZobrazeni.html#cefc4f6636e9ff9b0747f5a57add5c58">02474</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#cefc4f6636e9ff9b0747f5a57add5c58">AdministraceObsahu</a>()
<a name="l02475"></a>02475   {
<a name="l02476"></a>02476     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_obsah"</span>],
<a name="l02477"></a>02477                                         <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}&amp;amp;co=config"</span>,
<a name="l02478"></a>02478                                         <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}&amp;amp;co=test_rv"</span>,
<a name="l02479"></a>02479                                         ($this-&gt;povolit_pridani ? $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_obsah_add_link"</span>],
<a name="l02480"></a>02480                                                                                             <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}&amp;amp;co=addsab"</span>,
<a name="l02481"></a>02481                                                                                             <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}&amp;amp;co=addelem"</span>) : <span class="stringliteral">""</span>),
<a name="l02482"></a>02482                                         $this-&gt;<a class="code" href="classDynamicZobrazeni.html#6cfc4bf480fc01f5f1aaa7caa0fb2eb9">AdminVypisObsahu</a>());
<a name="l02483"></a>02483 
<a name="l02484"></a>02484     $co = $_GET[<span class="stringliteral">"co"</span>];
<a name="l02485"></a>02485 
<a name="l02486"></a>02486     <span class="keywordflow">if</span> (!Empty($co))
<a name="l02487"></a>02487     {
<a name="l02488"></a>02488       <span class="keywordflow">switch</span> ($co)
<a name="l02489"></a>02489       {
<a name="l02490"></a>02490         <span class="keywordflow">case</span> <span class="stringliteral">"test_rv"</span>:
<a name="l02491"></a>02491           $vstup = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"vstup"</span>], ENT_QUOTES));
<a name="l02492"></a>02492           <span class="comment">//prepinani podle webu/lokalu</span>
<a name="l02493"></a>02493           $reg_exp = (!in_array($_SERVER[<span class="stringliteral">"REMOTE_ADDR"</span>], $this-&gt;var-&gt;ipblok) ? $_POST[<span class="stringliteral">"reg_exp"</span>] : stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"reg_exp"</span>], ENT_QUOTES)));
<a name="l02494"></a>02494 
<a name="l02495"></a>02495           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_test_rv"</span>],
<a name="l02496"></a>02496                                               $vstup,
<a name="l02497"></a>02497                                               $reg_exp);
<a name="l02498"></a>02498 
<a name="l02499"></a>02499           <span class="keywordflow">if</span> (!Empty($_POST[<span class="stringliteral">"tlacitko"</span>]) &amp;&amp;
<a name="l02500"></a>02500               !Empty($vstup) &amp;&amp;
<a name="l02501"></a>02501               !Empty($reg_exp))
<a name="l02502"></a>02502           {
<a name="l02503"></a>02503             preg_match($reg_exp, $vstup, $ret);
<a name="l02504"></a>02504             <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= (!Empty($ret[0]) ? $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_test_rv_out"</span>], $ret[0]) : <span class="stringliteral">"NULL"</span>);  <span class="comment">//vybere nulty index</span>
<a name="l02505"></a>02505           }
<a name="l02506"></a>02506         <span class="keywordflow">break</span>;
<a name="l02507"></a>02507 
<a name="l02508"></a>02508         <span class="keywordflow">case</span> <span class="stringliteral">"config"</span>:  <span class="comment">//kofigurace galerie</span>
<a name="l02509"></a>02509           $this-&gt;<a class="code" href="classDynamicZobrazeni.html#8c26bb6e76025973219a86cf0bff19f9">LoadConfig</a>($w_mini, $h_mini, $w_full, $h_full, $limit);
<a name="l02510"></a>02510 
<a name="l02511"></a>02511           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_config"</span>],
<a name="l02512"></a>02512                                               <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}"</span>,
<a name="l02513"></a>02513                                               ($limit != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02514"></a>02514                                               $limit,
<a name="l02515"></a>02515                                               ($limit == 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02516"></a>02516                                               ($limit == 0 ? <span class="stringliteral">"lim_2();"</span> : <span class="stringliteral">"lim_1();"</span>),
<a name="l02517"></a>02517                                               ($w_mini != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>), <span class="comment">//mini</span>
<a name="l02518"></a>02518                                               $w_mini,
<a name="l02519"></a>02519                                               ($h_mini != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02520"></a>02520                                               $h_mini,
<a name="l02521"></a>02521                                               ($w_mini != 0 &amp;&amp; $h_mini != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02522"></a>02522                                               ($w_mini == 0 &amp;&amp; $h_mini == 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02523"></a>02523                                               ($w_full != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>), <span class="comment">//full</span>
<a name="l02524"></a>02524                                               $w_full,
<a name="l02525"></a>02525                                               ($h_full != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02526"></a>02526                                               $h_full,
<a name="l02527"></a>02527                                               ($w_full != 0 &amp;&amp; $h_full != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02528"></a>02528                                               ($w_full == 0 &amp;&amp; $h_full == 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02529"></a>02529                                               ($w_mini == 0 &amp;&amp; $h_mini == 0 ? <span class="stringliteral">"mini_4();"</span> : ($w_mini != 0 &amp;&amp; $h_mini != 0 ? <span class="stringliteral">"mini_3();"</span> : ($h_mini != 0 ? <span class="stringliteral">"mini_2();"</span> : ($w_mini != 0 ? <span class="stringliteral">"mini_1();"</span> : <span class="stringliteral">""</span>)))),
<a name="l02530"></a>02530                                               ($w_full == 0 &amp;&amp; $h_full == 0 ? <span class="stringliteral">"full_4();"</span> : ($w_full != 0 &amp;&amp; $h_full != 0 ? <span class="stringliteral">"full_3();"</span> : ($h_full != 0 ? <span class="stringliteral">"full_2();"</span> : ($w_full != 0 ? <span class="stringliteral">"full_1();"</span> : <span class="stringliteral">""</span>)))));
<a name="l02531"></a>02531 
<a name="l02532"></a>02532           <span class="keywordflow">if</span> (!Empty($_POST[<span class="stringliteral">"tlacitko"</span>]))
<a name="l02533"></a>02533           {
<a name="l02534"></a>02534             <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDynamicZobrazeni.html#5c6017af2caea9b6a6ebcea13fe99ec0">SaveConfig</a>();
<a name="l02535"></a>02535 
<a name="l02536"></a>02536             $this-&gt;var-&gt;main[0]-&gt;AutoClick(1, <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}"</span>);  <span class="comment">//auto kliknuti</span>
<a name="l02537"></a>02537           }
<a name="l02538"></a>02538         <span class="keywordflow">break</span>;
<a name="l02539"></a>02539 
<a name="l02540"></a>02540         <span class="keywordflow">case</span> <span class="stringliteral">"addsab"</span>: <span class="comment">//pridavani sablony</span>
<a name="l02541"></a>02541           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addsab"</span>], $this-&gt;dirpath);
<a name="l02542"></a>02542 
<a name="l02543"></a>02543           $adresa = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"adresa"</span>], ENT_QUOTES));
<a name="l02544"></a>02544           $razeni = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"razeni"</span>], ENT_QUOTES));
<a name="l02545"></a>02545           $nove = $_POST[<span class="stringliteral">"nove"</span>];
<a name="l02546"></a>02546           settype($nove, <span class="stringliteral">"integer"</span>);
<a name="l02547"></a>02547           $nove_rss = $_POST[<span class="stringliteral">"nove_rss"</span>];
<a name="l02548"></a>02548           settype($nove_rss, <span class="stringliteral">"integer"</span>);
<a name="l02549"></a>02549           $nazev = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"nazev"</span>], ENT_QUOTES));
<a name="l02550"></a>02550           $rewrite = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"rewrite"</span>], ENT_QUOTES));
<a name="l02551"></a>02551           $popisek = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"popisek"</span>], ENT_QUOTES));
<a name="l02552"></a>02552           $href_id = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"href_id"</span>], ENT_QUOTES));
<a name="l02553"></a>02553           $href_class = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"href_class"</span>], ENT_QUOTES));
<a name="l02554"></a>02554           $href_akce = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"href_akce"</span>], ENT_QUOTES));
<a name="l02555"></a>02555           $zobrazit = (!Empty($_POST[<span class="stringliteral">"zobrazit"</span>]) ? 1 : 0);
<a name="l02556"></a>02556 
<a name="l02557"></a>02557           <span class="keywordflow">if</span> (!Empty($_POST[<span class="stringliteral">"tlacitko"</span>]) &amp;&amp;
<a name="l02558"></a>02558               !Empty($adresa) &amp;&amp;
<a name="l02559"></a>02559               !Empty($nazev) &amp;&amp;
<a name="l02560"></a>02560               !$this-&gt;<a class="code" href="classDynamicZobrazeni.html#0bd0e7f4bbb1f89290bb3edf26d06978">ExistujeSablona</a>($adresa) &amp;&amp;
<a name="l02561"></a>02561               $this-&gt;povolit_pridani)
<a name="l02562"></a>02562           {
<a name="l02563"></a>02563             <span class="keywordflow">if</span> (@$this-&gt;sqlite-&gt;queryExec(<span class="stringliteral">"INSERT INTO sablona (id, adresa, razeni, nove, nove_rss, nazev, rewrite, popisek, href_id, href_class, href_akce, zobrazit) VALUES</span>
<a name="l02564"></a>02564 <span class="stringliteral">                                          (NULL, '{$adresa}', '{$razeni}', {$nove}, {$nove_rss}, '{$nazev}', '{$rewrite}', '{$popisek}', '{$href_id}', '{$href_class}', '{$href_akce}', {$zobrazit});"</span>, $error))
<a name="l02565"></a>02565             {
<a name="l02566"></a>02566               <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addsab_hlaska"</span>], $nazev);
<a name="l02567"></a>02567 
<a name="l02568"></a>02568               $this-&gt;var-&gt;main[0]-&gt;AutoClick(1, <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}"</span>);  <span class="comment">//auto kliknuti</span>
<a name="l02569"></a>02569             }
<a name="l02570"></a>02570               <span class="keywordflow">else</span>
<a name="l02571"></a>02571             {
<a name="l02572"></a>02572               $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02573"></a>02573             }
<a name="l02574"></a>02574           }
<a name="l02575"></a>02575         <span class="keywordflow">break</span>;
<a name="l02576"></a>02576 
<a name="l02577"></a>02577         <span class="keywordflow">case</span> <span class="stringliteral">"editsab"</span>:  <span class="comment">//uprava skupiny</span>
<a name="l02578"></a>02578           $id = $_GET[<span class="stringliteral">"id"</span>];  <span class="comment">//cislo sekce</span>
<a name="l02579"></a>02579           settype($id, <span class="stringliteral">"integer"</span>);
<a name="l02580"></a>02580 
<a name="l02581"></a>02581           <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT adresa, razeni, nove, nove_rss, nazev, rewrite, popisek, href_id, href_class, href_akce, zobrazit FROM sablona WHERE id={$id};"</span>, NULL, $error))
<a name="l02582"></a>02582           {
<a name="l02583"></a>02583             <span class="keywordflow">if</span> ($res-&gt;numRows() == 1)
<a name="l02584"></a>02584             {
<a name="l02585"></a>02585               $data = $res-&gt;fetchObject();
<a name="l02586"></a>02586 
<a name="l02587"></a>02587               <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_editsab"</span>],
<a name="l02588"></a>02588                                                   $this-&gt;dirpath,
<a name="l02589"></a>02589                                                   $data-&gt;adresa,
<a name="l02590"></a>02590                                                   ($data-&gt;razeni == <span class="stringliteral">"ASC"</span> ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02591"></a>02591                                                   ($data-&gt;razeni == <span class="stringliteral">"DESC"</span> ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02592"></a>02592                                                   $data-&gt;nove,
<a name="l02593"></a>02593                                                   $data-&gt;nove_rss,
<a name="l02594"></a>02594                                                   $data-&gt;nazev,
<a name="l02595"></a>02595                                                   $data-&gt;rewrite,
<a name="l02596"></a>02596                                                   $data-&gt;popisek,
<a name="l02597"></a>02597                                                   $data-&gt;href_id,
<a name="l02598"></a>02598                                                   $data-&gt;href_class,
<a name="l02599"></a>02599                                                   $data-&gt;href_akce,
<a name="l02600"></a>02600                                                   ($data-&gt;zobrazit ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>));
<a name="l02601"></a>02601 
<a name="l02602"></a>02602               $adresa = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"adresa"</span>], ENT_QUOTES));
<a name="l02603"></a>02603               $razeni = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"razeni"</span>], ENT_QUOTES));
<a name="l02604"></a>02604               $nove = $_POST[<span class="stringliteral">"nove"</span>];
<a name="l02605"></a>02605               settype($nove, <span class="stringliteral">"integer"</span>);
<a name="l02606"></a>02606               $nove_rss = $_POST[<span class="stringliteral">"nove_rss"</span>];
<a name="l02607"></a>02607               settype($nove_rss, <span class="stringliteral">"integer"</span>);
<a name="l02608"></a>02608               $nazev = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"nazev"</span>], ENT_QUOTES));
<a name="l02609"></a>02609               $rewrite = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"rewrite"</span>], ENT_QUOTES));
<a name="l02610"></a>02610               $popisek = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"popisek"</span>], ENT_QUOTES));
<a name="l02611"></a>02611               $href_id = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"href_id"</span>], ENT_QUOTES));
<a name="l02612"></a>02612               $href_class = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"href_class"</span>], ENT_QUOTES));
<a name="l02613"></a>02613               $href_akce = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"href_akce"</span>], ENT_QUOTES));
<a name="l02614"></a>02614               $zobrazit = (!Empty($_POST[<span class="stringliteral">"zobrazit"</span>]) ? 1 : 0);
<a name="l02615"></a>02615 
<a name="l02616"></a>02616               <span class="keywordflow">if</span> (!Empty($_POST[<span class="stringliteral">"tlacitko"</span>]) &amp;&amp;
<a name="l02617"></a>02617                   !Empty($adresa) &amp;&amp;
<a name="l02618"></a>02618                   !Empty($nazev) &amp;&amp;
<a name="l02619"></a>02619                   $id != 0)
<a name="l02620"></a>02620               {
<a name="l02621"></a>02621                 <span class="keywordflow">if</span> (@$this-&gt;sqlite-&gt;queryExec(<span class="stringliteral">"UPDATE sablona SET adresa='{$adresa}',</span>
<a name="l02622"></a>02622 <span class="stringliteral">                                                                  razeni='{$razeni}',</span>
<a name="l02623"></a>02623 <span class="stringliteral">                                                                  nove={$nove},</span>
<a name="l02624"></a>02624 <span class="stringliteral">                                                                  nove_rss={$nove_rss},</span>
<a name="l02625"></a>02625 <span class="stringliteral">                                                                  nazev='{$nazev}',</span>
<a name="l02626"></a>02626 <span class="stringliteral">                                                                  rewrite='{$rewrite}',</span>
<a name="l02627"></a>02627 <span class="stringliteral">                                                                  popisek='{$popisek}',</span>
<a name="l02628"></a>02628 <span class="stringliteral">                                                                  href_id='{$href_id}',</span>
<a name="l02629"></a>02629 <span class="stringliteral">                                                                  href_class='{$href_class}',</span>
<a name="l02630"></a>02630 <span class="stringliteral">                                                                  href_akce='{$href_akce}',</span>
<a name="l02631"></a>02631 <span class="stringliteral">                                                                  zobrazit={$zobrazit}</span>
<a name="l02632"></a>02632 <span class="stringliteral">                                                                  WHERE id={$id};"</span>, $error))
<a name="l02633"></a>02633                 {
<a name="l02634"></a>02634                   <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_editsab_hlaska"</span>], $nazev);
<a name="l02635"></a>02635 
<a name="l02636"></a>02636                   $this-&gt;var-&gt;main[0]-&gt;AutoClick(1, <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}"</span>);  <span class="comment">//auto kliknuti</span>
<a name="l02637"></a>02637                 }
<a name="l02638"></a>02638                   <span class="keywordflow">else</span>
<a name="l02639"></a>02639                 {
<a name="l02640"></a>02640                   $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02641"></a>02641                 }
<a name="l02642"></a>02642               }
<a name="l02643"></a>02643             }
<a name="l02644"></a>02644           }
<a name="l02645"></a>02645             <span class="keywordflow">else</span>
<a name="l02646"></a>02646           {
<a name="l02647"></a>02647             $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02648"></a>02648           }
<a name="l02649"></a>02649         <span class="keywordflow">break</span>;
<a name="l02650"></a>02650 
<a name="l02651"></a>02651         <span class="keywordflow">case</span> <span class="stringliteral">"delsab"</span>: <span class="comment">//mazani podle id skupny</span>
<a name="l02652"></a>02652           $id = $_GET[<span class="stringliteral">"id"</span>];  <span class="comment">//cislo sekce</span>
<a name="l02653"></a>02653           settype($id, <span class="stringliteral">"integer"</span>);
<a name="l02654"></a>02654           $id = ($this-&gt;povolit_pridani ? $id : 0); <span class="comment">//zakaz odmazani</span>
<a name="l02655"></a>02655 
<a name="l02656"></a>02656           <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT nazev FROM sablona WHERE id={$id};"</span>, NULL, $error))
<a name="l02657"></a>02657           {
<a name="l02658"></a>02658             <span class="keywordflow">if</span> ($res-&gt;numRows() == 1)
<a name="l02659"></a>02659             {
<a name="l02660"></a>02660               $data = $res-&gt;fetchObject();
<a name="l02661"></a>02661 
<a name="l02662"></a>02662               <span class="keywordflow">if</span> (@$this-&gt;sqlite-&gt;queryExec(<span class="stringliteral">"DELETE FROM sablona WHERE id={$id};</span>
<a name="l02663"></a>02663 <span class="stringliteral">                                            DELETE FROM element WHERE sablona={$id};</span>
<a name="l02664"></a>02664 <span class="stringliteral">                                            DELETE FROM obsah_sablony WHERE sablona={$id};"</span>, $error)) <span class="comment">//provedeni dotazu</span>
<a name="l02665"></a>02665               {
<a name="l02666"></a>02666                 <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_delsab_hlaska"</span>], $data-&gt;nazev);
<a name="l02667"></a>02667 
<a name="l02668"></a>02668                 $this-&gt;var-&gt;main[0]-&gt;AutoClick(1, <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}"</span>);  <span class="comment">//auto kliknuti</span>
<a name="l02669"></a>02669               }
<a name="l02670"></a>02670                 <span class="keywordflow">else</span>
<a name="l02671"></a>02671               {
<a name="l02672"></a>02672                 $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02673"></a>02673               }
<a name="l02674"></a>02674             }
<a name="l02675"></a>02675           }
<a name="l02676"></a>02676             <span class="keywordflow">else</span>
<a name="l02677"></a>02677           {
<a name="l02678"></a>02678             $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02679"></a>02679           }
<a name="l02680"></a>02680         <span class="keywordflow">break</span>;
<a name="l02681"></a>02681 
<a name="l02682"></a>02682         <span class="keywordflow">case</span> <span class="stringliteral">"addelem"</span>: <span class="comment">//pridavani elementu</span>
<a name="l02683"></a>02683           $sab = $_GET[<span class="stringliteral">"sab"</span>];
<a name="l02684"></a>02684           settype($sab, <span class="stringliteral">"integer"</span>);
<a name="l02685"></a>02685           $type = $_GET[<span class="stringliteral">"typ"</span>];
<a name="l02686"></a>02686           settype($type, <span class="stringliteral">"integer"</span>);
<a name="l02687"></a>02687           $vstup = $_GET[<span class="stringliteral">"vstup"</span>];
<a name="l02688"></a>02688           settype($vstup, <span class="stringliteral">"integer"</span>);
<a name="l02689"></a>02689 
<a name="l02690"></a>02690           $w_mini = $this-&gt;<a class="code" href="classDynamicZobrazeni.html#a6feccf42c5b1268b85c0f473bd57fc3">ValueConfig</a>(0);
<a name="l02691"></a>02691           $h_mini = $this-&gt;<a class="code" href="classDynamicZobrazeni.html#a6feccf42c5b1268b85c0f473bd57fc3">ValueConfig</a>(1);
<a name="l02692"></a>02692           $w_full = $this-&gt;<a class="code" href="classDynamicZobrazeni.html#a6feccf42c5b1268b85c0f473bd57fc3">ValueConfig</a>(2);
<a name="l02693"></a>02693           $h_full = $this-&gt;<a class="code" href="classDynamicZobrazeni.html#a6feccf42c5b1268b85c0f473bd57fc3">ValueConfig</a>(3);
<a name="l02694"></a>02694 
<a name="l02695"></a>02695           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addelem"</span>],
<a name="l02696"></a>02696                                               $this-&gt;<a class="code" href="classDynamicZobrazeni.html#4acf254960e8b8a3f84bad0b35f7c4a4">VyberSablony</a>($sab),
<a name="l02697"></a>02697                                               $this-&gt;<a class="code" href="classDynamicZobrazeni.html#f3fca05b6e6e01959c3363e9f066ea7b">VyberTypu</a>($type, <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}&amp;amp;co=addelem&amp;amp;sab={$sab}&amp;amp;vstup={$vstup}"</span>),
<a name="l02698"></a>02698                                               ($type &lt; 3 || $type == 7 ? $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addelem_value"</span>], <span class="stringliteral">""</span>) :
<a name="l02699"></a>02699                                                                         ($type == 3 ? $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addeditelem_value_pic"</span>],
<a name="l02700"></a>02700                                                                                                                 $w_mini,
<a name="l02701"></a>02701                                                                                                                 $h_mini,
<a name="l02702"></a>02702                                                                                                                 $w_full,
<a name="l02703"></a>02703                                                                                                                 $h_full,
<a name="l02704"></a>02704                                                                                                                 ($w_mini != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>), <span class="comment">//mini</span>
<a name="l02705"></a>02705                                                                                                                 ($h_mini != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02706"></a>02706                                                                                                                 ($w_mini != 0 &amp;&amp; $h_mini != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02707"></a>02707                                                                                                                 ($w_mini == 0 &amp;&amp; $h_mini == 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02708"></a>02708                                                                                                                 ($w_full != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>), <span class="comment">//full</span>
<a name="l02709"></a>02709                                                                                                                 ($h_full != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02710"></a>02710                                                                                                                 ($w_full != 0 &amp;&amp; $h_full != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02711"></a>02711                                                                                                                 ($w_full == 0 &amp;&amp; $h_full == 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02712"></a>02712                                                                                                                 ($w_mini == 0 &amp;&amp; $h_mini == 0 ? <span class="stringliteral">"mini_4()"</span> : ($w_mini != 0 &amp;&amp; $h_mini != 0 ? <span class="stringliteral">"mini_3();"</span> : ($h_mini != 0 ? <span class="stringliteral">"mini_2();"</span> : ($w_mini != 0 ? <span class="stringliteral">"mini_1();"</span> : <span class="stringliteral">""</span>)))),
<a name="l02713"></a>02713                                                                                                                 ($w_full == 0 &amp;&amp; $h_full == 0 ? <span class="stringliteral">"full_4();"</span> : ($w_full != 0 &amp;&amp; $h_full != 0 ? <span class="stringliteral">"full_3();"</span> : ($h_full != 0 ? <span class="stringliteral">"full_2();"</span> : ($w_full != 0 ? <span class="stringliteral">"full_1();"</span> : <span class="stringliteral">""</span>)))))
<a name="l02714"></a>02714                                                                                     : <span class="stringliteral">""</span>)), <span class="comment">//($type == 4 ? date("d.m.Y") : ($type == 5 ? date("H:i:s") : ($type == 6 ? date("d.m.Y H:i:s") : "")))</span>
<a name="l02715"></a>02715                                               ($type &lt; 3 ? $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addelem_vstupni_typ"</span>], $this-&gt;<a class="code" href="classDynamicZobrazeni.html#a306c207be2e7caf6b27a06e30336cbb">VyberVstupu</a>($vstup, <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}&amp;amp;co=addelem&amp;amp;sab={$sab}&amp;amp;typ={$type}"</span>)) : <span class="stringliteral">""</span>),
<a name="l02716"></a>02716                                               ($type &lt; 3 &amp;&amp; $vstup == 2 ? $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addelem_reg_exp"</span>]) : <span class="stringliteral">""</span>),
<a name="l02717"></a>02717                                               ($type &gt;= 4 &amp;&amp; $type &lt;= 6 ? $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addelem_vystupni_format"</span>], ($type == 4 ? <span class="stringliteral">"d.m.Y"</span> : ($type == 5 ? <span class="stringliteral">"H:i:s"</span> : <span class="stringliteral">"d.m.Y H:i:s"</span>))) : <span class="stringliteral">""</span>),
<a name="l02718"></a>02718                                               ($type &lt; 3 &amp;&amp; $vstup == 0 ?$this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addelem_min_max_poc"</span>]) : <span class="stringliteral">""</span>),
<a name="l02719"></a>02719                                               $this-&gt;<a class="code" href="classDynamicZobrazeni.html#84b44bf34e5d458e56bcefe2f4697a10">PocetRadku</a>($sab, 1));
<a name="l02720"></a>02720 
<a name="l02721"></a>02721           $sablona = $_POST[<span class="stringliteral">"sablona"</span>];
<a name="l02722"></a>02722           settype($sablona, <span class="stringliteral">"integer"</span>);
<a name="l02723"></a>02723           $typ = $_POST[<span class="stringliteral">"typ"</span>];
<a name="l02724"></a>02724           settype($typ, <span class="stringliteral">"integer"</span>);
<a name="l02725"></a>02725           $nazev = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"nazev"</span>], ENT_QUOTES));
<a name="l02726"></a>02726 
<a name="l02727"></a>02727           <span class="keywordflow">if</span> ($type == 3)
<a name="l02728"></a>02728           {
<a name="l02729"></a>02729             <span class="keywordflow">for</span> ($i = 0; $i &lt; 4; $i++)
<a name="l02730"></a>02730             {
<a name="l02731"></a>02731               $val[$i] = $_POST[<span class="stringliteral">"value"</span>][$i];
<a name="l02732"></a>02732               settype($val[$i], <span class="stringliteral">"integer"</span>);
<a name="l02733"></a>02733             }
<a name="l02734"></a>02734           }
<a name="l02735"></a>02735 
<a name="l02736"></a>02736           $value = ($type == 3 ? stripslashes(htmlspecialchars(implode(<span class="stringliteral">"|-|"</span>, $val), ENT_QUOTES)) : stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"value"</span>], ENT_QUOTES)));
<a name="l02737"></a>02737           $input_id = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"input_id"</span>], ENT_QUOTES));
<a name="l02738"></a>02738           $input_class = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"input_class"</span>], ENT_QUOTES));
<a name="l02739"></a>02739           $input_akce = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"input_akce"</span>], ENT_QUOTES));
<a name="l02740"></a>02740           $povinne = (!Empty($_POST[<span class="stringliteral">"povinne"</span>]) ? 1 : 0);
<a name="l02741"></a>02741           <a class="code" href="classDynamicZobrazeni.html#516969f810ae2c04eb430cbd056f0a85">$vstupni_typ</a> = $_POST[<span class="stringliteral">"vstupni_typ"</span>];
<a name="l02742"></a>02742           settype(<a class="code" href="classDynamicZobrazeni.html#516969f810ae2c04eb430cbd056f0a85">$vstupni_typ</a>, <span class="stringliteral">"integer"</span>);
<a name="l02743"></a>02743           $reg_exp = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"reg_exp"</span>], ENT_QUOTES));
<a name="l02744"></a>02744           $vystupni_format = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"vystupni_format"</span>], ENT_QUOTES));
<a name="l02745"></a>02745           $min_poc = $_POST[<span class="stringliteral">"min_poc"</span>];
<a name="l02746"></a>02746           settype($min_poc, <span class="stringliteral">"integer"</span>);
<a name="l02747"></a>02747           $max_poc = $_POST[<span class="stringliteral">"max_poc"</span>];
<a name="l02748"></a>02748           settype($max_poc, <span class="stringliteral">"integer"</span>);
<a name="l02749"></a>02749           $poradi = $_POST[<span class="stringliteral">"poradi"</span>];
<a name="l02750"></a>02750           settype($poradi, <span class="stringliteral">"integer"</span>);
<a name="l02751"></a>02751 
<a name="l02752"></a>02752           <span class="keywordflow">if</span> (!Empty($_POST[<span class="stringliteral">"tlacitko"</span>]) &amp;&amp;
<a name="l02753"></a>02753               !Empty($nazev) &amp;&amp;
<a name="l02754"></a>02754               $poradi &gt; 0 &amp;&amp;
<a name="l02755"></a>02755               $this-&gt;povolit_pridani)
<a name="l02756"></a>02756           {
<a name="l02757"></a>02757             <span class="keywordflow">if</span> (@$this-&gt;sqlite-&gt;queryExec(<span class="stringliteral">"INSERT INTO element (id, sablona, typ, nazev, value, input_id, input_class, input_akce, povinne, vstupni_typ, reg_exp, vystupni_format, min_poc, max_poc, poradi) VALUES</span>
<a name="l02758"></a>02758 <span class="stringliteral">                                          (NULL, {$sablona}, {$typ}, '{$nazev}', '{$value}', '{$input_id}', '{$input_class}', '{$input_akce}', {$povinne}, {$vstupni_typ}, '{$reg_exp}', '{$vystupni_format}', {$min_poc}, {$max_poc}, {$poradi});"</span>, $error))
<a name="l02759"></a>02759             {
<a name="l02760"></a>02760               <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_addelem_hlaska"</span>], $nazev);
<a name="l02761"></a>02761 
<a name="l02762"></a>02762               $this-&gt;var-&gt;main[0]-&gt;AutoClick(1, <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}"</span>);  <span class="comment">//auto kliknuti</span>
<a name="l02763"></a>02763             }
<a name="l02764"></a>02764               <span class="keywordflow">else</span>
<a name="l02765"></a>02765             {
<a name="l02766"></a>02766               $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02767"></a>02767             }
<a name="l02768"></a>02768           }
<a name="l02769"></a>02769         <span class="keywordflow">break</span>;
<a name="l02770"></a>02770 
<a name="l02771"></a>02771         <span class="keywordflow">case</span> <span class="stringliteral">"editelem"</span>:  <span class="comment">//uprava elementu</span>
<a name="l02772"></a>02772           $id = $_GET[<span class="stringliteral">"id"</span>];  <span class="comment">//cislo sekce</span>
<a name="l02773"></a>02773           settype($id, <span class="stringliteral">"integer"</span>);
<a name="l02774"></a>02774           $sab = $_GET[<span class="stringliteral">"sab"</span>];
<a name="l02775"></a>02775           settype($sab, <span class="stringliteral">"integer"</span>);
<a name="l02776"></a>02776           $type = $_GET[<span class="stringliteral">"typ"</span>];
<a name="l02777"></a>02777           settype($type, <span class="stringliteral">"integer"</span>);
<a name="l02778"></a>02778           $vstup = $_GET[<span class="stringliteral">"vstup"</span>];
<a name="l02779"></a>02779           settype($vstup, <span class="stringliteral">"integer"</span>);
<a name="l02780"></a>02780 
<a name="l02781"></a>02781           <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT sablona, typ, nazev, value, input_id, input_class, input_akce, povinne, vstupni_typ, reg_exp, vystupni_format, min_poc, max_poc, poradi FROM element WHERE id={$id};"</span>, NULL, $error))
<a name="l02782"></a>02782           {
<a name="l02783"></a>02783             <span class="keywordflow">if</span> ($res-&gt;numRows() == 1)
<a name="l02784"></a>02784             {
<a name="l02785"></a>02785               $data = $res-&gt;fetchObject();
<a name="l02786"></a>02786 
<a name="l02787"></a>02787               $sab_1 = (!Empty($sab) ? $sab : $data-&gt;sablona);
<a name="l02788"></a>02788               $type_1 = (isset($_GET[<span class="stringliteral">"typ"</span>]) ? $type : $data-&gt;typ);
<a name="l02789"></a>02789               $vstup_1 = (isset($_GET[<span class="stringliteral">"vstup"</span>]) ? $vstup : $data-&gt;vstupni_typ);
<a name="l02790"></a>02790 
<a name="l02791"></a>02791               <span class="keywordflow">if</span> ($type_1 == 3)
<a name="l02792"></a>02792               {
<a name="l02793"></a>02793                 $rozdelit = explode(<span class="stringliteral">"|-|"</span>, $data-&gt;value);
<a name="l02794"></a>02794                 $w_mini = $rozdelit[0];
<a name="l02795"></a>02795                 $h_mini = $rozdelit[1];
<a name="l02796"></a>02796                 $w_full = $rozdelit[2];
<a name="l02797"></a>02797                 $h_full = $rozdelit[3];
<a name="l02798"></a>02798               }
<a name="l02799"></a>02799 
<a name="l02800"></a>02800               <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_editelem"</span>],
<a name="l02801"></a>02801                                                   $this-&gt;<a class="code" href="classDynamicZobrazeni.html#4acf254960e8b8a3f84bad0b35f7c4a4">VyberSablony</a>($sab_1),
<a name="l02802"></a>02802                                                   $this-&gt;<a class="code" href="classDynamicZobrazeni.html#f3fca05b6e6e01959c3363e9f066ea7b">VyberTypu</a>($type_1, <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}&amp;amp;co=editelem&amp;amp;id={$id}&amp;amp;sab={$sab_1}&amp;amp;vstup={$vstup_1}"</span>),
<a name="l02803"></a>02803                                                   $data-&gt;nazev,
<a name="l02804"></a>02804                                                   ($type_1 &lt; 3 || $type_1 == 7 ? $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_editelem_value"</span>], $data-&gt;value) :
<a name="l02805"></a>02805                                                                                 ($type_1 == 3 ? $this-&gt;NactiUnikatniObsah($this-&gt;unikatni[<span class="stringliteral">"admin_addeditelem_value_pic"</span>],
<a name="l02806"></a>02806                                                                                                                           $w_mini,
<a name="l02807"></a>02807                                                                                                                           $h_mini,
<a name="l02808"></a>02808                                                                                                                           $w_full,
<a name="l02809"></a>02809                                                                                                                           $h_full,
<a name="l02810"></a>02810                                                                                                                           ($w_mini != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>), <span class="comment">//mini</span>
<a name="l02811"></a>02811                                                                                                                           ($h_mini != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02812"></a>02812                                                                                                                           ($w_mini != 0 &amp;&amp; $h_mini != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02813"></a>02813                                                                                                                           ($w_mini == 0 &amp;&amp; $h_mini == 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02814"></a>02814                                                                                                                           ($w_full != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>), <span class="comment">//full</span>
<a name="l02815"></a>02815                                                                                                                           ($h_full != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02816"></a>02816                                                                                                                           ($w_full != 0 &amp;&amp; $h_full != 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02817"></a>02817                                                                                                                           ($w_full == 0 &amp;&amp; $h_full == 0 ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02818"></a>02818                                                                                                                           ($w_mini == 0 &amp;&amp; $h_mini == 0 ? <span class="stringliteral">"mini_4()"</span> : ($w_mini != 0 &amp;&amp; $h_mini != 0 ? <span class="stringliteral">"mini_3();"</span> : ($h_mini != 0 ? <span class="stringliteral">"mini_2();"</span> : ($w_mini != 0 ? <span class="stringliteral">"mini_1();"</span> : <span class="stringliteral">""</span>)))),
<a name="l02819"></a>02819                                                                                                                           ($w_full == 0 &amp;&amp; $h_full == 0 ? <span class="stringliteral">"full_4();"</span> : ($w_full != 0 &amp;&amp; $h_full != 0 ? <span class="stringliteral">"full_3();"</span> : ($h_full != 0 ? <span class="stringliteral">"full_2();"</span> : ($w_full != 0 ? <span class="stringliteral">"full_1();"</span> : <span class="stringliteral">""</span>)))))
<a name="l02820"></a>02820                                                                                             : <span class="stringliteral">""</span>)),
<a name="l02821"></a>02821                                                   $data-&gt;input_id,
<a name="l02822"></a>02822                                                   $data-&gt;input_class,
<a name="l02823"></a>02823                                                   $data-&gt;input_akce,
<a name="l02824"></a>02824                                                   ($data-&gt;povinne ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02825"></a>02825                                                   ($type_1 &lt; 3 ? $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_editelem_vstupni_typ"</span>], $this-&gt;<a class="code" href="classDynamicZobrazeni.html#a306c207be2e7caf6b27a06e30336cbb">VyberVstupu</a>($vstup_1, <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}&amp;amp;co=editelem&amp;amp;id={$id}&amp;amp;sab={$sab_1}&amp;amp;typ={$type_1}"</span>)) : <span class="stringliteral">""</span>),
<a name="l02826"></a>02826                                                   ($type_1 &lt; 3 &amp;&amp; $vstup_1 == 2 ? $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_editelem_reg_exp"</span>], $data-&gt;reg_exp) : <span class="stringliteral">""</span>),
<a name="l02827"></a>02827                                                   ($type_1 &gt;= 4 &amp;&amp; $type_1 &lt;= 6 ? $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_editelem_vystupni_format"</span>], (Empty($type) ? $data-&gt;vystupni_format : ($type_1 == 4 ? <span class="stringliteral">"d.m.Y"</span> : ($type_1 == 5 ? <span class="stringliteral">"H:i:s"</span> : <span class="stringliteral">"d.m.Y H:i:s"</span>)))) : <span class="stringliteral">""</span>),
<a name="l02828"></a>02828                                                   ($type_1 &lt; 3 &amp;&amp; $vstup_1 == 0 ? $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_editelem_min_max_poc"</span>], $data-&gt;min_poc, $data-&gt;max_poc) : <span class="stringliteral">""</span>),
<a name="l02829"></a>02829                                                   $data-&gt;poradi);
<a name="l02830"></a>02830 
<a name="l02831"></a>02831               $sablona = $_POST[<span class="stringliteral">"sablona"</span>];
<a name="l02832"></a>02832               settype($sablona, <span class="stringliteral">"integer"</span>);
<a name="l02833"></a>02833               $typ = $_POST[<span class="stringliteral">"typ"</span>];
<a name="l02834"></a>02834               settype($typ, <span class="stringliteral">"integer"</span>);
<a name="l02835"></a>02835               $nazev = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"nazev"</span>], ENT_QUOTES));
<a name="l02836"></a>02836 
<a name="l02837"></a>02837               <span class="keywordflow">if</span> ($type_1 == 3)
<a name="l02838"></a>02838               {
<a name="l02839"></a>02839                 <span class="keywordflow">for</span> ($i = 0; $i &lt; 4; $i++)
<a name="l02840"></a>02840                 {
<a name="l02841"></a>02841                   $val[$i] = $_POST[<span class="stringliteral">"value"</span>][$i];
<a name="l02842"></a>02842                   settype($val[$i], <span class="stringliteral">"integer"</span>);
<a name="l02843"></a>02843                 }
<a name="l02844"></a>02844               }
<a name="l02845"></a>02845 
<a name="l02846"></a>02846               $value = ($type_1 == 3 ? stripslashes(htmlspecialchars(implode(<span class="stringliteral">"|-|"</span>, $val), ENT_QUOTES)) : stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"value"</span>], ENT_QUOTES)));
<a name="l02847"></a>02847               $input_id = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"input_id"</span>], ENT_QUOTES));
<a name="l02848"></a>02848               $input_class = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"input_class"</span>], ENT_QUOTES));
<a name="l02849"></a>02849               $input_akce = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"input_akce"</span>], ENT_QUOTES));
<a name="l02850"></a>02850               $povinne = (!Empty($_POST[<span class="stringliteral">"povinne"</span>]) ? 1 : 0);
<a name="l02851"></a>02851               <a class="code" href="classDynamicZobrazeni.html#516969f810ae2c04eb430cbd056f0a85">$vstupni_typ</a> = $_POST[<span class="stringliteral">"vstupni_typ"</span>];
<a name="l02852"></a>02852               settype(<a class="code" href="classDynamicZobrazeni.html#516969f810ae2c04eb430cbd056f0a85">$vstupni_typ</a>, <span class="stringliteral">"integer"</span>);
<a name="l02853"></a>02853               $reg_exp = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"reg_exp"</span>], ENT_QUOTES));
<a name="l02854"></a>02854               $vystupni_format = stripslashes(htmlspecialchars($_POST[<span class="stringliteral">"vystupni_format"</span>], ENT_QUOTES));
<a name="l02855"></a>02855               $min_poc = $_POST[<span class="stringliteral">"min_poc"</span>];
<a name="l02856"></a>02856               settype($min_poc, <span class="stringliteral">"integer"</span>);
<a name="l02857"></a>02857               $max_poc = $_POST[<span class="stringliteral">"max_poc"</span>];
<a name="l02858"></a>02858               settype($max_poc, <span class="stringliteral">"integer"</span>);
<a name="l02859"></a>02859               $poradi = $_POST[<span class="stringliteral">"poradi"</span>];
<a name="l02860"></a>02860               settype($poradi, <span class="stringliteral">"integer"</span>);
<a name="l02861"></a>02861 
<a name="l02862"></a>02862               <span class="keywordflow">if</span> (!Empty($_POST[<span class="stringliteral">"tlacitko"</span>]) &amp;&amp;
<a name="l02863"></a>02863                   !Empty($nazev) &amp;&amp;
<a name="l02864"></a>02864                   $poradi &gt; 0 &amp;&amp;
<a name="l02865"></a>02865                   $id != 0)
<a name="l02866"></a>02866               {
<a name="l02867"></a>02867                 <span class="keywordflow">if</span> (@$this-&gt;sqlite-&gt;queryExec(<span class="stringliteral">"UPDATE element SET sablona={$sablona},</span>
<a name="l02868"></a>02868 <span class="stringliteral">                                                                  typ={$typ},</span>
<a name="l02869"></a>02869 <span class="stringliteral">                                                                  nazev='{$nazev}',</span>
<a name="l02870"></a>02870 <span class="stringliteral">                                                                  value='{$value}',</span>
<a name="l02871"></a>02871 <span class="stringliteral">                                                                  input_id='{$input_id}',</span>
<a name="l02872"></a>02872 <span class="stringliteral">                                                                  input_class='{$input_class}',</span>
<a name="l02873"></a>02873 <span class="stringliteral">                                                                  input_akce='{$input_akce}',</span>
<a name="l02874"></a>02874 <span class="stringliteral">                                                                  povinne={$povinne},</span>
<a name="l02875"></a>02875 <span class="stringliteral">                                                                  vstupni_typ={$vstupni_typ},</span>
<a name="l02876"></a>02876 <span class="stringliteral">                                                                  reg_exp='{$reg_exp}',</span>
<a name="l02877"></a>02877 <span class="stringliteral">                                                                  vystupni_format='{$vystupni_format}',</span>
<a name="l02878"></a>02878 <span class="stringliteral">                                                                  min_poc={$min_poc},</span>
<a name="l02879"></a>02879 <span class="stringliteral">                                                                  max_poc={$max_poc},</span>
<a name="l02880"></a>02880 <span class="stringliteral">                                                                  poradi={$poradi}</span>
<a name="l02881"></a>02881 <span class="stringliteral">                                                                  WHERE id={$id};"</span>, $error))
<a name="l02882"></a>02882                 {
<a name="l02883"></a>02883                   <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_editelem_hlaska"</span>], $nazev);
<a name="l02884"></a>02884 
<a name="l02885"></a>02885                   $this-&gt;var-&gt;main[0]-&gt;AutoClick(1, <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}"</span>);  <span class="comment">//auto kliknuti</span>
<a name="l02886"></a>02886                 }
<a name="l02887"></a>02887                   <span class="keywordflow">else</span>
<a name="l02888"></a>02888                 {
<a name="l02889"></a>02889                   $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02890"></a>02890                 }
<a name="l02891"></a>02891               }
<a name="l02892"></a>02892             }
<a name="l02893"></a>02893           }
<a name="l02894"></a>02894             <span class="keywordflow">else</span>
<a name="l02895"></a>02895           {
<a name="l02896"></a>02896             $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02897"></a>02897           }
<a name="l02898"></a>02898         <span class="keywordflow">break</span>;
<a name="l02899"></a>02899 
<a name="l02900"></a>02900         <span class="keywordflow">case</span> <span class="stringliteral">"delelem"</span>: <span class="comment">//mazani podle id skupny</span>
<a name="l02901"></a>02901           $id = $_GET[<span class="stringliteral">"id"</span>];  <span class="comment">//cislo sekce</span>
<a name="l02902"></a>02902           settype($id, <span class="stringliteral">"integer"</span>);
<a name="l02903"></a>02903           $id = ($this-&gt;povolit_pridani ? $id : 0); <span class="comment">//zakaz odmazani</span>
<a name="l02904"></a>02904 
<a name="l02905"></a>02905           <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT nazev FROM element WHERE id={$id};"</span>, NULL, $error))
<a name="l02906"></a>02906           {
<a name="l02907"></a>02907             <span class="keywordflow">if</span> ($res-&gt;numRows() == 1)
<a name="l02908"></a>02908             {
<a name="l02909"></a>02909               $data = $res-&gt;fetchObject();
<a name="l02910"></a>02910 
<a name="l02911"></a>02911               <span class="keywordflow">if</span> (@$this-&gt;sqlite-&gt;queryExec(<span class="stringliteral">"DELETE FROM element WHERE id={$id};"</span>, $error)) <span class="comment">//provedeni dotazu</span>
<a name="l02912"></a>02912               {
<a name="l02913"></a>02913                 <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_delelem_hlaska"</span>], $data-&gt;nazev);
<a name="l02914"></a>02914 
<a name="l02915"></a>02915                 $this-&gt;var-&gt;main[0]-&gt;AutoClick(1, <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}"</span>);  <span class="comment">//auto kliknuti</span>
<a name="l02916"></a>02916               }
<a name="l02917"></a>02917                 <span class="keywordflow">else</span>
<a name="l02918"></a>02918               {
<a name="l02919"></a>02919                 $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02920"></a>02920               }
<a name="l02921"></a>02921             }
<a name="l02922"></a>02922           }
<a name="l02923"></a>02923             <span class="keywordflow">else</span>
<a name="l02924"></a>02924           {
<a name="l02925"></a>02925             $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02926"></a>02926           }
<a name="l02927"></a>02927         <span class="keywordflow">break</span>;
<a name="l02928"></a>02928       }
<a name="l02929"></a>02929     }
<a name="l02930"></a>02930 
<a name="l02931"></a>02931     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l02932"></a>02932   }
<a name="l02933"></a>02933 
<a name="l02940"></a><a class="code" href="classDynamicZobrazeni.html#6cfc4bf480fc01f5f1aaa7caa0fb2eb9">02940</a>   <span class="keyword">private</span> function <a class="code" href="classDynamicZobrazeni.html#6cfc4bf480fc01f5f1aaa7caa0fb2eb9">AdminVypisObsahu</a>()
<a name="l02941"></a>02941   {
<a name="l02942"></a>02942     $typelementu = array_keys($this-&gt;element);
<a name="l02943"></a>02943 
<a name="l02944"></a>02944     <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> = <span class="stringliteral">""</span>;
<a name="l02945"></a>02945     <span class="keywordflow">if</span> ($res = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT id, adresa, nazev, rewrite, popisek FROM sablona ORDER BY nazev ASC;"</span>, NULL, $error))
<a name="l02946"></a>02946     {
<a name="l02947"></a>02947       <span class="keywordflow">if</span> ($res-&gt;numRows() != 0)
<a name="l02948"></a>02948       {
<a name="l02949"></a>02949         <span class="keywordflow">while</span> ($data = $res-&gt;fetchObject())
<a name="l02950"></a>02950         {
<a name="l02951"></a>02951           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_vypis_sablona"</span>],
<a name="l02952"></a>02952                                               $data-&gt;id,
<a name="l02953"></a>02953                                               $data-&gt;adresa,
<a name="l02954"></a>02954                                               $data-&gt;nazev,
<a name="l02955"></a>02955                                               $data-&gt;rewrite,
<a name="l02956"></a>02956                                               $data-&gt;popisek,
<a name="l02957"></a>02957                                               <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}&amp;amp;co=editsab&amp;amp;id={$data-&gt;id}"</span>,
<a name="l02958"></a>02958                                               ($this-&gt;povolit_pridani ? $this-&gt;NactiUnikatniObsah($this-&gt;unikatni[<span class="stringliteral">"admin_vypis_sablona_adddel_link"</span>],
<a name="l02959"></a>02959                                                                                                   <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}&amp;amp;co=delsab&amp;amp;id={$data-&gt;id}"</span>,
<a name="l02960"></a>02960                                                                                                   <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}&amp;amp;co=addelem&amp;amp;sab={$data-&gt;id}"</span>,
<a name="l02961"></a>02961                                                                                                   $data-&gt;nazev) : <span class="stringliteral">""</span>)
<a name="l02962"></a>02962                                               );
<a name="l02963"></a>02963 
<a name="l02964"></a>02964           <span class="keywordflow">if</span> ($res1 = @$this-&gt;sqlite-&gt;query(<span class="stringliteral">"SELECT id, typ, nazev, value, povinne, vstupni_typ, vystupni_format, poradi FROM element WHERE sablona={$data-&gt;id} ORDER BY poradi ASC;"</span>, NULL, $error))
<a name="l02965"></a>02965           {
<a name="l02966"></a>02966             <span class="keywordflow">if</span> ($res1-&gt;numRows() != 0)
<a name="l02967"></a>02967             {
<a name="l02968"></a>02968               <span class="keywordflow">while</span> ($data1 = $res1-&gt;fetchObject())
<a name="l02969"></a>02969               {
<a name="l02970"></a>02970                 <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_vypis_element"</span>],
<a name="l02971"></a>02971                                                     $data1-&gt;nazev,
<a name="l02972"></a>02972                                                     (!Empty($data1-&gt;value) ? $data1-&gt;value : <span class="stringliteral">"---"</span>),
<a name="l02973"></a>02973                                                     $typelementu[$data1-&gt;typ],
<a name="l02974"></a>02974                                                     ($data1-&gt;povinne ? <span class="stringliteral">" checked=\"checked\""</span> : <span class="stringliteral">""</span>),
<a name="l02975"></a>02975                                                     $this-&gt;vstupni_typ[$data1-&gt;vstupni_typ],
<a name="l02976"></a>02976                                                     (!Empty($data1-&gt;vystupni_format) ? $data1-&gt;vystupni_format : <span class="stringliteral">"---"</span>),
<a name="l02977"></a>02977                                                     $data1-&gt;poradi,
<a name="l02978"></a>02978                                                     <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}&amp;amp;co=editelem&amp;amp;id={$data1-&gt;id}"</span>,
<a name="l02979"></a>02979                                                     ($this-&gt;povolit_pridani ? $this-&gt;NactiUnikatniObsah($this-&gt;unikatni[<span class="stringliteral">"admin_vypis_del_link"</span>],
<a name="l02980"></a>02980                                                                                                         <span class="stringliteral">"?{$this-&gt;var-&gt;get_kam}={$this-&gt;var-&gt;adresaadminu}&amp;amp;{$this-&gt;var-&gt;get_idmodul}={$this-&gt;idmodul}&amp;amp;co=delelem&amp;amp;id={$data1-&gt;id}"</span>,
<a name="l02981"></a>02981                                                                                                         $data1-&gt;nazev) : <span class="stringliteral">""</span>));
<a name="l02982"></a>02982               }
<a name="l02983"></a>02983             }
<a name="l02984"></a>02984           }
<a name="l02985"></a>02985             <span class="keywordflow">else</span>
<a name="l02986"></a>02986           {
<a name="l02987"></a>02987             $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02988"></a>02988           }
<a name="l02989"></a>02989 
<a name="l02990"></a>02990           <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a> .= $this-&gt;<a class="code" href="classDefaultModule.html#f43261ee577b5bedbdaff44d21c64d38">NactiUnikatniObsah</a>($this-&gt;unikatni[<span class="stringliteral">"admin_vypis_skupina_end"</span>]);
<a name="l02991"></a>02991         }
<a name="l02992"></a>02992       }
<a name="l02993"></a>02993     }
<a name="l02994"></a>02994       <span class="keywordflow">else</span>
<a name="l02995"></a>02995     {
<a name="l02996"></a>02996       $this-&gt;var-&gt;main[0]-&gt;ErrorMsg($error);
<a name="l02997"></a>02997     }
<a name="l02998"></a>02998 
<a name="l02999"></a>02999     <span class="keywordflow">return</span> <a class="code" href="_8unikatni__fukce_8php.html#e241cf0159803673d118f68d99e6342f">$result</a>;
<a name="l03000"></a>03000   }
<a name="l03001"></a>03001 }
<a name="l03002"></a>03002 ?&gt;
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generováno Tue Aug 4 13:38:11 2009 pro projekt Novy vychozi PHP layout programem&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
