<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Získání dat z dokumentu XML</title>

    <script language="javascript">

      function ziskejData()
      {
        var mozilla = false;
        var XMLHttpRequestObjekt = false; 

        if (window.XMLHttpRequest) {
          XMLHttpRequestObjekt = new XMLHttpRequest();
          mozilla = true;
        } else if (window.ActiveXObject) {
          XMLHttpRequestObjekt = new 
            ActiveXObject("Microsoft.XMLHTTP");
        }

        if(XMLHttpRequestObjekt) {
          XMLHttpRequestObjekt.open("GET", "udalost.xml", true); 

          XMLHttpRequestObjekt.onreadystatechange = function() 
          { 
            if (XMLHttpRequestObjekt.readyState == 4 && 
              XMLHttpRequestObjekt.status == 200) { 
              var xmlDokument = XMLHttpRequestObjekt.responseXML;
              if(mozilla){
                odstranBileZnaky(xmlDokument);
              }
              zobrazHosta(xmlDokument);
            } 
          } 

          XMLHttpRequestObjekt.send(null); 
        }
      }

      function zobrazHosta(xml)
      {
        var udalostiUzel, udalostUzel, lideUzel; 
        var osobaUzel, jmenoUzel, prijmeniUzel, zobrazText;

        udalostiUzel = xml.documentElement;
        udalostUzel = udalostiUzel.firstChild;
        lideUzel = udalostUzel.lastChild;
        osobaUzel = lideUzel.lastChild;
        jmenoUzel = osobaUzel.firstChild;
        prijmeniUzel = jmenoUzel.nextSibling;

        zobrazText = "Třetím hostem je " + 
          jmenoUzel.firstChild.nodeValue + ' ' 
          + prijmeniUzel.firstChild.nodeValue;

        var cil = document.getElementById("cilovyDiv");
        cil.innerHTML = zobrazText;
      }

      function odstranBileZnaky(xml) 
      {
        var citac;

        for (citac = 0; citac < xml.childNodes.length; citac++) {

          var aktUzel = xml.childNodes[citac];

          if (aktUzel.nodeType == 1) {
            odstranBileZnaky(aktUzel);
          }

          if (((/^\s+$/.test(aktUzel.nodeValue))) &&   
            (aktUzel.nodeType == 3)) {
              xml.removeChild(xml.childNodes[citac--]);
          }
        }
      }
    </script>

  </head>

  <body>

    <h1>Získání dat z dokumentu XML</h1>

    <form>
      <input type="button" value="Získej třetího hosta" 
        onclick="ziskejData()"> 
    </form>

    <div id="cilovyDiv" width="100" height="100">
      Kdo je třetím hostem?
    </div>

  </body>

</html>
