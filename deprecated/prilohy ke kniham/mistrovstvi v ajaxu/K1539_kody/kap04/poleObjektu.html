<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Použití pole objektů XMLHttpRequest</title>

    <script language="javascript">
      var menu;
      var index = 0;

      var XMLHttpRequestObjekty = new Array(); 

      function ziskejMenu1()
      {
        if (window.XMLHttpRequest) {
          XMLHttpRequestObjekty.push(new XMLHttpRequest());
        } else if (window.ActiveXObject) {
          XMLHttpRequestObjekty.push(new ActiveXObject("Microsoft.XMLHTTP"));
        }

        index = XMLHttpRequestObjekty.length - 1;

        if(XMLHttpRequestObjekty[index]) {
          XMLHttpRequestObjekty[index].open("GET", "menu1.xml"); 

          XMLHttpRequestObjekty[index].onreadystatechange = function() 
          { 
            if (XMLHttpRequestObjekty[index].readyState == 4 && 
              XMLHttpRequestObjekty[index].status == 200) { 
              var xmlDokument = XMLHttpRequestObjekty[index].responseXML;
              menu = xmlDokument.getElementsByTagName("polozkamenu");
              vypisMenu();
            } 
          } 

          XMLHttpRequestObjekty[index].send(null); 
        }
      }

      function ziskejMenu2()
      {
        if (window.XMLHttpRequest) {
          XMLHttpRequestObjekty.push(new XMLHttpRequest());
        } else if (window.ActiveXObject) {
          XMLHttpRequestObjekty.push(new ActiveXObject("Microsoft.XMLHTTP"));
        }

        index = XMLHttpRequestObjekty.length - 1;

        if(XMLHttpRequestObjekty[index]) {
          XMLHttpRequestObjekty[index].open("GET", "menu2.xml"); 

          XMLHttpRequestObjekty[index].onreadystatechange = function() 
          { 
            if (XMLHttpRequestObjekty[index].readyState == 4 && 
              XMLHttpRequestObjekty[index].status == 200) { 
              var xmlDokument = XMLHttpRequestObjekty[index].responseXML;
              menu = xmlDokument.getElementsByTagName("polozkamenu");
              vypisMenu();
            } 
          } 

          XMLHttpRequestObjekty[index].send(null); 
        }
      }

      function vypisMenu()
      {
        var citac;
        var prvekSelect = document.getElementById('seznamPolozek');

        for (citac = 0; citac < menu.length; citac++ )
        {
            prvekSelect.options[citac] = new 
               Option(menu[citac].firstChild.data);
        }
      }
    
      function vyberPolozku()
      {
        document.getElementById('cilovyDiv').innerHTML = 
          "Vybrali jste " + menu[document.getElementById           
            ('seznamPolozek').selectedIndex].firstChild.data;
      }

    </script>
  </head>

  <body>

    <h1>Použití pole objektů XMLHttpRequest</h1>

    <form>
      <select size="1" id="seznamPolozek" onchange="vyberPolozku()">
        <option>Vyberte položku menu</option>
      </select>
      <br>
      <br>
      <input type="button" value="Získej menu 1" 
        onclick="ziskejMenu1()"> 
      <input type="button" value="Získej menu 2" 
        onclick="ziskejMenu2()"> 
    </form>

    <div id="cilovyDiv" width="100" height="100">Váš výběr se zobrazí na tomto místě.</div>

  </body>

</html>

