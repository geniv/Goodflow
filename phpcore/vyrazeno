->class('eval::({aktivni} ? "aktiiiiv" : NULL)'))
->class('eval::({poc}=={count} ? "posledni" : NULL)')
->class('eval::({aktivni} == 1 ? "a" : NULL)')
mb_substr($val, 6)
    public static function getLoadPages() {
      return self::$loadpages;
    }
    //var_dump($poradi);
/*
      $randindex = array_rand($obrazky, 7);
      var_dump($randindex);
*/
"background-image", "url(/myimage.jpg)"
// dodelat + doimplementovat, bude zdrejme instancni trida
//echo Html::a()->hrefpath('kontakty', array('a' => 'neco', 'b' => 'skyredyho'), true)->title('Objednat servis u ZÁKAZNÍKA')->setText('Objednat servis u ZÁKAZNÍKA')->id('objednat_odkaz_1');

/*
$a = new Form;
$a->addSelect('elmem', array('value' => array('hodnoty', 'as' => 'a', 'bs' => 'b', 'cs' => 'c')))
    ->addRule(Form::RULE_NOTEQUAL, 'nemuze byt vybrana defaultni polozka', '0')
  ->addSubmit('butt');
  ;
echo $a;

if ($a->isSubmitted()) {
  var_dump($a->getValues());
}

if ($a->isErrors()) {
  echo $a->getErrors();
}
*/

//var_dump(eval('(4==4?"aa":"bb");'));
//var_dump(eval('return (2==2?"je 2":NULL);'));

  //Pagination
var_dump($count_page, date('r', 1312026754), strtotime('+5 minute'));
/*
                $row[] = Html::a()->href(sprintf('#%s', $val))
                                  ->title(sprintf('stvánka: %s',$val))
                                  ->class()
                                  ->setText($val);
*/
 $res[] = 'next..';
sprintf('#%s', $this->page->current + 1))
//($count_page);
              //var_dump($count_page);
              //var_dump($this->page->current);
#ErrorDocument 504 /www/svn/goodflow_tokenizer/error_page/index.php
#ErrorDocument 505 /www/svn/goodflow_tokenizer/error_page/index.php
#ErrorDocument 501 /www/svn/goodflow_tokenizer/error_page/index.php
#ErrorDocument 502 /www/svn/goodflow_tokenizer/error_page/index.php
#ErrorDocument 405 /www/svn/goodflow_tokenizer/error_page/index.php
#ErrorDocument 408 /www/svn/goodflow_tokenizer/error_page/index.php
#ErrorDocument 415 /www/svn/goodflow_tokenizer/error_page/index.php
#ErrorDocument 301 /www/svn/goodflow_tokenizer/error_page/index.php
#ErrorDocument 302 /www/svn/goodflow_tokenizer/error_page/index.php
//$stranka = 1; //aktualni stranka
 //var_dump($_SERVER['REQUEST_METHOD'], $_DELETE);
// metodu na predavani promennych pres statickou promennou do vkladanych modulu
    //const METHOD_GET = 'get';
    //const METHOD_POST = 'post';
//var_dump($var, $http);
      //var_dump($http);
      var_dump(, $this->page->current);
//throw new ExceptionPagination('Count items does not empty!');
//var_dump($this->page->pagevariable);
//->setCurrentPage(Core::isFill($_GET, 'poc', 5))
//->setCurrentPage(9)
 $od = ;
      var_dump($od);
$this->page->from +
//var_dump($od, $do);
      $range = range($od, $do);
      foreach ($range as $index) {
        $result[$index] = $pole[$index];
      }
$result = array();
      $result =
indexy vstupniho pole musi byt ciselne,
//var_dump($this->element->plaintext);
//return array($this->page->from, $this->page->from + $this->page->perpage - 1);
// nastavovat i promennou ktera bude zajistovat oznaceni aktualni stranky...!
// co kdyz bude NULL????
->title(sprintf('stvánka: %s', $val))
                              ->setText($val);
//var_dump($val);
var_dump($sablona['prev']->setTemplate($data)->render());
        //$(this);
        //$(this).cycle({ pager: \'.ikony_slide\' });
        //$(this).pager(\'.ikony_slide\');
        //console.log($this, $(this));
 //pager: \'.ikony_slide\'
 //pager: \'.ikony_slide\'
id="pager\'+i+\'
/*
$(\'#obsah_reference .polozka .obal_slide .slide\').cycle({
    fx:     \'scrollHorz\',
    speed:  \'fast\',
    timeout: 0,
    pager:  \'.ikony_slide\'
});
*/
/*
        if (div_height >= 450 && div_height <= 699) {
          $(ucinnost).addClass("h451-700");
          console.log("x");
        }
*/
/*
        if (div_height >= 451 && div_height <= 700) {
          $(ucinnost).addClass("h451-700");
        }

        if (div_height >= 701 && div_height <= 830) {
          $(ucinnost).addClass("h701-830");
        }

        if (div_height >= 831 && div_height <= 1210) {
          $(ucinnost).addClass("h831-1210");
        }

        if (div_height >= 1211 && div_height <= 1650) {
          $(ucinnost).addClass("h1211-1650");
        }

        if (div_height >= 1651) {
          $(ucinnost).addClass("h1651-n");
        }
*/
 if (!empty($args)) {

        } else {
 = $count_page;
->setText(']')
, array($this->page->current, $this->page->countpage)
/*
              if (!empty($values[1])) {
                $arg = implode('/', $values[1]);
              }
*/
//var_dump($values);234ěšč
$arg = '';
//var_dump($values[0]);
//$value = sprintf('%s/%s', $values[0], $arg);
//var_dump($arr);
//$values[0] = sprintf('%s/%s', $values[0], implode('/', $values[1]));
//var_dump($values[0]); // nejak udelat pridavani na prvni pole
//$values[0] = implode('/', $values[1]);
//var_dump(implode('/', $values));
$arg = '';
// naimplmentovat i do ostatnich metoh stejneho razu!!
// otestovat jestli je mozny uz tu vnitrne volat render?!!!!
echo PHP_EOL;
echo Html::a()->hrefpath('sublink', 'c', 'd', 'e')->setText('odkaz 2');
// tady style neni uplne doladeny do konce, co se tyce NULL polozek!!!
//var_dump($values[0]);
//var_dump($idx, $val);
//var_dump($values[0]);
// pridavani po polozkach?!
//var_dump($values[0]);
var_dump($values[0]);
var_dump($values[0]);
var_dump($values[0]);
//$value = array_merge($this->element->attributes[$name], $values[0]);
                //$value = $values[0];  /
//$value = array_merge($this->element->attributes[$name], $values[0]);
                //$value = $values[0];
$settings['if'] = ;
//var_dump($if, $attributes);
/*
        $link = self::elem('link', $attributes);
        $note = self::note($if)->insert($link);
*/
        //$css[] = $note;
//$if = $attributes['if'];
        //$attributes['if'] = NULL;
        //var_dump($attr);
// mozna promyslet poradne rozlozeni parametru... kdyz se vsechno hrne do settings...
//tak to rovnou muze jit cele do toho... s tim ze se vysladna pole poscitaji => poprepisuji?!!!!
$settings['if'] = ;
/*
        $script = self::elem('script', $attributes);
        $note = self::note($if)->insert($script);
        $js[] = $note;
*/
//$if = $attributes['if'];
        //$attributes['if'] = NULL;
// pri stejne podmince slucovat do jednoho!!!!! stejne podminky proste slucovat!!!!
Html::a()->href('#')->title('Nazev reference')
//var_dump($path);
          //var_dump($values);
/*
                                                ->insert(Html::a()->hrefpath('reference/full/1.png')->title('Nazev reference')->onclick('return hs.expand(this, config1 )')->class('highslide')
                                                        ->insert(Html::img()->srcpath('reference/mini/1.png')->alt('Nazev reference')->width('651')->height('178'))
                                                )
                                                ->insert(Html::a()->hrefpath('reference/full/2.png')->title('Nazev reference')->onclick('return hs.expand(this, config1 )')->class('highslide')
                                                        ->insert(Html::img()->srcpath('reference/mini/2.png')->alt('Nazev reference')->width('651')->height('178'))
                                                )
                                                ->insert(Html::a()->hrefpath('reference/full/3.png')->title('Nazev reference')->onclick('return hs.expand(this, config1 )')->class('highslide')
                                                        ->insert(Html::img()->srcpath('reference/mini/3.png')->alt('Nazev reference')->width('651')->height('178'))
                                                )
                                                ->insert(Html::a()->hrefpath('reference/full/4.png')->title('Nazev reference')->onclick('return hs.expand(this, config1 )')->class('highslide')
                                                        ->insert(Html::img()->srcpath('reference/mini/4.png')->alt('Nazev reference')->width('651')->height('178'))
                                                )
*/
var_dump(!empty($this->page->count));
//var_dump($pg->getArrayLimit());
//var_dump($data);
//print_r($a);
var_dump($this->page->from);
var_dump($this->page->from);
var_dump(Config::REFERENCE_PERPAGE);
//var_dump(count($dat));//var_dump($pg->getArrayLimit());var_dump($data);
/*
  var config = new array();
  for (var i = 0; i < 5; i++) {
    config[i] = {
      slideshowGroup: \'group1\',
      numberPosition: \'caption\',
      transitions: [\'expand\', \'crossfade\']
    };
    console.log(config);
  }
*/
/*
var config1 = {
	slideshowGroup: \'group1\',
	numberPosition: \'caption\',
	transitions: [\'expand\', \'crossfade\']
};
*/
//var_dump($texthtmltag);
//(string) $content;  //??
//$result[] = (string) $content;
// optimalizovat nazvy indexu!!!! do sablon!
&rsaquo;
// doresit url... a pod!
/*
use classes\Pagination;

$arr = range(0, 889, 2);
//$arr = array();

$pg = new Pagination;
$pg->setCountItem(count($arr))
    ->setPerPage(20)
    //->setCurrentPage(9)
    ->setPagingVariable('page')
    ->calculate();

$sablona = array('prev' => Html::span()->insert(Html::a()->hrefpath('{page}')->setText('prev')), //->href('{url}', array('{args}'))
                'item' => Html::a()->hrefpath('{page}')->setText('{val}'),
                'current' => Html::span()->setText('{val}'),
                'next' => Html::span()->insert(Html::a()->hrefpath('{page}')->setText('next')),
                'pager' => Html::div()->id('strankovani')->insert(Html::span()->id('info_strana')->setText('Strana {current} z {countpage}'))
                                                        ->insert(Html::span()->id('urceni_strany')->setText('{hrefs}'))
                );

echo $pg->getPager(Pagination::PAGER_FULL_NORMAL, $sablona);
//var_dump($pg->getArrayLimit(), $pg->getSqlLimit());
//$ar = $pg->getArrayLimit();
//var_dump(range($ar[0], $ar[1]));

$a = Core::getListRangeArray($arr, $pg->getArrayLimit(), true);
print_r($a);
*/

//echo Html::a()->hrefrewrite('link', array('a', 'b', 'c'))->setText('odkaz');
//echo Html::a()->hrefrewrite('link', 'a', 'b', 'c')->setText('odkaz');

/*
echo Html::a()->hrefpath('sublink', array('a' => 'c', 'b' => 'd', 'g' => 'e'))->setText('odkaz 2');

echo PHP_EOL;
echo PHP_EOL;
*/

/*
echo Html::span()->style(array(NULL, 'af' => 'j'))->style(NULL)->style('a', 'b')->style(NULL)->style(array('c' => 'd', NULL, 'g' => 'j'))->style(NULL)->style('k', 'll')->setText('ahojk');

echo PHP_EOL;
echo PHP_EOL;
*/

/*
  echo Html::text()
            ->setText('ahoj svete')
            ->setText('ahoj svete')
            ->setText('ahoj svete')
            ->setText('ahoj svete')
            ->setText('ahoj svete')
            ->setText('ahoj svete')
            ->insert(Html::div()->class('trida')->id('idee')->setText('huuuuuuuuuu'))
            ->setText('ahoj svete')
            ;
*/
          $.ajax({
            //type: "POST",
            type: "KOKOT",
            url: "ajax.php",
            //dataType: "html",
            data: "%s"+co+"&id="+id,
             success: function(html) {
               console.log(html);
            }
          });
$req = $_SERVER['REQUEST_METHOD'];
var_dump($req, $_POST, $_GET);
//var_dump($_SERVER['REQUEST_METHOD'],  $_SERVER);
// prekopat tady to nacitani url stranek!!!
//$weburl = Core::getUrl(array('path' => self::ADMIN_URL));
//->href($weburl, array(self::$get_adress[0] => self::$main_adress[0]))
$absolutni_url = Core::getAbsoluteUrl();
$absoluteurl = Core::getAbsoluteUrl();
//$weburl = Core::getUrl(array('path' => basename(__FILE__)));
//var_dump($res);
v//$res[$polozka::URL] = $polozka; //toto by slo....
// co kdyby bylo jen toto a ty zbyle by se loadovaly jen kdyz bude potreba
//self::$menu_template = $result;
var_dump(self::$list_modules, $modules);
// vykoumat nazvy...
var_dump($result);
self::getCurrentAdress(1)
//$weburl = Core::getUrl(array('path' => $path.self::ADMIN_URL));
//var_dump($class::getContent());
//var_dump($modules);
//var_dump(Administration::getCurrentModule());
//sprintf('%s<!-- -->', )
//private static function getMenuTemplate() {}
var_dump(self::$list_modules);
var_dump($result);
var_dump(vsprintf('toto je formatovany text %s', array(12566)));
var_dump(vsprintf('toto je formatovany text %s', 12566));
//dirname(Core::getWebPath())
//var_dump(self::$source_path, $path);
//var_dump(self::$source_path, self::$weburl);
//var_dump($imgurl);
// navrat nacitani jeste z weburl!!!!! absolutni cesta je picovina!!!!!!
//$imgurl = Core::getAbsoluteUrl(array('path' => sprintf('%s/%s', Config::SOURCE, $name)));
, $sel_url
var_dump($url, $end);
      if (!empty($param)) {
        //$result = ;http_build_query($param, NULL, '&amp;')
      }
$result = $url;
      $end = ;
//$weburl = Core::getUrl(array('path' => Administration::ADMIN_URL)); /// vykopnout!
//var_dump($weburl, self::$adminurl);//Config::SOURCE;
//onst PREFIX_PHOTO = 'photo';
/*
    private static function getIndexPhoto($name) {
      return sprintf('%s_%s', self::PREFIX_PHOTO, $name);
    }
*/
echo Notification::info(_('Sucessfull saved'))->wait(Notification::SMALL);
var_dump(Core::getAbsoluteUrl(), );
$dirname = 'a';var_dump($pathdir, $mini_path);exit;
      $weburl = ;
var_dump($weburl);
      //
//var_dump(Core::makeUrl(self::$adminurl, $backarray));
// vyhazet getUrl a absolutniUrl
//Config::SOURCE;
  dfdsf345drg
    private static $web_path = NULL;
    private static $source_path = NULL;
/*// nasadit!!!!! nurne!!!!!!
      self::$source_path = sprintf('%s%s', $path, Config::SOURCE);  //path v adresarich
      self::$adminurl = $adminurl;  //url adminu
      self::$weburl = $weburl;  //url webu
*/
//var_dump(self::$weburl, self::$adminurl, self::$source_path);
var_dump(Core::makeUrl(self::$weburl, array('query' => array($get_adress[0] => self::URL), 'path' => Administration::ADMIN_URL)));
var_dump($weburl, self::$weburl, self::$adminurl);
//Core::getUrl(array('path' => Administration::ADMIN_URL));
Core::getAbsoluteUrl()
//$sel_url = Core::getUrl(array('query' => array($get_adress[0] => self::URL, $get_adress[1] => 'delsel', 'array' => ''), 'amp' => '&', 'path' => Administration::ADMIN_URL));
var_dump(Core::makeUrl(self::$adminurl, $refreshurl));Core::getUrl($refreshurl)exit;
var_dump($files_key);
//$files_key = array_keys($files);  //klice pro vlastni razeni
// vybirat z pole jen polozky name!! ty jsou puvodni!
//var_dump($full_files);
array('name' => $newfile, 'comment' => )
$comment = $values['comment'];
//$func = function($value) { return $value['name']; };  //navraceni jen jmena slozky
        //$files_key = (is_array($load_data) ? array_values(array_map($func, $files)) : array());
// doprdele vybrat jen klice!!!!!
//var_dump($newitem);exit;
// problem s razenim novych polozek!!!!!!! ukladat puvodni nazev a podle toho pak radit! pri vypisu z filesystemu
//var_dump($files, $newitem);exit;
//var_dump($sel_url);
//var_dump(Core::makeUrl(self::$adminurl, array('query' => array($get_adress[0] => self::URL, $get_adress[1] => 'delsel', 'array' => ''), 'amp' => '&', 'path' => Administration::ADMIN_URL)));
//var_dump($load_data);exit;
var_dump(Core::isFill($data, $id));
//var_dump($newname);
console.log(i, poc);
  fgdfgčř
//$absoluteurl = Core::getAbsoluteUrl();
var_dump($weburl);
var_dump($adminurl);
//$dirs = ModuleDirs::getActiveDirs();
//$item = Core::isFill($dirs, $id);
//$name = $item['name'];
->onclick('();')
//var_dump($dirs[$id]);
          //$load_data = XmlStorage::getData($xml_path);
var_dump($count_pic['writable'], $count_pic['count'], '...');
var_dump($backdirarray);
              //$backarray = array($get_adress[0] => self::URL, $get_adress[1] => 'dir', 'id' => $hashid);
array('query' => $backdirarray, 'path' => Administration::ADMIN_URL)
// opravit iddir
//$backarray = array($get_adress[0] => self::URL, $get_adress[1] => 'dir', 'id' => $hashiddir);
array('query' => $backarray, 'path' => Administration::ADMIN_URL))
// opravit kontrolu na: $item + kontrolu na subid?!!
$item['files'][$id]
 // poklud neni prazdny index!!!!! opravit osetreni!!! prepsat na dir na item a dirs na data
//$result[] = (!$texthtml ? $break : ''); //pokud neni html v textu tak vklada $break
              //ar_dump($content);
              //$result[] = $break;
//.($texthtml ? 'TX' : '')  // opravit prehnane vkladani entru za elementy!!!!
//.($index == $pocet - 1 ? 'POS' : $index.'.'.$pocet)&& ($index != $pocet - 1)
//var_dump($content->getName());
//var_dump($name);
//var_dump($content->getName());
              //var_dump($textelem);
//var_dump($content->getName());
//&& !$this->element->plaintext
{
= true;
}
  echo Html::div()->insert(Html::text()
                          ->insert(Html::div()->id('nazev_sekce')
                                  ->insert(Html::h2()->setText('Kdo jsme'))
                          )
                          ->insert(Html::h3()->setText('O tom kdo jsme a co děláme'))
                          ->insert(Html::p()->setText('Jsme tým vývojářů, mající za sebou bohaté zkušenosti se zpracováváním a vývojem administračního systému pro user-friendly použití. Můžeme se pochlubit řadou úspěšných referencí, díky kterým se naše zkušenosti obohatily a přinesly celou řadu změn a vylepšení v admin systému. Při naší práci dbáme především na vysokou kvalitu zpracování.'))
                          ->insert(Html::p()->setMarkupText('Naše role jsou:\nwebmaster - Martin Fryšták a programátor - Radek Fryšták.'))
                          ->insert(Html::p()->setText('Dále už za nás mluví naše reference.'))

                          ->insert(Html::kua()->setText('proč?')->insert(Html::pica()->setText('hcii')))
                          );
exit;
//$textelem = false;  //textovy element//var_dump($texthtml.'+'.$textelem);//&& !$textelem&& !$textelem
var_dump($contents[0]);
//var_dump($content->getName(), $this->element->plaintext, PHP_EOL);
textelem
&& !$textelem
 && $this->element->plaintext
//var_dump($texthtml, $textelem, PHP_EOL);
//detekce jestli se jedna o textovy element
              //$texthtml = ($content->getName() == self::PLAIN_TEXT);//&& $this->element->plaintext
              //&& !$textelem
              //$textelem = false;
a zaroven neni textovy element
a zaroven neni textovy element
  echo Html::div()->insert(Html::text()
                          ->insert(Html::div()->id('nazev_sekce')
                                  ->insert(Html::h2()->setText('Kdo jsme'))
                          )
                          ->insert(Html::h3()->setText('O tom kdo jsme a co děláme'))
                          ->insert(Html::p()->setText('Jsme tým vývojářů, mající za sebou bohaté zkušenosti se zpracováváním a vývojem administračního systému pro user-friendly použití. Můžeme se pochlubit řadou úspěšných referencí, díky kterým se naše zkušenosti obohatily a přinesly celou řadu změn a vylepšení v admin systému. Při naší práci dbáme především na vysokou kvalitu zpracování.'))
                          ->insert(Html::p()->setMarkupText('Naše role jsou:\nwebmaster - Martin Fryšták a programátor - Radek Fryšták.'))
                          ->insert(Html::p()->setText('Dále už za nás mluví naše reference.'))

                          ->insert(Html::kua()->setText('proč?')->insert(Html::pica()->setText('hcii')))
                          );
exit;
private static $uservar =
/*
      $result = array('addition' => 'naše projekty',
                      'idsekce' => 'reference');
*/
var_dump(self::$uservar);
      $item = Core::isFill($result, $index);
      return Core::isEmpty($item, $result);
var_dump(static::getUserVariable());
//var_dump(self::getUserVar('idsekce'));
var_dump($values);
if (!empty($values[1])) {
                $value = ;
                $value = ;
              }
//if (!empty($values[0])) {
echo Html::a()->id('hus_%s %s-%s', array('a', 'b', 3));
/*
    private static function getUserVar($index = NULL) {
      $item = self::getUserVariable();
      return Core::isFill($item, $index, $index);
    }
*/
var_dump(self::getUserVar('idsekce'));
var_dump($item, $this->element->plaintext);
&& $this->element->plaintextdetekce
 && $this->element->plaintext
//var_dump($content->render());
//var_dump($content);
// opravit v referencich! to stale blbne!
/*
        foreach ($contents as $obs) {
          if (!($obs instanceof Html)) {
            var_dump(count($contents), $obs);
          }
        }
*/
//$result[] = $break;
 taky pripadne odchytyvat $contents[0][0]
          //var_dump($contents[0][0]);
          //var_dump($contents[0]); // odelat to z textu a dat sem!!! na jednoradkove elementy je to zbytecny tam to odchytavat
          /// pripadne tady odchytit?
 //var_dump($contents[0]);//var_dump($contents[0]);
//if ($pocet == 1 && is_string($contents[0])) {
        //pokud je jedna polozka a neni objektem
/*
        if ($pocet == 1 && !($contents[0] instanceof Html)) { //!is_object($contents[0])
          $break = NULL;
          $indent = NULL;
        }
// poopravit tu tak ze pokud bude jeden radek a v tom radku budou \n tak nebude vyhazovat break ani indent
        if ($pocet == 1 && $contents[0] instanceof Html) {
          //var_dump($contents[0]->getName());
          //|| $contents[0]->isElemImg()
          if ($contents[0]->isNote()) {  //pokud je poznamka
            $break = NULL;
            $indent = NULL;
            $contents[0]->clearDepth();
          }
        }
*/
var_dump($zan, $indent);
//var_dump($indent);
var_dump($contents[0]);
// poopravit tu tak ze pokud bude jeden radek a v tom radku budou \n tak nebude vyhazovat break ani indent????????
 if (!empty($values[1])) {
                    var_dump($values[1]);
                  }
$values
// overit jestli musi byt values a nebo staci jen value[0]
// zasadit vsprintf() do ->class('a%s', ['a'|array('b', 'a')])!!!!!!!!!!!!!!!!!!
//var_dump($values[1]);var_dump($values);
if (!empty($values[1])) {
                  //var_dump($values, $values[1]);
                }
var_dump((array)$values[0]);
  echo Html::span()->setText('aaaa')->insert(Html::a())->setText('bbbbbb')->setText('sssssssss')
                  ->setText("hvii\nsdfsdf rs\nsdffs dfsg")->class('bhcee')->class(array('a', 'b', 'c'))
                  ->class('a %s', 'huuuu')->class('as %s %s', array('c', 'd'))->class('tria');
    public function setQuestion() {
      //????
    }
//echo Html::img()->src('data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAARgAA/+4ADkFkb2JlAGTAAAAAAf/bAIQABAMDAwMDBAMDBAYEAwQGBwUEBAUHCAYGBwYGCAoICQkJCQgKCgwMDAwMCgwMDQ0MDBERERERFBQUFBQUFBQUFAEEBQUIBwgPCgoPFA4ODhQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU/8AAEQgBTwD6AwERAAIRAQMRAf/EALgAAAEFAQEBAQAAAAAAAAAAAAQCAwUGBwgBAAkBAAIDAQEBAAAAAAAAAAAAAAIDAAEEBQYHEAACAQMCBAMFBgMEBwUGBwABAgMAEQQhBTFBEgZRYRNxgSIUB5GhMkJSI7HBFdFicjPw4YJDJBYIklM0VBeissJjJTVzg0SkVaUYEQACAgEDAwEFBQcEAgMAAAAAARECAyExEkFRBBNhcSIyBYGhsdEU8JHBQmIzFeFSoiNysvHTFv/aAAwDAQACEQMRAD8A62/p+X/3Z91eSeC53vVqeHAyx/uzVehYnq1B3Uq3S2jDxpTq1uNTXQiN9UnEJ8jQlp6lRXQj3UxDbDo5VYCHFqFMdFWgRwUSKFrVgsXe1QgzJk+nJHEt2yJP8tB+nmx8hzqSVBJYEYUmSZywS7sbaXH5Vvpp40u2XiNrTkU/u76xNtobbO2hCMv4o8dZWZ2dgbELFErOQOqk2vkyew1Vw466vUyLfe0vql3kkmd3JvMm3bPOwMUbqFvH0hy3pzHquToLhaFenj31YetvhWiKrk9o9h7DKkksxzZol0OTIIkUrpdYYLAnX8xtTPXs9kR4q13InP7l7L2+JFd1kTToEUTupHkb2oksjBvwRXsj6jdnpI4hxD036QzwOqk8OCgcad6GQU8+Pd/gDx92YeSA67IHhJA6oRKrdP8AhawtVPHZfzDJr0Q/JuODKjSibIwpFJUQzRhrHkB0gXv5il2bXQKlOXUiX7ryl9TEmCqiCwZT+zMt7WJ5PrzFC8c/Ehyu6/DYHwszuDMlZYQ8kTDp61B8x1HU/hHOmLEo5AerDh7Fh3DPyu29mixs7C+XfcgjPMoMYDYvUhkB06mfrJt+HUnnWp1tGhzuVFeWRETxzYgnyMYbltAuZUQ9UkYb8/Tck28awzZW00OhpxlKUWztvHOyDHzcCcbj2duIIRkYy+kR+IFeKlfzJe/6aG8zPUtJNfDr/Auc+Ou3NHHlOH2ycdWDmrdkhc/FHcgglD+H360vfYvVLU1j6db9NHjLteTIzek3SmMx6jEkimVGQ3P7LgOF8GT3VqwZGYfIxo0j1UKgqbqdQfEVtWpg2YhpAahY2XBqiDbsLVCDdxVEN19JePTpXTObyPGiTpN15VICTKRuK9Oc+lhrXF8hfEdXD8pCbwt8RqyseVALRV2GDiiiiShxRRKoLHAtSAGLVTRIEcWMnWrJI56RIOl+kXfxtx5VcAye4W3ygNPFGcjMlHW8hFowPyprwAqWo40CV1syP3jZdx7g/wDosG6NixCYDPXCXrneMfEYlY/DEGPws1iddBWSuK17SzWsix10W5A7/N2/9Nse+3RQ7Vmyp8vHNL+7myAAMyhtZemwF9VFVltGiDx15a2ME7l+rPbuTOUlfK3nKDG3pkpjR20APUeNhbpFFTx3vBd89V8rKBl90ZG7Sk4G1Y23s+nVIqyz3tpqb2Ht1rQsXHqJWTlrAOO0Z879/Iyc/LmkuQkMpReuwuFSFQfKm1yVQHCzQdB2H3W0nr7ZiR4KqNZ8nFLN72lYm540t5sa3Yapkey+4Zzuz+5VBlz+4wFAAkWNSqAC2ll4cKr9Rjf8oz9Pk7lYz8DdMGPo/qQz41clvjPUluA1J51XLHboWq5KheybHl7uXZ4/UjYiN2ChuovwDAeFMqo2KyZG9zUicTsHbMnb8K0rZkokV7rIUj6VuouCSnWhPvplrQZa1dipb/l5vcitNn5JeRz6RkZQVRgPhAHAXt4WrK8rnU1VxVa13ITtVc7btxME6ocqAkOigCOWNh8LBQODDiPGizKtloTHa1C9xbdD2pkJvO03i7c3WRRnYZ/BFkW0ew0uPZqKS08lYfzL8CWr6dlavy2/E0DBxMPM2iaKKz40bGGfGIBGNK4vYAcEkDdamsuswaFFtxrYJpoM3+mSM0WXCGXEybdRUf5sSsf0Fk6STyNOTF2p0Rsmx7sN0wY5ukRsPhaO97OPDyI4Vvx2bRy8tODJfqIsaaKENJUIMvLYVChv1ahDbO3t5TedvjyEIMg+FwNbGtuK/NSZc+L07QTDfgPspyElI3dQM5vOuR5PzHSw7EJuyj5U1jNZUwFBokWxYAq+oItQLURTFCwokQN2zCn3TOg2/Ft68zdKlvwqACzMfIAUdKu1lVbgXarVtmn7d2NsuGinJQ5k4A6mlJCX8kGgruY/DpXfU5V/Is9tETcO17bjr0wYkKDyRb/batKxUXRCHez6kN3lumD2925lZMgji6x6ENwoUO+ga390fF7qy+ZlpgxOzXsNHjY7ZciRx737/wBRj9sYGVs3YWMmLhY3UMzuHJIDZEv5hEguWJJuWrzGFXuoroj098VKW5X10OaMruDurvvKefMnyDjZJ6Gdmf15lI1+In4VPHlW3jTDvuZ6u2TdaFv7f7DeWH1VgjgwkteV/wBrHJ/xtcsfIXNZb55NWPxoWxddr2Pt3b+oQ4o3LIA+KRl+Xxy3h+pl8S1Iea7HLDWvQIy8vcmWT/6hJt2GBr8gqYeOnTp8Ejr1svnSpq99RnG3TQo27bxjAgy7rI7dHwiPMad2ABA0I6dbUUf0ltf1FWcZs8wkxcvNEoPwaaMeXUOGl9afWqfQXdwtwiHtHf8AKKvPYzPqZ+n0lceJvYA1oXEy8rGodgdlYuH6u55JUR40fX6rK0Ucxb8UTXPxEW0NNT0MVpZUfqDuzbhuMOVAgbEIvewjPRzSy8LWobLkhuO3Hc92TbosjHORiP6gcdM8UgBHSeBI9gtWZauGabV6olZ9hhz19eFVXe8VbNG/wloUa+luOgvRVvxcCrfF9hO7P6Odh5G1Z6f8DnWxp1b4eiQ/hlPhfypWRcXyQzFZWTq0NbJuOf2Tm9O5RtkY+2N8hvkI0+Z2iVgYskW4yY7Ea80JHKrtVXU9f20Ep2q46rT3ruWvuHb2xMj5nBk9SNQuXhZGhWSHVum442UX99Z6tL3m1aotPZu7xzwQyIQEybhNLD4HK29o6lv7DWzFYw5qSXxZroCOdq2ycxaCGfnVkGyAdTVln1hUIGfSbu5od5G05Ln08oH0wdPiA86x+Dni8Pqdn6r4q4cl0N8I+A89K7x5QpW9rbO8ta5PlHS8chNzUfKnyrH0Na3KUZLMb8jVoOT31bkGiRcQhxZDRMUz0zWq0Qf2/eJtqz8fcMZgMiBiVVtVYEWZW8iL8KKtnWya6A3qrqGahtv1H2nLjU5kMuLIeNgJY/cV1/8AZrt4/NrbdM5V/GsiXXu7t9sWXL+cCxQqzuHVkbpTiQGAJ91Nt5WOtXZvYXXBe1lVLVnHX1x+rmT3jueRteLkjH2HDWS0YJN+nTqPAc7k+6vKZ/KfkXl7fyr2e32nsPF8Svj01+bqc0vgZfeW7I0S22XEYLjKw6jI4OrhRYGwt0+fGtCyVw09rEvG81vYjR9m2naNpPQ6rlzR3Jhnb9lAB8LTsPxf4BXOeR2cs6VcarogbuLvrFim9DJyHz8pSohxoECJHfgI49FiTzOtMpjdtSmq17kVBvPc+79UGHEuMHa0cWKOsL5mRtCT5CmejTqwednsWTaPpV3FkKuZuebkXawdsiZnOvJeq9hrwqnevRJAtd2WvC+l+IpPUPmpVt0noVlUjzIF7fZQvIMrjS3CJu08bbApliiV2ZUjhVSWIGrFjQ+oU6Kx9j7fJmZSdAUxXKrit8YItYuUPwgAD4bmirdtgWxcS19wYUk2yTYvXHCiR/EkSWvdLgX46AVoVzHWik56zMFcnpib9uVrfLysf25VPK/j8JqlZoO1KsE23c8ntnNEGRCVAJcH8QdeYZeLe7WnOnNSZOTq/YaHt+XBvUPzuxSmPcILTKjWeRDz6f1JbiBes96xox9XV6hLNi7hG+XiIIWRlx9yxrn9p5BdWW/FDxU0lOdxjpGqHtzkOfitlFSdz21Vxs1SP8zGcApIP1A6g1K2aZUaSh7snc5srb8zs2Zyc3b1G47FM/xdcGrejfmosdPA+VBdfzL7SY2tg/t/N+VebGT4I4GOZiXF7Rm4kT2qU6TTcdoJeq2NXhyA0at1dSt8QI4ENqD99dNOVJx7qGPiQcuNFIqD3qvVln3VUIZ5hbjLtW54W5wt0nGmjc/4QwDD3qTXAx242TPbZsXqUdfYdj4OQuVhwZKapLGrqfIgGvY1cqT5w1DaKrv4tmDzrl+VudDx9iB3IH5R/Z/KsUmxGfPMA7g+Jo1VFyeCUE0UEkcWQVcAsX6gN9akE6geQzX6hVPQtoVibrJjHpb7TR1yQIvSSD+onen9O2b5WJyJJFPrEaHpOgUf4msK5nmZ3kaqnotzt/TvFS+NrXocx7vjPm5cXb+Ldzk3OdLfqPST1EFvAk3agx2SXLaDflpL49Sw/L4u1wLCg9HHRVBZQA8gHAAflU8QONJvd3cj6Y1SsIrk+fuG+yf07aV9GF2N3T8WpHA861UpG4u+2hfuz/oquXEs2aWYvYydWpa/G5pjvKhCpVdzV9n+kW0YYjRMiXHjUWDRhSbjh+INS4ZXrxsi0Rdl7djdHrtl7gi8AehOk+PQoUGrj2CXlb2gcyYM7p+VwcFo1BI6kVhceBLDShtSz2RKum7sR8PZG6ZknqZjXlbV1F7KnJQBYe2p6NmNt5Fa7E3i9nxbcgkjivLp1TNYkC+oFPWFoyXz8iB3nAledozeSWVunqbTpFtbAcSeVCy00Y53D2lJtuTPAE6RHGHwpX0QjrLFD06Ai5086JMu1U1KKxkJi5SrhblCrOrdAlc3F+Q6hqD+k06srVGZ1VtGV+XDyu3M71YZTCC3qY+SpI6XJ4gnUEeFPTrdGaeFoLfibxNubxZeMqQ9yQxt8zAABDnwD/MAHAMRxX3rWLJiNeLJ3DcbdseGSHcIwXxbNB0lup/ljq8bdXFo21HlWVuUaIjUg97GZsOTj77tTk5G1y/O7e9+pWgHxNAw5ixI95pyauoFXrD0Lwc/BfKwe4tvHqbNnJ83GqkOBHNb1Ir87Hq+yl43Epj7pWg1DY1LbPhdZvII+lj4iNiike0AGupj+VHDzaXYcWI0pqFIUJLamiBaPfVFQqDNc23yjE810I8a82+p75PVHXHYGU2d2XsmU34pMOEknx6BXsvHfwV9x848qvHNZe0G7iUDJU89aw+UP8cr+4/+Dk9n8q572Nhlc2QqzOpOoY/xp62IfLkKedWQWMhb8ahQr5geNQghplPPWoSRAKM92FyOQ50FoSkZTXTuZT3jIu777DBkyLFtsP8AxDMwuXaFrhVUakcNeVcCZ+I9VjUVVV0KBt00McuVmxErNkSMnrkhf2VJ4uPiAJpzcqC60e5A7xuEk06BGZo5mKoeH7RGshU834L5U7EtJKyfDojWPpR2lHIqzyppZSGtcD7aY7CbxEnSGzbTDjYyhFta1xbWjoc7LZtk9DhrYkoCeQOgpqqJ5MlIseJQLKFPMi1akkIs2PnHQfiPVzuRToXYDkxSwp0GwBB0PC9XxB5MEy4AyEdGl+AoWiJlP3DAjO6t1r8DDrHlcf21jdPiNFbaFP712hMjBm6YwuQh6la17gqARVWrAzHedDmjuyN8LIJT9lxderxJ4AjmDTaFZEAbXvmFvUMu076nTLoocklVuLX6jxTkaJ146oVKsoZD5Pzfb+4f06eS8SEfKy31FvwqWHgPwn81MaV1KF10cMnYN1TJkafHURSS9L5KIPhJTQToDxYHSQeFc7Lj4vQ3YrzoywRyrmYz4MgCyqvqwAcGA/HH52/EniLis3Li0akldQDdmTvhRbh2jkEmLAb1sNW5QzX6Sv29Jt4UeZxZW7g4tU11Nv7AzWy9k9JyTJiSGFr8RoCPtro+PaZRx/LrFpXUszJxPOtZhQ0yH3VApPOk1CcjMM/IAw2F9ekge2vOPZnu6y2dh/T3GbE7G2HHcWZcGG4PHVAa9jgXwV9x858q3LPd/wBTGe5FAmRqxeYtB3jsr24LfDl9hrnWRtMRzsopmzre1nIp1di2hoZfnREhji5h5GoVAr5s+NQqBQyj41ZcHrZUnoy9B+Poax9otWXO4pBp8dJ3U9DEd1ebJ7u37ob48JIMWNjw9NjeUDxPSvCuTlqqr7T1OP5awtyq5U7SouPjpZcmb0kW/wAXpx/iPvNXUfZQwXasf+o77KlupgyIF1KqF/CByGlbVpUxZHNjrD6ebWuHgorJqVFwfGs6csTn2NTxiqINdfCtVTnRIekgIv8Am5U6jF2qExOTx0p6sKdR/rsON6PkBB6JOo2JpkgweOwJF+FXKBghd0w/UAkjt66XsORX9N6RkXYKjKhvStNE0cqlJemzIf8AVWeX1HV0ZzZ9S9ok/fkVLEA9IAubedFRjbIxBpWEvXGPT3GBmMLA2DBhqpHga1Jma1ZJibdV3vaQSAM3FjDSxgfH6Q0N/wD8M/dQVmj94fHmuzIvG3kxqssbBMjGY9YHNWFrkeDc6l6ci8N1XQum19wJPjxTQG2RB09anUqT4eKkcDXLyY3J0laCanzY8LLwe4sMMVxj/wAZBoerHlOtzxuhN6i1rDLutVapq/0xz0O/Z+znXGyMZMvDkBBUiNunjxN1f7q0eJbU5vnVUSjVvlACwtqK68HEbEHEHhU4k5Cfkx4VOJORh+YryvHAh1lkSMD/ABsBXmUpcH0G1uKk7s2qBcba8PGUWEMEcYH+FQK9rTRJew+YWc2b9rITuVfiRvOsPlGzx9yuZoviy/4TXNtsbzn3eZSu65S/3zRU2GAgnPPjTJLFCfXWqBiRfrG+h0qFQLE7cKkkHRlERkBrMfLjbUD7ay+Q9F70a/GU2f8A4syWI9ObuG5OyGVn3DcHSxuZGBgUDy14VyMsv956jDpxXZFEQkx7fk9QVPT615kepNY3HlT2t/eHo3v7i5/SbYHzdybKMTEGV2JPCwawH2VpyP4TnYd22dX7DjDHVFZOk2FxWam4rM5LWsYIuNBWxGWR6OI2B50VasVawSlxoNTWhJi7MdBJFxy40wWfAMD5eFSS2Ls3PT2VcgOGBztqVOnsoHYviQ244gyL3AseBHGhaktMyL6l9q5OTgSZWGeqWFS4W1ixHK9BsOq5OQO78docuSRVaPIsxZeYI/ER42NaKai8iggcTcnjlTOSwY/DkAfha/E+8UWRaBVt8Q3myxwZ1kNostG9BhxeNuK/4gdRV402n7ALJK0fuHNs3SXEyY5YBeSMGOeIGwdQefm1KyY00MxXbNS2TeY54T6CiaKVSYQeBsPjje3MeNc21XVnRq06mg9h5y4XcGwyxTsuAkrQ47n82PkAoIpAdfgJ0osNouzP5OOcUdTpQxtwsOocSOF+dq762PLs+9BzrVlHnov4VIIYRDGg3zbfVIEQzMfqvwt6q15nH86PoOf+24/bQ7mgKtEpH4SotXtFsfMK7ED3KB0ofOsXlL4Tb4+5W8kBsdx/dNcpqUdBsxHetsRt1yGI4tzplVoU7AY2yPy+w0xIHmxwbZF4CpCJzcCxtsY5fZUgDmxxdvh8NfZV8Sc2Iy8GOLGeRAeqMrJYC9wrAn7qz56J19z/ACNPj5Iv+3tMM9N4NtzMmW1gjYqte7lpZHYlQOJs3E156+p7fHXV+4pGKyZGNkFOkSYUGT6KDkFcD4j43roOsRO0iKtus+8tn0j+q+D24kMW/wC2Txq5/wDExrdCF0JAPGujk8dP5XJwvXhRdOvtOqu1u++1u6I1k2XOjlkUDqxmHROB49J1I9lYr1dHqg6NWU1cl0xpw3Bh/KrrZFtBnremNfdTExUSffPKzdKkeZouZSpA6mWikCR7A/z1ptbdxNgtMvDYECS9jYgcRamyhTbFzyKV+A+dEykiImmIY9P21mvMmpLQFaVm4keVCrEdYZD7tEk+NJHJYowIYW5EVHaS0oZxP9XdpbBzppVHS8bsY7jQlhrf2gUeG2sMblrpJi4WSESRWLQodD4I3I+a10XDhnOnRnxyEysdcd3UMrL6LObANr068QTQqrq5Gclap962R6q+shgz4/hYEW67G4vbQ+Rq3VLbVE3cP4WizbLvBx5PXiPRFdfmYSbGO3BwPL81c/Li6fszZhtMs1/t7OjkaGTHa88c8c0JNukfEtyPJvurmKa2N91yo/cdhYrjLxsbJTX141c24X5++vUY2nVHjLKHAQgBBFqYkgGfdA8OdFBUnPu8YxAd00ddVPgQbi3vFeQThn0V61Ou/pz3FD3R2dte7If3JIFSdRqVlQdLA+8V67xcnPGmfOfLxenltX2hXcoBiU8qHydakwblbm/yWt+k/wAK5LtCOmYL3Rv/AMnveRj21BB4GsT8xV0NlfDd1JEf80eX3Gp/kEEvAPT3OeQ+6p/kC/0B8O55DyoX55X6FC17lltcA1P8gwl4CFHuSViFZLqdCL8RY3FBfzpUB08JV+IxjImjTa8zBDEennjHRh8TCMSL021vex8Kx72X2nqKa0ZR9kyoz/X4G+H1oc8BTYCyynTje9heulnrDrHdGPx9VZP2lq+gu9M/pdvbuFlV0VoldetXDXU6NpypnmpVu3XuV4VHkwpNapG6bh9Hu31tumypJs+Z/mCfBkZNSD+Qki3OwArPXyLJbyuzMlvHo3qofdafcaD2FnbrLgrh75PHkblB+008alFdF/CSp1vYXNBym2mxeXHxXcvGb6oWwXXhT7zGhjq0Zh352/3Ru8zptvcM214xUKIYyVUsOZKgtx5A1Fetd1I2qVyjR/T3vrLvFN3ZOqDRpLGSRr+9QNKKudLoR4F/uLFs/wBOM3bmMmX3DuJksFj9K8QU3uT+M399R5l2LWJLqWPB27ufbSfk+6cllOoxsuNJoW8SXsHHuqLKuwLxJk6u9b3EsYy8eLKsLSSQuVe/kDcVXqSUsSJWDIOSLhGTTg4sbmrTEuvE8ni64yDxokVJzp9aO2Bl+oFS7OnqDTiysQR99XS3FyO3Ry7k9tboMiWPFHqNHKzenwYeIYcga6FcyjUzek7OV0BIuz93Yyyej+zL+2C+kRkv1EK5sOpbXte9qZ66ZK+JfVTqDZcedtb/ACmZEMhEGikB1IGpKsAHuBqLiiUX2ZL+phitlKX2/ue/7z2IIx+c2kO56S0mM/xOYvzFbfjA5jiKG1XtYBOVyq/sNE7R3T0xgvC93CF4+nW6hvw+y1cXNjasdXDaatHb/YW5JunbWLkIblD09NiLX5Cux4lpoeX8unDJBaAliw863GJn2lWAYfu2PdGsNTw/trx/U+iVehoP/Tn3I2Fum59n5DD05gc3CXwYaSge3Q12vpuaHxZ5z61gTSyL7Tce41/4ce2un5GqPP4HqVhxeNh5fyrktHUZzV3/ABsnc2RYaED7r157MviPQeO1wK4FY/lNJ4sfKHAj/pvV8WSULVXPBT9lTiyN1HUR7AdJ+ypwfYB2Q9HFJ1i6Ej+X+gqcLFc1BjkuY+Rlbyh1hi3COfHKi3wSlmsb+HStbLV+GtvYzsY0/iXuKr2zEE3yXDcr6ssE0qsdQwkeS4HLViK6HkqcfJd1+CMOBpZePsYZtx3Dt/cMTdtqwjJjbeSuRY+mCr2A6HPw3BHCn2r6ldXDZnxebfxMkqvKuzX5G5y/WrI+Wx8VNumy8qVvQjTqWIs4AOpBY8D1cOFZK+Neu7Q7N5nj2adKvU0/6RHfc45mTv8ACsM8zJNjoqkPHC4I9N2Js5BAZWsNCRQvGuagzZMjtXVQbJkwomMWvwF7+yt7okjmJuSnZmG2WmTk/E6wxvKsaasxUEqo82awrFxk0+pxKD213n8xnNt+7Ysm17nCbZG35Q6JgNTcA/iGnEVmy0tXU6+PHTKoq9TRzuWHNEBHIvUR8AZSb0fqqDI/Gsv5SJyZYhoVOv5gLLSuZrph0HsPHd7MrXU8PZTKpszZbKuhPY+P0qOoWaxN9TWuqg59nLG5SUViQLc70SBaMi+qcGiyqhd2sAgvzI5UpuGa6VmpSMv6fbW+a24AyLKvSZ8iF+m9+XVbn4U120G46puO4FvHa245OOsuzQhNtxbxSQT2YSX1aQA2t5kCtGPDpLNNc1K5IZn3e3Z/y22bfvGWSkRbLM0bgMiw4eOZXudSLHpsfGm0r0QPnOvTsZFPt8mzZWPmYzmOIyBmkXhFIx0PCxF9D41q+dQzzVf+u3LoWd8eHDOHvO3oYcP10M8C3/YnyD0SqvgjfiHhXLs3aU94/DY6dHDTW359DtD6PZoGyxwdRMRC2Ukn4guulP8ADcVSOX9RqvUZqQXQE8SLmuscZs86fZ9tQox/dIdGsNK8lZanvcbkrO0btJ2t3fte+Rt0DGyE9Y+MMh6XH2Gm4L8bJl+ThWXG6+w7C3iVMrbYsmI3ilVXQ8bgi9enzfLJ4HDpaHuVu3wH2G9cc6hj/dm148u8PI6XJBBP21K4Kvcr17V0IZdpxeUd/dTfQp2KfkWFf0rFB/ywKno07FevccXbsW+kVX6NexPXsOrt+Pf/ACxar9KvYF57n2ViQQ4eTOI9Y4nZbceqxt/GgvjoqtsLHlvayXtOXd5xH2/dcg4y3jyZ8iMFbtdoJI4Rc8Lix053rm3Sdfcz2uHLN0l1qUnKeTY9/wBg3ND1JNDklix6er0sllAI91bKJXw3Xay/Axu7p5FH0hr7ZOvOx/pltOZ23gjPQzB1E12/N6gJJsfJivsrDjbgLy3FmoLnhfT/ALX2hvmMLboo5yepntf4iLFhfnYAeymS+piVo2Rce1sNI2mlsNSEtbWw1osOtgcjcFk3NSYVjXwJIHhW2+qgy4nrqApih8Z1sD1rZxw/h56il1TiCX3kxX6jfTzc993JNyxGPzGIkjRn8BAAJSNOix+JrAnypey1NFLKVZOLLqUpth+qMKKuHk5iwys4hhdx6kaxOyKSLfnCm4v+aq9LF2Nf6vMtrFo7Y+le952Rg7r3JuufuONlYyST4mRM6jGmkW7xlVZfwn8PhVtUW1ELXkZd3dm27PscW3wRwR3McahVvqQBy1plKpGO+R2ZMSxIicPitVuqFogMxtWBAPlSXBpqZz3enzksS2v0yqptx14G/wBlIalm7DotQ3uLY9ix+1sSHcclYUkyUny5JOFh+b4dbjlXQx46wpMeG+T1G0phaBDFcjZ8fZ9mb0dqnFm3KeIBgg4tEpFz1cr1ptZRFQa4Wr876vokzCP+odtu2ztbF7exuqEbnNBs+3QFuvJXGeZZ8vJkYfnlWJUKj8K1eDS09hnl8r4naz1s0p/gv/FT7zHt3xcePK3WCX49uOTJHN0WJAl6rhb/AKStBWeKfU5d7fFD21+8GWCX5Gfa3brkMALXIPqmFlIYW52sffWTLpbkjfhfwpdjbuzPqTJ2xtkEEiF7dD8LsAVCgX91L8bK4gvzfE53di1P9f26m/YcBSQTbTjaui87OXX6c2Nf/wChT/5eTj08OdD+oYz/ABjLnuYujchzri3R3cT0M/39EdCDre6k+RpSN9VJ0p9MO5P+ZPpthNM4bNwB8pkeN4tAfeK9Hjvzxe1HifMw+l5LXR7EygJSsSCM87mGOm4dUjBeokLci5PgBzrTTsIvueYHbG+bgOvD2vIeM8JJIzCv2ydNPVG+gpsM/wCQu4uu0kEMPj1yg/wBqOjQdatnr9lZyLdsnFB8CWv/AAodEM9KwhO1crr9P5rGDctX/soeSmC3gtuC9wdsZuDsmdmmeGRYY+rpRWJNyF528aDyIWO3uHeLifqr3nMPe/bmdtaYkvSTHj9xbtgyOisB1IzyMpJP6iLVybQq2nuemwaXo/6V+BjvfWMZOzdn3fEkVpcHLy09VdVMZbqAB9o+2tvg2Xq2xvayQP1KeFb1/lbO/e0c6HP2HadwhI9HOwsbJisNAskSsALe2ufWvFx2JkbulbuWCSNSjEDlR2TgyJakvsGN0QqWFmYkn+VOwUFZmSG4SAMp46Wt5Vqy2EY11E4QXUjUHiKuqJdiM3BU2kUDr/0vVWpANWwaKBCw6kHVzNhalJSHxD4ceO9yALG9/bTFUFj0pSMWGlW4RKpsi8rKF7A0l2HqkFb3CYr1FeOtJY+qK7PCJpdRr1q45HS1Ukg7PQsMvZe0b6sOZvqyzpjlfSww3TAyqbhmX28a6GHHO5lp5N6OKBG8TQBgk46fRgZolClY1jXRfiAsLW/nW6FXYPBR5H8KmWfn73H3o31Q+tGDDiyNJ25srZZgblII43aWYXto/SoW/wCUCpfH6WBvraPxEeV5S8jyq0o/gxT9r62/IVM0eU2dPKC4yWkdbkAF3DnQf7VZ1WEkYrObN+0c2iFslNthj+B0wpL6fl9QLob1gytHRwdCyQQSNiwodCqhSDxv5+w0nBSTT5fk1xasXk4+olYC0gB8tP8AXWzhBy8f1Kj2BehPAcfCg4s3f5Gh0nuWQjRk9WpGlYbo24yhbsWlYjhrWbqdBJwXr6J9wybRu+XsczWwtyTqUHgJl0/hW7xMvBtdGcf6v4yuldbo33FjLkRg2/vDW3nW+tWzhtN6kzgbXsm2yHN+WjfMb8WVIA8nuLXsPZXRxVpj1MV62s4Qrc+44okPpanhpxocnlQNw+I+pSNy37Im6mLG44a1y8nlWZ2cfj1RA5O6TX0JPPU391YHlbNKwoGXc5fUJZiCRp5e+orslsaCt83hJu2c+AEF5ICCDqG6SG+3StF83/U0IxYWsqZgf1IyoMrtTuBvT+OPvXLyYplW2mdNFICdTawYist78uSXVt/vOtix8XSf9qX7jnvCijzNt3TY3RHZMkT46W1tMCHBXhZiOPjTr2jhkXTQbxV+dH30Ou/oLuP9T+kXZuRcLLjYY26fyfBkaCx8CAtH5Gma3vkw4P7ST3SNZhAlZIj8IYjqPsqqfEJuy2YuNBFEOhx1WOhNdPHjSRzr3bYBlIzBivPRTyoXSQq21noRuNkvjZTRMfh/trK7Q4NDqnEE76okTqB18DT1qI4wNSKvT1AceNU0kNqCyZfRw0FLbgcsYxJkvMLMbHlQasvikAZA42bUcaB1RJK9nSFiTqOI+ylsbXYrW+b9B27tmXu2QrSJjRs6wp+OVwPhRb8yaOikpruZ7sP/AFh9vYs2P233ptOZgdyfCj/02OPMwCHHwm8kkTpp+JehhzvXTxY78OS1RiyWwLLwcp/d+32GW/Xn/qF3rfdvTtTtfbJe3e39zwcbLORkStJm5G35kYdSgj6xEkwbUmQtbT4Rod9MbrDe4i3n1VPTxuX/ADXemnZJbdp+4yX6XbS2Jt++b8V+LIX+lYMuobqaz5BQXF+lekXv40jy78or9pk8SlaK1l7l+P8AoWWRXggihgRiriXJkJ/EZJX6UQFteJsKyO0JsbWqbSJXZsedMvOgUWiwocPDhtY3YkvJr/GubdzVd9Ts1Sqki5Nguqeoi2C+616Vgy8WL8zx/VUDo2sZECMSOpTYj21d/JaZn8b6VjW59/Q4vCk/qmdb/G4exp+TuCyQ8tKbZyNVSDYLkMzn8I16uVZ4NaZof0+7GObNj9xbgrw4EbepgRfhbIYadR5iL/3vZWjFSHLMPk+RK4r7Tao8n5dLLqTxNdFZIWhx/TnQbmznK87cAPOgtmbCWKCOkdph1XPQSdSLcPbSHdsaoQBPjgk6kjjrSmg5IjIxWBJt76zusDVYCEbg9XHyqi3ZAG4IXxZYQfiZWsBxqrKUw6OLIyjvrGkyu2e5saKPqGd8lvEFlH4oo1jkANxr+2CR40utoZuW9e6OfM6CXb92x9yGuLlK2PNY26gT6hI8CGBK10KNWxOvVaoRm0y8u6hnTH/TfuAn7b3rZW6RNibgM9UFh1JnJZiFvoC0TH30mzbsvcBZJKUbtH0i12s51Wm00RkyI+fN3J1aGKT0telZrdai/ioK3+2tdLt6MRxW7PMQdy7fkE7lkQ7rtkqho3xoGgy45f0sjO6OpHBh0kUy1XXVMGaX20f3B+HtOZLNLn5S+l1raHH6gXVeZcjmaB4tNSnlSaQbC0kYII1H20NZQ1pMTJO4XTnTGy1UAlJsb0puTQhJkACk6EDU1SF2BZ51K2UXJ4kUNmBEEDmAkkkWAvzpbHVMl+pe8xYuFJFIeqONesrqbvewHDxo66Jg23Rwq2Rm7l3Dm5xkMe4SSZMnUrBOlFBVhcnj06LXpdKY0ltoeVs3ku299YNd+p2ytmdpfS7uJPlJcvN7bxNpiiwoZ1knmwgqwsZJGZZehZhjyOnT0SRunT8IY1ktM9pBw1anT9uhJZWzx9vYeJ2wo64Noi9PNyI9Q+TIS8wU8yzkr7DXGrd2bs+r0Oy68Kqi6LUcw8BpTJuGQCYsJ4wEA/zMoG8cQNvy8WHhSs1uKjuacFE3JYu3cCZJJY5D6s8k6vNbX9wkXA8lF6wNQh2W3LIqrtJZo5oZmkQD4SxAI4GxrK62R0aZq6jJDwysEPwNr9lW4shVnA/1nx5UuA/UZb5UxEiI6uA1rYxqLN2F2cm/hd23OIjt6F7QQHQ5kim1vH01P4jz4eNUkJz5Y0W5tMQJNiAOlQqgCyqoFgABwAFPOdoh7oJsCLjyo1WQUz30Ha4I+G9/A6U1UBk9bELgAjQ8edHwFu4JkYjcLXNU6F1yEbNisSRY2Oh8NKz2xsd6iA2xeknSwpfAp3ki8rE+BmUEW4nz4j7KjoEsjkom/bJ6qZG3zdQxn65sFwbBepbyQnwuw6l9prLfHCOlivMPrP8A8HNGTt43CBhIVWLA3LIjYoPiKn99F+K1x8fTen0cfEuqG5ZT16mg/QHcm2f6g4u19XTi9wbZk4bK545GE4nhN78TacfZTm06PuY7KMjXQ6pOXHH1ADVAS3sAvelVt0FNP945tudjZWK3y7xySMbv1HpK+evKtlKOCZcFlbVaE7jzkxL02fpAUujdY+7hRqaqDLeiTlh0GUhHSTrztV1uJdQXKQElgbC9tKFo0Y2AnqIOtAx6BZGv+KlyHINI3UpUmo2VuCL1MxHBV51VNSrwkQu9zxwo7XtYEnWqZKHOn1B3OO+4bnmOBt204826ZgJszhB6UEaHkzyuoFOpR2sqdyr3VU7vapyFh4zLiHOka80rtGkbAksEXqZieYJ0r0l7KUjzFaN05PqdjdubBj430A7EzN87h27fN02Pc5987Uw9vkfIkxcLMgMc2PlBgPT9GYBrDnpWTzLpUdVvb9mbfCwp25PavX29Px+4oC4mdu2QuNilZMjIYlJJB1Xdbu0j+S6n7K5PJKPYdG1O+rZYRjYeJt+OMIF9txA/yksoJeaWNumXIb/FIGt5C1YbXbtPY0RxrHV/gt/yJjbNvbEw19AkSFQWY8Szak+21JyZEtx2HC7TZdfwR4uM2K1zwJvpwofUrZCPTdLEiiJJZrXvWVto6yrKFfLfxq+Qrgy49p9sN3fuJimZ02nF6Wz5U0JB4RL/AHn+4a+FdB7gO/Fe03eCKOCOKGCMRQRIIoIY9ESNRYKvsqIw92SUEYVQdAOAFOqJswuNRbyrTVCWwlOgKQ9qfWBbbPGmiQWHI0coGGR+TkIOHGgdwlUF6lkF/wAopcltQNtAsg6fDnVcZB5wR+TiKATzHEe01ToFW5X83blnQoFv0sbg89Kz3pKY+uRpnOWb2mu04Hb28pE0ke842a2RBr/4nEy2jfUafFDIZBfW61hrVaM717za9H0KFHuOV2Y2y9yRJ15+zZCZsyjiWxJv3Y7eDorL762042tC6mBLds7N3aI7jt02XtOUEgyoPXw5iOpHimQSRs1tbFTypOJfGTFeGp1McGb9Tu393w4UTBz9ieZRu+PZo5I8fquZMVmuQbasDeuxXHVPU7vkePltjV8NVZ9nJoe2dwZIg+f2uV0ZUknSJipSWOI2cOLggnlUtibPM2863Lhmxv2wnK9zLdsnee3btKMaaRMLduhZGw5HQFkYXBUg2NZ7Y32KapZcsb5L3OftXQsbZIZFMZ6l4G2t9L0pvSSqaboGMoIaw5Xpbcj4BJWuunGgJIPIvUwC1TKTg+fpgjI5871qrWKme1psUPuzOhjx5ndgFN762Nhp9ppNnqbcS6nHH1b3LO33c49lwY5cjFeWPKysfER55nVbpEjIgJIJJ6B+rXlW/wAOKt2s0pWkmDz03VVSnWXHb2oz7f8AtveNj3Ndi3RGi3bESJZsBJEZsVJx1RwMRosi3vJfhW+mat1y6fl1/Iw3xWo4XzLdfw95rWw4eBs22Ym0wx+jtior7hJjG0+4TsfhiRgLkF7cNLA864Tu72d3q2dmuLiuFdt37bF42Xt7Inmw9jxCmPuG7MJc3NB+DDwkfodVC69N9B+px5Uu7a3Qfp67Be77Vn7dkwYmTihMCcmPDyEBXH+WhcrAiFr2LheqzanjQ1S3XQ5We96Pi/mu/wByW3+obFDlwOoZSVIveudd1tJ6PCsmKiTDJIUlS7ADyrOtBrrWyljPSkAFuFMiSWtWuw78wnjyouAj9Qjo3t/YsTt3aYNow/jSH4pp2FnmmYfHI1uZ4DwXSt3U5zbepNQr1WJ9vlTEgWw5GK6cqYjOx0yAC/CnyDAO+SAbg6DiKnMNUkEky2Nxe45Ghdy+INJPfnc1XMtVPUPSeu+pt/oKNMXYJ9YIoYnlTUJakYll61bQXPHxomylUCSJGmFwdLt5c+NLa39xduhQty7Yj3D6fpjvGxyNvaTLh6B8RIlYsANdek6+NYK45xJnStm/72+ltDmvufEfOzRglf3YZZY5BYr1qVDIfdz8zS3aHJrxpt6m1fQ7uhd47Z3Hs6d+rP7VaBY7t1O+3bjEciH3wyepD5KEFMVWq1v3/MW3GTbQv0MuK5OJnY4ldCepQNTxHHwtXYw3raup06u1VNGevtPbRJyQGiUkgoAR125HhYU7jQa/P8iOL19o2O3e184rE22wmAtfUEsADcXPE6GhvkqtzLk8jMtW9fcXKCDFx444cNTHBGqoqXJ0Uaca5t0rPQ4rnqLLKqkAamgegaGJJI0F+dRwRJsDfIVQWBt4k1VQmiD3beQSYYm6ntZiOAq73Dx4dZKH3Hh5e64smPj5Hy+TMCq5BQS9APFlVtOq34bggHkaTzg2pQtCLwOx9l2raMzasDbZM6bc0KZRaYw5GRIQQHny1IdLCwDJ+ED4QKC2W1mn22AVa1Tjr+9mS9y/TfbdiyMyPbFxcvdNkxYZ+4TChiwsT1pLQweoweSXNlv0qWJeTia0+rkv8237fcKpjpjUVUN9P4svHb/YGRAzb3vEaxbgkY6cdkLJtmMQAidLHXKkFkVAPgUknWsrs502GJpfwNE7e7OTavmMzJhVM3cAvrJYFosdL+jiqeSoDr4km9Ls+TK5pllkxYDizYGZBHkYWQQ2TjyrdH6RZfYVHAjhyqlfjuJtRWiSp7n2oMNTPg9U+3c1c9U2OTwDfqXwYVh8nC6/HTVHd8Tysd16WTSy29pUcrDkhyiLfttwpVLTWTHlo63iPcNPilyVK1ox7iM9YPP6cfD7q0GHidPwqTbp4cgfD21qrUU2FKAo0HtpiAkVcXGtWmA0Imkspvy040clpAMkoUmhbHJAskxPl4VRcCA9za3hURGguMoFF+PhT0zNbcann6Yz08xYUXIlFqNxM0iXPvoky7pJnoBiJkHNTcE6WUXoW4lgLUB3DOxu3+1dz37MtJhbdt+RmTpzYxoxRdRYdTFRQUhUSJx5XjuziuHehuudt+5Tr0yZ2O+cCtvxi7m5sLghOk248awZKcZT6HcpZO2nUlPovvOV2/8AVmbNlHTgbi42bcYT8JWHIKQRsb6XSaOJ7+F/GnK69Oq/buHbDyVn21Ovptow8wKZkKseIU9LA24XB4j21SprKMVM16oZPaGK6/tZUqFbEBir3+0XrUuT6jP1uRBuD2++Lp1lz431NDws9zPk8h23ZIrH6emtFtsJeoLkZAUHpOtKbGVRCZm4BQSxsB40l2NVKaEJk7s84KQax/qP8qrkNeIC6L/EwI8B5+dSSwCQCfMCgnpi1bkLtpagbL6H2dJv2R07X2yExc2cFH3rIAaLDDD/ADI4ypDuPy351SWoDVUpYrZfpjixQYuGZsqLYsGZ8nGxpGtl52fKLT7nmSgs3qScIVv+2OFq2WTutTG/IS13sy9xbJCiQwxQhMTHI6IksF6uJdr6sSfGg9Mz+q9Q98JWIJF7G49tA6ErcAycQLfS6/YbmkWRprYi5Q2PKGiGh+EjkRzuOdArcHJqaVkVTfdlSMfOYy/8MWtKnH0pG4C/6TyrL5Hj8Pjr8r+41483NcbfN09pFY0cIlCzL7Das7tClMpqzcNEv8tg+A4XoPUsX6Bs8QAUEGxHvr0NThvUdZha3jRFJDRPwheNjxqEYzLJ1fDe9udQiApOPHXzqDEJCFl0HvqFNnoUoQeIqgJkVc0aFsUsTPxW9uVNSB5QFx4ioASunOnpC3aRGRjlYJL8wVHM8KC+xdWZh9Y4Ny7h2jt/6X9vDq3juvMV8s9XTFBtW3kPLJIbiy9ZA87eNZ2tl2NmGK8722S095zjk7RgbZNu8mC5/oeyzNtO3ZMgKO0OCgaS9zYAh2f2Viy2dtt2zq0qlHsJnbO3MrbO5ZtxkQDE3DcPTRlHUA0TRTLZhpY2IBpDs/l7HQqlq+50VsncMkka4maScqIBfVYW6xxBP963GtWO0o5ebDGxaMbdYiQSRxtbnWpWMLrJJJnxkD4gRz506uQTbGMZm548akMwAFBa6Cpjs9io7p3AjsYsf9xvAcPtrM2b8eHvoV2aWedyZtSeQ4XpL1NtVoE40P4W5gaLwAqV0FXufZMigEodLaHkb+FELQzgY/U/U2pY9R87UJLOC6bHt17N0/6hWvDSWjl+RkLTDt6n4mHSo1AGldH0zmc0EfKRqNF0/jUdC1YZlxwLgDQ8qz2qOrYiciBnYi2lYr0NdLEFmYzC4tysDWSyOhjsmRfphHMUi3jkBV4yeKnkP5UVLax0Zd1s1uikbpPj7XuUuBlMFeOzxMdOqGQXVh7tDWS3gWTarsLv9Wx4nGTS34g39cxP+9Hhx5VX+PuK/wD0OA6BVrD2V1VoLPDIBxoiDRnsL+NSSnUHeT4rg2tpVSWlA0SXYC/vqyx6EG2ugqCrajjqNNPK9GkAtBSwknxFEtAbMNgiCrf76chNgrotxGlMQANP8d18SATyA8/ZVOICruUzFhyW3LuLvAxBckxf0nYIZ7oY9twwWMjkfh9ectLw/CorJZzqaVEKr2er95jGwdjT5PbO3R7tjCWPJi3KTcIpPjWfLzoWjUEn4iY43W3ma5+vKV0O0siUruS3Y+I2+drYyZsRjylxseGVeAWfHj9IsvtK3v8AbQ2rN2++oTyQkWnExisvS2hU6GmJdS72knxAXsRpINLcL1qTkxNjcqZSaJM63/Ly9xq2WrpAcuM8oPrM0nj1NQ8Q63S2BvQSIEAAHyqmhjbYn0QSOlb+3QAczQcScmezOirZjfwA4VAUgUKGA+EKo0RBwANDAZNbZgMeknQDXUUytZM+W+he9tijxcdS5ALfFfnblXSxxSpxMk2sFDcjI/QLBRwNT1ivS6h8BLopJ1FMq5FtQOekHNyNatpMksBydvZrspPG/wBtJtjkdW8EHnYgUdLL8R4XrnZaQb8V5K7mQlD1DQLzOutYnozorVQZP9YIvTwNv3yH4XxZvlMh+Xo5F2S/sdSP9qulgyuGjn+V4GPLDutUZR/V5v1jjbjWjlcwf4fCdueoAp8TWCTfAwz3NuVSWQQS1z91SWQbY3OvE8KtMguNPiueVGmQMhhsAWGlXIpsfWFSbHz4cKagXoOqnTYcjRJCm5CAAB5U1AtHjPxAOgFHIMDDFenqPBePvqMtEdns3y8sSIskko9NUfVT1i128hzpLqMqAHacWOPHxEBMGOSY1v8AF+EoST59V7+QpSxpDubmSJwe2sTanmXFQKkzPIYwPh6pGLE+031pTopkcskqBnM2wxP6iC6HXqoXQ0VySeRykGzA9QHDyq1oVZCZcn0zzseItpRlqgBNkBjZUI1tVajFWBAille4QhTxJqmW7ITPIkQ6bXYadPPWgtpsUlI1HiPL8cpsvJTxqkg3eA/C28STgkEniAaKtZF3vCLbjYqRKGb8KjW9a61SUnNvdtnsmY0pCr42AHKhvedAljgKgiIUMfxcSalRViXgcgDxp9bGeyC43Ol9AeNNQA+jFuIvyt5GnVYtoA3XFBTqCjq++kZsag0Yb6lNzYgAyte38+VcG9YZ2sVtDNu/tjG/9vZ+xk2bKVREw0tIkqyqftS1O8ZxkQ7yZ9CzW6RmX/onkeP+46/xN/m+Nem4o8V+pv36HVh1Nq82kelPCOQ40S0LE9BtrREG30FBYh6MmOMfE1hzPL/VSucFqrZI4SdUjTiRmEgW0bW6VK34DzvrWiuqM+SflCytuFudMTA3QtL6DyplQXoKNx5imgDLA+zXW1QsQwspuPh8asojsiTobh1a6UFhtFIKsoD+oQAx0YnQ2pSsOtXQKDLIAeV7j30zQVDGpY4ypD2PTyqMYpRFz4CEll0vxFKaG1swd9sZwDYa8ATQwH6h4m0Mouq63ufCi4Mp5ZYNlwSoOhHAubFVIvQMOjnYFgwQhLOpZubnWqSG2sHJhmYhiNBVNSA7IlMHHWJupheQ8B4CmVEZLyj3Oz0i6lvcngBV3vpBWPHOp9tqM3U73u2q+VKrqHlsTKGwsBceFPRjYbEoa3OnVQhh8MANr8KfVC2Fwt6cnxCwOg8KatAHqJzQGjNtfOpkcorGoZTNxjUFvCxrgZlqdrC9Cj73GI0Mp/ChDn/ZN6RV8Wn2OnRKya7onvkNy/SP8n0+HPxr1/5SfNof3lhYi3nXm6ntRNxYgn2HnRFCGlCnTWo2FBGZ+esMbMpueY8Kz5LDKY2yH7Wiz+5mffPlzLs8chTbEMwUyyxM0ckpS1mVWBVLtbibcKquOVIefLXG+K3NDhjeONFZQrAC4HLThWtKEczVs9NySOYqwoFRtbjTagMU7aA00EbYnS/4TVliSfhbThVwVBGZIvdhxpdhtCMduliDx09v31ng0rUISUAgk2/u1csqB5ZUc8brzo0wWNTdDGwIv99E2i0mIQaeNvGhWpbQ6VPSQRcHkKIVGoKcMXJa3WTfqtSmhqYoQRgaWPmaigjsNzTwwx2BUkc+FUy6psjJd0a5WK5AHLzqSPWONxvEgnyJut+HEXpUSFayS0LRjr6KDS5ptdjBdyw7HRiRfUmm1FWZIwIisQPeK0VEsk4QoXXTwrTVJiWeP1EjkBVNER9Kn7XmfGrfylp6lT3FCS3w8K4udanTxPQpO/x9WLOlrllIt7RWNo6uFw0Wn+tx/pH/AIHq5/5n216T1X/xPF+mv+cHss4XUj7K4swejSkElzVQm50qpGKhE5e9LEDY28OVA7Dq4mUDvXvKDZdnydwklPWqsmPF+aXIYEJGo5kn7BQ8eTN+PGk5Lt9IN0eHsHtvEyE9OeDAhhnU2+GVF6XHmCQWvzvTlaLONjjeRTldvuaDLmdaDo487UciK1g+EnUpNzejJZDoe4FMqxLPXkAXgdKZIKEB+okX0teikJnspCAk3NxrRSApIqSTquL2INZ7MfVAssiWIIv4X1NBI5A724rppz41QaQhZwnLidLVAuDPOm7Fi/sqBrQKhYKLdQ8zRpi7VHfWsujC/tq50B4jE+YgFgfiAtS3YJUZE5m5uAFQm44mhbk01xrqBpDPlfFIxa5uKm5bsq7Epi7YgXqA/Fy8xVwzNfITEOMIVBI91EkZ7WkNhQta4so/hVqoDYallN1FjRoSxxJ0SS1wT4GjVicdCSx5Qw1N7cBatNLCLVgelYMb0cgobkYleniKudC0is7oCHa2gFcrNudLFsUzeyTDIeB6T/CsT3OpiFfJ5P8A3g/+2/M8Pyf2134/9DyP/wBpIZOQygseHhXEPS1qVvctzZVboax141DXXHJnPeXfOH29tzZ2czS9d48bFQ2knl/SnO3i3KrrR2cI1OKoyztp95+oPcCbrvrh/SPTjYkdxDBHfVVHNvFjrWi1VTRC+emp1bsO3rjYWNFEAihOi3gRw+6kcZONa7lljgEqfC/DkfKpWrQLsiTx16uelOSF2sP26deQ+2jSEyNuSTz6RzppD5QLc71aINTuSvE1VnoHREXkPqABqeHtpG5pqgIl73005VUBpCD1sNND51YR4qMqi+vKoQWHCkDjrxqBQOEqoJ5n8tQkyBZGX0nQkL40PJja1kjpMmVyLcT4+FA9RsJD2PiySPeUfCftq0hd79idxMVekAC7X5U2tTDe5LJEsSgFRc1ohIztye6s3SLDzNJsEh66qtgbsOPhU5AwI9Ujnaqdg1Q+Ujja58RQyW0+gTFlOpBVuOv3a/xptbirVJGOQuCfvrTVyhLQ4xstzxoyoK7ubG5uNTXNy7mzDsUnex+zKDxsT9xrI0dSjgtH9Ll//ZfK/wCqvTemv+EHi/W/95KfuGfYNY2HMe2vOns6ooHcW+wYWPNk5MhTHiBLAfibwUeZNWlOhqTVVLOdMrdczvPfv6pmKUFmjx8cm4hjU26QOF+bGtTrwUC55G1/SvZFxPVkddRICNLfCRes7YrI9Df9usIlFrg2PvFWjlX1ZZMZI5FAYXatFdTO20EfLhR8PGmOpFY+9M8zU4kk9WO5IP4TVwXI2wdSbAW8quC0DT3sP0+BpdhldyLyVAbq5kWt5Uk01GkjCi9rg8Khcn3QguSNfuqFHjqG1JtobfyqBJjBAsLngOVQPkxDEkm4taoFAFPjtKwLE9I4AGgHUtARjYXQQQNRoKtVSF2vJK4+MFFzqW50aMtnBKYuNZlIHCm0M17BMkZJJY6AaUxgVYKRqAOfGk2GqTxnVRalMNIGknVbi+g4mgdhtUwZtxVSVY2HDpHGgdxnpvdBO35UQSOCE3jjHSLnqOnImix3kVko41LBitdCToK302MVkOubqbU2QSvbizFzeudl3NuPRFQ3RCx6CdSygD/EQP50lVlm6Yqy6fOx+P8A+v8AS4/lr1vH8DwMfmYjv+9wwRyyTSLEkYLySMbIqKLksfAV5StZZ9IrVGOPvEneu4OYJF/ooFsJgb+oTxkPLU6L5Vux4+G+4jLeaytgXaO2mxO7Dt7qAZemRF8OrRre+hzLSQcb+E3ztnAjxJugLZWiUa/qXjWFMXd6F82qXq/aP4kpiMd0WvCF1BIsa00MdtyRETcfGnLUAUsJJtbU0UFSOegFFzw+6rgkg0kJBJXhQtBpgeTEVBuL31pVkNoyMlXqOorOakwOTQ3v7aqQ0ht8gAdNxYaa1JQfADlnNzY8ed6sJIbR2Y3J+EcqgbH16nW/M8L86sBschiAJFrkVUC22Gxx25aeNQFhcKm9iNKKouxJxArG3pkdVvhJ4Cn1M9kJnY25Ei2ovY+znUsyLcBZ+k/Fp4Uh2NCAp8lVubm3hpSbPQbVEFuu8Y+34mRlZDiOCBGlnkbgqKLkm33DmaQbKYypbWe5O5wmSUO2bVPaVOsBsqRG4dQBtFca21b2VTrA55q123NL2fbRhwqg5AC54m3ia0YqHNy5OTLJCll6hx5Ct9VCMLeoshiCDVsplf3EBSddTcWrFdam2mxTt/yEwMLJ3GYgRYcT5L3/AEwD1D/7tTEviQ+7ij9zM8/9XY/0j/M/qPH8vhXo/UZ4jT7igbznf8zwZWLjWlxSCkydWki/mW/hXEw49Z7H0HL/ALe5ROzMOTtLfJNnkLNtr/8AE4XXqViY8B5KaflyKznqZsWN1XCdOnsNnzcSOWTbu4MWJv8AhyEmlIABVjrrxpWRcqyh2PHEpmi4IASOZdbnq9zVzeoi3Yl4JTBuEDcEl+Enz5UxPUW6yi/bevwLzBF62URzLbk3DH1AaXHhWlKBTY+IBbSiBk9MSkD+FXBUjMkQI/lQtBpkfkxCxHI0uyHVZB5I6SQePKsdtzXTUhcuVR1WP4edIbNdatMip8u170MmjiMJOJW9nKnVYDUElj3vZB5mrkQ2HxR6XJ+I8akgSwhIQDdRe2pPjRFBECsFBbieN9KopseVbEA0dRLJFCOkHhTqiWBZUyo2pvypV7DaVIPN3FUBswHtrPJqpSSs7nvjQQtlSdKQ/h6pXWNS36VLsLn3UXpXvsh/LFT5mQeTtW6b1v8ABtu6Ki7RhCDLy40frM2Q4MkcT20CpozDW5tVPE8b1epK+XW9PgNNwcVVVT0/F4871apJkdiwY2OvSpXXxvWulUZ7WDpFSNVHjyp70EV1B5G0umopdtgyAztWJOlZLGyuxTO7oYpe3t0SYdUUkBikU/plZYyPf1U7BVNyV5F+OK3uM5/5J2j/APrfmOHL+yuvKPK8DMfp+s2Ox2/JT942MmMRxKixZW5g2vXO22Pf+pWy9pdN/wC1I1xsfeYo7z4LmXo49cLaOnvB+2l3QrHEwXvsHETccfP2HIy4I43RGwI5VuJFYfC3V+VbaE+NaPForJpiPLy2rWtqrbdh2MzYE0m3ZDKJ8RhFIAQwFuGo5EVzM+NVvAVXz1JD5ixRW4Kysp8PZSNZC49jTdnl68ZG8QK6WPY4uRQ2WXFtY348q1V1M1gtIbi44k/dTVUVIowEHUWHKr4lSMyRi9jrQOoaZG5fSAwt8QpbQ6rKzuH4y3IisGXc6GIq2cwQEXt4isTOnRSVfcdwjicrfX+ZoVqa6101CNulkcBuJbStNawY8rLFiL1EfERarM1tSYgQkAtVoBhkcYXiLVYptjnSb3IqFClQs1zy++mUIx2RisQo24FEDumV0KbanlWe2ppx1Kjn5piUWZfXkboUuLhTx4eNbvG8db2Rj8vzeHw13M/3zDGTDiyZHXkZCyllnmPqP1hr6E/hFuQrp1haI4V3a+tnJqXbeKzj5p9ZpQsjnjxAUD7BXFy/Mz0eB8caRd8ZYza+h8POqqimyaxVUgBhYDnWuiQix5mdCygA9XnVWZdECzMFQ9P4eZpbDWpXcuT4rnSx18xWRvU2pFa7h2bfO5Nqk2jt7HGRueRkYpZXboQY6SdUrE+Vlrf4lZehl85xjJP/ANLO8f0Y3/235P8AGfx/ZXT9Bnm5fc5C2LuGLNw8bIRvl91xyHhf9RGhVvI1zOp7R01lbGp7f3bDu+D6Lp0zrpLFppbjSnuaMeOXKDO18mTb8z+nySehKgZ9vyFsx9J+KNfQ2PAUt2tRygM9I9xJT7YNr3DI3OPKkypdwKvlSzEEXUWHSBwAA4VktZ2cslcrutehI42cHVbnhprzFLYcGqdrZPr4ELsQbqLe6t+BnFz11Lnjmx6VPEAmt1TE9iThJ0HKtNTOwghSOk8KOABqVFVbjgKFoOrIjLAsbgdNZraDqPUq25CwJXQeJrnZjpYilbrIFDk6mxNzWFnZxamf5EjZOWxN/TBsCPHjenYqaSOyWjQs23yIkCFjZudNbMFviLLtsokABOnEnxpci7IsMS9SE8PDxokKbCo1Kr/PnRC5HCrHTl41YEj8UWl+fhTqoW7DWUoCWq2ikysbmnqSLGOZAJ9ppdKSzVSxzV3R3lvcHdG4F4JE2xdwlMZN7+hE5jSw9gFdJZUtDg58Nndssw742TOwo7Dokim6z1C2gFOVkzJaUja+1gjbXiTDQSQxuL8wwvp9tcm2tmeiWlV7i1YqG3gRRpANkwi2HVccOAp9QGwKZD6pJPDlS3uGnoMZUhCdJP2UNthlUQWYSDrxtWN7mtEx2FmRYW7Zc8wuDj+mD4FnB/8Ahrs/TXDZg+oY3eqS7/maR/VsX9Y8eNdzkjh/prH5X7fEIZA0WjKeq17XvxFeT5dT2itqWzacxMW8zOidbANKzdJJPAEHTSnt1vX2jKX4vQ0zfcbbsTZYt82+WSOXCjEjvkOOqWXS4VRwFtBam5KU9MCtslrPkgvbN+i3PDjMmgkUNY8VuL291cZoKICn6onBja6jgaAiZpHYG4ifD6Cfiichh5Gx4e+tOF6mDyq9UafhSj4Te9xrXRqcuyJuCQECw9taasy2Q6XTjemgDU0nw2B08KpstIh8yUWItqeNZbbmmiK3uja3/LrWHKjoYTPO4Zy0Tqp1I4+XOsHGXB2cT4qSrxKIkJ6QVtqa1pQoFXtyYLPu7Y/QoNk6rfbVWRdEXft3JMyIwOltaQkBkRdcQ9YW41HO9NRhuHohYg3tTeIlseSKx6eNXxBkLCdAvblWmtRMgOYunUD7qFoOpWs1fjY8DY2qUWoclI3DtjbtyuZoVZm1NwOJoXWW9RLs5KtnfTfbnBihTo9Q9LLbQjwqq2snoBalbLY1/YIFx8LFxVFlhhSIDyjAAoFua24SRasVdbD76ckKZIx3tqKdUWwaUAsSePOl23DTI+dRfTiaVYfUhcwElrjgazdTUtiW7Mh9efPuL9MSi3tY/wBldn6fXczeXaILF8h5njXUgx8j82MGQrIA1weYNeXZ3ZLDH6cg1AYHkaDYvYl45PnYVxcqRpIoyCkbEsoI4aGq5NhaomcSeXHsyn/FbxoGiVLFhbuWAEhBHnQ8Qi79l7osO5emrALOBx/UvKiroxGavJGz4WYHRCDyrfSxyLImYs0hbg1qqzPZDxy9Oq/up0iuIych21voaC1gqoCyZSSaQzTVFc3aYGJlJsVBtasmXY1Yl8RmO/5ojiYXtLkN0RLfUIhu7e82H21nx1e507PZFamyv27KfG96dBIgr+UZJT0k2F7g0arISZpPY0vXjIrcVuCT4isjr8RMr0NGxCAoN+NGjn3ZKQk3typ5mtqGY/Szfxo6oBhDg9JJ/DyFPgU2BZAX0yT7qphFayT6s78OkA0NOozZEIES/wDp40hvUpqT4x3cEePCrkDiT+0fCtjx4UK3HvYtEABFv4cKehNgxW6RblTUCCyqOs8aXZBLQAyIyADwPhSbDqshM1tSD9tZuprWwV2xm5mG2T8pC08krIjBBchbnU+Vdv6e9GI8pVcSXf0tz/QOHqe/9NdY5/Knc/ObPxdvklMuHMoYcVJtevIJndlj2PE3QDxI4gcKsvkPpkvjSX/L99VA2rkPXdGChlNxzFCkR6BeNvmO9lDdL8LE21q4IiwbXvr4s8U0b/HEwcC/Hp5e+hgLfQ6B7c7gg3HDhy8dwySKDbmDzHuNPpY5mXG0W3Hz0e9za3AVsq9DA6NsMjy4mHToPbTEyPGJOZHY2IBHDWo2VWmoFl5Q6SVPHQUtsfWupUN+3GKIM0sgWNQetidBWa2ptxUa1Mn3LOfcc05VrKAEgRvyovAe08apJmtAsOLl57rBhxNM7GwVB1fbyFFBLXS3LVtf0/ZQs+7v0G9/loyCwHPqbgKlrquxiv5P+0lsTHh27epsbFQQ4kqo8KXJtYWbXxrO+43HZ2o5LrhuDY3vbgBVoQ+xMQsSALE+zjTUhJJ462ub6NrrWiiFNi5W00NMFMjMzJURt5XBpd9BiRWmlUiVhzFvtoU4Uh22AhFGTcGx8KzgNsUIjcdPxeQBP8Kvi3sU7QTO3XRuk+Iv7fO9Fxh6jplFnxrjpvwNOQlhgKk3P4RxtTkCMyWMhKnQ+NLe5YFm3NyQOmkXHUK5uLBeenhWNG/GpLJ9MiDn7kun+ShH/brt/Tupy/qmlamidC/fXYOLJ+RStnsvWQD7K8zxR698uodibxvGCwCjrX9D3199T009iuT6Euu7TZADSRGNjqV40HCBiyLqODPsCSCAfdU4hc10HMUQZkyiQ6Ai4vY6VTTSCVi6xpt7xL6ZMMw0Dq1+HiKUmRvUsHand+R29l/LSTq2DMwBfUdDnnbhY86v3EcdTZNt7jZ7S36uAOtxrR1s+pWXxkTUO+KQTcanW/EHxpvMzvxoHTv2OhPqFRpoTzqO+gv9PaSNy+6sX0m+KxXhb4j7gKrloEsPHcp2bj9w90N+1jHF20H8eR+2X87HW1DIby1otHJI7f2Vt2OQ+4zvmy8egfBED/E1HeDNfyLPZFhix8bEXpw4lhjtbpjAB08bUrkKlvcdBYrbnVgkduUDExZcY/dgJ6ra3RuNUhuJ8SS23NDoCTY8jRqo26LHiyuWDA0+iM7ZK9baAm3mOFOEA0mR8IsdB+KqkL+Yr277iiHpVrfwpVmaKUJ7tLs4bxtf9Tz5GihyXPyqAatGunUfInhXQw+MrVm2xzfJzxbjXoWrG7F7dx7PJE0rD9RPGn18XGuhktnyPqS+LtGz4rIIMNBYjUqKcsdF0Eu1o3M0yOkb3uSKLKMqXpUcAAa4mT+5b3ndx/26+4mcY9SDmTwI5UVRbDo1u2poiSDyFVZxa5vxpbZfQi86djoNQKDIx+NEFmOCGuo14Vie5vxrUsf0wNs7dDa5EKD/ANuuz9O6nL+q7UNI6v412jhwflRFjhCR0+yvMHrNw7G275lgAoLedVMApQWXH2BAiiQDqIsAKW7AMXL26ktrpapMkTSFJ2nCtmsQ3lxq0FzfULj7f9NdA9vE1bmNCK+p8myQl7MGPkeFZ3JqqXTYt1m2xFx5iZIFA6T+YAcKumSNGaa2fUtbdwY6xByVvbQ34311p3pwOXFg2Pkzb9lrhYcqxXF5JnuQqjwA4mg5QxWXLWi2Ljte1Yu1xenAhd2N5J5LM7Hx8B7KF2k42TLbLq9CVKO4uTc0SRmldBgxSM/QqMx/ui9TjOyDVkg3H2feJ7enjNY6XcBRTK+Pkt/KA8tESkXaG7yauY4hzu160U8PJ1Yh+TTsHR9iSOQcjMAFuCKDT14Hewv9V2RBdzdqTdrxru2A7Ze0aDMUC8mOxP8AmWHGP+FVm8XhqjZ43ler8F9wXC3qMoLNZTwe/Ks1WaHj1JFt8w40JacWGpJNTkD6ViAzu7sSzrDJ1tw0FhQyaKeNYc7O2rJ723BsiYGLYMRwMzIH+9P/AHMZ5k/mPIVo8fE8lp6CfLyLDTivmZt65CQxpHCgjhQKkSLwVALBR7BXZPPKrYr5hjwN/GoXxFJI5YW43FWinsZlkEnftwTn8w5P21wsnzs7lP7aJnEB6fC1WhVg9W+EHhRi4B5ZFN9bmqYxETmWBFvzA1myMfiIDL0OnKsb3OhXYsf0ya25blbgYF+0Sf667H07qcv6rtU0i7+HOuycXQ/Mw4JVrjhXlWz1isSu27f6sg6TapIDLxt+1w9ChtWqpkWyQO0BiLJcDnTEhfKAmPZVK+B8TR8ZFWywKy8TDw8ctNOika6kCidNAa5dSuK6zT9OJBJksb26ENvtNI9Oz2RsplS3JnG2Dfsy3Rirjrb8crfyFMr4l31gn6ui2JOHsaQqDuG5LGf0xrp99PXid7APznskTOzbLtWyZHzGPPLPP09JvotEvGouoi/lZLaNFjj3Ak3VRVrDVCHYLTcj+YCnLHVCwmLcyp+BuknmKKUinUNi3PLY/C8h+2iTYHFB0GfuV/hZiPOjSsA6olIty3C2q/aaNJgaBMW45b3V+npa6spXqBB4hr0xSDxRSN++nsshfL7WmTHd7l9rnYrAx/8AlOP8v2MLeysWXxE9anVweaq6XUr7/wDUzPc8jcdtyZMDdcWTAy4xdoZxY9PiDwZf7wrmvG1ozu43jyKaPkWrsX6fTd2Qx75v8743bknxY0EJ6Z81VNr9X5Ir6X/Nyrbg8bn8Vtjn+Z9QWP4Mfzfgbhh42Ft+JDg4MSYmBjr0Q4sI6EQDwHnz5muooWlTzzs25erCA8YHM+dVIDsOLOgGlQEcTIHUDfmKtbgtGb5DH+v7kR/5hzf21xcq+M7eL+3X3E1ju3SNb+VEgbBnqBdTr/KrFsCnyAL2F15Uq1h1ayROVOX1X4TwArPa5rpUg82TpHxGzX1NZ29TbRaFm+mE6/1bcUva+N/CQf211/pr1+w5H1VfDX3mndY8eddw4Z+aSZcbRBwdOdePPYOsB2BuSxsOkFvdejhvYXZFv2veJGKgQva3G1OpjszNfJVbFnXLyp8f04IGR2/PJYD7K2Uw9zDzUjbY05iAzs7ojX8sZ6Nfadad6aQEyJij2WFh0o2Q/HX4hf2mjSgokcfNlUWx4FiHKw1qywtcnMbWWVgvhfpH9tQo9VnfReqRvAKWNUES2FtO7zkGLFYA8HfhaoqtlOyRYMPtXNl1nmAHhGL/AG3pqxNinlJfH7SgWzSuXHPW33Uz0l1F+qyQj2vbMQWIUEcCeNXxqiuVrDnze3RD4QOoVTuiQxB3RbERrfwsKH1C4E/Ozt+Femh5skHoyJhxNTlYoIj3B041XMgnOh2fehCu8YGNnLCbwjKhSUITxt1g2opTLVnXVOCUizYgEVAqRoAsaIAqqg4AAWAHsqcgB8Za+NXyLFfOKvFwPKpyKgUM0NwNWmSB6OXqIPnRwEkUfJdhv24KOAyGv56CuPm/u2Opi/tVJvDsDqbiogLEgSgXTnRAdSOyfTUnXjxpNoHVkiMmVTcIdfCst4NdEyEzSCpA0PhSHubakp9O8sx9yejeyzwyofaAG/8Ahro+DaLGH6nScc+01nrX7uqvQSeW5HDsPam0Yig5bw466XRNRXN9Ki6Qdl5bvrIR09v4fw4sXrMOYGhopqticbsfj3HIIAxcVIxyY6/dV8kBx1PfUzpNZpyt/wAosoqSHsF4mzZedIFhglyD4qCR9+lVBUrqWbbuyN0cAvAsXk5Fx7hTFVsW8iRYsXsOUi8+VYfpjUg/aaJYxbykzjdn7RjWaUNNIOJc3H2Uz00LeR9Cax8DbcdP24gLc6NVgCbMVJm4WKpFwPAChs0i0pA236WxGLH/ALTaClep2D4gzbhuOQSGksviOFU7We5fFJCOg3JlYuT9lCy1bQcFxYIqj7zVFSEr6p4g/wAKgAoKeGlXBBdlHE29lSCCvVQcNTVEHYxkS/5cZPtqyghMKdvxt0Cj4Mkj64sUOpYs1TiST5pYUNgNamhYlcwBuGnMVXIgZDuMa25eVErkKnI5l3nPlXUvMSPsFcrM5vb3nVx/2qk1jNpY8BwHnQojC+qUoSbKBwHjVtsDiROY7H/eAE+V6zXsaaIg8jcIYm6XkA8SbL/Gs7sba00kjZ9zxWuEmVhz6WUn7qW2OVR3tnco8TuPb5g1kaZUYeUnwfzrX41ouhXl4+WJm328vz/dXqZPEycNwY8mbL0RRPM7aARqWJ+yuam2d5It21fT7uHLCyvijFhPxdeQbHX+6NaJYmLeRFtw/ptAthm5xbxjhUIPcxpnpdxTyosm3do7DgEFcVZHXQtN+4fbrTVRIB3sydEeNCoVFCKPw9Oi/ZR6IXq9xp8+CKx61DcxQtkgGk3vGUm0mngPGhdycQR97b8MKEnxNU8gXEZfJzZx1M3Sp8+mhlsnEb+EEHqDMONtTQsLiFxRm/Wylm5E/CKophQjZjq1h4IL0YscWEDUgs3i2n3VCDgcL+lT5Cq5EgUqZM9hEhbXw5Vc2IFx7bkyA+tIsI8LXNWqMqR9dvwIjeSUyN+nhR8UVI+JMGPSGMX9l/41eiK1FfOE6KtqnIKBsySN+ahkoaZmPHTzqghFr8x7uNVxIJZCdEPU3hwNBBEMgkPY6W4iqDZDJMVz8krqFe1czJ8x1a1+AlxmLHck8Be/hS+RaxtkHuXd6pKcPFvkZTC/oxAEryu54KKU8vQ108bqyGkO87kSczN+WRhY4+IOAGusrC59wpL1HrjXZAx7bwTdmjMp43mdpG99zQuoz1+kA8vbcAuI4UW2vwC38KXwbGVz9wdNuycCVZo7syEOup5G9XV2q57F2yVunWYk0X/1Zzf/AOCH4P8AzH++/Xw+6up/lV2exxP8V/Utyn7bu4iRk2Xaj6PDSMID53axrpK/ZGN07skfme4HAPTFEDw6jdh4A0fK3UCKLY9B3A/DPmAMOPQKptlaI9KT88iV78CKqSjxo5mBBkcc/iJqSSBHy66F2J00I8ahB6DbpZLeljNIT+ZgTVwym0SUGwbmy3WMRKfCwt/Gr4sU7pBK9uMrXyJ1U8CT8XLzq+DJzHl23bse13MhHIAKKkJblOzZ6PQLBYYC1+GhNSV2JxY6sGQRoqxL4Na4q9SoPvlYrgyz9XiF41RB+JMZDeGFpPDqU8feKmhAkHNYWSDpHLQCiKgUuDuk5swUeTMf5VUMkoej7fzpLEyxKB5En+NFxZJCF7cl/wB5lqvsFXwZNR3/AJcj6dM7q9wFX6b7laiW7cI/BlAE8Orx91T033LkZk2HcY9YpI3Hhe38TQ8GXADPi7lD/nQEjmyAN/CqaaIASTAaMCreehoHZFwCy5vSCJPiReDj8Q9tWn3GqpDmSNMudkI6esHruLcK4/kOLHVwLlRIitxzMjOk+UwmvEDaWcgmw8E5e+sT1N9Eq6i8Pbo8dLQxhQdWYcWPixHGokVbJJJLjkW4VcGd2H0huCLAmrgHme+ioHS3A8fGpBfIElhBubW1sBVRIxWB/wCnjy4340PFDeYdJlzkAY+O6j8rsCbn2AV6Rs4EDUcbOScl3JPG5EajytVFMOhjxAAoeFR4aOf+0TUFNkhHt0M1uvLjhXzdeHsolVApsKTbNgjF58xJCPCRAPsvRRUjdh+NdljNsRYWI4WdSf41fwgtvqOrPKTaCNF9i3+82qSyj54s+QfE4Tw1sP7Kr4iQDnEHGSdf9plH86qGWK+VxQbSTw+QJDH3EmpBAgY0Xpj1J2aPitiqj3USILXGxb6GMtz65kH8TUgoLixk/L8sGsLWmQ/wNXBAxMSdrgywKvI+op191FoSUODbpSB6mbCL+Bv/ADouJbsh9dtQGzbgh8x0/wBtTi+4PL2Do23F55lz5OoH8avj7ScvYeNtu3dPx5TH/wDMAqcWEmzxMPbALGc2Gg/c++rgqRLYe0sT1TW8P3DVwWNnAwSCI8l15D471IJIycWSMfs5PUw/XqCPdQwyEXnyRBSm4RROvDrRlDffahtx6loqG6QIFaXAlDWveFzY+41nsuqNFH3Kx6zzu6yo8XDq6lIF/bXJ8lJvU7GDYOx4UIHRIvTy1ApCqkFazJCNNLhha/iKuBDsPdKrboIJ51ZUikJFwmq341CHrFibuLW4UDIweQgvYj30I2Tz0x+tePjULP/Z');
 var_dump($file, file_exists($file), filesize($file) > 0);
var_dump(!empty($path) && is_writable($path));
$this->picture->temp_path = ;  //pokus je
var_dump(filesize($this->picture->_stream));
// dodelat!"!!!
var_dump();
 var_dump($this);
        //var_dump($filename);
// asi ne fluent ale rovnou bool jestli se provedlo ci ne!!!!
//'data:image/png;base64,'.$hash
var_dump($values);
//var_dump($this, __DIR__);

      //$cesta = __DIR__.'/92.png';
      //var_dump($cesta);

      ///$a = file_get_contents($cesta);
      //$hash = base64_encode($a);
      //var_dump($i->getImage());
      //$image->getImageBlob()
      //var_dump($i->getImageBlob(), $format);
      //echo Html::img()->src('data:image/png;base64,'.$hash);
//$i = new Imagic;
        //var_dump($i);
// poupravit Form a dat moznost vkladat misto inputu obrazek! resp udelat dalsi novy element do Form!!!
//Core::isFill($_SESSION, 'last');//var_dump($_SESSION);
//$this->captcha->result;  //
 musi vracet posledni hodnotu .... nebo jinak!!!!
//var_dump($cap->getResult(), $_POST);
// nebo spis prehodnotit a udelat dalsi rule na overovani captcha kodu s tim ze nebude porovnavat aktualni hodnotu ale posldeni!!!!!! pac se po odeslani znovu vyrenderuje!!!!!!!
//pres session!!!!!!
//, 'value' => $cap->getResult()
 //udelat captcha kody'!!! enak a asi s imagicem!!!)
//->borderImage('black', 2, 1)
//->setImageColorSpace(Imagic::COLORSPACE_TRANSPARENT)
//->setFillColor('#0000ff')
          //->setFillColor('#ffffff')
//->setStrokeColor('black')
//->setStrokeWidth(1)
//$this->captcha->result = $res;
/*
          case 'setSubmit':
            //
          break;
*/
($send ?  : NULL);  // zapisovat jen tehdy kdyz se odesila!!!!!!!
$send = false
$f->isSendet()
var_dump($_SESSION);
  //echo $cap;
  //var_dump($cap);
// musi tu byt nejaky osetreni na vyjimky, treba captcha a preddefinovany submit nepotrebuje!
$cesta
//$cesta = __DIR__.'/../../goodflow_tokenizer/GIGI.TTF';
          case 'addCaptcha':
            //$captcha = Core::isFill($settings, 'captcha', NULL);
            //var_dump($captcha);
            // rozsirovat timto text!!!!!
            $element = $name;//self::span()->insertContent($captcha);
            $name = '';
          break;
  //->addCaptcha()
->insertContent($cap->render())
/*
      //before self
      $before_self_elem = Core::isFill($settings, 'before_self_elem');
      if (!empty($before_self_elem)) {
        $span[] = $before_self_elem;
      }
*/
var_dump($self_elem);
/*
      //after self
      $after_self_elem = Core::isFill($settings, 'after_self_elem');
      if (!empty($after_self_elem)) {
        $span[] = $after_self_elem;
      }
*/
//$span[] = self::span()->setText('koko');
//var_dump($this->captcha->configure);
var_dump($font_name, $font_color, $font_size);
// nacitat do promennych a zastavovat tam defgaultni hodnoty... aby se to je prepsalo...!!!
//pokud neni prazdny obrazek tak ho vlozi! resp se ho pokui nacist!
              //var_dump($this->picture);
// nejak udelat to nacteni?!
              //$this->readImage($files);
//var_dump($background_image);
/*
    public function getTextKerning() {
      //
    }
*/
/*
    public function getTextInterWordSpacing() {
      //6.4.7-8, -interword-spacing XX
    }
*/
// taky i urtcovat jeslotlive formaty!!!!
// radne domyslet a slusne usadit!!!
//$this->getIdentify($path); //nacteni identifikace
// doaplikovat!?!!!
/*
              if (empty($this->picture->_stream)) {
                $this->getTempFile();  //nacteni streamu, pokud neexistuje
              }
              // udelat nejak lip centralne!!!
              copy($files, $this->picture->_stream);
*/
// dodelat poradnou implementaci!
    public static function destroyTemp() {
      //pac temp se dokaze zaplnit i pri neuspesnem pokusu o vygeneorvani
      //kontrolovat dle data stari, max tak 24hodin stare mazat
/*
      $temp_path = $this->tempdir;
      $files = scandir($temp_path);
      if (!empty($files)) {
        foreach ($files as $file) {
          if ($file != '.' && $file != '..') {
            $path = sprintf('%s/%s', $temp_path, $file);
            //test jestli se zadarilo smazat
            unlink($path);
          }
        }
      }
*/
    }
//musi se volat az po nastaveni pathu!!!!
//var_dump($identifyexec);
// poradne otestovat na GIFu!! buguje!
//$a = exec(sprintf('identify -verbose %s', escapeshellarg($file)), $identify_verbose);
//var_dump($a); //, $identify_verbose
// domyslet jak nacitat parametry i do pole!!!!!
              //var_dump($row_strlen, $row);
mkdir hlds
cd hlds
wget http://www.cstrike-planet.com/dls/hldsupdatetool.bin
chmod +x hldsupdatetool.bin
./hldsupdatetool.bin
napsano: yes
chmod +x steam
./steam -command update -game cstrike -dir /home/server/dedicated/cs16
stahnulo a pak znova:

#cs 1.6: (http://www.cstrike-planet.com/tutorial/1-Linux-Install-CS-16/6)
(http://wiki.amxmodx.org/Category:Documentation_%28AMX_Mod_X%29)
(http://wiki.amxmodx.org/Commands_%28AMX_Mod_X%29)
(http://wiki.amxmodx.org/Installing_AMX_Mod_X_Manually)
(http://www.bailopan.net/csdm/)
$ ./steam -command update -game cstrike -dir /home/server/dedicated/cs16
spusteni:


$ cd ./dedicated/cs16/
$ ./hlds_run -game cstrike -autoupdate +maxplayers 20 +map de_aztec
map de_dust2


#cs czero:
$ ./steam -command update -game czero -dir /home/server/dedicated/cscz
$ cd ./dedicated/cscz/
$ ./hlds_run -game czero -autoupdate +maxplayers 20 +map de_aztec

#cs czero amx:
$ ./steam -command update -game czero -dir /home/server/dedicated/csczamx
$ cd dedicated/csczamx/
$ ./hlds_run -game czero -autoupdate +maxplayers 20 +map de_aztec
//meta list


#kf: (http://forums.tripwireinteractive.com/showthread.php?t=30638)
(http://forum.i3d.net/hlds-valve-windows-newsletter/68727-hlds-killing-floor-open-beta-update.html)
(http://forums.tripwireinteractive.com/showthread.php?t=30633)
(http://www.kf-wiki.com/wiki/How-to_Create_a_Dedicated_Server)
(http://forums.gameservers.com/viewtopic.php?f=32&t=38304)
(http://www.custwiki.cyberwurx.com/index.php/Killing_Floor_Web_Admin)

$ ./steam -command update -game killingfloor -dir /home/server/dedicated/kf
spusteni:
$ cd ./dedicated/kf/system/
$ ./ucc-bin server KF-BioticsLab.rom?game=KFmod.KFGameType?VACSecured=true?MaxPlayers=6
$ ./ucc-bin server KF-Manor.rom?game=KFmod.KFGameType?VACSecured=true?MaxPlayers=6
$ ./ucc-bin server KF-Manor.rom?game=KFmod.KFGameType?VACSecured=true?MaxPlayers=6?AdminName=Admin?AdminPassword=Pass
$ ./ucc-bin server

web admin: http://asus-server.local:8075/ServerAdmin/
    'DEBUG listcmd.Index
    'listcmd[listcmd.Index].Text = ""
  'Message("aho")
cd ~/dedicated/kf/system/ ; ./ucc-bin server
  'cont = "cd ~/dedicated/kf/system ; ./ucc-bin server"
  'cont = "cd ~/dedicated/kf/system ; pwd"

  'SHELL "ls -la /tmp" FOR READ
  'SHELL cont FOR READ
  'DEBUG proc.Id + 1
  'SHELL "pwd" FOR READ
  'SHELL "./ucc-bin server" FOR READ
  'DIM cont AS String
  'DIM proc AS Process
 //list($result['width'], $result['width']) = $split;
      var_dump($a);
// predelat na: identify -verbose %s a u GIFu si davat bacha na napr: Scene: 0 of 8
//pdf taky zpracovava cyklicky jako gif
//var_dump($identifyexec);

/*
        $size_split = preg_split('/x|\+/', $identifyexplode[1]);

        $this->picture->size = array ('width' => (int) $size_split[0],
                                      'height' => (int) $size_split[1]);
*/



/*
        $geometry_split = preg_split('/x|\+/', $identifyexplode[2]);
        $this->picture->geometry = array ('width' => (int) $geometry_split[0],
                                          'height' => (int) $geometry_split[1],
                                          'x' => (int) $geometry_split[2],
                                          'y' => (int) $geometry_split[3]);
*/
// nacteni sreamu?!
// pripadne overovat a nebo i spolupracovat s funkci: getimagesize()
//$this->picture->verbose = $identify_verbose;
//var_dump($ret);
//$signature = preg_grep('/signature\:/', $identify_verbose);
            //var_dump($signature);
            //$this->picture->signature =
            //var_dump($file);
            exit;var_dump($this->picture);
/*
    public function getImageSignature() {
      //
    }
*/
var_dump($this->picture);
/*
          if (!empty($identifyexec)) {

            $identifysubstr = mb_substr($identifyexec, $filestrlen + 1);
            $identifyexplode = explode(' ', $identifysubstr);

          } else {
            throw new ExceptionImagic('smazis se zase nacist/zpracovat neobrazkovy obrazek!');
          }
*/
// v ramci gifu naimplementovat i: getNumberImages() coz vraci poce obrazku v gifu!
nice
attractive
exciting
irresistible
count($this->picture->size)
DIM roz AS String[]
DIM pol AS String
DIM te AS String
  IF listcmd.Index > -1 THEN
    'DEBUG Subst("&1 &&", $cmd[listcmd.Index])
    te = "gnome-terminal"
    roz = Split($cmd[listcmd.Index], ";")
    FOR EACH pol IN roz
    'DEBUG pol
    te &= " -x '" & pol & "'"
    NEXT
    DEBUG te
'' dodelat detekci spusteni
'DEBUG $proc.Id, $proc.Id + 1
    'ps ax | grep 5415 | wc
    'SHELL Subst("ps -a | grep \"&1\"", $cmd[listcmd.Index]) WAIT TO aa
    'DEBUG ret
'$proc = SHELL Subst("gnome-terminal -x '&1'", $cmd[listcmd.Index]) FOR READ
    'TO ret
    'SHELL Subst("kill &1", ret) WAIT
    'ps -A -o pid,command | grep -v grep | grep cstrike |  awk '{ print $1 }'
    '$proc.Kill()'DIM ret AS String
    ' jinak!''$proc = DEBUG $proc.Id
    'SHELL Subst("kill &1", $proc.Id) WAIT
    'SHELL Subst("kill &1", $proc.Id + 1) WAIT
hgh$this->picture->anim_index + 1 < $this->picture->anim_count
//var_dump($this->picture->anim_count);
      //var_dump($this->picture);
// doimplememntovat podminky!!!
      //var_dump($this->picture->anim_index);
var_dump($values[0]);
    //public function setImageMatteColor($matte) {
      return $this->execConvert("-mattecolor '{$matte}'");
    }
$valuevar_dump($exp); return $value;
          //preg_
          //array_walk($data_explode, $func);
          //var_dump($data_explode);
          //var_dump(array_map($func, $data_explode));
          //var_dump(preg_replace('/count\=/', '', $data_explode));$val = $value;/*$value[] = $exp[1];*/
          /*$value[] = $exp[1];*/
// spravit a naiplementtovat rodelovani pole!
//$identifyexec =$identifyexec,
//var_dump($identify_data, count($ret));
// doaplikovat!!!!
//exit;
//exec(sprintf('identify -verbose %s', $file), $identify_verbose);
            //var_dump($identify_verbose);//count($ret);
$result = NULL;$identify_data =
var_dump($count, $ret);
//$row_strlen = $filestrlen + strlen(sprintf('[%s]', $index));
              //$subst = mb_substr($row, $row_strlen + 1);
              //$subst_explode = explode(' ', $subst);
array ('width' => (int) $split[0],
                    'height' => (int) $split[1],
                    'x' => (int) $split[2],
                    'y' => (int)
//0;//
    //parsovani size//$this->parseSize($subst_explode);
    private function parseSize($input) {
      $split = preg_split('/x|\+/', $input[1]);
      return array ('width' => (int) $split[0],
                    'height' => (int) $split[1]);
    }
var_dump($split);
$this->picture->delay = 0;  // uplne jinak! musi byt v poli
$this->picture->compress
//nema prijit oddelit?
$this->picture->delay = array();
var_dump($row);
var_dump($this->picture);
exit;
//$ret[0]
var_dump($base_data);
//$subst = mb_substr($ret[0], $filestrlen + 1);
//$subst_explode = explode(' ', $subst);
//$this->picture->format = $subst_explode[0];
//$this->picture->size = $this->parseSize($subst_explode);
//$this->picture->geometry = $this->parseGeometry($subst_explode);
//getimagesize($file)
// pozor musi se zadavat k jednotlivim obrazkum!!!! pri retezovem zpracovani!
//neaplikovano! zaimplementovat!!
if ($this->picture->animation) {
        $this->picture->quality[$this->picture->anim_index] = $quality;
      } else {

      }
($this->picture->animation ? $this->picture->compress[$this->picture->anim_index] : )
//quality a compress prehodnotit!!!!
    //int getCompression ( void )
    public function getCompression() {  //nastaveni typu komprese obrazku
      return $this->picture->compress;
    }

    //bool setCompression ( int $compression )
    public function setCompression($compression) {
      $this->picture->compress = $compression;
      return $this;
    }

/*
    //int getCompressionQuality ( void )
    public function getCompressionQuality() {
      return $this->picture->compress_quality;
    }

    //bool setCompressionQuality ( int $quality )
    public function setCompressionQuality($quality) {
      $this->picture->compress_quality = $quality;
      return $this;
    }
*/
    // prehodnotit tyto funkce???
  if (defined('NAMESPACE')) {
    if (!constant('NAMESPACE')) {
      //var_dump('huu');
      //namespace 'a';
      use classes\Imagic, classes\ImagicDraw;

    }
  }
//define("CONSTANT", "Hello world.");//namespace classes;
define('NAMESPACE', false);
/*
          case '':
          break;

          case '':
          break;
*/
, $image->getFormat()
.$image->getFormat()
    //public function getFormat($format) {
      return $this->obrazek->format;
    }

    //public function setFormat($format) {
      $this->obrazek->format = $format;
      return $this;
    }
    //public function getImageDepth() {
      $a = getimagesize($this->obrazek->stream);

      return $a["bits"];
    }

    //public function getImageSize() {
      return filesize($this->obrazek->stream);
    }
//var_dump($image->getImageMimeType());
//http://imagemagick.org/script/escape.php

// predelat na: identify -format "name=%f||format=%m||w=%w||h=%h||geometry=%Wx%H%X%Y||index=%p||delay=%T\n" 323_airlive.gif
//identify -format "name=%f||format=%m||w=%w||h=%h||geometry=%Wx%H%X%Y||index=%p||delay=%T||quality=%Q\n" 323_airlive.gif
//identify -format "name=%f||format=%m||w=%w||h=%h||geometry=%Wx%H%X%Y||index=%p||delay=%T||quality=%Q||compress=%C||dispose=%D||signature=%#\n" 323_airlive.gif
//identify -format "name=%f||format=%m||w=%w||h=%h||geometry=%Wx%H%X%Y||index=%p||delay=%T||quality=%Q||compress=%C||dispose=%D||signature=%#||%A\n" 323_airlive.gif
//identify -format "name=%f||format=%m||w=%w||h=%h||geometry=%Wx%H%X%Y||index=%p||delay=%T||quality=%Q||compress=%C||dispose=%D||signature=%#||transparent=%A||channel=%[channels]\n" nazev
//identify -format "name=%f||format=%m||w=%w||h=%h||geometry=%Wx%H%X%Y||index=%p||delay=%T||quality=%Q||compress=%C||dispose=%D||signature=%#||transparent=%A||channel=%[channels]||colorspace=%[colorspace]||depth=%z\n" 25909-bigthumbnail.jpg
//identify -format "name=%f||format=%m||w=%w||h=%h||geometry=%Wx%H%X%Y||index=%p||delay=%T||quality=%Q||compress=%C||dispose=%D||signature=%#||transparent=%A||channel=%[channels]||colorspace=%[colorspace]||depth=%z\n" 25909-bigthumbnail.jpg
//identify -format "name=%f||format=%m||w=%w||h=%h||geometry=%Wx%H%X%Y||delay=%T||quality=%Q||compress=%C||dispose=%D||signature=%#||transparent=%A||channel=%[channels]||colorspace=%[colorspace]||depth=%z||index=%[scene]||count=%[scenes]\n" 323_airlive.gif
//identify -format "name=%f||format=%m||w=%w||h=%h||geometry=%Wx%H%X%Y||delay=%T||quality=%Q||compress=%C||dispose=%D||signature=%#||transparent=%A||channel=%[channels]||colorspace=%[colorspace]||depth=%z||index=%[scene]||count=%[scenes]\n" 323_airlive.gif
// dodelat! a nasadit zdrejme ten posledni radek!!!!

//identify -format "name=%f||format=%m||w=%w||h=%h||geometry=%Wx%H,%X,%Y||delay=%T||quality=%Q||compress=%C||dispose=%D||signature=%#||transparent=%A||channel=%[channels]||colorspace=%[colorspace]||depth=%z||index=%[scene]||count=%[scenes]\n" 323_airlive.gif
//$filestrlen = mb_strlen($file);$ret
//$identifyexec = exec(sprintf('identify %s', escapeshellarg($file)), $ret);
 // osetreni pokud identify vrati prazdny radek!!!!
//$result = exec(sprintf('identify %s', escapeshellarg($file)));
// otestovat na diakritiku!!!?!!
$onlyinfo = false
var_dump();
$localhost = array('127.0.0.1', '127.0.1.1',
$_SERVER['REMOTE_ADDR']
); //omezeni jen na local
in_array($_SERVER['REMOTE_ADDR'], $localhost)
//get_loaded_extensions() ??
//extension_loaded()
//var_dump($this->picture->_stream);
var_dump("volani", $this->getImageMimeType());
// auto destruct!
$files = NULL,
//var_dump($this->picture->autodestruct);
var_dump($this->picture);//->autodestruct);
//$version = ;
//var_dump($version);
//$version = exec('identify -version | head -n 1 | cut -c 10-');  // prekopat zpracovani!!!!
$this->picture->version['versionInteger']
$ver = ;
var_dump($ver);
// ukladat do staticke promennne!!!!
//var_dump($result);
//var_dump(self::$version);
var_dump('kolik?');
var_dump(self::$version);
var_dump(sprintf('identify -format %%[%s] %s', $pattern, $this->picture->_stream));
// upravovatelne identify
//var_dump(file_exists($this->picture->_stream));
//var_dump(filesize($this->picture->_stream));
//&& file_exists($this->picture->_stream)) {
$mime = ;
var_dump($mime);
sprintf('image/%s', $i->getImageFormat())
//6.3.2 -set key value
//600 -comment "..."
/*
 * STYLETYPE_
*/
/*
 * STRETCH_

const STRETCH_
*/
// overit existenci fontu?!
var_dump($ret, $name);
      //echo $im->getImageProperty("comment");
      //$image->setImageProperty('Exif:Make', 'Imagick');
      //echo $image->getImageProperty('Exif:Make');
      //comment
      // dodelat a dotestovat!, pred timto se musi provest exec! jako pres dalsimi...!!!
 //if ($this->picture->autodestruct) {
        //}
//$this->picture->autodestruct = self::isNull($settings, 'autodestruct', true);
'autodestruct' => bool, se da zakazat auto uklizeni, defaultne true, a
// takto
//header( "Content-Type: image/{$Imagick->getImageFormat()}" );
//echo $Imagick->getImageBlob( );

//gray scale: -fx '0.29900*R+0.58700*G+0.11400*B'
//-colorspace gray
//"blue", "#0000ff", "rgb(0,0,255)", "cmyk(100,100,100,10)"
// nasadit tady to pretezovani!
//bool ImagickDraw::setFontFamily ( string $font_family )
* overeni zda se jedna obrazkek bylo pridano i u konstruktoru
//(array('autodestruct' => false));
, autodestruct
// vynechavat pdf?!
    //public function getImageMime() {
      $a = getimagesize($this->obrazek->stream);
      return $a["mime"];
    }

    //public function sendImageHeader() {
      $a = getimagesize($this->obrazek->stream);

      header("content-type: {$a["mime"]}");
    }

    //public function selfCommandLine($command) {
      return $this->execConvert($command);
    }
   * Imagick::displayImage
   * Imagick::readImageFile($filehandle)
   *

  // append!?! nebo jen pro gify?
    //public function addImage($source)
    {
      //$source
    }
//var_dump($result);
//var_dump($arg, empty($arg),'--');
//var_dump(isset($arg)); || empty($arg) a zaroven neni nula
// udelat i zapinaci moznost naklaneni jetnotlivych znaku
//->setFontStretch('Expanded')
//var_dump($angle, $x, $y);
//$values = array($draw, $angle, $angle, $x, $y, $text);
            //$format = '%s -annotate %sx%s+%s+%s "%s"';
            // doresit!!!!! annotate je 3x pretizena metoda!!!!
//$draw->annotation($pos, 25, $letter)
                //->skewX(rand($rotation_letter[0], $rotation_letter[1]));
          //->rotate(rand($rotation_letter[0], $rotation_letter[1]));
//$draw->
        //var_dump($split);
        //rozsah
$pos = 15;  // dat na meneni z nastaveni$pos += 15;//$pos,
//$i->destroy();
// nahodna velikost pisma!
// metodu na rucni nastavovani hodnot pres konfiguracni pole (json a nebo neco podobnyho)
(is_array($value) ?  : );
 //if (is_array($font_size)) {
          //}
 //var_dump($font_size);
      //var_dump(rand($font_size[0], $font_size[1]));
      //$font_size = ;
      //(is_array($font_size) ? rand($font_size[0], $font_size[1]) : $font_size);
//var_dump($font_size);rand($font_size[0], $font_size[1])var_dump(Core::getRandValue($font_size));
 // priparne overovat jestli neni pole!
// osetreni pokud je rozsah nebo cislo!!!!
// var_dump(Core::getRandRGB('#aaa', '#eee'));
/*//var_dump($min, $max);//var_dump($a);//var_dump($min, $max);//var_dump($_min);//var_dump($_ma);
      $min = array_slice(str_split($min), 1); //orezani #
      $max = array_slice(str_split($max), 1); //orezani #
      if (count($min) == count($max))
      {
        if (count($min) == 3)
        {
          $result[] = "#";  //vlozeni #
          foreach ($min as $index => $kod)
          { //prevedeni na dec, vypocet rand, prevedeni na hex
            $result[] = dechex(rand(hexdec("{$kod}{$kod}"), hexdec("{$max[$index]}{$max[$index]}")));
          } //slouceni dvojic
          $result = implode("", $result);
        }
          else
        if (count($min) == 6)
        {
          $min = array_chunk($min, 2);
          $max = array_chunk($max, 2);
          $result[] = "#";  //vlozeni #
          foreach ($min as $index => $kod)
          {
            $result[] = dechex(rand(hexdec(implode("", $kod)), hexdec(implode("", $max[$index]))));
          }
          $result = implode("", $result);
        }
          else
        {
          $result = NULL;
        }
      }
*/
//$message = print_r($error, true); //export do textu
        //error_log($message);  //zaneseni do error logu, jako text//var_dump($_GET);
var_dump(Core::getRandRGB('#555555', '#999999'));
[0], $font_color[1]) : $font_color
is_array($font_color) ? Core
[0], $font_color[1]) : $font_color
'font_pitch' => 20,
//$font_pitch = Core::isFill($this->captcha->configure, 'font_pitch', 10);
//$hex = array_slice(str_split($hex), 1); //orezani #
//if (count($hex) == 6) { //slouceni po dvojcich a prevedeni cisla na dec
/*var_dump($val);// dodelat!!!!!!
      if (strlen($hex) == 6 + 1)
        $chunk = array_chunk($hex, 2);
        foreach ($chunk as $kod) {
          $result[] = hexdec(implode('', $kod));
        }
      }
*/
//if ($this->picture->version['versionInteger'] >= $task['version']) {
//var_dump(Email::checkEmail('martin.xxxx@gmail.com23'));'martin.xxxx@gmail.com',
var_dump(gethostbyaddr(Core::getIP()));
var_dump($parameters);
private static function loadBrowscap() {
// nacitat do staticke promenne!
//var_dump($b->getBrowser());
var_dump(Core::getBrowser());
//var_dump($b);
}
//
//self::loadBrowscap();
var_dump(Email::getIP(), , , , );
var_dump(PHP_OS);
//var_dump(PHP_OS);
//var_dump(Email::checkEmail('mar@gmail.com23'));
var_dump($task['version']);
// dodelat!! vrati cislo optimalni verze imagicku ktery je pro danou serii prikazu vhodny (vzdy tu nejvetsi)
//var_dump($this->picture->task);
// rozsirit na pridavani vice emailu!!!
// pridavani syst veci: PHP_OS, ip, server veci a pod.
// pripadne aby se mohli pridat i statistyky od odesilatele, a vyjimky do try/catch
// osetrevat validitu emailu!
//self::checkEmail($this->conf->to) &&
// votestovat metodu Imagic::isPictures('.../oheň.jpg') !!!!
  if (!empty($predd)) {
    //var_dump($predd !== $content);
  }
/*
      $data = JsonStorage::getData('json/mycomp.json');
      $menu = Html::setArray(JsonStorage::getData('json/objednat_odkazy.json'));
*/var_dump($texty);//var_dump($data);
/*
      $a = array('Jsme tým vývojářů, mající za sebou bohaté zkušenosti se zpracováváním a vývojem administračního systému pro user-friendly použití. Můžeme se pochlubit řadou úspěšných referencí, díky kterým se naše zkušenosti obohatily a přinesly celou řadu změn a vylepšení v admin systému. Při naší práci dbáme především na vysokou kvalitu zpracování.',
                'Naše role jsou:\nwebmaster - Martin Fryšták a programátor - Radek Fryšták',
                'Dále už za nás hovoří naše reference.');
      JsonStorage::setData('json/onas.json', $a);
*/
//var_dump($out);$size = ;$pid = ;
        //self::sendErrorLog('*info* usage: ' . self::calculateSize(`echo -n $( ps --pid $pid --no-headers -o rss )` * 1024));
/*
        foreach ($elements as $elem) {
          if (!empty($elem)) {
            $this->element->content[] = $elem;
          }
        }
*///$this->element->content = $loc; //ulozeni
//$loc = $this->element->content; //nacteni
/*
              ->insert(Html::div()->id('zapati')
                      ->insert(Html::p()->id('navigace_zapati')->setText(StaticWeb::getMenu($sabona_menu2, Html::span()->setText('/')->class('museo500700')))
                              ->insert(Html::a()->href('#')->title('NAHORU')->setText('NAHORU')->id('odkaz_nahoru')->class('museo500700')->onclick('$.scrollTo(\'#obal_layout\', 2000, {easing: \'easeOutExpo\'}); return false;'))
                      )
                      ->insert(Html::div()
                              ->insert(Html::p()
                                      ->insert(Html::em()->setText($data['nazev'])->class('museo100300'))
                                      ->insert(Html::em()->setText($data['popis'])->class('museo100300'))
                              )
                              ->insert(Html::p()
                                      ->insert(Html::a()->href($email_info['href'])->title('')->setText($email_info['text'])->class('museo100300'))
                                      ->insert(Html::a()->href($email_servis['href'])->title('')->setText($email_servis['text'])->class('museo100300'))
                              )
                              ->insert(Html::p()
                                      ->insert(Html::em()->setText(sprintf('skype: %s', $data['skype']))->class('museo100300'))
                                      ->insert(Html::a()->href(Core::getUrl())->title(Config::PROJECT_NAME)->setText($data['url'])->class('museo100300'))
                              )
                              ->insert(Html::p()->class('posledni_odstavec')
                                      ->insert(Html::em()->setText(sprintf('tel.: ( +420 ) %s', $data['telefon']))->class('museo100300'))
                                      ->insert(Html::em()->setText($data['misto'])->class('museo100300'))
                              )
                      )
                      ->insert(Html::p()->id('autori')
                              ->insert(Html::em()->setText('Created by')->class('museo100300'))
                              ->insert(Html::a()->href('http://www.gfdesign.cz/')->title('GoodFlow design - Tvorba webových stránek a systémů')->setText('GoodFlow design')->class('museo100300'))
                              ->insert(Html::span()->setText('/')->class('museo100300'))
                              ->insert(Html::em()->setText('Design by')->class('museo100300'))
                              ->insert(Html::a()->href('http://www.martiondesign.net/')->title('Martion Design - webové portfolio Martina Šuláka')->setText('Martion')->class('museo100300'))
                      )
              );

    //regenerovani odkazu
    $odkazy_path = 'json/objednat_odkazy.json';
    if (!file_exists($odkazy_path)) {
      $a = Html::p()->id('objednat_odkazy_sekce')
                    ->insert(Html::a()->hrefpathrewrite(Kontakt::URL, Kontakt::ZAKAZNIK)->title('Objednat servis u ZÁKAZNÍKA')->setText('Objednat servis u ZÁKAZNÍKA')->id('objednat_odkaz_1'))
                    ->insert(Html::a()->hrefpathrewrite(Kontakt::URL, Kontakt::SVOZ)->title('Objednat svoz ZDARMA')->setText('Objednat svoz ZDARMA')->id('objednat_odkaz_2'))
                    ->insert(Html::a()->href('#')->title('Objednat servis TELEFONICKY')->setText('Objednat servis TELEFONICKY')->id('objednat_odkaz_3')->onclick('return hs.htmlExpand(this, { width: \'450\' })'))
                    ->insert(Html::span()->class('highslide-maincontent')
                            ->insert(Html::strong()->setText(sprintf('tel.: ( +420 ) %s', $data['telefon']))->class('museo500700')->id('centralni_cislo'))
                    );
      JsonStorage::setData($odkazy_path, $a->toArray());
    }
*/
/*
                      ->insert(Html::p()
                              ->insert(Html::span()->class('helvetica75bold')->class('zahlavi_tel')->setText($data['telefon']))
                              ->insert(Html::span()->class('zahlavi_maily')
                                      ->insert(Html::a()->href($email_servis['href'])->title('')->setText($email_servis['text'])->class('helvetica75bold'))
                                      ->insert(Html::span()->setText('/')->class('helvetica75bold'))
                                      ->insert(Html::a()->href($email_info['href'])->title('')->setText($email_info['text'])->class('helvetica75bold'))
                              )
                      )
                      */
   //$sabona_menu2 = Html::a()->href('{href_link}')->title('{name}')->setText('{name}')->class('{condition}')->class('museo500700');
    //nacitani informaci z json
/*
    $data = JsonStorage::getData('json/centralni_informace.json');
    $email_info = Core::getSafeEmail($data['info']);
    $email_servis = Core::getSafeEmail($data['servis']);
*/
//pages\Kontakt,
      //classes\JsonStorage;
/*
36a5bb
        Cufon(\'#obal_layout #zahlavi ul li a\', {hover: {textShadow: \'2px 2px #fff\'}});

        Cufon(\'#obal_layout #zahlavi ul li a.aktivni strong\', {color: \'#36a5bb\'});



textShadow: '1px 1px rgba(255, 136, 25, 1)
*/


/*
          ->addJavaScript(sprintf('$(document).ready(function() {
        Cufon.replace(\'#obal_layout .helvetica75bold\', { fontFamily: \'helvetica75bold\', hover: true });
        Cufon.replace(\'#obal_layout .museo100300\', { fontFamily: \'Museo100300\', hover: true });
        Cufon.replace(\'#obal_layout .museo500700\', { fontFamily: \'Museo500700\', hover: true });
        Cufon.replace(\'#obal_layout .museo900\', { fontFamily: \'Museo900\' });
        $("#obal_layout p#objednat_odkazy_sekce a#objednat_odkaz_1, #obal_layout p#objednat_odkazy_sekce a#objednat_odkaz_2, #obal_layout p#objednat_odkazy_sekce a#objednat_odkaz_3").mouseover(function(){
          $(this).stop().animate({top:"-3px"}, {duration: 200, easing: "easeOutExpo"}).animate({top:"0"}, {duration: 200, easing: "easeOutExpo"});
        });
        hs.graphicsDir = \'%shighslide/graphics/\';', Core::getUrl()))
*/
//echo Core::stopTime();
// postupne povolovane!
    Core::startTime();
    StaticWeb::setDefaultPage(pages\Reference::URL);
    $title = Core::implodeTitle(array(Config::PROJECT_NAME, StaticWeb::getTitle(array(''))));
    $sabona_menu = Html::li()->insert(Html::a()->href('{href_link}')->title('{name}')->class('{condition}')->clearBreakDepth()
                                      ->insert(Html::strong()->setText('{name}')->clearBreakDepth())
                                      ->insert(Html::span()->setText(' - ')->clearBreakDepth())
                                      ->insert(Html::em()->setText('{addition}')->clearBreakDepth())
                                      )->class('eval::({poc}=={count} ? "posledni" : NULL)');


    //$path = sprintf('%s/obr/kod/', Core::getUrl());$path.
    $obr = array();
    $obrazky = Core::getListFile(array('path' => sprintf('%s/%s', Core::getWebPath(), Config::DIR_CODES)));
    if (!empty($obrazky) && count($obrazky) > 7) {  //min 8 polozek
      $rand = array_rand($obrazky, 7);  //efektivni hodnota je dvojvasobna
      foreach ($rand as $nahodny) {
        $obr[] = $obrazky[$nahodny];
      }
    }

    $idsekce = StaticWeb::getUserVariable('idsekce');

    $obal_layout = Html::div()->id('obal_layout')
      ->insert(Html::div()->id('obal_obsah')
              ->insert(Html::div()->id('zahlavi')
                      ->insert(Html::h1()
                              ->insert(Html::a()->href(Core::getUrl())->title($title)->setText($title))
                      )

                      ->insert(Html::ul()->insertContent(StaticWeb::getMenu($sabona_menu)))
              )->insert(Html::div()->id('obal_%s', $idsekce)
                        ->insert(Html::div()->id('obal_pozadi'))
                        ->insert(Html::span()->class('kod_pozadi')->class('kod_1'))
                        ->insert(Html::span()->class('kod_pozadi')->class('kod_2'))
                        ->insert(Html::span()->class('kod_pozadi')->class('kod_3'))
                        ->insert(Html::span()->class('kod_pozadi')->class('kod_4'))
                        ->insert(Html::span()->class('kod_pozadi')->class('kod_5'))
                        ->insert(Html::span()->class('kod_pozadi')->class('kod_6'))
                        ->insert(Html::span()->class('kod_pozadi')->class('kod_7'))
                        ->insertContent(StaticWeb::getContent())
                        //->insert(Html::div()->id(sprintf('obsah_%s', $idsekce))
                        //          ->setText(StaticWeb::getContent())
                        //        )
                        )
              );
// docasne pokusne reseni!
    $page = new HtmlPage(HtmlPage::DOCTYPE_STRICT);
    $page->setLanguage(Config::LANG)
          ->setUrlPage(Core::getUrl())
          ->addMeta('author', Config::PROJECT_NAME.' (www.gfdesign.cz)')
          ->addMeta('copyright', 'Created by GoodFlow design')
          ->addMeta('description', $title)
          ->addMeta('robots', 'index, follow')
          ->addMeta('google-site-verification', 'JR_I4kX0Gn7LJexLY4k0YxlLGRE0MkZcpuu85VnFLes')
          ->loadCSS('styles/global_styles.css')
          ->loadCSS('highslide/highslide.css')
          ->loadCSS('highslide/highslide.config.css')
          ->loadCSS(Core::isWebKit() ? 'styles/webkit_styles.css' : NULL)
          ->loadCSS(Core::isOpera() ? 'styles/opera_styles.css' : NULL)
          ->loadConditionalCSS('styles/styles_ie.css', 'IE')
          //->loadConditionalCSS('styles/styles_ie8.css', 'IE=8')
          ->loadConditionalCSS('styles/styles_ie7.css', 'IE=7')
          ->loadConditionalCSS('styles/styles_ie6.css', 'IE=6')
          ->loadJavaScript('script/jquery/jquery-1.6.2.min.js')
          ->loadJavaScript('script/jquery/jquery-ui-1.8.16.custom.min.js')
          ->loadJavaScript('script/jquery/jquery.cycle.all.min.js')
          ->loadJavaScript('highslide/highslide-with-gallery.js')
          ->loadJavaScript('highslide/highslide.config.js')
          //->loadJavaScript('script/jquery/jquery.scrollTo-1.4.2-min.js')
          ->loadJavaScript('script/cufon/cufon.1.09i.js')
          ->loadJavaScript('script/cufon/museo.js')
          ->loadJavaScript('script/cufon/mwp.js')
          //->loadJavaScript('script/cufon/omm.js')
          //->loadJavaScript('script/cufon/museo100300.js')
          //->loadJavaScript('script/cufon/museo500700.js')
          //->loadJavaScript('script/cufon/museo900.js')
          //->loadJavaScript('highslide/highslide-full.js')
          //->loadJavaScript('highslide/highslide.config.js', array('charset' => 'utf-8'))
          ;
var_dump(self::$browscap->cacheDir.self::$browscap->cacheFilename);
//print_r(self::$browscap->getBrowser());
//self::initBrowscap();
var_dump(__DIR__);
var_dump(self::$browscap->userAgent);
// spravne nastavit a prenout na curl!!!?!!!
var_dump(self::$browscap->cacheDir.self::$browscap->iniFilename);
// defaultni doc strict pro xhtml4
// prepsano na Html ze self
// prepsano na Html ze self
/*
      $this->conf = new stdClass;
      $this->conf->titlesep = ' - ';
      $this->conf->urlpage = '';
      $this->meta = array();
      $this->css = array();
      $this->condcss = array();
      $this->title = NULL;
      $this->javascript = array();
      $this->condjs = array();
      $this->js = array();
      $this->endjs = array();
      $this->body = array();
      $this->bodyattr = array();
      //$this->last = NULL;
      $this->setDoctype($doctype);
*/
// dodelat nova implementace globalni promenne!!!
private $conf, $meta, $css, $condcss, $title, $javascript, $js, $endjs, $body, $insert_style;// $last;
// priprava pro budouci prepis
, prekopat styl promennych!!!
//$this->page->conf->titlesep = ' - ';
      //$this->page->conf->urlpage = '';
// overit ze se to nebude hadat! pripadne html z dedeni vykopnout?!
// otestovatanebo rozhodnout jestli bude tato trida deditelna?!!!!
// je tu podezdreni ze to opravdu mrda!!!!!
var_dump(mail('xxx@gmail.com', 'predmet..', 'message...', 'From: xxx@gmail.com'));
//var_dump(PHP_OS);
                //$inc = (!empty($predd) ? ($predd === $content ? 0 : 1) : 1);
                //var_dump($predd);
                if (!empty($predd)) {
                  //echo($predd->getId());
                  //var_dump($predd->getId());
                  if ($predd->getId() == $content->getId()) {
                    //var_dump($predd->getDepth(), $depth);
                  }
                }
//echo $content->getName();
//echo $depth;
//if (!empty($predd) ? $predd->getId() != $content->getId() : true) {
              //if (!is_null($depth) && $normal) {  //pocitani zanorovani
 //}
                //var_dump($content->getId());
// poresit vyjeby odsazovani sablony!
//var_dump(in_array($content->getId(), $last));
//(!empty($predd) ? $predd->getId() : '');//.($predd !== $content ? '.' : '');
// pokusne rand()
//case 'link':  // picovina?!
//final (pro jistotu nededitelna!!!!)
/*
// pokusne predelano!
    public function insertContent($elements) {
      if (empty($this->element->content)) {
        $this->element->content = array();
      }
      if (is_array($elements)) {
        $this->element->content = array_merge($this->element->content, $elements);
      } else {
        if (!empty($elements)) {
          $this->element->content[] = $elements;
        }
      }
      return $this;
    }
*/
// poresit vyjeby odsazovani sablony!
              //je predchozi stejny jako aktualni?
              //$predd = Core::isFill($contents, $index - 1);
//if (!in_array($content->getId(), $last)) {
//}
/*
              if (!is_null($depth) && $normal) {  //pocitani zanorovani
              //if (!is_null($depth)) {  //pocitani zanorovani
                //$inc = 1;//(!empty($predd) ? ($predd !== $content ? 0 : 1) : 0);
                //var_dump($predd);
                $content->setDepth($depth + $zan + 1);
              }
*/
->setUse(Html::USE_REPEAT)
->setUse(Html::USE_REPEAT)
->setUse(Html::USE_REPEAT)
->setUse(Html::USE_REPEAT)
->setUse(Html::USE_REPEAT)
/*
      //pri pouziti repeat udela nudli
      if ($use == self::USE_REPEAT) {
        $break = NULL;
        $indent = NULL;
      }
*/
//$use = $this->element->use;
//$normal = ($use == self::USE_NORMAL); //jen pri normalnim pouziti
//$this->element->use = self::USE_NORMAL; //nastaveni typu zanorovani
    //const USE_NORMAL = 'normal';
    //const USE_REPEAT = 'repeat';
->setUse(Html::USE_REPEAT)
->setUse(Html::USE_REPEAT)
/*
//nastaveni uziti vypisu (hlavne pro sablony, kvuli generovani schodu)
    public function setUse($type) {
      $this->element->use = $type;
      return $this;
    }
*/
->setUse(Html::USE_REPEAT)
$last[] = $content->getId();  //pridani do pole posledne generovanych
var_dump($content->getId());
//var_dump($this->element->id);$this->element->id;  // tu nebo v renredu bacha na prazdnou hodnotu?!
(!empty($this->element->id) ? $this->element->id : NULL);
$result = NULL;
      if (!empty($this->element->id)) {
        $result = $this->element->id;
      }
//$row;//
//->clearBreakDepth()->setDepth(6)
//->clearBreakDepth()////->clearBreakDepth()
->setUse(Html::USE_REPEAT)
//->setUse(Html::USE_REPEAT)3
//->setUse(Html::USE_REPEAT)
//->setUse(Html::USE_REPEAT)
->setUse(Html::USE_REPEAT)
(od php verze 5.3.0)
$this;
$this;
//var_dump($content->getId());
//pokud neni html v textu tak vklada $break
            //$result[] = (!$texthtml ? $break : '');
            //$result[] = (!$texthtml ? $indent : '');
//$texthtml = ($item[0] == '<');  //detekce jestli text zacina Html tagem
              //&& !$texthtml
// pridat metodu set submit button! kde se na stavi jmeno! a na konci se zavola add submit bez pamamentu a enbo neco takeho?!
/*
        if (empty($name) && !empty($this->element->submit) && $method == 'addSubmit') {
          $name = $this->element->submit;
        }
*/
/*
    //preddefinice tlacitka submit, pro predcasne pouzivani isSendet()
    //public function setSubmit($name) {
      $this->element->submit = $name;
      $this->element->elemtype[$name] = self::_T_SUBMIT;
      return $this;
    }
*/
/*
      $row = array();
      foreach ($this->element->form as $elem) {
        $row[] = $elem['html']; //renderovani elementu do pole
      }
var_dump($row);
*/
var_dump($row);
            //$captcha = Core::isFill($settings, 'captcha');
//var_dump($captcha); // dodelat!!!!!
// radne otestovat!!!! pripadne opravit!!!!
                    //var_dump(!preg_match("/[0-9]{9,}/", 'asdfasdfasdf'));
                    //var_dump(preg_match('/[0-9]{9}/s', $arg, $r));
                    //var_dump($r[0] == $arg);var_dump();
//$_value = $this->element->_val[$name];
      //var_dump($name, $output, $value, $element);
      //var_dump($value);value
$name = $element['name'];
//$this->element->_val[$name] = $arg;
//$output = $element['output'];
// jinak!!
    //interni aplikace typu
/*
    //private function applyType($index) {
      $name = $this->element->form[$index]['name']; //nacteni jmena ze zadaneho indexu
      $value = $this->element->values[$name]; //navteni puvodni hodnoty value
      $output = $this->element->form[$index]['output'];
      if (!is_array($value)) {
        switch ($output) {  //nastavovani typu vystupu
          case self::TYPE_STRING:
            $this->element->values[$name] = (string) $value;
          break;

          case self::TYPE_INTEGER:
            $this->element->values[$name] = (integer) $value;
          break;

          case self::TYPE_FLOAT:
            $this->element->values[$name] = (float) $value;
          break;

          case self::TYPE_BOOL:
            $this->element->values[$name] = (boolean) $value;
          break;
        }
      }
    }
*/
//var_dump($this->element->_val);
// reorganizovat!!!
/*
 * nejak vymyslet toto odeleni, aby bylo se dalo nezavisle oddelit odeslani a zaroven validace
 * a pak aby tady ta metoda mela v sobe auto validaci, typ vystupu se bude zrejme nastavovat zaroven s validaci!
 *
 * */
// arg se ulozi do pole arg
//oddelit toto cale nacitani?
//var_dump($elem['output']);
//$this->element->values[$name] = $arg;
      // validace dat!!!!!! predelat z is submited?
/*
      if ($this->isSendet()) {
        $result = true;
        if (!empty($this->element->form)) {
          foreach ($this->element->form as $index => $elem) { //name,type,output,multiple,index,html,rule
            $name = $elem['name'];

            //nacteni hodnoty argumentu
            $arg = $this->getArgs($name);
            $readarg = $arg;
            //ulozeni do instancni promenne, pro nasledny vypis a retypovani
            //$this->element->values[$name] = $arg;

            //multiple jen u textu
            if ($elem['type'] == self::_T_TEXT && $elem['multiple'] && $this->element->counts[$name] > 1) {
              $arg = $arg[$elem['index']];  //predani spravneho indexu, jen pro ucely kontroly
            }

            if ($elem['type'] == self::_T_FILE) {
              if ($elem['multiple']) {
                $arg = $arg['name'][0];
              } else {
                $arg = $arg['name'];
              }
            }

            //zkontroluje jestli je neo v 0.indexu
            if (is_array($arg)) {
              $arg = $arg[0];
            }

// arg se ulozi do pole arg
//var_dump($index, $arg);

            //pokud jsou zadane podminky
            $rules = Core::isFill($elem, 'rule');
            if (!empty($rules)) {
              foreach ($rules as $rule) { //type,text,args
                //rozdeleni osetreni dle podminky
                $type = $rule['type'];
                switch ($type) {
                  case self::RULE_FILLED: //problem s nulou!
                    $arg = trim($arg);  //vyhazeni mezer/tabulatoru ze zacatku,konce
                    //pokud je textove prazdny argument
                    if ($arg == '') {  //kontrola prazdnosti
                      $this->addError($type, $rule['text']);
                      $result = false;
                    }
                  break;

                  case self::RULE_EQUAL:
                    if ($arg != $rule['args']) {
                      $this->addError($type, vsprintf($rule['text'], $rule['args']));
                      $result = false;
                    }
                  break;

                  case self::RULE_NOTEQUAL: // pripadne i na vic hodnot via in_array!
                    if ($arg == $rule['args']) {
                      $this->addError($type, vsprintf($rule['text'], $rule['args']));
                      $result = false;
                    }
                  break;

                  case self::RULE_NUMERIC:
                    if (!is_numeric($arg)) {
                      $this->addError($type, $rule['text']);
                      $result = false;
                    }
                  break;

/  *
                  case self::RULE_INTEGER:
                    if (!is_int($arg)) {
                      $this->addError($type, $rule['text']);
                      $result = false;
                    }
                  break;

                  case self::RULE_FLOAT:
                    if (!is_float($arg)) {
                      $this->addError($type, $rule['text']);
                      $result = false;
                    }
                  break;
*  /

                  case self::RULE_MIN_LENGTH:
                    if (mb_strlen($arg, 'UTF-8') < $rule['args']) {
                      $this->addError($type, vsprintf($rule['text'], $rule['args']));
                      $result = false;
                    }
                  break;

                  case self::RULE_MAX_LENGTH:
                    if (mb_strlen($arg, 'UTF-8') > $rule['args']) {
                      $this->addError($type, vsprintf($rule['text'], $rule['args']));
                      $result = false;
                    }
                  break;

                  case self::RULE_LENGTH:
                    if (mb_strlen($arg, 'UTF-8') != $rule['args']) {
                      $this->addError($type, vsprintf($rule['text'], $rule['args']));
                      $result = false;
                    }
                  break;

                  case self::RULE_MIN_VALUE:
                    if ($arg < $rule['args']) {
                      $this->addError($type, vsprintf($rule['text'], $rule['args']));
                      $result = false;
                    }
                  break;

                  case self::RULE_MAX_VALUE:
                    if ($arg > $rule['args']) {
                      $this->addError($type, vsprintf($rule['text'], $rule['args']));
                      $result = false;
                    }
                  break;

                  case self::RULE_RANGE:
                    if ($arg < $rule['args'][0] || $arg > $rule['args'][1]) {
                      $this->addError($type, vsprintf($rule['text'], $rule['args']));
                      $result = false;
                    }
                  break;

                  case self::RULE_EMAIL:
                    $pattern = "/^[_a-zA-Z0-9\.\-]+@[_a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,4}\$/";
                    if (!preg_match($pattern, $arg)) {
                      $this->addError($type, $rule['text']);
                      $result = false;
                    }
                  break;

                  case self::RULE_URL:
                    $pattern = "/\b(?:(?:https?|ftp):\/\/|www\.)[-a-z0-9+&@#\/%?=~_|!:,.;]*[-a-z0-9+&@#\/%=~_|]/i";
                    if (!preg_match($pattern, $arg)) {
                      $this->addError($type, $rule['text']);
                      $result = false;
                    }
                  break;

                  case self::RULE_REGEXP:
                    preg_match(sprintf('/%s/s', $rule['args']), $arg, $r);
                    $podm = (!empty($r) ? $r[0] == $arg : false); //vystupni retezec musi byt stejny jako zadavany
                    if (!$podm) {
                      $this->addError($type, $rule['text']);
                      $result = false;
                    }
                  break;

                  case self::RULE_COUNT:
                    $names = $readarg['name'];
                    if (count($names) > $rule['args']) {
                      $this->addError($type, vsprintf($rule['text'], $rule['args']));
                      $result = false;
                    }
                  break;
                } //end switch type

              } //end foreach rule
            } //empty rules

            $this->element->values[$name] = $this->applyType($arg, $elem['output']);  //aplikace pretypovani

            //po kontrole, za platnosti name
            //$this->applyType($index);  //aplikace pretypovani
          } //end foreach form
        } //end empty forms
      }
*/
      $result = false;
      if ($this->isSendet()) {
        $result = true;
// cele odloucit!!!!!
//isValid
      }
// pripadne i na vic hodnot via in_array!//var_dump($rule['args']);
//po kontrole, za platnosti name
//var_dump($elem);
$this->element->validate = true;
//var_dump(!$this->element->validate && $this->isSendet());
// co kdyby se vracelo jen toto?!
// predelat na nacitani po jednom!!!!!!
var_dump(self::$list_pages);
var_dump(Core::isFill($pages, $current, $pages[self::$defpage]));
//$currpage = self::getCurrentPage();
      //$class = $currpage['class'];
      //$title = $currpage['name'];
//var_dump($values);//$values['name'];
//var_dump($values::getUserVariable());
                        //var_dump($data);// + $values['uservar']$values['uservar']
      //$class = self::getCurrentPage();
      //var_dump($class, self::getCurrentAdress());
      //$currpage = self::getCurrentPage();
      //$class = $currpage['class'];
            //$class::URL;
var_dump($current);
var_dump($data);
//var_dump($class);
      //$result = $class::getCurrentPage();
      //$currpage = self::getCurrentPage();
      //$result = $currpage['content'];
//$currpage = self::getCurrentPage();
      //$uservar = $currpage['uservar'];
var_dump($modules);
      //$pages = self::getPages();
/*
      $current = self::getCurrentAdress();
      $item = Core::isFill($pages, $current);
      if (!empty($item)) {
        $module = $item['modules'];
        $current1 = self::getCurrentAdress(1);
// rozlisovat blok pro cely modul, zdrejme znaceny * nebo neco takeho?!
        $result = Core::isFill($module, $current1);
      }
*/
var_dump(Core::isFill($pages, $current, $pages[self::$defpage]));
// opravit radne instalaci, pri prvnim spusteni nesmi bezet, az po druhem?! a nebo to proste lip vymyslet!!!!!!
// test + pripadne na set redirest! s prodlenim!.
//self::$browscap->updateMethod = Browscap::UPDATE_CURL;
//  tady ty prevody testnout na standartnim testu češtiny!
if (!empty($dir)) {
              var_dump($dir, is_writable($dir));
            }
//var_dump($dir);
// pripadne udelat rozsireni aby slo generovat i z pole pathu
} catch (UnexpectedValueException $e) {
// pridelat tyto ochrany k ostatni getterum pracujicim s file systemem!
//nastavovani kodu do hlavicky
// mozna nebude uplne tak uzitecna ani funkcni...
    public static function setErrorCode($code = 404) {
      header(sprintf('HTTP/1.0 %s Not Found', $code));
    }
    //debug mod
    //vytvareni slozek

    // preklady udelat mozna uplne jinak!! kdyz vyuzivam objektovych indexu!!!
    //tak nespecha:
    //rozlisovani os, browser apod...
    //detekce prohlizecu a ruznych os
    //obsluha curl s cache
    //obsluha last error
/*
      $regex = array_keys($patterns);
      return preg_replace($regex, $patterns, $text);
*/
// optimalizovat a vychzat z teto funkce v ostatnich!!!!
// udelat komplexnejsi parsrovani! aby bylo vic moznost a vsechno se nemuselo vypisovat!!!!
/*
      $regex = array_keys($patterns);
      return preg_replace($regex, $patterns, $text);
*/
//public function isChrome
// pridat i moznost na rozslisovani i konkretni verze???! ????
// pridat i moznost na rozslisovani i konkretni verze???! ????
/*
$ext = get_loaded_extensions();
* var_dump(get_loaded_extensions());
$a = array('gettext', 'session', 'SimpleXML');
var_dump($ext); - jen do tech baliku kde je to potreba!
* => extension_loaded ( string $name )
*/
// nastavit povinne?!?! asi eq. addrule filled!
var_dump($value.'?');
// test na $item
//Core::setRefresh(Config::TIME_EDIT, Core::makeUrl(self::$adminurl, array('query' => array($get_adress[0] => self::URL, $get_adress[1] => 'dir', 'id' => $hashiddir), 'path' => Administration::ADMIN_URL)));
// opravit iddir
// test!
var_dump(Core::makeUrl(self::$adminurl, $refreshdirurl));exit(0);
var_dump($load_data);//var_dump($dir, $conf, '----');
//$item['files'][$id] = NULL;
//Core::setRefresh(Config::TIME_EDIT, Core::makeUrl(self::$adminurl, array('query' => array($get_adress[0] => self::URL, $get_adress[1] => 'dir', 'id' => $hashiddir), 'path' => Administration::ADMIN_URL)));
// opravit iddir
// test na $item!!!!!
// tu se na nacitat arg ?? nebo jak???
var_dump($this->element->values, $this->getArgs($name));
return $value;
//ulozeni do instancni promenne, po kontrole retypovani
var_dump($pictures);exit;
var_dump(Core::makeUrl(self::$adminurl, $refreshdirurl));exit;
//var_dump($url);exit;
//var_dump($res);
// opravit iddir
//var_dump($res, $_POST['adminurl']);
//Core::makeUrl($_POST['adminurl'], array('query' => array($get_adress[0] => self::URL, $get_adress[1] => 'dir', 'iddir' => Core::encodeData($data->dir)), 'amp' => '&', 'path' => Administration::ADMIN_URL)),
// takhle by to neslo!, udelat nejak liip?!!!
//self::$adminurl3
// vyjimku: pokud bude jen text tak se bude predpokladat ze jde o jeden files
// muze nastat situace kdy se do settings nacpe pole a nebude asociativni, a bude tam jen cesty obrazku ==> GIF a musi se to dal zpracovat
// tady ta kontrola na nemenne full je uplne k nicemu! pac se z bezpecnostnich duvodu full stejne prejmenovava!
//takze to stejne asi pujde do prdele...
var_dump($section, $item, $args);
var_dump($class::getName());
var_dump(ModuleDirs::getAdminTitle());
      //$current = self::getCurrentAdress();
      //$menu = self::getMenuTemplate();
      //$item = Core::isFill($menu, $current);
      //if (!empty($item)) {
      //  $result = $item['name'];
      //}

// mrda to tu!! nevraci se v blokach ocekavany text!!!!

      //$current = self::getCurrentAdress();
      //$modules = self::getModules();
      //$class = $modules[$current];
      //$class = self::getCurrentModule();
      //var_dump($class);//$modules,
      //var_dump($modules,  )
      //var_dump(self::getName());
      var_dump($class::getName());
$result = NULL;
      $result = ;
var_dump($value);
      //var_dump($section, $current);
/*var_dump($value);var_dump(vsprintf('ashoj %s %s', array('', '')));
      $item = Core::isFill($menu, $current);
      if (!empty($item)) {
        $current = self::getCurrentAdress(1);
        //$result = $item['section'][$current];
        $result = vsprintf($item['section'][$current], $inputtext);
      }
*/
//$weburl = Core::getUrl(array('path' => self::ADMIN_URL));
$text = NULL;
      //$current0 = self::getCurrentAdress();
      //$menu = self::getMenuTemplate();
/*
      $item = Core::isFill($menu, $current0);
      if (!empty($item)) {
        $class = $item['class'];
        $text = $class::getAdminContent($current1);
      }
      $result = $text;
*/
/*
      $item = Core::isFill($menu, $current0);
      if (!empty($item)) {
        $class = $item['class'];
        $text = $class::getAdminContent($current1);
      }
      $result = $text;
*/
$result = ;
//private static $menu_template = NULL;
/*
            $result[$polozka::URL] = array ('class' => $polozka,
                                            'name' => $polozka::getName(),
                                            'section' => $polozka::getSection(),
                                            'modules' => $polozka::getLoadModules(),
                                            );
*/
//$menu = self::getMenuTemplate();
      //$current = self::getCurrentAdress();
//$current = self::getCurrentAdress();
// vyhazet getUrl a absolutniUrl
//var_dump($current1);//var_dump($modules);
var_dump($all);
// rozlisovat blok pro cely modul, zdrejme znaceny * nebo neco takeho?!
var_dump($result);var_dump($result);
      //var_dump($result);
/*
      //$menu = self::getMenuTemplate();
      $item = Core::isFill($menu, $current);
      if (!empty($item)) {
        $module = $item['modules'];
        $current1 = self::getCurrentAdress(1);
// rozlisovat blok pro cely modul, zdrejme znaceny * nebo neco takeho?!
        $result = Core::isFill($module, $current1);
      }
*/
//$menu = self::getMenuTemplate();
$result =
// dotestovat tady na tom funkci: getLoadModules() !!!!
// dokoumat to nasazeni *
// vyber hodnot nakopat do konfiguratoru!!!!
// tady bude obsluha konstantnich textu na prelozeni, pole textu s preklady
// prekopat z metody na staticky attribut!!!!!
    protected static $globaltext = array('modules\ModuleDirs::getState' => _('Could not create galleries!'),
                      'modules\ModuleDirs::getPageTitle' => _('Web adress does not exist!'),
                      'modules\ModuleDirs::getAdminContent' => array('nocreate' => _('Cannot create directory "%s"!'),
                                                                    'alreadyexists' => _('Name "%s" already exists!'),
                                                                    'badpermit' => _('failed to rename folder to rename! bad permissions!'),
                                                                    //'badindex' => _('required database index not exists!'),
                                                                    'nounlink' => _('File "%s" does not delete!'),
                                                                    'nowrite' => _('File "%s" does not write!'),
                                                                    ),
                      'modules\ModuleDirs::deleteSelectDir' => array('noexist' => _('directory: "%s" does not exist !'),
                                                                    'nounlink' => _('failed to delete the file: "%s" !'),
                                                                    'normdir' => _('failed to delete the directory: "%s" !'),
                                                                    'badpermit' => _('can not write to picture: "%s"<br />change permission to 0777 please!'),
                                                                    ),
                      'modules\ModuleDirs::activateSelectDir' => _('failed to rename folder to activate! bad permissions!'),
                      'modules\ModulePictures::getState' => _('Class "Imagic" does not exist!'),
                      'modules\ModulePictures::synchronizeXml' => array('norename' => _('Does not rename to "%s"!'),
                                                                        'badpermit' => _('Does not for write "%s"<br />change permission to 0777 please!'),
                                                                        ),
                      'modules\ModulePictures::getAdminContent' => array('badlimit' => _('Exceeding limit upload! [%s of %s]'),
                                                                        'nomkdir' => _('can not create a folder for thumbnails'),
                                                                        'badpermit' => _('can not write to folder: "%s"%schange permission to 0777 recursive please!'),
                                                                        'noread' => _('can not read to picture: "%s"<br />change permission to 0777 please!'),
                                                                        'nowrite' => _('can not write to picture: "%s"<br />change permission to 0777 please!'),
                                                                        'nodelthumb' => _('Failed to delete thumbnail: %s !'),
                                                                        'nodelfull' => _('Failed to delete full: %s !'),
                                                                        'nodelonethumb' => _('failed to delete a single thumbnail: %s !'),
                                                                        'nodelonefull' => _('failed to delete one full: %s !'),
                                                                        ),
                      '',
                      );
//class ExceptionGlobalText extends Exception {}
      //classes\jQuery,
      //classes\JavaScript,
//Core::enableDebug();
//Core::enableDebug();
 // nasadit!
//sprintf('%s%s', $path, Config::SOURCE);
var_dump($admin_path);
/*
// nastavovat weburl a adminurl a i pripadne path? a nebo i admin path??
    public static function setWebPath($path = NULL) {
      self::$web_path = $path;
      self::$crypt_path = sprintf('%s%s', self::$web_path, self::CRYPT_FILE);
    }
*/
//private static $web_path = NULL;
var_dump($weburl, self::$adminurl.self::ADMIN_URL);
//Core::getUrl(array('path' => self::ADMIN_URL)); // tu vyhodit URL
// vyhazet spatne promenne a nasadit tam spravne!!!!!
// dodelat!!!!! a aplikovat!!!!
    // nastavovat pro admin a stranky weburl z indexu,
    //moduly nesmi mit v sobe automaticke nacitani adresy...!!!!!!
      $weburl = Core::getUrl(array('path' => $path)); // tu vyhodit URL
var_dump($weburl, self::$adminurl);
var_dump(self::$crypt_path);
var_dump($weburl.self::ADMIN_URL, self::$adminurl.self::ADMIN_URL);$weburl.self::ADMIN_URL
var_dump($weburl, self::$weburl);exit;
$weburl
$weburl
$path = NULL
'admin/'
//var_dump($weburl, $adminurl);
var_dump($admin_path);
var_dump(self::$crypt_path);
self::$path = $path;  //path pro soubory
      private static $path = NULL;  // ????
//public static function setWebPath($path = NULL) {
// predelat set webpath na setpath, sjednotit do implementacni tridy, slednotit promenne!
//kontrola zavislosti
      //var_dump(class_exists('XmlStorage'), class_exists('Core'), class_exists('Administration'));
      //XmlStorage, Core, Administration, Form, Html
// rozlisovat blok pro cely modul, zdrejme znaceny * nebo neco takeho?!
// picovina, musi se nastavovat je v adminu a moduly si to budou sami zpracovavat do svych privatnich promennych
    //public static function setPath($path = NULL, $adminurl = NULL, $weburl = NULL); //nastavovani pathe pro moduly
public function __get($name) {
      return self::$name;
    }.
/*
    public static function getPath() {
      return (object) array('path' => self::$path,
                  'adminurl' => self::$adminurl,
                  'weburl' => self::$weburl);
    }
*/
//ModuleSettings
    //var_dump(ModuleSettings)
    //var_dump(Administration::$weburl);
// predelat!!!!!!
/*
    private static $path = NULL;

    public static function setPath($path = NULL, $adminurl = NULL, $weburl = NULL) {
      self::$path = $path;
    }
    * var_dump($path, self::$path);
    * self::
    * self::
*/
// tady neco kontrolovat??? propadne jeste vracet stavkovou hlasku???
$result = true;
$result = true;
self::$weburl
self::$path
self::$pathself::$path
private static $weburl;
// predelat!!!!!!!!! nacitat si z administration!!!!
//nastavovani web url pro spravne zobrazovani wait obrazku
    public static function setPath($weburl) {
      self::$weburl = $weburl;
    }
Notification::setPath($weburl); // u notifikaci udelat to same!!!!!
//ModuleHome::setPath($admin_path);
//Administration::setWebPath($admin_path);
var_dump($refreshurl, );
//$weburl = Core::getUrl(array('path' => Administration::ADMIN_URL)); // tu vyhodit url!
//var_dump($adminurl);//var_dump($weburl);
//$refreshurl = Core::getUrl(array('query' => $backarray, 'path' => Administration::ADMIN_URL));
// predelat!!!!!!
// doaplikovat, nasadit a otestovat!!!
    private static $weburl = NULL;
    private static $adminurl = NULL;
    private static $source_path = NULL;

    public static function setPath($path = NULL, $adminurl = NULL, $weburl = NULL) {
      //
      self::$adminurl = $adminurl;
      self::$weburl = $weburl;
// takto brat promenne primo z administrace! a domyslet to!!!!!
//pri prvnim pouziti prenest do staticke promenne (ty 3 promenne a roztridit) a tam to nechat ulozeny a z tama to pouzivat
      var_dump(self::$weburl, Administration::getPath()->path);
    }
// votestovat na necem implementovat?!
// vracet hodnoty i s index.php ... a nebo nejak tak!?????
// pripadne i do parametru na zapinani .../index.php
  //echo "ahoj ja jsem index of vypis by gfdesign.cz ;)\n";
  //var_dump($_SERVER['REQUEST_URI']);
horse
stable
town
//var_dump();
//var_dump($dirs, $files);
//$files_href
//var_dump($_SERVER['REQUEST_URI']);
    //var_dump(date('r'));
    //var_dump($path); 'var/www'.
    //var_dump();
    //var_dump($path, file_exists($path));
    //var_dump(__DIR__);
    //var_dump($path);
var_dump(Core::isEmpty($files, array()));
->appendAfter(Html::br())
//echo $result;
echo 'omg rolf wait please...';
/*
      foreach ($files as $file) {
        //
      }
*/
//->insert($dirs_href)
                      //->insertContent($files);
//$content = NULL;  //zamerne pridano
 //var_dump($path.$item, );
        //var_dump($item);
//array(dirname($uri)),
      //$func = function($value) { return Html::a()->href($value)->setText($value); };
      //$dirs_href = array_map($func, $dirs);

      //$updir = Html::a()->href(dirname($uri))->setText('..');
if ($count > 0) {
              $itm->insert(Html::img()->src($iconpath.'dir_full.png'));
            } else
//filemtime();
            //filesize();
            //var_dump($info);
//dir_empty.png
            //dir_full.png
            ////var_dump($type);
             udelat pocitani co je uvnitr!
            //var_dump($pathfile);
var_dump($row);
var_dump($count);
            //var_dump($count);
            //exit;
//var_dump($suffix);
//echo Html::img()->src($src)->alt('');, file_exists($src)
upce:
rozřazovací test.
úspěšnost 33,75 %.
st32304
Číslo objednávky SkyRunner:
90729-22293
3.11. - 91103-19512
brain death
pekna likvidace pendolina: Wanted

nejhorsi web:
http://www.fit.vutbr.cz/~eysselt/index.html.cz
A1/4 - strav.ref.
vratit na knizku => 7500+1000,- (vybráno 7.7.2010) - OKA
skákací chůdy - jara tucek
721 333 469 - radox (podsednik)
out:
rami: 700,- mamka!
loki: 100,-
            //$src = $iconpath.$suffix.'.png';  // doresit problem s cestama!!!!
//var_dump($webpath.$suffix.'.png');
            //var_dump($absolutepath.$suffix.'.png', file_exists($absolutepath.$suffix.'.png'));
            //var_dump($pathfile, $uri.$item);
//var_dump($suffix);
//velikost, datum
            //$path
// osetrovat neexistujici pripony
//var_dump($pathfile);
      //var_dump($webpath);
//var_dump(__DIR__, $iconpath);
//var_dump($absolutepath);
      //$iconpath = __DIR__.'/pripony/';
var_dump($uri, dirname($uri));
var_dump($pathfile, is_readable($pathfile));
/*
                                'display_opt',
                                'news_ticker_sound' => array(T_BOOL, NULL, true, _('Whether or not to play sounds when a news item appears along the status bar. This is a client-setting only.')),
                                'fullscreen' => array(T_BOOL, NULL, false, _('Sets, whether OpenTTD is supposed to run in fullscreen-mode. This is a client-setting only.')),
                                'language',
                                'resolution',
                                'screenshot_format',
                                'savegame_format',
                                'rightclick_emulate',
                                'small_font',
                                'medium_font',
                                'large_font',
*/
'never_expire_airports' => array(T_BOOL, NULL, ),
 // = 64  //Current value for 'max_bridge_length' is: '64' (min: 1, max: 2048)
// = 1 //Current value for 'command_pause_level' is: '1' (min: 0, max: 3)
//DJ Глюк - Дискотека в стиле Dubstep Vol. 1 (http://radio.djgluk.ru) Июнь 2011
// udelat obalovaci metodu!!!??
//var_dump($this->element->group);
      //$index = $this->element->lastindex;
      //$index = $this->element->lastindex;
      //var_dump($this->element->lastindex);
      //$this->element->form[$index]['group'][] = $name;
var_dump($value['group'], $grp);
//$func = function($value, $indexgroup) { if ($value['group'] == $indexgroup) { var_dump($, $value['html']); return $value['html']; } else { return NULL; } };  //vyber indexu html
          //$row =
          //$r = array_map($func, $this->element->form, array($index));
          //$this->element->group
        //var_dump($this->element->form);
        //var_dump('generuju skupinu');
      //print_r($this->element->form);
      //$this->element->form
      //print_r($this->element->group);
      //print_r($this->element->form);
      // dodelat! renderovat skupiny a pak prvky do nic
//var_dump($group);
/*
          $f = $this->element->form;
          $a = array();
          $func = function($item, $key, $prefix, &$a) { if ($item['group'] == $prefix) { $a = $item['html']; } /* var_dump($item['group'], $prefix);*/ };
          // { if ($value['group'] == $indexgroup) { var_dump($, $value['html']); return $value['html']; } };
          array_walk($f, $func, $index, $a);
          var_dump($a);
          //$r = $f;
*/
var_dump($, $value['html']);
/*
          foreach ($this->element->form as $val) {
            if ($val['group'] == $index) {
              $r[] = $val['html'];
            }
          }
*/
          //global $index;else { return NULL; }var_dump($indexgroup);
 // pokusit se o optimalizaci!
 { return $value['html']; }
var_dump($r);
var_dump($r);
          var_dump($row);
//if (!is_null($group)) {
//} else {
//var_dump($group, $this->element->form);
//}
//var_dump($r);
var_dump($group, $group['name']);
//'content' => $r
 // prenaset i nejake nastaveni skupiny, jako tvar, tridy atp.
            //var_dump($group['settings']); //tu budou preddefinovane konstanty, jako u labelu
//, Html::elem('div')->insert(Html::elem('span')->setText('%group_name%'))
            // dodelat sablonovani na html skupiny!'content' => $r
, 'class' => 'kokod-debil', 'id' => 'ujo'
, array('id' => 'sd-as')
//$data = array('group_name' => $group['name'],
              //              );
              //;->setTemplate($data)->render();
var_dump($out);
var_dump(preg_split('/ = | =/', $row, 2));
//print_r($conf);
  //
  //var_dump(parse_ini_file('openttd.cfg', true));
  //$file = file_get_contents('openttd.cfg');
  //var_dump(parse_ini_string($file));
// uz konecne vyresit ve formulari ty skupiny!!!!! tady jsou totiz zapotreby!
//var_dump($section);
//var_dump(Language::getInstance()->getDefaultLanguage());
  //Language::getInstance()->setDefaultLanguage('cs');
//const ACTION = 'akce';
/*
 *
 * //var_dump($conf['misc'], $loadconf['misc']);
var_dump(array_key_exists('misc\n', ));
$a = array(["misc
"]=>
  array(32) {
    ["display_opt"]=>
    string(83) "SHOW_TOWN_NAMES|SHOW_STATION_NAMES|SHOW_SIGNS|FULL_ANIMATION|FULL_DETAIL|WAYPOINTS
"
    ["news_ticker_sound"]=>
    string(5) "true
"
    ["fullscreen"]=>
    string(6) "false
"
    ["graphicsset"]=>
    string(1) "
"
    ["soundsset"]=>
    string(1) "
"
    ["musicset"]=>
    string(1) "
"
    ["videodriver"]=>
    string(1) "
"
    ["musicdriver"]=>
    string(1) "
"
    ["sounddriver"]=>
    string(1) "
"
    ["blitter"]=>
    string(1) "
"
    ["language"]=>
    string(10) "czech.lng
"
    ["resolution"]=>
    string(10) "1920,1150
"
    ["screenshot_format"]=>
    string(1) "
"
    ["savegame_format"]=>
    string(1) "
"
    ["rightclick_emulate"]=>
    string(6) "false
"
    ["small_font"]=>
    string(1) "
"
    ["medium_font"]=>
    string(1) "
"
    ["large_font"]=>
    string(1) "
"
    ["small_size"]=>
    string(2) "8
"
    ["medium_size"]=>
    string(3) "10
"
    ["large_size"]=>
    string(3) "16
"
    ["small_aa"]=>
    string(6) "false
"
    ["medium_aa"]=>
    string(6) "false
"
    ["large_aa"]=>
    string(6) "false
"
    ["sprite_cache_size"]=>
    string(2) "4
"
    ["player_face"]=>
    string(2) "0
"
    ["transparency_options"]=>
    string(2) "0
"
    ["transparency_locks"]=>
    string(2) "0
"
    ["invisibility_options"]=>
    string(4) "191
"
    ["keyboard"]=>
    string(1) "
"
    ["keyboard_caps"]=>

);
*/
var_dump($loadconf['misc']);

exit;
/*
          case 'addGroup':
            //$group = $name;
            //$type = NULL;
            // musi byt druhy parametr, nepovinny, pole pro predavani konfigurace skupiny!!!!
          break;
*/
//$loadconf[$section][$key]
        //$f->setValues($var);
//$this->element->group[]
//Core::isEmpty($this->element->group, count($this->element->group) - 1),
//'group' => (!empty($this->element->group) ? count($this->element->group) - 1 : NULL),
//var_dump($group);//print_r($this->element->form);
//var_dump($this->element);
      $this->searchElement($name);
    private function searchElement($name) {
      $form = $this->element->form;
      foreach ($form as $item) {
        if ($item['name'] == $name) {
          var_dump($item);
        }
      }
    }
//var_dump($this->element->values);//$this->element->values
$auto_select = false;
($auto_select ? Core::isEmpty($this->getArgs($name), $this->element->values[$name]) : )
var_dump($this->getArgs($name));
/*
          //var_dump($values);
          $predef = Core::isFill($conf, $section);
          if (is_array($predef)) {
            var_dump($predef);

            $name = sprintf('%s[%s]', $section, $key);
*/

/*
            //nacitani hodnot po skupinach
            switch ($type) {
              case self::T_BOOL:
                $f->addCheckbox($name, array('label' => $value[3], 'checked' => $current, 'returnvalue' => true));
              break;

              case self::T_TEXT:
              case self::T_INT: // asi jen rozdil v typovani!
                $f->addText($name, array('label' => $value[3], 'value' => $current, 'returnvalue' => true));
              break;

              case self::T_RANGE:
                //$f->addRange($key, array('label' => $value[3], 'value' => $current, 'min' => $val[0], 'max' => $val[1], 'step' => $val[2], 'returnvalue' => true));
                $f->addNumber($name, array('label' => $value[3], 'value' => $current, 'title' => sprintf('<%s-%s>', $val[0], $val[1]), 'min' => $val[0], 'max' => $val[1], 'step' => $val[2], 'returnvalue' => true));
              break;

              case self::T_SELECT:
                $f->addSelect($name, array('label' => $value[3], 'selected' => $current, 'value' => $val, 'returnvalue' => true));
              break;

              default:
                $f->addTextArea($name);
              break;
            }
*/
          //}
/*
      $res = array();
      foreach ($conf as $section => $values) {
        $f->addGroup('[ '.$section.' ]');

        $var = Core::isFill($loadconf, $section);

        $row = array();
        foreach ($values as $key => $value) {
          if (is_array($value)) {
            $type = $value[0];
            $val = $value[1]; //value
            //var_dump($value[4]);  // zaimplementovat: dodatecna podminka!?!
            //var_dump($value);
            //var_dump($key);

            $current = ($load ? Core::isFill($var, $key) : $value[2]);

            $name = sprintf('%s[%s]', $section, $key);

            //nacitani hodnot po skupinach
            switch ($type) {
              case self::T_BOOL:
                $f->addCheckbox($name, array('label' => $value[3], 'checked' => $current, 'returnvalue' => true));
              break;

              case self::T_TEXT:
              case self::T_INT: // asi jen rozdil v typovani!
                $f->addText($name, array('label' => $value[3], 'value' => $current, 'returnvalue' => true));
              break;

              case self::T_RANGE:
                //$f->addRange($key, array('label' => $value[3], 'value' => $current, 'min' => $val[0], 'max' => $val[1], 'step' => $val[2], 'returnvalue' => true));
                $f->addNumber($name, array('label' => $value[3], 'value' => $current, 'title' => sprintf('<%s-%s>', $val[0], $val[1]), 'min' => $val[0], 'max' => $val[1], 'step' => $val[2], 'returnvalue' => true));
              break;

              case self::T_SELECT:
                $f->addSelect($name, array('label' => $value[3], 'selected' => $current, 'value' => $val, 'returnvalue' => true));
              break;

              default:
                $f->addTextArea($name);
              break;
            }
          }
        }
      }
*/
// dodelat a zprovoznit

  //exit(0);

// seskupovani!!!!! a seradit dle generovanych konfigu!!!!!

  //$a = parse_ini_file('openttd.cfg');
  //var_dump($a);


/*
list_cmds
alias
ban
banlist
cd
clear
clientname
clients
companies
companypw
connect
content
debuglevel
echo
echoc
exec
exit
gamelog
getdate
getseed
help
infocmd
join
kick
listai
listailibs
listaliases
listcmds
listsettings
load
ls
move
newgame
part
pause
pwd
quit
rcon
reconnect
reloadai
rescanai
rescannewgrf
resetcompany
resetenginepool
resetengines
restart
return
rm
save
saveconfig
say
sayclient
saycompany
screenshot
script
scrollto
serverinfo
setting
settingnewgame
startai
status
stopai
unban
unpause
*
list_cmds sett
listsettings
setting
settingnewgame



2cc_chimaera_addon.2/chim.grf =
2cc_subways_from_the_2cc_set-1.0/2cc_subways.grf = 2 2
2cc_trainset-2.0.0beta4.1/2cctrainset.grf = 2 2
*
2cc_trainset-2.0.0beta4.1\2cctrainset.grf = 2 2
2cc_chimaera_addon.2\chim.grf =
egrvts.1.0\egrvts.grf =
*
*
*
    /*
                    'win32' => array ('display_hz',
                                      'force_full_redraw = [true | false]',
                                      'fullscreen_bpp',
                                      'window_maximize = [true | false]'
                                      ),
    */
// dodelat!! + ve formulari upravit to nacitani!!!!
 if () {
              var_dump($section);
              $specialgroup
            }
//$a = array_map($func, $group);
//$func = function($value) { substr_compare(); };
      //var_dump($value); //$row = array();
var_dump($grp, $specialgroup);
/*
            foreach ($values as $key => $value) {
              $name = sprintf('%s', $section);
              //$current = $item[2];
              //$label = $item[3];
              $f->addText($section, array('label' => $key, 'value' => $value, 'returnvalue' => true));
            }
*/
//var_dump($section);
            //var_dump($values);
     //var_dump($f->getValues());
// pri zpracovani se to posklada v poradi ve kterem to doslo...
        //++vyhodi se indexy: [tl] a [config_name] ; tj tlacitko a nazev konfigu
//var_dump($loadconf);
// pri nacitani loadovat z loadconf a dodatecne dohledavat blok v config poli pro spravnou interpretaci !
//$load = (!empty($loadconf));
          // u sekci "preset-xxx" a "newgrf" odchytavat jiny typ zobrazovani a pridavani!!!
          //respektive ne pridavani ale spis slucovani do textarea!!!
      // jak probiha parsrovani tak bude reverzne probihat i generovani a ulozeni
      //var_dump($data);
      //var_dump($key);
/*
      $res = array();
      foreach ($data as $key => $items) {
        $res[] = sprintf('[%s]', $key);
        foreach ($items as $k => $v) {
          //var_dump($k, $v);
          // jinak opravit!
          //$res[] = sprintf('%s = %s', $k, $v);
        }
        $res[] = '';
      }
      $res = implode(PHP_EOL, $res);
*/
//$conf = self::getConfig();
          // data nactena z postu, vkldat jian data!!!!!
          //$result = self::saveIniFile('aaa.cfg', $conf);
          //$result = 'nacitani ze slozky';
// kua tady tu ukladaci-generovaci logiku predelat do save metody!!!!!
$ cat > minecraft.sh << EOF
#!/bin/sh
BINDIR="\$(dirname "\$(readlink -fn "\$0")")"
cd "\$BINDIR"
java -Xincgc -Xmx1G -jar craftbukkit-0.0.1-SNAPSHOT.jar
EOF
chmod +x minecraft.sh
      //var_dump($data);
      //var_dump($v, $o);
      //$func = function($k, $v, $o) {  return sprintf('%s = %s', $k, Core::isFill($o, $k, $v)); };
// tu osetrovat stavy boolean prvku!!!
//var_dump($original);
// negenerovat z postu ale z acteneho prvniho configu a postem pouze prepisovat informace!
//brat z orginalu!!!!
/*
      $row = array();
      foreach ($original as $group => $values) {
        if (!is_null($values)) {
          $row[] = sprintf('[%s]', $group);
          //if (is_array($values)) {  //pokud jsou hodnoty pole

          $rowdata = Core::isFill($data, $group);

          //var_dump([$group]);

            foreach ($values as $key => $value) {
              //var_dump($key);

              $row[] = sprintf('%s = %s', $key, Core::isFill($data[$group], $key, $value));
            }

          //var_dump($values, $data[$group]);
          // kua trochu vic uplne jinak!!!!!
            //$r = array_map($func, array_keys($values), $values, Core::isFill($data, $group));
            //var_dump($r);
            //$row = array_merge($row, $r);
          //} else {
          //  $row[] = $values;
          //}
        }
        $row[] = '';
      }//$row = array_merge($row, $r);
      $complet = implode(PHP_EOL, $row);
*///var_dump($values);
//var_dump($complet);
      // vracet bool jestli se povedlo ulozit nebo ne?!

      // dodelat ukladani do souboru konfigurace!!!!

var_dump($this->handler->state, $this->handler->mode);
      //return $res;  // docasne
var_dump($this->handler->pointer);
 else {
          var_dump($values);
        }
var_dump($v);
/*
cs_rail_set_v1.4-1.0.5/rail-cs-ottd.grf =
cs_road_set_2.0-1.0.5/road-cs-ottd.grf =
cs_stationset_v0.1-1/csstationsw.grf =
cs_platforms_set-1/csplatformsw.grf =
csdsignalset_v2.01-1/csdsignalsetw.grf =
cs_tram_set_v._0.2__0.1-1.0.5/cstramsetw.grf =
vacuum_tube_train-0.22/vactrain.grf =
generic_tram_set.0.4/generictrams.grf =
new_trains-0.3/newtrain.grf =
opengfx_trains-0.2.5/ogfx-trains.grf = 0 0 0 0
polish_pkp_set-1.6/pkp_set_1.6.grf =
romanian_train_set.0.2/romtrain_v0.2_passengercarsw.grf =
swedish_trains.7.3/ai_swedish.grf =
total_town_replacement_set-3.11/ttrs3w.grf = 1 0 2 1
generic_european_train_set_ges-alpha2.2/ges_pa2.2.grf =
modular_locomotive_shed_stations-0.2.6/mlss026.grf =
industrial_stations_renewal.0.8.0/indstatrw.grf =
suburban_stations-1/ae_subuw.grf =
japanese_stations-2.0a/jpstationsw.grf =
ecs_town_vector-1.1.219jun2011/ecstown.grf = 0 0 0 0 0
ecs_agricultural_vector-1.1.219jun2011/ecsagri.grf = 0
ecs_basic_vector_ii-1.1.219jun2011/ecsbas2.grf = 0
ecs_construction_vector-b527dec2010/ecsconstw.grf =
ecs_chemical_vector_ii-1.1.219jun2011/ecschem2.grf = 0
ecs_machinery_vector-1.1.219jun2011/ecsmach.grf = 0
ecs_wood_vector-1.1.219jun2011/ecswood.grf = 0
dwestationtiles_industrial_ter-v0.7/dwe_stat_r.grf =
ukrs2_uk_railway_addon_set-1.1/pj1kadd.grf =
uk_renewal_set_addon_pack.3.04/ukrsap1w.grf =
uk_railway_set_tracks-1.2/pb_trax.grf =
uk_renewal_set.3.04/pb_ukrs.grf =
modern_tram_set-3.1/motraset_r3.1.grf =
monolev_replacement_set_v0.3.6-0.3.7/mrsv037.grf =
transrapid_track_set-1.0.0/traratrk.grf =
trolleybus_set-0.2/trolley.grf =
swedish_rails-0.6.0/swedishrails.grf = 0 1975 0 1975 0
ecs__firs_vehicle_set-2011.06.21/efrefit.grf = 0
ecs_cargoset_for_standard_ttd_ve-2010.12.05/ecsrefit.grf =
hover_bus.1.0/hoverbus_1.0.grf =
hungarian_truck_set-2.1/teherautow.grf =
improved_road_vehicles__for_db_s.1.0/irv.grf =
light_road_vehicle_set-0.2beta2/lrvs-0.2.grf =
"long_vehicle_introduction_date-v1/long vehicle introduction datew v1.grf" =
long_vehicles-v404oct2008/4lvw.grf =
romanian_road_vehicle_set.0.5.0/rvr_050w.grf =
dutch_tram_set.rc1/dutchtramsetw.grf =
nzr_class_de.1.2/nzrde.grf =
dutch_catenary-1/dutchcatenary.grf =
dutch_trainset-1/dutchtrainsw.grf =
dutch_trainset_cargo_extension-1/dutchtrainscargoext.grf =
ikarus_set-5.3/ikarus2w.grf =
chips_station_set-0.5/chips.grf =
fish_ship_set-0.9.2/fish.grf =
very_large_ships.0.1/vl_shipw.grf =
generic_cars-0.4/cars.grf =
generic_buffers.0.1/buffers.grf =
2cc_trainset-2.0.0beta4.1/2cctrainset.grf = 2 2
2cc_chimaera_addon.2/chim.grf =
egrvts.1.0/egrvts.grf =

*/
// predelat na nove/nacitane!!!! tedka je to dost vazane na nove!!!!!????????????????
//var_dump($loadconf);
        //var_dump($f->config_name);
(!empty($_POST) ?  : $item[2])
//self::$adminurl = $adminurl;  //url adminu$adminurl = NULL,
var_dump(Core::makeUrl(self::$weburl, array('query' => array(self::A_ACTION => self::P_LIST, self::A_ID => $_GET[self::A_ID]), 'path' => 'index.php')));
  //const LANG = 'cs';
var_dump(Config::LANG);
//use classes\SqliteStorage;
//var_dump(Core::setCharset(), Core::setCharset('Windows-1250'));
//$columns['id'] = Sql::INTEGER;
var_dump(, $this->pointer->path);
var_dump($create);
//$insert = array();
/*
    public function setTable() {
      //nastaveni pouzivane tabulky pro instanci
    }
*/
  class OpenTTDconfig {
    const VERSION = 2.1;

    const CONFIG_DIR = 'configs'; //adresar konfigu

    const T_BOOL = 'bool';  //true/false
    const T_TEXT = 'string'; //text
    const T_INT = 'int';  //cislo
    const T_RANGE = 'range';  //rozsah cisel
    const T_SELECT = 'select';  //vyber hodnot
    // jeste jeden typ na pridavani volitelnych textu

    private static $path, $weburl;

    public static function setPath($path = NULL, $weburl = NULL) {
      self::$path = $path;
      self::$weburl = $weburl;  //url webu
    }

    private static function getConfig() {
      $conf = array('misc' => array('display_opt',
                                    'news_ticker_sound' => array(self::T_BOOL, NULL, true, _('Whether or not to play sounds when a news item appears along the status bar. This is a client-setting only.')),
                                    'fullscreen' => array(self::T_BOOL, NULL, false, _('Sets, whether OpenTTD is supposed to run in fullscreen-mode. This is a client-setting only.')),
                                    'graphicsset',
                                    'soundset',
                                    'musicset',
                                    'videodriver',
                                    'musicdriver',
                                    'sounddriver',
                                    'blitter',
                                    'language' => array(self::T_TEXT, NULL, 'english.lng', _('The language file to use for strings in the game. This is a client-setting only. See the lang directory for possible files, filename is the one to use. filename is case sensitive.')),
                                    'resolution' => array(self::T_TEXT, NULL, '640,480', _('The resolution the game will run in. This is a client-setting only. Where x and y represent a linear length in pixels.')),
                                    'screenshot_format' => array(self::T_SELECT, array('' => '', 'bmp' => _('bmp'), 'png' => _('png'), 'pcx' => _('pcx')), '', _('The format to use when taking screenshots. This is a client-setting only. "BMP" is the default setting')),
                                    'savegame_format' => array(self::T_SELECT, array('' => _('<empty> - Will use the best setting for your system (usually zlib, if support has been compiled in, otherwise none).'), 'memory' => _('memory - Unknown, does not appear to work.'), 'lzo' => _('lzo - Use lzo compression, does not appear to work.'), 'zlib' => _('zlib - Use zlib compression. This is only available if you have the game compiled with zlib support.'), 'none' => _('none - Use no compression.')), '', _('The save game format to use. This is a client-setting only. This should only be used for testing only, as the best option for your system will be selected by default.')),
                                    //'rightclick_emulate' => array(self::T_BOOL, NULL, false, _('Enables right click emulation on systems that do not have a right mouse button. To use this press ctrl and then click (or hold) the left mouse button to perform actions as if you are clicking the right mouse button. This is a client-setting only.\\nOn OS X if you have an extended Macintosh keyboard the command key is used to instead of the ctrl key.')),
                                    'small_font',
                                    'medium_font',
                                    'large_font',
                                    'small_size',
                                    'medium_size',
                                    'large_size',
                                    'small_aa',
                                    'medium_aa',
                                    'large_aa',
                                    'sprite_cache_size',
                                    'player_face',
                                    'transparency_options',
                                    'transparency_locks',
                                    'invisibility_options',
                                    'keyboard',
                                    'keyboard_caps'
                                    ),
                    'music' => array ('custom_1',
                                      'custom_2',
                                      'effect_vol' => array(self::T_RANGE, array(0, 127, 1), 127, _('volume effect')),
                                      'music_vol' => array(self::T_RANGE, array(0, 127, 1), 127, _('music volume')),
                                      'playing' => array(self::T_BOOL, NULL, true, _('launch music')),
                                      'playlist',
                                      'shuffle' => array(self::T_BOOL, NULL, false, _('This setting defines whether or not the music tracks will be played on a random order.'))
                                      ),
                    'difficulty' => array('competitor_speed' => array(self::T_SELECT, array(_('very slow'), _('slow'), _('medium'), _('fast'), _('very fast')), 2, _('If competitors are set to greater than zero then, competitor speed sets the speed at which the AI competitors will build.')),
                                          'construction_cost' => array(self::T_SELECT, array(_('low'), _('medium'), _('high')), 1, _('Sets the cost of construction in the game.')),
                                          'diff_level' => array(self::T_SELECT, array(_('easy-mode'), _('normal-mode'), _('hard-mode'), _('custom')), 0, _('Sets the pre-defined difficulty levels in the game.')),
                                          'disasters' => array(self::T_SELECT, array(_('off - no disasters occur'), _('on - disasters occur occasionally')), 1, _('Sets whether disasters off or on for a new map.')),
                                          'economy' => array(self::T_SELECT, array(_('steady - smaller, more frequent changes'), _('fluctuating - larger, less frequent changes')), 1, _('Sets the economic condition for a new map.')),
                                          'initial_interest' => array(self::T_SELECT, array(2 => _('2% interest'), _('3% interest'), _('4% interest')), 2, _('Sets the initial interest charged on loans for a new map.')),
                                          'line_reverse_mode' => array(self::T_SELECT, array(_('at end of line, and at stations'), _('at end of line only')), 0, _('Sets conditions where trains can reverse direction.')),
                                          'max_loan' => array(self::T_RANGE, array(100000, 500000, 50000), 200000, _('Sets the maximum initial loan for a new game. Always in British Pounds. Changing the currency under the [locale] section or in the Game options window will modify the maximum loan amount by the exchange rate of the chosen currency. The maximum loan amount will increase over time if inflation is on in the [economy] section.')),
                                          'max_no_competitors' => array(self::T_RANGE, array(0, 14, 1), 2, _('Sets the number AI competitors in the game.')),
                                          'number_industries' => array(self::T_SELECT, array(_('none'), _('very low'), _('low'), _('normal'), _('high')), 3, _('Sets the frequency of industries for a new map.')),
                                          'industry_density' => array(self::T_RANGE, array(0, 5, 1), 5, _('industry density')),
                                          'number_towns' => array(self::T_SELECT, array(_('very low'), _('low'), _('normal'), _('high'), _('custom')), 2, _('Sets the number of towns created on a new map. The custom setting is modified by the custom_town_number setting in the [game_creation] section.')),
                                          'quantity_sea_lakes' => array(self::T_SELECT, array(_('very low'), _('low'), _('medium'), _('high')), 1, _('Sets the quantity of water features on a new map.')),
                                          'subsidy_multiplier' => array(self::T_SELECT, array(_('1.5x the normal rate'), _('2.0x the normal rate'), _('3.0x the normal rate'), _('4.0x the normal rate')), 1, _('Sets the bonus multiplier for subsidies offered in the game.')),
                                          'terrain_type' => array(self::T_SELECT, array(_('very flat'), _('flat'), _('hilly'), _('mountainous')), 0, _('Sets the terrain type for generating a new map.')),
                                          'town_council_tolerance' => array(self::T_SELECT, array(_('permissive'), _('tolerant'), _('hostile')), 1, _('Sets the city council\'s attitude toward area restructuring in the game. A player rated "poor" or worse by the council will not be allowed to place stations or demolish town roads, bridges or buildings. The less tolerant the council is set to be, the faster their rating will fall due to the demolition of town assets (including trees on otherwise open land). The council\'s rating will improve over time by effectively moving freight, mail and people to and from stations in the town\'s area of control.')),
                                          'vehicle_breakdowns' => array(self::T_SELECT, array(_(' none (no breakdowns regardless of the condition of the vehicle)'), _('reduced'), _('normal')), 2, _('Sets the frequency which vehicles break down in the game.')),
                                          'vehicle_costs' => array(self::T_SELECT, array(_('low'), _('medium'), _('high')), 0, _('Sets the running (maintenance) costs level for all vehicles.')),
                                          ),
                    //'gameopt' => array('diff_custom = 2,2,1,3,300,2,0,2,0,1,2,0,1,0,0,0,0,0'), viz: http://wiki.openttd.org/Diff_custom
                    'game_creation' => array ('town_name' => array(self::T_SELECT, array('english' => 'english', 'french' => _('french'), 'german' => _('german'), 'american' => _('american'), 'latin' => _('latin'), 'silly' => _('silly'), 'swedish' => _('swedish'), 'dutch' => _('dutch'), 'finnish' => _('finnish'), 'polish' => _('polish'), 'slovakish' => _('slovakish'), 'norwegian' => _('norwegian'), 'hungarian' => _('hungarian'), 'austrian' => _('austrian'), 'romanian' => _('romanian'), 'czech' => _('czech'), 'swiss' => _('swiss'), 'danish' => _('danish'), 'turkish' => _('turkish'), 'italian' => _('italian'), 'catalan' => _('catalan')), 'english', _('Town name')),
                                              'landscape' => array(self::T_SELECT, array('temperate' => _('Temperate'), 'arctic' => _('Sub-arctic'), 'tropic' => _('Sub-tropical'), 'toyland' => _('Toyland')), 'temperate', _('There are 4 climates, Temperate, Sub-tropical, Sub-arctic and Toyland, each with its own landscape. Apart from a different set of graphics for the buildings and scenery, each one has a different set of vehicles and industries. Most vehicles are shared between climates, and Sub-arctic and Sub-tropical climates have an identical set of vehicles. The climate also affects characteristics of the game such as requirements for towns to grow, and growth-rate.')),
                                              'snow_line' => array(self::T_INT, NULL, 56, _('indicates the snowline level.')),
                                              'snow_line_height' => array(self::T_RANGE, array(2, 13, 1), 7, _('This setting allows you to determine at what "altitude" snow will appear.')),
                                              'starting_year' => array(self::T_INT, NULL, 1950, _('starting year [yyyy]')),
                                              'land_generator' => array(self::T_SELECT, array(_('Original'), _('Terra Genesis Perlin (TGP)')), 1, _('This specifies the land generation system that you use, either the Original or Terra Genesis Perlin (TGP).')),
                                              'oil_refinery_limit' => array(self::T_RANGE, array(12, 48, 1), 32, _('This option determines the maximum allowed distance (in tiles) from the edge of the map for an Oil Refinery.')),
                                              'tgen_smoothness' => array(self::T_SELECT, array(_('very smooth'), _('smooth'), _('rough'), _('very rough')), 1, _('Sets the smoothness')),
                                              'variety' => array(self::T_SELECT, array(_('none'), _('very low'), _('low'), _('medium'), _('high'), _('very high')), 0, _('This sets the variety of distribution. See Variety_distribution for more info.')),
                                              'generation_seed' => array(self::T_RANGE, array(0, 4294967295, 1), 1330935289, _('generation_seed')),
                                              'tree_placer' => array(self::T_SELECT, array(_('none tree placing'), _('original'), _('improved tree placing')), 2, _('Tree placer')),
                                              'heightmap_rotation' => array(self::T_RANGE, array(0, 1, 1), 0, _('heightmap_rotation')),
                                              'se_flat_world_height' => array(self::T_RANGE, array(0, 15, 1), 1, _('se_flat_world_height')),
                                              'map_x' => array(self::T_RANGE, array(6, 11, 1), 9, _('The Map size X determines the size and shape of your map. Your map must be a rectangle with sides of lengths in powers of 2, up to a limit of 2048 tiles in each direction. OpenTTD allows you to select the Map size in the map generation window. A large map gives you more space to spread out, but a smaller map will take less memory. Therefore, newer and faster computers will be able to handle a larger map with more efficiency whereas a smaller map will be best suited to older computers.')),
                                              'map_y' => array(self::T_RANGE, array(6, 11, 1), 9, _('The Map size Y determines the size and shape of your map. Your map must be a rectangle with sides of lengths in powers of 2, up to a limit of 2048 tiles in each direction. OpenTTD allows you to select the Map size in the map generation window. A large map gives you more space to spread out, but a smaller map will take less memory. Therefore, newer and faster computers will be able to handle a larger map with more efficiency whereas a smaller map will be best suited to older computers.')),
                                              'water_borders' => array(self::T_RANGE, array(0, 15, 1), 15, _('Bitset of the borders that are water by creating an new game')),
                                              'custom_town_number' => array(self::T_INT, NULL, 1, _('The custom setting is modified by the custom_town_number.'), 'number_towns=4'),
                                              'custom_sea_level' => array(self::T_RANGE, array(2, 90, 1), 2, _('custom_sea_level')),
                                              ),
                    'vehicle' => array ('disable_elrails' => array(self::T_BOOL, NULL, false, _('Disables electrified railways. The electric trains will run on normal tracks when this setting is active and electrified railways are not available for purchase.')),
                                        'dynamic_engines' => array(self::T_BOOL, NULL, false, _('When enabled, this Engine Pool feature allows multiple NewGRF vehicle sets to exist side-by-side. Without this feature, the maximum number of different vehicles is severely limited and vehicle sets of the same type will overwrite each others vehicles and functions. Note: using multiple vehicle sets side-by-side might result in very high or very low purchase and running costs for vehicles. Mixing wagons and trains from different train sets might result in graphical errors')),
                                        'extend_vehicle_life' => array(self::T_RANGE, array(0, 100, 1), 0, _('Extends every vehicles live by x years. takes values between 0 and 100')),
                                        'freight_trains' => array(self::T_RANGE, array(1, 255, 1), 1, _('The weight of freight trains is multiplied by the multiplier set here to simulate very heavy trains for more realism.')),
                                        'mammoth_trains' => array(self::T_BOOL, NULL, true, _('You can build extremely long trains, aka mammoth trains.')),
                                        'max_aircraft' => array(self::T_RANGE, array(0, 5000, 100), 200, _('Set the amount of aircraft that a player can have.')),
                                        'max_roadveh' => array(self::T_RANGE, array(0, 5000, 100), 500, _('Set the amount of road vehicles that a player can have.')),
                                        'max_ships' => array(self::T_RANGE, array(0, 5000, 100), 300, _('Set the amount of ships that a player can have.')),
                                        'max_trains' => array(self::T_RANGE, array(0, 5000, 100), 500, _('Set the amount of trains that a player can have.')),
                                        'never_expire_vehicles' => array(self::T_BOOL, NULL, false, _('Old vehicles will stay in the vehicle list for you to choose and never become obsolete, so you can now run a Kirby with a Chiamera next to it! When enabling this setting in a running game, vehicles already disappeared from the list will not come back for purchase.')),
                                        'plane_crashes' => array(self::T_SELECT, array(_('none'), _('reduced'), _('normal')), 2, _('Set the probability of plane crashes. They can be disabled if this setting is set to \'none\'.')),
                                        'plane_speed' => array(self::T_SELECT, array(1 => _('1/1'), _('1/2'), _('1/3'), _('1/4')), 4, _('Set the speed of aircraft in relation to rail, road and water vehicles. In plain TTD, the aircraft traveled at 1/4th of ground speed.')),
                                        'road_side' => array(self::T_SELECT, array('left' => _('left'), 'right' => _('right')), 'left', _('Road side')),
                                        'servint_aircraft' => array(self::T_RANGE, array(0, 800, 1), 150, _('The default service interval when a new aircraft is built., 0=disable, min 5'), 'servint_aircraft=0||>5'),
                                        'servint_ispercent' => array(self::T_BOOL, NULL, false, _('When this switch is on the service intervals are considered to be in percents of the max. reliability rather than days. For example, if an engine has the max reliability of 80% and you set the service interval to 10% then it will go to depot at 72%.')),
                                        'servint_roadveh' => array(self::T_RANGE, array(0, 800, 1), 150, _('The default service interval when a new road vehicle is built.'), 'servint_roadveh=0||>5'),
                                        'servint_ships' => array(self::T_RANGE, array(0, 800, 1), 360, _('The default service interval when a new ship is built.'), 'servint_ships=0||>5'),
                                        'servint_trains' => array(self::T_RANGE, array(0, 800, 1), 150, _('The default service interval when a new train is built.'), 'servint_trains=0||>5'),
                                        'train_acceleration_model' => array(self::T_SELECT, array(_('default'), _('realistic')), 1, _('Select the default or a more realistic acceleration calculation for trains. With this setting set to realistic, trains will travel faster up hill, but slower through tight corners. This option has been renamed from Enable realistic acceleration for trains.')),
                                        'train_slope_steepness' => array(self::T_RANGE, array(0, 10, 1), 3, _('Sets the steepness of slopes, trains will slow down more on slopes if this setting is set to a higher value. It only applies if the realistic acceleration model is selected.')),
                                        'wagon_speed_limits' => array(self::T_BOOL, NULL, true, _('Some NewGRF\'s have wagon speed limits to make them more realistic, this option will enable/disable them.')),
                                        ),
                    'construction' => array('autoslope' => array(self::T_BOOL, NULL, true, _('This patch makes the terraforming restrictions far less severe and allows you to terraform under objects, where you normally would need to remove the object first.')),
                                            'build_on_slopes' => array(self::T_BOOL, NULL, true, _('Normally you can only build tracks and roads on slopes parallel to the incline, with this setting enabled you can build nearly everything on a slope with foundations being built automatically.')),
                                            'extra_dynamite' => array(self::T_BOOL, NULL, false, _('The town’s attitude is more lenient towards you removing their property.')),
                                            'freeform_edges' => array(self::T_BOOL, NULL, true, _('With this enabled, the map doesn\'t require to have water all around it and allows you to terraform the map\'s edges just as any place elsewhere. Selecting this feature also provides an extra set of buttons in the map generator to select the type of egde (water/freeform) for each side of the map.')),
                                            'longbridges' => array(self::T_BOOL, NULL, true, _('Allows you to build very long bridges, much longer than before.')),
                                            'raw_industry_construction' => array(self::T_SELECT, array(_('none'), _('as other industries'), _('prospecting')), 0, _('This setting will enable you to purchase and either prospect or place industries which create raw materials.')),
                                            'road_stop_on_competitor_road' => array(self::T_BOOL, NULL, true, _('It will be possible to build drive-through road stops on roads owned by competitor companies.')),
                                            'road_stop_on_town_road' => array(self::T_BOOL, NULL, true, _('It will be possible to build drive-through road stops on town owned roads.')),
                                            'signal_side' => array(self::T_BOOL, NULL, true, _('Whether signals are shown on the side that road vehicles drive on or the opposite.')),
                                            'extra_tree_placement' => array(self::T_SELECT, array(_('none'), _('only in rain forests'), _('everywhere')), 2, _('With this option, you can enable/disable the in-game generation of trees.')),
                                            'industry_platform' => array(self::T_RANGE, array(0, 4, 1), 1, _('Set how much space to an industrial country must be at least flat.')),
                                            'command_pause_level' => array(self::T_SELECT, array(_('no options'), _('all non-construction opportunities'), _('landscape modifications'), _('all features')), 1, _('This option lets you specify which options are allowed during a game break.')),
                                            //terraform_per_64k_frames = 4194304  //Current value for 'terraform_per_64k_frames' is: '4194304' (min: 0, max: 1073741824)
                                            //terraform_frame_burst = 4096  //Current value for 'terraform_frame_burst' is: '4096' (min: 0, max: 1073741824)
                                            //clear_per_64k_frames = 4194304  //Current value for 'clear_per_64k_frames' is: '4194304' (min: 0, max: 1073741824)
                                            //clear_frame_burst = 4096  //Current value for 'clear_frame_burst' is: '4096' (min: 0, max: 1073741824)
                                            'max_bridge_length' => array(self::T_RANGE, array(1, 2048, 1), 64, _('The maximum length of a bridge that will be build.')),
                                            'max_tunnel_length' => array(self::T_RANGE, array(1, 2048, 1), 64, _('The maximum length of a tunnel that will be build.')),
                                            ),
                    'station' => array ('adjacent_stations' => array(self::T_BOOL, NULL, true, _('Holding the Ctrl key while building a station directly adjacent to another one will create new station instead of merging the new tile(s) with the existing station.')),
                                        //'always_small_airport' => array(T_BOOL, NULL, ),
                                        'distant_join_station' => array(self::T_BOOL, NULL, true, _('Holding the Ctrl key while building a station pops up a dialog asking to merge the station with an existing station within the catchment area or creating a new station.')),
                                        'join_stations' => array(self::T_BOOL, NULL, true, _('Stations built next to each other will be joined as long as the station spread is not too high.')),
                                        'modified_catchment' => array(self::T_BOOL, NULL, true, _('Changes the catchment areas to be more realistically sized. With this setting enabled, the catchment area of a station tile varies depending on what "type" of station tile it is. For example, train stations have a larger catchment area than bus stations and airports have even larger catchment areas. With airports, the size of the catchment area even varies with the type of airport, with the Intercontinental Airport having the largest area.')),
                                        'nonuniform_stations' => array(self::T_BOOL, NULL, true, _('Enables you to join stations together at different angles, so you can for instance have two vertical tracks and three horizontal tracks.')),
                                        'station_spread' => array(self::T_RANGE, array(4, 64, 1), 12, _('How spread out a station can be from one end to the other. If you draw a square round a station, this is the maximum size of any side of the square in tiles.')),
                                        'never_expire_airports' => array(self::T_BOOL, NULL, false, _('Airports may have an expiry year, similar to engines. Expired airports can\'t be built any more. With this option enabled, airports never expire.')),
                                        ),
                    'economy' => array ('allow_shares' => array(self::T_BOOL, NULL, false, _('Allows you to enable or disable the ability to buy shares from competitors. You also have to wait for the company to get old enough before buying 25% or a full take over. This age is about 6 years old.')),
                                        'allow_town_roads' => array(self::T_BOOL, NULL, true, _('When disabled, towns don\'t build roads by themselves. In order for towns to grow, you have to provide the roads yourself (somewhat like SimCity, but without the zoning and stuff).')),
                                        'bribe' => array(self::T_BOOL, NULL, true, _('Allows you to bribe the local authority so that they increase your rating, if you are caught though you will be fined and won\'t be able to bribe them for a while.')),
                                        'dist_local_authority' => array(self::T_RANGE, array(5, 60, 1), 20, _('dist local authority')),
                                        'exclusive_rights' => array(self::T_BOOL, NULL, true, _('Allows you to disable the purchase of exclusive transport rights in towns. Useful (to disable?) in multiplayer games.')),
                                        'give_money' => array(self::T_BOOL, NULL, true, _('Allows you to donate money to other companies.')),
                                        'inflation' => array(self::T_BOOL, NULL, true, _('Controls whether inflation is on or off. If inflation is on, the prices of everything will increase as you progress. To balance this increase, the maximum loan available to you will increase every few years.')),
                                        'initial_city_size' => array(self::T_RANGE, array(1, 10, 1), 2, _('Set how much larger a newly founded city is compared to a town.')),
                                        'larger_towns' => array(self::T_RANGE, array(0, 255, 1), 4, _('Set how many of the towns will become cities. Cities are larger towns which are allowed to grow faster (see also next setting).')),
                                        'mod_road_rebuild' => array(self::T_BOOL, NULL, false, _('Enable if towns should remove useless pieces of road to clean up dead ends.')),
                                        'multiple_industry_per_town' => array(self::T_BOOL, NULL, false, _('This setting allows you to build two or more industries of the same type on land that comes under the jurisdiction of one town.')),
                                        //'same_industry_close' => array(T_BOOL, NULL, false, _('Industries of the same type can be built close to each other with this patch on, it could cause problems though as you may end up with ten industries of one type in one small area of your map.')),
                                        'smooth_economy' => array(self::T_BOOL, NULL, true, _('Changes in production will happen more frequently and by smaller percentages.')),
                                        'station_noise_level' => array(self::T_BOOL, NULL, false, _('With this activated, the number of airports which can be placed in the vicinity of a town is not fixed anymore. Instead it depends upon the noise level of the airports, their distance to the town centre and the town\'s attitude.')),
                                        'town_growth_rate' => array(self::T_SELECT, array(_('None'), _('Slow'), _('Normal'), _('Fast'), _('Very fast')), 2, _('Select how fast towns should grow. You can also completely disable town growth.')),
                                        'town_layout' => array(self::T_SELECT, array(_('original'), _('better roads'), _('2x2 grid'), _('3x3 grid'), _('random')), 1, _('Select how towns should build their roads. You can choose between the original algorithm, an improved algorithm, a 2x2 grid, a 3x3 grid or random. The random setting picks one of the four option randomly for each town. This option has been renamed from Select town road layout in 0.6.3.')),
                                        //'town_noise_population',  //??
                                        ),
                    'pf' => array('forbid_90_deg' => array(self::T_BOOL, NULL, false, _('Disallows trains and ships from making sharp 90 degree turns. The NPF or YAPF pathfinder for trains needs to be enabled for this option to work for trains.')),
                                  'npf.npf_buoy_penalty' => array(self::T_RANGE, array(0, 100000, 1), 200, _('npf_buoy_penalty')),
                                  'npf.npf_crossing_penalty' => array(self::T_RANGE, array(0, 100000, 1), 300, _('npf.npf_crossing_penalty')),
                                  'npf.npf_max_search_nodes' => array(self::T_RANGE, array(500, 100000, 1), 10000, _('npf_max_search_nodes')),
                                  'npf.npf_rail_curve_penalty' => array(self::T_RANGE, array(0, 100000, 1), 1, _('npf_rail_curve_penalty')),
                                  'npf.npf_rail_depot_reverse_penalty' => array(self::T_RANGE, array(0, 100000, 1), 5000, _('npf_rail_depot_reverse_penalty')),
                                  'npf.npf_rail_firstred_exit_penalty' => array(self::T_RANGE, array(0, 100000, 1), 10000, _('npf_rail_firstred_exit_penalty')),
                                  'npf.npf_rail_firstred_penalty' => array(self::T_RANGE, array(0, 100000, 1), 1000, _('npf_rail_firstred_penalty')),
                                  'npf.npf_rail_lastred_penalty' => array(self::T_RANGE, array(0, 100000, 1), 1000, _('npf_rail_lastred_penalty')),
                                  'npf.npf_rail_pbs_cross_penalty' => array(self::T_RANGE, array(0, 100000, 1), 300, _('npf_rail_pbs_cross_penalty')),
                                  'npf.npf_rail_pbs_signal_back_penalty' => array(self::T_RANGE, array(0, 100000, 1), 1500, _('npf_rail_pbs_signal_back_penalty')),
                                  'npf.npf_rail_slope_penalty' => array(self::T_RANGE, array(0, 100000, 1), 100, _('npf_rail_slope_penalty')),
                                  'npf.npf_rail_station_penalty' => array(self::T_RANGE, array(0, 100000, 1), 100, _('npf_rail_station_penalty')),
                                  'npf.npf_road_curve_penalty' => array(self::T_RANGE, array(0, 100000, 1), 1, _('npf_road_curve_penalty')),
                                  'npf.npf_road_drive_through_penalty' => array(self::T_RANGE, array(0, 100000, 1), 800, _('npf_road_drive_through_penalty')),
                                  'npf.npf_water_curve_penalty' => array(self::T_RANGE, array(0, 100000, 1), 25, _('npf_water_curve_penalty')),
                                  'opf.pf_maxdepth' => array(self::T_RANGE, array(4, 255, 1), 48, _('pf_maxdepth')),
                                  'opf.pf_maxlength' => array(self::T_RANGE, array(64, 65535, 1), 4096, _('pf_maxlength')),
                                  'path_backoff_interval' => array(self::T_RANGE, array(1, 255, 1), 20, _('path_backoff_interval')),
                                  'pathfinder_for_roadvehs' => array(self::T_RANGE, array(1, 2, 1), 2, _('Select the pathfinding algorithm for road vehicles. YAPF is the default and recommended setting, but you can still select the older pathfinders.')),
                                  'pathfinder_for_ships' => array(self::T_RANGE, array(0, 2, 1), 0, _('pathfinder_for_ships')),
                                  'pathfinder_for_trains' => array(self::T_RANGE, array(1, 2, 1), 2, _('pathfinder_for_trains')),
                                  'reserve_paths' => array(self::T_BOOL, NULL, false, _('reserve_paths')),
                                  'roadveh_queue' => array(self::T_BOOL, NULL, true, _('roadveh_queue')),
                                  'wait_for_pbs_path' => array(self::T_RANGE, array(2, 255, 1), 30, _('wait_for_pbs_path')),
                                  'wait_oneway_signal' => array(self::T_RANGE, array(2, 255, 1), 15, _('wait_oneway_signal')),
                                  'wait_twoway_signal' => array(self::T_RANGE, array(2, 255, 1), 41, _('wait_twoway_signal')),
                                  'yapf.disable_node_optimization' => array(self::T_BOOL, NULL, false, _('yapf.disable_node_optimization')),
                                  'yapf.max_search_nodes' => array(self::T_RANGE, array(500, 1000000, 1), 10000, _('yapf.max_search_nodes')),
                                  'yapf.rail_crossing_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 300, _('yapf.rail_crossing_penalty')),
                                  'yapf.rail_curve45_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 100, _('yapf.rail_curve45_penalty')),
                                  'yapf.rail_curve90_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 600, _('yapf.rail_curve90_penalty')),
                                  'yapf.rail_depot_reverse_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 5000, _('yapf.rail_depot_reverse_penalty')),
                                  'yapf.rail_doubleslip_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 100, _('yapf.rail_doubleslip_penalty')),
                                  'yapf.rail_firstred_exit_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 10000, _('yapf.rail_firstred_exit_penalty')),
                                  'yapf.rail_firstred_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 1000, _('yapf.rail_firstred_penalty')),
                                  'yapf.rail_firstred_twoway_eol' => array(self::T_BOOL, NULL, true, _('yapf.rail_firstred_twoway_eol')),
                                  'yapf.rail_lastred_exit_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 10000, _('yapf.rail_lastred_exit_penalty')),
                                  'yapf.rail_lastred_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 1000, _('yapf.rail_lastred_penalty')),
                                  'yapf.rail_longer_platform_penalty' => array(self::T_RANGE, array(0, 20000, 1), 800, _('yapf.rail_longer_platform_penalty')),
                                  'yapf.rail_longer_platform_per_tile_penalty' => array(self::T_RANGE, array(0, 20000, 1), 0, _('yapf.rail_longer_platform_per_tile_penalty')),
                                  'yapf.rail_look_ahead_max_signals' => array(self::T_RANGE, array(1, 100, 1), 10, _('yapf.rail_look_ahead_max_signals')),
                                  'yapf.rail_look_ahead_signal_p0' => array(self::T_RANGE, array(-1000000, 1000000, 1), 500, _('yapf.rail_look_ahead_signal_p0')),
                                  'yapf.rail_look_ahead_signal_p1' => array(self::T_RANGE, array(-1000000, 1000000, 1), -100, _('yapf.rail_look_ahead_signal_p1')),
                                  'yapf.rail_look_ahead_signal_p2' => array(self::T_RANGE, array(-1000000, 1000000, 1), 5, _('yapf.rail_look_ahead_signal_p2')),
                                  'yapf.rail_pbs_cross_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 300, _('yapf.rail_pbs_cross_penalty')),
                                  'yapf.rail_pbs_signal_back_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 1500, _('yapf.rail_pbs_signal_back_penalty')),
                                  'yapf.rail_pbs_station_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 800, _('yapf.rail_pbs_station_penalty')),
                                  'yapf.rail_shorter_platform_penalty' => array(self::T_RANGE, array(0, 20000, 1), 4000, _('yapf.rail_shorter_platform_penalty')),
                                  'yapf.rail_shorter_platform_per_tile_penalty' => array(self::T_RANGE, array(0, 20000, 1), 0, _('yapf.rail_shorter_platform_per_tile_penalty')),
                                  'yapf.rail_slope_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 200, _('yapf.rail_slope_penalty')),
                                  'yapf.rail_station_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 3000, _('yapf.rail_station_penalty')),
                                  'yapf.road_crossing_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 300, _('yapf.road_crossing_penalty')),
                                  'yapf.road_curve_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 100, _('yapf.road_curve_penalty')),
                                  'yapf.road_slope_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 200, _('yapf.road_slope_penalty')),
                                  'yapf.road_stop_penalty' => array(self::T_RANGE, array(0, 1000000, 1), 800, _('yapf.road_stop_penalty')),
                                  ),
                    'order' => array ('gotodepot' => array(self::T_BOOL, NULL, true, _('All vehicles can have a depot in their schedule.')),
                                      'gradual_loading' => array(self::T_BOOL, NULL, true, _('Vehicles will load cargo over a period of time, not full load instantly. If the option to show loading indicators is switched on, this will be reflected correctly.')),
                                      'improved_load' => array(self::T_BOOL, NULL, false, _('An improved loading algorithm, which loads only one vehicle at a time until it\'s completely full, before loading the next vehicle. When disabled, all vehicles in a station are loaded simultaineously, possibly needlessly blocking multiple platforms.')),
                                      'no_servicing_if_no_breakdowns' => array(self::T_BOOL, NULL, false, _('If you have breakdowns set to none and have this switch on, your vehicles will never go to the depot for a service. Even if this setting is enabled, vehicles will still go to depot for auto-renewal and/or replacement if those settings are activated.')),
                                      'selectgoods' => array(self::T_BOOL, NULL, true, _('Cargo will only be generated at a station when a vehicle with the capacity to pick that cargo up has visited the station. Affects station ratings.')),
                                      'serviceathelipad' => array(self::T_BOOL, NULL, true, _('When enabled, helicopters will be serviced automatically each time they arrive at a helipad. This way, you don\'t need to have some airport along the helicopter\'s route for it to service. In previous versions this was located in Stations section.')),
                                      'timetabling' => array(self::T_BOOL, NULL, true, _('Allows you to use timetables for vehicles.')),
                                      ),
                    'gui' => array ('advanced_vehicle_list' => array(self::T_SELECT, array(_('Off'), _('Own company'), _('All companies')), 1, _('The advanced vehicle list allows to place vehicles in groups and perform certain actions on groups, such as replace vehicles and sending to depot.')),
                                    'always_build_infrastructure' => array(self::T_BOOL, NULL, false, _('always build infrastructure')),
                                    'auto_euro' => array(self::T_BOOL, NULL, true, _('auto euro')),
                                    'autosave' => array(self::T_SELECT, array('off' => _('Off'), 'monthly' => _('Every month'), 'quarterly' => _('Every 3 months'), 'half year' => _('Every 6 months'), 'yearly' => _('Every 12 months')), 'yearly', _('The Autosave option allows OpenTTD to automatically save your game at predefined intervals.')),
                                    'autosave_on_exit' => array(self::T_BOOL, NULL, false, _('autosave on exit')),
                                    'autoscroll' => array(self::T_BOOL, NULL, false, _('autoscroll')),
                                    'bridge_pillars' => array(self::T_BOOL, NULL, true, _('bridge pillars')),
                                    'coloured_news_year' => array(self::T_RANGE, array(0, 5000000, 1), 2000, _('Year in which the papers appear in color.')),
                                    'console_backlog_length' => array(self::T_INT, NULL, 100, _('console_backlog_length')),
                                    'console_backlog_timeout' => array(self::T_INT, NULL, 100, _('console_backlog_timeout')),
                                    'cycle_signal_types' => array(self::T_RANGE, array(0, 2, 1), 2, _('cycle_signal_types')),
                                    'date_format_in_default_names' => array(self::T_RANGE, array(0, 2, 1), 0, _('date_format_in_default_names')),
                                    'default_rail_type' => array(self::T_RANGE, array(0, 2, 1), 2, _('default_rail_type')),
                                    'default_signal_type' => array(self::T_RANGE, array(0, 2, 1), 0, _('default_signal_type')),
                                    'drag_signals_density' => array(self::T_RANGE, array(1, 20, 1), 6, _('drag_signals_density rozestup navestidel')),
                                    'enable_signal_gui' => array(self::T_BOOL, NULL, false, _('enable_signal_gui')),
                                    'errmsg_duration' => array(self::T_RANGE, array(0, 20, 1), 5, _('errmsg_duration')),
                                    'expenses_layout' => array(self::T_BOOL, NULL, true, _('expenses_layout')),
                                    'keep_all_autosave' => array(self::T_BOOL, NULL, false, _('keep_all_autosave')),
                                    'left_mouse_btn_scrolling' => array(self::T_BOOL, NULL, false, _('left_mouse_btn_scrolling')),
                                    'link_terraform_toolbar' => array(self::T_BOOL, NULL, false, _('link_terraform_toolbar')),
                                    'liveries' => array(self::T_RANGE, array(0, 2, 1), 2, _('liveries')),
                                    'loading_indicators' => array(self::T_RANGE, array(0, 2, 1), 2, _('loading_indicators')),
                                    'lost_train_warn' => array(self::T_BOOL, NULL, true, _('lost_train_warn')),
                                    'max_num_autosaves' => array(self::T_RANGE, array(0, 255, 1), 16, _('max_num_autosaves')),
                                    'measure_tooltip' => array(self::T_BOOL, NULL, false, _('measure_tooltip')),
                                    'network_chat_box_height' => array(self::T_RANGE, array(5, 255, 1), 25, _('network_chat_box_height')),
                                    'network_chat_box_width' => array(self::T_RANGE, array(200, 65535, 1), 700, _('network_chat_box_width')),
                                    'new_nonstop' => array(self::T_BOOL, NULL, false, _('new_nonstop')),
                                    'news_message_timeout' => array(self::T_RANGE, array(1, 255, 1), 2, _('news_message_timeout')),
                                    'order_review_system' => array(self::T_RANGE, array(0, 2, 1), 2, _('order_review_system')),
                                    'pause_on_newgame' => array(self::T_BOOL, NULL, false, _('pause_on_newgame')),
                                    //'persistent_building_tools = [true | false]', ??
                                    'population_in_label' => array(self::T_BOOL, NULL, true, _('population_in_label')),
                                    'prefer_teamchat' => array(self::T_BOOL, NULL, false, _('prefer_teamchat')),
                                    'quick_goto' => array(self::T_BOOL, NULL, false, _('quick_goto')),
                                    'reverse_scroll' => array(self::T_BOOL, NULL, false, _('reverse_scroll')),
                                    'scrollwheel_multiplier' => array(self::T_RANGE, array(1, 15, 1), 5, _('scrollwheel_multiplier')),
                                    'scrollwheel_scrolling' => array(self::T_RANGE, array(0, 2, 1), 0, _('scrollwheel_scrolling')),
                                    'semaphore_build_before' => array(self::T_RANGE, array(0, 5000000, 1), 1975, _('semaphore_build_before')),
                                    'show_finances' => array(self::T_BOOL, NULL, true, _('show_finances')),
                                    'show_track_reservation' => array(self::T_BOOL, NULL, false, _('show_track_reservation')),
                                    'smooth_scroll' => array(self::T_BOOL, NULL, false, _('smooth_scroll')),
                                    //'station_drag_drop = [true | false]',
                                    //'station_num_tracks',
                                    'station_platlength' => array(self::T_RANGE, array(1, 7, 1), 5, _('station_platlength')),
                                    'station_show_coverage' => array(self::T_BOOL, NULL, true, _('station_show_coverage')),
                                    'status_long_date' => array(self::T_BOOL, NULL, true, _('status_long_date')),
                                    'timetable_in_ticks' => array(self::T_BOOL, NULL, false, _('timetable_in_ticks')),
                                    'toolbar_pos' => array(self::T_RANGE, array(0, 2, 1), 0, _('toolbar_pos')),
                                    'vehicle_income_warn' => array(self::T_BOOL, NULL, true, _('vehicle_income_warn')),
                                    'window_snap_radius' => array(self::T_RANGE, array(0, 32, 1), 10, _('window_snap_radius, 0=off'), '0||>=1'),
                                    'window_soft_limit' => array(self::T_RANGE, array(0, 255, 1), 20, _('window_soft_limit, 0=off'), '0||>=5'),
                                    ),
                    'ai' => array('ai_disable_veh_aircraft' => array(self::T_BOOL, NULL, false, _('Computer cannot build aircraft or airports. This option has been moved from Vehicles section in 0.3.4.')),
                                  'ai_disable_veh_roadveh' => array(self::T_BOOL, NULL, false, _('Computer cannot build road vehicles or roads. This option has been moved from Vehicles section in 0.3.4.')),
                                  'ai_disable_veh_train' => array(self::T_BOOL, NULL, false, _('Computer cannot build trains or rail infrastucture. This option has been moved from Vehicles section in 0.3.4.')),
                                  'ai_disable_veh_ship' => array(self::T_BOOL, NULL, true, _('Computer cannot build ships. This option has been moved from Vehicles section in 0.3.4.')),
                                  'ai_in_multiplayer' => array(self::T_BOOL, NULL, false, _('Enables computer players in multiplayer games. The number of computer players can be set through the difficulty settings window.')),
                                  'ai_max_opcode_till_suspend' => array(self::T_RANGE, array(5000, 250000, 5000), 10000, _('Lower this value if the AI is making the game run slow. Increase this value if you find the AI doing a lot of nothing instead of actually building stuff. Leave value at 10,000 if unsure.')),
                                  ),
                    'locale' => array('currency' => array(self::T_SELECT, array('GBP' => _('United Kingdom	 Pound	 1x'),
                                                                          'USD' => _('United States	 Dollar	 2x'),
                                                                          'EUR' => _('Eurozone	 Euro	 2x'),
                                                                          'YEN' => _('Japan	 Yen	 220x'),
                                                                          'ATS' => _('Austria	 Schilling	 20x'),
                                                                          'BEF' => _('Belgium	 Franc	 59x'),
                                                                          'CHF' => _('Switzerland	 Franc	 2x'),
                                                                          'CZK' => _('Czech Republic	 Koruna	 41x'),
                                                                          'DEM' => _('Germany	 Mark	 3x'),
                                                                          'DKK' => _('Denmark	 Krone	 11x'),
                                                                          'ESP' => _('Spain	 Peseta	 245x'),
                                                                          'FIM' => _('Finland	 Markka	 9x'),
                                                                          'FRF' => _('France	 Franc	 10x'),
                                                                          'GRD' => _('Greece	 Drachma	 500x'),
                                                                          'HUF' => _('Hungary	 Forint	 378x'),
                                                                          'ISK' => _('Iceland	 Krona	 130x'),
                                                                          'ITL' => _('Italy	 Lira	 2850x'),
                                                                          'NLG' => _('Netherlands	 Guilder (Florin)	 3x'),
                                                                          'NOK' => _('Norway	 Kroner	 12x'),
                                                                          'PLN' => _('Poland	 Zloty	 6x'),
                                                                          'RON' => _('Romania	 New Lei	 5x'),
                                                                          'RUR' => _('Russia	 Ruble	 50x'),
                                                                          'SIT' => _('Slovenia	 Tolar	 352x'),
                                                                          'SEK' => _('Sweden	 Krona	 13x'),
                                                                          'YTL' => _('Turkey	 Lira	 3x'),
                                                                          'SKK' => _('Slovakia	 Koruna	 52x'),
                                                                          'BRR' => _('Brazil	 Real	 4x'),
                                                                          'Custom' => _('For a custom currency'),
                                                                          ), 'GBP', _('There are a variety of currencies that you can set as the standard currency of the server.')),
                                      'units' => array(self::T_SELECT, array('metric' => _('Metric'), 'imperial' => _('Imperial'), 'si' => _('SI')), 'imperial', _('Units of distance')),
                                      ),
                    'network' => array ('autoclean_companies' => array(self::T_BOOL, NULL, false, _('Enable or disable autoclean function. If enabled, companies with no player activity for specified game (autoclean_protected and autoclean_unprotected) time will be destroyed.')),
                                        'autoclean_novehicles' => array(self::T_RANGE, array(0, 240, 1), 0, _('Automatically shut down companies without vehicles after the given amount of months.')),
                                        'autoclean_protected' => array(self::T_RANGE, array(0, 240, 1), 36, _('Automatically remove the password from an inactive company after the given amount of months.')),
                                        'autoclean_unprotected' => array(self::T_RANGE, array(0, 240, 1), 12, _('Automatically shut down inactive companies after the given amount of months.')),
                                        'client_name' => array(self::T_TEXT, NULL, 'Player', _('Defines the name you will have when you play multiplayer. It is considered polite not to leave the name as \'Player\'. It doesn\'t have to be anything special, possibly your nickname, forename, initals, or use your imagination.')),
                                        'connect_to_ip',
                                        'default_company_pass' => array(self::T_TEXT, NULL, '', _('This password will be set to every new company at their establishment.')),
                                        'lan_internet' => array(self::T_SELECT, array(_('internet-visible, advertised on master server list'), _('LAN-only, not advertised.')), 1, _('This setting specifies whether you are running a LAN- or Internet-visible game server. An Internet-visible game will be advertised on the master server browser, allowing online players to join your game easily. Note that, even if you set the game to LAN-only, online players will still be able to join if it is possible to reach server_port from the Internet, by adding it manually to their personal server lists.')),
                                        'last_host',
                                        'last_port',
                                        'max_clients' => array(self::T_RANGE, array(2, 255, 1), 10, _('Maximum number of players allowed on the server')),
                                        'max_companies' => array(self::T_RANGE, array(1, 15, 1), 8, _('Maximum number of companies allowed in the game')),
                                        'max_join_time' => array(self::T_RANGE, array(0, 32000, 1), 500, _('Set the maximum amount of time (ticks) a client is allowed to join.')),
                                        'max_spectators' => array(self::T_RANGE, array(0, 255, 1), 10, _('This is how many spectators you allow on your server.')),
                                        'min_active_clients' => array(self::T_RANGE, array(0, 255, 1), 0, _('The game is atomatically paused when the number of active players is less than this amount. This only works with dedicated servers!')),
                                        'network_id',
                                        'pause_on_join' => array(self::T_BOOL, NULL, true, _('Specifies whether or not to pause the game while a new client joins.')),
                                        'player_name' => array(self::T_TEXT, NULL, 'Player', _('Defines the name you will have when you play multiplayer. It is considered polite not to leave the name as \'Player\'. It doesn\'t have to be anything special, possibly your nickname, forename, initals, or use your imagination.')),
                                        'rcon_password' => array(self::T_TEXT, NULL, '', _('Configure the dedicated server to accept rcon commands')),
                                        'reload_cfg' => array(self::T_BOOL, NULL, false, _('reload cfg')),
                                        'restart_game_year' => array(self::T_RANGE, array(0, 5000000, 1), 0, _('Config parameter restart_game_year is located in the [NETWORK] section of the OPENTTD.cfg. The value set to this parameter represents the year the server will restart. If the value is set to zero (0) the game will run until it is manually reset. When set, the server will perform a restart on January 1st of value.')),
                                        'server_advertise' => array(self::T_BOOL, NULL, false, _('This setting may be either true or false. Set it to true if you wish advertise the server to the master server list at http://www.openttd.org/en/servers.')),
                                        'server_bind_ip' => array(self::T_TEXT, NULL, '0.0.0.0', _('IP-address to which the OpenTTD server will bind itself. If you have more than one network connection, you can select the network connection to be used. The default is 0.0.0.0, which means any network connection can be used.')),
                                        'server_lang' => array(self::T_SELECT, array('ANY', 'ENGLISH', 'GERMAN', 'FRENCH', 'BRAZILIAN', 'BULGARIAN', 'CHINESE', 'CZECH', 'DANISH', 'DUTCH', 'ESPERANTO', 'FINNISH', 'HUNGARIAN', 'ICELANDIC', 'ITALIAN', 'JAPANESE', 'KOREAN', 'LITHUANIAN', 'NORWEGIAN', 'POLISH', 'PORTUGUESE', 'ROMANIAN', 'RUSSIAN', 'SLOVAK', 'SLOVENIAN', 'SPANISH', 'SWEDISH', 'TURKISH', 'UKRAINIAN'), 'ANY', _('The language spoken on this server. It is shown by a flag in the server list.')),
                                        'server_name' => array(self::T_TEXT, NULL, '', _('This is the name of your server as shown on the server list.')),
                                        'server_password' => array(self::T_TEXT, NULL, '', _('The password that client has to enter when he/she wants to connect to the server.')),
                                        'server_port' => array(self::T_INT, NULL, 3979, _('Port on which the OpenTTD server runs. The default is 3979. (It use 3978 to contact master server) OpenTTD uses TCP and UDP')),
                                        'server_admin_chat' => array(self::T_BOOL, NULL, true, _('server admin chat')),
                                        'server_admin_port' => array(self::T_INT, NULL, 3977, _('server admin port')),
                                        'admin_password' => array(self::T_TEXT, NULL, '', _('he password clients of the admin interface have to specify in order to be able to use it. A good password should be chosen for security reasons, as the admin interface can be used to control the server (it supports sending RCON commands without any extra check for the RCON password). If no password is set the admin interface isn\'t activated and no listener is started on the port specified in server_admin_port. Even if the listener was started the server would reject any request for that interface as if the password was wrong, making sure the admin interface cannot be used with an empty password.')),
                                        ),
                    'currency' => array('prefix' => array(self::T_TEXT, NULL, '', _('prefix')),
                                        'rate' => array(self::T_INT, NULL, 1, _('rate')),
                                        'separator' => array(self::T_TEXT, NULL, '.', _('separator')),
                                        'suffix' => array(self::T_TEXT, NULL, ' credits', _('suffix')),
                                        'to_euro' => array(self::T_INT, NULL, 0, _('prechod to euro')),
                                        ),
                    'company' => array ('engine_renew' => array(self::T_BOOL, NULL, false, _('Vehicles are automatically replaced when they get old, provided that the same vehicle type is still available for purchase.')),
                                        'engine_renew_months' => array(self::T_RANGE, array(-12, 12, 1), 6, _('If autorenew is enabled, a vehicle is automatically renewed the next time it enters a service depot when its age reaches the set amount of months before or after its maximum age.')),
                                        'engine_renew_money' => array(self::T_RANGE, array(0, 2000000, 1), 100000, _('If autorenew is enabled and a vehicle is going to be replaced, the amount money of the player has needs to be more than this value plus the cost of the new vehicle. If the value is, for example, £200,000, a new vehicle costs £10,000 and you have £205,000, the vehicle will not be replaced. Instead, you will get a warning that autorenew has failed on that vehicle.')),
                                        'renew_keep_length' => array(self::T_BOOL, NULL, false, _('renew keep length')),
                                        ),
                    'server_bind_addresses' => array(''),
                    'servers' => array(''),
                    'bans' => array(''),
                    'news_display' => array('acceptance' => array(self::T_SELECT, array('off' => ('Off'), 'summarized' => _('Summarized'), 'full' => _('full')), 'summarized', _('Sometimes conditions around a station change, causing it to accept new cargo or to stop accepting cargo. This is most likely to happen with Passenger, Mail and Goods stations, due to towns being reconstructed.')),
                                            'accident' => array(self::T_SELECT, array('off' => ('Off'), 'summarized' => _('Summarized'), 'full' => _('full')), 'full', _('Information about accidents (e.g. aircraft crashes, train collision, etc) and disasters (e.g. UFO landings)')),
                                            'advice' => array(self::T_SELECT, array('off' => ('Off'), 'summarized' => _('Summarized'), 'full' => _('full')), 'summarized', _('Information about player\'s vehicles (e.g. "Train 1 has too few orders in the schedule").')),
                                            'arrival_other' => array(self::T_SELECT, array('off' => ('Off'), 'summarized' => _('Summarized'), 'full' => _('full')), 'summarized', _('E.g. "First train arrives at..." for competitors\'s stations')),
                                            'arrival_player' => array(self::T_SELECT, array('off' => ('Off'), 'summarized' => _('Summarized'), 'full' => _('full')), 'summarized', _('Arrival of first vehicle at player\'s station')),
                                            'close' => array(self::T_SELECT, array('off' => ('Off'), 'summarized' => _('Summarized'), 'full' => _('full')), 'summarized', _('Closing of industries')),
                                            'company_info' => array(self::T_SELECT, array('off' => ('Off'), 'summarized' => _('Summarized'), 'full' => _('full')), 'summarized', _('New companies being founded, companies being taken over or declared bankrupt.')),
                                            'economy' => array(self::T_SELECT, array('off' => ('Off'), 'summarized' => _('Summarized'), 'full' => _('full')), 'summarized', _('Information about production increase/decrease for industries.')),
                                            'general' => array(self::T_SELECT, array('off' => ('Off'), 'summarized' => _('Summarized'), 'full' => _('full')), 'full', _('General information')),
                                            'new_vehicles' => array(self::T_SELECT, array('off' => ('Off'), 'summarized' => _('Summarized'), 'full' => _('full')), 'summarized', _('Notifications about new vehicles being available.')),
                                            'open' => array(self::T_SELECT, array('off' => ('Off'), 'summarized' => _('Summarized'), 'full' => _('full')), 'summarized', _('Opening of industries')),
                                            'production_nobody' => array(self::T_SELECT, array('off' => ('Off'), 'summarized' => _('Summarized'), 'full' => _('full')), 'summarized', _('Other industry production changes.')),
                                            'production_other' => array(self::T_SELECT, array('off' => ('Off'), 'summarized' => _('Summarized'), 'full' => _('full')), 'summarized', _('Production changes of industries served by competitor(s).')),
                                            'production_player' => array(self::T_SELECT, array('off' => ('Off'), 'summarized' => _('Summarized'), 'full' => _('full')), 'summarized', _('Production changes of industries served by the company.')),
                                            'subsidies' => array(self::T_SELECT, array('off' => ('Off'), 'summarized' => _('Summarized'), 'full' => _('full')), 'summarized', _('Whenever a new subsidy is available or an existing subsidy is withdrawn you\'ll be notified.')),
                                            ),
                    'ai_players' => array(''),
                    'version' => array ('version_number' => array(self::T_TEXT, NULL, '1.1.3', _('version number')),
                                        'version_string' => array(self::T_TEXT, NULL, '1138599A', _('version string')),
                                        ),
                    'newgrf' => array(''),  //pridavatelene polozky
                    'newgrf-static' => array(''),
                    );
      return $conf;
    }

//parsrovani a nacitani ini souboru
    private static function loadIniFile($file) {
      $h = new Filesystem($file, Filesystem::MODE_READ);
      $explodefile = explode(PHP_EOL, $h->read());
      $key = NULL;
      $result = array();
      foreach ($explodefile as $row) {
        if (!empty($row)) {
          if ($row[0] == '[') { //vyber klicu
            $key = trim(preg_replace('/\[*\]*/', NULL, $row));
          } else {
            if (!empty($key)) {
              $line = preg_split('/ = | =/', $row, 2);  //explode(' = ', $row, 2);
              $k = trim($line[0]);
              if (!empty($k)) {
                $result[$key][$k] = trim(Core::isFill($line, 1));
              }
            }
          }
        }
      }
      return $result;
    }

//generovani a ukladani ini souboru
    private static function saveIniFile($file, $original, $data) {
      $suma = array_merge($original, $data);

      $func = function($k, $v) { return sprintf('%s = %s', $k, $v); };
      $row = array('');
      foreach ($suma as $group => $values) {
        if (!is_null($values)) {
          $row[] = sprintf('[%s]', $group);
          if (is_array($values)) {
            $r = array_map($func, array_keys($values), $values);
            $row = array_merge($row, $r);
          } else {
            $row[] = $values;
          }
        }
        $row[] = '';
      }
      $complet = implode(PHP_EOL, $row);

      $h = new Filesystem($file, Filesystem::MODE_WRITE);
      $h->write($complet);

      return $h->getState();
    }

    private static function getAdress() {
      return Core::isFill($_GET, self::A_ACTION);
    }

    const P_NEW = 'new';
    const P_LOAD = 'load';
    const P_LIST = 'list';

    const A_ACTION = 'akce';
    const A_ID = 'id';

    public static function getMenu() {
      $adr = self::getAdress();

//var_dump(loadIniFile('openttd.cfg'));
      $result = Html::div()->insert(Html::a()->hrefpath('index.php')->setText(_('home')))
                           //->insert(Html::a()->hrefpath('index.php', array(self::A_ACTION => self::P_NEW))->setText(_('new')))
                           //->insert(Html::a()->hrefpath('index.php', array(self::ACTION => self::P_LOAD))->setText(_('load exist')))
                           ->insert(Html::a()->hrefpath('index.php', array(self::A_ACTION => self::P_LIST))->setText(_('list configs')));
      return $result;
    }

    public static function getContent() {
      $adr = self::getAdress();
      $result = _('entry page :)');

      $mainpath = sprintf('%s/%s', self::$path, self::CONFIG_DIR);

      switch ($adr) {
        case self::P_NEW:
          $result = self::getForm();
        break;

        case self::P_LOAD:
          $id = base64_decode(Core::isFill($_GET, self::A_ID));
          $path = sprintf('%s/%s', $mainpath, $id);
          $inidata = self::loadIniFile($path);
          //var_dump($path, $inidata);
          //print_r($inidata);
          $result = self::getForm($id, $inidata);
        break;

        case self::P_LIST:
          $list = Core::getListFile(array('path' => $mainpath));
          foreach ($list as $item) {
            $row[] = Html::a()->hrefpath('index.php', array(self::A_ACTION => self::P_LOAD, self::A_ID => base64_encode($item)))->setText($item);
          }
          $result = Html::div()->insert(Html::span()->setText(_('here select config file for loading')))->insert($row);
        break;
      }
      return $result;
    }

    private static function getForm($file = 'openttd.cfg', $loadconf = NULL) {
      $f = new Form;
      $f->addText('config_name', array('label' => _('config name'), 'value' => $file, 'returnvalue' => true));

      $conf = self::getConfig();

// popremyslet jestli je vubec nutne delat vytvareni novych... kdyz to stejne bude vychazet zvdycky z nejakoho configu ktery se naklonuje

// mit moznost i pridavat klice? jistych typu?!

      if (!empty($loadconf)) {
        //nacitaci logika
        foreach ($loadconf as $section => $values) {
          $f->addGroup('[ '.$section.' ]');

          $group = array('newgrf', 'preset-');  //slova ktera oshahuje nazev skupiny, pro jiny typ pristupu
          $specialgroup = false;  //specialni skupina je defaultne vypnuta
          foreach ($group as $grp) {
            $specialgroup = (bool) preg_match(sprintf('/%s/', $grp), $section);
            if ($specialgroup) { break; }
          }

          if (!$specialgroup) {
            //vypis klasickych prvku
            foreach ($values as $key => $value) {

              $predef = Core::isFill($conf, $section);
              $item = Core::isFill($predef, $key);

              $name = sprintf('%s[%s]', $section, $key);
              if (!empty($item)) {

                $type = $item[0];
                // jinak! rozlisovat ulozeni a nacitani!!!
                $val = $item[1];//$value;//(!empty($_POST) ? $value : $item[1]); //value

                $current = (!empty($_POST) ? Core::isFill($_POST[$section], $key) : $value);//$item[2];
                $label = $item[3];

                //nacitani hodnot po skupinach
                switch ($type) {
                  case self::T_BOOL:
                    //$f->addCheckbox($name, array('label' => $label, 'checked' => $current, 'returnvalue' => true));
                    $f->addRadio($name, array('label' => $label, 'value' => array('true' => 'on', 'false' => 'off'), 'selected' => $current, 'returnvalue' => true));
                  break;

                  case self::T_TEXT:
                  case self::T_INT: // asi jen rozdil v typovani!
                    $f->addText($name, array('label' => $label, 'value' => $current, 'returnvalue' => true));
                  break;

                  case self::T_RANGE:
                    //$f->addRange($key, array('label' => $label, 'value' => $current, 'min' => $val[0], 'max' => $val[1], 'step' => $val[2], 'returnvalue' => true));
                    $f->addNumber($name, array('label' => $label, 'value' => $current, 'title' => sprintf('<%s-%s>', $val[0], $val[1]), 'min' => $val[0], 'max' => $val[1], 'step' => $val[2], 'returnvalue' => true));
                  break;

                  case self::T_SELECT:
                    $f->addSelect($name, array('label' => $label, 'selected' => $current, 'value' => $val, 'returnvalue' => true));
                  break;

                  default:
                    $f->addTextArea($name);
                    var_dump('chyby: '.$name);
                  break;
                }
              } else {
                //neuvedena moznost v konfigu
                $f->addText($name, array('label' => '('.$key.')', 'value' => $value, 'returnvalue' => true));
              }
            }
          } else {
            //vypis specialnich skupiny

            //slozeni radku a uprava lomitek - defaltne pro linux!
            $func = function($k, $v) { $lom = str_replace('\\', '/', $k);  return sprintf('%s = %s', $lom, $v); };
            $val = implode(PHP_EOL, array_map($func, array_keys($values), $values));

            $f->addTextArea($section, array('value' => $val, 'returnvalue' => true));
          }

        }
      } else {
        //vytvareci logika
        // melo by asi vychazet ze stavajiciho konfigu, aby se napevno neurcovaly veci ktere se mohou postupec casu menit???
      }

      $f->endGroup()
        ->addSubmit('tl', array('value' => _('save configuration')));

      if ($f->isSubmitted()) {
        $post = $_POST;

        $file = Core::isFill($post, 'config_name');
        //vyhozeni prebytecnych indexu
        $post['tl'] = NULL;
        $post['config_name'] = NULL;

        $path = sprintf('%s/%s', self::CONFIG_DIR, $file);

        if (self::saveIniFile($path, $loadconf, $post)) {
          echo _('uspesne ulozeno');
          //presmerovani na nove vytvoreniy config
          Core::setRefresh(1, Core::makeUrl(self::$weburl, array('query' => array(self::A_ACTION => self::P_LOAD, self::A_ID => base64_encode($file)), 'path' => 'index.php')));
        } else {
          echo _('neco se asi pokakalo...');
        }
      }

      return $f;
    }
  }

//------------------------------------------------------------------------------
classes\Form,
classes\Filesystem,
//switch (substr($type, 0, 6))
        // vylepsit a udelat sofistikovanejsi!!!!!!
        $type = $this->pointer->struct[$table][$column];
        //~ if (substr($type, 0, 7) == Sql::VARCHAR) {
          //~ $val[] = sprintf('"%s"', SQLite3::escapeString($value));
        //~ }
//INSERT INTO $table (sloupce) VALUES (hodnoty);
      //var_dump($table, $data);
      //$func = function () {};
// array_map funkci aplikovat osetrovani hodnot podle typu a taky osetrovat: SQLite3::escapeString()  !!!!!!!!!
//popr. osetrovani dle typu udelat metodu ktera to bude zvejkat po celem poli!!!
//$struct['id'] = ;
      var_dump($struct);
var_dump($this->pointer->struct);
var_dump($quickredirect);
//var_dump($parse['query']);
//var_dump(http_build_query($path));
//var_dump(sprintf('Location: %sindex.php%s', $parse['path'], (!empty($parse['query']) ? '?'.$parse['query'] : '')));
//var_dump(file_exists($uri.'index.php'), $uri.'index.php');
var_dump($quickredirect, file_exists($quickredirect));
//$data['id'] = 1;
id int unsigned AUTO_INCREMENT PRIMARY KEY,
      //~ //dodatecne doplnovni sloupce id
      //~ foreach ($struct as $name => $columns) {
        //~ $struct[$name]['id'] = Sql::INTEGER_UNSIGNED;
      //~ }
//$data['id'] = 1;
// se sakra musi zadavat i nazev tabulky
'pok1' => Sql::INTEGER_UNSIGNED,
                                'pok2' => Sql::FLOAT,
                                , 'pok1' => 234, 'pok2' => 2.5678
      if ($quickredirect_vyjimka) {
        var_dump($path);
      }
//const INTEGER_UNSIGNED = 'int unsigned';
//'cislo' => Sql::INTEGER.Sql::UNIQUE,
//'cislo' => Sql::INTEGER.' unsigned',
, 'cislo' => -237
//'cislo' => rand(100, 200)
//var_dump(implode(','.PHP_EOL, $val));
      //UPDATE $table SET sloupec=hodnota WHERE rowid=$id;
      //var_dump($table, $id, $data);
//DELETE FROM $table WHERE rowid=$id;
      var_dump($table, $id);
var_dump($this->pointer->db->changes());
      //var_dump($this->pointer->db->querySingle(sprintf('SELECT count(rowid) FROM %s;', $table)));
      //var_dump($this->pointer->db->querySingle(sprintf('SELECT count(rowid) FROM %s;', $table)));
var_dump($this->pointer->db->changes());
//SELECT (*) WHERE rowid=$id;
//var_dump($s->);
$this->pointer->dbresultfetch = $this->pointer->dbresult->fetchArray(SQLITE3_ASSOC);
$this->pointer->dbresultfetch = $this->pointer->dbresult->fetchArray(SQLITE3_ASSOC);
      //var_dump($this->pointer->dbresult);
// doresit pocatecni podminku na rewind() !!!!!
      //var_dump($this->pointer->db->querySingle(sprintf('SELECT count(rowid) FROM %s;', $table)));
// zmenit nazev!
    public function getRow($table) {
      //~ $sql = sprintf('SELECT rowid, * FROM %s ORDER BY rowid;', $table);
      //~ $r = $this->pointer->db->query($sql);
      //~ //return $r->fetchArray(SQLITE3_ASSOC);
//~ // pripadne predelat na iterator!!!
      //~ $result = array();
      //~ while ($a = $r->fetchArray(SQLITE3_ASSOC)) {
        //~ //$result[$a['rowid']] = $a;
      //~ }
      //~ $r->finalize();
      //~ return $result;
    }
//var_dump($this->pointer->dbresultfetch);
var_dump($this->pointer->dbresultfetch);
//var_dump($fetch);
      if (is_array($fetch)) {
        $this->pointer->dbresultfetch = array_slice($fetch, 1); //extract od 1.indexu
      } else {
        $this->pointer->dbresultfetch = NULL;
      }
    //~ foreach ($r as $v) {
      //~ //var_dump($v);
    //~ }
    //var_dump($s);
//var_dump(htmlspecialchars(' huuuu "sdsd "ssds '));
    //exit;
//$columns = '*', $order = 'rowid ASC'
//var_dump($s);
var_dump($fetch);
$obj =
return $obj; //vraci objekt sql pro pohodlnejsi nastaveni
var_dump(!is_null($this->pointer->dbresultfetch));
var_dump($sql, (string) $sql);
//var_dump(count($s));
// nastavovani jetli bude vracet object nebo pole
// tu se pak bude predavat vygenerovany dotaz z sql!
//var_dump($this->pointer->db->querySingle(sprintf('SELECT count(rowid) FROM %s WHERE rowid=3;', $table)));
//var_dump($sql);
// returnem vracet pocet radku ktere dotaz vygeneruje
//var_dump($sql);
      //var_dump($this->pointer->db->lastInsertRowID());
      //var_dump($this->pointer->db->exec('delete from ipban where ip="119.255.59.106";'));
      //var_dump($this->pointer->db->exec('VACUUM;'));

      //~ $r = $this->pointer->db->query(sprintf('SELECT rowid, ip FROM %s order by rowid desc', $table, $table));
      //~ //var_dump($this->pointer->db->changes());
      //~ while ($a = $r->fetchArray(SQLITE3_ASSOC)) {
        //~ var_dump($a);
      //~ }
      //~ $r->finalize();

      //~ var_dump($this->pointer->db->querySingle(sprintf('SELECT count(rowid) FROM %s;', $table)));
// kontrola na unikatnost?!
// i sem vkladat limit!!!!!
var_dump(sprintf('SELECT count(rowid) FROM %s%s%s;', $table, $where, $limit));
// docasny test!!!!
var_dump($this->pointer->db->querySingle('PRAGMA TABLE_INFO(ipban);'));
  //~ class SQLite3 extends SqlConnector {
    //~ public function __construct($path) {
      //~ var_dump($path);
    //~ }
  //~ }
//$dsn, $user = NULL, $pass = NULL
//$aa = new SqlConnector\SQLite3(__DIR__);
$aa = new SqlConnector(SqlConnector::SQLite3, array('path' => __DIR__.'/db.sqlite3'));
    //$c = new SqlConnector('sqlite:'.__DIR__.'/db.sqlite3');
//if ($this->pointer->db->exec($create) !== false) {
            //  echo 'sql dotaz instalace se nepovedl!';
            //}
//case self::INTEGER_UNSIGNED:
//$result = sprintf('"%s"', $value);
          //$result = sprintf('"%s"', date('Y-m-d H:i:s', strtotime($value)));
//detekce varchar, pri varchar()
          //~ if (substr($type, 0, 7) == self::VARCHAR) {
            //~ //$result = sprintf('"%s"', $value);
            //~ $result = sprintf('%s', $value);
          //~ }

          //detekce int, pri int unique
          //~ if (substr($type, 0, 3) == self::INTEGER) {
            //~ $result = sprintf('%s', $value);
          //~ }
        //~ foreach ($data as $column => $value) {
          //~ $cols[] = $column;
          //~ $val[] = Sql::getType($this->pointer->struct[$table][$column], $value); //SQLite3::escapeString()
        //~ }
        // dodelat: Sql::getType() na cyklicke zpracovani!
        //$func = function($v) { var_dump($this->pointer->struct[$table][$v]); };
//var_dump($val, array_map($func, $data));
        // implementovat:
        //->prepare() [zadavat nezname pres ?] a ->execute() [predavat promenne ve spravnem poradi]
//var_dump($data);
        // dodelat vraceni zmenenych radku!?! jestli ne tak this...
//var_dump($sql, $val);
        //$sql = sprintf('INSERT INTO %s (%s) VALUES (%s);', $table, implode(', ', $cols), implode(', ', $val));
        //$count = $this->pointer->db->exec($sql);
        //var_dump($count);
        //~ if (!$this->pointer->state = ) {
          //~ echo 'sql dotaz vlozeni radku se nezadaril!';
          //~ var_dump($this->pointer->db->lastErrorMsg());
        //~ }
var_dump($val);
exit;
$val = array();
     foreach ($data as $column => $value) {
        //$val[] = sprintf('%s=%s', $column, , SQLite3::escapeString($value)));
      }
// dodelat!!!
//$cols = array_fill(0, count($keys), '?');
      //~ $val = array();
      //~ foreach ($data as $column => $value) {
        //~ $val[] = sprintf('%s=%s', $column, Sql::getType($this->pointer->struct[$table][$column], SQLite3::escapeString($value)));
      //~ }$cols = array();
//~
      //~ $sql = sprintf('UPDATE %s SET %s WHERE rowid=%d;', $table, implode(','.PHP_EOL, $val), $id);
      //~ if (!$this->pointer->state = $this->pointer->db->exec($sql)) {
        //~ echo 'sql dotaz vlozeni radku se nezadaril!';
        //~ var_dump($this->pointer->db->lastErrorMsg());
      //~ }

      // vracet pocet zmenenych polozek
    public function getCountChanges() {
      // jinak! return $this->pointer->db->changes();
    }
, $c->getCountChanges()
//$val[] = $id; //pridani id mezi hodnoty
        //$prep->bindValue(':id', $id, PDO::PARAM_INT);
 //$prep = $this->pointer->db->prepare($sql);
        //$prep->bindValue(':id', $id, PDO::PARAM_INT);
        //$prep->execute();
//$prep->rowCount();
 //~ if (!$this->pointer->state = $this->pointer->db->exec($sql)) {
        //~ echo 'sql dotaz vlozeni radku se nezadaril!';
        //~ var_dump($this->pointer->db->lastErrorMsg());
      //~ }
      //~ $this->pointer->db->exec('VACUUM;');  //provedeni vacua
//print_r(PDO::getAvailableDrivers());
//var_dump(!is_null($this->pointer->dbresultfetch));
      //$res = (is_null($this->pointer->dbresultfetch));
      //if (!$res && !is_null($this->pointer->dbresultfetch)) {
        //uzavreni result setu
        //$this->pointer->dbresult->finalize();
      //}
      //return $res;
var_dump((bool) $this->pointer->dbresultfetch);
//$this->getResultFetch();
      $this->pointer->dbresultfetch = $this->pointer->dbresult->fetchObject();
        //$fetch = $this->pointer->dbresult->fetchObject(); // prepinat posle zvoleneho typu...
//var_dump($fetch);
        //~ $fetch = $this->pointer->dbresult->fetchObject();
//~ var_dump($fetch);
//
        //~ $fetch = $this->pointer->dbresult->fetchObject();
//~ var_dump($fetch);
        //$this->pointer->dbresultid = $fetch->rowid;
//var_dump($this->pointer->dbresult);
        //var_dump($this->pointer->dbresultid);
        //extract od 1.indexu
        //$this->pointer->dbresultfetch = $fetch;
        //$this->pointer->dbresultfetch = $this->pointer->dbresult->fetchObject();
        //(is_array($fetch) ? ($this->pointer->dbresultobject ? (object) array_slice($fetch, 1) : array_slice($fetch, 1)) : NULL);
        //var_dump($this->pointer->dbresultfetch);
//return $this->pointer->dbresultid;
//return $this->pointer->dbresult->fetchObject();//$this->pointer->dbresultfetch;
//var_dump(__METHOD__);
//$result = $this->pointer->db->querySingle(sprintf('SELECT count(rowid) FROM %s%s;', $table, $where));
//$result = $limit[1]; //druhe cislo limitu
// promyslet a optimalizovat...
//toto je otazka optimality, kdyz se bude provadet vyber moc dat tak se budou jakoby 2x nacitat
//a to jednou uz nacitane byli nebo
// sem se muze pridava: PDO::FETCH_CLASS
//var_dump();
//$this->pointer->dbresultobject ? PDO::FETCH_OBJ : PDO::FETCH_CLASS
// + implementace iteratoru....!!!
var_dump($sql, $where, $limit,  $table);
//$this->query->where = sprintf(' WHERE %s', $parameters[0]);
            //var_dump($this->query->where_args);
// rozsirit o zadavani vlastnich promennych a dotazu do where, resp teda,
//jejich symbolicky zapis a vlozeni promennych nakonec jako pro vkladani prepare!
$prepare = false;
      if (is_array($where)) {
        $prepare = true;
      }
var_dump($this->pointer->dbresult);
///$this->pointer->dbresult = $this->pointer->db->query($sql);
/*
    //vraceni hodnoty nactene od uzivatele
    public function check($value = NULL) {
      //kontrolo s posledni odeslanou hodnotou!
    }
*/
// predelat, prejmenovat promenne, kompletne!!!!
//++napsat testy!

      //~ if ($table instanceof Sql) {
        //~ //predani dat z instance tridy Sql()
        //~ $sql = $table->getSql();  //nacteni sql dotazu
        //~ $where_arg = $table->getWhereArgs();  //nacteni hotnoty where
        //~ $limit = $table->getLimitArgs();  //nacteni hodnoty limitu
        //~ $table = $table->getTable();  //nateni nazvu tabulek
      //~ } else {
        //~ $columns = Core::isFill($settings, 'columns', '*');
        //~ $order = Core::isFill($settings, 'order', 'rowid ASC');
        //~ $where_arg = Core::isFill($settings, 'where');
        //~ $limit = Core::isFill($settings, 'limit');
      //~ }
//~
      //~ if (!empty($limit)) {
        //~ $limit = vsprintf(' LIMIT %d,%d', $limit);
      //~ }
//~
      //~ //detekce provadeni preparace promennych
      //~ $prepare = is_array($where_arg);
//~
//~ // tady to hapruje!
      //~ $where = NULL;
      //~ if (!empty($where_arg) && !$prepare) {  //neni-li prazdne a neni-li preparace
        //~ $where = sprintf(' WHERE %s', $where_arg);
      //~ }
//~
//~ // toto neni prilis efektivni zpusob, asu to bude jen pres Sql tridu, je zbytecne delat 2 ruzna rozhrani se stejnym vysledkem!!!!
      //~ if (empty($where) && $prepare) {
        //~ $where = sprintf(' WHERE %s', $where_arg[0]);
        //~ $where_arg = array_slice($where_arg, 1);
      //~ }
//~ // predelat jen na jedno rozhranni!!!!!! vice rozhrani je zbytena prace navic!!!!!
      //~ if (empty($sql)) {
        //~ $sql = sprintf('SELECT rowid, %s FROM %s%s ORDER BY %s%s;', $columns, $table, $where, $order, $limit);
      //~ }
//~ //var_dump($where, $where_arg, $sql);
      //~ $result_count = Core::isNull($settings, 'result_count', false);
      //~ //pokud je aktivni preparace
      //~ if ($prepare) {
        //~ $this->pointer->dbresult = $this->pointer->db->prepare($sql);
        //~ $this->pointer->dbresult->execute($where_arg);
        //~ //vypocet poctu radku
        //~ if ($result_count) {
          //~ $result = count($this->pointer->dbresult->fetchAll());  //spocita radky
          //~ $this->pointer->dbresult->execute($where_arg);  //znovu provede pro navraceni dat iteraci
        //~ }
      //~ } else {
        //~ $this->pointer->dbresult = $this->pointer->db->query($sql);
        //~ //vypoect poctu radku
        //~ if ($result_count) {
          //~ $result = count($this->pointer->dbresult->fetchAll());  //spocita radky
          //~ $this->pointer->dbresult = $this->pointer->db->query($sql); //znovu provede pro navraceni dat iteraci
        //~ }
      //~ }
//$limit_arg,
//var_dump($sql_query, $where_arg, $table_name);
//var_dump($sql_object);
//$p = $c->setIterator('ipban', array('columns' => 'ip, create_date, edit_date', 'order' => 'create_date DESC', 'limit' => array(0, 20)));
    //$p = $c->setIterator('ipban', array('result_count' => true, 'columns' => 'ip, create_date, edit_date, active', 'order' => 'create_date DESC', 'where' => 'active=0')); //
    //$p = $c->setIterator('ipban', array('result_count' => true, 'columns' => 'ip, create_date, edit_date, active', 'order' => 'create_date DESC', 'where' => array('active=?', 0)));
    //'result_object' => true,
    //$p = $c->setIterator('ipban', array('columns' => 'ip, create_date, edit_date', 'order' => 'create_date ASC', 'limit' => array(0, 20)));
//var_dump(Sql::BOOLEAN, Sql::INTEGER, Sql::DATE, Sql::DATETIME, Sql::VARCHAR(100), Sql::TEXT, Sql::FLOAT);

/*
    $s = new SqliteStorage(__DIR__.'/db');
    $a = array('ipban' => array('ip' => Sql::VARCHAR(50).Sql::UNIQUE,
                                'create_date' => Sql::DATETIME,
                                'edit_date' => Sql::DATETIME,
                                'active' => Sql::BOOLEAN,
                                'comment' => Sql::VARCHAR(100)),
              'user' => array('login' => Sql::VARCHAR(50),
                              'pass' => Sql::VARCHAR(100),
                              //'email' => Sql::VARCHAR(100), a odesilat potvrzeni, platnost na ~15-30 dni?!
                              //'validate' => Sql::DATETIME, //validace de
                              'create_date' => Sql::DATETIME,
                              'edit_date' => Sql::DATETIME,
                              'active' => Sql::BOOLEAN),
              );
    $s->setStructure($a);
    */
    //$s->addRow('ipban', array('ip' => '119.255.59.106'.rand(), 'create_date' => 'now', 'active' => true));
    //$s->editRow('ipban', 7, array('ip' => '151.31.59.37', 'active' => false, 'edit_date' => 'now'));
    //$s->delRow('ipban', 7);
    //var_dump($s->loadRow('ipban', 9, 'rowid, ip, edit_date'));
    //->column('rowid as id')->column('ip')->column('create_date')->order('create_date')->asc()->limit(3, 0)
    //$s->setIterator('ipban', array('columns' => 'rowid as id, ip, create_date, edit_date', 'order' => 'create_date DESC'))

//exit;

    //~ $sql = new Sql;
    //~ //$sql->column('rowid as id')->column('ip')->column('create_date')->table('ipban')->order('create_date')->asc()->limit(0, 3);
    //~ $sql->column('rowid as id')->column('ip')->column('create_date')->table('ipban')->order('create_date')->asc()->where('active=0')->limit(0, 1);
//~ // doresit to pocitani radku!
    //~ $p = $s->setIterator($sql);
    //~ //$p = $s->setIterator('ipban', array('columns' => 'rowid as id, ip, create_date, edit_date', 'order' => 'create_date DESC', 'limit' => array(0, 20)));
    //~ //$p = $s->setIterator('ipban', array('columns' => 'rowid as id, ip, create_date, edit_date', 'order' => 'create_date DESC', 'where' => 'active=0'));
    //~ var_dump($p);
    //~ foreach ($s as $k => $r) {
      //~ var_dump($r);
      //~ //echo var_dump($k, $r->id, $r->ip);
    //~ }
//$limit_arg = $sql_object->getLimitArgs();  //nacteni hodnoty limitu
      //$table_name = $sql_object->getTable();  //nacteni nazvu tabulek
public function pokus() {
      //~ $prep = $this->pointer->db->prepare('SELECT * FROM ipban LIMIT 0,3;');
      //~ $prep->execute();
      //~ //$r = $prep->setFetchMode(PDO::FETCH_NUM);
      //~ var_dump($prep->rowCount());
      //~ while($row = $prep->fetch(PDO::FETCH_OBJ)) {
        //~ var_dump($row);
      //~ }

      //~ $res = $this->pointer->db->query('SELECT COUNT(*) FROM ipban LIMIT 0,3;');
//~ var_dump($res->fetchColumn());
      //~ //foreach ()

      //~ $prep = $this->pointer->db->prepare('SELECT * FROM ipban');
      //~ $prep->execute();
      //~ var_dump($prep->rowCount());

      //~ $res = $this->pointer->db->query('SELECT COUNT(*) FROM ipban LIMIT 0,3;');
//~ var_dump($res->fetchColumn());

      $prep = $this->pointer->db->prepare('SELECT rowid, ip, create_date FROM ipban LIMIT 0,5');
      $prep->execute();
// toto je ten spavny pocet radku! dementne ale funguje!
      //var_dump($prep->rows);

//pro spocitani pouzit toto, bude se hold muset pouzivat dost rozumne...
      //var_dump(count($prep->fetchAll(PDO::FETCH_OBJ)));
      //$prep->execute();

      while($row = $prep->fetch(PDO::FETCH_OBJ)) {
        var_dump($row);
      }
    }
// pokud toto cele bude pouzivat PDO tak popremyslet o vyusiti NotORM?!!
//$prep->closeCursor();
System.out.println((this.hmotnost / (100 * 100)) / (100.0));
korekce typu a doplneni komentu
PUBLIC SUB TableView1_Save(Row AS Integer, Column AS Integer, Value AS String)

  TableView1[Row, Column].Text = Value

END

PUBLIC SUB TableView1_DblClick()

  TableView1.Edit()

END

PUBLIC SUB TableView1_KeyPress()

  IF Key.Code = Key.Enter THEN
    TableView1.Save()
  ENDIF

END
// zpraconat prvni konektory na sqlite2+3? pdo?...spis ale pdo!
//jinak: modul na PDO pripojeni a zvlast i na sqlite3 ...
//resp. jestli se bude shodovat tak se to slouci a smitec zejo... :)
var_dump(Core::makeHash('md5+sha256+md5', 'heslo'), hash('sha256', md5(md5('heslo'))));
      // predelat na preparaci
      //return $this->pointer->db->query($sql)->fetch(PDO::FETCH_OBJ);
// popremysslet jestli vetsinu tech metod nenacpat do preparace?!
      //$prep->execute();
      var_dump($result);
      if (!empty($where_arg)) {
        //$this->pointer->dbresult->execute($where_arg);  //znovu provede pro navraceni dat iteraci
      }
if (!empty($where_arg)) {

      } else {
        //$this->pointer->dbresult->execute();
      }
      //$result = NULL;
      //vypocet poctu radku
      //~ if ($result_count) {
        //~ $result = count($this->pointer->dbresult->fetchAll());  //spocita radky
        //~ $this->pointer->dbresult->execute($where_arg);  //znovu provede pro navraceni dat iteraci
      //~ }
      //return $result;
private $email; // predelat na jednu promennou!
// odeslani emailu pro autorizaci
              //nastaveni na: EMAILSEND
              //echo 'email pro autorizaci (ne)byl odeslan';
              //echo 'pracuje se na odeslání emailu pro vás...';
              //var_dump($rs->email);
var_dump(Core::getAbsoluteUrl(), );
//$rs = $c->loadRow('user', array('session=? AND state=? AND active=1', $session, StateUser::ACTIVATED));
// toto ma cenu delat az se to zacne potvrzovat...!!!!!
//exit; // zamerne
// dodelat dotestovat!!!
          // overeni statusu a podle toho se odesle email a nebo podari prihlasit
var_dump(is_numeric($_SERVER['REQUEST_TIME']), is_numeric('now'), is_numeric('+15 day'), date('Y-m-d H:i:s', strtotime($_SERVER['REQUEST_TIME'])));
          //var_dump($session);
          //$c->editRow('user', $rs->rowid, array('logged' => true, 'sessionid' => $session, 'last_login' => 'now'));
          //$c->editRow('user', $rs->rowid, array('session' => $session, 'last_login' => 'now'));
          //var_dump($rs->login, $rs);
          //var_dump($c->loadRowId('user', $rs->rowid));

//a pri prichodu zjistovat jestli neni dotycne session id prihlasene, (kazde toto prihlaseni vydrzi cca 15~30 dni...)
//        p.addPoint(0, -delka);
//        p.addPoint(pole.get(0).x, pole.get(0).y - delka);
//        p.addPoint(pole.get(1).x, pole.get(1).y - delka);
//        p.addPoint(pole.get(2).x, pole.get(2).y - delka);
//        p.addPoint(0, 0);
//        p.addPoint(-pole.get(2).x, pole.get(2).y - delka);
//        p.addPoint(-pole.get(1).x, pole.get(1).y - delka);
//        p.addPoint(-pole.get(0).x, pole.get(0).y - delka);


//        p.addPoint(0, 0);
//        p.addPoint(pole.get(0).x, pole.get(0).y);
//        p.addPoint(pole.get(1).x, pole.get(1).y);
//        p.addPoint(pole.get(2).x, pole.get(2).y);
//        p.addPoint(0, delka);
//        p.addPoint(-pole.get(2).x, pole.get(2).y);
//        p.addPoint(-pole.get(1).x, pole.get(1).y);
//        p.addPoint(-pole.get(0).x, pole.get(0).y);
//        Point secPoint = new Point((int) (Math.cos(this.sec * Math.PI / 30 - Math.PI / 2) * size + this.center.x),
//                (int) (Math.sin(this.sec * Math.PI / 30 - Math.PI / 2) * size + this.center.y));
//
//        Algorithms.drawLineDDA(g, Color.yellow, this.center, secPoint);
//int size = this.maxRadius - 10;
//        int deltaMinutes = this.min * 5 / 60;
//        int size = this.maxRadius - 30;
//        Point hodPoint = new Point((int) (Math.cos((this.hod * 5 + deltaMinutes) * Math.PI / 30 - Math.PI / 2) * size + this.center.x),
//                (int) (Math.sin((this.hod * 5 + deltaMinutes) * Math.PI / 30 - Math.PI / 2) * size + this.center.y));
//
//        Algorithms.drawLineDDA(g, Color.white, this.center, hodPoint);
//        float deltaSeconds = this.sec / (float) 60;
//        int size = this.maxRadius - 20;
//        Point minPoint = new Point((int) (Math.cos((this.min + deltaSeconds) * Math.PI / 30 - Math.PI / 2) * size + this.center.x),
//                (int) (Math.sin((this.min + deltaSeconds) * Math.PI / 30 - Math.PI / 2) * size + this.center.y));
//
//        Algorithms.drawLineDDA(g, Color.white, this.center, minPoint);
//BufferedImage bufferImage = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_RGB);
System.out.println(this.alarmHour + ", " + this.hod + ", :" + this.calendar.get(Calendar.HOUR_OF_DAY) + ":, " + this.alarmMinute + ", " + this.min);
// - Math.PI / 2f - Math.PI / 2f
//pomcislo = (char *)calloc(pocstr, sizeof(char));
//char *pomnum = NULL;
    //int poc = 0;
    //int pc = 0;
    //int num = 0;
    //int j;
    //~ pomnum = (char *)calloc(MAXNUM, sizeof(char));
    //~ if (pomnum == NULL) {
      //~ printf("Nezdarila se alokace retezce!\n");
      //~ myerr.state = EALLOC;
      //~ return pom;
    //~ }
    // optimalizovat!!!!!!!
// dodelat! siskat souracnice retezcu a pak si je vybrat
    //printf("%s\n" , strrchr(retezec, '('));
//printf("'%c' (%d) ", part[i-1], pocstr);
    //printf("\n%s\n" , part);
//exit(0);
    //~ for (i = 0; i < strlen(retezec); i++) {
      //~ //pocetani otevitracich zavorek
      //~ if (retezec[i] == '(') {
        //~ poc++;
      //~ }
//~
      //~ //detekce 2 zavorky
      //~ if (poc == 2) {
        //~ num = 1;
        //~ poc = 0;
      //~ }
//~
      //~ //detekce oddeleni druhe souradnice
      //~ if (num == 2 && retezec[i] == ',') {
        //~ pom.longit = atof(pomnum);
        //~ pc = 0;
        //~ num = 3;
      //~ }
//~
      //~ //detekce prvni souradnice
      //~ if (num == 1 && retezec[i] == ',') {
        //~ pom.latit = atof(pomnum);
        //~ pc = 0;
        //~ num = 2;
//~
        //~ for (j = 0; j < MAXNUM; j++) {
          //~ pomnum[j] = 0;
        //~ }
      //~ }
//~
//~
      //~ if (retezec[i] != '(' && num == 1) {
        //~ pomnum[pc] = retezec[i];
        //~ pc++;
      //~ }
//~
      //~ //detekce druhe souradnice
      //~ if (retezec[i] != ',' && num == 2) {
        //~ pomnum[pc] = retezec[i];
        //~ pc++;
      //~ }
    //~ }
    //DealokujZnak(pomnum);
//printf("%d\n", line);
//printf("%s ;; %s ;; %s ;; %s ;; %s\n", cols[0], cols[1], cols[2], cols[3], cols[4]);
 //int rozdil = (ed.getSecStred() - size);
        //size = size + (ed.getSecStred() - size);
//System.out.println(ed.getSecStred());
        //int rozdil = ed.getSecStred() - size;
        //size = size + rozdil;
//        Polygon p = new Polygon();
//        p.addPoint(0, -size);
//        for (int i = 0; i < pole.size(); i++) {
//            p.addPoint(pole.get(i).x, pole.get(i).y - size);
//        }
//        //p.addPoint(0, ed.getSecStred() - size);
//        p.addPoint(0, 0);
//        for (int i = pole.size() - 1; i >= 0; i--) {
//            p.addPoint(-pole.get(i).x, pole.get(i).y - size);
//        }
        //p.addPoint(0, ed.getSecStred() - size);
// vyresit!
//        for (int i = 0; i < p.npoints; i++) {
//            System.out.println(p.xpoints[i] + "x" + p.ypoints[i]);
//        }
//        System.out.println("-----------------");

//System.out.println(pole.get(i).x+"x"+(pole.get(i).y - size));
//p.addPoint(0, ed.getSecStred() - size);
 //System.out.println(pole);   // jak?
        //System.out.println(ed.getSecStred());
        //p.addPoint(0, ed.getSecStred());
        //(ed.getSecStred()+size)+
        //Polygon pom = rotatePolygon(p, 5 * Math.PI / 30f);
//int size = ed.getHodDelka();
//int size = ed.getMin At verDelka();
Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumyeirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diamvoluptua.
Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumyeirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diamvoluptua. At ver
        //this.stred = -stred + getHeight();
//        switch (this.selectRuc) {
//            case 0: //sekundy
//                PomStred = SecStred;
//                break;
//
//            case 1: //minuty
//                PomStred = MinStred;
//                break;
//
//            case 2: //hodiny
//                PomStred = HodStred;
//                break;
//        }
        //PomStred = -stred + getHeight();
//var_dump($this->cacheEnable);
      //if ($ebabled) {
        // povoleni cahovni do souboru dle url
        //var_dump($_SERVER, $this->generateCacheName());
        //var_dump($_SERVER);
        //var_dump($this->generateCacheName());
      //}
      //var_dump($this->getCachePath(), $this->getCacheName());
//$this->page->cacheEnable = $enabled;
//var_dump($cachedir);  //, $_SERVER
//var_dump($cachedir);
var_dump($cachefile);
exit;
      //var_dump(date('d-m-y H:i:s', filemtime($cachepath)));
          //var_dump(date('d-m-y H:i:s', strtotime($this->cacheExpire)), strtotime('now'));
          //if ()
          //var_dump(strtotime(sprintf('-%s', $this->cacheExpire)), filemtime($cachepath));
// {
//return true; // rozhodovani dle data
// metodu ktera bude boolean a bude rikat jestli cachovat ci cist?!
var_dump(date('Y-m-d H:i:s', filemtime($cachepath)), date('Y-m-d H:i:s', strtotime(sprintf('-%s', $this->cacheExpire))));
//throw new ExceptionCache('dodelat ukladani!!!!');
            //$f = new Filesystem($cachefile, Filesystem::MODE_WRITE);
            //$f->write($content);
            //var_dump(sprintf('%s/%s/%s', $path, $this->page->cacheDir, $name));
          //if (file_exists(sprintf('%s/%s', $path, $name)))
//var_dump($group['name'], $index);$index$index
        //$tim = new DateTime();
        //$tim->setTimestamp(filemtime($cachepath));
        //$exp = new DateTime(sprintf('-%s', $this->cacheExpire));
        //$a->setTimestamp(filemtime($cachepath));
        //var_dump($tim->diff(sprintf('-%s', $this->cacheExpire)));
        //var_dump($tim->diff($exp));
        //var_dump(filemtime($cachepath), strtotime(sprintf('-%s', $this->cacheExpire)));
  /*
  <?php
$cachefile = 'cache/index-cached.html';
$cachetime = 5 * 60;
// Serve from the cache if it is younger than $cachetime
if (file_exists($cachefile) && time() - $cachetime < filemtime($cachefile)) {
    include($cachefile);
    echo "<!-- Cached copy, generated ".date('H:i', filemtime($cachefile))." -->\n";
    exit;
}
ob_start(); // Start the output buffer

/ * The code to dynamically generate the page goes here * /

// Cache the output to a file
$fp = fopen($cachefile, 'w');
fwrite($fp, ob_get_contents());
fclose($fp);
ob_end_flush(); // Send the output to the browser
?>
  */
    /**
     * nastavovani cache obsahu alias cacheContent()
     *
     * @param content data ktera se maji nacachovat
     */
    public function setCacheContent($content) {
      return $this->cacheContent($content);
    }
tridu Files ktera bude ekvivalent k filesystem, files::write, files::read() a nebude pouzivat fopen!
u tridy htmlpade zapracovat cachovani a dalsi veci... na urychleni zbytecne se opakujicich se opraci!
//$remain = $this->getRemainTime()->format('%Y-%m-%d %H:%i:%s');
        //var_dump($remain, $remain->format('%Y-%m-%d %H:%i:%s'));
        //$elapse = $this->getElapseTime()->format('%Y-%m-%d %H:%i:%s');
//($this->cacheEnable ? 'enable' : 'disable')
Core::calculateSize(filesize($cachepath)),
//date('Y-m-d H:i:s', filemtime($cachepath)),
//private static $tests = array();
  //~ if (1 != 2) {
    //~ //Debugger::error('dfdsa dsadsafgd jk kf jgf g jhgfh...');
    //~ //Debugger::error('hjgoi lzu ái  k zui g uj fgh g hf...');
    //Debugger::error('pokus chyby');
  //~ }
//~ private static function addZan($zan, $array) {
      //~ //var_dump($array);
      //~ //var_dump($zan);
      //~ foreach ($array as $key => $item) {
        //~ //var_dump($array[$key]['zan']++);
        //~ //$array[$key]['zan'] += $zan;
        //~ $array[$key]['zan']++;
      //~ }
//~
      //~ return $array;
    //~ }
//var_dump(self::addZan($element['content']));
          //$elem = self::addZan(0, $elem);
          //exit;
          //var_dump($element['zan'], $element['name'], $element['content']);
          // tady se musi pocitat zanoreni! s tim ze bude brat aktualni zanoreni vetve a do celeho contentu se bude pricitat zanoreni o jedno vyssi!!
          //$zan++;
//var_dump($zan);
//var_dump($element);
//$element['content'] = self::addZan($element['zan'], $element['content']);
//$element['zan']
        //$zan--;
//$element['content'] =
(k'.self::$zan.')
//.'<'.$element['name'].(!$pair ? ' /' : '').'>(z'.self::$zan.')'.PHP_EOL;
//~ public function getZan() {
      //~ return $this->element[$this->current]['zan'];
    //~ }
//~
    //~ public function setZan($value) {
      //~ $this->element[$this->current]['zan'] = $value;
    //~ }
//~
    //~ public function incZan() {
      //~ $this->element[$this->current]['zan']++;
    //~ }
          //~ if (!$this->isPairTag() && !$elements->isPairTag()) {
            //~ echo 'nelze vkladat do neparoveho tagu!';
          //~ } else {
//~
          //~ }
          //if ($this->isPairTag() && )
// vyresit vkladani stejnych prvku! dela ++!!!!!
//print_r($this->element[$this->current]['content']);
//var_dump($elements);
//print_r($elements);
//var_dump($this->element[$this->current]['content'], $elements->getArray());
        //$this->element[$this->current]['content'] = array_merge($this->element[$this->current]['content'], $elements->getArray());
        //$this->element[$this->current]['content'][] = $elements->getArray();
//(!$emptycontent ?  : '')
//(!$emptycontent ?  : '')
//$emptycontent = empty($element['content']);
        //var_dump($element['name'].':'.count($element['content']));
        //var_dump($poc, $element['content']);
          // zapinatelene odzazeni
//private $zan = 0;
//$content = (!empty(self::$storelem[$contentid]) ? self::$storelem[$contentid] : NULL);
//var_dump(self::$storelem);
//var_dump($elem);
      //foreach ($elem as $elemid) {
        //var_dump($elemid);
        //exit;
        //$contentid = $elemid['content'];
        //var_dump(self::$storelem);
        //$content = (!empty(self::$storelem[$contentid]) ? self::$storelem[$contentid] : NULL);
        //var_dump($elemid, self::$storelem[$contentid]);
        //~ foreach ($elemid['content'] as $contentid) {
          //~ //$result .= sprintf('%s<%s%s>%s', $this->makeZan(), $element['name'], (!$pair ? ' /' : ''),  (!$emptypair ? $this->makeBreak() : ''));
          //~ $result .= '< ? >';
          //~ $content = (!empty(self::$storelem[$contentid]) ? self::$storelem[$contentid] : NULL);
          //~ //var_dump($content);
          //~ if (!empty($content['content'])) {
            //~ //
            //~ $result .= $this->render($content);
          //~ }
        //~ }
        //print_r($element);
        //~ $pair = $this->pairTag($element['name']);
        //~ $emptypair = ($pair && empty($element['content']));

        //~ $result .= sprintf('%s<%s%s>%s', $this->makeZan(), $element['name'], (!$pair ? ' /' : ''),  (!$emptypair ? $this->makeBreak() : ''));
//~
        //~ //rekurze pro vnitrni vykreslovani
        //~ if (!empty($element['content'])) {
          //~ $this->incZan();  //pricitani zanoreni
//~
          //~ $result .= $this->render($element['content']);
//~
          //~ $this->decZan();  //vraceni zanoreni
        //~ }
//~
        //~ if ($pair) {
          //~ $result .= sprintf('%s</%s>%s', (!$emptypair ? $this->makeZan() : ''), $element['name'], $this->makeBreak());
        //~ }
      //}
//$elements->getId();
            //$elements->getArrayValue();
            //var_dump($elements->getArrayValue());
            //$this->element[$this->current]['content'] += $elements->getArray();
            //$elements->regenId();
// dodelat vkladani pokud se vklada pole komponent!
// pridavat jako neindexovane pole!!!! to je nutnost jiank bez toho se proste neda udelat vicenasobne vkladani stejne veci!!!!
//$result .= $text;//$result .= $text;
//'type' => 0,  //typ elemtnu: element/text/komentar?
                                          //'break' => PHP_EOL,
//'zan' => 0,
                                          // vkldat priznak vkladaneho obsahu???
// promyslet jestli se hodi na vetsi pouziti?? bo jestli se s tim lip pracuje?
//v poli se to prohani hlavi kvuli JSON! taky pak mozna proto ze pole jsou o neco rychlejsi
//doladit pripadne poresit odsazovani? jestli se to teda toto rovnou neignoruje?

    //~ public static function enableZan() {
      //~ self::$zan = 0;
    //~ }
//~
    //~ public static function enableBreak() {
      //~ self::$break = true;
    //~ }
//zaloha uz astecne predelana
    //~ public function render($content = NULL) {
      //~ //print_r($this->element);
      //~ $result = NULL;
//~
      //~ $elem = (is_null($content) ? $this->element : $content);
      //~ //print_r($elem);
//~
//~ //var_dump(self::$storelem);
//~
      //~ foreach ($elem as $elemid) {
        //~ var_dump($elemid);
        //~ exit;
        //~ //print_r($element);
        //~ $pair = $this->pairTag($element['name']);
        //~ $emptypair = ($pair && empty($element['content']));
//~ // jednoho textu take nezalamonat!  a hlavne rozlisovt texty
        //~ $result .= sprintf('%s<%s%s>%s', $this->makeZan(), $element['name'], (!$pair ? ' /' : ''),  (!$emptypair ? $this->makeBreak() : ''));
//~
        //~ //rekurze pro vnitrni vykreslovani
        //~ if (!empty($element['content'])) {
          //~ $this->incZan();  //pricitani zanoreni
//~
          //~ $result .= $this->render($element['content']);
//~
          //~ $this->decZan();  //vraceni zanoreni
        //~ }
//~
        //~ if ($pair) {
          //~ $result .= sprintf('%s</%s>%s', (!$emptypair ? $this->makeZan() : ''), $element['name'], $this->makeBreak());
        //~ }
//~
      //~ }
      //~ return $result;
    //~ }
// $ wget -o /dev/null  --user-agent="" gfdesign.cz
//$_SERVER['HTTP_USER_AGENT'];
$_SERVER['HTTP_USER_AGENT']
$_SERVER['HTTP_USER_AGENT
//var_dump($values);$vsprintf_value
']
//(!empty($values[1]) ? vsprintf($values[0], $values[1]) : $values[0])
//(!empty($values[1]) ? vsprintf($values[0], $values[1]) : $values[0]);
//(!empty($values[1]) ? vsprintf($values[0], $values[1]) : $values[0])
#screen -S $2 -p 0 -X logfile $3
      #screen -S $2 -p 0 -X flush $4
      #screen -S $2 -p 0 -X log on
###nastaveni cesty
    #$ screen -S minecraft -X logfile ~/pokus.log
    ###obnova kazdych 10s
    #$ screen -S minecraft -X logfile flush 10
    ###zapnuti
    #$ screen -S minecraft -X log on
#$ screen -S minecraft -X stuff "gamemode 0 geniv"$( echo -ne '\r' )
#screen -S $2 -p 0 -X stuff "say ahoj"$( echo -ne '\r' )
#exit(2);
#screen -c multiscreen.conf -S $2 -d -m $4
#cd //home/server/dedicated/kf/system && /usr/bin/screen -d -m -S KF ./ucc-bin server KF-BioticsLab.rom?game=KFmod.KFGameType?VACSecure=true?MaxPlayers=6
echo "cd $3 && screen -c multiscreen.conf -d -m -S $2 $4"
#cd "$3" && screen -c multiscreen.conf -S "$2" -d -m "$4"
        #cd /$3 && screen -c multiscreen.conf -d -m -S $2 $4
rm -v multiscreen.conf
echo "multiuser on" >> multiscreen.conf #zapnuti multi useru
echo "acladd root" >> multiscreen.conf  #muze pristupovat uzivatel: root

if [ "$3" != "" ]; then
  cd $3 && screen -c multiscreen.conf -S $2 -p 0 -d -m $4

  echo "spustil jsem screen s nazvem: '$2', cestou: '$3' a prikazem: '$4'"
    else
  screen -c multiscreen.conf -S $2 -p 0 -d -m $4
  echo "spustil jsem screen s nazvem: '$2' a prikazem: '$4'"
fi
//sprintf('%s/%s', $path, $row)
//else {
                //if ($sel_level2 )
                //$res = 'tady je uplne jina chyba';
              //}
//'openttd_clear' => array('cd' => '', 'cmd' => '/usr/games/openttd -D -x', 'end' => array('send' => 'quit'), 'extra' => array('say' => array('prompt'), 'stat' => 'status', 'server info' => 'serverinfo')),
                                        //'openttd_geniv' => array('cd' => '', 'cmd' => '/usr/games/openttd -D -x -c /home/geniv/.openttd/openttd.cfg', 'end' => array('send' => 'quit'), 'extra' => array('say' => array('prompt'), 'stat' => 'status', 'server info' => 'serverinfo')),
                                        //'openttd_default' => array('cd' => '', 'cmd' => '/usr/games/openttd -D -x', 'end' => array('send' => 'quit')),
'cipis_alert' => 'gamemode 2 capasak',
    //$routemodel = 'action/:/subaction/:/subsubaction';  //neefektivni

//prilis rekurzivni
/*
    $routemodel = array('action' => array(
                                          'recipe' => 'subakce1', //action==recipe/subakce*
                                          'units' => array('subakce2' => array( //action==units/subakce2
                                                                              'edit' => 'edit_id',
                                                                              '*' => 'id',
                                                                              )),
                                          '*' => 'subakce0',  //action/cokoly
                                          ),
                        );

    $routemodel = array('action', //samotny
                        //'action=recipe/:/subakce',
                        'action' => array('=recipe' => 'subakce'),
                        //'action=recipe/:/subakce=add/:/crypl',
                        'action' => array('subaction'), //2 uroven
                        //''

                        //'action:recipe' => 'subaction',
                        //'action:recipe|subaction:remote' => 'crit'
                        );
                        //$routemodel
*/
        //$explodemodel = explode('/:/', $model);
        //var_dump($explodemodel);

        //var_dump(array_map($func, $explodemodel, $explodeuri));

        //var_dump($explodemodel);

/*
        if (count($explodemodel) == count($explodeuri)) {
          $result = array_combine($explodemodel, $explodeuri);
          //break;
        }
*/
        //var_dump($explodemodel, $explodeuri);
      //var_dump($explodeuri, $routemodel, PHP_EOL.PHP_EOL.PHP_EOL.PHP_EOL.PHP_EOL);
      //var_dump($routemodel);
// dodelat!!
/*
      $func = function($model, $uri) {
        $arrmodel = explode('=', $model);
        $inarrmodel = in_array($uri, $arrmodel);
        //var_dump($model, $uri, $inarrmodel, '----------------');
        if ($inarrmodel) {
          return $arrmodel[0];
        } else {
          return null;
        }
      };
*/
/*
          //pokud je slice stejny jako pred explodem
          if (count($slice_explode) == count($slice)) {
            $result = array_combine($slice, $explodeuri);
          } else {
            var_dump($explodemodel);
            if ($explodeuri[count($explodeuri) - 1] == $slice_explode[1]) {
              //var_dump($explodemodel);
            }
          }
*/
//$slice_explode = explode('==', $slice[0]);
          //var_dump($slice_explode, $slice, PHP_EOL.PHP_EOL);
//array_map($fce_vyhodnoceni, $porovnani);
//var_dump(array_sum($porovnani));
            //var_dump($explodeuri);
$plne = function($val, $key) use (&$model) {
          if (is_null($val)) {
            unset($model[$key]);
          }
        };
        //var_dump($index, $routemodel[$index]);
//var_dump($model, $index);
//var_dump($explodeuri, $originalmodel[$index]);
//var_dump($finalmodel, $explodeuri, $slice);
     //funkce na deleni pole
      $fce_rozdeleni = function($pole) {
        return explode('==', $pole);
      };

      //funkce na porovnani adresy
      $fce_porovnani = function($model, $uri) {
        if (!empty($model[1])) {
          if ($model[1] == $uri) {
            //var_dump($model, $model[1], 'uri= '.$uri, PHP_EOL.PHP_EOL.PHP_EOL.PHP_EOL);
            return true;
          } else {
            return false;
          }
        } else {
          return false;
        }
      };

      //funkce na vyhazeni dvojpoli
      $fce_zjednoduseni = function($pole) {
        return $pole[0];
      };


//--------------------------------
/*
      $fce0 = function($model) {
        return explode('/', $model);
      };

      $fce = function(&$model, $key, $uri) {

        $rozdeleni = function($pole) {
          return explode('==', $pole);
        };
        $separe = array_map($rozdeleni, $model);

        $porovnani = function($model, $uri) {
          if (!empty($model[1])) {
            if ($model[1] == $uri) {
              return $model[0];
            }
          }
        };

        $model = array_map($porovnani, $separe, $uri);

        array_walk($model, function($val, $key) use (&$model) {
          if (is_null($val)) {
            unset($model[$key]);
          }
        });
      };

      $fce1 = function($pole) {
        return count($pole);
      };

      $fce2 = function($model) {
        $exp = explode('==', $model);
        return $exp[0];
      };

//---------------------------------
      //pokud je vubec neco v adrese


        $originalmodel = $model = array_map($fce0, $routemodel);
//var_dump($originalmodel);
        array_walk($model, $fce, $explodeuri);

        $count = array_map($fce1, $model);
// nepocitat max ale pocitat poect rozdeleni ==!!!!! a teda znovu a poreadne predelat!!!!
        $max = array_keys($count, max($count));
        $index = $max[0];
var_dump($index);
        $finalmodel = array_map($fce2, $originalmodel[$index]);

        $slice = array_slice($finalmodel, 0, count($explodeuri));

        if (count($slice) == count($explodeuri)) {
          $result = array_combine($slice, $explodeuri);
        }

        var_dump($result);

        $fce01 = function($model) {
          //var_dump($model);
          $exp = explode('/', $model);

          $fce02 = function($mod) {
            return explode('==', $mod);
          };
          return array_map($fce02, $exp);
        };

        $split = array_map($fce01, $routemodel);

        $fce03 = function($val, $key, $uri) {


          $fce04 = function($val, $uri) {
            if (!empty($val[1])) {
              if ($val[1] == $uri) {
                //var_dump($val);
                return $val;
              }
            }
            //var_dump($val[1], $uri);
          };

          var_dump(array_map($fce04, $val, $uri));

          //var_dump($val, $key, $uri, PHP_EOL.PHP_EOL.PHP_EOL.PHP_EOL);



          $pole = array();
          foreach ($val as $k => $v) {
            if (!empty($uri[$k]) && !empty($v[1])) {
              if ($uri[$k] == $v[1]) {
                //var_dump($uri, $v);
                var_dump($uri[$k], $k);
              }
              //var_dump($k, $uri);
              //var_dump($uri[$k], $v[1]);
              //var_dump($v[0] == $uri[$k]);
              //var_dump($uri);
              //$pole[] =
            }
            //var_dump($k, $uri[$k]);
          }
        };

        array_walk($split, $fce03, $explodeuri);
*/
        //var_dump($explodeuri, $routemodel);
        //var_dump($uri, $routemodel);
        //var_dump(preg_match('/P<units>([\/])/', $uri, $out), $out);
        //var_dump($uri, $routemodel);
        //var_dump(preg_split("/[(units)\/]/", $uri, 0, PREG_SPLIT_NO_EMPTY));
        //var_dump(preg_match_all("/[units]+[\/]+/", $uri, $out), $out);

        var_dump($result);


        return -111;


        foreach ($routemodel as $model) {
          $explodemodel = explode('/', $model);
          //var_dump($explodemodel);

          $slice = array_slice($explodemodel, 0, count($explodeuri));

          //pokud se rovna pocet slice a modelu
          if (count($slice) == count($explodeuri)) {
            //rozdeleni jednotlivych pravidel podle ==
            $slice_explode = array_map($fce_rozdeleni, $slice);
            $porovnani = array_map($fce_porovnani, $slice_explode, $explodeuri);
var_dump(array_sum($porovnani), count($explodeuri), PHP_EOL.PHP_EOL);
            if (array_sum($porovnani) == count($explodeuri)) {
              $easy_array = array_map($fce_zjednoduseni, $slice_explode);
              $result = array_combine($easy_array, $explodeuri);
            } else if (array_sum($porovnani) == count($explodeuri) - 1) {
              //var_dump($explodeuri);
              $easy_array = array_map($fce_zjednoduseni, $slice_explode);
              $result = array_combine($easy_array, $explodeuri);
            }

            // || array_sum($porovnani) == count($explodeuri) - 1
          }
        }
//var_dump($result);
        //pokud se nic nevyhodnotilo
        if (empty($result)) {
          //bere 0. index
          $explodemodel = explode('/', $routemodel[0]);
          $slice = array_slice($explodemodel, 0, count($explodeuri));
          if (count($slice) == count($explodeuri)) {
            $result = array_combine($slice, $explodeuri);
          }
        }
        //var_dump($explodemodel[1], $explodeuri[$indexmod]);
                //var_dump($explodeuri[$indexmod]);
//var_dump($explode[1]);
//($ret[0] == $explodeuri[$indexmod] ? $ret[0] : null);
//var_dump($ret[0], $explodeuri[$indexmod]);
else {
                  // exception??
                  //var_dump('"'.$explodeuri[$indexmod].'" neni pozadovany typ!!!!');
                }
//na tento zpusob je to az prilis brutalni zapis rewrite!
    public static function getUriPreGet($routemodel) {
      var_dump($routemodel);

      $uri = self::getRequestUri();

      preg_match('/'.$routemodel[0].'/', $uri, $ret);
      var_dump($ret);
    }
// skussit nejaky vyladit!!!!
    $mod = array('(?<action>\w*)\/?(?<subakce>\w+)?\/(?<id>\d+)?');
    DevClass::getUriPreGet($mod);
//***************
// test tohoto!!!!!!!! muze byt jako jedna z variant... getUriPreGet()
//$str = 'foobar: 2008';
//preg_match('/(?P<name>\w+): (?P<digit>\d+)/', $str, $matches);
//var_dump($matches);
//***************
            //var_dump($data['poc'], $poc[$index01]);
            //var_dump($poc);
            //$data['poc'] = $poc;
            //$data['newmodel'] = $newmodel;
            //var_dump($explodemodel);
//$poc = $data['poc'];
            //$newmodel = $data['newmodel'];
//print_r($userdata['newmodel']);
          //$data['poc'][$key] = $userdata['poc'][$key];
          //var_dump($poc, $newmodel);
//var_dump($splitmodel);
          //var_dump($val);
//var_dump(PHP_EOL.PHP_EOL.PHP_EOL.PHP_EOL.PHP_EOL, $userdata);
            //$uri = $data['uri'];
            //var_dump($data['uri'], $key);
        //var_dump($index);
        //var_dump($userdata['newmodel'][$index]);
          //$data['poc'][$key] = $userdata['poc'][$key];
          //$data['newmodel'][$key] = $userdata['newmodel'][$key];
  class DevClass {
/*
    private static function getRequestUri() {
      return substr($_SERVER['REQUEST_URI'], strlen(dirname($_SERVER['SCRIPT_NAME'])) + 1);
    }

    public static function getUriGetOld($routemodel) {
      $result = '';
// a co kdyby se to zjistovalo jen namatkove a sahnulo by se na dotycny index??
      $uri = self::getRequestUri();
      $explodeuri = explode('/', $uri);

      if (!empty($explodeuri[0])) {

        $poc = array();
        $newmodel = array();
        foreach ($routemodel as $indexmodel => $route) {
          $splitmodel = explode('/', $route);
          $poc[$indexmodel] = 0;
          $newmodel[$indexmodel]  = array();
          foreach ($splitmodel as $indexmod => $model) {
            $explodemodel = explode('==', $model);
            $newmodel[$indexmodel][$indexmod] = $explodemodel[0];
            if (!empty($explodeuri[$indexmod]) && !empty($explodemodel[1])) {
              //var_dump($explodemodel[1][0]);
              if ($explodemodel[1][0] == '[') {  //detekce regualrniho vyrazu
                if (preg_match(sprintf('/%s/', $explodemodel[1]), $explodeuri[$indexmod], $ret)) {
                  $explodeuri[$indexmod] = $ret[0];
                }
              }

              if ($explodeuri[$indexmod] == $explodemodel[1]) {
                $poc[$indexmodel]++;
              } else {
                $poc[$indexmodel]--;
              }
            }
          }
        }

        $max = array_keys($poc, max($poc));
        $index = $max[0];
//var_dump($index, $poc);
        $slice = array_slice($newmodel[$index], 0, count($explodeuri));
        if (count($slice) == count($explodeuri)) {
          $result = array_combine($slice, $explodeuri);
        }

      }

      return $result;
    }

    public static function getUriGet($routemodel) {
      $result = '';
      $uri = self::getRequestUri(); //load request uri from gloval variables
      $explodeuri = explode('/', $uri); //split string uri of the array
      if (!empty($explodeuri[0])) { //if explodeuri[0] not empty
        $primary_function = function($val, $key, $data) {
          $secondary_function = function($val, $key, $data) {
            $explodemodel = explode('==', $val);
            $index = $data['key'];
            $data['newmodel'][$index][$key] = $explodemodel[0];
            if (!empty($data['uri'][$key]) && !empty($explodemodel[1])) {
              //aplikace regiralniho vyrazu
              if ($explodemodel[1][0] == '[') {  //detekce regualrniho vyrazu
                if (preg_match(sprintf('/%s/', $explodemodel[1]), $data['uri'][$key], $ret)) {
                  $data['uri'][$key] = $ret[0];
                }
              }
              //vyhledavani nejlepsi schody
              if ($data['uri'][$key] == $explodemodel[1]) {
                $data['poc'][$index]++; //if equal then increment counter
              } else {
                $data['poc'][$index]--; //and if not then decrement counter
              }
            }
          };
          $splitmodel = explode('/', $val); //split each row route modelu
          $data['poc'][$key] = 0; //inicialize counter
          $data['newmodel'][$key]  = array(); //inicialize array new modelu
          //composition multi array for array_walk 3 from 4 is return in param
          $userdata = array('key' => $key,
                            'uri' => &$data['uri'],
                            'poc' => &$data['poc'],
                            'newmodel' => &$data['newmodel']);
          //for each secondary function
          array_walk($splitmodel, $secondary_function, $userdata);
        };
        $newmodel  = array(); //declaration array new model
        $poc = array(); //declaration counter
        //composition multi array for array_walk
        $userdata = array('uri' => &$explodeuri,
                          'poc' => &$poc,
                          'newmodel' => &$newmodel);
        //for each primary function
        array_walk($routemodel, $primary_function, $userdata);
        //find max value from counter array
        $max = array_keys($userdata['poc'], max($userdata['poc']));
        $index = $max[0]; //selection 0.index from max for int value
//var_dump($index, $userdata['poc']);
        //slice from new model array with count explodeuri
        $slice = array_slice($userdata['newmodel'][$index], 0, count($explodeuri));
        //if count slice and count explodeuri is equal then exec array_combine
        if (count($slice) == count($explodeuri)) {
          $result = array_combine($slice, $explodeuri);
        }
        return $result;
      }


    }
*/
  }
    //DevClass::getUri($routemodel);
    //var_dump(DevClass::getUriGet($routemodel));
    //var_dump(DevClass::getUriTest($routemodel));
#~ COUNT=10
#~ if [ "$1" != "" ] && [ -e $1 ]; then
  #~ #zadavani poctu rozrazenych radku
  #~ if [ "$2" != "" ]; then
    #~ COUNT=$2
  #~ fi
#~
  #~ if [ "$3" != "" ]; then
      #~ #echo "sed -n \"$2,$3p\" $1"
      #~ #sed -n '$2,$3p' $1
      #~ sed -n "$2,$3p" $1
    #~ else
      #~ tail -n $COUNT $1
  #~ fi
    #~ else
  #~ if ![ -f $1 ]; then
    #~ echo "file doesn't exist";
  #~ fi
#~ fi
//var_dump(sprintf('sudo %s/users.sh editmysql "%s" "%s"', Config::SCRIPT_DIR, $user, $values['mysqlpass']));
//var_dump($return, $code);
//exec(sprintf('sudo %s/users.sh %s "%s" "%s"', Config::SCRIPT_DIR, $sel_level1, $sel_level2, $values['pass']), $return, $code);
// natala nenadala situace a je potreba sepsat docasnou verzi kter bude umet vypsat aspon logy a mela by umet pridavat logy/editovat/mazat
modul na roztriskavani adresy (smerovani/routovani rewrite adresy) a rozdelovani na urcite casti (ktere jaka cast aplikace ma pouzit)
→za pomoci pravidla: "RewriteRule ^([a-zA-Z0-9-\_\/]+)/?$ index.php?action=$1 [L]"
→s tim ze pokud bude dane providlo na url tak se podle toho musi adresa parsrovat a taky tvorit!
//: openttd a kf ma home v adresari /var/www!
//'kf' => array('cd' => '/home/gmr/dedicated/kf/System', 'cmd' => './ucc-bin server', 'end' => 'kill', 'extra' => ''),  // fail???!!!!!!!!!!!!!!!!!!!!!!!!!!!
//musi se spoustet bez multidetache, ini file?!
//, 'run' => 'normal+multi+listen'// zaimplementovat na co to spoustet!!!???????
//'muj_htop' => array('cd' => '', 'cmd' => 'htop', 'end' => 'kill', 'extra' => ''),
//'mujtop' => array('cd' => '', 'cmd' => 'top', 'end' => 'kill', 'extra' => ''),
// for minecraft to do item 'say'
              //exec(sprintf('sudo %s/iptables.sh', Config::SCRIPT_DIR), $return, $code);
// prekopat zobrazovani, ne najednou zobrazit vse ale az na pozadani...
              /*
              if ($code == 0) {
                $res[] = Html::elem('pre')->setText($return);
              }
              */
    $frm = "<p>Resolution: 962&#215;46 px<br />
Size: 651 KB<br />
Format: Photoshop PSD<br />
Color theme: black, grey, blue, green, red, orange etc<br />
Keywords: website navigation, glossy menu, menus set<br />
License: Free for personal use<br />
Author: psdGraphics</p>";

    var_dump(preg_match('/Format: ([\w ]+)/', $frm, $ret), $ret[1]);
#! [ -L ${DESTINATIONDIR}/${WEBUSERNAME} ] &&
// test!!!
$aaa = 182315646;
$aaa = 0;
var_dump(
  Core::isEmpty($aaa, sprintf('(size grace to: %s)', date('d.m.Y H:i:s', $aaa)), null)
  );
/*
    //public static function isEmpty($value, $true, $false) {}
    //public static function __callStatic($method, $parameters) {
      //var_dump($method, $parameters);
      switch ($method) {
        case 'isEmpty':
          //var_dump($parameters);

          $value = $parameters[0];

          switch (count($parameters)) {
            //isEmpty($value, $default = '')
            case 2:
              $default = (!empty($parameters[1]) ? $parameters[1] : '');
              return (!empty($value) ? $value : $default);
            break;

            //isEmpty($value, $true, $false = '')
            case 3:
              $false = (!empty($parameters[2]) ? $parameters[2] : '');
              return (!empty($value) ? $parameters[1] : $false);
            break;
          }
        break;
      }
    }
*/
//var_dump(is_int($startdate));
//(is_int($startdate) ? (new DateTime())->setTimestamp($startdate) : (new DateTime($startdate)));
date('d.m.Y H:i:s', $quotasplit[4])
// implement this!!!!
//var_dump($diff_size, $diff_count, $quotasplit[4]);
//var_dump($quotasplit);
// nedat koncovy stav ale dat odpocitavani!!
date('d.m.Y H:i:s', $quotasplit[8])
var_dump(Core::getDifferenceDate(1345540601, 'now', 'zbývá: %d dní a %h:%i:%s'));
var_dump(Core::getDifferenceDate("21.8.2012 11:16:41", 'now', 'zbývá: %d dní a %h:%i:%s'));
var_dump($diff_size, $quotasplit[4], $quotasplit[8], Core::getDifferenceDate('now', $quotasplit[4]));
        if (is_int($startdate) && $startdate > 0) {
          var_dump($startdate);
          $d1 = new DateTime();
          $d1->setTimestamp($startdate);
        } else {
          $d1 = new DateTime($startdate);
        }

        if (is_int($enddate) && $enddate > 0) {
          var_dump($enddate);
          $d2 = new DateTime();
          $d2->setTimestamp($enddate);
        } else {
          $d2 = new DateTime($enddate);
        }
        //var_dump($d1, $d2);
//start time
$d1 = $d2 = null;
// screenum poznamky + predvolene tlacitka (s definovanym stylem vstupu)
//'minecraft' => array('cd' => '', 'cmd' => '/home/gmr/dedicated/minecraft_bukkit/minecraft.sh', 'end' => array('send' => 'stop'), 'extra' => array('day' => 'time set 0')),
//'minecraft_snapshot' => array('cd' => '', 'cmd' => '/home/gmr/dedicated/minecraft_snapshot/minecraft.sh', 'end' => array('send' => 'stop'), 'extra' => array('day' => 'time set 0', 'toggle weather' => 'toggledownfall', 'say' => array('prompt'))),
//'minecraft_terrariamod' => array('cd' => '', 'cmd' => '/home/server/dedicated/minecraft_terrariamod/minecraft.sh', 'end' => array('send' => 'stop'), 'extra' => array('day' => 'time set 0', 'toggle weather' => 'toggledownfall', 'cipis_alert' => 'gamemode 2 capasak', 'say' => array('prompt'))),
//'minecraft_tekkit' => array('cd' => '', 'cmd' => '/home/gmr/dedicated/minecraft_tekkit/minecraft.sh', 'end' => array('send' => 'stop'), 'extra' => array('day' => 'time set 0', 'night' => 'time set 19000', 'toggle weather' => 'toggledownfall', 'say' => array('prompt'))),
//'minecraft_hackslashmine' => array('cd' => '', 'cmd' => '/home/gmr/dedicated/minecraft_hackslashmine/minecraft.sh', 'end' => array('send' => 'stop'), 'extra' => array('day' => 'time set 0', 'night' => 'time set 19000', 'toggle weather' => 'toggledownfall')),
// extendst script from executed screen, mode parametrs in one cmd.!!!!
//'openttd' => array('cd' => '', 'cmd' => '/usr/games/openttd -D -x -c /home/gmr/dedicated/openttd/openttd_faja.cfg', 'end' => array('send' => 'quit'), 'extra' => array('say' => array('prompt'), 'stat' => 'status', 'server info' => 'serverinfo', 'pause on' => 'pause', 'pause off' => 'unpause')),
// screenum poznamky
//exec(sprintf('/usr/games/openttd -D -x -c /home/server/dedicated/openttd/openttd_faja.cfg'), $r, $c);
                  //exec(sprintf('screen -S openttd -d -m /usr/games/openttd -D -x -c /home/geniv/.openttd/openttd.cfg'), $r, $c);
                  //var_dump($r, $c);
    // podstatna cast se bude proste jen doplnovat?
      //jquery okna na vykreslovani logu?
      //pripadne ajax vyjezd konfiguraci

/*
      Language::getInstance()->setLanguage(Config::LANG);
      Language::getInstance()->loadGettext()->setAutoCreate();

// prepinani dostupnych jazyku + upload a download konfigu...

      OpenTTDconfig::setPath(Config::CONFIG_DIR, $weburl);

      $content = Html::div()->id('obal_layout')
                            ->insert(Html::div()->id('zahlavi')
                                    ->insert(Html::h1()->setText('GoodFlow OpenTTD config generator'))
                                    ->insert(Html::div()->id('navigace')
                                            ->insert(Html::h2()
                                                    ->insert(Html::a()->hrefpath('')->title('GoodFlow OpenTTD config generator')->setText('OpenTTD config generator'))
                                            )
                                            ->insert(Html::p()
                                                    ->insertContent(OpenTTDconfig::getMenu())
                                            )
                                    )
                            )
                            ->insert(Html::div()->id('obal_obsah')->insertContent(OpenTTDconfig::getContent()))
                            ->insert(Html::div()->id('zapati'));

      $page = new HtmlPage(HtmlPage::DOCTYPE_STRICT);
      $page->setLanguage(Config::LANG)
          ->setUrlPage($weburl)
          ->addMeta('author', 'GoodFlow design - Tvorba webových stránek a systémů (www.gfdesign.cz)')
          ->addMeta('copyright', 'Created by GoodFlow design')
          ->addMeta('description', 'GoodFlow OpenTTD config generator')
          ->addMeta('robots', 'index, follow')
          ->setTitle('GoodFlow OpenTTD config generator')
          ->loadCSS('styles/global_styles.css')
          ->loadJavaScript('script/jquery/jquery-1.6.2.min.js')
          ->loadJavaScript('script/jquery/jquery-ui-1.8.16.custom.min.js')
          ->setTitle('GoodFlow OpenTTD config generator')
          ->addBody($content);
*/
/*

      $page = new HtmlPage(HtmlPage::DOCTYPE_STRICT);
      $page->setLanguage(Config::LANG)
          ->setUrlPage($weburl)
          ->addMeta('author', 'GoodFlow design - Tvorba webových stránek a systémů (www.gfdesign.cz)')
          ->addMeta('copyright', 'Created by GoodFlow design')
          ->addMeta('description', 'GoodFlow OpenTTD config generator')
          ->addMeta('robots', 'index, follow')
          ->setTitle('GoodFlow OpenTTD config generator')
          ->loadCSS('styles/global_styles_2.css')
          ->loadJavaScript('script/jquery/jquery-1.6.2.min.js')
          ->loadJavaScript('script/jquery/jquery-ui-1.8.16.custom.min.js')
          ->setTitle('GoodFlow OpenTTD config generator')
          ->addJavaScript('
      function resize() {
        //<![CDATA[
          $("#fullscreen_bcg img").attr({
            "width": $(window).width()+"px",
            "height": $(window).height()+"px"
          });
        //]]>
      }
      $(document).ready(function(){
        $(window).resize(function() {
          resize();
        });
        resize();
      });
    ')
          ->addBody(Html::div()->id('fullscreen_bcg')->insert(Html::img()->srcpath('obr/no_browser.png')->alt('')));
*/
//var_dump($this->dbname);
      if (!empty($path)) {
        $path = implode('/', array($path, $this->dbname));
      } else {
        $path = $this->dbname;
      }
if (!empty($path)) {
        $path = implode('/', array($path, $this->dbname));
      } else {
        $path = $this->dbname;
      }
var_dump($this->pdo->errorInfo(), $this->pdo->errorCode());
      // || die('fuck!');
//($this->page->conf->doctype == self::DOCTYPE_HTML5);
//var_dump(date('d.m.Y', strtotime('+90 days', strtotime('25.06.2012'))));
$sql = sprintf('CREATE  TABLE IF NOT EXISTS `%s` (
                          `%s` INT(11) NOT NULL AUTO_INCREMENT ,
                          `%s` VARCHAR(100) NOT NULL ,
                          `%s` TEXT NULL ,
                          PRIMARY KEY (`%s`) )
                        ENGINE = InnoDB;',
            self::TABLE_KATEGORIE, self::ROWID, self::TABLE_KATEGORIE_NAZEV, self::TABLE_KATEGORIE_POPIS, self::ROWID);
/*
Sql::TARGET_SQLITE2:
Sql::TARGET_SQLITE3:
Sql::TARGET_MYSQL:

      switch ($this->sql->target) {
        case Sql::TARGET_SQLITE2:
          //sql pro sqlite2
          $result = sprintf('%s %s FROM %s', $this->sql->start, $columns, $tables);
        break;

        case Sql::TARGET_SQLITE3:
          //sql pro sqlite3
          $result = sprintf('%s %s', $this->sql->start, $columns, $tables);
        break;

        case Sql::TARGET_MYSQL:
          //sql pro mysql

          $result = sprintf('%s %s', $this->sql->start, $columns, $tables);
        break;
      }
      */
// presne popremyslet kde se bude ten samotny PDO objekt vytvater!!!!
/*
        $flag = array('uq',
                      'pk',
                      'ai',
                      'nn',
                      );
*/
      $type = array('int' => array(SQL::TARGET_SQLITE2 => 'INTEGER',
                                   SQL::TARGET_SQLITE3 => 'INTEGER',
                                   SQL::TARGET_MYSQL => 'INT'),
                    'text' => array(SQL::TARGET_SQLITE2 => 'TEXT',
                                    SQL::TARGET_SQLITE3 => 'TEXT',
                                    SQL::TARGET_MYSQL => 'TEXT'),
                    'bool' => array(),
                    'varchar' => array(),

                    );
  class Sql {
    const VERSION = 1.08;

    //target
    const TARGET_SQLITE2 = 'sqlite2';
    const TARGET_SQLITE3 = 'sqlite3';
    const TARGET_MYSQL = 'mysql';

    //engine
    const MYSQLENGINE_INNODB = 'InnoDB';
    const MYSQLENGINE_MYISAM = 'MyISAM';
    const MYSQLENGINE_MEMORY = 'MEMORY';

    //type
    const BOOLEAN = 't:bool';
    const INTEGER = 't:int';
    const TEXT = 't:text';
    const DATE = 't:date';
    const DATETIME = 't:datetime';
    const VARCHAR = 't:varchar';  //pretezovana konstanta
    const FLOAT = 't:float';
    const DOUBLE = 't:double';

    //flags
    const UNIQUE = 'f:uq';
    const PRIMARYKEY = 'f:pk';
    const AUTOINCREMENT = 'f:ai';
    //const NULL = 'n';
    const NOTNULL = 'f:nn';

    //function: static method, not yet
    //count
    //max
    //min

    //start
    const SELECT = 'select';  //
    const INSERT = 'INSERT';
    const UPLDATE = 'UPDATE';
    const DELETE = 'DELETE';
    const CREATE_TABLE = 'create_tab';  //
    const DROP_TABLE = 'DROP TABLE';
    const CREATE_INDEX = 'CREATE INDEX';
    const DROP_INDEX = 'DROP INDEX';
  }

  //namespace classes;
  class SQLBuilder {
    const VERSION = 1.18;
    private $sql = null;

    private $types =  array('int' => array('' => 'INTEGER',
                                           SQL::TARGET_MYSQL => 'INT'),
                            'text' => array('' => 'TEXT'),
                            'bool' => array(),
                            'varchar' => array(),
                          );

    private $flags = array('uq' => array('' => 'UNIQUE'),
                           'pk' => array('' => 'PRIMARY KEY'),
                           'ai' => array(SQL::TARGET_SQLITE2 => 'AUTOINCREMENT',
                                         SQL::TARGET_SQLITE3 => 'AUTOINCREMENT',
                                         SQL::TARGET_MYSQL => 'AUTO_INCREMENT'),
                           'nn' => array('' => 'NOT NULL'),
                           );

    public function __construct($target, $start = SQL::SELECT) {
      $this->sql = new stdClass;
      $this->sql->target = $target;
      $this->sql->start = $start;
      $this->sql->column = array();
      $this->sql->table = array();
      switch ($start) {
        case SQL::SELECT:
          $this->sql->where = array();
          $this->sql->group = array();
          $this->sql->having = array();
          $this->sql->order = array();
          $this->sql->limit = array();
        break;

        case SQL::CREATE_TABLE:
          $this->sql->engine = (self::isMySQL() ? SQL::MYSQLENGINE_MYISAM : null);
        break;
      }
    }

    public function __call($method, $parameters) {
      switch ($this->sql->start) {
        case SQL::SELECT: //select dotaz
          switch($method) {
            case 'table':
              $this->sql->table[] = $parameters[0];
            break;

            case 'tables':
              $this->sql->table = array_merge($this->sql->table, $parameters);
            break;

            case 'columns':
              $this->sql->column = array_merge($this->sql->column, $parameters);
            break;

            case 'column':
              $this->sql->column[] = $parameters[0];
            break;

            case 'where':
            case 'and': //pokud pujde o slozitejsi tak napsat jednoduseji
            case 'or':
            case 'xor':
              if ($method != 'where') {
                $this->sql->where[] = strtoupper($method);
              }
              $this->sql->where[] = $parameters[0];
            break;

            case 'group':
              $this->sql->group[] = $parameters[0];
            break;

            case 'order':
              $this->sql->order[] = $parameters[0];
            break;

            case 'having':
              $this->sql->having[] = $parameters[0];
            break;

            case 'limit':
              $this->sql->limit = vsprintf('%d,%d', $parameters);
            break;
          }
        break;

        case SQL::CREATE_TABLE: //create table dotaz
          switch($method) {
            case 'column':
              $this->sql->column[] = $parameters;
            break;

            case 'table':
              $this->sql->table = $parameters[0];
            break;

            case 'engine':
              $this->sql->engine = (self::isMySQL() ? $parameters[0] : null);
            break;
          }
        break;
      }

      return $this;
    }

    public function isMySQL() {
      return ($this->sql->target == SQL::TARGET_MYSQL);
    }

    public function isSQLite3() {
      return ($this->sql->target == SQL::TARGET_SQLITE3);
    }

    public function render() {
      $result = '';

      var_dump($this->flags, $this->types);

      switch ($this->sql->start) {
        case SQL::SELECT:
          $mysql = self::isMySQL();
          $columns = implode(', ', $this->sql->column);
          $tables = ($mysql ? '`' : '').implode(($mysql ? '`, `' : ', '), $this->sql->table).($mysql ? '`' : '');
          $where = (!empty($this->sql->where) ? ' WHERE '.implode(' ', $this->sql->where) : '');
          $groups = (!empty($this->sql->group) ? ' GROUP BY '.implode(', ', $this->sql->group) : '');
          $having = (!empty($this->sql->having) ? ' HAVING '.implode(' ', $this->sql->having) : '');
          $orders = (!empty($this->sql->order) ? ' ORDER BY '.implode(', ', $this->sql->order) : '');
          $limit = (!empty($this->sql->limit) ? ' LIMIT '.$this->sql->limit : '');
          //pro vsechny stejne
          $result = sprintf('SELECT %s FROM %s%s%s%s%s%s;', $columns, $tables, $where, $groups, $having, $orders, $limit);
        break;

        case SQL::CREATE_TABLE:
          $engine = '';
          $table = '';
          switch ($this->sql->target) {
            case SQL::TARGET_SQLITE2:
              $table = $this->sql->table;
            break;

            case SQL::TARGET_SQLITE3:
              $table = $this->sql->table;
            break;
// generovani columns!
            case SQL::TARGET_MYSQL:
              $table = '`'.$this->sql->table.'`';

              $colfunct = function($pole, $key, $userdata) {
                $row = array();
                foreach ($pole as $r) {
                  $expl = explode(':', $r);
                  var_dump($expl);
                  if (count($expl) > 1) {
                    //flag
                    switch ($expl[0]) {
                      case 't': //type
                      var_dump($userdata['type'][$expl[1]][$userdata['target']]);
                      //var_dump($userdata[$expl[1]][$userdata['target']]);
                        $userdata['row'][$key] .= ' '.strtoupper($expl[1]);
                      break;

                      case 'f': //flag
                        //
                      break;
                    }
                  } else {
                    //name
                    $userdata['row'][$key] = $expl[0];
                  }
                }
              };

              $row = array();
              $userdata = array('row' => &$row,
                                'type' => $type,
                                'target' => $this->sql->target);
              array_walk($this->sql->column, $colfunct, $userdata);  //$userdata
              //var_dump($pole);
              var_dump($userdata);

/*
              foreach ($this->sql->column as $column) {
                var_dump(array_map($colfunct, $column));
              }
*/

              $engine = 'ENGINE = '.$this->sql->engine;
            break;
          }
          $result = sprintf('CREATE TABLE IF NOT EXISTS %s () %s;', $table, $engine);
        break;
      }
      return $result;
    }

    public function __toString() {
      return $this->render();
    }
  }

  //$s = new SQLBuilder(SQL::TARGET_SQLITE2, Sql::SELECT);
  //$s = new SQLBuilder(SQL::TARGET_SQLITE3, Sql::SELECT);
  //$s = new SQLBuilder(SQL::TARGET_MYSQL, Sql::SELECT);
  //$s = new SQLBuilder(SQL::TARGET_MYSQL);
  //$s->columns('a', 'b', 'c')->column('e')->table('pokus')->where('pokus=5')->and('b=8')->or('kuksa=7')->group('c')->having('f=4')->order('a asc')->order('b desc')->limit(2,5);
  $s = new SQLBuilder(SQL::TARGET_MYSQL, SQL::CREATE_TABLE);
  //$s = new SQLBuilder(SQL::TARGET_SQLITE3, Sql::CREATE_TABLE);
  $s->column('_id', SQL::INTEGER, SQL::PRIMARYKEY, SQL::AUTOINCREMENT, SQL::NOTNULL)
    ->column('nazev', SQL::TEXT, SQL::UNIQUE, SQL::NOTNULL)
    ->column('popis', SQL::TEXT, SQL::NOTNULL)
    ->table('suroviny')->engine(SQL::MYSQLENGINE_INNODB);
  var_dump($s, (string) $s);
$db->execSQL('CREATE UNIQUE INDEX IF NOT EXISTS kategorie_nazev_UNIQUE ON %s (%s ASC);',
                        array(self::TABLE_KATEGORIE, self::TABLE_KATEGORIE_NAZEV));
//$create_index = 'CREATE UNIQUE INDEX `%s_%s_UNIQUE` ON `%s` (`%s` ASC) ;';
//$db->execSQL($drop_sql, array(self::TABLE_SUROVINY));
//$db->execSQL($create_index,
          //    array(self::TABLE_SUROVINY, self::TABLE_SUROVINY_NAZEV, self::TABLE_SUROVINY, self::TABLE_SUROVINY_NAZEV));
//$db->execSQL($drop_sql, array(self::TABLE_KATEGORIE));
          //$db->execSQL($create_index,
          //              array(self::TABLE_KATEGORIE, self::TABLE_KATEGORIE_NAZEV, self::TABLE_KATEGORIE, self::TABLE_KATEGORIE_NAZEV));
/*
      $sql = sprintf('CREATE TABLE IF NOT EXISTS %s (
        %s INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
        %s TEXT NOT NULL,
        %s TEXT NULL);',
        self::TABLE_KATEGORIE, self::ROWID, self::TABLE_KATEGORIE_NAZEV, self::TABLE_KATEGORIE_POPIS);
      $db->execSQL($sql);

      $db->execSQL('CREATE UNIQUE INDEX IF NOT EXISTS kategorie_nazev_UNIQUE ON %s (%s ASC);',
                    array(self::TABLE_KATEGORIE, self::TABLE_KATEGORIE_NAZEV));
*/

      //var_dump($sql, $db);
$sql = sprintf('CREATE TABLE IF NOT EXISTS %s (
            %s INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
            %s TEXT NOT NULL UNIQUE,
            %s TEXT NULL);',
            self::TABLE_KATEGORIE, self::ROWID, self::TABLE_KATEGORIE_NAZEV, self::TABLE_KATEGORIE_POPIS);
//$drop_sql = 'DROP TABLE IF EXISTS `%s` ;';
//if ($this->pdo->exec($sql))
          //throw new PDOException($e[2]);
        //}
//self::onCreate($this->db);
      //self::onCreate($this->db);
      //self::onCreate($this->db);
//var_dump($db, $db->getDriverName(), PDODatabase::getAvailableDrivers());
//self::onCreate($this->db);  //volani onCreate z teto tridy
, $handle->getDatabaseName()
var_dump('potomek create', $db);
var_dump('hlavni create', $db);
//static::onCreate($db);  //volani onCreate potomka
    //private $dbname = null;
    //private $version = null;
    //private $db = null;
//toto bude jen obal PDO! zadny dependeci inj.! apod
// pridat i metody ktere trebas nejsou tak uplne pod android SQLiteDatabase
// respektive to muze fungovat jako takovy singleton!!!!???
//var_dump($stpdo->rowCount(), $this->pdo->lastInsertId());
      //var_dump($stpdo->rowCount(), $this->pdo->lastInsertId(), $this->pdo->errorInfo());
//'dotkeys' => $dotkeys,
//'dotvalues' => array_combine($dotkeys, $values)
var_dump($sql, array_merge($content['values'], $whereArgs));
// kontrolovat [1] ne error code, neda se tak odhalovat chyby!
        if (intval($this->pdo->errorCode()) != 0) {
          $e = $this->pdo->errorInfo();
          //throw new PDOException($e[2]);
        }
if (!is_null($statement)) {
          $e
var_dump($statement->errorInfo());
      } else {
        $e = $this->pdo->errorInfo();

      }
if (intval($this->pdo->errorCode()) != 0) {
          $e = $this->pdo->errorInfo();
          throw new PDOException($e[2]);
        }
/*
    private function isStatementError() {
      var_dump($this);
    }
*/
 if (intval($this->pdo->errorCode()) != 0) {
          $e = $this->pdo->errorInfo();
          throw new PDOException($e[2]);
        }
if (!empty($param) && is_array($param)) {
          $sql = vsprintf($sql, $param);
        }
/*
        $content = $values->getContent();
        $dotfunc = function($pole) { return ':'.$pole; };
        $dotkeys = array_map($dotfunc, $content['keys']);
        $sql = sprintf('INSERT INTO %s (%s) VALUES (%s);', $table, implode(', ', $content['keys']), implode(', ', $dotkeys));
        $stpdo = $this->pdo->prepare($sql);
        */
//$result = ($stpdo->execute(array_combine($dotkeys, $content['values'])) ? intval($this->pdo->lastInsertId()) : -1);
//$result = ($stpdo->execute(array_combine($dotkeys, $content['values'])) ? intval($this->pdo->lastInsertId()) : -1);
$content = $values->getContent();
        $dotfunc = function($pole) { return $pole.'=?'; };
        $sql = sprintf('UPDATE %s SET %s WHERE %s;', $table, implode(', ', array_map($dotfunc, $content['keys'])), $whereClause);
        $stpdo = $this->pdo->prepare($sql);
        $result = ($stpdo->execute(array_merge($content['values'], $whereArgs)) ? $stpdo->rowCount() : -1);
//array_combine($dotkeys, $content['values'])
//$dotfunc = function($pole) { return ':'.$pole; };
      //$dotkeys = array_map($dotfunc, $content['keys']);
      //$keys = array_fill(0, count($content['keys']), '?');
      //var_dump($keys, $content['values']);
var_dump($sql, array_map($dotfunc, $content['keys']));
      //var_dump($this->content, $content['content']);
var_dump($this->content);
//secteni objektu
//var_dump($from->_getContent());// $content['content']);
        var_dump($this->content);
/*
    public function getDatabaseVersion() {
      return $this->version;
    }

    public function getReadableDatabase() {
      //jen pro cteni, vraci: PDODatabase
      self::onCreate($this->db);
    }

    public function getWritableDatabase() {
      self::onCreate($this->db);
      //jen pro cteni a zapis, vraci: PDODatabase
      return $this->db;
    }
*/
 public function setFetchMode($mode) {
      $this->cursor->fetch_style = $mode;
    }
/*
var_dump($this->cursor);
      while ($r = $statement->fetch(PDO::FETCH_ASSOC)) {
        //while ($r = $q->fetchObject()) {
        var_dump($r);
      }
*/
//$this->cursor->statement->fetchAll()
      //return (!is_null($this->cursor->fetchAll) ?  : );
else {
        $result = $this->cursor->fetchAll;
      }
return $this->cursor->fetchAll;
if (is_null($this->cursor->fetch)) {
        var_dump($this);
        // dodelat!!!!
      }
//var_dump($this->cursor->statement->fetchAll());
//var_dump(self::getCount(), $this->getCount());
$this->cursor->fetch
$this->cursor->fetch
      //var_dump($filter[1]);
      //$keys = array_keys($this->cursor->fetchAll->data[0]);
      //var_dump($this->cursor->fetchAll->columns);
      //$this->cursor->fetchAll->data[0][$columnIndex];v
      //var_dump($this->cursor->fetchAll->columns);
      //return $this->cursor->fetchAll->columns[$columnIndex];
//var_dump(array_flip($this->cursor->fetchAll->columns));
      //var_dump($this->cursor->fetchAll->columns);
      //var_dump(array_filter($this->cursor->fetchAll->columns, $func));
      //var_dump($filter);
//$keys = array_keys($this->cursor->fetchAll->data[0]);
          //var_dump(array_flip($this->cursor->fetchAll->data[0]));
//var_dump($this->cursor->fetchAll->columns);
    private function _separeColumn() {
      //$func = function($val, $v2) { var_dump($val, $v2); };
      //var_dump(count($this->cursor->fetchAll->data[0]));
      //, array_filter($this->cursor->fetchAll->data[0], $func));
      //self::_separeColumn();
    }
//$this->cursor->fetch_style = PDO::FETCH_ASSOC;
//return count($this->cursor->fetchAll->data);
//$index = $this->cursor->fetchAll->index;
      //$offsetindex = $index + 1;
      //$this->cursor->fetchAll->index = ($podm ? $offsetindex : $index);
      //var_dump($this->cursor->fetchAll->index);
      //return self::move($this->cursor->fetchAll->index + 1);
      //var_dump($podm);
      //var_dump($this->cursor->fetchAll->index);
//var_dump($this->cursor->fetchAll->index, $podm);
, $version
 && !is_null($version)
$dbname,
//$this->helper->version = $version;
var_dump($this->pdo, self::checkPDOError(), $this->checkPDOError());
/*
    public function MySQLMemory($host, $user, $passwd, $port = 3306, $options = null) {
      $port = Core::isEmpty($port, 3306);
      $this->helper->db = new PDODatabase(sprintf('mysql:host=%s;port=%s;charset=utf8', $host, $port), $user, $passwd, $options);
      return $this;
    }

    public function setEngine($engine) {
      // ma cenu to tam davat?!
}
*/
// predat jeste $this->helper do cursoru a volit engine pro mysql!!!!
//var_dump(sprintf('mysql:host=%s;%sport=%s;charset=utf8', $host, (!empty($this->helper->dbname) ? sprintf('dbname=%s;', $this->helper->dbname) : ''), $port));
//$this->helper->db = new PDODatabase(sprintf('mysql:host=%s', $host), $user, $passwd, $options);
// malinko doladit pro memory database
    //sqlite: path/:memory:
// pokud se tzu zada prazdne jmeno tak se jen zvoli typ pripojeni a metody SQLite2,SQLite3,MySQL by se mohli pak uz vynechat!
// pokud je nazev prazdky tak se jedna o in-memory ale toto v metodach: SQLite2,SQLite3,MySQL!!!!
    /*
    const MYSQL_MEMORY = 'MEMORY';
    const MYSQL_MYISAM = 'MyISAM';
    const MYSQL_INNODB = 'InnoDB';
*/
/*
              if (!is_null($parameters[0])) {
                //kontrola jestli uz nejake atributy neobsahuje
                $attribute = $this->getAttribute($method);
                if (!empty($attribute)) {
                  //pokud je uz neco obsazeno tak scita pole
                  $value = array_merge(array($attribute), $parameters);
                } else {
                  //pokud je to prvni parametr
                  $value = $parameters[0];
                }
              }
              */
//$this->elem->name = $name;
//return self::render();
//$this->elem->attributes = array();
    private function getPairAttribute($name) {
      // doplnit nektere tagy jsou neparove, ale spis podle HTML5!
      return false;
    }
// naaplikovat htmlspecialchars(, ENT_NOQUOTES) //pres array_map
//var_dump(array_filter(self::$elements[$this->elem->id]['contents'], $filter_text));
/*
 * // dodat a implementovat nejak!
int	CONFLICT_ABORT	When a constraint violation occurs,no ROLLBACK is executed so changes from prior commands within the same transaction are preserved.
int	CONFLICT_FAIL	When a constraint violation occurs, the command aborts with a return code SQLITE_CONSTRAINT.
int	CONFLICT_IGNORE	When a constraint violation occurs, the one row that contains the constraint violation is not inserted or changed.
int	CONFLICT_NONE	Use the following when no conflict action is specified.
int	CONFLICT_REPLACE	When a UNIQUE constraint violation occurs, the pre-existing rows that are causing the constraint violation are removed prior to inserting or updating the current row.
int	CONFLICT_ROLLBACK	When a constraint violation occurs, an immediate ROLLBACK occurs, thus ending the current transaction, and the command aborts with a return code of SQLITE_CONSTRAINT.
*/


    /**
     * When a constraint violation occurs, the command aborts with a return code SQLITE_CONSTRAINT.
     */
    const CONFLICT_FAIL = 'fail';
    /**
     * When a constraint violation occurs, the one row that contains the constraint violation is not inserted or changed.
     */
    const CONFLICT_IGNORE = 'ignore';
    /**
     * Use the following when no conflict action is specified.
     */
    const CONFLICT_NONE = 'none';
    /**
     * When a constraint violation occurs, an immediate ROLLBACK occurs, thus ending the current transaction, and the command aborts with a return code of SQLITE_CONSTRAINT.
     */
    const CONFLICT_ROLLBACK = 'rollback';

    const SQLITE_CONSTRAINT = 'constraint'; //jakozto vyjimka

// doresit & dopsat!!

    /**
     * General method for inserting a row into the database.
     * public long insertWithOnConflict (String table, String nullColumnHack, ContentValues initialValues, int conflictAlgorithm)
     *
     * @param table the table to insert the row into
     * @param values this map contains the initial column values for the row. The keys should be the column names and the values the column values
     * @param conflictAlgorithm for insert conflict resolver
     * @return the row ID of the newly inserted row OR the primary key of the existing row if the input param 'conflictAlgorithm' = CONFLICT_IGNORE OR -1 if any error
     */
    public function insertWithOnConflict($table, ContentValues $values, $conflictAlgorithm) {
      $result = '';
      try {
        $_res = $this->_insert($table, $values);
        $result = $_res['result'];
        $e = $this->checkPDOError($_res['statement'], false);

        var_dump($e, $conflictAlgorithm);
        switch ($conflictAlgorithm) {
          case self::CONFLICT_NONE:
            //nic
          break;

          case self::CONFLICT_FAIL:
            echo $e;
            $result = self::SQLITE_CONSTRAINT;
          break;

          case self::CONFLICT_ROLLBACK:
            $_res['statement']->rollBack();
            $result = self::SQLITE_CONSTRAINT;
          break;
        }

        // doimplementovat konflikt konstanty!! a jejich chovani
        //$dbh->rollBack();
      } catch (PDOException $e) {
        self::printPDOError($e);
      }
      return $result;
    }
var_dump($db->insertWithOnConflict(DatabaseHandler::TABLE_SUROVINY, $val, PDODatabase::CONFLICT_FAIL));
        //$this->assertGreaterThan(0, $this->insertWithOnConflict(DatabaseHandler::TABLE_SUROVINY, $val, PDODatabase::CONFLICT_ABORT));
/**
     * Convenience method for updating rows in the database.
     * public int updateWithOnConflict (String table, ContentValues values, String whereClause, String[] whereArgs, int conflictAlgorithm)
     *
     * @param table the table to update in
     * @param values a map from column names to new column values. null is a valid value that will be translated to NULL.
     * @param whereClause the optional WHERE clause to apply when updating. Passing null will update all rows.
     * @param whereArgs
     * @param conflictAlgorithm for update conflict resolver
     * @return the number of rows affected
     */
    public function updateWithOnConflict($table, ContentValues $values, $whereClause, array $whereArgs, $conflictAlgorithm) {
      $result = '';
      try {
        $_res = $this->_update($table, $values, $whereClause, $whereArgs);
        $result = $_res['result'];
        //$dbh->rollBack();
        $this->checkPDOError($_res['statement']);
        // doimplementovat!!
      } catch (PDOException $e) {
        self::printPDOError($e);
      }
      return $result;
    }
//$_res = $this->_update($table, $values, $whereClause, $whereArgs);
        //$result = $_res['result'];
    /**
     * internal update method
     */
    public function _update($table, ContentValues $values, $whereClause, array $whereArgs) {
      $content = $values->_getContent();
      $dotfunc = function($pole) { return $pole.'=?'; };
      $sql = sprintf('UPDATE %s SET %s WHERE %s;', $table, implode(', ', array_map($dotfunc, $content['keys'])), $whereClause);
      $stpdo = $this->pdo->prepare($sql);
      return array('result' => ($stpdo->execute(array_merge($content['values'], $whereArgs)) ? $stpdo->rowCount() : -1),
                   'statement' => $stpdo);
    }
      //insertOrThrow
        $val = new ContentValues;
        $val->put(DatabaseHandler::TABLE_SUROVINY_NAZEV, 'nazev 2')
            ->put(DatabaseHandler::TABLE_SUROVINY_POPIS, 'popis nazvu 3');
        //var_dump('insert: '.$db->insert(DatabaseHandler::TABLE_SUROVINY, $val));

        $val2 = new ContentValues;
        $val2->put(DatabaseHandler::TABLE_SUROVINY_NAZEV, 'nazev 2 uprava')
            ->put(DatabaseHandler::TABLE_SUROVINY_POPIS, 'popis nazvu 3 uprava');
        //var_dump('update: '.$db->update(DatabaseHandler::TABLE_SUROVINY, $val2, DatabaseHandler::TABLE_SUROVINY_NAZEV.'=?', array('nazev 2')));
        case self::EXCEPTION_THROW:
          throw new PDOException($msg);
        break;
PDODatabase::setExceptionOut(PDODatabase::EXCEPTION_THROW);
        $this->assertEquals(PDODatabase::EXCEPTION_THROW, PDODatabase::getExceptionOut());
      //var_dump($cur->getColumnNames());
  //var_dump($cur->getColumnName(1));
  //var_dump($cur->getColumnName(3));
  //var_dump($cur->getColumnIndex('_id'));
  //var_dump($cur->getColumnIndex('nazev'));
  //var_dump($cur->getColumnIndex('pokus'));
  //var_dump($cur->getColumnIndexOrThrow('nazev'));
  //var_dump($cur->getColumnIndexOrThrow('pokus'));
var_dump('----------------------');

  var_dump($cur->getPosition());
  var_dump($cur->moveToNext());
  var_dump($cur->moveToNext());
  var_dump($cur->moveToNext());
  var_dump($cur->moveToNext());
  var_dump($cur->moveToNext());
  var_dump($cur->moveToNext());
  //var_dump($cur->move(3));
var_dump('----------------------');

  $cur->moveToFirst();
  var_dump($cur->getPosition());

  var_dump($cur->moveToPosition(-2));
  var_dump($cur->moveToPosition(2));
  var_dump($cur->moveToPosition(5));
  var_dump($cur->moveToPosition('a'));

/*
var_dump('----------------------');

  $cur->moveToLast();
  var_dump($cur->getPosition());

  var_dump($cur->moveToPrevious());
  var_dump($cur->moveToPrevious());
  var_dump($cur->moveToPrevious());
  var_dump($cur->moveToPrevious());
  var_dump($cur->moveToPrevious());
  var_dump($cur->moveToPrevious());
*/
var_dump('----------------------');
  if ($cur->moveToFirst()) {
    do {
      //var_dump('f:', $cur->isFirst());
      //var_dump('l:', $cur->isLast());
      //var_dump($cur->isNull(2));
      //var_dump($cur->isAfterLast(), $cur->isBeforeFirst());

      var_dump($cur->getInt(0), $cur->getString(1));
      //var_dump($cur);
    } while ($cur->moveToNext());
  }
  //$cur->moveToLast();
  //$cur->moveToNext();
  //$cur->moveToNext();
  //var_dump($cur->getCount());
  //var_dump($cur->getColumnCount());
//var_dump($cur);
//var_dump(Core::getPHPVersion());
  //$cur = $db->rawQuery('select * from '.DatabaseHandler::TABLE_SUROVINY.' where '.DatabaseHandler::TABLE_SUROVINY_NAZEV.'=?', array('nazev 1'));
  /*
  while ($cur->hasNext()) {
    $r = $cur->next();
    var_dump($r->getBool(0), $r->getInt(0), $r->getFloat(0), $r->getInt(0), $r->getString('nazev'), $r->getType(5));
  }
  */
          //$this->assertEquals();
        //$this->assertTrue()
        //$this->assertFalse()

/*
// array_keys($this->cursor;->fetch);
  cur.moveToFirst();
  while (cur.isAfterLast() == false) {
      view.append("n" + cur.getString(1));
      cur.moveToNext();
  }
  cur.close();


  foreach ($q->fetchObject() as $k => $r) {
    var_dump('k: '.$k.', r: '.$r);
  }

  foreach ($q->fetch(PDO::FETCH_ASSOC) as $r) {
    var_dump($r);
  }

  while ($r = $q->fetch(PDO::FETCH_ASSOC)) {
  //while ($r = $q->fetchObject()) {
    var_dump($r);
  }*/
//var_dump($cur->isClosed());
//var_dump($cur->isClosed());
        //$this->assertEquals('mysql', $h->getDatabase()->getDriverName());
  //$cur->moveToLast();
  //$cur->moveToNext();
  //$cur->moveToNext();
  //var_dump($cur->getCount());
  //var_dump($cur->getColumnCount());

//var_dump($cur);

//var_dump(Core::getPHPVersion());

/*

  cur.moveToFirst();
  while (cur.isAfterLast() == false) {
      view.append("n" + cur.getString(1));
      cur.moveToNext();
  }
  cur.close();


  foreach ($q->fetchObject() as $k => $r) {
    var_dump('k: '.$k.', r: '.$r);
  }

  foreach ($q->fetch(PDO::FETCH_ASSOC) as $r) {
    var_dump($r);
  }

  while ($r = $q->fetch(PDO::FETCH_ASSOC)) {
  //while ($r = $q->fetchObject()) {
    var_dump($r);
  }*/
//$cur = $db->rawQuery('select * from '.DatabaseHandler::TABLE_SUROVINY.' where '.DatabaseHandler::TABLE_SUROVINY_NAZEV.'=?', array('nazev 1'));
  /*
  while ($cur->hasNext()) {
    $r = $cur->next();
    var_dump($r->getBool(0), $r->getInt(0), $r->getFloat(0), $r->getInt(0), $r->getString('nazev'), $r->getType(5));
  }
  */

  //var_dump($cur->getColumnNames());
  //var_dump($cur->getColumnName(1));
  //var_dump($cur->getColumnName(3));
  //var_dump($cur->getColumnIndex('_id'));
  //var_dump($cur->getColumnIndex('nazev'));
  //var_dump($cur->getColumnIndex('pokus'));
  //var_dump($cur->getColumnIndexOrThrow('nazev'));
  //var_dump($cur->getColumnIndexOrThrow('pokus'));
/*
var_dump('----------------------');

  var_dump($cur->getPosition());
  var_dump($cur->moveToNext());
  var_dump($cur->moveToNext());
  var_dump($cur->moveToNext());
  var_dump($cur->moveToNext());
  var_dump($cur->moveToNext());
  var_dump($cur->moveToNext());
  //var_dump($cur->move(3));

var_dump('----------------------');

  $cur->moveToFirst();
  var_dump($cur->getPosition());

  var_dump($cur->moveToPosition(-2));
  var_dump($cur->moveToPosition(2));
  var_dump($cur->moveToPosition(5));
  var_dump($cur->moveToPosition('a'));

var_dump('----------------------');

  $cur->moveToLast();
  var_dump($cur->getPosition());

  var_dump($cur->moveToPrevious());
  var_dump($cur->moveToPrevious());
  var_dump($cur->moveToPrevious());
  var_dump($cur->moveToPrevious());
  var_dump($cur->moveToPrevious());
  var_dump($cur->moveToPrevious());
*/7
 //insert
  $val = new ContentValues;
  $val->put(DatabaseHandler::TABLE_SUROVINY_NAZEV, 'nazev 1')
      ->put(DatabaseHandler::TABLE_SUROVINY_POPIS, 'popis nazvu 1');
  var_dump('insert: '.$db->insert(DatabaseHandler::TABLE_SUROVINY, $val));
//insertOrThrow
  $val = new ContentValues;
  $val->put(DatabaseHandler::TABLE_SUROVINY_NAZEV, 'nazev 2')
      ->put(DatabaseHandler::TABLE_SUROVINY_POPIS, 'popis nazvu 3');
  var_dump('insert: '.$db->insert(DatabaseHandler::TABLE_SUROVINY, $val));

  $val2 = new ContentValues;
  $val2->put(DatabaseHandler::TABLE_SUROVINY_NAZEV, 'nazev 2 uprava')
      ->put(DatabaseHandler::TABLE_SUROVINY_POPIS, 'popis nazvu 3 uprava');
  var_dump('update: '.$db->update(DatabaseHandler::TABLE_SUROVINY, $val2, DatabaseHandler::TABLE_SUROVINY_NAZEV.'=?', array('nazev 2')));

//var_dump($val->putAll($val2));
//var_dump(new ContentValues($val2));
//echo $val;
  //var_dump('delete: '.$db->delete(DatabaseHandler::TABLE_SUROVINY, DatabaseHandler::TABLE_SUROVINY_NAZEV.'=?', array('nazev 2')));
  //$cur = $db->query(DatabaseHandler::TABLE_SUROVINY, array(DatabaseHandler::ROWID, DatabaseHandler::TABLE_SUROVINY_NAZEV), DatabaseHandler::ROWID.'=?', array(8));
      //var_dump('f:', $cur->isFirst());
      //var_dump('l:', $cur->isLast());
      //var_dump($cur->isNull(2));
      //var_dump($cur->isAfterLast(), $cur->isBeforeFirst());
//rozlisovat parove i neparove elementy a atributy! (rozlisovat HTML4 a 5)
//uloziste na elemnty a vnorene elementy jsou reprezentzovany jako zastupne ID z teho statickeho uloziste

  //var_dump(LightHtml::span, LightHtml::span());

  //$a = LightHtml::span()->setText('pokus')->insert(LightHtml::a(array('class' => 'cosik', 'id' => 'neco'))->href('adresa', array('a' => 'b'))->setText('ahoj')->setText('vole'))->insert(LightHtml::img()->setText('kokos'));
  //echo $a;

  //$menuskel = function($row) { return LightHtml::a()->href('adresa', array('a' => 'b', 'c' => $row))->setText($row); };

  //var_dump(is_callable($menuskel));

  //var_dump((string)$menuskel(15));
  //$menuskel = function($row) { return '<a href="cosik">'.$row.'</a>'; };
  //var_dump($menuskel(5));
/*
  $r = null;
  foreach (range(0, 10) as $row) {
    $r[] = $menuskel($row);
  }
  $a = LightHtml::span()->insert($r);
  echo $a;
*/
//var_dump((string)$menuskel(15));
  //$menuskel = function($row) { return '<a href="cosik">'.$row.'</a>'; };
  //var_dump($menuskel(5));
/*
  $r = null;
  foreach (range(0, 10) as $row) {
    $r[] = $menuskel($row);
  }
  $a = LightHtml::span()->insert($r);
  echo $a;
*/
  class Aconfig {
    //
    private static $loadpages = array('page1');
  }

  //i externe v promenne!
/*
  class StaticWebBeta {
    //
  }
  $w = new StaticWebBeta();
*/
if (!empty($parameters[1])) {
                $conf['query'] = Core::isEmpty($parameters[1], null);
              }
              //$conf['query'] = Core::isFill($parameters, 1, null);
              //var_dump($conf);
              //$value = Core::getUrl('path');query
if (!empty($parameters[1])) {
                //->('image/png', 'blobdata')
                $value = sprintf('data:%s;base64,%s', $parameters[0], base64_encode($parameters[1]));
              } else {
                //->('cesta.png')
                if (file_exists($parameters[0])) {
                  $o = getimagesize($parameters[0]);
                  $mime = $o['mime'];
                  var_dump($r);
                  $blob = file_get_contents($parameters[0]);
                }
                var_dump(file_exists($parameters[0]), $parameters[0]);
              }
try {
      } catch (ExceptionLightHtml $e) {
        die($e->getMessage());
      }
//$uri = self::getRequestUri();
//$slice_uri = array_slice($explodeuri, 0, count($default));
/*
      foreach ($arraymenu as $url => $class) {
        if (!is_array($class)) {
          if (class_exists($class)) {
            $this->web->page[$url] = $class;
          } else {
            echo 'trida stranky '.$class.' nebyla nalezena';
          }
        } else {
          //ocivide se jedna o submenu
          var_dump($class);
        }
      }
*/
private function getCurrentUrl() {
      // doresit nacitani indexu routovaci metody!!

var_dump($this->web->uri);
// vratit tam hodnoty z route!!! dotvorit koncept nekolika urovnoveho menu!!!!
      if (!empty($this->web->route)) {
        //$this->web->currenturl = $this->web->route['action'];
      }
      //return Core::isEmpty($this->web->currenturl, $this->web->defaulturl);
    }
 //var_dump($this->web->uri);
      //$current = (!is_null($array) ? $array : $this->web->uri);
      //var_dump($current);
      //var_dump($this->web->page);

      //var_dump($this->web->page);

      //~ $it = new RecursiveIteratorIterator(new RecursiveArrayIterator($this->web->page));
      //~ while ($it->valid()) {
        //~ //var_dump($it->getDepth());
        //~ var_dump($it->key());
        //~ $it->next();
      //~ }

//var_dump($it->getDepth());
      //~ foreach ($it as $k => $v) {
        //~ //var_dump($v->getDepth());
        //~ var_dump($k, $v);
      //~ }


      //~ foreach ($current as $k => $v) {
        //~ //var_dump(array$v);
//~ //var_dump($v, array_keys($this->web->page, $v));
//~ var_dump($v);
//~
        //~ $val = Core::isNull($this->web->page, $v);
        //~ //var_dump($val);
        //~ if (!empty($val)) {
          //~ if (is_array($val)) {
            //~ //$r = self::getCurrentPage($val);
            //~ //pruchod do dlasi urovne
//~
            //~ //var_dump($r);
          //~ } else {
            //~ //konec na teto urovni
//~
            //~ //var_dump($v);
          //~ }
        //~ }
      //~ }
 $it = new RecursiveArrayIterator($this->web->page);

// kurva!
while ($it->valid()) {
  //var_dump($it->key() == );

  $it->next();
}
//~ $poc = 0;
      //~ foreach ($this->web->uri as $k => $v) {
        //~ $val = Core::isNull($this->web->page, $v);
        //~ if (is_array($val)) {
          //~ self::getCurrentPage($val, $poc);
        //~ } else {
          //~ var_dump($val);
        //~ }
        //~ //var_dump($poc, $val);
        //~ $poc++;
      //~ }

      //~ foreach ($this->web->uri as $k => $v) {
        //~ //var_dump($v);
        //~ $val = Core::isNull($this->web->page, $v);
//~
        //~ //var_dump($k, $val);
        //~ if (is_array($val)) {
          //~ var_dump($val);
        //~ }
//~
        //~ if (!empty($val)) {
          //~ //var_dump(self::getCurrentPage($val, $v));
        //~ }
      //~ }
$val = $p[$i];
//var_dump('v:',$val);
//var_dump($val);
//var_dump($this->web->page);
//var_dump($this->web->uri);
//var_dump($this->web->url);
//var_dump($array, $val);
      //$vv = array_values($this->web->uri);
      //var_dump(Core::isFill($array, $index));
      //var_dump($array[$vv[$poc+1]]);
//      var_dump($pole, $index);
 //$i = $this->web->url[$index];
      //var_dump($i);
      //$val = Core::isFill($polepage, $i);
//$array, $poc
 else {
        $result = $value;
      }
if (is_null($result)) {
        ////$this->web->defaulturl[$index]
        //var_dump($this->web->defaulturl, $index);
        //$i = Core::isFill($this->web->defaulturl, $index);
        //$result = Core::isFill(!is_null($array) ? $array : $this->web->page, $i, null);
        //var_dump($result);
      }
var_dump(strlen($_SERVER['REQUEST_URI']), strlen(dirname($_SERVER['REQUEST_URI'])), substr($_SERVER['REQUEST_URI'], strlen(dirname($_SERVER['SCRIPT_NAME'])) + 1));
var_dump(implode('', array_diff($a, $b)));
//var_dump($_SERVER['REQUEST_URI'], dirname($_SERVER['SCRIPT_NAME']));
      //$this->route->request = substr($_SERVER['REQUEST_URI'], strlen(dirname($_SERVER['SCRIPT_NAME'])) + 1);
      //var_dump($_SERVER['SCRIPT_NAME'], is_file($_SERVER['SCRIPT_FILENAME']), dirname($_SERVER['SCRIPT_FILENAME']));
      //~ $a = str_split($_SERVER['REQUEST_URI']);
      //~ $b = str_split($_SERVER['SCRIPT_NAME']);
      //~ var_dump(array_diff($a, $b));
      //~ $this->route->request = implode('', array_diff($a, $b));
      //~ var_dump($this->route->request);
// bacha bere v uvahu jen 0 index!
          $model = explode('/', $this->route->model[0]);
          $default = explode('/', $this->route->defaulturi);
          //vezme jen tolik kolik je v defaultu
          $slice_model = array_slice($model, 0, count($default));
          //vytvoreni pole
          $result = array_combine($slice_model, $default);
//$this->web->route = new Route->getUri($routemodel);
var_dump($this->web->uri);
      //$this->web->url = array();
      //$this->web->url = $route->getRequestUrl();
// dodelat!!! predelat!
      //$this->web->currenturl = null;
//$this->web->defaulturl = $url;  ??
      // projit klicema z uri pole page!
// resp to skladat do jednorozmenryho pole a z toho pak rychle vybirat!! takto<<<<<

//var_dump('------------------');
//var_dump($this->web->uri);
    //getMenu() - do callback funkci predavat minimalne 2 rozmerne pole!
//var_dump($array, $this->web->url[$index - 1]);
      //var_dump('def: '.$this->web->defaulturl[$index].', index: '.$index);
///$page = self::getCurrentPage();
      //var_dump($page::getName());
//      var_dump(self::getCurrentData('name'));
      //return Core::isNull($this->web->page, self::getCurrentUrl());
//var_dump($this->web->defaulturl);
//var_dump($this->web->page);
//var_dump($this->web->uri);
//var_dump($this->web->url);
      //var_dump(self::getCurrentPage());
//getUserValue
// tady to zoracovani to rozjede na jednorozmermne pole, kvuli rychlosti pristupu
//ulozeni stranek pro menu
// vylepsit metody na adresu!
//echo '<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN0AAAA7CAIAAABwuxjSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAIPlJREFUeNrsXQd8VFXWf3VqOiG
FFEMaHUKvBpEi4CoQ2roIimvfVVAUhAWVFRECggq666ILyqrLKljwQxAQkJ6EJJCQkJAG6T2ZyWTaK9957yaPl8mUJCC67FzeL7+ZO/fdd8v/nvM/5577oAYMHIq5kzv9xhLhHgJ3+g0mCsN49yi4028Ol7wblu7k1u
Pu5E5uXLqTG5fu5E5uu8edOp74tjYEjuNuu8edfhOglKDZZVDeZnBT7pn7X4AmQtVNgvLmwe3ml+7URrYpFIq//W3be+9tIQhCgmkXwD1kyOBxY8e4+aU73RpOSZJEbEyMTteIYxzCGI4TTlRze+DCjz17Ruz85z9om
p5+/4PXrxeLleAd0e9d4ABuPX6HE0opk+VYgBQAlGGtgA0bqWmDMJuf0Ifq6pqLFy95enrU1dZwLIuJ+U4qcVRbR0iF2+6583BpF1U3QMAwHEVRYjE5VjAnwhIlg6F54aLHSAJrNhpoWkWSzipxIHTxDuLNLS/vTBOH
JMn4+HGjRo6AD0nJKWfPnuNYTo4PjuOCAgOnTpvSMyLCaDKdPHnq3LkkyGzV++Q994wfM3oklASV/f3//VBbWwu/Dh4c56HVXrx0qb6+AVUSGBgwbdp94eHhep3uhx9+LK+oGDt2dGbG5eKSEqhn1KiRFEWeOnVm4ID
+kydP1Gg0GZmXDx06bDKZXHDivv0GuafzDtPgoK83b9owZcpkmH6dTufj45OcnBIVFanX6+fOnW80mUHUjRkzeuuWTVA+NTUtMjIyLCz0X//6/K0NiQjZ6954ffbshMuXs0wm46BBg5avWAlgAhTu2/uf2NiYu+MnND
bq4OvIkSPe2brZ29u7oUGAKVR75MjRWbNmPPf80qNHj0E9n3/2aWBQ0L69+55++kmj0Qjml1KpPHb8xJIlL7AshxiqW17+r6QVy18CUO77+uvt295vbGwMCgrasGE9/G1oaGRZgWX6+PhueTsx/eLF1atfLS0tIQly+
fLlf/zj4r179+ZezR87ZjSActeuT7Zs2Woym3sEBwO4jcZmlUoNtwO8OI4BNHXr1m3rls0qleq555cknU8CkD344O/WrFmDlkhzs0Gj0QJeQcTOnz/3kUcey8/PAwQnJm6ccM/44cOHnT17Hq0iu9AkEEXo7MVxvJOr
a3W6r5u8RGsGCwoKnjHjwcrKysSNm4qLi3X6puzs3GXLVgCkCAKHvyDXFj+6yMvLa9t723NzcrQaTwyndu76FH564ok/Qi2AP6TrAYJQuKS0olHXRJK0UL+YT+AERdGzZs7w9fXZvv2D7/d/r9Pp6+obP/v8ywMHDsK
9arVKRBvOMCx8Xbdu/enTpxsadXn5hW+++RbkzJr5IFhOTvrSaT9RR1xfN+nF/Y37XFy6VDrrXHT5iE41tl/f3h4e2k93f1pdXU1SNIgJpUpZXVMjfCVJUL4qmurbtw/DMJMnTwJtbrEyCppWqlRmszkmJoZlLOfOny
soLFy0aGGPHsF7/rM3KSnJamVEk4VDaBFNe2rUqBFWq/XHHw+BaoZKwJaCJl/Oypo+farYHeFCnQCRDBrcKpYxNDeDBvfw8ID6OE5ALQHLpV1nqa5ND/oMDfLz9VWpVaAIQFAajab6+nro3p2ETkeOD0d4uiX1O1FwL
pNWq4W/NTW1mGCX8CJcBNeMxWqFfFBmMGu+fr6QM378eDBKGDHB18LCory8qxRN6fVNCxcuXvL8n2fMeGDy5MkZmZkgbkH0tl03IFZVYKED0YQvgC0AvWDsi0+Rm/8IefBcQkwgQUV8Cx2E5qG2dR2X0vDBB+j52LFj
xo0dM3Lk8ICAAKnnoAhqa+uSkpJPnzlz8uRpICV3hqQEY3P4sKEwecIQk0RTk+HYseOsoIaEX6H7EydOUKvVPNc5jNIKOj39Yn5+AdQDlUyadC/MNKoEvp46fbqqqroLbTaKpm54WCgh6FsCTQ1UqFaprBYLfLeYzXq
dHrrz+ONPVFZVIr0MYgX+AW6gJGO1gPX92utrExM3LVu29KGHHlq65M8vL3+Fk3UQ5K6+qcnHxzs0tEddfQNwVvQgoAd2tQKy8SX8uVzPHfJfSrVA1fPnzXnqqScCAwPsDDRNh4T0AHMMLgDoRx/vBBMPTed/bRLGes
TwYW+88bqUVVpaevLkKZE5Cb+qVeo1q1eBEdCF2pevWJWXVwD1qNWa1X+BSvyknx5++NHKyi7gEgcjurm5efbs2R988CHwQtTI+Lvv7t69O2gzQB7Y49nZV8DyuPfeez/77AtBrAq8ESwNgCZmNVlB+wNWoS59U3Pip
q2zZiUMGjSQZRmCoJGzCWDQpDf+9NPxe8bHL1q06OXlq+ApgFpoP0y9bOjkHBGX8WARVKKrFXk024OQQAWcXK2sgg8M7L5r545XX/2LXVDaJGjiiuXLoHyQUJj/771ghXM8J++auNJYnhP0EfwKRiDIzq6h3kOrNhqb
hAe1UjcpKRQky1o5jpXGv4NXWVnZ3n1fe3p6btq0YcjgOF9f7wV/+P2aNSuh2UDyQHZAnTs++hgk4rJlLzz++GMwUyDsw8JC58xJAPkHxHH48KGgwZVKQCc2YsRwlUpZUFAAslajUTNiTymSsjKWvXv3ZWZefuCBBzZ
ueHPSpAnz5s7e+c8drfKydfRkIJRdNySeo4vqoKQMDQ35aMeHERF3dWrchw4d8vHH/5g77yFYwXeMF0ZQdiTFcs3AqW6SPQNKkE7E2hMsihJHv9McHW7auHEziLQ5sxPi4+NZMa1atTph9qzYmBh4oqHZCAzhz88tXb
H8pRUrXl669HmzxaLVaAWrJfMykMuxY0Y/88xTLy1bajZbQAalpaVv2JgIsLZaBRogtKfFrmeee27p008/mZAwc9asmWC8JyZuBh659vVXoSzGI4pM2LRfZBa4DQHtov/Sy9PzvXe3tgclPLhISNeqqiqBdEZFRUVHR
6OxllJkZM+/rFqxes1rd8yG5y3sCC7KW0c/dsEGQnIEzOS1a9ft2PFR/N3jQL1mZFwC5Z6eng4WjyjaBc2empq2+LHHe/eKiY2Nhcr1eh0w3fz8q/Dr1nfeO336TFhYiEqtrqurS0tNq6yshEUIVs7KlatB5up1OmTE
VFRWvr72r29v2XJXeFhVVVXu1bwXX1gKDaivbxStLu6tDYk7duwoLCwkW+OYysrKQU6ZTUaKBJPL6qhrVEcsyiVLnuvbt49NZkZG5vbt28HKMZlMgmrDcZqi+/TpvWLFihEjhslLJiTM2r//+zOiH/WOcR454e+gSb/
88iswdZG0cJRAPwJcUOCZPbC37N5gjuMhnO/6FBeXfvLpv8DoRRgqLLqOI9XZGkkEBlxScurZs+clcIBRLXptiPNJyefOn0cEEBOIJ/xEwU8FhYUgNSFP3BwX7CTAfUODrrHxMgj4fv36L1q0sLGxMS8/T9yC569fvw
5yiyKFYkj2m81mQA6wIJDovCx1Wl7GxQ1asOAhm0zA2auvvgaLjKIUYAFwwsByDGNOS7/08MOL/vSnp5cseV5e/pVXVsyePdcq+AgcLv1fN6Za/vQu+2hQgpl49933BFvYVUmKoglxem6mpzZNlUBMikkSt5JjC/0Kk
EJlbnAJ8V7pdripJRPsHZmLUalUQT76+vprawzNzfsFv7rO39//5ZdeDAwM3LLlneqqarDx2dY6GXHLsY2fEicgE+XYl5cuh2D+/Lk2OcnJKatXrzFbzDhBWUSPq1S7sPox7G9/3xE/Pn5wXJx0S69esRER4blXC9o3
Ao1Ct2AiJo726Y5TCpxlMF0dl3+RrSrmOjhlUIlKyY8cYRgSZ/T1ZWmKN1vwmhrqfIo2LV0NXMjlHA8Y0H/mzAd79uzp6+MD4r+iouLwkaMHDvzAslynWaNCodZoTCYL78ohgkYPhJRLx7u8qZqwCN+ho5Xdgwi1GrL
YZoOxuKgu5Yy1vla6Bd0FNs3d48axovsabgWrJyMz8+rVPHn94eHhQ4cObvGC4QRYAseOn2j5KuIG/o6Pv9vbxxsNBejxK1dysrKyxX0d9dy5sxc/ughVpdPp161bv2fPv0FYmi1WwQHV2nhbkMikQFdwGRwcfO+Ee+
Q5QFASNyWKdoywIHBZkp4E6+mbb76LGzRINCeRQ47u379/Tm4ezILNKPcaSg2fTPeIAs3Q5tHjZmBV17mUI9bMs4yTPSmEyDkJDQ9MbwwMsPVJzU1ouHhJvWxlCMPYl4KQ6evru2rlivvvn4akC0oDBw6YMmXy/Pnzl
ix50driK+4McWzFk0sVbHe3Qw5Kuc/Pq19c8P2ztZExOEG2KTfy7pDZCwo+3NKQlmTjY1+79lWglVLOzl2fJCa+LW/S4sWPPPT7edJXk8k8der9QBwlmQqm/bp1a0EcSmWefPIZUb1jLy57edPmt8NCewAQLRYLcEdI
IigZUUDyCNY2OyyOsNgJfgkGtbe3tzzn2LETly5lkEI7GLxtkqNtz54vxdgqRqFUAKqgcXq9XqC6ovRuIVhafNJDygFjKQcThgVFEL97XNlrKPnDLrNBZ7+dYaHWVcsr+/QyOTB4ea2WZ1lScOvYQzcM9/vvvwtLyO7
tw4YO2b7tnR8OHrJFM3aDFdkZQL7FwYaInZMVhcrwDghmm20zggyZ9fugqTMd4lup5g06nGM42cq/du06KLdx48beUFyxMUKIMHdDEvdrazkA642MDC8rL5MMr9jYGDkom5qasrOzWIbhxQKAxdLS0palKHQWN5ktCH
vtd2Q6vrBdyMvevWJtco4fPwaEEsdaKEv75S7xmMLCIpZlWlojsG1cnKSWwioNPvs5VXgv0mUTYwZT/iHEzteNZqNtxyLCLZvfKvP3ZxwTOD6/QMVzBMdb7ULktddWOwKlRK/vuqtz3jFQKQaDQUErccKFgnYpNqQC4
Q8/6T/uXsflCNbYzOob0ekIebVHfzomxyVorW5+fpVVNWg0PDw8gBHaVBYdHXPy5BlJJEdFRsp/vXDhQm1dLTxIdBXdCDoWliKH5GKLb8i5KrgpXPbv388mp7ikWNy2wmzEpF0NRRCK9uIBfZ32qLIjoESpewhx38Oq
/R+Z5GtOo+ZWrah0AkrhoRx2/KQn12rweXmyQHtMppY2zJo5Y8rkSTa3mEymgoICo9EYEBAQGhoKHfTz8+3UmPr7d5s8aSJYhKDRCNJOH0FvgIxJS7/oijWDWBNuD/7dXGeghKGmqKa8K5baakESCgKAJJQq1miAny6
mX5Ij1cvLC/pVUVmNciIje7bfJYmLiyPI3WjzGjFv+a+pqWkWkIg4KQFALhE7pay7rseBX8q/gpFfWSHsqPKtppZEHQinssFGmMfFK3oP70TICGPFhkwic9Po7GSzlLnwD3Wx0WZnfSP5iipF7lUVxrNoXTz7VHVWtv
rb770cmXRJScnr1r1ZVFQIE0xT9Ogxoze8td6GybTzyGDt5E30jh3/cN6jAwcOpl+8JMWH87wdliHENRC8Ojg0cMoDLsQqTdefO8aajAAMEF6auyJD5z1yJXENmNlXcnJAcQH+5CLzUkYmajzYee1rGzJkMHDK+nqQv
rhKpRoxYrh8W/znn08K4RcyPibHoksn2q2Rl56eHvKvjY2NOr2eb7cagF///e/v+3fr5mg3XKvVfPDBh19+tVfwTdDYsMl0ZxvKWLDJC+iCDMZsEqxLMLqnTNI7v0Wl5o594wVWOctZwOYdPrR52pSmXjHW/Qc8wWCL
jYmx0QZ5eXlLl75YWVkB7BlsTyNvOXjwcH5ewQ8/fE+SJHZLk8VitlrNBEE582eJ0xo8PYEUAyIdgpIkwRLXZ6ULKCdoUqEMm/eIZ9+BXj2jdfm5MCNAMeW4jB8f/+89/2nR0VEtOrqurq6kpGTgwIGIc8NU1tU1wOc
ePUA0BUn35uTkFBQWYIKmZm/Sm3ZTuLR5MHQS7QXbKHGYtuioSD8/P6coUTJWhqKp4AgyIKzT59ZZBuvWA4/sT2UlA63BJk3Qd/NjnboG+epqeu/XviYzrlZjfXqZV79SJbD4aFPf3sbMLM2oUSNstqY+/MeOiopyil
ZYW51fojv62ukzZ+PvHneLx50CZU6yMqljB5UECD/ca8AQF/uiClXlt1+YK0p5WoXzeOTTy7RRvQA6ARPua8jJJCjFwUM/yjVDZM8IpVJhNluhg8OHtbwtOi0tHRQ0wiW0LSwsLCf3qqjoI+WjlJSU0mwwSiTuF9zsd
UXhORu/g4JW2N2b4FxFeXl6eKL4h5i4Lh7egOdG9gfLWhBdA/qZnC4nsCu5Dz8KyM5Rh4aYfjdN98G7JT7eQoC0UsmNHd2kUKiBZtlQlPS0dIqmYelJ/l409N9++90tH3eXkwo2BE7R6h5htLePs/lTqgxXsyoP7MUp
hapHWL+/vuMt4phnGHVEDC0K2uys7Pr6eukWIM3d/f3h+T4+PjEx0SgzPz8/JSVFKjN69ChE1YYOGdzGdZ2SLOz+8JxL6+Jm160TEgBPbWhoAJku5QDT8vX1LSuvbF/U5e6GtOMUGkPY7w4u+IYAuw5bxGFgmPNCRBb
TvTvjZExomv/nJ4HHfvae+UD9o4uqoiIsYO601MHj/v4cyCov7zaRgjU1NcBS5KdOpUEvLCiyAT3W4tex39Dc3NyNGzcJYakOxoQkyOrqKmmD2OEqxHHat1vrI9vZ8hQlOGVKiop3bVMFh/rfN8tvZLzEUgE6iu5BKj
9/fUVZbV1damr6xIkTWjdslNHRUaVl5WDPAY+U9qjKy8stFotCoWg1fQSZFdEzQsbiGrIuXyaEZnO/9OswKOdIunr1KjAMKUetVgcEBmRlX5E7qES7xJqTk+sF5m5rxBd8AJbSvXt3RO01Gg0DDLHF3c+bjW3EMEFit
AKzmrGqa7zWG9d42YcmqHKGETgNwE482eRAhOBYdQ3p5WXZvqUgPMxsthANjbiMuYtbbDCtJAnTgAgxTFVpaRlY4igi0NZCN5uampqQwgWlZnPGFEYJjHcpYAoMhbKysuMnTggThztW0WKEt8wcxGwqESxrsTGCNSOP
oxOcHErWbDZcSiE1HpzZFDhrgUfvgZDPmJrbrB6eJ4VAYyCd+IXU1NGjR7b4MTSa8PBwqAZ0NIwAzBQsoaysbIvVeuXKldjYWFi03t5eKqVSpdL07hWLWgV3HTt2orSszGUo0O3gl5cuZYBIl8khGhp6/PjPNpvI+qa
mhxc+qlYpSFJwr0JXAQ6JmxKnT5sKPRc3rxRs626g2cyDmJBGT6HC9A1Yxkk2J5mLiiNGTiOFICnevkC1mtFsYU3NuMXqRF5y98Q3wAMbdLZEBQyY5mYcmZaguyW6zALq8RtnP6TdGoQEq9Uq+WWhRzbGM8wo6mbrJh
sGk2oyW53oIpbjWY6RrQFerEOqRNybxjGOsXLwOI6VnOdWXWPDmaMN504og0OD5z+mDAkXagNE2jwLJ3irhbeYUf6hQ4cXLVwAcEfGwJAhQ778ah+YBEJfeL6+vqG6utpkNJ09ez4iIkLcwOwWENDdw9Mb2I7BYEBTD
4qeY5H7CL8NuHQmkPPy85Fgl9TH9OnTd+761Cz49OX+KsGr2mw0oUzoORBnMciKQ7cjmo+ijOsr+dAoFL0iuGDTfmJTjzIVhXzvEeTdCbTIXhztO2PNOmE9WK18bS2l6Gtxys9IEJyKdna/SgmrSAHkHdQWyAB0Ggna
BmanUqEyGIztq/L18ZG28mghKQRnzI1x4xWQ1TpKYuwtWu28y+mToinEmhWySpSCeOY4a0MdoVAAWRTwTisazh2vOrC3+XqBKuSu0IXPkFovnrGIJrmtfAFuaqouZ3QNaI+6uPh6WVl579690EMHD47z9fGOio6EJ0L
fMzMzwR4nKTovLw9yYNZgZEJDw7RaDS02S1y3bEZGBia6CGXc8pfS5i7OUSQnX6ioqAwLC5V0Vt++fadNnfr1N9+1ihPkwpRLF6HJTz7xBJBRucAAvYVC5wsy2LjxStDdHIMd+Nhy+TTLsXy3UH7yIhVF4yyDYw58Mr
QKKy9kAbigzfMLlFMmNnfBQQbzlHVFC/KvqOiaFE0Dkw50xd/fr66+AZWSQvwhjR07RrJJ4YMQsdtapgUDFC0VQEdkWgvwzve+MdlZAqhYXgloec5qNVWUscZmSusBoCz/6pOqQ99wIAK9/ILnPArUEyQiTtv3uBEqt
fF6IWNsBsqAtk2TUy4gD7m4U+DXs2dE//790bkcmGVQ1kqVpqysQgxo55BrMyQkpHUp0kCaS0pLcQy/PXG0Luxx4FWHDx+hZAky1659LSgoQK7skEsFJfg8aeK98+bNgVmX34W3WgHFuYzZwINMOfCxNfMUGPwcT1r7
jab8g4WXjQHbtntBHeYmrOQqR5DCqB3+ycNgEBhapy61misqUl26pCEpPl3cCEHNEzibQjlhwgRkacrtZa1WO336NHlH2vsyQRnICxBtgypwB8nGlpKNFqpEDHxkWV3WJVLtUfndv8Hohq8WAuzucL9R8UDhcdA4ji9
9xgXxpD+HpENaWjqqHNoPCj0hYXZIjx6oGYWF+UI0GsMUFhUCQFEDwE4aJnqR0NeDBw81NjRyspC5XxOX0KUvvtij1+vlowlT9d23X89OmGV3wzchYebWrZvR4Tf5XbhobkNq1vPZKZa0Y2zWWVBPrJUxg2IccR8NBA
/DHV5KDZZ+jKkpAdwIuKytJX48KoT+d+pSqbhv9vvom0joWHFJSV5evryFzz77TEhID5vuPPvs0+HhYTYdsdtxG1baBc9RW8i20NnS77/SZ6VX//gdjxNmRhB9QdMTBKnpuJ8gLPWZaU1XMnhZYHJycnJ5eYVU/5Qpk
yRycv16MdoNB22OyoiuotGSfEWWhmg5cB30c/2y/BJ+LS4p3rTp7TfeWCvPBV68ceP6xY89cvz4iYL8giaDAZZhSGjI5EkTgVM7XgXoFBt++PNmb1+a4wkrK+zERMdRGk9nK4RSYDWlfNJhBtg8yyAThP/0M69hQ40R
4R0NQvPQcidOeh046ENRjNnCwQR+t3//shdfuFHAw2P3p7t27Pg45UIqKAqA4/z582bOeBBzshuDOeFYfGfoF2+PchAAQ2Pptdxt6/EmnUUIRsXVAYHevfs7wzdFgblT9p+dYKpbWenMmrBXl5ySMuPBBySTH30oKSk
pLi5Bbj4QmQUFBbGxMchHIdVZVVV15Uo2QRJgq2G3Jbk8pys09/Mv9gwaNGjOnASb33r36gWXozuzs7OBMkdFRbWtTSAoFhNWW2nlOQKZvyFRlHNQWs3Yt3+z6Kp5lreKBqGwXmvryA2buiWur+rmC0LXxfLVarjcPN
XmrUFGEyx6K+r155/9G+YpOjpaKgbW6JtvvgHTA4aqWq12IhVQDU5enCe9mMWlmLQb5YbOYqJ8c6Pg6IJ+gxbShPUklConG+Wgua/teNt47SqDCe8skLfw/LkkCZdSKikpFSxuHkelTp0+M3XqfTZlLl++XFtXh3qE3
RaK2aH9QJByK1et3rvv644fSDUYml9ZufL8+SRHBUT3HIqkx3r2Ix3YKJhSjelrsT2bzCU5IF4ZK8PK+U3GZeXSlwKzc1QAOxATjnzsHlo2OU277JWw0jIFLAqmtRf1DQ1/fWN9+7BfYFRgkEpPSUtL+9VPwfNYS2SM
d//BDmaSINQaVt9Y9P6GhnM/cwSKGG/DBS+k2ulIamqa2WyWxg4FotukQ4d+tFqsHMvdDFHpLC47dCqZZZnly195/ImnjEbXJ26BoyxevPhCygWYeNm44e2PZsNflZb38MEBf2Buk5TgY4e/tFIglKDzU4+wu143Xcs
SQGkymeX3ottzrtJP/Cno3fcDDAZSq2W1Wk6l5BQKHqgkfNaouapqev3mHi+8FF5RQWO4CQShdC9cp06d+tOfn3fyapDPPvv8zTfXt5rYcmolbwlhuyEkK9DBU+o2c03gWPuxEswyhZJQqoFBCpdSJVxqDVy8xVJzZH
/uX5c1XjjDUrSx7Vihv/n5ee1hdz7pvOi4bdH4FRUVYE7IC8C6TU9Px4V3uXC37dh+h7aqkRcdErDJsWPHL178yIIFf7AbpQFicvfuf+3evbuqqlKj9UhOTikrK62rq/fy8qypqRPOIrU7XGbQcTtW66IHqHsPp7uH4
mADWUx8dRl3PYu7ls1WlwpKDtS3xWSVm//yhlks/M7d2m+/9xw53Ny/nyk60qhS8w31ZE6eKidHnXFZDRqfIkHXW1Aoq3zRw+1Hjhy9Z8LEl5a9MHfuXHmMAii4bdu27du3r0+fPgUFhehMCDCT69ev8+KJfRSULnCy
wgK9XocsX+BtKH67w5v+vGgLs/kFBWgXG1ViBMIhvD+tzQkEYQfu75srDnzl13uAOiKK8vaFx5urK8wlRYb8HHNVOZS28rgF7m03VmgGv/zyK19fH7RlBawAlnpZaYncHVtZWXni55MDB/RHnl1gmVlZWeUVFXirHXZ
7TrTiPSNjOz6CEkkEnEVG9ezXty8QMvgMU1JVVQ0sJCcnp6S0lCSELVRGBIGHh5axWpGr2cqAzLNg9gL1cCG2lQQRQCsIUPEWIyYG6nO8sOXBcG0DTh23DVY1paChKoxhCXS4XjhKKrSFlfYY7Z7ygazAoIDoqKiAgO
6AkoqK8qKiotraOoFpEBTcLu5mkWgGhYj0ZpP87VlarZoiiRahxwsGBBTolMoTXymjVChpKW4DQGOxMja4bNm1wjFSCP8V9rDFkBloCqx5THwr1Q0o2w2I1GjUIIxhpaKmQl/gOeiFgFJArdQdXNy9gxE0Gs3cbXwRW
idwidlGevIt3h/QYrgYQ4+LrjsYHdY2OE8cpJZXf7cfMnnUsHgCD+0T8u1P7ro844vdOJZq/03jHTgl3LJJIOwocjzTulHZ1kOES2dVW7dkbQdWXqDDgrNNDXYPLrfvKebg2K6TBezkQfJxaGsP8LeNXGKd/X9SWsRB
m6HBGO6GMdTWvyV7/VdrPDbKt/kVv7ExLb4MiMXakzkZq7PfMPmAirFYjirhnXtqUEuFdzO2mkfSXfJYvrYd4W3WgKOeulz1DhYSb3cK8BZe2ImxQgPl5EHSSNor06nu/JJxG07opt2vbWSkTPvYzbe3KWeHvnRwgTp
6XAcrad8pJ49oL5lupuVOKnFUg6P/baQjT3T5oJup/NfEZXvN4hx2He/PLel5lyu5maff/pb/oq391V/Xc0v+/x68vcPZndzp9vFLd3Kn25Pc/2+pO7lx6U7u5MalO/0X80u3meJOv8H0/wIMAKqf0RPa9hTLAAAAAE
lFTkSuQmCC" />';
// routovaci metoda bude muset byt nejspise instantni!!!
//odebirat adresu!
          //var_dump('g:', array_slice($index['lasturl'], 0, -1));
          //$index['lasturl'] = array_slice($index['lasturl'], 0, -1);
                    //'poc' => $poc,
                    //'count' => $count,
//$poc = 0;
      //$count = count($source) - 1;
      //$datas['count']['global'] += count($source) - 1;
//var_dump($url.', lvl:'.$datas['level'].': L: '.$datas['poc']['local'].'/'.$datas['count']['local'].', G: '.$datas['poc']['global'].'/'.$datas['count']['global']);
//$datas['poc']['global']++;  //globalni pocitadlo
        //$datas['poc']['global']++;
//die('--zarazka--');
 /*
      var_dump($this->web->page);
      var_dump($this->web->uri);
// brat i v uvahu zanoreni v menu/submenu, resp pocet v submenu a menu?!
      $r = array();
      $poc = 0;
      $count = count($this->web->page) - 1;
      foreach ($this->web->page as $url => $class) {

        $n = $class::getName();
        $np = array('url' => $url,
                    'active' => ($curr == $url),
                    'poc' => $poc,
                    'count' => $count,
                    );
        $nc = array_merge($n, $np);
        //var_dump($nc);
        $r[] = $skeleton($nc);
        $poc++;

      }
    */      //$curr = self::getCurrentUrl();
//var_dump($this->web->route->getRequestUri());
/*
 * musi se brat ta nejhorsi varianta, tj kazda cast menu muze mit jiny callback
 * resp jiny tvar, to tak ze hlavni menu bude napriklad mit jeden tvar a submenu bude mit jiny tvar
 * a jeho submenu bude mit zase jiny tvar, tyto do sebe nesmi zasahovat musi byt v nich moznost urcovat
 * zanoreni a taky jejich pocitatelnost!
 *
 */
$datas['poc']['local']++; //lokalni pocitadlo
          //$datas['poc']['local']++; //lokalni pocitadlo
class NewHtml extends LightHtml {
    const VERSION = 1.02;

    private static $zan = NULL;
    private static $break = false;

    public static function enableBreakDepth() {
      self::$zan = 0;
      self::$break = true;
    }

    private function makeBreak() {
      return (self::$break ? PHP_EOL : '');
    }

    private function makeZan() {
      $zan = self::$zan;
      return (!is_null($zan) ? str_repeat(' ', $zan * 2) : '');
    }

    private function incZan() {
      if (!is_null(self::$zan)) {
        self::$zan++;
      }
    }

    private function decZan() {
      if (!is_null(self::$zan)) {
        self::$zan--;
      }
    }

    //hlavni renderovani elementu
    public function render($content = null) {
      $result = '';
var_dump(self::$break);
      //var_dump('render:', $this, self::$elements);

      $elem = (is_null($content) ? self::$elements[$this->elem->id] : $content);
      $name = $elem['name'];

//var_dump($elem);

      $pair = self::isPairTag($name);
//var_dump($pair);
      $attribute = null;
      $attributes = $elem['attributes'];
      if (!empty($attributes)) {

        //var_dump($attributes);

        $attr = array();
        foreach ($attributes as $key => $value) {
          $val = $value;

          //var_dump(self::isSpecialAttrubure($key)); // tady!

          switch (gettype($value)) {
            case 'array':
              //sluceni z pole
              switch ($key) {
                case 'class': //pri class
                  $val = implode(' ', $value);
                break;

                case 'style': //pri inline style
                  $implode = function($k, $v) { return sprintf('%s: %s', $k, $v); };
                  $val = implode('; ', array_map($implode, array_keys($value), $value));
                break;
              }
            break;
          }

          if (self::isSpecialAttrubure($key)) {

            if ($val) {
              $attr[] = (self::$xhtml ? sprintf(' %s="%s"', $key, $key) : ' '.$key);
            }

          } else {
            $attr[] = sprintf(' %s="%s"', $key, $val);
          }
        }
        $attribute = implode('', $attr);
      }

      $result .= sprintf('%s<%s%s%s>', self::makeZan(), $name, $attribute, ($pair ? '' : (self::$xhtml ? ' /' : '')));

      $contents = $elem['contents'];

      $emptypair = ($pair && empty($contents));


      if (!empty($contents)) {
        foreach ($contents as $contentid) {
          $element = Core::isNull(self::$elements, $contentid, $contentid);
          if (is_array($element)) {
            self::incZan();
            $result .= self::render($element);
            self::decZan();
          } else {
            $result .= $element;
          }
        }
      }

      if ($pair) {
        $result .= sprintf('%s</%s>', (!$emptypair ? self::makeZan() : ''), $name);
      }
      return $result;
    }
  }
          //$gpoc++;
var_dump(self::$menupoc);
//$datas['poc']['global']++;
//static $gpoc = 0; //globalni pocitadlo
//implements ISingleton
//classes\ISilngleton,
$result = null;
      $tests = self::$instance->tests;
      foreach ($tests as $values) {
        $result[] = sprintf('T EST  : %s ( %s ) => %s', $values[0], $values[1], ($values[2] ? 'true' : 'false'));
      }
//, array_keys(self::$instance->tests)
 //$print_test = function ($row) { return sprintf('T EST: %s ( %s ) => %s', $values[0], $values[1], ($values[2] ? 'true' : 'false')); };
      //return implode('<br />'.PHP_EOL, array_map($print_test, self::$instance->tests));
Debugger::test()->isInt('12', 'test na číslo');
Debugger::test()->isInt(12, 'test na číslo');
//Debugger::test('test 2')->isInt(12.1, 'test na číslo');
Debugger::test()->isInt(18, 'test na číslo');
//Debugger::test()->isInt();
echo Debugger::viewTests();
echo '<br />';4
//var_dump(Cache::getInstance()->getCachePathDir());
        //var_dump(Cache::getInstance()->getCachePathName(), $_SERVER['SCRIPT_FILENAME'], $_SERVER['REQUEST_URI']);
var_dump($this->cacheExpire, self::$instance->cacheExpire);
var_dump(sprintf('%s/%s', self::getCachePathDir(), $this->getCacheName()));
//return sprintf('%s/%s/%s', $this->getCachePath(), $this->cacheDir, $this->getCacheName());
//sprintf('%s/%s', $this->getCachePath(), $this->cacheDir);
//sprintf('%s/%s', $cachedir, $this->getCacheName());
//sprintf('%s/%s/%s', $this->getCachePath(), $this->cacheDir, $this->getCacheName());
//sprintf('%s/%s/%s', $this->getCachePath(), $this->cacheDir, $this->getCacheName());
//sprintf('%s/%s/%s', $this->getCachePath(), $this->cacheDir, $this->getCacheName());
//sprintf('%s/%s/%s', $this->getCachePath(), $this->cacheDir, $this->getCacheName());
        //sprintf('%s/%s', $this->getCachePath(), $this->cacheDir);
//sprintf('%s/%s/%s', $this->getCachePath(), $this->cacheDir, $this->getCacheName());
//sprintf('%s/%s/%s', $this->getCachePath(), $this->cacheDir, $this->getCacheName());
//sprintf('%s/%s', $this->getCachePath(), $this->cacheDir);
//sprintf('%s/%s/%s', $this->getCachePath(), $this->cacheDir, $this->getCacheName());
//sprintf('%s/%s', $this->getCachePath(), $this->cacheDir);
        //sprintf('%s/%s', $cachedir, $this->getCacheName());
//filemtime($cachepath//filemtime($cachepath)
// pokracovat !! plnou verzi Html od teto tridy oddedit?!
//$request = Core::isEmpty($sub);
      $request = ($sub ?: null);
      var_dump($request, $sub);
//($sub ?: null)
 * pracuje jako: Singleton
// vyhodit styl singletonu a udelat klasicky instancni tridu!!!!!!!!
private function __clone() {}
    private function __wakeup() {}
    /**
     * hlavni metoda singletonu
     *
     * @param ob zapina output buffering
     * @return instance
     */
    public static function getInstance($ob = true) {
      if (is_null(self::$instance)) {
        self::$instance = new self;
        self::$instance->ob = $ob;
      }
      return self::$instance;
    }
    //private $cacheExpire = '1 day'; //vychozi cas expirace
    //private $cacheDir = '.cache'; //vychozi adresar cache
    //private $cacheEnable = false; //vychozi stav cache
    //private $ob = false;  //vychozi stav output buffer
    //private $exceptionUri = array();
    //private static $instance = null;
    /**
     * vrati stav cache
     *
     * @return boolean
     */
    public function getCache() {
      return $this->cache->enable;
    }
//::getInstance();
($remain->y == 0 ? _('the cache now stored') : _('in cache'))
        $remain = ;
var_dump($this->inCache());
    public function inCache() {
      $remain = $this->getRemainTime();
      var_dump($remain->invert == 0);
      return !($remain->y == 0 && $remain->m == 0 && $remain->d && $remain->h == 0 && $remain->i == 0 && $remain->s == 0);
    }
<br />
state: <strong>%s</strong>
// co se stane kdyz bude vic instanci cache v ranci jedne stranky??
// vyhazet medoty ziskavajici stejne cesty!! zbytecne zdrzeni!
// pozmenit konstruktor a pridat zapinani output bufferingu!
//budou se prepisovat jen urcene polozky?! a to jde jeste i vlastne pres podminky udelat!!
/*
  $skel = array(function($row) { return LightHtml::span(); },
                function($row) { return LightHtml::div(); },
                function($row) { return LightHtml::p(); },
                );

var_dump($skel);
*/
  //var_dump('menu: ', $w->getMenu($menuskel));
      //var_dump($row);
      ///var_dump($row['poc']['global']);
// vyzkouset pro dalsi uroven jinou variantu menu!!!!
      return
// prekryvaji se lokalni pocitadla?!!! problem?!!
//$datas['count']['local'] = count($source) - 1;
//$datas['poc']['local']++; //lokalni pocitadlo
//      }
/*
      switch ($row['level']) {
        case 0:
        case 1:
        case 2:
        var_dump(Core::isNull($row['poc']['local'], 1));

        break;

        case 1:
        //$row['poc']['local'].'/'.$row['count']['local']
          $result = LightHtml::a()->hrefrewrite('', array('action' => $row['url']))
                      ->id(Core::isFill($row, 'idsekce'))
                      ->title('%s - %s', array(Core::isFill($row, 'name'), Core::isFill($row, 'addition')))
                      ->class($row['active'] ? 'aktivni' : null)
                      ->setText(Core::isFill($row, 'name'))
                      ->setHtml(LightHtml::br)
                      ;
        break;

        case 2:
        //$row['poc']['local'].'/'.$row['count']['local']
          $result = LightHtml::a()->hrefrewrite('', array('action' => $row['url']))
                        ->id(Core::isFill($row, 'idsekce'))
                        ->title('%s - %s', array(Core::isFill($row, 'name'), Core::isFill($row, 'addition')))
                        ->class($row['active'] ? 'aktivni' : null)
                        ->setText(Core::isFill($row, 'name').' (L:'.$row['poc']['local'].'/'.$row['count']['local'].', G:'.$row['poc']['global'].'/'.$row['count']['global'].')'.($row['poc']['global'] == 0 ? ' - prvni' : '').($row['poc']['global'] == $row['count']['global'] ? ' - posledni' : ''))
                        ->setHtml(LightHtml::br)
                        ;

        break;

      }
      return $result;
    };
*/
// && $countpair > 1  && !$last == 'text'
//var_dump(self::isText($contents, 0));
// nezalamovat text! zalomim si ho vzdy raci sam!
/*
      $count_text = 0;
      $count_elem = 0;
      if (self::isZan()) {
        //filtrovani textu
        $filter_text = function($text) {
          $c = __CLASS__;
          return (!empty($text) && !preg_match('/'.$c::PREFIX.'/', $text));
        };
        //pocet textovych polozek
        $count_text = count(array_filter($contents, $filter_text));

        //filtrovani html
        $filter_text = function($text) {
          $c = __CLASS__;
          return (!empty($text) && preg_match('/'.$c::PREFIX.'/', $text));
        };
        //pocet netextovych polozek
        $count_elem = count(array_filter($contents, $filter_text));
      }
*/
//var_dump($contents);
      // doresit drobnosti v zalamovani!&& $count_text < 1
      //$result .= (!$emptypair ? $this->makeBreak() : '');
//$countpair = count($contents);  //pocet vsech polozek uvnitr
$c = __CLASS__;
        if ($html instanceof $c) {
          $html = $html->render();
        }
//var_dump(self::isSpecialAttrubure($key)); // tady poresit specialni atributy!
//$this->web->page = $arraymenu;
//$result = array_merge($result, $r);
/*???????
    //destruktor na uklid
    public function __destruct() {
      unset($this->elem);
      self::$elements = null;
      self::setXHTML(true);
    }
*/
    //Debugger::startTime('kesovani');
    $c = ;
    //Debugger::stopTime('kesovani');

    //if ($cach->isCached()) {
// udelat metodu insertTo resp insertOn
    //vkladani elementu,  mela by byt i metoda ktera bude insertovat na urcite misto?
    //insert( integer $index, Nette\Utils\Html $child, boolean $replace = FALSE)
// asi fakt prehodit do add!!
    /**
     * vlozeni elementu do obsahu
     *
     * @param content element nebo pole elementu
     * @return this
     */
    public function insert($content) {
      $this->add($content);
      return $this;
    }
//add
        //LightHtml::setBreakDepth(true);
        $e = LightHtml::strong()->add(array(LightHtml::span(), LightHtml::em()));
        $this->assertEquals('<strong><span></span><em></em></strong>', $e);
        //LightHtml::setBreakDepth(false);
//var_dump(self::$elements[$this->elem->id]['contents']);
      //var_dump(self::$elements[$this->elem->id]['contents']);
//array_splice(self::$elements[$this->elem->id]['contents'], intval($index), $replace ? 1 : 0, $content->getId());
//array_splice(self::$elements[$this->elem->id]['contents'], intval($index), $replace ? 1 : 0, array_map($get_id, $content));
        //var_dump(array_map($get_id, $content));
$offset = ;$replace ? 1 : 0
var_dump(count($content));
/*
NewHtml::enableBreakDepth();
$n = NewHtml::span()->setText('ahoj svete?');
  var_dump($n, NewHtml::em()->insert($n)->render());
*/
/*
    Debugger::startTime('kesovani');
    $cach->isCached();
    Debugger::stopTime('kesovani');
*/
/*
    $cach = Cache::getInstance();
    $cach->setCache(false)->setCacheExpire('1 hour');

    //var_dump($cach->getCacheInfo());

    if ($cach->isCached()) {
      echo $cach->getOutBuff();
    } else {
      $cach->initOutBuff();
*/
//echo Debugger::viewTimes();

//echo '<hr />';

//echo $cach->getCacheInfo();

//exit;
//var_dump(PHP_EOL.PHP_EOL.PHP_EOL.'--------------------------'.PHP_EOL.PHP_EOL.PHP_EOL);
 * phpunit --bootstrap ../classes/lighthtml.php LightHtmlTest
 * phpunit --bootstrap ../classes/lighthtml.php --verbose LightHtmlTest
 * phpunit --bootstrap ../classes/lighthtml.php --colors LightHtmlTest
var_dump($data['uri'][$key], $explodemodel[1]);
 default:
          throw new ExceptionLightStaticWeb('neexistuje metoda: '.$select);
        break;
// zacit preimplementovavat!!! a tvrde testovat i s LightHtml!
// uz preimplemntovat zvlast do souboru!!!!
//var_dump(page1::getName());
//namespace LightStaticWebTest;
//namespace pages;
var_dump($this->object->getTitle());
//vygenerovani uri pole
//vygenerovani klicu uri pole
//nycteni defaultni url
//nacteni uri pole
      $this->web->uri = $route->getUri($routemodel);
      //separace klicu uri pole
      $this->web->url = array_values($this->web->uri);
      //nacteni defaultni url
      $this->web->defaulturl = $route->getDefaultUrl();
//$this->web->uri = $this->web->route->getUri();
      //$this->web->url = array_values($this->web->uri);
var_dump($sw->getCurrentClass());
//var_dump($this->object->getCurrentClass());
        //$sw->setDefaultUri('');
        //var_dump($sw->getRequestUri(), $sw->getCurrentClass());
///LightHtml::a()->hrefrewrite('', array('action' => $row['url']));
// pridat moznost ze obsal bude implicitne definovay
//a pokud se explicitne definuje tak prepise ten implicitni???!
//var_dump($_SERVER['REMOTE_ADDR'], php_uname('n'), Core::getUrl());
//var_dump($_SERVER['SERVER_NAME'], 'name is:'.php_uname('n'));
//var_dump($_SERVER['REMOTE_ADDR']);  // doplnit IP!
//var_dump($hash);md5($_SERVER['REQUEST_URI']).':'.md5($_SERVER['SERVER_ADDR'])
var_dump($_SERVER['SERVER_ADDR']);
var_dump(sprintf('%s:%s', $_SERVER['REQUEST_URI'], $_SERVER['SERVER_ADDR']));
// session rozdelit jako jedinou tridu zvlast!, zbytek kolem autorizace a
//opravneni uzivatelu zustane v jednom souboru kvuli celistvosti!!
T EST[0]=
T EST[1]=
T EST[2]=
T EST[3]=
T EST[4]=
T EST[5]=
T EST[6]=
T EST[7]=
T EST[8]=
T EST[9]=
//(!is_null($pageVariable) ? &$pageVariable : null);
var_dump($this->items->page, $this->getPageCount());
//var_dump($this->getPageIndex());  // opravit!
// + $this->getPageIndex();
    /**
     * vypocet page indexu
     *
     * @return index
     */
    private function getPageIndex() {
      // vykopat tady tu metodu uplne do pryc!!!!
      $index = max(0, $this->items->page - $this->items->base);
      //var_dump(max(0, $this->getPageCount() - 1));
      return min($index, max(0, $this->getPageCount() - 1));
    }
// array callback na vykreslovani!!! musi re predavat promena z routovani na strankovani!
//aby se dalo pri vykreslovani navazat na aktualni  oznacenou stranku!
//pac jinak tato trida dela jinak jen aritmetiku k strankovani!
    /**
     * vrati absolutni index prvni polozky stranky pospatku
     *
     * @return index stranky
     */
    public function getCountdownOffset() {
    }
 /**
   * Autoload classes
   *
   * @param name string
   */
  function __autoload($name) {
    try {
      $file = str_replace('\\', '/', strtolower($name));
      $cesta = sprintf('%s/%s.php', __DIR__, $file);
      //overeni existence cesty
      if (file_exists($cesta)) {
        @require $cesta; //faster, fail => critical, @mute fail
      } else {
        throw new ExceptionAutoload(sprintf('Class "%s" does not exist!', $cesta));
      }

    } catch (Exception $e) {
      echo $e->getMessage();
    }
  }
var_dump(spl_autoload_functions());
  /**
   *
   * instancne staticka trida pro pracai s datumem a casem
   *
   */
    /**
     * testy na DateAndTime
     */
    public function testDateAndTime() {
        $d = new DateAndTime('now');
        $this->assertEquals(date('Y-m-d H:i:s'), $d);
        $this->assertEquals(date('Y-m-d H:i:s', strtotime('+5 day')), DateAndTime::from('+5 day'));
        $this->assertEquals(date('Y-m-d H:i:s', strtotime('+2 day')), $d->modilyClone('+2 day'));
    }
//if (!array_key_exists('obal', $skeleton)) {
//if (!array_key_exists('menu', $skeleton)) {
//setHeader('Authorization','Basic YWRtaW46YWRtaW4xMg==');
        var_dump(xdebug_get_headers());
        //  string(41) "Authorization: Basic YWRtaW46YWRtaW4xMg=="
//  namespace pages;
  class page1 {
    //nazev a ruzne promenne
    public static function getName() {
      return array('name' => _('Stránka 1'),
                  'addition' => _('co děláme'),
                  'idsekce' => 'hlavni');
    }

    //extra JS pro danou stranku
    public static function getJS() {}

    //extra CSS pro danou stranku
    public static function getCSS() {}

    //obsah
    public static function getContent() {
      $result = 'a tady je html stranka 11...';
      return $result;
    }
  }

  class page2 {
    //nazev a ruzne promenne
    public static function getName() {
      return array('name' => _('Stránka 2'),
                  'addition' => _('co děláme 2'),
                  'idsekce' => 'hlavni2');
    }

    //extra JS pro danou stranku
    public static function getJS() {}

    //extra CSS pro danou stranku
    public static function getCSS() {}

    //obsah
    public static function getContent() {
      $result = 'a tady je html stranka 22...';
      return $result;
    }
  }

  class page3 {
    //nazev a ruzne promenne
    public static function getName() {
      return array('name' => _('Stránka 3'),
                  'addition' => _('co děláme 3'),
                  'idsekce' => 'hlavni3');
    }

    //extra JS pro danou stranku
    public static function getJS() {}

    //extra CSS pro danou stranku
    public static function getCSS() {}

    //obsah
    public static function getContent() {
      $result = 'a tady je html stranka 33...';
      return $result;
    }
  }

  class page41 {
    public static function getName() {
      return array('name' => _('Stránka 41'),
                  'addition' => _('co děláme 41'),
                  'idsekce' => 'hlavni41');
    }

  }
  class page42 {
    public static function getName() {
      return array('name' => _('Stránka 42'),
                  'addition' => _('co děláme 42'),
                  'idsekce' => 'hlavni42');
    }

  }
  class page43 {
    public static function getName() {
      return array('name' => _('Stránka 43'),
                  'addition' => _('co děláme 43'),
                  'idsekce' => 'hlavni43');
    }

  }
  class page51 {
    public static function getName() {
      return array('name' => _('Stránka 51'),
                  'addition' => _('co děláme 51'),
                  'idsekce' => 'hlavni51');
    }

  }
  class page52 {
    public static function getName() {
      return array('name' => _('Stránka 52'),
                  'addition' => _('co děláme 52'),
                  'idsekce' => 'hlavni52');
    }

  }
*/
  // dopsat obsah!

      echo $page;

      //$cach->setOutBuff();
    //}

    //echo 'cache: '.intval($cach->isCached()).', '.Debugger::viewTime();

  echo Debugger::viewTimes();
echo $cach->getCacheInfo();
*
echo '<hr />';

echo $cach->getCacheInfo();
*/
  //} else {
  //  echo 'php neni v pořádku';
  //}
      //$w = new LightStaticWeb(array('action/subakce/subsub/busbus'), 'a');
      //$w = new LightStaticWeb(array('action/subakce/subsub/busbus'), 'c/');
//var_dump(method_exists(new pages\Suroviny, 'getName'));
//var_dump(method_exists('pages\Suroviny', 'getContent'));
//var_dump($_SERVER['SERVER_PROTOCOL']);
//echo date('U', strtotime('+2 day'));
//->add(array(LightHtml::p(), LightHtml::p(), LightHtml::p()))
/*
      //echo PHP_EOL;
      LightHtml::setBreakDepth(true);
      LightHtml::setXHTML(false);
      echo LightHtml::em()->add(LightHtml::span()->add(array(
                                                              LightHtml::img()->src(''),
                                                              //LightHtml::b()
                                                            )
                                                      )
                                );
*/
//O dodelat nastrel metod dle puvodni verze ale lip, pripadne s moznosti
    //vybrat nebo vlozit html generator tridu jako parametzr konstruktoru???!
public function addMeta($name, $content) {}
//$this->page->head;
      //$head[] = $meta;
      //$head[] = $htmlClass::title()->setText($this->page->title);
/*
      //$page = new HtmlPage(HtmlPage::DOCTYPE_STRICT);
      $page = new HtmlPage(HtmlPage::DOCTYPE_HTML5);
      $page->setLanguage(Config::LANG)
          ->setUrlPage($weburl)
          ->addMeta('author', 'GoodFlow design - Tvorba webových stránek a systémů (www.gfdesign.cz)')
          ->addMeta('copyright', 'Created by GoodFlow design')
          ->addMeta('description', 'GoodFlow cook')
          ->setTitle('titulek')
        ;
*/
//'a' => 'page2',
                        //'b' => 'page3',
                        //'c' => array('' => 'page41',
                        //            'ca' => 'page42',
                        //            'cb' => array('' => 'page51',
                        //                          'cba' => 'page52',
                        //                          ),
                        //            'cd' => 'page43',
                        //            ),
                        //'d' => 'page3',
//var_dump($cach->isCached());
   * prekopat static web
   * otestovat nad staticwebem cache kontrol!!
* domyslet system sablonovani (resp tridy menu) na Html a zvazit znovu otevreni projektu
   * LightHTML - resp udelat moznost zmenit generovaci knihovku HTML/LightHTML
$filter = function($val) { return (!is_null($val)); };
        var_dump();
$attributes
$this->page->meta[] = 'utf-8';
//(!$this->isHtml5() ? 'text/css' : null),
//<!-- xxx -->
      // toto bude umet jen html page generator!
      //<!--[if lte IE 7]> xxx <![endif]-->
      //<!--[if !(IE 8)]>
      //<!--[if IE 8]>
      //<!--[if (IE 6)|(IE 8)]>
      //<!--[if (IE 6)&(IE 8)]>
      //<!--[if lte IE 6]>
      //<!--[if IE]> xxx <![endif]-->
//var_dump($data['last'] ? $data['last'] === $if : null, '...');
        // opravit slucovani vice css pri generovani!!!!!!
/*
        if ($if) {
          if ($data['last'] && $data['last'] === $if) {
            $data['up']->add($link);
            $data['out'][] = $data['up'];
          } else {
            $data['up'] = $data['class']::noteif($if)->add($link);

          }
        } else {
          $data['out'][] = $link;
        }
*/
//$data['out'][] = ($if ? $data['class']::noteif($if)->add($link) : $link);
// doaplikovat podminky nad JS
//~ use stdClass,
    //~ Exceptio  n;
/**
 * phpunit-skelgen --test -- "classes\LightHtmlPage" lighthtmlpage.php
 * mv -v LightHtmlPageTest.php ../test/
 * phpunit --bootstrap ../classes/lighthtmlpage.php LightHtmlPageTest
 */
//$data['out'][] = $script;
  /**
     * overovani jestli je zanorovani zapnute
     * alias pro: getBreakDepth
     *
     * @return true pokud je zapnute
     */
    private function isZan() {
      //return !is_null(self::$zan);
      return self::getBreakDepth();
    }
/**
     * pomocna rekurzivni metoda pro getArrayClass
     *
     * @param array
     * @param index
     * @param res
     * @return pole aktivni cesty
     */
    private function _getArrayClass($array = null, $index = 0, &$res) {
      $i = Core::isFill($this->web->url, $index);
      //nacteni zdroje z page nebo z parametru
      $source = (!is_null($array) ? $array : $this->web->page);
      //vyhodnocovani nekorektni adresy
      if (!array_key_exists($i, $source)) {
        $i = Core::isFill($this->web->defaulturl, $index);
      }
      $result = Core::isFill($source, $i, null);

      if (!is_array($result)) {
        $red[] = $result;
      } else {
        $res[] = $result[''];
      }

      //rekurzivni prochazeni stranek
      if ((count($this->web->url) - 1) != $index && is_array($result)) {
        $result = $this->_getArrayClass($result, $index + 1, $res);
      }
      return $result;
    }
 if (!is_array($result)) {
        //var_dump($result);
        //$this->web->pageArray[] = $result;
      } else {
        //$this->web->pageArray[] = $result[''];
      }
 private function __getCurrentPage($array = null, $index = 0) {
      if (empty($this->web->page)) {
        throw new ExceptionLightStaticWeb('doposud neni nactene menu! je nutne mit nastavenou metodu: ->setLoadMenu(array)');
      }
      $i = Core::isFill($this->web->url, $index);
      //nacteni zdroje z page nebo z parametru
      $source = (!is_null($array) ? $array : $this->web->page);
      //vyhodnocovani nekorektni adresy
      if (!array_key_exists($i, $source)) {
        $i = Core::isFill($this->web->defaulturl, $index);
      }
      $result = Core::isFill($source, $i, null);

      if (!is_array($result)) {
        //var_dump($result);
        //$this->web->pageArray[] = $result;
      } else {
        //$this->web->pageArray[] = $result[''];
      }

      //var_dump($i.':'.$index, $result);

      //rekurzivni prochazeni stranek
      if (is_array($result)) {
        //var_dump($result);
        //var_dump($result['']);
        $this->web->pageArray[] = $result[''];
        $result = $this->__getCurrentPage($result, $index + 1);
      } else {
        //var_dump($result['']);
        $this->web->pageArray[] = $result;
      }
      return $result;
    }
//$this->web->pageArray = $res;  sd
// predelat tridu Form na novy system!!!!!!!!!
        //echo LightHtml::noteif('IE=6')->add(LightHtml::nav()->id('menu'));
        //echo LightHtml::div()->add(LightHtml::div()->add($w->getMenu($menuskel)));
        //var_dump('content: '.$w->getContent());
//echo ('title: '.Core::implodeTitle(array('web', $w->getTitle()))).'<br />'.PHP_EOL.PHP_EOL;
        //$m = $w->getMenu($menuskel);
//var_dump($_SERVER['SERVER_ADDR']);
      //echo $cach->getCacheInfo();
//classes\Html,
      //classes\HtmlPage,
//var_dump($row['poc']['local'][$row['level']], $row['count']['local'][$row['level']]);
            //if (Core::isNull($row['poc']['local'], 1) === 0 || Core::isNull($row['poc']['local'], 1) === $row['count']['local'][$row['level']]) {
      // mno toto je pekny masakr!
/*
      $this->form->configure = array('form_class' => null,
                                    'form_id' => null,
                                    'onreset' => null,
                                    'onsubmit' => null,
                                    //nastaveni pro instanci
                                    'htmlClass' => 'classes\LightHtml',
                                    );
                                    */
$this->form->configure = new stdClass;
      $this->form->configure->onreset = null;
      $this->form->configure->onsubmit = null;
// umoznit vkladani jednoho radku textu do body (metoda setBodyText, setBodyHtml)
      var_dump($this->page->configure->bodyContent);
//self::$elements[$this->elem->id]['attributes'][$name] = $value;
 $a = $html::nav()->id('menu')->add($html::span());
        $a->class = 'cas';
        $a->checked = false;
        $ch = &$a->checked;
        $ch = true;
        var_dump($a->checked, $a->rel);
        //var_dump($a->id, empty($a->cas));
        unset($a->id);
        echo $a;
//~ if ($renderText) {
        //~ //$result->render();
      //~ }
/*
  class _TextInput {
    //
  }
  class _TextArea {}
  class _Checkbox {}
*/
if (!is_null($dbname)) {
        $this->helper->dbname = $dbname;
      }
//$this->helper['dbname'] = (!empty($dbname) ? $dbname : null);
      //$this->helper['dbpath'] = null;
      //$this->helper['target'] = Core::isNull($options, 'target', null);
      //$this->helper['pdo_option'] = Core::isNull($options, 'pdo_option', null);
      //$this->helper['mysql_driver'] = Core::isNull($options, 'mysql_driver', null);
//$path = (!empty($path) ? implode('/', array($path, $this->helper->dbname)) : Core::isEmpty($this->helper->dbname, self::SQLITE_MEMORY));
//$this->helper->dbpath = $path;
      //$this->helper->param
      //var_dump($path, $this->helper->param['dbname']);
$this->helper->sqlitePath = $path;
      $this->helper->dbpath = $path;
      $path = (!empty($path) ? implode('/', array($path, $this->helper->dbname)) : Core::isEmpty($this->helper->dbname, self::SQLITE_MEMORY));
      $this->helper->db = new PDODatabase(sprintf('sqlite:%s', $path));
      return $this;
    {
        //~ $h = $this->handle->SQLite3('');
        //~ $this->assertEquals('', $h->getDatabaseName());
        //~ $this->assertEquals('sqlite', $h->getDatabase()->getDriverName());
    }
 //~ if (!empty($dbpath) && !empty($this->helper->param['dbname'])) {
        //~ $path = $dbpath.'/'.$this->helper->param['dbname'];
      //~ } else
      //~ if (empty($dbpath) && !empty($this->helper->param['dbname'])) {
        //~ $path = $this->helper->param['dbname'];
      //~ } else
      //~ if (!empty($this->helper->param['path']) && !empty($this->helper->param['dbname'])) {
        //~ $path = $this->helper->param['path'].'/'.$this->helper->param['dbname'];
      //~ } else
      //~ if (empty($this->helper->param['dbname'])) {
//~
      //~ }
$uri = sprintf('mysql:host=%s;port=%s;charset=utf8', $host, $port);
        $pdo = new PDO($uri, $user, $passwd);
//var_dump(new PDODatabase(sprintf('mysql:host=%s;port=%s;charset=utf8', $host, $port), $user, $passwd, $options));
//if (!empty($this->helper->param['dbname'])) {
          //} else {
          //  throw new PDOException('Sorry volle. Currently unavailable in-memory usage for mysql database.');
          //}
//$db->insertOrThrow(DatabaseHandler::TABLE_SUROVINY, $val);
        //$db->insertOrThrow(DatabaseHandler::TABLE_SUROVINY, $val);

        //~ $db = $this->handle->setDatabaseName('pokus')->MySQL('localhost', 'root', 'geniv')->getDatabase();
//~
        //~ $val = new ContentValues;
        //~ $val->put(DatabaseHandler::TABLE_SUROVINY_NAZEV, 'nazev 1')
            //~ ->put(DatabaseHandler::TABLE_SUROVINY_POPIS, 'popis nazvu 1');
//~
        //~ $db->insertOrThrow(DatabaseHandler::TABLE_SUROVINY, $val);
 //~ public static function getExceptionOut() {
      //~ return self::$ExceptionOut;
    //~ }
//~
    //~ public static function setExceptionOut($state) {
      //~ self::$ExceptionOut = $state;
    //~ }
//~ } catch (PDOException $e) {
        //~ self::printPDOError($e);
      //~ }7
//try {
// podporu na multilanguage!! vypujcit od Androidu!!!==>
    //public void setLocale (Locale locale)
try {
      } catch (PDOException $e) {
        self::printPDOError($e);
      }
try {
      } catch (PDOException $e) {
        self::printPDOError($e);
      }
//$this->checkPDOError($_res['statement']);
try {
      } catch (PDOException $e) {
        self::printPDOError($e);
      }
try {
      } catch (PDOException $e) {
        self::printPDOError($e);
      }
//public void setLocale (Locale locale)
     try {
      } catch (PDOException $e) {
        self::printPDOError($e);
      }
var_dump($this->helper->sqlitePath);
      $result = false;
      if () {
        $result =
      }
    /**
     * Processing error object
     *
     * @param e input error object
     */
    private function printPDOError($e) {
      $msg = sprintf('Error: "%s" on line: %s', $e->getMessage(), $e->getLine());
      switch (self::$ExceptionOut) {
        case self::EXCEPTION_DIE:
          die($msg);
        break;

        case self::EXCEPTION_ECHO:
          echo $msg;
        break;

        case self::EXCEPTION_LOG:
          Core::sendErrorLog($msg);
        break;
      }
    }
    const EXCEPTION_DIE = 'die';  //die()
    const EXCEPTION_ECHO = 'echo';  //echo
    const EXCEPTION_LOG = 'log';  //error_log
    //const EXCEPTION_THROW = 'throw';  //throw new

// deprecated!!!!
    private static $ExceptionOut = self::EXCEPTION_ECHO;  //output exception
/*
        //metody podminek
        case 'addCondition':  //addCondition($operation, $arg = NULL)
          $this->addConditionOn($this->getLastElement(),
                                $this->_isNull($parameters, 0),
                                $this->_isNull($parameters, 1, null)
                                );
        break;

        case 'addConditionOn':  //addConditionOn(IControl $control, $operation, $arg = NULL)
          $rule = new LightFormRule(self::_CONDITION,
                                      array(
                                        $this->_isNull($parameters, 0),
                                        $this->_isNull($parameters, 1),
                                        $this->_isNull($parameters, 2, null),
                                      )
                                    );
          $this->getLastElement()->addConfigure(self::_RULES, $rule);
        break;

        case 'elseCondition': //elseCondition()
        break;

        case 'endCondition':  //endCondition()
        break;

        case 'addRule': //addRule($operation, $message = NULL, $arg = NULL)
          $rule = new LightFormRule(self::_RULE,
                                      array(
                                        $this->_isNull($parameters, 0),
                                        $this->_isNull($parameters, 1, null),
                                        $this->_isNull($parameters, 2, null),
                                      )
                                    );
          $this->getLastElement()->addConfigure(self::_RULES, $rule);
        break;
*/
// pri vytvareni vracet konktetni typu prvku?!
/*
    private function setCurrElem($section, $value) {
      $this->form->elements[$this->form->lastElement][$section] = $value;
      return $this;
    }

    public function getEmptyValue() {}

    public function setEmptyValue($value) {
      $this->setCurrElem('settings', array('empty_value' => $value));
      return $this;
    }

    public function addRule($type, $text = null, $args = null) {
      //$this->setCurrElem('rule', array('type' => $type, 'text' => $text, 'args' => $args));
      $this->form->elements[$this->form->lastElement]['rule'][] = array('type' => $type, 'text' => $text, 'args' => $args);
      return $this;
    }

    public function addCondition($operation, $arg = NULL) {
      //addCondition
      return $this;
    }

    public function addConditionOn(IControl $control, $operation, $arg = NULL) {}
    public function elseCondition() {}
    public function endCondition() {}


    // podobny princim ukladani jako u lighthtml, globalni instancni pole html
    //kodu co se ma generovat a u ukladani davat pouze jen odkazy na dany element!!!

// omg pohnout doprcic na tomto uz!!!!
    public function addText($name, $settings = array()) {
      $html = $this->form->htmlClass;

      //class, id, autocomplete, placeholder, size, readonly, maxlength, disabled, accesskey, tabindex, title, required

      $element = $html::input($settings)
                      ->type('text')
                      ->name($name);

      //$this->form->elements[$name]['item'] = new LightFormControl($element);
      $this->form->lastElement = $name;
      $this->setCurrElem('item', new LightFormControl($element));

      return $this;
    }
// omg fakt ty elementy sloucit do __call !!!!! kvuli duplicitam!
    public function addPassword($name, $settings = array()) {
      $html = $this->form->htmlClass;

      $element = $html::input($settings)
                      ->type('password')
                      ->name($name);

      $this->form->lastElement = $name;
      $this->setCurrElem('item', new LightFormControl($element));

      return $this;
    }
    //~ public function &__get($name) {
      //~ return $this->form->elements[$name];
    //~ }
    //~ public function __set($name, $value) {}
    //~ public function __isset($name) {}
    //~ public function __unset($name) {}
//rule pravidla
  //~ class LightFormRule {
    //~ const VERSION = 1.04;
//~
    //~ private $rule = array();
//~
    //~ public function __construct($type, $data) {
      //~ $this->rule[$type] = $data;
      //~ //$element, $operation, $arg = null
      //~ //var_dump($element, $operation, $arg);
      //~ //var_dump($type, $data);
//~
      //~ //var_dump($rule);
    //~ }
//~
    //~ public function getRules() {
      //~ return $this->rule;
    //~ }
  //~ }
//~ public function setEmptyValue($value) {
      //~ //$this->getLastElement()->setConfigure(self::_EMPTY_VALUE, $value);
      //~ return $this;
    //~ }
//~ if (isset($value)) {
          //~ //var_dump($conf);  ///$value,
          //~ if (!is_null($conf)) {
            //~ foreach ($conf as $rule => $param) {
              //~ //var_dump($rule, $param);
              //~ $arg = $param[1];
//~
              //~ switch ($rule) {
                //~ case $self::MIN_LENGTH:
                  //~ var_dump($arg);
                  //~ var_dump(mb_strlen($value));
                  //~ //$data['result']
                //~ break;
//~
                //~ case $self::PATTERN:
                //~ break;
              //~ }
//~
            //~ }
          //~ }
        //~ }
//var_dump(~$frm::FILLED, ~(~$frm::FILLED));
        $a = ~$frm::FILLED;
        $b = $frm::FILLED;
        var_dump($a, ord($a[0]), ord($b[0]));
//~ if (!empty($error)) {
        //~ if (empty($this->form->errors)) {
          //~ $this->form->errors = $error;
        //~ } else {
          //~ $this->form->errors[] = $error;
        //~ }
      //~ }
//~ $rule = new LightFormRule(
                                  //~ array($type, $text, $args)
                                //~ );
//~ $rule = new LightFormRule(self::_TYPE_CONDITION,
                                  //~ array($control, $operation, $arg)
                                //~ );
      //$this->form->lastCondition = self::_CONDITIONS.$this->form->lastElement;
      //~ $a = array('condition' => array('rule',
                                      //~ 'else',
                                      //~ 'rule',
                                      //~ ),
                //~ );
/*
       * condition(...) -rule, rule, rule
       *                --else
       *                -rule, rule, rule
       *
       * pro kazdy prvek...
       * condtition[] = array('cond' => array(xx, xx, xx),
       *                      'ruleTrue' => array(ruleX, condT),
       *                      'ruleFalse' => array(ruleY, condF),
       *                      )
       *
       */

// posefovat ukladani struktury condition podminek!!!!

// dokoumat!
      //return new LightFormCondition(array($control, $operation, $arg));
      //$cond = $a['condition_'.$this->form->lastElement][] = array($control, $operation, $arg);
      //$a = array('condition'.$this->form->lastElement => );
//$this->form->lastCondition
      //$condorig =  $this->getLastElement()->getConfigure(self::_CONDITIONS);
//$this->getLastElement()->setConfigure(self::_CONDITIONS, $cond);
//$rule = array(self::_TYPE_CONDITION => array($control, $operation, $arg));
      //$this->getLastElement()->addConfigure(self::_RULES, $rule);
//$rule = array(self::_TYPE_CONDITION => array($control, $operation, $arg));
      //$this->getLastElement()->addConfigure(self::_RULES, $rule);
$this->form->lastCondition = null;
      $this->form->lastConditionState = true;
$this->form->lastCondition = null;
      $this->form->lastConditionState = true;
  //~ public function __toString() {
      //~ return '';
    //~ }
//$this->rule['true'] = array();
      //$this->rule['false'] = array();
//~ $index = $operation.'::'.$arg;
      //~ $cond = array($index => array('cond' => array($control, $operation, $arg),
                                    //~ 'ruleTrue' => array(),
                                    //~ 'ruleFalse' => array(),
                                    //~ ),
                    //~ );
//~
      //~ $this->form->lastCondition = $index;  //index podminky
//~
      //~ //$control->addConfigure(self::_CONDITIONS, $cond);
      //~ $control->addConfigure(self::_RULES, $cond);
      //~ //$this->getLastElement()->addConfigure(self::_CONDITIONS, $cond);
      //var_dump($this->form->lastCondition);
///$this->form->lastCondition
   //~ if (!is_null($this->form->lastCondition)) {
//~
        //~ //var_dump($this->form->lastCondition);
//~
        //~ $index = ($this->form->lastConditionState ? 'ruleTrue' : 'ruleFalse');
        //~ //$this->form->lastCondition[$index][] = $rule;
        //~ $cond = $this->getLastElement()->getConfigure(self::_CONDITIONS);
        //~ $this->form->lastCondition[$index][] = $rule;
        //~ //$this->getLastElement()->addConfigure(self::_CONDITIONS, $cond);
        //~ $this->getLastElement()->setConfigure(self::_CONDITIONS, $this->form->lastCondition);
//~
      //~ } else {

      //~ }
//~ //var_dump($this->form->lastCondition);
      //~ if (!is_null($this->form->lastCondition)) {
        //~ $state = ($this->form->lastConditionState ? 'ruleTrue' : 'ruleFalse');
        //~ $cond = $this->getLastElement()->getConfigure(self::_CONDITIONS);
//~
        //~ if (empty($cond[$this->form->lastCondition][$state])) {
          //~ $cond[$this->form->lastCondition][$state] = $rule;
        //~ } else {
          //~ $cond[$this->form->lastCondition][$state] = array_merge($cond[$this->form->lastCondition][$state], $rule);
        //~ }
//~
        //~ $this->getLastElement()->setConfigure(self::_CONDITIONS, $cond);
      //~ } else {
        //~ $this->getLastElement()->addConfigure(self::_RULES, $rule);
      //~ }
//_CONDITIONS = 'conditions::';
//~ $negation = (ord($rule[0]) > 127);  //zpracovani negace
//~
          //~ $switch_rule = ($negation ? ~$rule : $rule);
//~
          //~ $arg = $param[1];
//~
//~
          //~ //var_dump($value, $switch_rule, $param);
//~
          //~ $result = $this->_checkRule($switch_rule, $arg, $value);
//~
//~ //var_dump($result);
 var_dump($cond);

              //$condition_count++;

              //var_dump($cond);
              //$value = $values[$cond['name']];

              //var_dump($this->_checkRule($cond['rule'], $cond['arg'], $values[$cond['name']]));
//var_dump($this->rule[self::_TYPE_CONDITION]);//[$index];
//var_dump('st: '.$_state);
              //~ if () {
                //~ var_dump('true');
//~
              //~ } else {
                //~ var_dump('false');
//~
                //~ //var_dump($cond['control']->getConfigure(self::_RULES));
                //~
                //~ foreach $_rule[$index]->getFalse();
                //~ var_dump('index: '.$index, );
//~
                //~ //$cond['control']->getConditionRules();
              //~ }
 //var_dump($index, $rule);
          //var_dump($rule->getRuleType());

          $negation = false;
          $message = null;
          $arg = null;
//print_r($this);
//var_dump($rules);
// nebere v potaz indexy condition podminek!!??????????????
    public function getConditionRules() {
      //$cond = $this->rule[self::_TYPE_CONDITION];//[0]->getConfigure(self::_RULES);
      //var_dump($cond);//[0]->getConfigure(self::_RULES));
      var_dump($this);
      //~ return array(
                    //~ 'name' => $cond[0]->getHtmlName(),
                    //~ 'rule' => $cond[1],
                    //~ 'arg' => $cond[2],
                  //~ );
    }
$_rules = ;
var_dump($_cond['rules']);
//$_rule[$index]->
//$separe_element = function($row) { return $row->getHtml(); };
      //$elements = array_map($separe_element, $this->form->elements);
      //var_dump($this->form->elements);

      // sezvejkani, self::_TYPE_CONDITION, self::_TYPE_RULE
      // bud obalovat do te zatracene tridy! a nebo predelat na foreach
      //prootze se bude muset switchem projizdet ty rule i ze zavislosti
      //++ to musi i akceptovat condition podminky
//var_dump($data);
//var_dump(array_merge($default, (array) $settings));
// dopracovat zpracovani condition frutalnich podminek!!
//$this->form->lastElement = $offset; //natavi jako aktualni pracovni
      //~ //var_dump($this);
        //~ //var_dump($this->getLastElement()->getHtmlName(), $args->getHtmlName());
        //~ $args = null;
// zarucit ze v kazdem kroku bude tato podminka vede o jaky se jedna element a jakou ma hodnotu!
//~ var_dump($this->getLastElement()->getHtmlName());
var_dump($arg, $value);
          // vyresit porovnanvani elementu
//$separe_element = function($row) { return $row['html']; };
//~ $c = function($row) {
        //~ //$html = $row['html'];
        //~ //return $html::label()->add($html::span()->setText($row['label']), $row['element']);
        //~ return $row['element'];
      //~ };
//~ if (!empty($label_callback)) {
        //~ $element_obal = $label_callback($label_callback_data);
      //~ } else {
        //~ // defaultni callback-y trochu lip!
        //~ $default_label_callback = function($row) {
          //~ //$html = $row['html'];
          //~ //return $html::label()->add($html::span()->setText($row['label']), $row['element']);
          //~ return $row['element'];
        //~ };
        //~ $element_obal = $default_label_callback($label_callback_data);
      //~ }
//var_dump($this->form->attribute['label_callbak']);
// bude do trid pridavat elementy a z tech trid se to pak bude generovat, a uvnitr trid se budou generovat elementy
//$this->form->lastGroup
var_dump($this->form->lastGroup); // jak lip???
//~ public function render() {
      //~ var_dump($this->groups->elements);
    //~ }
// generovani labelu bude mit jeden vychozi callback vzor a ten se bude pri
    //generovani aplikovat, pokud se bude chtit prepsat bude moznost...
 // aplikace skupin
//????public function endGroup() {}
//$this->form->attribute['legend'] = $text;
//$html = $row['html'];
//return $html::label()->add($html::span()->setText($row['label']), $row['element']);
//'fieldset' => true,
//'legend' => null,
//http://community.topcoder.com/tc?module=Static&d1=features&d2=071708
//http://stackoverflow.com/questions/11100277/function-to-generate-some-vectors-of-two-values-x-y-of-some-forms
  variate_generator<mt19937, normal_distribution<> > r(mt19937(time(NULL)), normal_distribution<>(1, 0.1));

  for (int i = 0; i < 20; i++)
      std::cout << r() << std::endl;

//~ std::cout << "pocita?" << std::endl;
  //~ std::tr1::mt19937 eng;  // a core engine class
  //~ std::tr1::normal_distribution<double> dist;
  //~ std::cout << dist(eng) << std::endl;
  //for (int i = 0; i < 10; ++i)
      //std::cout << dist(eng) << std::endl;
//http://community.topcoder.com/tc?module=Static&d1=features&d2=071708
//http://stackoverflow.com/questions/11100277/function-to-generate-some-vectors-of-two-values-x-y-of-some-forms
  variate_generator<mt19937, normal_distribution<> > r(mt19937(time(NULL)), normal_distribution<>(1, 0.1));

  for (int i = 0; i < 20; i++)
      std::cout << r() << std::endl;

//~ std::cout << "pocita?" << std::endl;
  //~ std::tr1::mt19937 eng;  // a core engine class
  //~ std::tr1::normal_distribution<double> dist;
  //~ std::cout << dist(eng) << std::endl;
  //for (int i = 0; i < 10; ++i)
      //std::cout << dist(eng) << std::endl;
$this->groups->fieldset_callback = $settings['fieldset_callback'];
//$this->groups->legend_callback = $settings['legend_callback'];
      //$this->groups->fieldset_callback = $settings['fieldset_callback'];
// setingem predavat callback na tvoreni labelu!!!!
      //$htmlClass::fieldset()->add($legend)->add($elem);
      //$this->form->attribute['legend_callback'];
      //legend_callback
      //fieldset_callback
      // callback ulozit do skupiny, bude si i pamatvat svoje defaultni callback-y
      // udelat to predavani callback!!
//~ if (is_null($caption)) {
    //~ $elements = array_merge($elements, $group->getElements());
  //~ } else {
    //~ $elem = $group->getElements();
    //~ if (!is_null($elem)) {
      //~ $elements[] = $htmlClass::fieldset()->add($legend)->add($elem);
    //~ }
  //~ }
//return $this->groups->elements;
//var_dump($data['elements']);
     //~ $caption = $group->getCaption();
//~
        //~ $legend_callback_data['caption'] = $caption;
//~
        //~ $legend = ($caption ? $legend_callback($legend_callback_data) : null);
        //~ //$elements =
//~ // trochu optimalizovat!
        //~ //var_dump($caption);
        //~ if (is_null($caption)) {
          //~ $elements = array_merge($elements, $group->getElements());
        //~ } else {
          //~ $elem = $group->getElements();
          //~ if (!is_null($elem)) {
            //~ $elements[] = $htmlClass::fieldset()->add($legend)->add($elem);
          //~ }
        //~ }
        //var_dump($group);
//var_dump($this->groups->callback['fieldset']($data));
//var_dump($this->form->elements);
// kopnout do callabacku?
// pridat tvarovaci callback!
//~ 'legend_callback' => function($row) {
                                                //~ return $row['html']::legend()->setText($row['caption']);
                                              //~ },
//$legend_callback = $this->form->attribute['legend_callback'];
      //$legend_callback_data = $callback_data;
      //$fieldset_show = $this->form->attribute['fieldset'];
// naimplementovat zpatky
      //$legend = $this->form->attribute['legend'];

      //~ if (!$legend_callback) {
        //~ $legend_callback = function($row, $html) { return $html::legend()->setText($row); };
      //~ }
//~
      //~ if ($legend) {
        //~ $legend = $legend_callback($legend, $htmlClass);
      //~ }
//$this->form->attribute['fieldset'] = null;
      //$this->form->attribute['legend'] = null;
      $this->form->attribute['legend_callback'] = null;
 //~ $fieldset = $elements;
      //~ if ($fieldset_show) { //vypinani fieldset-u
        //~ $fieldset = $htmlClass::fieldset(); // dodelat: disabled, form, name
        //~ $fieldset->add($legend)
                //~ ->add($elements);
      //~ }
//~
      //~ $result = $form
                    //~ ->add($fieldset);
$result = '';
//separace elementu
      //~ $separe_element = function($row) { return $row->getHtml(); };
      //~ $elements = array_map($separe_element, $this->form->elements);
//$this->control['configure'][$key][] = $value;
//'legend_callback' => $leg_cb,
//$this->groups->settings = $settings;
// popripade predavat this za bude zapotrebi...!
// nejakym zpusobem predavat this?! do controly ???
//return (!is_null($data['elements']) ? $this->groups->callback['fieldset']($data) : null);
//bud bude ukoncovat, nebo se misto toho udela: addGroup(null) -> addGroup()
// defaultni skeleton labelu?
    // podpora na array name!!!
//~ if (is_array($elem)) {
          //~ $elements = array_merge($elements, $elem);  //zpracovani pole elementu
        //~ } else {
          //~ $elements[] = $elem;  //zpracovani elementu jako jedne skupiny
        //~ }
return $this->groups->callback['fieldset']($data);
// dodelat! prida na 0 index polozku a bude ji ignorovat overovac???
      //var_dump($this->getLastElement()->getHtml());
      //echo ($this->control['html']->insert(0, LightHtml::option()->setText('xdkjbfsadgkjbsdf')));
//~ public function skipFirst() {
      //~ // dodelat! rekne pravidslum ze ta prvni polozka se me preskocit?! select a spol?
      //~ return $this;
    //~ }
// pripadne nastavovani obsahu bude asi zrejme probihat pres allback wrappers
//if (!is_null($parameters[0])) {
///is_array($parameters) &&
//var_dump(array_key_exists(0, $parameters));
          //if (array_key_exists(0, $parameters)) {
echo $html::a()->href()->setText('toto je pokusny text');
//.............<a href="#" onclick="return confirm('toto je pokusny super tajny text?');">klik</a>...................
        echo $e;
echo $html::a()->href()->onconfirm('toto je pokusny %s %s text?', array('super', 'tajny'))->setText('toto je pokusny text');
// pridat promonou k aktualnimu elementu ze ho ma ignorovat..!!
      // defaultvalue, ignore value?
      // overovat jestli jede o select! jinde se to zatim ani nehodi!!!!
// nastavuje prvni polozku preskoceni elementu!!
var_dump();$last->getHtml()->getName()
//return $this->control['fullhtml'];
      //var_dump($this->control['html']->name);
      //echo ($this->control['html']->insert(0, LightHtml::option()->setText('xdkjbfsadgkjbsdf')));
->setPrompt('Select your country')
// pridat konstanty na vnitrni vyuziti indexu!!!!
var_dump($this->form->submittedBy->getValue());
      //return (!is_null($this->_getSendData($this->form->submittedBy)));
// opravit respektie trochu vic prepracovat!!!!
//~ switch () {
        //~ case self::POST:
          //~ return (is_null($name) ? $_POST : (isset($_POST[$name]) ? $_POST[$name] : null));
        //~ break;
//~
        //~ case self::GET:
          //~ return (is_null($name) ? $_GET : (isset($_GET[$name]) ? $_GET[$name] : null));
        //~ break;
//~
        //~ case self:FILES:
          //~ return (is_null($name) ? $_FILES : (isset($_FILES[$name]) ? $_FILES[$name] : null));
        //~ break;
      //~ }
//var_dump($this->control['attribute']['method']);
      //var_dump($this->getMethodValue($this->control['html']->name));
      //var_dump($this->control['html']);
// metoda na vraceni value z GET/POST
//$this->_getSendData();
//      var_dump($this->isSubmitted());
// overuje dokud neni poslano!
// vyresit elegantneji to overovani odesilani!!!!!
// bude se vkladat jmeno elementu ? nebo instance danaho elementu
//var_dump($this->form->submittedBy->getValue());
      //$this->form->submittedBy->getValue();var_dump($this->form->submittedBy->getValue());
//var_dump($this->control['configure']);
      //var_dump($this->control['source']->getMethodValues());
      //$value = $this->getMethodValue($this->control['html']->name);
// omg!
//var_dump($value, $this->control);
// aplikovat default a vubec other nastaveni!
// tady si vytahat z 'source' value z get/post
      //return (!empty($value) ? $value : '');
// otazkou zistava jestli to ma brat hodnoty z postu nebo primo z elementu
      //return (!empty($this->control['html']->value) ? $this->control['html']->value : '');
      //$send_value = $this->getMethodValue($this->control['html']->name);
      //return ($send_value ? $send_value : $this->control['html']->value);
      $v = $this->getMethodValue($this->control['html']->name);
    //~ public function __toString() {
      //~ return $this->getValue();
    //~ }
// pripadne vkladat do jine urovne pole!
// pocitat s obsahem metody: setEmptyValue
// //jak nacitat label pro element!!!!
      //var_dump($name, $this->groups->elements);
      //echo $this->groups->elements[$name];
      var_dump();
      //echo $this->groups->elements[count($this->groups->elements) - 1];
      //var_dump($this->groups->elements[count($this->groups->elements) - 1]);
// omg vracet label elementu ne label celeho formulare!
// jinak empty value??!
const METHOD_GET = 'get';
    const METHOD_POST = 'post';
    //const METHOD_DELETE = 'delete';
    //const METHOD_PUT = 'put';

    public static function getHttpVariable($method) {
      $result = NULL;
      switch ($method) {
        case self::METHOD_GET:
          $result = $_GET;
        break;

        case self::METHOD_POST:
          $result = $_POST;
        break;
      }
      return $result;
    }
  //kontrola rozsahu, vypuceno
    //~ private function isInRange($value, $range) {
      //~ return (!isset($range[0]) || $value >= $range[0]) && (!isset($range[1]) || $value <= $range[1]);
    //~ }
var_dump('s: '.$_state, $_iterate);
//var_dump('cond:', $value, $this->getHtmlName(), $_cond['name'], PHP_EOL);
var_dump('r: '.$_r);
 controle je sem kladana duplicitine!
 //var_dump($value, $this->getSendValue());
      //var_dump($name, $this->getHtmlName());
      //$getdata = $this->getMethodValues();
// opravit validaci!!
//var_dump('gg', $getdata);
//'getdata' => $getdata,
//var_dump($val);
        //var_dump($val);$data['getdata']
     // v pripade posle IS_IN je ve vyctu!
// respektive === ale musel by se porovnava string/string //~ case self::IS_IN: //je ve vyctu
          //~ // je ve vyctu
        //~ break;
//~ $name = $this->getHtmlName();
                //~ $label = $this->control['source']->getCurrentGroup()->getLabel($name);
//~
                //~ $_message = str_replace(array('%label', '%name', '%value'),
                                        //~ array($label, $name, $value),
                                        //~ $_message);
//~ COUNT = ':length';
// melo by byt raci ->getValue()
var_dump(, $args->getValue());$this->_getSendData($args->getHtmlName());
// trochu uplne jinak! a hlavne prijde uplne jinam!!!!!
//nacitani (pole)hodnot(y) ze zvolene metody
    private function _getSendData($index = null) {
      $result = null;
      switch ($this->form->attribute['method']) {
        case self::GET: //pokud je get
          $result = $_GET;
        break;

        case self::POST:  //pokud je post
          $result = $_POST;
        break;
        // jak zpracovavat files[]????
      }
      //pokud je index definovan
      if (!is_null($index)) {
        $result = $this->_isNull($result, $index, null);
      }
      return $result;
    }
// vytvaret nejakou tridu pri vraceni formularu, ktera bude skryvat html objekt ktery se nad tim vytvari
var_dump($backlink_callback_data);
        //~ if (!empty($label_callback)) {
          //~ $element_obal = $label_callback($label_callback_data);  //uzivatelsky callback
        //~ } else {
          //~ $element_obal = $this->form->attribute['label_callbak']($label_callback_data);  //defaultni callback
        //~ }
//~
//~
      //~ $settings['backlink']
      //~ $this->form->attribute['backlink_callback']

      //~ $link = $html::a($settings)->href('link...')
                                //~ ->title($text)
                                //~ ->setText($text);
      // dopsat!!! + callback!, muze jich byt vic a muzou mit kazdy nazevisle na sobe jinou formu

      //~ $this->form->backLinks = array();
      //~ $this->form->lastBackLink = null;
// dopsat!!!!
//backlink_callback
$result = null;
      $container = $this->control['container'];
// skusit poladit!!! jinak proste vyhodit! OGM vyhodit a varatit do puodniho stavu!
      //$this->control['source']->getCurrentContainer();
      var_dump($container);
      $name = $this->control['name'];
      if (!empty($container)) {
        $val = $this->getMethodValue($container);
        var_dump($val, $name);
        $result = (isset($val[$name]) ? $val[$name] : null);
      } else {
        $result = ;
      }
 $this->form->lastContainer,
$element_name = $name;
      if (!is_null($this->form->lastContainer)) {
        $element_name = $this->form->lastContainer.'['.$name.']';
      }
//var_dump($element_name, $name_multiple);  // aplikovat: element_name!!!!
 //vraceni jmena kontejneru
    public function getContainer() {
      return $this->groups->container;
    }

    //nastavovani jmena kontejneru
    public function setContainer($name) {
      $this->groups->container = $name;
      return $this;
    }
$this->groups->container = null;
//, $obalhtml$cont,
//'fullhtml' => $obalhtml, //kompletni element v obalu
                              'container' => $cont,
$this->form->containers = array();  //pole kontejneru
      $this->form->lastContainer = null;  //posledni kontejner
// vytvareni kontejneru podle name, pridavat k jmenum aktualni name ale jen v ramci skupiny
    //seskupovani do name pole: "first[name]"/"second[name]"
    public function addContainer($name) {
      $this->form->lastGroup->setContainer($name);
      $this->form->containers[] = $name;
      $this->form->lastContainer = $name;
      return $this;
    }
//nacitani jmena kontejneru
    public function getCurrentContainer() {
      return $this->form->lastGroup->getContainer();
    }
->addContainer('fiirst')
            ->addContainer('twooo')
$this->form->returnValues = false;  //vraceni poslednich hodnot??
 public function setReturnSendValues($state) {
      // doimplementovat!!!!
      return $this;
    }
//->setReturnSendValues(true)
switch ($this->form->elements[$k]->getHtmlType()) {}
var_dump($this->control['html']->name, $this->control['name']);$this->control['html']->name
//~ $a = $html::span()->title('spaaan')->add($html::div()->id('diiiiv'), $html::a()->class('aaa'));
      //~ $ch = $a->getChildren();
      //~ //echo $a[1];
      //~ //var_dump(isset($a[0]));
      //~ //echo $a[0];
      //~ //unset($a[0]);
      //~ $a[3] = $html::ol();
      //~ $a[] = $html::ul();
      //~ echo $a;
      //~ exit;
foreach ($values as $k => $v) {
          if (isset($this->form->elements[$k])) {
            $this->form->elements[$k]->setValue($v);
          }
        }
// sloucit obsahu techto dvou metod!!!
//return array_map($callback, self::$elements[$this->elem->id]['contents']);
//return self::$elements[$this->elem->id]['contents'];
//~ $callback_optgroup = function($row) { return $row->value; };
                    //~ var_dump(in_array($v, array_map($callback_optgroup,  $child->getChildren())));
                    //~ foreach ($groupchild as $gchild) {
                      //~ echo $gchild->value.', ';
                    //~ }
var_dump($child);
//echo $c;  // nejak dodala!! ++resit optgroup!!!
//echo $c;  // nejak dodala!! ++resit optgroup!!!
//var_dump($c);
                  //echo $c.', '.print_r($v, true);
// rozlisovat tyto dva input prvky!!!!
            //radio
            //checkbox
// ++pocitat s tim ze checkbox muze byt i jeden a nemumi byt jen multiple
 //~ foreach ($children as $child) {
//~ // uhladit syntax!
                  //~ if ($child->getName() == 'input') { //vybere pouze iputy
                    //~ if (is_array($v)) {
                      //~ $child->checked(in_array($child->value, $v));
                    //~ } else {
                      //~ $child->checked($child->value == $v);
                    //~ }
                  //~ }
                //~ }
else {
          $children[0]->setText('');
          $children[0]->setText($prompt);
        }
// jeste predelat, bude muset html umet min: arrayaccess a get children...
//self::$elements[$this->elem->id]['contents']
      //var_dump(array_map($filter_text, self::$elements[$this->elem->id]['contents']));
      //~ $clear_text = function(&$val, $key) {
        //~ unset($val);
      //~ };
      //~ array_walk(array_filter(self::$elements[$this->elem->id]['contents'], $filter_text), $clear_text);
//~ if ($children[0]->getName() == 'option') {
        //~ unset($children[0]);
        //$children[0]->add($htmlClass::span(), $htmlClass::li())->clearText()->setText($prompt)->add($htmlClass::span(), $htmlClass::div());
          var_dump($children[0]->getText());
      //~ }
// dochytat mouchy!!! musi rozlisovat mezi optgroupem a option
//if ($children[0]->value != '') {!isset($children[0]->value)var_dump($children[0]->getName());
        //~ if ($children[0]->value != '') {

        //~ } else {
          //~ $children[0]->clearText()->setText($prompt);
        //~ }
//opravit zpetne vkladani dat u selectu a pod!
$interval = $this->_isNull($settings, 'interval');
          $settings['interval'] = null;

          if (!empty($interval)) {
            var_dump($interval);
          }
// ++zpetne vraceni hodnot z odesnanych dat, pokud neprojde valdiaci formular
//unset($_POST['password'], $_POST['password2']);
//$label = ($row['label'] ? $row['html']::span()->setText($row['label']) : null);
// uz se musi tady aplikovat obalove callback-y!!!
// musi se predavat maximalne tak redukovane nastaveni $settings
//musi byt multiple name!!!
//$element = $html::div()->add($rows);
$element = $html::div()->add($rows);
      //var_dump(is_callable($type) ?  : null);
// musi podporovat i vlastni validator! misto typu callback
//dodelat implementace back linku!!! → $this->form->backLinks
//public function addContainer($name) {}
// pridat moznost zpracovavat chyby graficky...v html-ku???
// pripadne odstranovat nejake nepotrebne polozky
      //unset($result[$this->form->submittedBy->getHtmlName()]);
      $result = ;$this->getMethodValues()
class="w_def_text
// neco vo stylu toggle jako je u vzoru ale lip
    //~ public function addElement($element) {
      //~ // prida blize nedefinovany objekt co se nekam vlozi/provede?!
      //~ return $this;
    //~ }
        //$settings['label'] = $settings;
        $a = array('label' => $settings);
        var_dump($a);
        $settings = $a;
//~ public function addFilter($filter) {}
// umoznit aby se dalo dostat k vlastnostem jednotlivych elementu ve formu podle jmena
    //++umoznit aby byl prave akto formular univerzalni resp vsestrany
//~ //$data['rows'][] = $data['callback']($callback_data);
            //~ //$html::span()->setText($value);
var_dump('c', $data['callback']);
//var_dump($data['callback']($callback_data));
//$html::span()->setText($value);
                            // bud vkladat do walk nebo rovnou ve vnitr resit ten walk pruchod??
                                                      //~ $html = $data['html'];
                                                      //~ $data['rows'][] = $html::input()
                                                                            //~ ->type('checkbox')
                                                                            //~ ->name($data['name']) // i ruzne jmena??
                                                                            //~ ->value($key);
                                                      //~ $data['rows'][] = $html::span()->setText($value);
// vyresit a doresit callback obaly!
//var_dump($obal_callback, $element_callback);
var_dump($name_multiple);
//var_dump($data['callback']($callback_data));
//$data['rows'][] = $html::span()->setText($value);
// uz se musi tady aplikovat obalove callback-y!!!
// vkladani na konkterni element z array access pristupu
$this->control['configure']['items'] = $items;$items
//$obal_callback $element_callback
//: generateItems($type, $value, $settings);
$callback = array(self::CALLBACK_OBAL => $obal_callback,
                            self::CALLBACK_ELEMENT => $element_callback);
$obal_callback = $callback[self::CALLBACK_OBAL];
$element_callback = $callback[self::CALLBACK_ELEMENT];
var_dump($rows);
// dopsat!! jelikoz se elementy negeneruju ze samostanych trid tak je nutne to smelit takto!
$list_callback = function($value, $key, $data) {
            //vytvareni elementu
            $element = $data['html']::input($data['settings'])
                                    ->type($data['type'])
                                    ->name($data['name'])
                                    ->value($key);
            //slozeni pole pro callback
            $callback_data = array_merge($data, array('key' => $key, 'value' => $value, 'element' => $element));
            //skaladani radku
            $data['rows'] = array_merge($data['rows'], $data['callback']($callback_data));
          };

          //volba callback funkce
          $callback = ($element_callback ?: $this->form->attribute[self::CALLBACK_ELEMENT]);

          $rows = null;
          if (!empty($value)) {
            $rows = array();
            array_walk($value, $list_callback, array('html' => $html, 'type' => 'checkbox', 'rows' => &$rows, 'name' => $name_multiple,
                                                      'callback' => $callback, 'settings' => $settings));
          }
//~ $list_callback = function($value, $key, $data) {
            //~ //vytvareni elementu
            //~ $element = $data['html']::input()
                                    //~ ->type($data['type'])
                                    //~ ->name($data['name']) //stejne jmeno
                                    //~ ->value($key);
            //~ //slozeni pole pro callback
            //~ $callback_data = array_merge($data, array('key' => $key, 'value' => $value, 'element' => $element));
            //~ //skladani radku
            //~ $data['rows'] = array_merge($data['rows'], $data['callback']($callback_data));
          //~ };
//~
          //~ //volba callback funkce
          //~ $callback = ($element_callback ?: $this->form->attribute[self::CALLBACK_ELEMENT]);
//~
          //~ $rows = null;
          //~ if (!empty($value)) {
            //~ $rows = array();
            //~ array_walk($value, $list_callback, array('html' => $html, 'type' => 'radio', 'rows' => &$rows, 'name' => $name,
                                                      //~ 'callback' => $callback, 'settings' => $settings));
          //~ }
//~
          //~ $obal_callback_data = array('html' => $html, 'rows' => $rows, 'settings' => $settings);
          //~ if ($obal_callback) {
            //~ $element = $obal_callback($obal_callback_data);
          //~ } else {
            //~ $element = $this->form->attribute[self::CALLBACK_OBAL]($obal_callback_data);
          //~ }
//$type = $this->getLastElement()->getType();
//var_dump($last->getHtmlName());
      //var_dump($items, $this->getLastElement()->getType());
   //~ $option_callback = function($value, $key, $data) {
            //~ $html = $data['html'];
            //~ if (!is_array($value)) {
              //~ $data['rows'][] = $html::option()->value($key)->setText($value);
            //~ } else {
              //~ $rows = &$data['rows']; //ulozeni puvodni adresy
              //~ unset($data['rows']); //zruseni puvodni adresy
              //~ $data['rows'] = &$group;  //prilozeni nove adresy
              //~ array_walk($value, $data['callback'], $data); //pruchod pro skupinu
              //~ $rows[] = $html::optgroup()->label($key)->add($group);  //vlozeni do puvodniho
            //~ }
          //~ };
//~
          //~ $rows = null;
          //~ if (!empty($value)) {
            //~ array_walk($value, $option_callback, array('html' => $html, 'rows' => &$rows, 'callback' => $option_callback));
          //~ }
var_dump($element_callback(array('html' => $html)));
//->form->attribute$this, $element_obal, $this, $data $method, $name, $element
//$this->control['callback']
// predavat callback i tady????
//self::CALLBACK_OBAL, self::CALLBACK_ELEMENT
var_dump($last->getCallBack(self::CALLBACK_ELEMENT));
//Sets options from which to choose.
    //~ public function setItems(array $items) {
      //~ //$this->control['configure']['items'] = $items;
      //~ return $this;
    //~ }
//$source, $type, $name, $html
// nastaveni polozek pro: select,  multiselect, radio, checgroup (proste ty ktere maji list-y)
// po sepsani zakladnich metod sepsat i testy!!!!
  //~ var_dump($this->control['configure'][self::_O_ITEMS]);
      //~ // kdyztak malinko prepracovat...
//~
      //~ $children = $this->control['html']->getChildren();
      //~ $item_callback = function($val, $key, $data) {
        //~ switch ($val->getName()) {
          //~ case 'input':
            //~ $data[] = $val->value;
          //~ break;
        //~ }
      //~ };
      //~ $result = null;
      //~ if ($children) {
        //~ array_walk($children, $item_callback, &$result);
      //~ }
      //~ return $result;
//Adds error message to the list.
var_dump($value, $this->getSendValue(), '<hr />');
$value,
* @param value hodnota
$value, $value,
//$_r = $this->_checkRule($_rule, $_arg, $values[$name]);
//$_state = $this->_checkRule($_cond['rule'], $_cond['arg'], $values[$_cond['name']]);
 //$name, $XXXcontrol
//kontrola validace pravidel
//podpora v error zpravach pro: '%label', '%name', '%value'
//~ FILES = 'files';
//null name znamena konec skupiny
//group vytvari fieldset s legendou
//Adds fieldset group to the form.
//$this->form->lastElement = $name;
$this->form->elements[$name];
//$this->form->elements[$this->form->lastElement];
      //~ $this->groups->callback[self::CALLBACK_LEGEND] = function($row) {  //implicitni callback pro legend
        //~ return ($row['caption'] ? $row['html']::legend()->setText($row['caption']) : null); };
//~
      //~ $this->groups->callback[self::CALLBACK_FIELDSET] = function($row) {  //implicitni callback pro fieldset
        //~ return $row['html']::fieldset()->add($row['legend'])->add($row['elements']); };
//pretezovani metod formulare
//generovani polozek v list seznamech
/**
     * nacteni atributu elementu
     *
     * @param name jmeno elemetnu
     * @return hodnota atributu
     */
    public function getAttribute($name) {
      var_dump($this->getLastElement()->getHtmlName());
      return $this->getLastElement()->getAttribute($name);
    }

    //nastavi atribut elementu
    public function setAttribute($name, $value) {
      $this->getLastElement()->setAttribute($name, $value);
      return $this;
    }
//nastaveni predvyplnenou hodnotu, tato hodnota musi byt ignorovana
//nastaveni defaultni hodnoty
    //
    //umisteni do formulare
$this->form->lastElement
//$this->getLastElement()
 /**
     * nacte posledni aktivni element
     *
     * @return objekt posledniho elementu
     */
    private function getLastElement() {
      return $this->form->lastElement;
    }
//$this->getLastElement();
//$this->getLastElement();
//$this->getLastElement()
//$this->getLastElement()
//$this->getLastElement()
//$this->getLastElement()
//$this->getLastElement();
//nastavovani hodnot z pole hodnot
//nastaveni defautnich hodnot do formulare
    //musi byt pred ->reder()
    //nastavuve vraceni hodnot do formulare po chybnem vyplneni
    //musi byt pred ->reder()
//prida podminku na aktualni prvek
//pro jeden element nemusi byt jen jeden condition!!!!
//prida podminku na konkretni prvek
//else podminka
//konecna podminka
//prida samotne pravidlo
//nastavi povinnou polozku, musi byt vyplnena
//, dokaze vybrat promot jen kdyz je uz jednou nastavovanej
//, funguje jen jako insert 0
//vraceni hodnot ktere byli odeslany
//interni nepresna detekce odesalnych dat
//public function validate() {}
//legenda hlavniho ('') fieldset-u formulare
//sam nebude volat ->render()! to bud externe nebo toString
// - obsluha jakychsik kontejneru...
//overeni existence
   #$ cd /home/gmr/dedicated/q4/
                                        #1 DM $
                                        #2 Team DM $
                                        #3 Tourney $
                                        #4 CTF $
                                        #5 Arena CTF $
#cd ~/dedicated/doom3/
$base = __DIR__ . '/qameq/';
        const GAMEQ_BASE = $base;
//private static $GAMEQ_BASE = __DIR__ . '/qameq/';
//require_once GAMEQ_BASE . 'Protocol.php';
//gameq_protocol_unreal2

        // Initialize the protocol object
        //~ if (!is_readable($file)) {
            //~ trigger_error('GameQ::getProtocol: unable to read file [' . $file . '].',
                    //~ E_USER_ERROR);
        //~ }
        //~ include_once($file);
// Load it
        //$file  = 'Protocol/'.$name.'.php';
var_dump($name, $class);
        // Initialize the protocol object
        //~ if (!is_readable($file)) {
            //~ trigger_error('GameQ::setFilter: unable to read file [' . $file . '].',
                    //~ E_USER_NOTICE);
            //~ return false;
        //~ }
        //~ include_once($file);
//$file  = 'Filter/'.$name.'.php';$file,
      //extensions\GameQ,
      //classes\GameQ,
//$file = str_replace('\\', DIRECTORY_SEPARATOR, strtolower($name));
//var_dump($val['servername'], ord($val['servername'][4]));
// prevod 160 -> 32
//var_dump(str_replace(array('�'), array(' '), '[CZ]�GMR�server�ONLY�HELL�#1�(MIN�LEVEL�5)�by�Martin[cze]'));
//$val['servername'],
//var_dump($val);
                //~ return array(
                              //~ 'servername' => $val['servername'],
                              //~ 'playercount' => $val['playercount'],
                              //~ 'maxplayers' => $val['maxplayers'],
                              //~ 'online' => $val['gq_online'],
                              //~ 'players' => (isset($val['players']) ? $val['players'] : null),
                            //~ );
var_dump(htmlentities($val['servername'])); //iconv('8859-1', 'UTF-8', $val['servername']),
$search = array(0xa0);
                  $replace = array(' ');$search, $replace,$search, $replace,
//$results = $gq->requestData();
//$port = Core::isEmpty($port, 3306);
,
      classes\Core
// dodelat a implementovat jeste tridu Permission
    //public function setAuthenticator($handle) {}

    //role: admin, user, guest apod.
    //automaticky neprihlaseny ma roli guest resp se muze uvnit rovnou testovat jestli je uz zuivatel autorizovan?!
    //public function isInRole($role) {}
        class singl {
          private static $user = null;

          public static function getInstance() {
            if (is_null(self::$user)) {
              self::$user = new self;
            }
            return self::$user;
          }

          public function setNeco($a) {
            self::$user->kuk = $a;
          }

          public function isNeco() {
            return self::$user->kuk;
          }
        }

        $singl = singl::getInstance();
        var_dump($singl);
/*
// do stranek pro MC
              //----------------------pro minecraft stav serveru
              //$res = @fsockopen('gfdesign.cz', 25565, $errno, $errstr, 0.5);
              $res = @fsockopen('gfdesign.cz', 26676, $errno, $errstr, 0.5);
              if ($res !== false) {
                fwrite($res, "\xFE");
                //fwrite($res, "\x00");

                $data = fread($res, 256);

                //var_dump(substr($data, 4));

                if ($data[0] != "\xFF") {
                  //Check we've got a 0xFF Disconnect
                }

                //var_dump(explode('§', mb_convert_encoding(substr($data, 4), 'UTF-8')));//'UCS-2'
                $d = mb_convert_encoding($data, 'auto', 'UCS-2');
                //var_dump($data);

                $d = substr($data, 3);

                //Decode UCS-2 string
                $d = mb_convert_encoding($d, 'auto', 'UCS-2');
                $dd = explode("\xA7", $d);
                var_dump($dd);

                fclose($res);
              }
*/
admin predelat na static web (ale az ten upraveny)!!!
rorsirovat tuto tridu na
//$result = (strval($this->userlist[$login]) === strval($pass));
//$parents = (isset($this->roles[$parents]) ? $this->roles[$parents] : null);
//var_dump($parents);
                //$this->roles[$parents]['parents'] += $this->roles[$role]['parents'];
                //var_dump($this->roles[$parents]['parents']);
                //$this->roles[$role]['parents'] = array_merge($this->roles[$parents]['parents']);// $parents;// = array_merge($this->roles[$role]['parents'], array($parents));
                //$this->roles[$role]['parents'] = array_merge($this->roles[$role]['parents'], $this->roles[$parents]['parents'], array($parents));
                // + array($parents);
///
                  //var_dump($data['roles'][$val]['parents']);
                  //$data['res'] = array_merge($data['res'], $data['roles'][$val]['parents']);
///$res[] = $parents;
                //var_dump($res);
                //$this->roles[$role]['parents']
                //~ //var_dump($this->roles[$parents]['parents'], $parents);
                //~ var_dump($parents);
                //~ foreach ($parents as $parent) {
                  //~ //$parents
                  //~ $this->roles[$role]
                //~ }
$res = array();
  //$this->roles[$role]['parents'] = $parents;
//var_dump($parents);

//~ //navrhnout jak bude vypadat to pole!!!
              //~ if (is_array($parents)) { //pokud je parents pole
//~ // optimalizace!!!! vyznikaji duplicity!!!
                //~ $parent = array();
                //~ foreach ($parents as $par) {  //probehne pole a vybere rodice z potomku
                  //~ $parent = array_merge($parent, $this->roles[$par]['parents']);
                //~ }
              //~ } else {
                //~ $parent = $this->roles[$parents]['parents'];
              //~ }
              //~ //secteni pole, rodicu a aktualniho rodice
              //~ // spatne scita pole!
              //~ $this->roles[$role]['parents'] = array_merge($this->roles[$role]['parents'], $parent, (array)$parents);
// ukladat do hiearchie!
//var_dump($role, $parents);
var_dump($this->roles[$role]['parents']);
          ///$roles = $this->roles[$role];
          //~ print_r($this->roles);
          //~ foreach ($roles as $parent) {
            //~ $roles = $this->roles[$parent];
            //~ var_dump($roles);
          //~ }
//, $onlyParents = true
//, $onlyParent = FALSE
// osetrit chyby v indexech a za pak reimplementovat do resources!
 //~ if (is_array($privileges)) {
            //~ //var_dump($privileges);
          //~ } else {
            //~ if (is_array($resources)) {
              //~ //pokud je resources pole
//~
            //~ } else {
              //~ //pokud je resources text
              //~ $this->rules[$role][$resources] = array($privileges => self::ALLOW);
            //~ }
          //~ }

          //$this->rules[$roles] = array($resources => array($privileges => self::ALLOW));
          //$this->rules[$roles] = array($resources => array($privileges => self::ALLOW));
//var_dump($resources);
            //~ $this->rules[$role] = array($resources);
//var_dump($resources);
 //~ var_dump($resource);
                //var_dump($privileges);
//~ $this->rules[$role] = $resources;
            //var_dump($resources);
            //var_dump($privileges);
 // dodelat!!
          // upgrade na pole!!
///$this->rules[$role] = array($resource => array($privileges => $type));
//var_dump($this->rules[$parent]);
          //if ($this->rules[$role])
          //return (isset($this->rules[$role][$resource][$privilege]) ? $this->rules[$role][$resource][$privilege] : false);
//protected function setRule($toAdd, $type, $roles, $resources, $privileges, $assertion = NULL)
  //public function getQueriedRole()
        //public function getQueriedResource()

        //---nejake prapodivne vnitrni metody?????
        //private function searchRolePrivileges($all, $role, $resource, $privilege)
        //private function getRuleType($resource, $role, $privilege)
        //private function &getRules($resource, $role, $create = FALSE)
//print_r($this->rules);
          //var_dump($this->rules);
//private function checkRole($role, $need = TRUE)
        //private function checkResource($resource, $need = TRUE)
//'deny';//'allow';  // vratit na true/false!
//var_dump($resource, $privilege);
              //print_r($this->rules);
//var_dump($parent);
//, 'children' => array()'parents' => $parents,
  //rozhranni pro autentifikaci
  //~ interface IAuthenticator {
    //~ //const VERSION = 1.00;
    //~ public function authenticate($credentials);
  //~ }

  //~ interface IAuthorizator {
    //~ //const VERSION = 1.00;
    //~ const ALL = null;
    //~ const ALLOW = true;
    //~ const DENY = false;
    //~ public function isAllowed($role, $resource, $privilege);
  //~ }

  //~ class Permission implements IAuthorizator {
    //~ const VERSION = 1.04;
//~
    //~ private $roles = array();
    //~ private $resources = array();
//~
    //~ private $rules = array(
         //~ 'allResources' => array(
            //~ 'allRoles' => array(
                //~ 'allPrivileges' => array(
                    //~ 'type' => self::DENY,
                    //~ 'assert' => NULL,
                //~ ),
                //~ 'byPrivilege' => array(),
            //~ ),
            //~ 'byRole' => array(),
       //~ ),
        //~ 'byResource' => array(),
    //~ );
//~
    //~ private $queriedRole, $queriedResource;
//~
//~
    //~ public function addRole($role, $parents = null) {
      //~ $this->checkRole($role, FALSE);
      //~ if (isset($this->roles[$role])) {
        //~ throw new ExceptionPermission("Role '$role' already exists in the list.");
      //~ }
//~
     //~ $roleParents = array();
//~
      //~ if ($parents !== NULL) {
        //~ if (!is_array($parents)) {
          //~ $parents = array($parents);
        //~ }
//~
        //~ foreach ($parents as $parent) {
          //~ $this->checkRole($parent);
          //~ $roleParents[$parent] = TRUE;
          //~ $this->roles[$parent]['children'][$role] = TRUE;
        //~ }
      //~ }
//~
      //~ $this->roles[$role] = array(
        //~ 'parents'  => $roleParents,
        //~ 'children' => array(),
      //~ );
//~
      //~ return $this;
    //~ }
//~
    //~ public function hasRole($role) {
      //~ $this->checkRole($role, false);
      //~ return isset($this->roles[$role]);
    //~ }
//~
    //~ private function checkRole($role, $need = true) {
      //~ if (!is_string($role) || $role === '') {
        //~ throw new ExceptionPermission("Role must be a non-empty string.");
      //~ } else
      //~ if ($need && !isset($this->roles[$role])) {
        //~ throw new ExceptionPermission("Role '$role' does not exist.");
      //~ }
    //~ }
//~
    //~ public function getRoles() {
      //~ return array_keys($this->roles);
    //~ }
//~
    //~ public function getRoleParents($role) {
      //~ $this->checkRole($role);
      //~ return array_keys($this->roles[$role]['parents']);
    //~ }
//~
    //~ public function roleInheritsFrom($role, $inherit, $onlyParents = false) {
      //~ $this->checkRole($role);
       //~ $this->checkRole($inherit);
//~
      //~ $inherits = isset($this->roles[$role]['parents'][$inherit]);
//~
      //~ if ($inherits || $onlyParents) {
        //~ return $inherits;
      //~ }
//~
      //~ foreach ($this->roles[$role]['parents'] as $parent => $foo) {
        //~ if ($this->roleInheritsFrom($parent, $inherit)) {
          //~ return true;
        //~ }
      //~ }
//~
      //~ return false;
    //~ }
//~
    //~ public function removeRole($role) {
      //~ $this->checkRole($role);
//~
      //~ foreach ($this->roles[$role]['children'] as $child => $foo) {
        //~ unset($this->roles[$child]['parents'][$role]);
      //~ }
//~
      //~ foreach ($this->roles[$role]['parents'] as $parent => $foo) {
        //~ unset($this->roles[$parent]['children'][$role]);
      //~ }
//~
      //~ unset($this->roles[$role]);
//~
      //~ foreach ($this->rules['allResources']['byRole'] as $roleCurrent => $rules) {
        //~ if ($role === $roleCurrent) {
          //~ unset($this->rules['allResources']['byRole'][$roleCurrent]);
        //~ }
      //~ }
//~
      //~ foreach ($this->rules['byResource'] as $resourceCurrent => $visitor) {
        //~ if (isset($visitor['byRole'])) {
          //~ foreach ($visitor['byRole'] as $roleCurrent => $rules) {
            //~ if ($role === $roleCurrent) {
                //~ unset($this->rules['byResource'][$resourceCurrent]['byRole'][$roleCurrent]);
            //~ }
          //~ }
        //~ }
      //~ }
//~
      //~ return $this;
    //~ }
//~
    //~ public function removeAllRoles() {
      //~ $this->roles = array();
//~
      //~ foreach ($this->rules['allResources']['byRole'] as $roleCurrent => $rules) {
        //~ unset($this->rules['allResources']['byRole'][$roleCurrent]);
      //~ }
//~
      //~ foreach ($this->rules['byResource'] as $resourceCurrent => $visitor) {
        //~ foreach ($visitor['byRole'] as $roleCurrent => $rules) {
          //~ unset($this->rules['byResource'][$resourceCurrent]['byRole'][$roleCurrent]);
        //~ }
      //~ }
//~
      //~ return $this;
    //~ }
//~
    //~ public function addResource($resource, $parent = null) {
      //~ $this->checkResource($resource, false);
//~
      //~ if (isset($this->resources[$resource])) {
        //~ throw new ExceptionPermission("Resource '$resource' already exists in the list.");
      //~ }
//~
      //~ if ($parent !== null) {
        //~ $this->checkResource($parent);
        //~ $this->resources[$parent]['children'][$resource] = true;
      //~ }
//~
      //~ $this->resources[$resource] = array(
        //~ 'parent'   => $parent,
        //~ 'children' => array()
      //~ );
//~
      //~ return $this;
    //~ }
//~
    //~ public function hasResource($resource) {
      //~ $this->checkResource($resource, false);
      //~ return isset($this->resources[$resource]);
    //~ }
//~
    //~ private function checkResource($resource, $need = true) {
      //~ if (!is_string($resource) || $resource === '') {
        //~ throw new ExceptionPermission("Resource must be a non-empty string.");
      //~ } else
      //~ if ($need && !isset($this->resources[$resource])) {
          //~ throw new ExceptionPermission("Resource '$resource' does not exist.");
      //~ }
    //~ }
//~
    //~ public function getResources() {
      //~ return array_keys($this->resources);
    //~ }
//~
    //~ public function resourceInheritsFrom($resource, $inherit, $onlyParent = false) {
      //~ $this->checkResource($resource);
      //~ $this->checkResource($inherit);
//~
      //~ if ($this->resources[$resource]['parent'] === null) {
        //~ return false;
      //~ }
//~
      //~ $parent = $this->resources[$resource]['parent'];
      //~ if ($inherit === $parent) {
        //~ return true;
      //~ } else
      //~ if ($onlyParent) {
        //~ return false;
      //~ }
//~
      //~ while ($this->resources[$parent]['parent'] !== null) {
        //~ $parent = $this->resources[$parent]['parent'];
        //~ if ($inherit === $parent) {
          //~ return true;
        //~ }
      //~ }
//~
      //~ return false;
    //~ }
//~
    //~ public function removeResource($resource) {
      //~ $this->checkResource($resource);
//~
      //~ $parent = $this->resources[$resource]['parent'];
      //~ if ($parent !== null) {
        //~ unset($this->resources[$parent]['children'][$resource]);
      //~ }
//~
      //~ $removed = array($resource);
      //~ foreach ($this->resources[$resource]['children'] as $child => $foo) {
        //~ $this->removeResource($child);
        //~ $removed[] = $child;
      //~ }
//~
      //~ foreach ($removed as $resourceRemoved) {
        //~ foreach ($this->rules['byResource'] as $resourceCurrent => $rules) {
          //~ if ($resourceRemoved === $resourceCurrent) {
            //~ unset($this->rules['byResource'][$resourceCurrent]);
          //~ }
        //~ }
      //~ }
//~
      //~ unset($this->resources[$resource]);
      //~ return $this;
    //~ }
//~
    //~ public function removeAllResources() {
      //~ foreach ($this->resources as $resource => $foo) {
        //~ foreach ($this->rules['byResource'] as $resourceCurrent => $rules) {
          //~ if ($resource === $resourceCurrent) {
            //~ unset($this->rules['byResource'][$resourceCurrent]);
          //~ }
        //~ }
      //~ }
//~
      //~ $this->resources = array();
      //~ return $this;
    //~ }
//~
    //~ public function allow($roles = self::ALL, $resources = self::ALL, $privileges = self::ALL, $assertion = NULL) {
      //~ $this->setRule(true, self::ALLOW, $roles, $resources, $privileges, $assertion);
      //~ return $this;
    //~ }
//~
    //~ public function deny($roles = self::ALL, $resources = self::ALL, $privileges = self::ALL, $assertion = NULL) {
      //~ $this->setRule(false, self::DENY, $roles, $resources, $privileges, $assertion);
      //~ return $this;
    //~ }
//~
    //~ public function removeAllow($roles = self::ALL, $resources = self::ALL, $privileges = self::ALL) {
      //~ $this->setRule(false, self::ALLOW, $roles, $resources, $privileges);
      //~ return $this;
    //~ }
//~
    //~ public function removeDeny($roles = self::ALL, $resources = self::ALL, $privileges = self::ALL) {
      //~ $this->setRule(false, self::ALLOW, $roles, $resources, $privileges);
      //~ return $this;
    //~ }
//~
//~ //OMG proc je to tak debilni reseni?!
    //~ protected function setRule($toAdd, $type, $roles, $resources, $privileges, $assertion = NULL) {
      //~ // ensure that all specified Roles exist; normalize input to array of Roles or NULL
      //~ if ($roles === self::ALL) {
          //~ $roles = array(self::ALL);
//~
      //~ } else {
          //~ if (!is_array($roles)) {
              //~ $roles = array($roles);
          //~ }
//~
          //~ foreach ($roles as $role) {
              //~ $this->checkRole($role);
          //~ }
      //~ }
//~
      //~ // ensure that all specified Resources exist; normalize input to array of Resources or NULL
      //~ if ($resources === self::ALL) {
          //~ $resources = array(self::ALL);
//~
      //~ } else {
          //~ if (!is_array($resources)) {
              //~ $resources = array($resources);
          //~ }
//~
          //~ foreach ($resources as $resource) {
              //~ $this->checkResource($resource);
          //~ }
      //~ }
//~
      //~ // normalize privileges to array
      //~ if ($privileges === self::ALL) {
          //~ $privileges = array();
//~
      //~ } elseif (!is_array($privileges)) {
          //~ $privileges = array($privileges);
      //~ }
//~
      //~ $assertion = $assertion ? new Nette\Callback($assertion) : NULL;
//~
      //~ if ($toAdd) { // add to the rules
          //~ foreach ($resources as $resource) {
              //~ foreach ($roles as $role) {
                  //~ $rules = & $this->getRules($resource, $role, TRUE);
                  //~ if (count($privileges) === 0) {
                      //~ $rules['allPrivileges']['type'] = $type;
                      //~ $rules['allPrivileges']['assert'] = $assertion;
                      //~ if (!isset($rules['byPrivilege'])) {
                          //~ $rules['byPrivilege'] = array();
                      //~ }
                  //~ } else {
                      //~ foreach ($privileges as $privilege) {
                          //~ $rules['byPrivilege'][$privilege]['type'] = $type;
                          //~ $rules['byPrivilege'][$privilege]['assert'] = $assertion;
                      //~ }
                  //~ }
              //~ }
          //~ }
//~
      //~ } else { // remove from the rules
          //~ foreach ($resources as $resource) {
              //~ foreach ($roles as $role) {
                  //~ $rules = & $this->getRules($resource, $role);
                  //~ if ($rules === NULL) {
                      //~ continue;
                  //~ }
                  //~ if (count($privileges) === 0) {
                      //~ if ($resource === self::ALL && $role === self::ALL) {
                          //~ if ($type === $rules['allPrivileges']['type']) {
                              //~ $rules = array(
                                  //~ 'allPrivileges' => array(
                                      //~ 'type' => self::DENY,
                                      //~ 'assert' => NULL
                                      //~ ),
                                  //~ 'byPrivilege' => array()
                                  //~ );
                          //~ }
                          //~ continue;
                      //~ }
                      //~ if ($type === $rules['allPrivileges']['type']) {
                          //~ unset($rules['allPrivileges']);
                      //~ }
                  //~ } else {
                      //~ foreach ($privileges as $privilege) {
                          //~ if (isset($rules['byPrivilege'][$privilege]) &&
                              //~ $type === $rules['byPrivilege'][$privilege]['type']) {
                              //~ unset($rules['byPrivilege'][$privilege]);
                          //~ }
                      //~ }
                  //~ }
              //~ }
          //~ }
      //~ }
      //~ return $this;
    //~ }
//~
    //~ public function isAllowed($role = self::ALL, $resource = self::ALL, $privilege = self::ALL) {
      //~ $this->queriedRole = $role;
      //~ if ($role !== self::ALL) {
          //~ if ($role instanceof IRole) {
              //~ $role = $role->getRoleId();
          //~ }
          //~ $this->checkRole($role);
      //~ }
//~
      //~ $this->queriedResource = $resource;
      //~ if ($resource !== self::ALL) {
          //~ if ($resource instanceof IResource) {
              //~ $resource = $resource->getResourceId();
          //~ }
          //~ $this->checkResource($resource);
      //~ }
//~
      //~ do {
          //~ // depth-first search on $role if it is not 'allRoles' pseudo-parent
          //~ if ($role !== NULL && NULL !== ($result = $this->searchRolePrivileges($privilege === self::ALL, $role, $resource, $privilege))) {
              //~ break;
          //~ }
//~
          //~ if ($privilege === self::ALL) {
              //~ if ($rules = $this->getRules($resource, self::ALL)) { // look for rule on 'allRoles' psuedo-parent
                  //~ foreach ($rules['byPrivilege'] as $privilege => $rule) {
                      //~ if (self::DENY === ($result = $this->getRuleType($resource, NULL, $privilege))) {
                          //~ break 2;
                      //~ }
                  //~ }
                  //~ if (NULL !== ($result = $this->getRuleType($resource, NULL, NULL))) {
                      //~ break;
                  //~ }
              //~ }
          //~ } else {
              //~ if (NULL !== ($result = $this->getRuleType($resource, NULL, $privilege))) { // look for rule on 'allRoles' pseudo-parent
                  //~ break;
//~
              //~ } elseif (NULL !== ($result = $this->getRuleType($resource, NULL, NULL))) {
                  //~ break;
              //~ }
          //~ }
//~
          //~ $resource = $this->resources[$resource]['parent']; // try next Resource
      //~ } while (TRUE); // OMG!
//~
      //~ $this->queriedRole = $this->queriedResource = NULL;
      //~ return $result;
    //~ }
//~
    //~ public function getQueriedRole() {
      //~ return $this->queriedRole;
    //~ }
//~
    //~ public function getQueriedResource() {
      //~ return $this->queriedResource;
    //~ }
//~
    //~ private function searchRolePrivileges($all, $role, $resource, $privilege) {
      //~ $dfs = array(
          //~ 'visited' => array(),
          //~ 'stack' => array($role),
      //~ );
//~
      //~ while (NULL !== ($role = array_pop($dfs['stack']))) {
          //~ if (isset($dfs['visited'][$role])) {
              //~ continue;
          //~ }
          //~ if ($all) {
              //~ if ($rules = $this->getRules($resource, $role)) {
                  //~ foreach ($rules['byPrivilege'] as $privilege2 => $rule) {
                      //~ if (self::DENY === $this->getRuleType($resource, $role, $privilege2)) {
                          //~ return self::DENY;
                      //~ }
                  //~ }
                  //~ if (NULL !== ($type = $this->getRuleType($resource, $role, NULL))) {
                      //~ return $type;
                  //~ }
              //~ }
          //~ } else {
              //~ if (NULL !== ($type = $this->getRuleType($resource, $role, $privilege))) {
                  //~ return $type;
//~
              //~ } elseif (NULL !== ($type = $this->getRuleType($resource, $role, NULL))) {
                  //~ return $type;
              //~ }
          //~ }
//~
          //~ $dfs['visited'][$role] = TRUE;
          //~ foreach ($this->roles[$role]['parents'] as $roleParent => $foo) {
              //~ $dfs['stack'][] = $roleParent;
          //~ }
      //~ }
      //~ return NULL;
    //~ }
//~
    //~ private function getRuleType($resource, $role, $privilege) {
      //~ if (!$rules = $this->getRules($resource, $role)) {
          //~ return NULL;
      //~ }
//~
      //~ if ($privilege === self::ALL) {
          //~ if (isset($rules['allPrivileges'])) {
              //~ $rule = $rules['allPrivileges'];
          //~ } else {
              //~ return NULL;
          //~ }
      //~ } elseif (!isset($rules['byPrivilege'][$privilege])) {
          //~ return NULL;
//~
      //~ } else {
          //~ $rule = $rules['byPrivilege'][$privilege];
      //~ }
//~
      //~ if ($rule['assert'] === NULL || $rule['assert']->__invoke($this, $role, $resource, $privilege)) {
          //~ return $rule['type'];
//~
      //~ } elseif ($resource !== self::ALL || $role !== self::ALL || $privilege !== self::ALL) {
          //~ return NULL;
//~
      //~ } elseif (self::ALLOW === $rule['type']) {
          //~ return self::DENY;
//~
      //~ } else {
          //~ return self::ALLOW;
      //~ }
    //~ }
//~
    //~ private function & getRules($resource, $role, $create = FALSE) {
      //~ $null = NULL;
      //~ if ($resource === self::ALL) {
          //~ $visitor = & $this->rules['allResources'];
      //~ } else {
          //~ if (!isset($this->rules['byResource'][$resource])) {
              //~ if (!$create) {
                  //~ return $null;
              //~ }
              //~ $this->rules['byResource'][$resource] = array();
          //~ }
          //~ $visitor = & $this->rules['byResource'][$resource];
      //~ }
//~
      //~ if ($role === self::ALL) {
          //~ if (!isset($visitor['allRoles'])) {
              //~ if (!$create) {
                  //~ return $null;
              //~ }
              //~ $visitor['allRoles']['byPrivilege'] = array();
          //~ }
          //~ return $visitor['allRoles'];
      //~ }
//~
      //~ if (!isset($visitor['byRole'][$role])) {
          //~ if (!$create) {
              //~ return $null;
          //~ }
          //~ $visitor['byRole'][$role]['byPrivilege'] = array();
      //~ }
//~
      //~ return $visitor['byRole'][$role];
    //~ }
  //~ }

  //~ interface IIdentity {
    //~ //const VERSION = 1.02;
    //~ public function getId();
    //~ public function getRoles();
  //~ }

  //~ class Identity implements IIdentity {
    //~ const VERSION = 1.04;
//~
    //~ private $id;
    //~ private $roles;
    //~ private $data;
//~
    //~ public function __construct($id, $roles = null, $data = null) {
      //~ $this->setId($id);
      //~ $this->setRoles((array) $roles);
      //~ $this->data = (array) $data;
    //~ }
//~
    //~ public function setId($id) {
      //~ //$this->updating();
      //~ $this->id = is_numeric($id) ? 1 * $id : $id;
      //~ return $this;
    //~ }
//~
    //~ public function getId() {
      //~ return $this->id;
    //~ }
//~
    //~ public function setRoles(array $roles) {
      //~ //$this->updating();
      //~ $this->roles = $roles;
      //~ return $this;
    //~ }
//~
    //~ public function getRoles() {
      //~ return $this->roles;
    //~ }
//~
    //~ public function getData() {
      //~ return $this->data;
    //~ }
//~
    //~ public function __set($key, $value) {
      //~ $this->data[$key] = $value;
    //~ }
//~
    //~ public function &__get($key) {
      //~ return $this->data[$key];
    //~ }
//~
    //~ public function __isset($key) {
      //~ return isset($this->data[$key]);
    //~ }
//~ // toto je naprosty omg LOL
    //~ public function __unset($name) {
      //~ unset($this->data[$name]);
    //~ }
  //~ }

  //~ interface IUserStorage {
    //~ //const VERSION = 1.02;
    //~ const MANUAL = 1,
          //~ INACTIVITY = 2,
          //~ BROWSER_CLOSED = 4;
    //~ const CLEAR_IDENTITY = 8;
//~
    //~ public function setAuthenticated($state);
    //~ public function isAuthenticated();
    //~ public function setIdentity(IIdentity $identity = null);
    //~ public function getIdentity();
    //~ public function setExpiration($time, $flags = 0);
    //~ public function getLogoutReason();
  //~ }

  //~ class UserStorage implements IUserStorage {
    //~ const VERSION = 1.18;
//~
    //~ private $handler = null;
    //~ private $section = null;
    //~ private $namespace = null;
//~
    //~ public function __construct(Session $sessionHandler) {
      //~ $this->handler = $sessionHandler;
    //~ }
//~
    //~ public function setAuthenticated($state) {
      //~ $section = $this->getSessionSection(true);
      //~ $section->authenticated = (bool) $state;
//~
      //~ // Session Fixation defence
      //~ $this->handler->regenerateId();
//~
      //~ if ($state) {
        //~ $section->reason = null;
        //~ $section->authTime = time(); // informative value
//~
      //~ } else {
        //~ $section->reason = self::MANUAL;
        //~ $section->authTime = null;
      //~ }
      //~ return $this;
    //~ }
//~
    //~ public function isAuthenticated() {
      //~ $session = $this->getSessionSection(false);
      //~ return $session && $session->authenticated;
    //~ }
//~
    //~ public function setIdentity(IIdentity $identity = null) {
      //~ $this->getSessionSection(true)->identity = $identity;
      //~ return $this;
    //~ }
//~
    //~ public function getIdentity() {
      //~ $session = $this->getSessionSection(false);
      //~ return ($session ? $session->identity : NULL);
    //~ }
//~
    //~ public function setNamespace($namespace) {
      //~ if ($namespace !== $this->namespace) {
        //~ $this->namespace = $namespace;
        //~ $this->section = null;
      //~ }
      //~ return $this;
    //~ }
//~
    //~ public function getNamespace() {
      //~ return $this->namespace;
    //~ }
//~
    //~ public function setExpiration($time, $flags = 0) {
      //~ $section = $this->getSessionSection(true);
      //~ if ($time) {
        //~ $time = DateAndTime::from($time)->format('U');
        //~ $section->expireTime = $time;
        //~ $section->expireDelta = $time - time();
      //~ } else {
        //~ unset($section->expireTime, $section->expireDelta);
      //~ }
//~
      //~ $section->expireIdentity = (bool) ($flags & self::CLEAR_IDENTITY);
      //~ $section->expireBrowser = (bool) ($flags & self::BROWSER_CLOSED);
      //~ $section->browserCheck = true;
      //~ $section->setExpiration(0, 'browserCheck');
      //~ $section->setExpiration($time, 'foo'); // time check
      //~ return $this;
    //~ }
//~
    //~ public function getLogoutReason() {
      //~ $session = $this->getSessionSection(false);
      //~ return ($session ? $session->reason : null);
    //~ }
//~
    //~ protected function getSessionSection($need) {
      //~ if ($this->section !== null) {
        //~ return $this->section;
      //~ }
//~
      //~ if (!$need && !$this->handler->isExists()) {
        //~ return null;
      //~ }
//~
      //~ $this->section = $section = $this->handler->getSection('UserStorage/'.$this->namespace);
//~
      //~ if ($section->authenticated && $section->expireBrowser && !$section->browserCheck) { // check if browser was closed?
        //~ $section->reason = self::BROWSER_CLOSED;
        //~ $section->authenticated = FALSE;
        //~ if ($section->expireIdentity) {
          //~ unset($section->identity);
        //~ }
      //~ }
//~
      //~ if ($section->authenticated && $section->expireDelta > 0) { // check time expiration
        //~ if ($section->expireTime < time()) {
          //~ $section->reason = self::INACTIVITY;
          //~ $section->authenticated = false;
          //~ if ($section->expireIdentity) {
            //~ unset($section->identity);
          //~ }
        //~ }
//~
        //~ $section->expireTime = time() + $section->expireDelta; // sliding expiration
      //~ }
//~
      //~ if (!$section->authenticated) {
        //~ unset($section->expireTime, $section->expireDelta, $section->expireIdentity,
        //~ $section->expireBrowser, $section->browserCheck, $section->authTime);
      //~ }
      //~ return $this->section;
    //~ }
  //~ }

// v budouci dobe hodne moc prekopat, tento system je uplne zbytecne slozity!!!!!!!

  //~ class User {
    //~ const VERSION = 1.20;
//~
    //~ private $user = null; // pozdeji preaplikovat do teto promenne!!!
//~
    //~ public $guestRole = 'guest';
    //~ public $authenticatedRole = 'authenticated';
    //~ public $onLoggedIn;
    //~ public $onLoggedOut;
    //~ private $storage;
//~
    //~ private $authenticator;
    //~ private $authorizator;
    //~ private $context;
//~
//~ // prihlasovani session!
//~ //moznost odhlasovani po zavreni prohlizece a nebo po uplynute dobe
//~
//~ // tady ty tridy!!!
//~ //IAuthenticator
//~ //IAuthorizator
//~ //Identity
//~ //Permission
//~ //SimpleAuthenticator
//~
    //~ public function __construct($storage, $context = null) {
      //~ $this->user = new stdClass;
      //~ $this->user->uloziste = $storage;
      //~ $this->user->context = $context;  //??
//~
      //~ $this->storage = $storage;
      //~ $this->context = $context; // with IAuthenticator, IAuthorizator
    //~ }
//~
    //~ public function getStorage() {
      //~ return $this->storage;
    //~ }
//~
    //~ public function login($id = null, $password = null) {
      //~ $this->logout(true);
      //~ if (!$id instanceof IIdentity) {
        //~ $credentials = func_get_args();
        //~ $id = $this->getAuthenticator()->authenticate($credentials);
      //~ }
//~
      //~ $this->storage->setIdentity($id);
      //~ $this->storage->setAuthenticated(true);
      //~ $this->onLoggedIn($this);
    //~ }
//~
    //~ public function logout($clearIdentity = false) {
      //~ if ($this->isLoggedIn()) {
        //~ $this->onLoggedOut($this);
        //~ $this->storage->setAuthenticated(false);
      //~ }
//~
      //~ if ($clearIdentity) {
        //~ $this->storage->setIdentity(null);
      //~ }
    //~ }
//~
    //~ public function isLogeddIn() {
      //~ return $this->storage->isAuthenticated();
    //~ }
//~
    //~ public function getIdentity() {
      //~ return $this->storage->getIdentity();
    //~ }
//~
    //~ public function getId() {
      //~ $identity = $this->getIdentity();
      //~ return ($identity ? $identity->getId() : null);
    //~ }
//~
    //~ public function setAuthenticator(IAuthenticator $handler) {
      //~ $this->authenticator = $handler;
      //~ return $this;
    //~ }
//~
    //~ public function getAuthenticator() {
      //~ //return $this->authenticator ?: $this->context->getByType('Nette\Security\IAuthenticator');
    //~ }
//~
    //~ public function setExpiration($time, $whenBrowserClosed = true, $clearIdentity = false) {
      //~ $flags = ($whenBrowserIsClosed ? IUserStorage::BROWSER_CLOSED : 0) | ($clearIdentity ? IUserStorage::CLEAR_IDENTITY : 0);
      //~ $this->storage->setExpiration($time, $flags);
      //~ return $this;
    //~ }
//~
    //~ public function getLogoutReason() {
      //~ return $this->storage->getLogoutReason();
    //~ }
//~
    //~ public function getRoles() {
      //~ if (!$this->isLoggedIn()) {
        //~ return array($this->guestRole);
      //~ }
//~
      //~ $identity = $this->getIdentity();
      //~ return $identity && $identity->getRoles() ? $identity->getRoles() : array($this->authenticatedRole);
    //~ }
//~
    //~ public function isInRole($role) {
      //~ return in_array($role, $this->getRoles(), true);
    //~ }
//~
    //~ public function isAllowed($resource = IAuthorizator::ALL, $privilege = IAuthorizator::ALL) {
      //~ $authorizator = $this->getAuthorizator();
      //~ foreach ($this->getRoles() as $role) {
        //~ if ($authorizator->isAllowed($role, $resource, $privilege)) {
          //~ return true;
        //~ }
      //~ }
//~
      //~ return false;
    //~ }
//~
    //~ public function setAuthorizator(IAuthorizator $handler) {
      //~ $this->authorizator = $handler;
      //~ return $this;
    //~ }
//~
    //~ public function getAuthorizator() {
      //~ //return $this->authorizator ?: $this->context->getByType('Nette\Security\IAuthorizator');
    //~ }
  //~ }

  //~ class ExceptionPermission extends Exception {}
  //~ class ExceptionUser extends Exception {}
//~ var_dump($sess);
          //~ $sect = $sess->getSection('pokus1');
          //~ $sect->a = 'b';
          //~ $sect->x = null;
          //~ var_dump($sect->a, $_SESSION, $_COOKIE);
          //~ exit;
      //$s = new Session();
      //$d = new DateAndTime();
      //var_dump($d);
      //$r = new Response();
      //$r->setContentType('text/html');
      //var_dump(headers_list());
      //var_dump(xdebug_get_headers());
      //var_dump($r->getHeader('Content-Type'));
      //var_dump($r->getHeaders());
      //$r->getHeaders();
//~ $servers = array(
    //~ 'kf 1' => array('killingfloor', 'gfdesign.cz', 7710),
    //~ 'kf 2' => array('killingfloor', 'gfdesign.cz', 7712),
    //~ //'mc' => array('minecraft', 25200),
    //~ 'server 1' => array('quake3', '194.109.69.61'),
    //~ 'server 2' => array('cssource', '194.109.69.51', 27015),
    //~ 'server 3' => array('bf2142', '194.109.69.21'),
    //~ 'server 4' => array('ts3', 'voice.planetteamspeak.com')
//~ );
//~
//~ // Call the class, and add your servers.
//~ $gq = new GameQ();
//~ $gq->addServers($servers);
//~
//~ // You can optionally specify some settings
//~ $gq->setOption('timeout', 200);
//~
//~ // You can optionally specify some output filters,
//~ // these will be applied to the results obtained.
//~ $gq->setFilter('normalise');
//~ $gq->setFilter('sortplayers', 'gq_ping');
//~
//~ // Send requests, and parse the data
//~ $results = $gq->requestData();
//~ print_r($results);
//REMOTE_ADDR, REMOTE_PORT, HTTP_USER_AGENT
      $info = $_SERVER['REMOTE_ADDR'].':'.$_SERVER['REMOTE_PORT'].'::'.$_SERVER['HTTP_USER_AGENT'];
      var_dump($info);
//var_dump($this->storage->getRemoteInfo(), $this->getRemoteIdentity());
//++ testnout si ukradnuti session ID! jestli je to zabezpecene...?!
//$authorizator = $this->getAuthorizator();
//~ var_dump($res.'__'.in_array($resource, $this->resources[$res]['parents']));
            //~ foreach ($this->resources[$res]['parents'] as $subres) {
              //~ var_dump($subres);
            //~ }
//~ in_array($resource, $this->resources[$res]['parents'])
var_dump($res);
// je neco proti necemu kdyz jsou v predcich role nebo zdroje napr 2x?
   //~ function onLoggedIn($a) {
        //~ var_dump('prihlaseni', $a);
      //~ }
      //~ function onLoggedOut($a) {
        //~ var_dump('odhlaseni', $a);
      //~ }
// tady nejak dokoncit testy a hlavne este napsat testy nad identity, permission
//~
print_r($acl);
//~ exit;
//print_r($acl);
//vycisteni authorizatoru
    public function clearAuthorizator() {
      $this->authorizator = null;
      return $this;
    }
//~ return true;
            // bud volat takto a nebo nebo jeste jednou vnorit a tam mit osetreni na primou cestu
            //return $this->rules[$role][$resource][$privilege];  //existuje primo
            //return $this->rules[$role][$resource][$privilege];
//~ var_dump('rol: '.$role.', res: '.$resource.', pri: '.$privilege.'->>', isset($this->rules[$role][$resource][$privilege]));
//var_dump('existuje: ', $this->rules[$role][$resource][$privilege], $privilege);
//var_dump('role.res: ', $this->rules[$role][$resource][$privilege], (isset($this->rules[$role][$resource][$privilege]) ?'T' : 'F'));
          //~ var_dump('g:', $this->rules[$role][$resource][$privilege]);
          //~ if (isset($this->rules[$role][$resource][self::ALL])) {
          //~ var_dump($this->rules[$role][$resource][self::ALL]);
          //~ }
          //if ($this->rules[$role][$resource][$privilege])
if (isset($this->rules[$role][$resource][$privilege]) && $this->rules[$role][$resource][$privilege]) {
//hledani v ALL
            //~ var_dump('neexistuje?:', $this->rules[$role][$resource][$privilege]);
            //var_dump('hledani v predcich nebo ALL?');
//if (isset($this->rules[$role][$resource][$privilege]) && $this->rules[$role][$resource][$privilege]) {  //overeni privilege v rules
//&& $this->rules[$role][$resource][self::ALL]) {
//prvni testovat na all a az pak na celou cestu
//~ $a = array('a' => array());
      //~ var_dump('gg:', isset($a['a']), !empty($a['a']));
 //~ if (!isset($this->rules[$role][$resource][$privilege])) {
        //~ if (isset($this->rules[$role][self::ALL][$privilege]) && $this->rules[$role][self::ALL][$privilege]) {
          //~ //pokud ma vsechny resource
          //~ return true;
        //~ } else
        //~ if (isset($this->rules[$role][$resource][self::ALL]) && $this->rules[$role][$resource][self::ALL]) {
          //~ //pokud ma vsechny privilege
          //~ return true;
        //~ } else
        //~ if (isset($this->rules[$role][self::ALL][self::ALL]) && $this->rules[$role][self::ALL][self::ALL]) {
          //~ //pokud ma vsechny resource a privilege
          //~ return true;
        //~ } else
        //~ if (isset($this->rules[self::ALL][self::ALL][self::ALL]) && $this->rules[self::ALL][self::ALL][self::ALL]) {
          //~ return true;
        //~ } else
        //~ if (!isset($this->rules[$role][$resource])) {
          //~ //hledaji se zavislosti v resources
//~
//~ // opravit chytani teto asti podminky!!!!
          //~ $resources = array_keys($this->rules[$role]);
          //~ foreach ($resources as $res) {
            //~ if (in_array($resource, $this->resources[$res]['parents'])) {
              //~ //pokud zdroj existuje
              //~ if (isset($this->rules[$role][$res][self::ALL]) && $this->rules[$role][$res][self::ALL]) {
                //~ //pokud ma aktualni zdroj vse privilegia
                //~ return true;
              //~ } else
              //~ if (isset($this->rules[$role][$res][$privilege]) && $this->rules[$role][$res][$privilege]) {
                //~ //pokud ma aktualni zdroj celou cestu
                //~ return true;
              //~ }
            //~ }
          //~ }
        //~ } else {
          //~ $parents = $this->roles[$role]['parents'];
          //~ //hledaji se zavislosti roli
          //~ foreach ($parents as $parent) {
            //~ if (isset($this->rules[$parent][$resource][$privilege]) && $this->rules[$parent][$resource][$privilege]) {
              //~ return true;
            //~ }
          //~ }
        //~ }
      //~ } else {
        //~ //pokud existuje cela cesta
        //~ return $this->rules[$role][$resource][$privilege];
      //~ }
      //~ return false;
//{
            //return false;
            //var_dump('tu? rol: '.$role.', res: '.$resource.', pri: '.$privilege);
            //~ var_dump('tt:', $this->roles[$role]['parents']);
            //if $this->roles[$role]['parents']
//~ if (!isset($this->roles[$role])) {  //pokud role neexistije
        //~ throw new ExceptionPermission('Role '.$role.' not exists in the list.');
      //~ }
//var_dump('rol: '.$_role.', res: '.$resource.', pri: '.$privilege);
            //return $this->isAllowed($_role, $resource, $privilege);
            //return $this->isAllowed($_role, $resource, $privilege);
            //~ var_dump($this->isAllowed($_role, $resource, $privilege));
//~ if ($this->isAllowed($_role, $resource, $privilege)) {  //hleda true
              //~ $r = true;
            //~ }
$this->assertTrue($acl->isAllowed('registered', 'anketa', 'pokus'));
        $this->assertFalse($acl->isAllowed('registered', 'anketa', 'pokus1'));
        $this->assertTrue($acl->isAllowed('registered', 'cosik', 'pokus'));
        $this->assertTrue($acl->isAllowed('registered', 'cosikX', 'pokus'));

        $this->assertFalse($acl->isAllowed('guest', 'clanek', 'edit'));
        $this->assertTrue($acl->isAllowed('guest', 'anketa', 'vote'));
$acl->deny('guest', 'anketa', 'vote');
        $this->assertFalse($acl->isAllowed('guest', 'anketa', 'vote'));
        $this->assertFalse($acl->isAllowed('guest', 'komentar', 'add'));
        $this->assertTrue($acl->isAllowed('registered', 'clanek', 'view'));

        $this->assertTrue($acl->isAllowed('registered', 'komentar', 'add'));
        $this->assertFalse($acl->isAllowed('registered', 'komentar', 'del'));
        $this->assertTrue($acl->isAllowed('registered', 'komentar', 'edit'));

        $acl->removeAllow('registered', 'komentar', 'add');
        $acl->removeAllow('guest', 'anketa', 'vote');
        $acl->removeAllow('moderator', 'komentar');
        $acl->removeDeny('guest', 'anketa', 'vote');
$this->assertFalse($acl->isAllowed('administrator', 'anketa', 'cokoli'));
        $this->assertTrue($acl->isAllowed('administrator', 'anketa', 'add'));
//~ print_r($acl);
exit;

//~ //~

        $acl->allow('administrator', Permission::ALL);
//~ //~
        $this->assertTrue($acl->isAllowed('administrator', 'clanek', 'view'));
        $this->assertTrue($acl->isAllowed('administrator', 'anketa', 'vote'));
        $this->assertTrue($acl->isAllowed('administrator', 'anketa', 'cokoli'));
        $this->assertTrue($acl->isAllowed('administrator', 'anketa'));
        $this->assertTrue($acl->isAllowed('administrator'));
        $this->assertFalse($acl->isAllowed('moderator', 'komentar', 'cokoli'));
//~
        $acl->removeAllRoles();
        $acl->removeAllResources();
        $acl->removeAllRules();
//~ var_dump($this->rules[$role][self::ALL][self::ALL]);

          //hledani v predcicjh resource

          //var_dump($role);
//hledani ve predcich role
        //~ var_dump('search predek role');
//return $this->isAllowed($role, $resource, $privilege);//foreach ($this->rules[$role])
// jexte osetreni na ALL??
//var_dump($this->isAllowed($role, $res, $privilege));
              //~ return $this->isAllowed($role, $res, $privilege);
//var_dump($this->resources[$resource]['parents']);
//var_dump('search predek resource');
//~ $r = $this->isAllowed($_role, $resource, $privilege);
          //~ var_dump($role.' => '. $r);
          //~ if ($r) { break; }
//zaimplementovat!!!!
      //~ if (!empty($this->rules[$role])) {  //pote prohledava predky resources
        //~ $resources = array_keys($this->rules[$role]);
        //~ foreach ($resources as $res) {
          //~ if (in_array($resource, $this->resources[$res]['parents'])) {
            //~ return $this->isAllowed($role, $res, $privilege);
          //~ }
        //~ }
      //~ }
      //$this->rules[self::ALL][self::ALL][self::ALL]
    //---ACL (staticke ACL)
    //vlastnost uzivatele(moderator,spravce), logicky prvek(polozka,anketa), konkretni cinnost(add,edit,del,hlasovat)-->true/false
    //~ public function isAllowed($role = self::ALL, $resource = self::ALL, $privilege = self::ALL) {

//~ var_dump('rol: '.$role.', res: '.$resource.', pri: '.$privilege);

      //~ if (isset($this->rules[self::ALL][self::ALL][self::ALL])) {
        //~ return $this->rules[self::ALL][self::ALL][self::ALL];
      //~ } else
      //~ if (isset($this->rules[self::ALL][self::ALL][$privilege])) {
        //~ return $this->rules[self::ALL][self::ALL][$privilege];
      //~ } else
      //~ if (isset($this->rules[self::ALL][$resource][$privilege])) {
        //~ return $this->rules[self::ALL][$resource][$privilege];
      //~ } else
      //~ if (isset($this->rules[$role][$resource][self::ALL])) {
        //~ return $this->rules[$role][$resource][self::ALL];
      //~ } else
      //~ if (isset($this->rules[self::ALL][self::ALL][$privilege])) {
          //~ return $this->rules[self::ALL][self::ALL][$privilege];
        //~ } else
        //~ if (isset($this->rules[self::ALL][$resource][$privilege])) {
          //~ //return $this->isAllowed($role, $resource, $privilege);
          //~ return $this->rules[$role][$resource][$privilege];
        //~ } else

      //~ if (isset($this->rules[$role])) { //overeni existence role v rules
//~
        //~ if (isset($this->rules[$role][$resource])) { //overeni resource v rules
//~
          //~ if (isset($this->rules[$role][$resource][self::ALL])) { //overeni privilege v rules
            //~ return $this->rules[$role][$resource][self::ALL]; //konecna hodnota
          //~ } else
          //~ if (isset($this->rules[$role][$resource][$privilege])) {
            //~ return $this->rules[$role][$resource][$privilege];  //konecna hodnota
          //~ } else
          //~ if (!empty($this->roles[$role]['parents'])) {
            //~ $r = false;
            //~ foreach ($this->roles[$role]['parents'] as $_role) {
              //~ $r = $this->isAllowed($_role, $resource, $privilege); //hledani true
              //~ if ($r) { break; }
            //~ }
            //~ return $r;
          //~ }
//~
        //~ } else {
//~
          //~ var_dump('rol: '.$role.', res: '.$resource.', pri: '.$privilege);
//~
          //~ if (isset($this->rules[$role][self::ALL][self::ALL])) {
            //~ return $this->rules[$role][self::ALL][self::ALL];  //konecna hodnota
          //~ } else
          //~ if (isset($this->rules[$role][self::ALL][$privilege])) {
            //~ return $this->rules[$role][self::ALL][$privilege];  //konecna hodnota
          //~ } else
          //~ if (!empty($this->roles[$role]['parents'])) { //prvni prohleda predky role
            //~ $r = false;
            //~ foreach ($this->roles[$role]['parents'] as $_role) {
              //~ $r = $this->isAllowed($_role, $resource, $privilege);
              //~ if ($r) { break; }
            //~ }
            //~ return $r;
          //~ } else
          //~ if (!empty($this->rules[$role])) {  //pote prohledava predky resources
            //~ $resources = array_keys($this->rules[$role]);
            //~ foreach ($resources as $res) {
//~
//~
              //~ if (isset($this->rules[$role][$res][self::ALL])) {
                //~ return $this->isAllowed($role, $res);
              //~ } else
              //~ if (isset($this->rules[$role][self::ALL][self::ALL])) {
                //~ return $this->isAllowed($role);
              //~ } else
              //~ if (isset($this->rules[$role][self::ALL][$privilege])) {
                //~ return $this->isAllowed($role, $res, $privilege);
              //~ } else
              //~ if (in_array($resource, $this->resources[$res]['parents'])) {
                //~ return $this->isAllowed($role, $res, $privilege);
              //~ }
//~
            //~ }
          //~ } else
          //~ if (isset($this->rules[$role][self::ALL][self::ALL])) {
            //~ return $this->rules[$role][self::ALL][self::ALL];
          //~ }
//~
          //~ return false;
        //~ }
//~
      //~ } else {
//~
//~ //var_dump('rol: '.$role.', res: '.$resource.', pri: '.$privilege);
//~
        //~ if (isset($this->rules[self::ALL][self::ALL][self::ALL])) {
          //~ return $this->rules[self::ALL][self::ALL][self::ALL];
        //~ } else
//~
        //~ if (!empty($this->roles[$role]['parents'])) {
          //~ //var_dump($this->roles[$role]['parents']);
          //~ // osetreni na ALL
          //~ $r = false;
          //~ foreach ($this->roles[$role]['parents'] as $_role) {
            //~ $r = $this->isAllowed($_role, $resource, $privilege); //hleda true
            //~ if ($r) { break; }
          //~ }
          //~ return $r;
        //~ }
//~
      //~ }
//~
      //~ return false;
    //~ }
//$id;  //$this->id = is_numeric($id) ? 1 * $id : $id;
    //je opravnen? pouziva pristupy z ACL permission nastavene pres setAuthorizator,
    //testuje pro vsechny vnitrni role aktualniho uzivatele
//vraceni nastavene instance authorizatoru
//overovac pristupu (permission), registrace autorizatoru
//---roles
    //pridani permission role
//existuje role?
//vraceni pole roli
//vraceni predku roli
    //uz asi #3 verze ACL
    //---ACL (staticke ACL)
    //
//pro uplnost nateni pole pravidel
 std::cout << (now->tm_year + 1900) << '-'
         << (now->tm_mon + 1) << '-'
         <<  now->tm_mday
         << std::endl;

    std::cout << asctime(now) << std::endl;
 //~ time_t t = time(0);   // get time now
    //~ struct tm *now = localtime(&t);
    //~ std::cout << (now->tm_year + 1900) << '-'
         //~ << (now->tm_mon + 1) << '-'
         //~ <<  now->tm_mday
         //~ << std::endl;
var_dump(sprintf('sudo %s/iptables.sh %s %s', Config::SCRIPT_DIR, 'enable22for', $p['ip']));
var_dump(substr($_SERVER['REQUEST_URI'], strlen(dirname($_SERVER['SCRIPT_NAME']))), dirname($_SERVER['SCRIPT_NAME']));
var_dump(dirname($_SERVER['SCRIPT_NAME']), substr($_SERVER['REQUEST_URI'], strlen(dirname($_SERVER['SCRIPT_NAME']))));
//~ $xml = new SimpleXMLElement('<moje></moje>');
//~
  //~ $xml->tvoje = 'ahoj';
//~
  //~ foreach (range(0,10) as $index => $row) {
    //~ $xml->slozka->itemy[$index] = $row * 5;
  //~ }
//~
  //~ echo $xml->asXML();
      //~ exit;
//~ $result = array('default_lang' => $th->default_lang,
                      //~ 'language' => $th->language,
                      //~ 'path' => $path,
                      //~ 'list_language' => $th->list_language,
                      //~ 'change' => ($th->default_lang != $th->language));
  // dodelat!!!! ++ opravit!!!
//loadGettext()->isChanged(), bool jestli se aplikoval gettext a nebo ne
    //~ public function isChanged() {
      //~ return ($this->default_lang != $this->language);  //$this->status['change'];
    //~ }
//self::$instance->list_language[self::$instance->language]
//~ $full_codeset = sprintf('%s.%s', $language_code, $codeset);
$this->status = array('default_lang' => $this->default_lang,
                            'language' => $this->language,
                            'path' => $path,
                            'list_language' => $this->list_language,
                            'change' => $this->isChanged());
      //~ $th = self::$instance;
// zapinat tento vypis jen pokud je potreba!
$domain = $this->gettext_domain;
$lang_dir = $this->gettext_dir;
//~ putenv('LC_ALL=de_DE');
          var_dump($language_code);
//'utf8'; //'UTF-8';
zrevidovat tridu jazyku
LoginForm, global text, administration, Connector,
 /*
   * // udelat nasledujici:
   *
   * modul pro login do adminu nebo obecne od chranene sekce
   * u Form, HtmlPage
   */

  //~ $a['a']=7;
  //~ if ($a[80]['x'][5] == 6) {}

  //~ trigger_error("Cannot divide by zero", E_USER_ERROR);
  //~ error_log("Oracle database not available!", 0);

//~ ini_set('browscap', '/var/www/www/svn/goodflow_cook/browscap.ini');
//~ var_dump(ini_get("browscap"));
//~ var_dump(get_browser());
//Core::initBrowscap();
//var_dump(Core::getBrowser());
//~ Loader::setExceptionDir('phpbrowscap');
//~ $b = new phpbrowscap\Browscap(__DIR__);
//~ //var_dump($b->updateCache());
//~ var_dump($b->getBrowser());
//var_dump($b->updateCache());
//~ $browser = get_browser(null, true);
//~ print_r($browser);
//pokud se meni jazyk a je neprazdny jazyk
      //~ if ($this->status['change'] && !empty($this->status['language'])) {
//~ var_dump($lang->getLanguage(), $lang->isChanged());
      //~ var_dump($lang->getDefaultLanguage());
      //~ var_dump($lang->getLanguage());
    private function isLanguageDirExist() {
      if ($this->isChanged()) {
        //
      }
      return $this;
    }
//loadGettext()->setAutoCreate(), vyvtori cestu a soubor s hlavickou
var_dump($lang->getLanguageCodes(), $lang->getLanguageNames());
//ovladaci panel pro jazyky (bud tu pres ten select a nebo odkazy)
    public function getControlPanel($values) {
// callback na nastaveni formulare!
      //$fr = new Form;
      //$fr->addSelect('language', array('values' => $values));
      //$fr->addSubmit('language_button', array('value' => _('change language')));
// pri nejake dalsi prilezitosti dodelat ovladaci panel
// predelat!
/*
      if ($fr->isSubmitted()) {
        //var_dump($_POST);
        //var_dump($fr->language);
        var_dump($fr->getValues());
        //print_r($_POST);
        //Core::setCookie('lang', $fr->language);
        //atd...

        //!!!!!!!! dodelat akceptaci jazyku, pripadne metodu na auto nacitani pro dalsi praci
        //kontrola odeslani, po odeslani ulozit do cookie... atd.. redirekt.. a konec
      }
*/

      //echo $frm->getException();

      //~ return $fr;
    }
    public function destruct() {
      self::$instance = null;
    }
      $langlist = array(
                        'cs' => array('cs_CZ', 'Česky'),
                        'en' => array('en_US', 'Americky'),
                        //~ 'pl' => array('pl_PL', 'Gemblersky'),
                        );

      $lang = Language::getInstance();
      $lang->setListLanguage($langlist)->setDefaultLanguage('cs')->setAutoCreate(true);
      $lang->setLanguage('en');
      $lang->initLanguage();

      //~ echo _('toto je muj uzasny na překlad připravený text žluťoučký kůň ůpěl ďábelské ódy.');
      foreach (range(0, 20) as $row) {
        echo sprintf(ngettext('mám tu %s okno?', 'mám tu %s oken?', $row), $row);
        echo PHP_EOL;
      }
      //~ echo PHP_EOL;
      //~ echo ngettext('toto je násobný počet %s', '', 0);
      //~ echo PHP_EOL;
      //~ echo ngettext('toto je násobný počet %s', '', 1);
      //~ echo PHP_EOL;
      //~ echo ngettext('toto je násobný počet %s', '', 2);
      //~ echo PHP_EOL;
      //~ echo ngettext('toto je násobný počet %s', '', 3);
      //~ echo PHP_EOL;
      //~ echo ngettext('toto je násobný počet %s', '', 4);
      //~ echo PHP_EOL;
      //~ echo ngettext('toto je násobný počet %s', '', 5);
      //~ var_dump(Language::getState());
      //~ var_dump($lang->getLanguage(),
              //~ $lang->getLanguageDir(),
              //~ $lang->getLanguageDomain(),
              //~ $lang->getCodeset()
              //~ );
$cach//->setCache(true)
            ->setCacheExpire('1 day')
            //->setCacheExpire('1 minute')
            //->setExceptionUri(array('a', 'd'))
            ;
/*
var_dump('----------------------');

  //definice tabulek
  class DatabaseHandler extends PDOOpenHelper {

    const ROWID = '_id';
    //suroviny
    const TABLE_SUROVINY = 'suroviny';
    const TABLE_SUROVINY_NAZEV = 'nazev';
    const TABLE_SUROVINY_POPIS = 'popis';

    //kategorie
    const TABLE_KATEGORIE = 'kategorie';
    const TABLE_KATEGORIE_NAZEV = 'nazev';
    const TABLE_KATEGORIE_POPIS = 'popis';

    //jednotky
    const TABLE_JEDNOTKY = 'jednotky';
    const TABLE_JEDNOTKY_NAZEV = 'nazev';
    const TABLE_JEDNOTKY_POPIS = 'popis';

    //recepty
    const TABLE_RECEPTY = 'recepty';
    const TABLE_RECEPTY_NAZEV = 'nazev';
    const TABLE_RECEPTY_POPIS = 'popis';
    const TABLE_RECEPTY_DOBA = 'doba';
    const TABLE_RECEPTY_PORCE = 'porce';
    const TABLE_RECEPTY_NAROCNOST = 'narocnost';
    const TABLE_RECEPTY_AUTOR = 'autor';

    //slozeni
    const TABLE_SLOZENI = 'slozeni';
    const TABLE_SLOZENI_MNOZSTVI = 'mnozstvi';

    public function __construct() {
      //parent::__construct('pokus'); //'nam.sqlite3'
      //parent::__construct('', array('target' => PDOOpenHelper::TARGET_MYSQL));
      //parent::__construct('', array('target' => PDOOpenHelper::TARGET_SQLITE3));
      parent::__construct('pokus', array('target' => PDOOpenHelper::TARGET_MYSQL, 'mysql_driver' => array('host' => 'localhost', 'user' => 'root', 'pass' => 'geniv')));
    }

    public function onCreate(PDODatabase $db) {
      //pro testovaci ucely test na obou db
      switch ($db->getDriverName()) {
        case 'sqlite':
          $create_sql = 'CREATE TABLE IF NOT EXISTS %s (
                        %s INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
                        %s VARCHAR(100) NOT NULL UNIQUE,
                        %s TEXT NULL);';

          //suroviny
          $db->execSQL($create_sql, array(self::TABLE_SUROVINY, self::ROWID,
            self::TABLE_SUROVINY_NAZEV, self::TABLE_SUROVINY_POPIS));

          //kategorie
          $db->execSQL($create_sql, array(self::TABLE_KATEGORIE, self::ROWID,
            self::TABLE_KATEGORIE_NAZEV, self::TABLE_KATEGORIE_POPIS));

          //jednotky
          $db->execSQL($create_sql, array(self::TABLE_JEDNOTKY, self::ROWID,
            self::TABLE_JEDNOTKY_NAZEV, self::TABLE_JEDNOTKY_POPIS));

          //recepty
          $db->execSQL('CREATE TABLE IF NOT EXISTS %s (
              %s INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
              id_%s INT NOT NULL,
              %s VARCHAR(100) NOT NULL UNIQUE,
              %s TEXT NOT NULL,
              %s INT(11) NOT NULL, --\'v minutach\'
              %s INT(11) NOT NULL, --\'pocet porci\'
              %s INT(11) NOT NULL, --\'ciselne hodnoceni\'
              %s TEXT NOT NULL);',
            array(self::TABLE_RECEPTY, self::ROWID, self::TABLE_KATEGORIE,
              self::TABLE_RECEPTY_NAZEV, self::TABLE_RECEPTY_POPIS,
              self::TABLE_RECEPTY_DOBA, self::TABLE_RECEPTY_PORCE,
              self::TABLE_RECEPTY_NAROCNOST, self::TABLE_RECEPTY_AUTOR));

          //slozeni
          $db->execSQL('CREATE TABLE IF NOT EXISTS %s (
              %s INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
              id_%s INT(11) NOT NULL,
              id_%s INT(11) NOT NULL,
              %s FLOAT NOT NULL,
              id_%s INT(11) NOT NULL);',
            array(self::TABLE_SLOZENI, self::ROWID, self::TABLE_SUROVINY,
              self::TABLE_RECEPTY, self::TABLE_SLOZENI_MNOZSTVI,
              self::TABLE_JEDNOTKY));
        break;

        case 'mysql':
          $create_sql = 'CREATE TABLE IF NOT EXISTS `%s` (
                        `%s` INT(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,
                        `%s` VARCHAR(100) NOT NULL UNIQUE,
                        `%s` TEXT NULL) ENGINE = InnoDB;';

          //suroviny
          $db->execSQL($create_sql, array(self::TABLE_SUROVINY, self::ROWID,
            self::TABLE_SUROVINY_NAZEV, self::TABLE_SUROVINY_POPIS));

          //kategorie
          $db->execSQL($create_sql, array(self::TABLE_KATEGORIE, self::ROWID,
            self::TABLE_KATEGORIE_NAZEV, self::TABLE_KATEGORIE_POPIS));

          //jednotky
          $db->execSQL($create_sql, array(self::TABLE_JEDNOTKY, self::ROWID,
            self::TABLE_JEDNOTKY_NAZEV, self::TABLE_JEDNOTKY_POPIS));

          //recepty
          $db->execSQL('CREATE  TABLE IF NOT EXISTS `%s` (
              `%s` INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
              `id_%s` INT NOT NULL,
              `%s` VARCHAR(100) NOT NULL UNIQUE,
              `%s` TEXT NOT NULL,
              `%s` INT(11) NOT NULL COMMENT \'v minutach\' ,
              `%s` INT(11) NOT NULL COMMENT \'pocet porci\' ,
              `%s` INT(11) NOT NULL COMMENT \'ciselne hodnoceni\',
              `%s` TEXT NOT NULL) ENGINE = InnoDB;',
            array(self::TABLE_RECEPTY, self::ROWID, self::TABLE_KATEGORIE,
              self::TABLE_RECEPTY_NAZEV, self::TABLE_RECEPTY_POPIS,
              self::TABLE_RECEPTY_DOBA, self::TABLE_RECEPTY_PORCE,
              self::TABLE_RECEPTY_NAROCNOST, self::TABLE_RECEPTY_AUTOR));

          //slozeni
          $db->execSQL('CREATE TABLE IF NOT EXISTS `%s` (
              `%s` INT(11) NOT NULL PRIMARY KEY AUTO_INCREMENT,
              `id_%s` INT(11) NOT NULL,
              `id_%s` INT(11) NOT NULL,
              `%s` FLOAT NOT NULL,
              `id_%s` INT(11) NOT NULL) ENGINE = InnoDB;',
            array(self::TABLE_SLOZENI, self::ROWID, self::TABLE_SUROVINY,
              self::TABLE_RECEPTY, self::TABLE_SLOZENI_MNOZSTVI,
              self::TABLE_JEDNOTKY));
        break;
      }
    }
  }

  $handle = new DatabaseHandler();
  //$db = $handle->SQLite3()->getWritableDatabase();
  //$db = $handle->MySQL('localhost', 'root', 'geniv')->getDatabase();
  $db = $handle->getDatabase();


  $cur = $db->query(DatabaseHandler::TABLE_SUROVINY, array(DatabaseHandler::ROWID, DatabaseHandler::TABLE_SUROVINY_NAZEV));

  if ($cur->moveToFirst()) {
    do {
      var_dump($cur->getInt(0), $cur->getString(1));
      //var_dump($cur);
    } while ($cur->moveToNext());
  }

  $cur->close();
  $handle->close();
var_dump('----------------------');
*/


  //Debugger::startTime('web');

  //if (Core::checkPHP()) { //Core::isChrome()
    //Debugger::startTime();

    //$weburl = Core::getUrl();


//------------------------------------------------------------------------------
    /**
     * ----develop block----
     *
     * // musi byt multilanguage
     *
     * materials/add+edit+del
     * units/add+edit+del
     * composition/add+edit+del
     * category/add+edit+del
     * recipe/add+edit+del
     * ((recipe/category))
     * search (by materials, by recipe, by category)
     *
     * pravidla:
     * defaultne:
     * action=$1
     * action=$1&itm=$2
     *
     */
//http://geniv-asus.local/www/svn/goodflow_cook/recipe/add

/*
    $routemodel = array('action/subakce/id/di/ouje',
                        'action==recipe/subakce2==blee/idd',
                        'action==recipe/subakce2/id==hu/dii',
                        'action==recipe/subakce2/id',
                        'action==units/subakce3==edit2/editid2==[0-9]+/si',
                        //'action==units/subakce3==edit2/editid2==[a-z]+/si',
                        'action==units/subakce3==edit/editid',
                        'action==units/subakce3/id',
                        );
    var_dump(Route::getUri($routemodel));
*/
//------------------------------------------------------------------------------
        //~ var_dump($_GET, $sweb->getUri());
        //~ $r = new classes\Route();
        //~ var_dump($r->getUri(array('action/sekce')),
        //~ $_SERVER['REQUEST_URI'], $_SERVER['SCRIPT_NAME'], dirname($_SERVER['SCRIPT_NAME']));
//var_dump($_SERVER['SERVER_ADDR']);
      //~ echo PHP_EOL.PHP_EOL.PHP_EOL.'<hr />'.PHP_EOL;
      //~ Debugger::stopTime('cache');
      //~ echo $cach->getCacheInfo();
      //~ echo Debugger::viewTimes();
//~ Debugger::startTime('cache');
      //$cach->clearAllCache();
      //Debugger::startTime('po cache');
var_dump(defined('classes\LightStaticWeb::VERSION'));
define('classes\LightStaticWeb::VERSION', 6.66);
var_dump(defined('classes\LightStaticWeb::VERSION'));
var_dump(LightStaticWeb::VERSION);
//switch ($ur)
        if (isset($uri['action'])) {
          switch ($uri['action']) {
            case 'admin':
              //$a = pages\Admin::getContent();
              //echo ($a);
              // udelat asi v LightStaticWeb
              //metodu ktera prinuti zobrazit konktertni stranku?
              //nebo teda jeste u stranek rozlisovat jestli budou viditelne/skryte???

              // udelat a zabudovat mechanizmus na skryvani stranek!!!!
            break;
          }
        }
// vyresit toto!!!!
      //~ file_put_contents('configure', '# neon file
//~ project_name: GMR mc wiki
//~
//~ a:
	//~ b:f
//~
//~ database:
	//~ driver: oci|mysql|sqlite
	//~ host: xxxhost
	//~ user: xxxuser
	//~ pass: xxxpass
	//~ port: xxxport');
  //~ var_dump(chmod('configure', 0777));
// pripadne rozhrani rozsirit i AdminName, AdminJS, AdminCSS, AdminContent, hlavni trida AdminMenu, AdminTitle, AdminContent
//NEMA smysl rozsirovat do AdminStaticWeb ???
//~ $alg = hash_algos();
      //~ $offset = 4;
      //~ $len = 4; //crypt len
      //~ var_dump($alg, $offset+26 <= count($alg));
      //~ $strarr = str_split($login);
      //~ $h = '';
      //~ for ($i = 0; $i < $len; $i++) {
        //~ if (ord($strarr[$i]) >= 97 && ord($strarr[$i]) <= 122) {
          //~ $ord = ord($strarr[$i]) - 97;
        //~ } else
        //~ if (ord($strarr[$i]) >= 65 && ord($strarr[$i]) <= 90) {
          //~ $ord = ord($strarr[$i]) - 65;
        //~ }
        //~ $h .= hash($alg[$ord + $offset], $pass);
      //~ }
      //~ $h .= md5($login);
      //~ return hash('ripemd320', $h);
//~ $alg = hash_algos();
      //~ $offset = 4;
      //~ $len = 4; //crypt len
      //~ var_dump($alg, $offset+26 <= count($alg));
      //~ $strarr = str_split($login);
      //~ $h = '';
      //~ for ($i = 0; $i < $len; $i++) {
        //~ if (ord($strarr[$i]) >= 97 && ord($strarr[$i]) <= 122) {
          //~ $ord = ord($strarr[$i]) - 97;
        //~ } else
        //~ if (ord($strarr[$i]) >= 65 && ord($strarr[$i]) <= 90) {
          //~ $ord = ord($strarr[$i]) - 65;
        //~ }
        //~ $h .= hash($alg[$ord + $offset], $pass);
      //~ }
      //~ $h .= md5($login);
      //~ return hash('ripemd320', $h);
function cleverHash($login, $pass) {
      $p = $pass;
      for ($i = 0; $i < strlen($login); $i++) {
        $p = hash('sha256', $p);
      }
      $p .= md5($login);
      return hash('ripemd320', $p);
    }
//~ $pass = hash('ripemd160', 'defaultadmin');
      $pass = User::getCleverHash('AdmiN', 'defaultadmin');
var_dump($pass);
//~ $c->moveToFirst();//~ var_dump($c->getInt('iduser'), $c->getString('role'));
      $r = new classes\Route();
      //~ $r->setDefaultUri('');
      $uri = $r->getUri(array('page/sekce/blok/id'));
var_dump($uri);

      if ($uri['page'] == '_admin') {
        //~ Core::setLocation('_admin');
      }
//~ var_dump($login, $pass);  ////
 prihlasovai firmular...
      //->setText('prihlaseni do adminu...')
      dodelat autorizaci proti databazi!!!!
//~ $this->form->attribute['enctype'] = self::MIME_MULTIPART;
 //~ $cach//->setCache(true)
            //~ ->setCacheExpire('5 minute')
            //->setCacheExpire('1 day')
            //->setCacheExpire('1 minute')
      //~ $username = 'admin';
      //~ $password = 'defaultadmin';
      //~ $user->login($username, $password);
      //~ $user->logout(true);
      //~ var_dump($user->isLoggedIn(true));
 //~ $route = new Route;
      //~ $route->setRouteModel($routemodel)
            //~ ->setDefaultUri($defaulturi);
      //~ $this->web->route = $route;
//~ static function getContent($data = null); //obsah stranky
//~ $settings = array('label' => $settings);  // reimplementovat
//substr($_SERVER['REQUEST_URI'], strlen(dirname($_SERVER['SCRIPT_NAME'])) + 1);
var_dump($configure['date_timezone']);
date_default_timezone_set();
      var_dump(date_default_timezone_get());
date_default_timezone_set($configure['date_timezone']);
//~ var_dump(classes\DateAndTime::from('+30 minutes'));
$d = new DateTime('+30 minutes'); // dela problemy na PHP5.4+
var_dump($d);
//~ case self::FILES:
          //~ return $_FILES;
        //~ break;
//~ var_dump('send:'.$this->control['name'], 'send2:'.$this->getMethodValue($this->control['name']), PHP_EOL);
      //~ var_dump($values[$name]);
//~ MAX_FILE_SIZE = ':fileSize',  //maximalni velikost souboru
//~ MIME_TYPE = ':mimeType',  //povolemne mime text,text/pole(text, text)
//~ IMAGE = ':image';
// doaplikovat zbyle rule checkry
//~ // file upload
//~ var_dump($value['type'], array_filter((array)$value['type'], function($t) { return !in_array($t, array(
                          //~ 'image/png',
                          //~ 'image/jpeg',
                          //~ 'image/gif',
                        //~ )); }));
          //~ $result = in_array($value['type'], $image);
var_dump(array_filter((array)$value['type'], $filter_callback));
          //~ $result = empty(array_filter((array)$value['type'], $filter_callback));
//~ var_dump($value['size']);
           $result = (!empty($filter));
          //~ $result = ($arg >= $value['size']);
$c = __CLASS__;
$c = __CLASS__;
$c::PREFIX
$c = __CLASS__;
//~ var_dump(self::$elements[$this->elem->id]['contents']);
      var_dump($text, preg_match('/'.$prefix.'/', $text));
//~ var_dump(self::$elements[$this->elem->id]['contents']);
      $result = $result;
      //~ $callback = function($val, $key, $data) {
        //~ $data['result'][] = $data['elements'][$val]['instance'];
      //~ };
      //~ array_walk(self::$elements[$this->elem->id]['contents'], $callback, array('result' => &$result, 'elements' => self::$elements));
//~ $result = ($arg == $value['type']);
          //~ $result = (!empty($filter));
$error = array();
//~ $c = function($k) {
        //~ $k->checkValidateRule();
        //~ return $k->hasErrors();
      //~ };
      //~ var_dump(array_map($c, $this->form->elements));
$separe_element = function($val, $key, $data) {
//hasErrors getErrors
        //~ var_dump($val->checkValidateRule($key, $val));
        //$data['result'][] =
        $val->checkValidateRule();  //$key, $val
//~ var_dump($key, $val);
        if ($val->hasErrors()) {
          $data['error'] = array_merge($data['error'], $val->getErrors());
        }
      };
//~ var_dump(array_filter($this->form->elements, $call));
//~ var_dump(array_filter($this->form->elements, $call));
//~ exit;
      //~ foreach ($this->form->elements as $k => $v) {
        //~ var_dump($k .'=>'. $v);
      //~ }
      //~ $data = array(
                    //~ 'result' => &$result,
                    //~ 'error' => &$this->form->errors,
                    //~ );
      //~ array_walk($this->form->elements, $separe_element, $data);
//~ var_dump($this->form->errors);
//~ var_dump($v->getErrors());
        //~ var_dump($r);
        //~ var_dump($v->getErrors());
        // = array_merge($r, $v->getErrors());
 //~ $callback_error = function($r) {
        //~ return $r->getErrors();
      //~ };
      //~ $this->form->errors = array_map($callback_error, $filter);
      //~ var_dump($filter);
      //~ $c = function($v, $k) {
        //~ // return $v->getErrors());
      //~ };
      //~ array_walk($fi
      //~ var_dump(array_map('array_values', $filter));
      //(!in_array(false, $result));
//~ $o = array();
      //~ foreach ($filter as $k => $v) {
        //~ $o = array_merge($o, $v->getErrors());
      //~ }
$o = array();var_dump($o);
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>datepicker demo</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
</head>
<body>

<input type="text" id="prvek" />
<div id="datepicker"></div>

<script>
  $( "#datepicker" ).datepicker({ altField: "#prvek", dateFormat: "dd.mm.yyyy" });
</script>

</body>
</html>
//~ var_dump($html);
    //~ $result = '\'.('.$html.').\'';
//~ var_dump($this->replaceModifier(substr($html, 0, $pos)));
var_dump($html);
      //~ var_dump($function, $params);
//~ $_html = $match[1];
          //~ $h = $_html;
          //~ if (preg_match_all('/(\$[a-z_A-Z][^\s]*)/', $_html, $matches)) {
            //~ for ($i = 0; $i < count($matches[1]); $i++) {
                //~ $rep = preg_replace('/\[(\${0,1}[a-zA-Z_0-9]*)\]/', '["$1"]', $matches[1][$i]);
                //~ $rep = preg_replace('/\.(\${0,1}[a-zA-Z_0-9]*)/', '["$1"]', $rep);
                //~ $h = str_replace($matches[0][$i], $rep, $html);
            //~ }
            //~ var_dump($html);
            //~ //parametry?
//~ var_dump($html);
            //~ // if does not initialize a value, e.g. {$a = 1}
            //~ if (!preg_match('/\$.*=.*/', $_html)) {
//~ // no tyjojo to je narez!!
                //~ // escape character
                //~ if (static::$conf['auto_escape'] && $escape)
                //~ //$html = "htmlspecialchars( $html )";
                    //~ $h = "htmlspecialchars( $html, ENT_COMPAT, '" . static::$conf['charset'] . "', FALSE )";
                //~ // if is an assignment it doesn't add echo
                //~ if (true) {
                  //~ $h = '.' . $h.'.';
                //~ }
            //~ }
          //~ }
          //~ $result .= $h;
          //~ $result .= '; $result .=\'';
        //~ } else
// zatim jen promenne a udelat funkcni system, a delat to na generovani do returnu!
//~ var_dump($week);
  //~ echo $tpl;var_dump($name);
//ukladani (cache)
//~ file_put_contents('test_tpl.php', $tpl->render());

//~ var_dump($week);
//nacitani inicializace aktualnich dat...
//~ $name = 'žluťoučký kůň úpěl děbelské sračky';

//~ $week = array(1,2,3,4,5,6);
//~ $key = $value = 'moje value';

//~ $a = include('test_tpl.php');
//~ echo $a;
//~ var_dump($name);
//~ $result .= '\'; '.$counter.'=-1; foreach ('.$var.' as $key => '.$match['key'].') { '.$counter.'++; $result .=\'';
            //~ $result .= '\'; '.$counter.'=-1; foreach ('.$var.' as $key => $value) { '.$counter.'++; $result .=\'';
//~ if (!empty($loopLevel)) {
            //~ $r = array('/(\$key)\b/', '/(\$value)\b/', '/(\$counter)\b/');
            //~ $s = array('${1}' . $loopLevel, '${1}' . $loopLevel, '${1}' . $loopLevel);
            //~ $html = preg_replace($r, $s, $match[0]);
            //~ var_dump($html);
          //~ }

          //~ $result .= '\'; foreach ('.$var.' as $b) { $result .=\'';
else {
        $result = '\';'.$html.'; $result .=\'';  //nejaky vypocet
      }

  //~ private function replaceVarArray($html) {
    //~ if (preg_match_all('/(\$[a-z_A-Z][^\s]*)/', $html, $matches)) {
      //~ for ($i = 0; $i < count($matches[1]); $i++) { //zasazeni kontextu pole
        //~ $rep = preg_replace('/\[(\${0,1}[a-zA-Z_0-9]*)\]/', '["$1"]', $matches[1][$i]);
        //~ $rep = preg_replace('/\.(\${0,1}[a-zA-Z_0-9]*)/', '["$1"]', $rep);
        //~ $html = str_replace($matches[0][$i], $rep, $html);
      //~ }
//~ var_dump($html);
      //~ $html = $this->replaceModifier($html);
      //~ var_dump($html);
    //~ }
//~
    //~ return $html;
  //~ }
//else :$result = '\';'.$html.'; $result .=\'';  //nejaky vypocet
//~ , $loopLevel = null
    //~ if (!empty($loopLevel)) { // dat pryc!
      //~ $r = array('/(\$key)\b/', '/(\$value)\b/', '/(\$counter)\b/');
      //~ $s = array('${1}' . $loopLevel, '${1}' . $loopLevel, '${1}' . $loopLevel);
      //~ $html = preg_replace($r, $s, $html);
    //~ }
// tady ted sablonovaci system podobny jako byl ve starym layoutu!! neco na zpusob unikatnich/duplikatnich
//ale na zpusobu json nebo tak...


//varianta 1)
        //~ $data = array(
                      //~ 'hlavni_header' => Html::p()->setText('a')->setText('b')->add(Html::div(), Html::strong()),
                      //~ );
        //~ $json = json_encode(serialize($data));
//~ echo ($json);
        //~ $dt = unserialize(json_decode($json));
        //~ echo $dt['hlavni_header'];

//varianta 2)
//ulozit jako text s {promenna}
//vkladat 'promenna' => ... zvlast a ten text s {promenna} cachovat a po cachovani brat rovnou ze souboru
//tj ani udelaat to podobne jako smarty... kde se vlastne kod zkompuluje a predava se pak jako cache!!
//az na to ze cele smaty se opet nemuze vytvorit ... ale pouze jeho "klon" s podobnyma vyhodama ale jednodussi

//mela by to byt v podstate editovatelna cache pamet

/*
 * index_main.tpl
 * index_first.tpl
 * index_second.tpl
 * index_unikatni.tpl
 * index_duplikatni.tdp
 *
 */
//vaianta 2a]
  //~ $data = file_get_contents('index_first.tpl');
  //~ var_dump($data);
//~ var_dump(token_get_all($data));
  //~ $search = array(
                  //~ '{$SCRIPT_NAME}',
                  //~ );
  //~ $resplace = array(
                    //~ //$_SERVER['SCRIPT_NAME'],
                    //~ $weburl,
                    //~ );
  //~ var_dump(str_replace($search, $resplace, $data));

//~ RainTPL::
//~ raintpl::configure("cache_dir", "tmp/" );
//varianta 2b]
//RainTPL1
  //~ $tpl = new RainTPL;
  //~ $variable = "Hello World!";
  //~ $tpl->assign("variable", $variable);
//~ var_dump($tpl);
//varianta 2c]
//RainTPL3
  //~ // config
  //~ $config = array(
          //~ "tpl_dir"       => "tpl/",
          //~ "cache_dir"     => ".cache/",
          //~ "debug"         => true // set to false to improve the speed
           //~ );
//~
  //~ Tpl::configure($config);
  //~ require_once('raintpl3/library/Rain/Tpl/Plugin/PathReplace.php');
  //~ Rain\Tpl::registerPlugin( new Rain\Tpl\Plugin\PathReplace() );
  //~ $tpl = new Tpl;
  //~ $tpl->assign("name", "Obi Wan Kenoby");
  //~ $tpl->assign("week", array(
                            //~ "Monday",
                            //~ "Tuesday",
                            //~ "Wednesday",
                            //~ "Thursday",
                            //~ "Friday",
                            //~ "Saturday",
                            //~ "Sunday",
                            //~ )
              //~ );
//~
  //~ $tpl->draw("simple_template");
//~ var_dump($tpl);
//~ echo '<hr><hr>';
// doresut asociaci vnitrcnich promennych!!!!!!
//varianta 3]
//vlastni TPL
//syntax: http://www.raintpl.com/Documentation
//~ public function setCharset($charset = 'UTF-8') {}
    //~ public function setTemplateDir($dir = 'templates/') {}
    //~ public function setTemplateSuffix($suffix = 'tpl') {}
//compile file
  // renderovani rozdelit do nekolika metod!
      //~ file_put_contents('test_tpl.php', $result);
      //~ $this->vars['template_info'] = print_r($this->vars, true);  //reddefinovana promenna
      //~ extract($this->vars); //vlozeni promennych do php z pole
      //~ $result = require 'test_tpl.php';
  //~ var_dump($name);
      //~ var_dump(self::$config);
  // pridat evaluaci promennych!!! ktere byly zadany! protoze systemove nemuzou byt uplne odbre predany!
  //jestli predavat data tak jedine pres to ze se bude pred promenne davat prefix!!!!
  //~ var_dump($this->vars);
      //$this->inBlackList($matches[1]);
//~ ->setHtml($this->page->bodyTemplate)
/**
     * nastaveni body z template
     *
     * @param template vystup templatu
     * @return this
     */
    public function setBodyTemplate($template) {
      $this->page->bodyTemplate = $template;
      $this->page->configure->isBody = true;
      return $this;
    }
$this->page->bodyTemplate = null; //body z template
//$page = new LightHtmlPage(LightHtmlPage::DOCTYPE_HTML4);
//~ $h = Html::p()->setText('a')->setText('b')->add(Html::div(), Html::strong());
//~ var_dump($h->getText(), $h->getHtml(), $h->getChildren());
//{* {$template_info} *}
//->setHtml(LightHtml::br)
                        //->setText($row['name'])
                        //->setText($row['name'])
                        //->setText($row['name'])
                        //->setHtml(LightHtml::br(), 'a')
                        //->setHtml(LightHtml::br, 'a')
                        //->setText(LightHtml::br)
                        //->setText(LightHtml::br())
$template_name = self::$config['tpl_dir'].$this->template_name.'.'.self::$config['suffix'];
      var_dump($template_name);
      //~ if () // predpokladat ze je ve slozce template?
//var_dump(__DIR__);
//include '/var/www/www/svn/phpcore/extensions/phpbrowscap/src/phpbrowscap';
//~ $b = new Browscap(__DIR__);
//~ var_dump($b);
  //~ include 'raintpl/inc/rain.tpl.class.php';
  //~ include "raintpl3/library/Rain/Tpl.php";
//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
// !!!!! bacha pri editaci, je tu cache!!!!!
//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
var_dump($configure['cache']['enabled']);
//~ echo $tpl->render();//->template('uniq_suroviny');
//~ $result = Html::p()->setText('ahoj svete, toto je domovska stranka');
      //~ return $result;
      var_dump($tpl);
//(!$emptypair && $last == 'text' ? '.'.$makeZan : '').
 //~ if (empty($this->template)) {
          //~ die('obsah je zdrejme prazdny!');
        //~ }
//~ $this->render();  //zavolani sama sebe aby se volalo rovnou z cache
        //~ $result = 'probehla kompilace...';
//slozky cache/template/compile template
//cache template se bude v nazvu obsahovat svuj md5_hash_file!
//cache templatu a cache vygenerovaneho html z templatu
//$this->replaceVar($match['variable'], false);NE
            //$this->replaceModifier($match['variable']);  // prehnat pres replaceModifier!!!
// vyresit prenos promennych a spravne vykonavani!!!!! a zarazeni do systemu!!!
    //precte se template, ten se zchrousta, vygeneruje se dotycne php,
    //php se provede a provedeny kod se ulozi do cache!
// doplnit systemove meotdy!
    //~ public function setTemplate($template) { //text|soubor
      //~ $this->template = $template;
      //~ return $this;
    //~ }
    //zatim jen vlastni verze ktera bdue renderovat do textoveho vystupu
//~ var_dump(self::$config['tpl_dir'].$this->template_name.'.'.self::$config['suffix']);
//template/unikatni template/duplikatni template
//zpracovani modifikatoru za |
    //tpl_dir
    //cache_dir
    //debug
//~ return $tpl->render();
////~ $result = $tpl->render();($res_out->getChildren() ? $res_out : ''),
var_dump($attributes['render_depth']);
 + array('render_depth' => $depth)
//~ var_dump($this->elem->depth);//$this->elem->depth
(isset($attributes['depth']) ? $attributes['depth'] : 0);
//: instancni zanoreni
//$html::div()->setDepth(8)->add($html::span());
//echo $html::div(array('depth' => 2))->add($html::span());
//~ echo $form->render(2);
//~ echo $html::div(array('depth' => 2))->add($html::span());
echo $html::div()->setDepth(8)->add($html::span());
//~ $result = Html::div()->id('left')->add(Html::article()->add($form->render()));
//Html::div();
//~ $result->add(Html::span()->setText('špatne udaje'));
            //~ $res_out->add(Html::span()->setText('špatne udaje'));
  //~ $m = array_map(function($r) { return Html::span()->setText($r); }, $form->getErrors());
          //~ $m = array_map(function($r) { return $r; }, $form->getErrors());
          //~ $result->add($m);
          //~ $res_out->add($m);
 + array('depth' => )
// oddelit konfiguraci na DB a globalni konfiguraci!!!!!
// zajistit spravne skladani cesty!
//self::$config['tpl_dir'].$this->template_name.'.'.self::$config['suffix']
// lip to vytvareni slozek ++ kontrola zapisu atd...!
var_dump($name, $hash);
      $name = $sep[0];
      $hash = $sep[1];
$basename = ;
//~ $index = $name.'.'.self::$config['suffix'];
// udelat metodu vnitrne mapujici do json struktury nazvy templatu aby se zajistilo spravne automazani
// udelat mazani konkterni kompilace
//~ var_dump($name);
            //~ $data = json_decode(file_get_contents($map));
      //~ $path = self::$config['compile_dir'].$name.'.'.$data->$name.'.php';
      //~ if (file_exists($path)) {
        //~ @unlink($path); //smazani stareho souboru s cache
      //~ }
//generovani jen z template
// asi taky delat nejakou mapu uzivanych a nevyuzivanych souboru!! aby se ni c zbytecne nehromadilo!!
// uz tady vytvaret tu mapu nad souborama!!! (JSON)
// tento zpusob vyni umoznuje hromadeni kompilovanych sablon!!
 //.':'.$_SERVER['SERVER_ADDR']
var_dump($replace); //// otestovat vyprseni session!!!O dodelat!!!
//~ var_dump($tpl->render('uniq_index.php'));
        //~ $body = $html::div()->id('obal')
                    //~ ->add($html::header()->add(
                                                //~ $html::h1()->add($html::a()->href()->setText('Minecraft CZ wiki')),
                                                //~ $html::h2()->setText('Ceska minecraft wikipedie i o modech')
                                              //~ ),
                          //~ $html::nav()->add($html::ul()->add($index_menu)),  //$sweb->getMenu($menuskel)
                          //~ $html::div()->id('search')->add(
                                                          //~ $html::div()->id('search_obal')->add(
                                                                                              //~ $html::p()->setText('V databázi se nachází %s článků', $pocetClanku),
                                                                                              //~ $index_searchform->render()
                                                                                              //~ )
                                                          //~ ),
                          //~ $html::div()->id('obsah')->add(
                                                        //~ $html::div()->id('middle')->add(
                                                                                        //~ $index_content//$sweb->getContent($maindata)
                                                                                        //~ )
                                                        //~ ),
                          //~ $html::footer()->setHtml('Design by <a href="http://www.d3x.co">D3X</a> | Web power by Guuudfloumasta system <a href="'.$weburl.'admin">admin</a>')  //  doresit admin link
                          //~ );
(array('auto_gen_dir' => false))
//~ $cache->clearAllCache();
/*
        <div id="middle"><div id="left">
  <article>
    <h1>Ahoj</h1>
    <h2>News</h2>
    <p>Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.</p>
    <h2>News</h2>
    <p>Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.</p>
    <div class="popis">
      <div class="podpis">Geniv</div>
    </div>
  </article>
  <article>
    <h1>Ahoj</h1>
    <h2>News</h2>
    <p>Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.</p>
    <h2>News</h2>
    <p>Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.</p>
    <div class="popis">
      <div class="podpis">12.258.125</div>
    </div>
  </article>
</div></div>

      $result = Html::div()->id('left')
									->add(array(Html::article()
													->add(array(
																Html::h1()
																	->settext('Ahoj'),
																Html::h2()
																	->settext('News'),
																Html::p()
																	->settext('Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),
																Html::h2()
																	->settext('News'),
																Html::p()
																	->settext('Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),
																Html::div()->class('popis')
																	->add(Html::div()->class('podpis')
																	->settext('Geniv')
																		),
																)
														),
												Html::article()
													->add(array(
																Html::h1()
																	->settext('Ahoj'),
																Html::h2()
																	->settext('News'),
																Html::p()
																	->settext('Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),
																Html::h2()
																	->settext('News'),
																Html::p()
																	->settext('Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),
																Html::div()->class('popis')
																	->add(Html::div()->class('podpis')
																	->settext('12.258.125')
																		),
																)
														),
												)
										);
      return $result;
      */
,
      classes\Html
var_dump(self::$config['tpl_dir'], self::$config['compile_dir']);
//~ 'cache_dir' => '.cache/',
// slozka pro cache
// bude nejaka prace s cache??
//$body $tpl->template('page_wiki')->render();
      $body = $html::div()->id('obal')->setText('ahoj svete, toto je asi teda admin rozhranni ze ktere ho se jde odhlasit :D')
                          ->setHtml('<br /><a href="?logout">logout</a>')
                          ->setHtml('<br /><a href="../">navrat na web</a>');
echo $body;
//->setGoogleAnalytics('UA-17828373-1')
//~ classes\Route,
      //~ $uri = $_SERVER['REQUEST_URI'];
$_SERVER['REQUEST_URI']
$replace = str_replace('/', '.', $uri);
$this->cache->pathName = $this->cache->pathDir.'/'.md5($contents);
var_dump($this->cache->pathName);
//~ var_dump(md5($contents), $cachefile);
        //~ file_put_contents($cachefile, $contents);
$contents = ; /
//~ ob_end_clean(); //vymazani a vypnuti cache
//~ $contents = ob_get_clean();
//~ var_dump(pathinfo($uri, PATHINFO_EXTENSION)); // utikaji nektere soubory, napr css!
var_dump($maindata['main_index']);
        //~ //url => 'namespace\pageclass'
        $loadpages = array('' => 'pages\Wiki',
                          'mody' => 'pages\Mody',
                          'snapshoty' => 'pages\Snapshoty',
                          'texturepacky' => 'pages\Texturepacky',
                          'servery' => 'pages\Servery',
                          'mapy' => 'pages\Mapy',
                          'tutorialy' => 'pages\Tutorialy',
                          'archiv' => 'pages\Archiv',
                          'o-nas' => 'pages\Onas',

                          'admin' => 'pages\Admin', //visibile=false
                          );
                          $loadpages
//~ var_dump($db);
      //~ $maindata->handle = $handle;
      //~ $maindata->db = $db;
$assign = array(
                        'html' => $html,
                        'form' => $form,
                        'configure' => $configure,
                        'user' => $user,
                        'weburl' => $weburl,
                        );$assign
var_dump($maindata);
var_dump();$maindata['configure']['main_index']['pages']
 menu (pole) prenest z tadima (tu v hlavnim indexu) do konfigu?!
      //menu skeleton
// dodelat!!!!! admin!
      //admin stranky
$tpl;  //assisgn 1/2
$assign = array(
                      'html' => $html,
                      'form' => $form,
                      'configure' => $configure,
                      'user' => $user,
                      'weburl' => $weburl,
                      );
$sweb = new classes\StaticWeb(array('action/sekce'));
//~ var_dump($sect, $sect->identity instanceof IIdentity);exit;
//~ $a = null;
//~ var_dump(!$sect->identity instanceof IIdentity, $sect->authenticated, 'a', $a, !$a);
var_dump('b', $sect->authenticated && $sect->expireBrowser && !$sect->browserCheck);
var_dump('v', $sect->authenticated && $sect->expireDelta > 0);
var_dump('a', !$sect->authenticated);
//~ var_dump($sect->authenticated,$sect->expireBrowser, !$sect->browserCheck);exit;
//~ $sect->setExpiration($time, 'foo'); // time check
//var_dump($sect->expireIdentity, $sect->expireBrowser);
      $aTime = ;
      $eTime = strtotime($configure['session']['expire'], $aTime);
if (!file_exists($path)) {
          die('neexistuje kompilace: '.$path);
        }
//~ $storage->setExpiration($configure['session']['expire']);
      //~ $aTime = $storage->getAuthTime();
      //~ $eTime = strtotime($configure['session']['expire'], $aTime);
//~ var_dump(date('d.m.Y H:i:s', $aTime), $configure['session']['expire'], date('d.m.Y H:i:s', $eTime));  //$sess, $_SESSION,
//~ classes\Form,
      //~ classes\PDOOpenHelper,
      //~ classes\PDODatabase,
      //classes\PDODatabase as PDODatabase,
      //classes\ContentValues as ContentValues
//,'.$matches[2].'
//'base_dir' => '../',
sablonovaci system na bazi syntaxe neon nebo json! s upravou cache kde by to prepisovalo data z cache
vybudovat nastrol ktery bude proti phpcore kontrolovat verze knihoven vuci aktualni zkopirovane funkci
      if ($uri['sekce'] == '?logout') { //odhlaseni
        $user->logout();
        Core::setLocation('../');
      }
      <a href="../">navrat na web</a><br />
/*->setHtml('
        <article>
          <h1>
            Členové týmu
          </h1>
            <h2>
              Geniv
            </h2>
            <p>
              <img src="player.png" />
              Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit. :)
            </p>
            <h2>
              Fajagama (v MC firegame30)
            </h2>
            <p>
              <img src="player.png" />
              Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit. :)
            </p>
            <h2>
              Cipísek
            </h2>
            <p>
              <img src="player.png" />
              Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit. :)
            </p>
        </article>
      ');*///$result;
 $result = Html::div()->id('left')
                  ->add(array(Html::article()
                          ->add(array(
                                Html::h1()
                                  ->settext('O nás'),
                                Html::h2()
                                  ->settext('Kdo jsme a čeho chceme dosahnout?'),
                                Html::p()
                                  ->settext('Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.')
                                )
                            ),
                        Html::article()
                          ->add(array(
                                Html::h1()
                                  ->settext('Členové týmu'),
                                Html::h2()
                                  ->settext('Geniv'),
                                Html::p()
                                  ->add(Html::img()->src('obr/player.png'))
                                  ->settext('Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),
                                Html::h2()
                                  ->settext('Fajagama (v MC firegame30)'),
                                Html::p()
                                  ->add(Html::img()->src('obr/player.png'))
                                  ->settext('Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),
                                Html::h2()
                                  ->settext('Cipísek'),
                                Html::p()
                                  ->add(Html::img()->src('obr/player.png'))
                                  ->settext('Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),
                                )
                            ),
                        )
                    );
//~ $tpl->template('page_tutorialy')->render();

      //~ $result = Html::div()->id('left')
          //~ ->add(array(Html::article()
                        //~ ->add(array(
                            //~ Html::h2()
                              //~ ->settext('tutorial'),
                            //~ Html::p()
                                //~ ->add(Html::a()->href('#')
                                    //~ ->add(Html::img()->src('obr/obr.jpg')))
                              //~ ->settext('Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),
                            //~ Html::div()->class('popis')
                              //~ ->add(array(
                                  //~ Html::h3()
                                    //~ ->settext('Kategorie: ')
                                    //~ ->add(Html::a()->href('#')
                                      //~ ->settext('Redstone')
                                      //~ ),
                                  //~ Html::div()->class('podpis')
                                    //~ ->settext('20.11.2012 , Zblad'),
                                  //~ )
                                //~ ),
                            //~ Html::div()->class('cistvice')
                              //~ ->add(Html::a()->href('#')
                                //~ ->settext(' ->Zobrazit celý článek<- ')),
                              //~ )
                          //~ ),
                //~ Html::article()
                        //~ ->add(array(
                            //~ Html::h2()
                              //~ ->settext('tutorial'),
                            //~ Html::p()
                                //~ ->add(Html::a()->href('#')
                                    //~ ->add(Html::img()->src('obr/obr.jpg')))
                              //~ ->settext('ápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),
//~
                            //~ Html::div()->class('popis')
                              //~ ->add(array(
                                  //~ Html::h3()
                                    //~ ->settext('Kategorie: ')
                                    //~ ->add(Html::a()->href('#')
                                      //~ ->settext('Redstone')
                                      //~ ),
                                  //~ Html::div()->class('podpis')
                                    //~ ->settext('20.11.2012 , Zblad'),
                                  //~ )
                                //~ ),
                            //~ Html::div()->class('cistvice')
                              //~ ->add(Html::a()->href('#')
                                //~ ->settext(' ->Zobrazit celý článek<- ')),
                            //~ Html::div()->id('strankovani')
                              //~ ->add(array(
                                  //~ Html::hr(),
                                  //~ Html::a()->href('#')
                                    //~ ->add(Html::div()->id('next')->title('Další stránka')),
                                  //~ Html::div()->id('list')
                                    //~ ->add(array(
                                        //~ Html::a()->href('#')
                                          //~ ->settext('1'),
                                        //~ Html::a()->href('#')
                                          //~ ->settext('2'),
                                        //~ Html::a()->href('#')
                                          //~ ->class('akt')
                                          //~ ->settext('3'),
                                        //~ Html::a()->href('#')
                                          //~ ->settext('4'),
                                        //~ Html::a()->href('#')
                                          //~ ->settext('5'),
                                          //~ )
                                      //~ ),
                                  //~ Html::a()->href('#')
                                    //~ ->add(Html::div()->id('prev')->title('Předchozí stránka')),
                                    //~ )
                                //~ )
                              //~ )
                          //~ ),
              //~ )
            //~ );//$result;
$result = Html::div()->id('left')
          ->add(array(Html::article()
                        ->add(Html::h1()
                            ->settext('Archiv: Leden 2012')),

                Html::article()
                        ->add(array(
                            Html::h1()
                              ->settext('blas'),
                            Html::h2()
                              ->settext('news'),
                            Html::p()
                              ->settext('K slat mlomněť pešík dil o zlínipa šuňvi kykl gru šraflu slati. V tižly glýni bramíždlflý dis slidi voť v dězru oti a viglyl. Nilkac něpřacluk muznipodi diř hlývape ništ. Tik stydě s hřámrů k člokrá. úmřámípru tkecraňáz tlek, fluděpřo kyňu nito tlyclonij tkýv z de...'),
                            Html::h2()
                              ->settext('news'),
                            Html::p()
                              ->settext('Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),
                            Html::div()->class('podpis')
                              ->settext('20.11.2012 , Zblad'),
                            Html::div()->class('cistvice')
                              ->add(Html::a()->href('#')
                                ->settext(' ->Zobrazit celý článek<- ')),
                              )
                          ),
                Html::article()
                        ->add(array(
                            Html::h1()
                              ->settext('blas'),
                            Html::h2()
                              ->settext('news'),
                            Html::p()
                              ->settext('K slat mlomněť pešík dil o zlínipa šuňvi kykl gru šraflu slati. V tižly glýni bramíždlflý dis slidi voť v dězru oti a viglyl. Nilkac něpřacluk muznipodi diř hlývape ništ. Tik stydě s hřámrů k člokrá. úmřámípru tkecraňáz tlek, fluděpřo kyňu nito tlyclonij tkýv z de...'),
                            Html::h2()
                              ->settext('news'),
                            Html::p()
                              ->settext('Jsme parta nadšenců do hry Minecraft a dalších modifikací, které patří k této hře. Naším cílm je vytvořit Minecraft wikipedii, na které člověk nalezne nejen informace o základním Minecaftu, ale i populárních modifakácích. Tento nápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),
                            Html::div()->class('podpis')
                              ->settext('20.11.2012 , Zblad'),
                            Html::div()->class('cistvice')
                              ->add(Html::a()->href('#')
                                ->settext(' ->Zobrazit celý článek<- ')),
                            Html::div()->id('strankovani')
                              ->add(array(
                                  Html::hr(),
                                  Html::a()->href('#')
                                    ->add(Html::div()->id('next')->title('Další stránka')),
                                  Html::div()->id('list')
                                    ->add(array(
                                        Html::a()->href('#')
                                          ->settext('1'),
                                        Html::a()->href('#')
                                          ->settext('2'),
                                        Html::a()->href('#')
                                          ->class('akt')
                                          ->settext('3'),
                                        Html::a()->href('#')
                                          ->settext('4'),
                                        Html::a()->href('#')
                                          ->settext('5'),
                                          )
                                      ),
                                  Html::a()->href('#')
                                    ->add(Html::div()->id('prev')->title('Předchozí stránka')),
                                    )
                                )
                              )
                          ),
              )
            );$result;
$result = Html::div()->id('left')
          ->add(array(Html::article()
                        ->add(array(
                            Html::h2()
                              ->settext('mapa'),
                            Html::p()
                                ->add(Html::a()->href('#')
                                    ->add(Html::img()->src('obr/obr.jpg')))
                              ->settext('Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),
                            Html::div()->class('popis')
                              ->add(array(
                                  Html::h3()
                                    ->settext('Kategorie: ')
                                    ->add(Html::a()->href('#')
                                      ->settext('Redstone')
                                      ),
                                  Html::div()->class('podpis')
                                    ->settext('20.11.2012 , Zblad'),
                                  )
                                ),
                            Html::div()->class('cistvice')
                              ->add(Html::a()->href('#')
                                ->settext(' ->Zobrazit celý článek<- ')),
                              )
                          ),
                Html::article()
                        ->add(array(
                            Html::h2()
                              ->settext('mapa'),
                            Html::p()
                                ->add(Html::a()->href('#')
                                    ->add(Html::img()->src('obr/obr.jpg')))
                              ->settext('ápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),

                            Html::div()->class('popis')
                              ->add(array(
                                  Html::h3()
                                    ->settext('Kategorie: ')
                                    ->add(Html::a()->href('#')
                                      ->settext('Redstone')
                                      ),
                                  Html::div()->class('podpis')
                                    ->settext('20.11.2012 , Zblad'),
                                  )
                                ),
                            Html::div()->class('cistvice')
                              ->add(Html::a()->href('#')
                                ->settext(' ->Zobrazit celý článek<- ')),
                            Html::div()->id('strankovani')
                              ->add(array(
                                  Html::hr(),
                                  Html::a()->href('#')
                                    ->add(Html::div()->id('next')->title('Další stránka')),
                                  Html::div()->id('list')
                                    ->add(array(
                                        Html::a()->href('#')
                                          ->settext('1'),
                                        Html::a()->href('#')
                                          ->settext('2'),
                                        Html::a()->href('#')
                                          ->class('akt')
                                          ->settext('3'),
                                        Html::a()->href('#')
                                          ->settext('4'),
                                        Html::a()->href('#')
                                          ->settext('5'),
                                          )
                                      ),
                                  Html::a()->href('#')
                                    ->add(Html::div()->id('prev')->title('Předchozí stránka')),
                                    )
                                )
                              )
                          ),
              )
            );$result;
$result = Html::div()->id('left')
      ->add(array(Html::article()
              ->add(array(Html::h1()
                      ->settext('Servery'),
                    Html::h2()
                      ->settext('Pomozte nám rozšířit seznam serverů'),
                    Html::p()
                      ->settext('kontakt .......... '),

                  )
                ),

        Html::article()
              ->add(array(
                Html::p()
                  ->settext('Kliknutím na "Číst více" si můžete přečíst více o konkrétním serveru a podívat se na screenshoty ze serveru.'),
                Html::table()
                  ->add(array(Html::tr()
                          ->add(array(
                              Html::th()
                                ->settext('Název'),
                              Html::th()
                                ->settext('Web:'),
                              Html::th()
                                ->settext('Země:'),
                              Html::th()
                                ->settext(''),
                                )
                            ),
                        Html::tr()
                          ->add(array(
                              Html::td()
                                ->settext('Majnuj'),
                              Html::td()
                                ->add(Html::a()->href('www.majnuj.cz')
                                    ->settext('Majnuj')
                                  ),
                              Html::td()
                                ->settext('CZE'),
                              Html::td()
                                ->add(Html::a()->href('#')
                                    ->settext('Celý článek')
                                  ),
                                )
                            ),
                        Html::tr()->class('alt')
                          ->add(array(
                              Html::td()
                                ->settext('Majnuj'),
                              Html::td()
                                ->add(Html::a()->href('www.majnuj.cz')
                                    ->settext('Majnuj')
                                  ),
                              Html::td()
                                ->settext('CZE'),
                              Html::td()
                                ->add(Html::a()->href('#')
                                    ->settext('Celý článek')
                                  ),
                                )
                            ),
                        Html::tr()
                          ->add(array(
                              Html::td()
                                ->settext('Majnuj'),
                              Html::td()
                                ->add(Html::a()->href('www.majnuj.cz')
                                    ->settext('Majnuj')
                                  ),
                              Html::td()
                                ->settext('CZE'),
                              Html::td()
                                ->add(Html::a()->href('#')
                                    ->settext('Celý článek')
                                  ),
                                )
                            ),
                        Html::tr()->class('alt')
                          ->add(array(
                              Html::td()
                                ->settext('Majnuj'),
                              Html::td()
                                ->add(Html::a()->href('www.majnuj.cz')
                                    ->settext('Majnuj')
                                  ),
                              Html::td()
                                ->settext('CZE'),
                              Html::td()
                                ->add(Html::a()->href('#')
                                    ->settext('Celý článek')
                                  ),
                                )
                            ),
                        )
                    )
                  )
                ),
        )
    );$result;
      $result = Html::div()->id('left')
          ->add(array(Html::article()
                        ->add(array(
                            Html::h2()
                              ->settext('texturepack'),
                            Html::p()
                                ->add(Html::a()->href('#')
                                    ->add(Html::img()->src('obr/obr.jpg')))
                              ->settext('Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),
                            Html::div()->class('popis')
                              ->add(array(
                                  Html::h3()
                                    ->settext('Kategorie: ')
                                    ->add(Html::a()->href('#')
                                      ->settext('Redstone')
                                      ),
                                  Html::div()->class('podpis')
                                    ->settext('20.11.2012 , Zblad'),
                                  )
                                ),
                            Html::div()->class('cistvice')
                              ->add(Html::a()->href('#')
                                ->settext(' ->Zobrazit celý článek<- ')),
                              )
                          ),
                Html::article()
                        ->add(array(
                            Html::h2()
                              ->settext('texturepack'),
                            Html::p()
                                ->add(Html::a()->href('#')
                                    ->add(Html::img()->src('obr/obr.jpg')))
                              ->settext('ápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),

                            Html::div()->class('popis')
                              ->add(array(
                                  Html::h3()
                                    ->settext('Kategorie: ')
                                    ->add(Html::a()->href('#')
                                      ->settext('Redstone')
                                      ),
                                  Html::div()->class('podpis')
                                    ->settext('20.11.2012 , Zblad'),
                                  )
                                ),
                            Html::div()->class('cistvice')
                              ->add(Html::a()->href('#')
                                ->settext(' ->Zobrazit celý článek<- ')),
                            Html::div()->id('strankovani')
                              ->add(array(
                                  Html::hr(),
                                  Html::a()->href('#')
                                    ->add(Html::div()->id('next')->title('Další stránka')),
                                  Html::div()->id('list')
                                    ->add(array(
                                        Html::a()->href('#')
                                          ->settext('1'),
                                        Html::a()->href('#')
                                          ->settext('2'),
                                        Html::a()->href('#')
                                          ->class('akt')
                                          ->settext('3'),
                                        Html::a()->href('#')
                                          ->settext('4'),
                                        Html::a()->href('#')
                                          ->settext('5'),
                                          )
                                      ),
                                  Html::a()->href('#')
                                    ->add(Html::div()->id('prev')->title('Předchozí stránka')),
                                    )
                                )
                              )
                          ),
              )
            );$result;
$result = Html::div()->id('left')
      ->add(array(Html::article()
              ->add(array(Html::h1()
                      ->settext('Snapshoty'),
                    Html::table()
                      ->add(array(
                          Html::tr()
                            ->add(Html::th()
                                ->settext('Obsah')
                              ),
                          Html::tr()
                            ->add(Html::td()
                                ->add(Html::a()->href('#MC14')
                                  ->settext('MC 1.4')
                                )
                              ),
                          Html::tr()
                            ->add(Html::td()
                                ->add(Html::a()->href('#MC14')
                                  ->settext('MC 1.3')
                                )
                              ),
                          Html::tr()
                            ->add(Html::td()
                                ->add(Html::a()->href('#MC14')
                                  ->settext('MC 1.2')
                                )
                              ),
                            )
                        )
                  )
                ),
        Html::article()
              ->add(array(
                Html::h1()
                  ->settext('Weekly snapshot'),
                Html::h2()
                  ->add(Html::a()->name('MC14'))
                  ->settext('Minecraft 1.4'),
                Html::p()
                  ->settext('bnudbnndsgndiougn odiu iuds nmiosn siogn diogndsig '),
                Html::table()
                  ->add(array(Html::tr()
                          ->add(array(
                              Html::th()
                                ->settext('Verze'),
                              Html::th()
                                ->settext('Datum vydání'),
                              Html::th()
                                ->settext('Stáhnout'),
                              Html::th()
                                ->settext(''),
                                )
                            ),
                        Html::tr()
                          ->add(array(
                              Html::td()
                                ->settext('1.4'),
                              Html::td()
                                ->settext('15.01.1820'),
                              Html::td()
                                ->add(array(
                                    Html::a()->href('#')
                                      ->settext('Server'),
                                    Html::a()->href('#')
                                      ->settext('Klient'),
                                      )
                                  ),
                              Html::td()
                                ->add(Html::a()->href('#')
                                    ->settext('Celý článek')
                                  ),
                                )
                            ),
                        Html::tr()->class('alt')
                          ->add(array(
                              Html::td()
                                ->settext('1.4'),
                              Html::td()
                                ->settext('15.01.1820'),
                              Html::td()
                                ->add(array(
                                    Html::a()->href('#')
                                      ->settext('Server'),
                                    Html::a()->href('#')
                                      ->settext('Klient'),
                                      )
                                  ),
                              Html::td()
                                ->add(Html::a()->href('#')
                                    ->settext('Celý článek')
                                  ),
                                )
                            ),
                        Html::tr()
                          ->add(array(
                              Html::td()
                                ->settext('1.4'),
                              Html::td()
                                ->settext('15.01.1820'),
                              Html::td()
                                ->add(array(
                                    Html::a()->href('#')
                                      ->settext('Server'),
                                    Html::a()->href('#')
                                      ->settext('Klient'),
                                      )
                                  ),
                              Html::td()
                                ->add(Html::a()->href('#')
                                    ->settext('Celý článek')
                                  ),
                                )
                            ),
                        Html::tr()->class('alt')
                          ->add(array(
                              Html::td()
                                ->settext('1.4'),
                              Html::td()
                                ->settext('15.01.1820'),
                              Html::td()
                                ->add(array(
                                    Html::a()->href('#')
                                      ->settext('Server'),
                                    Html::a()->href('#')
                                      ->settext('Klient'),
                                      )
                                  ),
                              Html::td()
                                ->add(Html::a()->href('#')
                                    ->settext('Celý článek')
                                  ),
                                )
                            ),
                        )
                    )
                  )
                ),
        )
    );$result;
$result = Html::div()->id('left')->add(array(Html::article()
                        ->add(array(
                            Html::h2()
                              ->settext('tutorial'),
                            Html::p()
                                ->add(Html::a()->href('#')
                                    ->add(Html::img()->src('obr/obr.jpg')))
                              ->settext('Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),
                            Html::div()->class('popis')
                              ->add(array(
                                  Html::div()->class('info')
                                    ->add(array(
                                        Html::div()->class('button')
                                          ->add(Html::a()->href('#')
                                            ->settext('Stahnout MOD')),
                                        Html::div()->class('button')
                                            ->add(Html::a()->href('seznamitemu')
                                            ->settext('Seznam itemů')),
                                          )
                                      ),
                                  Html::h3()
                                    ->settext('Kategorie: ')
                                    ->add(Html::a()->href('#')
                                      ->settext('Redstone')
                                      ),
                                  Html::div()->class('podpis')
                                    ->settext('20.11.2012 , Zblad'),
                                  )
                                ),
                            Html::div()->class('cistvice')
                              ->add(Html::a()->href('#')
                                ->settext(' ->Zobrazit celý článek<- ')),
                              )
                          ),
                Html::article()
                        ->add(array(
                            Html::h2()
                              ->settext('tutorial'),
                            Html::p()
                                ->add(Html::a()->href('#')
                                    ->add(Html::img()->src('obr/obr.jpg')))
                              ->settext('ápad nás napadl v obě kdy sme začali hrát Tekkit a velkým prolémem pro nás bylo zjistit co a jak máme dělet. Oficiální dokumentace k jenotlivím módům byli na desítkách webech, ale nikdy ne na jedno místě. Proto sme se rozhodli vytvořit tento web pro české a slovenské hráče hry Minecraft. Dále pak u nás můžete nalést informace o nových snapshoetch, texturepacích, mapách a další. Doufáme že se vám náš projekt bude líbit.'),

                            Html::div()->class('popis')
                              ->add(array(
                                  Html::div()->class('info')
                                    ->add(array(
                                        Html::div()->class('button')
                                          ->add(Html::a()->href('#')
                                            ->settext('Stahnout MOD')),
                                        Html::div()->class('button')
                                            ->add(Html::a()->href('seznamitemu')
                                            ->settext('Seznam itemů')),
                                          )
                                      ),
                                  Html::h3()
                                    ->settext('Kategorie: ')
                                    ->add(Html::a()->href('#')
                                      ->settext('Redstone')
                                      ),
                                  Html::div()->class('podpis')
                                    ->settext('20.11.2012 , Zblad'),
                                  )
                                ),
                            Html::div()->class('cistvice')
                              ->add(Html::a()->href('#')
                                ->settext(' ->Zobrazit celý článek<- ')),
                            Html::div()->id('strankovani')
                              ->add(array(
                                  Html::hr(),
                                  Html::a()->href('#')
                                    ->add(Html::div()->id('next')->title('Další stránka')),
                                  Html::div()->id('list')
                                    ->add(array(
                                        Html::a()->href('#')
                                          ->settext('1'),
                                        Html::a()->href('#')
                                          ->settext('2'),
                                        Html::a()->href('#')
                                          ->class('akt')
                                          ->settext('3'),
                                        Html::a()->href('#')
                                          ->settext('4'),
                                        Html::a()->href('#')
                                          ->settext('5'),
                                          )
                                      ),
                                  Html::a()->href('#')
                                    ->add(Html::div()->id('prev')->title('Předchozí stránka')),
                                    )
                                )
                              )
                          ),
              )
            );$result;
'toto je havni domovska stranka';//
  //~ int test[2];
  //~ const std::tr1::regex pattern(".*");
  //~ test[0] = 1;
// /usr/include/c++/4.6/bits/c++0x_warning.h:32:2: error: #error This file requires compiler and library support for the upcoming ISO C++ standard, C++0x. This support is currently experimental, and must be enabled with the -std=c++0x or -std=gnu++0x compiler options.
  //~ if (std::tr1::regex_match("anything", pattern) == false) {
    //~ std::cout << ("Pattern does not match.\n") << std::endl;
  //~ }
$_SERVER['REQUEST_URI']
// potresit addlink!!
//~ var_dump($param['mysql_driver'], isset($param['mysql_driver']));
      //~ $defalt_param = array('mysql_driver' => array('port' => null, 'options' => null));
//array('port' => null, 'options' => null)
//$defalt_param,$defalt_param,
var_dump($mysql_driver);var_dump($this->helper->param);
, array('target' => classes\PDOOpenHelper::TARGET_MYSQL, 'mysql_driver' => array('host' => 'muj host', 'user' => 'muj user', 'pass' => 'muj user'))
 //~ foreach ($c as $r) {
            //~ var_dump($r->getInt('idrole'));
            //~ var_dump($r->getString('login'), $r->getInt('iduser'));
          //~ }
var_dump($c);
          //~ while ($c->hasNext()) {
            //~ $r = $c->nextRow();
            //~ var_dump($r->getString('login'), $r->getInt('iduser'));
          //~ }
 //~ var_dump($dbVypis);
          //~ $c = $db->query('roles', array('idrole', 'nazev'));
// dodelat vystup s odkazy na edit a del!
          //~ foreach ($c as $r) {
            //~ var_dump($r->getInt('idrole'));
            //~ var_dump($r->getString('login'), $r->getInt('iduser'));
          //~ }
          //~ $c->close();
var_dump($uniq, );
      $calc =
$uniq = $explode);
// zapracovat odhlasovani!!!! do klasickeho menu, musi mit vlastni stranku!!!!
//array('debug' => $configure['system']['debug'])
////$uri; oddelit admin a index! co se tyce stranek!
//~ var_dump($_SESSION);
// doresit back link!!!! a duplicitu!
// vyhodniceni formulare (insert)//~ var_dump(Core::getRequestUrl(null, -1));
// sql dotaz a smazani radku (delete)
 // vyhodniceni formulare (update)
// nesmi mazat fyzicky ale jen umistit datum do smazano!!!
// vygenerovat a napsat testy!!!!!
//~ $tpl->clear('index_admin');
// parametr na uplny ukli
// pri kompilaci nepouzivat klacisky nazev pro result!!!!
// umoznit vkldani dalsich templates + i cistych include! + moznost vkladat do promenne?!
// musi vkladat zkompilovane v returnu!!!!
                            //~ $__tpl->template($include)->render();
var_dump($include, $matches[1]);var_dump($__tpl->render());
              //~ $result .= '\'.(require "'.$include.'").\'';
--{date="Y-m-d H:i:s M D"}--
--{date=""}--
{*$weburl*}
// tyto konstanty vyhodit!!!!
    const TARGET_SQLITE2 = 'sqlite2'; //v PHP 5.3.x sqlite2 jiz nefunguje!!
    const TARGET_SQLITE3 = 'sqlite3';
    const TARGET_MYSQL = 'mysql';
    //pokud budou i konvencni konektory tak se bude muset do cursoru prenaset helper!
    //const TARGET_MYSQLI = 'mysqli';
    // zustava otazkou jestli tato moznost ma vubec smysl??? pac je to nadbytecnost a zbytecne...?!
      if (isset($options['mysql_driver'])) {  //dpplnovani parametru pro mysql
        $defalt_mysql_driver = array('port' => null, 'options' => null);
        $options['mysql_driver'] = array_merge($defalt_mysql_driver, $options['mysql_driver']);
      }
'mysql_driver' => null, //array('host', 'user', 'pass'[, 'port', 'options'])
'target' => null,
// vyhodit index mysql_driver!! + nastavovani charsetu! pro pripojeni!
* target: mysql, mysql_driver: array('host', 'user', 'pass'[, 'port', 'options'])
switch ($this->helper->param['target']) { // zrejme tak trochu zbytecne
        case self::TARGET_SQLITE2:
          $this->SQLite2('');
        break;
// opravit exception zpravy!!!
        case self::TARGET_SQLITE3:
          $this->SQLite3('');
        break;

        case self::TARGET_MYSQL:
          $mysql_driver = $this->helper->param['mysql_driver'];
          $this->MySQL(
                        $mysql_driver['host'],
                        $mysql_driver['user'],
                        $mysql_driver['pass'],
                        $mysql_driver['port'],
                        $mysql_driver['options']
                      );
        break;
      }
      //parent::__construct('', array('target' => PDOOpenHelper::TARGET_MYSQL));
      //parent::__construct('', array('target' => PDOOpenHelper::TARGET_SQLITE3));
      //parent::__construct('databaze.sqlite3', array('target' => PDOOpenHelper::TARGET_SQLITE3));
      //parent::__construct('pokus', array('target' => PDOOpenHelper::TARGET_MYSQL, 'mysql_driver' => array('host' => 'localhost', 'user' => 'root', 'pass' => '')));
// muze tento static:: vracet bool??
// doimplementovat set+get! + test!
          // tady pokud bude text tak pri prazdnym user a pass bude chyba
          //~ var_dump($host);
    /**
     * nacre pdo konfiguraci
     *
     * @return pdo option
     */
    public function getPdoOption() {
      return $this->helper->param['option'];
    }

    /**
     * dodatecne nastaveni pdo option
     *
     * @param option PDO nastaveni
     * @return this
     */
    public function setPdoOption($option) {
      if (!empty($option)) {
        $this->helper->param['option'] = $option;
      }
      return $this;
    }
    'option' => null, //PDO option
          //~ list($host, $user, $passwd, ,) = $host;
          $_h = $host;
          //~ $host = $_h['host'];
          //~ $user, $passwd, $port
          var_dump($host, $user, $passwd, $port, $options);
          // predani hodnot polem
// dopracovat moznost predani jednim parametrem jako pole s polozkama: array($host, $user, $passwd, $port, $options)
//~ if (is_array($host)) {
          //~ extract($host); //predani promenych php
        //~ } else {
          //~ if (!isset($username)) {
            //~ throw new PDOException('user is not defined!');
          //~ }
          //~ if (!isset($password)) {
            //~ throw new PDOException('password is not defined!');
          //~ }
        //~ }
var_dump($host, $username, $password, $port, $options);
//~ $port = (isset($port) ? $port : 3306);
// udelat poradek s metodama ktere pristupuji do fetchAll nebo jen fetch!!!!
classes\User,
# roles
          //~ $db->execSQL('TRUNCATE roles');
          //~ $db->execSQL('DROP TABLE IF EXISTS `roles` ;');
// instalaci udelat jinak?!
          $sql = 'CREATE  TABLE IF NOT EXISTS `roles` (
                    `idrole` INT NOT NULL AUTO_INCREMENT ,
                    `nazev` VARCHAR(45) NOT NULL ,
                    PRIMARY KEY (`idrole`) ,
                    UNIQUE INDEX `nazev_UNIQUE` (`nazev` ASC) )
                  ENGINE = InnoDB
                  COMMENT = \'role dotycnych administratoru\'';
          $db->execSQL($sql);

          $sql = 'INSERT INTO roles (idrole, nazev) VALUES (1, \'guest\');
                  INSERT INTO roles (idrole, nazev) VALUES (2, \'moderator\');
                  INSERT INTO roles (idrole, nazev) VALUES (3, \'administrator\');';
          $db->execSQL($sql);

          # users
          //~ $db->execSQL('DROP TABLE IF EXISTS `users` ;');

          $sql = 'CREATE  TABLE IF NOT EXISTS `users` (
                    `iduser` INT NOT NULL AUTO_INCREMENT ,
                    `login` VARCHAR(50) NOT NULL ,
                    `hash` VARCHAR(100) NOT NULL ,
                    `description` VARCHAR(500) NULL ,
                    `avatar` VARCHAR(500) NULL ,
                    `idrole` INT NOT NULL ,
                    `pridano` DATETIME NULL ,
                    `upraveno` DATETIME NULL ,
                    `smazano` DATETIME NULL ,
                    PRIMARY KEY (`iduser`) ,
                    INDEX `fk_users_roles_idx` (`idrole` ASC) ,
                    UNIQUE INDEX `login_UNIQUE` (`login` ASC) ,
                    CONSTRAINT `fk_users_roles`
                      FOREIGN KEY (`idrole` )
                      REFERENCES `roles` (`idrole` )
                      ON DELETE NO ACTION
                      ON UPDATE NO ACTION)
                  ENGINE = InnoDB
                  COMMENT = \'tabulka uzivatelu\'';
          $db->execSQL($sql);
          var_dump($dbname ?: null);!empty($dbname) ? $dbname : null
md5_file($pO) === md5_file($pX)
var_dump(classes\Core::getRequestUrl());
var_dump(chmod($destPath, 0777));
        var_dump('?path='.$_GET['path']);
        //~ var_dump($srcPath, $destPath);
//~ $srcPath = 'classes/tpl.php';
//~ if (is_writable($destPath)) {
        //~ } else {
          //~ echo 'nelze zapsat na misto souboru';
        //~ }
var_dump($srcPath, $destPath);
          $callback = function($r) {
            //~ retu
            var_dump($r->nexRow());
          };
          //~ var_dump(array_map($callback, $dbRole));
public function getFetchStyle() {
      // doimplementovat!!!!!
    }

    //php.net/manual/en/pdostatement.fetch.php
    //php.net/manual/en/pdostatement.fetchall.php
    public function setFetchStyle($style) {
      //~ $style
    }
return strval(isset($this->data[$columnIndex]) ? $this->data[$columnIndex] : );
//~ var_dump($r, $r->getString(0));
// doaplikovat!!!!!
// dal test kuzoru! a ruznych iteaci!!!
//~ var_dump($db->insert(DatabaseHandler::TABLE_SUROVINY, $val));
        var_dump($db->insert(DatabaseHandler::TABLE_SUROVINY, $val));
// rozsirit o dalsi parametry++ pri prochazeni radku data stakovat v tride ktera se bude
//starat o cursor data
// lip? resp necim obalit????
//~ var_dump(iterator_to_array($dbRole));
//~ $callback =
//~ $i = iterator_to_array($dbRole);
//~ var_dump($i, $i[1]->getString('nazev'));
//~ $p = array();
//~ foreach ($dbRole as $k) {
//~ $p[$k->getInt('idrole')] = $k->getString('nazev');
//~ }
          $callback = function(&$r) {
            var_dump($r->getInt('idrole'));
            $r[$r->getInt('idrole')] = $r->getString('nazev');
          };
          array_walk($itRoles, $callback);
var_dump($itRoles);
//>$mainClass['user']< / $mainClass->user ?
//bude asi teda pracovat na urovni pole
// zrovna toto by se hodilo umistit do globalni tridy kde by toto bylo na jednom miste, protoze se to bude volat urcite jeste jinde
          //~ $dbRole = $db->query('roles', array('idrole', 'nazev'), null, null, null, null, 'idrole ASC');
          //~ $itRoles = iterator_to_array($dbRole);
          //~ $k_roles = array_map(function($r) { return $r->getInt('idrole'); }, $itRoles);
          //~ $v_roles = array_map(function($r) { return $r->getString('nazev'); }, $itRoles);
          //~ $roles = array_combine($k_roles, $v_roles);
    public function current() {}  // doimplementovat!!!!
    public function key() {}
    public function next() {}
    public function rewind() {}
    public function valid() {}
var_dump(iterator_to_array($mainClass));
return array_values(array_filter(self::$elements[$this->elem->id]['contents'], $filter_html));
var_dump($child);
//~ $child = Html::getElementById($child);
$db_conf['database']['host'],
                    $db_conf['database']['user'],
                    $db_conf['database']['pass'],
                    $db_conf['database']['port']
                    var_dump($db_conf['mysql']);
// musi jit predat do mysql jen: $db_conf['database'] + prepsat indexy!!!!
['host'],
                    $db_conf['database']['user'],
                    $db_conf['database']['pass'],
                    $db_conf['database']['port']
<table></for xmlns="1">
<td><datetime><colgroup>
<id><dd><col>
</table><object>
<hr><base>
// musi jit predat do mysql jen: $db_conf['database']
u uzivatelu vypisovat zbyvajici cas a
var_dump($this->data);
create or replace view cv_4_prescas(jmeno, kolikrat_pracoval, kolikrat_splnil) as
SELECT
  jmeno, count(*) as kolikrat_pracoval, splnene_dny as kolikrat_splnil
FROM A_O_SNEHURCE.trpaslici
  JOIN A_O_SNEHURCE.tezby USING(id_trpaslika)
  JOIN A_O_SNEHURCE.sachty USING(id_sachty)
  JOIN
  (
    SELECT
      id_trpaslika, count(*) as splnene_dny
    FROM A_O_SNEHURCE.trpaslici
      JOIN A_O_SNEHURCE.tezby USING(id_trpaslika)
      JOIN A_O_SNEHURCE.sachty USING(id_sachty)
      JOIN A_O_SNEHURCE.rudy USING(id_rudy)
    WHERE TO_CHAR(a_o_snehurce.tezby.den, 'D') in ('6', '7')
      AND skutecnost >= norma
    GROUP BY id_trpaslika
  )
  USING(id_trpaslika)
WHERE TO_CHAR(a_o_snehurce.tezby.den, 'D') in ('6', '7')
GROUP BY jmeno, splnene_dny;
--create or replace view cv_4_zelezna(pracde, pracovalo_trpasliku, vytezeno, uroven) as
SELECT
  den as pracden, count(id_trpaslika) as pracovalo_trpasliku,
  sum(skutecnost) as vytezeno,
  'špatná' as uroven
FROM A_O_SNEHURCE.tezby
  JOIN A_O_SNEHURCE.sachty USING(id_sachty)
  JOIN A_O_SNEHURCE.rudy USING(id_rudy)
WHERE id_sachty = any
(
  SELECT
    id_sachty
  FROM A_O_SNEHURCE.tezby
    JOIN A_O_SNEHURCE.sachty USING(id_sachty)
    JOIN A_O_SNEHURCE.rudy USING(id_rudy)
  WHERE ruda = 'železná'
)
GROUP BY den
HAVING sum(skutecnost) < 24 OR count(id_trpaslika) < 2

UNION

SELECT
  den as pracden, count(id_trpaslika) as pracovalo_trpasliku,
  sum(skutecnost) as vytezeno,
  'dobrá' as uroven
FROM A_O_SNEHURCE.tezby
  JOIN A_O_SNEHURCE.sachty USING(id_sachty)
  JOIN A_O_SNEHURCE.rudy USING(id_rudy)
WHERE id_sachty = any
(
  SELECT
    id_sachty
  FROM A_O_SNEHURCE.tezby
    JOIN A_O_SNEHURCE.sachty USING(id_sachty)
    JOIN A_O_SNEHURCE.rudy USING(id_rudy)
  WHERE ruda = 'železná'
)
GROUP BY den
HAVING sum(skutecnost) >= 24 AND count(id_trpaslika) > 1;
create or replace view cv_4_nezelezna(den, pracovalo_trpasliku) as
select den, count(id_trpaslika) as pracovalo_trpasliku from A_O_SNEHURCE.tezby
join A_O_SNEHURCE.sachty using(id_sachty)
join A_O_SNEHURCE.rudy using(id_rudy)
WHERE id_sachty = any
(
  SELECT
    id_sachty
  FROM A_O_SNEHURCE.tezby
    JOIN A_O_SNEHURCE.sachty USING(id_sachty)
    JOIN A_O_SNEHURCE.rudy USING(id_rudy)
  WHERE ruda not like('železná')
)
GROUP BY den;
$sql = sprintf('TRUNCATE %s;', DatabaseHandler::TABLE_SUROVINY);
        $db->execSQL($sql);
getDriverName() == 'mysql'
// upravit kontruktor na prijmaji pole!!!! jako je ted put()
var_dump(\PDO::getAvailableDrivers());
// prejmenovat PDOOpenHelper na PDOHelper .. je to hratsi a vystiznejsi!!!!!! + oprava testu na to!
          $db->execSQL('TRUNCATE role');  //vycisteni roli
// vyhodit a nahradut za regulatni inserty!!!!
          $sql = 'INSERT INTO `gmr-hosting`.`role` (`idrole`, `nazev`) VALUES (1, \'guest\');
                  INSERT INTO `gmr-hosting`.`role` (`idrole`, `nazev`) VALUES (2, \'uzivatel: moderator webu\');
                  INSERT INTO `gmr-hosting`.`role` (`idrole`, `nazev`) VALUES (3, \'uzivatel: spravce serveru\');
                  INSERT INTO `gmr-hosting`.`role` (`idrole`, `nazev`) VALUES (4, \'spravce serveru\');
                  INSERT INTO `gmr-hosting`.`role` (`idrole`, `nazev`) VALUES (5, \'hlavni administrator / vlastnik\');';
          $db->execSQL($sql);
/*
INSERT INTO `gmr-hosting`.`spravci` (`idspravce`, `login`, `hash`, `role`, `avatar`, `pridano`, `upraveno`, `smazano`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
          $defadminlogin = 'admin';
          $defadminpass = 'defaultadmin';
          $pass = User::getCleverHash($defadminlogin, $defadminpass);
          $sql = 'INSERT INTO `gmr-hosting`.`spravci` (`idspravce`, `login`, `hash`, `role`, `avatar`, `pridan`, `upraven`, `aktivni`) VALUES (NULL, \''.$defadminlogin.'\', NULL, NULL, NULL, NULL, NULL, NULL);';
          //INSERT INTO users (login, hash, idrole, pridano) VALUES (\'admin\', \''.$pass.'\', 3, NOW())';
          $db->execSQL($sql);

          //~ $sql = '';
          //~ $db->execSQL($sql);

          //~ $sql = '';
          //~ $db->execSQL($sql);
          */
$sql = 'TRUNCATE '.$table;
$pocetClanku = '????';  // nejaky sql
//$pocetClanku,
 var_dump(classes\Configurator::decode($path.'database_config.php'));
      //~ var_dump($this->data['configure']);
 $db_conf = classes\Configurator::decode('database_config.php');
      //~ //obsluha databaze
      //~ $handle = new DBHandler($db_conf['name']);
      //~ $handle->MySQL($db_conf['mysql']);
      //~ //pripojeni k databazi
      //~ $db = $handle->getDatabase($db_conf['autoinstall']);
      //~ $mainClass['db'] = $db;
$configure = $this->data['configure'];
      //~ var_dump($this->__data);
      //~ var_dump($this['db'], $this->db);
    //~ public function __construct($data) {
      //~ parent::__construct($data);
    //~ }
//~ var_dump($mainClass->configure['cache']['enabled']);
      $configure = classes\Configurator::decode('../global_config.php');
      //~ var_dump($configure);
$mainClass['configure'] = $configure;
classes\DateAndTime::setDateTimezone($configure['date_timezone']);  //nastaveni time zony
      //~ $sess = new classes\Session();
      //~ $sess->setExpiration($configure['session']['expire']);
      //~ $storage = new classes\UserStorage($sess);
      //~ $user = new classes\User($storage);
      //~ $mainClass['user'] = $user;  //predani uzivatele
      //~ $mainClass['user_identity'] = $user->getIdentity();  //predani identity uzivatele
        // adresa webu
        $weburl = Core::getUrl();
        $mainClass['weburl'] = $weburl;
$mainClass['tpl'] = $tpl;
      //~ $tpl = new classes\Tpl(array('debug' => $mainClass->configure['system']['debug']));
      //~ $mainClass['tpl'] = $tpl;
//~ var_dump($_SERVER['REQUEST_URI'], strlen(dirname($_SERVER['SCRIPT_NAME'])) + (dirname($_SERVER['SCRIPT_NAME']) != '/' ? 1 : 0), substr($_SERVER['REQUEST_URI'], strlen(dirname($_SERVER['SCRIPT_NAME'])) + (dirname($_SERVER['SCRIPT_NAME']) != '/' ? 1 : 0)));
var_dump($_SERVER['REQUEST_URI'], $_SERVER['SCRIPT_NAME']);
// + $configure
var_dump($conf+ $configure);
classes\Core,
//~ echo Html::div()->add($sweb->getMenu($menuskel));
var_dump($sweb->getMenu($menuskel));
//"\nT;\n".$cmrs.' .= gettext("'.$message.'"); '.$cmrs." .= <<<T\n";
$html = $this['html'];

$a = array(1, 2, 3);  // skusit predelat na TPL!
$r .= <<< T
-//~ "" aaaho  \' 'j  a ů"a aů" \"' ' sdsd ''
"" {strlen($a[1])}....
T;
foreach($a as $d){ $r .= $d; }
$r .= <<<T
sdsd{$html::span()->class('ss')}g
T;
$r.= <<<T
T;
$r.= <<<T
ass
n"1\'
n'2\"
a
T;
$r.='ahojjj+'.<<<T1
+...nejaky text cozy text s " a ' a vubec...
T1;
$r.= <<<T
neco takove
T;
echo $r;
//~ var_dump($ss, $this->web->url, '--------------- '.$datas['level']);
//~ var_dump(explode('/', $curr) == $ss);
//~ var_dump($ss[$datas['level'] - 1]);
//~ var_dump($this->web->url[$datas['level']]);
//~ var_dump($curr == $_url);
//~ var_dump($this->web->route->getUri());
//~ var_dump($this->web->url,$ss, ' - '.strval($this->web->url[$datas['level']] == $ss[$datas['level']]));
//~ 'ss' => $ss,
//~ var_dump($this->web->url[$datas['postlevel']] , $url_merge[$datas['postlevel']], $datas['postlevel']);
//~ var_dump($this->web->page, $url);
var_dump($url_merge[$datas['postlevel']], $url);
'mergeurl' => $url_merge,
var_dump(array_slice($url_merge, 0, count($merge_filter)) ==
        array_slice($this->web->url, 0, count($merge_filter)),
        '-------------------------'
        ); //, array_slice($this->web->url, 0, count($merge_filter))
//~ var_dump(isset($slice_merge).' vs '.(!empty($slice_merge)));
            //~ var_dump((!empty($slice_merge) && !empty($slice_url) && $slice_merge == $slice_url), '................');
            var_dump($curr, $_url, '............');

//~ var_dump(array_slice($url_merge, 0, count($merge_filter)), array_slice($this->web->url, 0, count($merge_filter)), ',,,,,,.....................');
//~ var_dump(count($this->web->url));
//~ 'arrayurl' => $this->web->url,
                        //~ 'activeurl' => $url,
                        //~ 'active' => ($curr == $_url),
//~ var_dump($row['poc']['local'][0]);
            //~ var_dump($row['count']['local'][0]);
            //~ var_dump($row['level']);
            //~ var_dump($row['menu']);// doresit!!!
            //~ var_dump($row['poc']['local'][1].' - '.$row['count']['local'][1]);
            //~ var_dump($row['subactive']);
            //~ var_dump($row['url'], $row['activeurl'], $row['arrayurl'][$row['level']] == $row['activeurl']);
            //~ var_dump($row['arrayurl'][0] == (isset($row['ss'][$row['level']-1]) ? $row['ss'][$row['level']-1] : null), $row['activeurl'], '---------------');
            //~ print_r($row);//~ ->class($row['acturl'][$row['level']] == )
// zakladani definici vyhledavaciho formulare
//~ $searchform = new $form;
//~ $searchform->addSearch('global-search', array('size' => 16, 'placeholder' => 'Hledat'))
//~ ->addSubmit('global-search-submit', array('class' => 'button', 'value' => 'Vyhledat'));
//->assign($mainClass->toArray())
//~ 'index_searchform' => $searchform,
//~ 'index_pocetClanku' => 0,
//~ 'postlevel' => 0, //~ $datas['postlevel']++;
var_dump(count($source) - 1);
var_dump($row['poc']['local'][0].'--'. $row['count']['local'][0]."\n");
var_dump($row['poc']['local'][0].'--'. $row['count']['local'][0]."\n");
/*
      if (navigator.userAgent.toLowerCase().indexOf("chrome") >= 0) {
        $(window).load(function(){
          $('input:-webkit-autofill').each(function(){
            var text = $(this).val();
            var name = $(this).attr('name');
            $(this).after(this.outerHTML).remove();
            $('input[name=' + name + ']').val(text);
          });
        });
      }
      */
      //~ $p = array(
                  //~ $form::CALLBACK_LABEL => function($r) {
                    //~ $submit = ($r['type'] == 'addSubmit');
                    //~ $elem = $r['element']->class($submit ? null : 'w_def_text');
                    //~ return $r['html']::label()->add($r['label'] ? $r['html']::h3()->setText($r['label']) : null)
                                              //~ ->add($submit ? $elem : $r['html']::div()->class('field')->add($elem))
                                              //~ ->add($submit ? null : $r['html']::div()->class('clear'));
                  //~ }
                //~ );
//~
      //~ $group = function($r) {
        //~ return $r['html']::fieldset()->add($r['html']::div()->class('block_contact_form')->add($r['elements']));
      //~ };
//~
      //~ $f = new $form($p);
      //~ $f->getCurrentGroup()->setCallback($form::CALLBACK_FIELDSET, $group);
->addTextArea('textik_pokusny', 'Textik')
/*
              <form action="" method="post">
                <fieldset>
                  <label>
                    <span>Login</span>
                    <input type="text" name="login" />
                  </label>
                  <label>
                    <span>Heslo</span>
                    <input type="password" name="heslo" />
                  </label>
                  <label>
                    <input value="Přihlásit se" type="submit" name="login-submit" />
                  </label>
                </fieldset>
              </form>



<a href="#" class="generic_button w_arrow blue"><span><span>Big button</span></span></a>


				<div class="span3">
					<section class="contact_form">
						<h3>Contact form</h3>

						<div class="field"><input type="text" class="w_def_text" title="Your Name"></div>
						<div class="field"><input type="text" class="w_def_text" title="Your E-Mail"></div>
						<div class="textarea"><textarea cols="1" rows="1" class="w_def_text" title="Message"></textarea></div>
						<a href="#" class="generic_button long"><span>Send</span></a>
						<div class="clear"></div>
					</section>
				</div>




	<div class="block_contact_form">
		<h2>Contact Form</h2>

		<div class="field"><input type="text" class="w_def_text" title="Your Name*"></div>
		<div class="field"><input type="text" class="w_def_text" title="Your E-Mail*"></div>
		<div class="field"><input type="text" class="w_def_text" title="Your Website*"></div>
		<div class="textarea"><textarea cols="1" rows="1" class="w_def_text" title="Message"></textarea></div>
		<a href="#" class="generic_button"><span>Send Message</span></a>
		<div class="clear"></div>
	</div>
*/


?>
//~ $textarea = ($r['type'] == 'addTextArea');
//$textarea ? 'textarea' : 'field'
//->class($submit ? null : 'w_def_text');
        // role
        //~ $cont = array(
                      //~ 1 => 'spravce serveru',
                      //~ 2 => 'hlavni administrator',
                      //~ );
//~
        //~ $db->truncate('spravci_role');
        //~ foreach ($cont as $k => $v) {
          //~ $content = new classes\ContentValues;
          //~ $content->put('idrole', $k)
                  //~ ->put('nazev', $v);
          //~ $db->insert('spravci_role', $content);
        //~ }
var_dump();$data['spravce_identity']->getId()
                //~ ->addSelect('role')
                  //~ ->setItems($roles)
          //~ $dbVypis = $db->rawQuery('SELECT idspravce, login, pridano, upraveno
                                    //~ FROM spravci WHERE smazano IS NULL;');
//~ $roles = $data->getUserRoles();
                      ->put('hash', $user::getCleverHash($val['login'], $val['hash']))
                      ->put('idrole', $val['role'])
                                     $oldHash = $d->getString('hash');
                  $newHash = $user::getCleverHash($login, $oldHash);
                  var_dump($oldHash, $newHash);
   $res = $db->delete('users', 'iduser=?', array($id));
                if ($res > 0) {
                  $result = 'uživatel: '.$login.' smazan';
                  Core::setRefresh(1, $backUrl);
                }
//~
              $roles = $data->getUserRoles();
                    ->addSelect('role')
                      ->setItems($roles)
//~
              $roles = $data->getUserRoles();
                    ->addSelect('role')
                      ->setItems($roles)
$c = new classes\ContentValues($cont);
        $c->putDate('pridano');
        $cont = array('login' => 'geniv',
                      'hash' => 'dd3007f5f786302eafa5298ee1efc629f34c339ff4b9a7134b4');
var_dump($credentials, $login, $pass, $hash);exit;
        $db->truncate('spravci');
        $db->insert('spravci', $c);
var_dump();

      $staty = array(
                      'cz' => 'Česká republika',
                      'sk' => 'Romanov',
                      'pl' => 'Bladov',
                      'gb' => 'Bandrejov OMG',
                    );
var_dump($mainClass['user']->isLoggedIn(true));
      // user autorizace.... atp..!!
      //~ $this['session'] = $sess;
      //~ $this['storage'] = $storage;
      //~ var_dump($uri['sekce'], $identity->getData('login'), $identity->getId());
            //~ var_dump($user);
      //~ var_dump($data['staticweb_uri']);

toto je admin stranka sprava uživatelů

{if="!$url_blok"}
<a href="{$addLink}">přidat uživatele</a>
{/if}

{if="$url_blok=='add'"}
toto je přidávní uživatelů!
{/if}

{$output}
{loop="$formOut"}<span>{$value}</span>{/loop}

{if="$dbVypis"}
<ul>{loop="$dbVypis"}
  <li>
    {$value->getString('login')}
    {$value->getString('role')}
    {$value->getString('pridano')}
    {$value->getString('upraveno')}
    <a href="{$editLink}/{$value->getString('idspravce')}">editorvat</a>
    <a href="{$delLink}/{$value->getString('idspravce')}" onclick="return confirm(\'opravdu smazat uživatele  {$value->getString('login')} ??\')">smazat</a>
  </li>
{else}
no to je fejlicek nooo, proste nic tu neni nooo...
{/loop}</ul>
{/if}



{*function="print_r($dbVypis, true)"*}
{*$result*}


$this['spravce_identity'] = $spravce->getIdentity();  //predani identity uzivatele
// index spravce_identity odelat!
// prekopat!!!
      $p = array(
                $form::CALLBACK_LABEL => function($r) {
                  return $r['html']::label()->add($r['label'] ? $r['html']::span()->setText($r['label']) : null)->add($r['element']); }
                );

      $frm = new $form($p);
var_dump(inet_ntop(inet_pton($_SERVER['REMOTE_ADDR'])), inet_ntop(inet_pton('0000:0000:0000:0000:0000:0000:192.168.0.1')));
//~ var_dump($dbVypis);
var_dump(count($dbVypis));
          //~ var_dump(sizeof($dbVypis));
// spatne detekuje prazdny cyklus!!! probledm TPL a kolize s count v PDO!

//~ var_dump($dbVypis instanceof \Traversable); //pokud je ptrazdna tabulka musi ju umet detekovat!!!!
//~ var_dump(isset($dbVypis) && ( is_array($dbVypis) || $dbVypis instanceof Traversable ) && sizeof($dbVypis));

//if( isset($newvar) && ( is_array($newvar) || $newvar instanceof Traversable ) && sizeof($newvar) )
          //~ var_dump(isset($dbVypis) && (is_array($dbVypis) || $dbVypis instanceof \Traversable) && count($dbVypis));
          //~ if (isset($dbVypis) && (is_array($dbVypis) || $dbVypis instanceof \Traversable) && !empty($dbVypis)) {
            //~ foreach ($dbVypis as $k => $v) {
              //~ var_dump($k, $v);
            //~ }
          //~ } else {
            //~ var_dump('nic');
          //~ }
//~ Core::setLocation($backUrl);
var_dump($c);

//~ var_dump($val, $spravce->getIdentity()->getId());
                //~ ->put('hash', User::getCleverHash($val['login'], $val['hash']))
                //~ ->putDate('pridano');
//~ var_dump($dbVypis);
          //~ $arr=array();
          //~ var_dump($dbVypis->current());
          //~ var_dump($dbVypis instanceof \Iterator ? $dbVypis->rewind() || $dbVypis->valid() : true);
          //~ var_dump(($dbVypis->rewind()?:true));
          //~ var_dump(($dbVypis->rewind()?:true), $dbVypis->valid());
//~ var_dump('out2:');var_dump('out1:');
          //~ foreach ($dbVypis as $v) {var_dump($v);}
// kontrola: je nastaven && (je pole? nebo je traversablem?) && (je iteratorem? ? (rewnduj(true) && validni?) : jo) && neni prazdny?
            $result .= "\nT;\n  ".$counter.' =- 1; '.$_array.' = '.$var.'; if (isset('.$_array.') && (is_array('.$_array.') || '.$_array.' instanceof \Traversable) && ('.$_array.' instanceof \Iterator ? ('.$_array.'->rewind()?:true) && '.$_array.'->valid() : true) && !empty('.$_array.')) foreach ('.$_array.' as '.$key.' => '.$value.') { '.$counter.'++; '.$cmrs." .= <<<T\n";
    /**
     * Classes implementing Countable can be used with the count() function.
     * (fetchAll)
     *
     * @return Count elements of an object
     */
    public function count() {
      $this->_initFetchAll();
      return $this->cursor->fetchAll->count;
    }
  //\Countable,
count
//~ var_dump($dbVypis instanceof \Countable);
//~ $__array1 = $dbVypis;
//~ $vl = (isset($__array1) && (is_array($__array1) || $__array1 instanceof \Traversable) && count($__array1));
//~ var_dump($vl);
//~ if ($vl)
//~ foreach ($dbVypis as $v) {var_dump($v);}
//~ else {var_dump('prazdne!!');}
var_dump($id);
            //~ $q = $db->query('spravci', array('login'), 'iduser=?', array($id));
            //~ if ($q->hasNext()) {  //vyber radku z db
              //~ $login = $q->nextRow()->getString('login');
//~
              //~ $curlogin = $user->getIdentity()->getData('login');
//~
              //~ if ($login != $curlogin) {  // ochrana proti podmazani pristupu
//~

//~ // pro CRON vystup hodnot ktere podlehaji zkaze, expirace uzivatelu respektive smazanych udaju!
                //~ $cont = new ContentValues;
                //~ $cont->put('smazano', date('Y-m-d H:i:s'));
//~
                //~ $res = $db->update('spravci', $cont, 'iduser=?', array($id));
                //~ if ($res > 0) {
                  //~ $result = 'uživatel: '.$login.' "smazan"';
                  //~ Core::setRefresh(1, $backUrl);
                //~ }
//~
              //~ } else {
                //~ $result = 'nelze smazat sama sebe!!';
              //~ }
            //~ } else {
              //~ $result = 'uživatel s id: '.$id.' neexistuje';
            //~ }
      //~ $group = function($r) {
        //~ return $r['html']::fieldset()->add($r['html']::div()->class('block_contact_form')->add($r['elements']));
      //~ };
//~ $glob_form->getCurrentGroup()->setCallback($frm::CALLBACK_FIELDSET, $group);
                    //~ switch ($r['type']) { // rozdelovani trid podle typu
                      //~ case 'addTextArea':
                        //~ $elem_class = 'textarea';
                      //~ break;
//~
                      //~ case 'addSelect':
                        //~ $elem_class = 'select';
                      //~ break;
//~
                      //~ default:
                        //~ $elem_class = 'field';
                      //~ break;
                    //~ }

                    //~ $elem = $r['element'];
                    //~ return $r['html']::label()->add($r['label'] ? $r['html']::h3()->setText($r['label']) : null)
                                              //~ ->add($submit ? $elem : $r['html']::div()->class($elem_class)->add($elem))
                                              //~ ->add($submit ? null : $r['html']::div()->class('clear'));
//~ $timestamp = $matches['timestamp']; //nacteni razitka
      //~ if ($uri['id']) {
        //~ var_dump('vypis konkterni novinky');
      //~ } else {
        //~ var_dump('vypis vsech novinek');
      //~ }

      //~ $identity = $user->getIdentity();
//~ var_dump($uri);
      //~ if ($identity) {  //pokud je identita definovana
        //~ if ($uri['sekce'] == $identity->getData('login')) {
          //~ var_dump('iduser je: '.$identity->getId());
          //~
          //~ // dodelat!! navrh na editaci a nejaky uživatelský panel...
        //~ }
        //~ // obsluha logout-u
        //~ if ($uri['sekce'] == 'logout') {
          //~ $user->logout(true);
          //~ // pridat hlasku odhlaseni!
          //~ Core::setLocation($data['weburl']);
        //~ }
      //~ } else {
        //~ Core::setLocation($data['weburl']);
      //~ }

      //~
// aktuality na hlavni index a rozavat delku, a rozklikavat
//~ $m = ($normal ? $mesice[$month] : $mesice2[$month]);
aktuality do stranek!!,
//~ echo 'ahoj svete :D';

// bude samostatne stojici index s nacitanim dat do XML! rss formatu!

      //~ $tpl = $data['tpl'];
      //~ $user = $data['user'];
      //~ $html = $data['html'];

      //~ $uri = $data['staticweb_uri'];
      //~ $assign = array(
                      //~ 'novinky_vypis' => $data->getNovinky(false),
                      //~ 'novinky_vyber' => $data->getNovinky(false, $uri['id']),
                      //~ 'uri_id' => $uri['id'],
                      //~ );
      //~ $tpl->assign($assign);
      //~ return $tpl->template('page_novinky')->render();
->addExternalCSS('rss', array('rel' => 'alternate', 'type' => 'application/rss+xml', 'title' => 'RSS'))
//~ <link rel="alternate" type="application/atom+xml" title="Feed for question 'Inserting multiple rss feeds into MYSQL with simplexml'" href="/feeds/question/10268986">
//~ <link rel="alternate" type="application/rss+xml" title="RSS" href="http://rss.news.yahoo.com/rss/tech">
//~ <link rel="alternate" type="application/rss+xml" title="RSS feed" href="http://localhost/www/git/goodflow/gmr_hosting/rss" />
//~ 'avatar' => $c->getString('avatar')
//~ 'avatar' => $c->getString('avatar')
//~ classes\Debugger;
// udelat detekci z adresy, a rozsirenou registraci o uzivatelske udaje, kde se provede plna registrace!!!
// aplikovat seznam zakazanych user loginu!!! jako: admin, logout
->addMetaTag('copyright', 'Created by GMR hosting')
->addMetaTag('copyright', 'Created by GMR Team')
//~ $res = $data->getUzivatelData($id); // nacteni kurzoru
$role = array(
                      1 => 'registrovaný',  // registrovany 1.uroven
                      2 => 'moderator webu',  // registrovany + objednavka, jen hosting
                      3 => 'spravce her', // registrovany + objednavka, jen servery
                      4 => 'moderátor + správce', // registrovany + objednavka, hosting + servery
                      );
              //~ var_dump($data['acl']);
var_dump($data::getConstRoles());
//~ var_dump($user_data);
//->put('idrole', $k)
->put('idzeme', $k)
//~ $db->query('uzivatele', array('iduzivatel', 'idrole', 'login', 'email', 'pridano', 'upraveno', 'potvrzeno'), 'smazano is null');
var_dump($user_data->role, $identity->getRoles());
//~ var_dump($resources['moderate_manage']);
      $admin_class = $this['configure']['main_index']['pages']['admin'];
      $this['configure']['main_index']['pages'] = array_merge($this['configure']['main_index']['pages'], array($this['configure']['htmlpage']['urladmin'] => $admin_class));
      //~ var_dump($this['configure']['main_index']['pages']);
      //~ var_dump($this['configure']['main_index']['pages']['admin']);
      vbiberle:uag9CkV9d4
var_dump(classes\User::getCleverHash('vbiberle', 'uag9CkV9d4'));
//INSERT INTO  spravci (login, hash, pridano) VALUES ('vbiberle', '7aaaa57c1fbee0edff72bb9e58145d48a4f5c5417a48cdc8f6725623547cd8ac823e82ea4c38b4c0', NOW())
http://www.malsup.com/jquery/cycle/
  <script type="text/javascript" src="{$weburl}js/jquery.cycle.all.js"></script>
  <script src="{$weburl}js/plugins.js"></script>
  <script src="{$weburl}js/main.js"></script>
  <!-- jquery core -->
  <script src="{$weburl}js/vendor/jquery-1.7.2.min.js"></script>

  <!-- jQuery tools -->
  <script type="text/javascript" src="{$weburl}js/jquery.tools.min.js"></script>

  <!-- FlexSlider -->
  <script type="text/javascript" src="{$weburl}js/jquery.flexslider-min.js"></script>

  <!-- PrettyPhoto -->
  <link rel="stylesheet" href="{$weburl}js/prettyphoto/css/prettyPhoto.css" type="text/css"/>
  <script type="text/javascript" src="{$weburl}js/prettyphoto/jquery.prettyPhoto.js"></script>

  <!-- scripts concatenated and minified via build script -->

  <script type="text/javascript" src="{$weburl}js/jquery.scrollTo-1.4.3.1-min.js"></script>

  <script type="text/javascript" src="{$weburl}js/jquery.easing.1.3.js"></script>
    <!-- Prompt IE 6 users to install Chrome Frame. Remove this if you support IE 6.
       chromium.org/developers/how-tos/chrome-frame-getting-started -->
  <script type="text/javascript">
    $(document).ready(function() {
      /* testimonials initialization */
      $('#testimonials').flexslider({
        slideshow : false,
        controlNav : false,
        controlsContainer : '.testimonials_nav'
      });

      /* recent projects initialization */
      $('#recent_projects_gallery').flexslider({
        slideshow : false,
        directionNav : false,
        controlsContainer : '#pager_recent_projects_gallery'
      });

      var _interval = window.setInterval(function () {
          var autofills = $('input:-webkit-autofill');
          if (autofills.length > 0) {
            window.clearInterval(_interval); // stop polling
            autofills.each(function() {
                var clone = $(this).clone(true, true);
                $(this).after(clone).remove();
            });
          }
      }, 20);
    });
  </script>
  {loop="$novinky_vyber"}{$pridano = strtotime($value->pridano)}
    <div class="post">
      <div class="pic"><div class="generic_pic_border"><img src="{$weburl}img/spravce_{$value->idspravce}.png" alt="" /></div></div>
      <div class="text">
        <div class="oddelovac_nov">
          <p class="nov_nadpis">{$value->nadpis}</p>
          <p class="date">{$core::getCzechDay($pridano)} {date="j", $pridano}. {$core::getCzechMonth($pridano, false)}&nbsp;{date="Y", $pridano}, {date="H:i", $pridano}</p>
        </div>
        {$value->zprava}
      </div>
    </div>
{/loop}
//~ 'novinky_vyber' => $data->getNovinky(false, $uri['id']),
  /**
   *
   * rozhranni pro stranky
   *
   */
      $maindata = array(
                        //~ 'html' => 'classes\Html',
                        //~ 'form' => 'classes\Form',
                        //~ 'core' => 'classes\Core',
                        );
//($maindata);
      $maindata = array(
                        //~ 'html' => 'classes\Html',
                        //~ 'form' => 'classes\Form',
                        //~ 'core' => 'classes\Core',
                        );//($maindata);
var_dump($_POST, $c);
      $pole = $_POST['arrayporadi'];
//~ $_method = $_POST['method'];  //
//~ ZpracujHlasku('#status_drag');$(ret).fadeIn('slow').delay(2000).fadeOut('slow');
              //~ $f->addBackLink('zpět', $backUrl)
                //~ ->addText('nabidkaher_nazev', 'nazev hry', $d->nazev, array('maxlength' => 100))
                  //~ ->setRequired('Je nutne vyplnit nadpis')
                //~ ->addText('nabidkaher_popis', 'popis hry', $d->popis, array('maxlength' => 200))
                //~ // avatar
                //~ ->addText('nabidkaher_cena', 'ceny hry', $d->cena)
                  //~ ->addRule(Form::NUMERIC, 'musi být číslo')
                //~ ->addText('nabidkaher_minslotu', 'minimálně slotu', $d->minslotu)
                  //~ ->addRule(Form::INTEGER, 'musi být celé číslo')
                //~ ->addText('nabidkaher_maxslotu', 'maximálně slotu', $d->maxslotu)
                  //~ ->addRule(Form::INTEGER, 'musi být celé číslo')
                //~ ->addText('nabidkaher_krokslotu', 'krok slotu', $d->krokslotu)
                  //~ ->addRule(Form::INTEGER, 'musi být celé číslo')
                //~ ->addSubmit('edit_nabidkaher', null, 'upravit hru do nabídky');
//->addSelect('aktuality_jazyk', )
//~ ->addText('novinky_nadpis', 'Nadpis novinky', $d->nadpis, array('class' => 'dlouhy', 'maxlength' => 100))
//~ ->setRequired('Je nutne vyplnit nadpis')
//~ ->addRule(Form::MAX_LENGTH, 'maximální délka je %s', 100)
//~ ->addTextArea('novinky_zprava', 'Zpráva novinky', $d->zprava)
//~ ->setRequired('Je nutne vyplnit zprávu')
// zajistit prologovani casu odhlaseni pri refreshu!!!
//~ var_dump($mainClass->configure['admin_skupina']);
      //~ $skupina_menu = array(  // do konfigu
                        //~ '' => array('name' => 'Web admin', 'icon' => 'icon-home'),
                        //~ '?serveradmin' => array('name' => 'Server admin', 'icon' => 'icon-cogs'),
                        //~ '?faktury' => array('name' => 'Fakruty', 'icon' => 'icon-barcode'),
                        //~ '?retweb' => array('name' => 'Přejít na web', 'icon' => 'icon-share-alt'),
                        //~ '?logout' => array('name' => 'Odhlásit', 'icon' => 'icon-off'),
                      //~ );
//web admin: icon-home
//server admn: icon-cogs
//faktury: icon-barcode
//a jestli statistiky tak icon-bar-chart
//logout: icon-off
//prejit na web: icon-share-alt
//$mainClass->configure['main_admin']['pages']
//~ var_dump($mainClass->configure['main_admin']['pages']);
Zadání semestrální práce je společné s předmětem IDAS2.
Bude vypracována jedna velká aplikace pro oba předměty na vlastní téma (zadání musí být schváleno vyučujícím na cvičení a to nejpozději do 26.10.2012,
v opačném nebudete z tohoto předmětu klasifikováni). V předmětu IWWW bude zpracována klientská část aplikace. Vše co se týká dat, bude řešeno v IDAS2.
Typové aplikace: HelpDesk, Document management system, redakční systém, rezervační systém
          //~ if (isset($row['poc']['local'][1]) && $row['poc']['local'][1] == 0) {
            //~ $href->href('#')->class('nav-top-item current');
          //~ }
          //~ $result = Html::li()->add($href);
//~ var_dump($row['poc']['local'][1]);
Požadavky na semestrální práci (platné pouze pro IWWW):
Validní stránky dle vybraného standardu (HTML5, CSS3)
Layout stránek vytvořen pomocí sémanticky správných tagů
Stejné zobrazování stránek min. ve dvou dominantních prohlížečích (např. IE, FF, Chrome, ..)
Implementován WYSIWYG editor v administrační části aplikace
Veškeré formátování pomocí CSS
Aplikace bude obsahovat: optimalizaci pro tisk, uživatelské role, zabezpečený přístup, export do XML
Textová část bude obsahovat základní charakteristiku vámi vytvořené aplikace (pro koho je aplikace určena, co by měla řešit,…), architekturu aplikace, funkčnost, …. Celkem cca 10 stran.
V textové části bude povinně Rich picture, UML use case diagram, UML aktivity diagram, UML diagram tříd, adresářová struktura, ukázky zdrojového kódu důležité funkcionality
          //~ ->addExternalCSS('../css/bootstrap.css')
          //~ ->addExternalCSS('../css/bootstrap-responsive.css')
          //~ ->addExternalCSS('../js/flexslider.css')
          //~ ->addExternalCSS('../css/style.css')
          //~ ->addExternalCSS('css?family=Oswald:400,300,700&amp;subset=latin,latin-ext', array('url' => 'http://fonts.googleapis.com/'))
          //~ ->addExternalJS('../js/vendor/modernizr-2.5.3.min.js')
          //~ ->addExternalJS('../js/css_browser_selector.js')
          //~ ->addExternalJS('../js/jquery-1.8.3.js')
a: _admin\pages\EmptyPage('chjo? %htmlpage.urladmin%')
// ty skupiny menu se musi lip vymyslet!!!!!
//~ $a = new _admin\pages\EmptyPage('ahoj');
//~ $cc = classes\Configurator::encode(array('obj' => serialize($a)));
//~ $gg = classes\Configurator::decode($cc);
//~ $u = unserialize($gg['obj']);
//~ var_dump($a::getName(), $gg, $u::getName());
//~ var_dump($mainClass->configure['menu_admin']);

$polemest = array('Benešov nad cosik', 'benešov nad uplně jiným', 'benešov pod řekou', 'benešov pod ničím', 'benešov',);
$hledam = 'zubař benešov pod řekou';
$pole_vysledku = array_filter($polemest, function($r) use ($hledam) {
  return (mb_stripos($hledam, $r, false, 'UTF-8') !== false);
});
var_dump($pole_vysledku);
// konektor na cron!!! pro automatickou synchronizaci + tridu na zalohovani DB
// doresit nejak synchronizaci s .map??
dostat to do template vypisu!!!!,
//zakladni logika je v pohode a funguje!!!!
    private function __getCountMenu($source) {

    }
    //~ std::ifstream f(nazev.c_str());
    //~ std::string txt((std::istream_iterator<char>(f)), std::istream_iterator<char>());
    //~ std::cout << "n: " << txt.size() << "\n";
      //~ while (!h_in_file.eof()) {
        //~ h_in_file >> res;
        //~ std::getline(h_in_file, res);
        //~ sum += res.length();
        //~ this->data += res;
        //~ std::cout << "line: " << data << "\n";
      //~ }
std::cout << "nacteno: " << data.size() << " / " << sum << "\n";
std::cout << "nacitam soubor: " << nazev << std::endl;
//~ char new_next_zn = tolower(next_zn);
//~ std::cout << "na male: z " << (char) next_zn << ", na: " << new_next_zn << "\n";
//~ char new_next_z  = toupper(next_zn);
//~ this->data.replace(it + 1, toupper(next_zn));
//~ std::string aa(new_next_zn, new_next_zn + 1);
//~ it = toupper(next_zn);
//~ std::cout << "na velke: z " << (char) next_zn << ", do: " << (char)toupper(next_zn) << "\n";
//~ std::cout << "na velke: z " << (char) next_zn << "\n";
//~ std::cout << *(it + 1) << "\n";
//~ next_zn.toupper(next_zn);
//~ this->data.replace(it + 1, (it + 1) + 1, next_zn.c_str());
//~ std::cout << zn << "+1: " << *(it+1) << ",";
//~ var_dump($k.' -> '.$t->isVisible($c));
// doresit!! aby poctalo a bralo v potaz i visible false!!!!
      var_dump(self::$pc);
self::$pc++;
static $pc = 0;
var_dump($class.': '.$result);
//~ $data['class'] = $class[''];
//~ $data['class'] = $class[''];
 {
           = ;
        } else {
          $cl = ;
        }
         $v[''] : $v
      //~ var_dump($route, $this->pages);
      $val = array_values($uri_route);
      var_dump($val);
      //~ if (isset($this->pages[]))
      //~ var_dump($this->route);///$this->route
      //~ $arr = (!is_null($source) ? $source : $this->route);
      //~ var_dump($this->route);
      //~ if ($res)
      //~ $res = (isset($pages[$page_key]) ? $pages[$page_key] : null);
      //~ $class =
      //~ var_dump($page_value, $page_value[$page_key]);//$this->default_url
      //~ var_dump($pages[]);
      //~ if (isset($this->pages[$this->route[$index]])) {
        //~ var_dump($this->pages[$this->route[$index]]);
        //~ if (count($this->route) - 1 != $index) {
          //~ //var_dump($this->pages[$this->route[$index]]);
        //~ }
      //~ }
      //~ var_dump($page_value[$page_key]);
      //~ var_dump($page_value[$this->default_url]);
{*
<ul>
menu2: (musi uz brat jen menu ze subsekce)<br />
{$menu2->getArrayMenu(2)|print_r:true}
{loop="$menu2->getArrayMenu(2)" as $key => $value}
  {if="!$value->submenu"}
  <li><a href="{$weburl}{$sekce}{$value->url}">{$value}</a> [level: {$value->level}, poc: {$value->poc}/{$value->count}]</li>
  {/if}
  {if="$value->submenu"}
    tady je submenu:<br />
    <ul>
      <li>{$value} [level: {$value->level}, poc: {$value->poc}/{$value->count}]</li>
    {loop="$value->submenu" as $k => $v}
      <li>
        <a href="{$weburl}{$sekce}/{$v->lasturl|implode:'/'}">{$v}</a>
        '{$v->url}' - {$v} [level: {$v->level}, poc: {$v->poc}/{$v->count}] (jako podpolozka: {$value})
        {if="$v->submenu"}JESTE OBSAHUJE SUBMENU{/if}
      </li>
    {/loop}
    </ul>
  {/if}{$value|print_r:true}
{/loop}
</ul>
*}
          {*
          <li><a href="invoice.html">Invoice Template</a></li>
          <li><a href="profile.html">Profile Page</a></li>
          <li><a href="about.html">About This Template</a></li>
          <li><a href="login.html">Login Design</a></li>
          *}
    // nasteveni routovani z metody
    //~ public function setWebRoute($route, $from = 0) {
      //~ $this->uri = $route->getUri(null, $from);
      //~ $this->url = array_values($this->uri);
      //~ $this->default_url = $route->getDefaultUri();
      //~ return $this;
    //~ }
    //tady ty 2 metody postradaji smysl!!!!
    public function getUrl() {
      return $this['url'];
    }

    public function getDepth() {
      return $this['depth'];
    }
    , array('_wulr' => $weburl)
//$this->route->getDefaultUri();
// nad cim a kde zpracovavat route table?? + aktualni!!!
//~ var_dump($url == '', $url, implode('/', $last), PHP_EOL.PHP_EOL.PHP_EOL);
//~ var_dump($url.'=='.$this->url[$level], $cl.':', $url==$this->url[$level], PHP_EOL);
//~ var_dump(implode('/', $this->url));//($this->url[$level] == $this->default_uri && $url == '');
array_filter(array_merge($lasturl, array($url)))
          //~ if (preg_match($tagMatch['ternary'], $html, $matches)) {
            //~ var_dump($matches);
          //~ } else
//~ 'ternary' => array('({\$.*\?.*\:.*})', '/{\$.*\??<true>.*\:?<false>.*}/'), //ternarni podminka?????
{#true ? "ahoj" : "neahoj"}
{loop="array(1,2,3)"}
{if="true"}
// osetrovat blbe ukoncene zavorky!!! behem kompilace!!!
// test se submenu!!!!
// nasadit TPL a vyresit ten failik s TPL-kem!
$a = <<<T
sdfdsf
sdf  " sdgfsd ' sdfdfdf
T
. <<<T
asd asd sad  "" '' sdf
T;
var_dump($a);
// dopsat title + content! ==> predelat do vlstnich soubouru a nasadit!!!
  class TitleWeb extends BaseWeb {
    private $base;
    public function __construct(BaseWeb $base) {
      //~ var_dump($base);
      $this->b = $base;
    }

  }

  class ContentWeb extends BaseWeb {

  }
      //~ $cons = new ContentWeb();
      $tt = new TitleWeb($m);//($c['menu']['pages']);
      //~ $tt->setRoute($route_model, 'webadmin');
//~ $route = new classes\Route;
//~ $route->setRouteModel(array('sekce/blok/akce',))
      //~ ->setDefaultUri('webadnim');
//~ $route_uri = $route->getUri();
//~ var_dump($c['menu']['pages']);
      //~ $a = new MenuRowWeb(array('class' => 'aaa'));
      //~ echo $a;
 {
        $data = ;
      }
      return $data;
{*if="$value->submenu"*}
{*else}{$url = array_merge(array($weburl . $sekce), $value->lasturl)}
<ul>
  <li><a href="{$url|implode:'/'}"{if="$value->active"} class="active"{/if}>{$value}</a></li>{$value|print_r:true}
</ul>
{/if*}
{*
<script>
var a = prompt('zadej A', 5);
var b = prompt('zadej b', 4);
document.write(parseFloat(a)+parseFloat(b)+": "+Math.sqrt(64));
</script>
{$weburl}{$sekce}?{$value->lasturl|implode:'/'}
*}
//******************************************************************************
if (!is_null($userdata) && is_array($userdata)) {
        $this->userdata = $userdata;
      }
if (!is_null($layout) && is_array($layout)) {
        $this->pages = $layout;
      }
// do kontruktoru pridat parametr na predavani routovace?7
      $this->active_classes = array();
      $this->_getCurrentClass();
// promyslet jmeno?! pokud bude jedina metoda je zbytecne tam cpat Array
    /**
     * vypisuje pole dat nebo primo hodnoty podle
     *
     * @param name nepovinny index do pole dat pro vyber hodnot
     * @return pole dat nebo hodnota vracena z getName
     */
    public function data($name = null) {
      $data = (method_exists($this['class'], 'getName') ? $this['class']::getName() : array());
      return (isset($data[$name]) ? $data[$name] : $data);
    }
 [level: {$value->level}, poc: {$value->poc}/{$value->count}]
  {$value} [level: {$value->level}, poc: {$value->poc}/{$value->count}]
//~ var_dump('old: ', $this->pages, 'newmenu: ',$mm);
	?webadmin:
		name: Web admin
		icon: icon-home
		pages:	#furt to neni resene dostatecne flexibilne!
			'':
				home: _admin\pages\Home
				'': _admin\pages\Home
			novinky:
				home: _admin\pages\Novinky
				'': _admin\pages\Novinky
			uzivatele:
				home: _admin\pages\Uzivatele
				'': _admin\pages\Uzivatele
			nabidka_her:
				home: _admin\pages\NabidkaHer
				'': _admin\pages\NabidkaHer
	?serveradmin:
		name: Server admin
		icon: icon-cogs
		pages:
			'':
				'': _admin\pages\Home
	?faktury:
		name: Faktury
		icon: icon-shopping-cart
		pages:
			'':
				'': _admin\pages\Home
	?statistiky:
		name: Statistiky
		icon: icon-bar-chart
		pages:
			'':
				'': _admin\pages\Home
	?retweb:
		name: Přejít na web
		icon: icon-share-alt
		pages:
			'': _admin\pages\RetWeb
	?logout:
		name: Odhlásit se
		icon: icon-off
		pages:
			'': _admin\pages\Logout
      // definice modelu menu
      $menuskel = array(
        'obal' => function($row) {
          return $row['submenu'][0]->add(
                                          Html::ul()->add(  //->class('nav-top-item current')
                                                          array_slice($row['submenu'], 1)
                                                          )
                                        );
        },
        'menu' => function($row) {
          $active = ($row['current'] == $row['menu_skupina'].'/'.$row['url'] || (($row['current'] == '' || $row['current'] == '?webadmin') && $row['url'] == ''));
          if (isset($row['poc']['local'][1]) && $row['poc']['local'][1] == 0) {
            // nadpis
            $href = Html::p()->class('nav-top-item current')->setText($row['name_blok']);
          } else {
            // link
            //~ //var_dump($row['url']);
            $href = Html::a()->hrefrewrite($row['menu_skupina'].($row['url'] != '' ? '/' : ''), array('action' => $row['url']))
                              ->setText($row['name'])
                              ->class($active ? 'active' : null);
          }
          $result = Html::li()->add($href);
          return $result;
        }
      );
      //~ $route = new classes\Route; //spravovani 1.urovne menu
      //~ $uri = $route->getUri(array('skupina'));
      //~ $_skupina = (!empty($uri['skupina']) ? $uri['skupina'] : '?webadmin');  //defaultni skupina menu
      //~ $menu_data = array('menu_skupina' => $_skupina);  // priprava user dat pro callback menu
//~
      //~ // vytvoreni instance static webu
      //~ $sweb = new classes\StaticWeb(array('skupina/sekce/blok/id'), '/home', 1);  // urcit podle skupiny routovani?! je blbost!
      //~ $sweb->setLoadMenu($mainClass->configure['menu_admin'][$_skupina]['pages']);  // preidelovani menu dle sekce
//~ var_dump($sweb->getCurrentClass(), $sweb->getUri());
      //~ $mainClass['staticweb'] = $sweb;
      //~ $mainClass['staticweb_uri'] = $sweb->getUri();
                      //~ 'index_skupina_menu' => $skupina_menu,
                      //~ 'uri_skupina' => $_skupina,
                      //~ 'index_menu' => $sweb->getMenu($menuskel, $menu_data),
    public static function getSubmenu() {
      return array('aa' => '_admin\pages\Home');
    }
{*$html::ul()->class('main-nav')->add($index_menu)->setDepth(2)*}
{* {$value|var_dump}
    <ul id="main-nav">
       <li>
         <a href="#" class="nav-top-item current" > Dashboard / Home</a>
         <ul>
            <li><a href="dashboard.html" class="active" >Overview of features</a></li>
            <li><a href="invoice.html">Invoice Template</a></li>
            <li><a href="profile.html">Profile Page</a></li>
            <li><a href="about.html">About This Template</a></li>
            <li><a href="login.html">Login Design</a></li>
         </ul>
       </li>

       <li>
         <a href="#" class="nav-top-item current" > NOTIFICATIONS SAMPLE</a>
         <ul>
            <li><a href="popup-alert.html">Animated Popup Alerts</a></li>
            <li><a href="modal_box.html">Modal Light Box</a></li>
            <li><a href="sticky_notes.html">Purrr Sticky Notes</a></li>
            <li><a href="diolog-box.html">Dialog Boxes Example</a></li>
         </ul>
       </li>

       <li>
         <a href="#" class="nav-top-item current" >SOME PLUGINS</a>
         <ul>
            <li><a href="file-manager.html">File Manager Sample</a></li>
            <li><a href="plupload.html">Pulp Loader 1.5.4 </a></li>
            <li><a href="gride.html">960 Content Grid</a></li>
         </ul>
       </li>

       <li>
         <a href="#" class="nav-top-item" >NO SUBMENU HERE</a>
       </li>
    </ul>
*}
// || ($_lasturl == array_slice($this->url, 0, count($_lasturl)));
// vylepsit aktivni! pokud subsekce plati a je jiny konec subsekce musi zustat oznacena!!!!
//~ var_dump($url, $this->url[$level], $active, PHP_EOL);
//~ var_dump($_lasturl == array_slice($this->url, 0, count($_lasturl)), PHP_EOL);
        //~ var_dump($cl, $__conf['activeclass']);
//~ var_dump($mainClass->configure['htmlpage']['title']);
      //~ $title = $sweb->getTitle(array('exception' => array(''), 'title' => $mainClass->configure['htmlpage']['title']));
{*$html::ul()->add($index_menu)->setDepth(4)*}
            {*$html::li()->class($value->poc==0 ? 'first' : null)
                        ->class($value->poc==($value->count-1) ? 'last' : null)
                        ->class($value->active ? 'active' : null)
                        *}
 {*$val|print_r:true $val->active   (), () *}
        // definice modelu menu
        $menuskel = array(
          'obal' => function($row) {
            return $row['submenu'][0]->add(
                                            Html::ul()->add(
                                                              array_slice($row['submenu'], 1) // vezme polozky od 1
                                                            )
                                          );
          },
          'menu' => function($row) {
            $result = Html::li()->class($row['poc']['local'][0] == 0 ? 'first' : null)
                                ->class($row['poc']['local'][0] == $row['count']['local'][0] ? 'last' : null)
                                ->class(isset($row['poc']['local'][1]) && $row['poc']['local'][1] == 1 ? 'first' : null)
                                ->class($row['level'] == 1 && $row['poc']['local'][1] == $row['count']['local'][1] ? 'last' : null)
                                ->class($row['active'] || $row['subactive'] ? 'active' : null)
                                ->add(
                                        Html::a()->hrefrewrite('', array('action' => $row['url']))->setText(isset($row['menu']) ? $row['menu'] : $row['name'])
                                      );
            return $result;
          }
        );
        // vytvoreni instance static webu
        //~ $sweb = new classes\StaticWeb(array('action/sekce',
                                            //~ 'action==novinky/id',
                                            //~ 'action==user/login/akce',
                                            //~ 'action==registrace/typ',
                                            //~ )
                                      //~ );
        //~ $sweb->setLoadMenu($mainClass->configure['index_menu']['pages']);
        //~ $sweb->getUri();
//~ var_dump($mainClass->configure['index_menu']);
//~ var_dump($mainClass['staticweb_uri']);
        //~ var_dump($sweb->getArrayClass());
        //~ var_dump($sweb->getVariable('menu'));
        //~ $uri = $sweb->getUri();
        //~ var_dump($sweb->getUri());
        //~ 'index_menu' => $sweb->getMenu($menuskel),
//~ var_dump($web_sub->getJS($mainClass));
$a = <<<K
sdsd{ __CLASS__ }sdada
K;
var_dump($a);
//~ var_dump($web->getLastActiveClass(), $web_sub->getLastActiveClass());
//~ var_dump($web_sub->getMenuLayout());
//~ var_dump($web->getContent($mainClass));//$web_sub->getContent($mainClass),
  //~ use classes\Html,
      //~ classes\Debugger;
var_dump(User::getCleverHash('a', 'b'));
      //~ use classes\User; // OMG proc ?!
var_dump($data['user']::getCleverHash('a', 'b'));
{*$web->getMenu()|var_dump*}
//~ var_dump(pages\Registrace::getName());
//~ var_dump($web); // tu se neco brutalne sere!!!! nejalk se nuluje instance?!
//~ var_dump($title);
//~ var_dump($mainClass['web'] === $web);
//~ var_dump($mainClass['web']->getMenu());
$web->getMenu();
//~ var_dump(implode(' - ', array($mainClass->configure['htmlpage']['title'], $mainClass['web']->getTitle())));
  //~ use classes\Html;
//~ $this->checkDirs();
//~ $this->checkDirs();
//~ if (!file_exists(dirname($path))) {
  //~ var_dump($path);
//~ }

//~ var_dump(file_exists(self::$config['compile_dir']), );
//~ var_dump(!file_exists($path));
      //~ $this->template = rtrim(file_get_contents($path), "\n");  //odstaraneni posledniho enteru
var_dump($name);
var_dump($this->template_name);
var_dump($this->template_name);
      // pokud je template umisteny jinde, kompilacni slozka je stale jedna
      $name = str_replace('/', '__', $name);
var_dump($path);
classes\User, // muze delat bordel!

        //~ ->addText('novinky_nadpis', 'Nadpis novinky', null, array('class' => 'dlouhy', 'maxlength' => 100, 'onkeydown' => 'rewrite(this.value, \'.rewrite\');', 'onchange' => 'rewrite(this.value, \'.rewrite\');'))
          //~ ->setRequired('Je nutne vyplnit nadpis')
          //~ ->addRule(Form::MAX_LENGTH, 'maximální délka je %s', 100)
        //~ ->addText('novinky_url', 'url novinky', null, array('maxlength' => 100, 'readonly' => true, 'class' => 'rewrite dlouhy'))
          //~ ->setRequired('Je nutne vyplnit url novinky')
        //~ ->addTextArea('novinky_zprava', 'Zpráva novinky')
          //~ ->setRequired('Je nutne vyplnit zprávu')
        //~ ;
staticweb: spatne vyhodnocovani defaultni adresy! pri posunu urovne!!
staticweb: nedokaze oznacovat kazdou polozku v ramci multi pole! (jen tu posledni)
staticweb: skusit znovu prepsat protoze na nultiurovnovem menu jakisk kolabuje a neumi poradnou podporu templatu
staticweb: musi umet vyhodnocovat ze kazda cast menu muze mit svoje submenu, a ze menu muze tvorit i samostatne jedna trida v sobe!!
staticweb: technologicky roztristit na tridy starajici se o obsah/menu/title !!! modul jako takovy je masivne neflexibilni!
staticweb: musi byt schopne vykreslovat jen urcitou cast (urcitou uroven, konkterni/rozsah), treba vykreslit uroven 0, a pak uroven 1-2, 3-N, nad samostatnym callbackem nebo camostatne v sablone
blbne oznacovani v menu s / nebo bez!
hloupa struktura menu v global konfigu!
  //~ unsigned char b1 = a >> 24;
  //~ unsigned char b2 = a >> 16;
  //~ unsigned char b3 = a >> 8;
  //~ unsigned char b4 = a;

  //~ std::cout << "b1: " << (int)b1 << ", b2: " << (int)b2 << ", b3: " << (int)b3 << ", b4: " << (int)b4 << std::endl;
  //~ std::cout << ((a & 0x000000ff) >> 0) + ((a & 0x0000ff00) >> 8) + ((a & 0x00ff0000) >> 16) + ((a & 0xff000000) >> 24) << std::endl;

  // princip v cyklu...
  //~ for (int i = 3; i >= 0; ++i) {
    //~ byte b = (integervalue >> 8 * i) & 0xFF;
    //~ send(b);
  //~ }
//~ std::pair<std::map<int, short int>::iterator,bool> ret;
//~ if (!ret.second) { std::cout<< "jiz existuje! (3, 4)" << std::endl;}
//~ if (!ret.second) { std::cout<< "jiz existuje! 1.(5, 6)" << std::endl;}
//~ if (!ret.second) { std::cout<< "jiz existuje! (8, 4)" << std::endl;}
//~ if (!ret.second !ret.second) { std::cout<< "jiz existuje! 2.(5, 6)" << std::endl;}
//~ $err = array_merge($err, $v->getErrors());
      //~ array_walk($filter, $callback_error);
      //~ $this->form->elements = $err;
      //~ $err = $this->form->elements;

/home/gmr/ViewPower2.11/jre/bin/java com.zerog.lax.LAX /home/gmr/ViewPower2.11/ViewPower.lax /tmp/env.properties.2539
/home/gmr/ViewPower2.11/jdk/bin/java -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file=/home/gmr/ViewPower2.11/tomcat/conf/logging.properties -Djava.endorsed.dirs=/home/gmr/ViewPower2.11/tomcat/endorsed -classpath :/home/gmr/ViewPower2.11/tomcat/bin/bootstrap.jar:/home/gmr/ViewPower2.11/tomcat/bin/commons-logging-api.jar -Dcatalina.base=/home/gmr/ViewPower2.11/tomcat -Dcatalina.home=/home/gmr/ViewPower2.11/tomcat -Djava.io.tmpdir=/home/gmr/ViewPower2.11/tomcat/temp org.apache.catalina.startup.Bootstrap start

java -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file=/home/gmr/ViewPower2.11/tomcat/conf/logging.properties -Djava.endorsed.dirs=/home/gmr/ViewPower2.11/tomcat/endorsed -classpath :/home/gmr/ViewPower2.11/tomcat/bin/bootstrap.jar:/home/gmr/ViewPower2.11/tomcat/bin/commons-logging-api.jar -Dcatalina.base=/home/gmr/ViewPower2.11/tomcat -Dcatalina.home=/home/gmr/ViewPower2.11/tomcat -Djava.io.tmpdir=/home/gmr/ViewPower2.11/tomcat/temp org.apache.catalina.startup.Bootstrap start
    //~ px++;

    //~ PORTD = 0x00;
    //~ _delay_ms(50);
    //~ PORTD = 0x01;
    //~ _delay_ms(50);
    //~ PORTD = 0x02;
    //~ _delay_ms(50);
    //~ PORTD = 0x03;
    //~ _delay_ms(50);
    //~ PORTD = 0x04;
    //~ _delay_ms(50);
    //~ PORTD = 0x05;
    //~ _delay_ms(50);
    //~ PORTD = 0x06;
    //~ _delay_ms(50);
    //~ PORTD = 0x07;
    //~ _delay_ms(50);
    //~ PORTD = 0x08;
    //~ _delay_ms(50);
    //~ PORTD = 0x09;
    //~ _delay_ms(50);

    //~ N_SETBIT(PORTD, PD5);
    //~ _delay_ms(50);
    //~ N_CLRBIT(PORTD, PD5);
    //~ _delay_ms(50);

    //kontroluje vstup od core jadra
    //~ switch (~PORTB) {
      //~ case 0x01:  //core chce 1
        //~ //zapne motor
        //~ //zacne kontrolovat jestli
      //~ break;
    //~ }
    // nebo taky moznost: bude kontrolovat jestli se vstupni cislo==kombinaci na jednotce
    //~ if (bit_is_set(PIND, 0)) {
      //~ cislo = 1;
    //~ } else {
      //~ cislo = 0;
    //~ }
    //~ if (bit_is_set(PIND, 1)) {
    //~ cislo = (PIND >> 4);
    //~ cislo = (1 << PIND0) | (1 << PIND1) | (1 << PIND2) | (1 << PIND3);
  //~ PORTB = 0xFF;
  //bude cekat na vstup (0-9) a podle neho bude volit podle "databaze"
  //~ N_CLRBIT(PORTD, PD5); // defaultne vypnuty motor
  //~ unsigned char cislo = 4;
 //~ PORTD = 0x00;
    //~ cislo = 0;
    //~ cislo += (bit_is_set(PIND, 0) ? 1 : 0);
    //~ cislo += (bit_is_set(PIND, 1) ? 2 : 0);
    //~ cislo += (bit_is_set(PIND, 2) ? 4 : 0);
    //~ cislo += (bit_is_set(PIND, 3) ? 8 : 0);
    //~ switch (cislo) {
      //~ default:
      //~ case 0:
        //~ nastavit(j_0);
      //~ break;
//~
      //~ case 1:
        //~ nastavit(j_1);
      //~ break;
//~
      //~ case 2:
        //~ nastavit(j_2);
      //~ break;
//~
      //~ case 3:
        //~ nastavit(j_3);
      //~ break;
//~
      //~ case 4:
        //~ nastavit(j_4);
      //~ break;
//~
      //~ case 5:
        //~ nastavit(j_5);
      //~ break;
//~
      //~ case 6:
        //~ nastavit(j_6);
      //~ break;
//~
      //~ case 7:
        //~ nastavit(j_7);
      //~ break;
//~
      //~ case 8:
        //~ nastavit(j_8);
      //~ break;
//~
      //~ case 9:
        //~ nastavit(j_9);
      //~ break;
    //~ }
  // kod 3 z 8
  //~ unsigned char j_0 = 0b00100011;
  //~ unsigned char j_1 = 0b00001011;
  //~ unsigned char j_2 = 0b00001101;
  //~ unsigned char j_3 = 0b00001110;
  //~ unsigned char j_4 = 0b00010011;
  //~ unsigned char j_5 = 0b00010101;
  //~ unsigned char j_6 = 0b00010110;
  //~ unsigned char j_7 = 0b00011001;
  //~ unsigned char j_8 = 0b00001010; // spetne! sjednotit podle 3z8!!!
  //~ unsigned char j_9 = 0b00011100;
  //~ unsigned char cislo;
  //~ cislo = nacistBCD();
    //jedna z funkcnich moznosti
    // rozdeleni pro minuty
    //~ unsigned char min_des = (int) (min / 10);
    //~ unsigned char min_jed = min % 10;
    //~ unsigned char brana_min = (8 << min_des) + (min_jed);

    //~ // rozdeleni pro minuty
    //~ unsigned char min_des = (int) (min / 10);
    //~ unsigned char min_jed = min % 10;

    // a dalsi vtip.. dostat desitky a jednotky vedle sebe
    //    hex => bcd         128 64 32 16  8 4 2 1  => 32+2+1=35(10) a 23(16)
    // min : 23 => 2 a 3 =>    0  0  1  0  0 0 1 1
    //~ unsigned char brana_min = 0;
    //~ brana_min = (min_des << 16)

    //rozdeleni pro hodiny
    //~ unsigned char hod_des = (int) (hod / 10);
    //~ unsigned char hod_jed = hod % 10;
    // funkce na nastaveni cisel (nastaveni vystupni brany) pro jednotky
    //~ PORTD = ~PORTD; //prepinani celeho portu
//~ TIMSK = (1 << TOIE1); //nastaveni preruseni po preteceni TCNT1
    // kdyz je odpojene napajeni tak se mcu uvode do
    //bude uvadet do spanku pres presuseni INT0 nebo INT1 (hranove citliveho, reakce na log.0 (na sestupnou hranu) => ISC01=1, ISC00=0)
    //~ set_sleep_mode(SLEEP_MODE_IDLE);
    //~ if (bit_is_clear(PINB, 1)) { sleep_mode(); }
  //~ GIMSK = _BV(INT0);  // testovaci jen pro pokus nad INT0
  //~ MCUCR = _BV(ISC01);

  //~ DDRD = 0xFF;  // vystup
  //~ PORTD = 0xFF; // defaultne zhasnute
//nastavit aktivitu na 0 + uspi mcu
//~ ISR (INT0_vect) {
  //~ aktivni = 0;
  //~ sleep_mode();
//~ }
//~
//~ ISR (INT1_vect) {
  //~ aktivni = 1;
  //~ // vypne spanek!
//~ }
// pro kompletni implementaci prepnout na mega8515
    //sec: 1.sec rozne, 2. sec zhasne
    // 1 jednotka bude prijmat cislo 0-9 => 4 bity ==> 2 cele brany budou obsluhovat vsechny jednotky
    // ovladani jednotky pres brany A + C
    // ovladani casu +h,-h,-m,-m brana B (4 bity)
    //8515 ma ABCD cele + 3bity E
    //--------------NE!---------na brane D (D2 a D3) je INT0 a INT1 => kontrola pripojeni napeti
    // nastavovani portu pro blikani LED, bude se pouze negovat port
// po provedeni preruseni se musi zkontrolovat pin kde sitove napajeni a podle toho se bud znovu uspat (Idle) nebo nechat probuzeny!!!!!
    //~ do {//~ unsigned char ret = 0;
          //~ ret = ;
        //~ } ; // toci dokud se nenastavi cislice
    // | _BV(PD6)
    //~ if (bit_is_clear(PIND, 4)) {
      //~ N_SETBIT(PORTD, PD6);
    //~ } else {
      //~ N_CLRBIT(PORTD, PD6);
    //~ }
    //~ N_SETBIT(PORTD, PD6);
    //~ _delay_ms(200);
    //~ N_CLRBIT(PORTD, PD6);
    //~ _delay_ms(200);
// obratit kod 3z8 v zapojeni

    if (blik) {
      N_CLRBIT(PORTB, PB1);
    } else {
      N_SETBIT(PORTB, PB1);
    }
    blik++;
    _delay_ms(100);
    if (blik > 1) { blik = 0; }
//~ N_SETBIT(PORTB, PB1);
//~ PORTB = ~_BV(PB1);
//~ _delay_ms(100);
//~ N_CLRBIT(PORTB, PB1);
//~ _delay_ms(100);
  unsigned char blik = 0;
  //~ PORTB |= _BV(PB1);
  //~ void blikaniSec() {
  //~ if (blik) {
    //~ N_SETBIT(PORTB, PB1);
  //~ } else {
    //~ N_CLRBIT(PORTB, PB1);
  //~ }
//~
  //~ blik++;
  //~ if (blik > 1) { blik = 0; }
//~ }
//~ PORTB |= ~_BV(PB1);  //invertovane blikani sekundovky
//~ PORTB |= ~_BV(PB1);
      //~ if (msec >= 100) {
        //~ msec = 0;
        //~ sec += 1;
        //~ if (sec == 60) {
          //~ sec = 0;
          //~ min += 1;
          //~ lock = 1;
        //~ }
        //~ if (min == 60) {
          //~ min = 0;
          //~ hod += 1;
          //~ lock = 1;
        //~ }
        //~ if (hod == 24) {
          //~ hod = 0;
        //~ }
        //~ //sekundaOn();
      //~ }
      //~ if (msec > 40) {
        //~ sekundaOff();
      //~ }
      //~ if (msec > 70) {
        //~ lock = 0;
        //~ lock2 = 0;
      //~ }
      //~ aktualizovatCas();
  //~ if (msec > 70) {
    //~ lock = 0;
    //~ lock2 = 0;
  //~ }
  //~ lock2 = 0;
  //~ if (msec > 65 && lock == 0) {
    //~ msec = 0;
//~
    //~ sekundaOn();
//~
    //sec++;
    //~ sec += 1;
    //~ if (sec == 60) {
      //~ sec = 0;
      //min++;
      //~ min += 1;
      //~ lock = 1;
    //~ }
//~
    //~ if (min == 60) {
      //~ min = 0;
      //hod++;
      //~ hod += 1;
      //~ lock = 1;
    //~ }
//~
    //~ if (hod == 24) {
      //~ hod = 0;
    //~ }
  //~ }
//~
  //~ if (msec > 70) {
    //~ lock = 0;
    //~ lock2 = 0;
  //~ }
//~
  //~ if (msec > 40) {
    //~ sekundaOff();
  //~ }
//~
  //~ if (aktivni == 1) {
    //~ PORTA = toHex(min);
    //~ PORTC = toHex(hod);
  //~ }
// min--  && min >= 0
  && min <= 59
  && hod >= 0
  && hod <= 23
//~ aktivni = (bit_is_clear(PINB, 0) ? 1 : 0);  // asi tak ne!!
//~ volatile unsigned char blik = 0;
//~ volatile unsigned char lock = 0;
//~ volatile unsigned char lock2 = 0;
// skusit udelat tak ze se bude kontrolovat jak je nastavenen preruseni? a podle toho prenastavovat preruseni a promennou?!
// alespon 1 preruseni jako probouzeni privedeneho napajeni ()
//INT0 nebo INT1 na ISCxx 11, na nabeznou uroven a probudit tim mcu to tak ze pokud spadne sitove napajeni na 0 mcu musi poznat podle toho portu ze je 0 a tim padem => aktivni=0
//pak kdyz prijde preruseni (obnovi se napajeni) mcu se pomoci preruseni probudi a bude normalne fungovat dal
// vyresit priadny problem s presnosti hrany signalu!
  // bude Timer1 (16bitovy), pocitat ~1s pres preruseni, pri taktu: F_CPU
  //12MHz, preddelicka: 256, cas cekani 1000ms, TCNT 18661 (via: http://lubosweb.php5.sk/clanky/07_citac_jednotka.php)
//obsluha preruseni INT0
//~ msec++;
//kazdou sekundu bude se bat presne zapinat LED sec
//~ #define TC1 18661 //konstanta pro 12/256 MHz -> 1s
//~ #define TC1 3036  // konstanta pro TIMER1 overflow, 16/256/1000 [MHz/presc./ms]7
//~ #define TC1 63536 // konst 16M/8presc/1ms
// doladit presnost!
  //~ if (aktivni == 1 && msec > 10) {
    //~ sekundaOff();
  //~ }
  //~ TCCR1B = _BV(CS12); //delicka 256
//~ $form->addText('age', 'Věk:')
    //~ ->addRule(Form::INTEGER, 'Věk musí být číslo')
    //~ ->addRule(Form::RANGE, 'Věk musí být od 18 do 120', array(18, 120));
    //~ ->addRule(Form::RANGE, 'Věk musí být od %d do %d let', array(18, 120));
//~
//->to('faja@gfdesign.cz')	// docasne vymenene!!!!
Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumyeirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diamvoluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumyeirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diamvoluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumyeirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diamvoluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumyeirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diamvoluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumyeirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diamvoluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consete
# preneseni do: /etc/init.d/
# umozneni spousteni: sudo chmod +x /etc/init.d/<script.sh>
# umozneni bootovani: sudo update-rc.d <script.sh> defaults 99
#
#start/stop? rozslisovat?
  //~ return (8 << (cislo / 10)) + (cislo % 10);
  //~ return (cislo > 9 ? 8 << (cislo / 10) : 0) | (cislo % 10);
  //des: (cislo / 10)
  //jed: (cislo % 10)
  //printf("==%d\n", cislo);
  //if (cislo < 30) {
		//~ return (cislo > 9 ? 8 << (cislo / 10) : (cislo / 10)) | (cislo % 10);
	//} else {
		//return (8 << ((cislo / 10)/16)) | (cislo % 10);
	//}
  unsigned char posun = (cislo > 9 ? 8 << (cislo / 10) : 0);
  return (cislo >= 30 ? (cislo >= 40 ? (cislo >= 50 ? (posun - 176) : (posun - 64)) : (posun - 16)) : posun) | (cislo % 10);
   //~ sec += 1;
    //~ if (sec > 59) {
      //~ sec = 0;
      //~ min += 1;
    //~ }
//~
    //~ if (min > 59) {
      //~ min = 0;
      //~ hod += 1;
    //~ }
//~
    //~ if (hod > 23) {
      //~ hod = 0;
    //~ }
  //~ return (8 << (cislo / 10)) + (cislo % 10);
  //~ return (cislo > 9 ? 8 << (cislo / 10) : 0) | (cislo % 10);
echo User::getCleverHash('ahoj', 'smudlo');
var_dump($conf[1]);
// pokud je msg NULL tak vlozi text z default hlasek
//~ REGEXP = ':regexp', //deprecated
//~ var_dump('name: ', $value['name']);
//~ var_dump('normalni:', $value);
// test musi vyhradne reagovat na files ne na multi promennou!
 else {
          $value = implode(', ', $value);
        }
//~ if (isset($value['name'])) {
          //~ $value = $value['name']; // name u file
        //~ }
if (is_array($value)) { //osetreni subpole pokud je multiple
          $value = implode(', ', $value);
        }
        //~ $value = $value['name'];
        //~ if (is_array($value)) { //osetreni subpole pokud je multiple
          //~ $value = implode(', ', $value);
        //~ }
        //~ case self::LESSOREQUAL: // mensi rovno nez
          //~ $result = ($arg <= $value);
        //~ break;
        //~ case self::MOREOREQUAL:  // vetsi rovno nez
          //~ $result = ($arg >= $value);
        //~ break;
          //~ var_dump(!is_null($value), !empty($value), isset($value),PHP_EOL);
          //~ var_dump('FIL: >',$value,PHP_EOL);
          //~ var_dump($value, $value !== '');
          //~ $result = (!empty($value));
    //~ var_dump(is_callable(__CLASS__ . '::cmpRule'));
    //~ var_dump(call_user_func(__CLASS__ .'::cmpRule', 1, 2));
    //~ var_dump(call_user_func(function($a, $b) {
      //~ var_dump($a, $b);
      //~ return false;
    //~ }, 1, 2));
    //~ /**
     //~ * test pravidla $f = function(a, b) {}
     //~ */
    //~ public function testCustomValidationAnonymeFunctions() {
      //~ $cmp = function($a, $b) {
        //~ var_dump($a, $b);
        //~ return false;
      //~ };
      //~ $f = $this->object->addText('name', 'Jmeno:')
                          //~ ->addRule($cmp, 'nesplnuje uzivatelskou funkci')
                        //~ ->addSubmit('tl');
      //~ $_POST = array('name' => '--1234', 'tl' => '');
      //~ $this->assertFalse($f->isSuccess());
    //~ }
//~ // pokud neni vyplneny text vyplni se nejaky implicitne
      //~ if (is_null($text)) {
        //~ $text = 'apply rule '.$type;
      //~ }
      //~ var_dump($this->form->defaultMsg);
//~ var_dump('errrr:', $value['error'][0] === 0, $value);
            //~ ->addSubmit('tl', null, 'Tlacitko');
// respektive jeden veliky formular kde se bude testovat celkova struktura!!!!
        //~ $this->assertEquals('<form action="" method="post">
  //~ <fieldset>
    //~ <input type="text" name="myname" />
    //~ <input value="Tlacitko" type="submit" name="tl" />
  //~ </fieldset>
//~ </form>', $f0);
//~
        //~ $f1 = new Form;
        //~ $f1->addText('age', 'Věk:')
            //~ ->addRule(Form::INTEGER, 'Věk musí být číslo')
            //~ ->addRule(Form::RANGE, 'Věk musí být od %d do %d let', array(18, 120))
          //~ ->addSubmit('tl', null, 'Tlacitko');
//~
        //~ $_POST = array('age' => null, 'tl' => 'Tlacitko');
        //~ $this->assertFalse($f1->isSuccess());
        //~ $this->assertTrue($f1->hasErrors()); //jeste nevyhodnocoval
        //~ $this->assertCount(2, $f1->getErrors());
        //~ $this->assertEquals(array('Věk musí být číslo', 'Věk musí být od 18 do 120 let'), $f1->getErrors());
        //~
        //~ $f2 = new Form;
        //~ $f2->addText('age', 'Věk:')
            //~ ->addRule(Form::MIN, 'Věk musí být minimalne %d let', 18)
          //~ ->addSubmit('tl', null, 'Tlacitko');
        //~ $_POST = array('age' => 18, 'tl' => 'Tlacitko');
        //~ $this->assertTrue($f2->isSuccess());
        //~ $_POST = array('age' => 20, 'tl' => 'Tlacitko');
        //~ $this->assertTrue($f2->isSuccess());
        //~ $_POST = array('age' => 17, 'tl' => 'Tlacitko');
        //~ $this->assertFalse($f2->isSuccess());
        //~ var_dump($f2->hasErrors(), $f2->getErrors());
      //~ echo '
//~ <form action="" method="post">
  //~ <fieldset>
    //~ <select size="3" multiple="multiple" name="vyber[]">
      //~ <option value="CA">Kanada</option>
      //~ <option value="US">USA</option>
      //~ <option value="?">jiná</option>
    //~ </select>
    //~ <input type="submit" name="tl" />
  //~ </fieldset>
//~ </form>
      //~ ';
    //~ /**
     //~ * staticka tovarnicka na vytvareni statickych samostatnych instnci
     //~ *
     //~ * @param
     //~ * @return
     //~ */
    //~ public function __callStatic($method, $parameters) {
      //~ $form = new Form;
      //~ $form->$method($parameters);
      //~ echo $form;
      //~ return $form;
    //~ }
if (is_array($conf[0])) { // pokud je rule pole (callback)
        $conf[0] = json_encode($conf[0]);
      }
var_dump(is_callable($conf[0]), !is_array($conf[0]) && !is_callable($conf[0]));
//!is_array($conf[0]) &&
        //~ var_dump($field->getValue());
        //~ var_dump('gg:',$field, $args);
        var_dump($args[0]->getSendValue());
        //return $field->value == $args[0]->value + $args[1]->value;
var_dump('subm: '.$this->form->submittedBy->getSendValue());
//~ $r = (is_string($rule) ? json_decode($rule) : $rule); // pokud je text, dekoduje se
          //~ var_dump($rule, is_callable($rule));
        //~ ->addUpload('soubor2')
        //~ ->addUpload('soubor', array('multiple' => true))
          //~ ->addConditionOn($f['vyber'], Form::COUNT, 2)//mezi podminka
            //~ ->addRule(Form::EQUAL, null, 'ahoj')
            //~ ->addRule(Form::EQUAL, null, count())
          //~ ->elseCondition()
            //~ ->addRule(Form::EQUAL, null, 'vole')
//~ var_dump($f2['num1'], $f2['num2']);
//~ function cmpRule($a, $b) {
  //~ return ($a % $b) === 1;
//~ }
//~ var_dump('f2 subm:', $f2->isSubmitted());
//~ ->setDefaultMessages($p)
        //~ ->addSelect('vyber', array('size' => 3, 'multiple' => true))

        //~ ->addSelect('vyber', array('size' => 3, 'multiple' => true))
          //~ ->setItems($countries2)
          //~ ->addRule(Form::FILLED)

          //~ ->addText('text')
          //~ ->addPassword('pass')
          //~ ->addTextArea('area1')
          //~ ->addTextarea('area2')
          //~ ->addHidden('hide')
          //~ ->addSubmit('sub')
          //~ ->addReset('res')
          //~ ->addImage('img')
          //~ ->addButton('but')
          //~ ->addUpload('file')
          //~ ->addSelect('sel')
            //~ ->setItems($countries)
          //~ ->addMultiSelect('multisel')
            //~ ->setItems($countries)
          //~ ->addCheckbox('check')
          //~ ->addCheckList('checklist')
            //~ ->setItems($countries2)
          //~ ->addRadioList('radiolist')
            //~ ->setItems($countries2)
          //~ ->addEmail('email')
          //~ ->addUrl('url')
          //~ ->addPhone('phone')
          //~ ->addNumber('num')
          //~ ->addRange('range')
          //~ ->addSearch('search')
          //~ ->addColor('col')
          //->addDatalist()
          //~ ->addDate('dat')
          //~ ->addWeek('week')
          //~ ->addMonth('month')
          //~ ->addTime('tim')
          //~ ->addDatetime('dat1')
          //~ ->addDateTime('dat2')
          //~ ->addDatetimeLocal('dateloc1')
          //~ ->addDateTimeLocal('dateloc2')
          //~ ->addLabel('lab')

      //~ ->addImage('myobr', 'icon_services_4.png')
      //~ ->addText('myobr', 'icon_services_4.png')
      $p = array(
        Form::COUNT => 'počet položek musí být: %d',
      );
//~ $g = $cond[0]->getSource();
      //~ var_dump($g['email']->getSource());
//'name' => $cond[0]->getHtmlName(),
                    //'source' => '',
//~ var_dump($this->onSubmit($this));
        //~ var_dump($s);
        //~ var_dump($this->onSubmit);
        //~ var_dump($this->onSubmit);
        //~ $this->onSubmit($this);
    //~ public function fireEvents() {
      //~ if ($this->isSuccess()) {
        //~ $s = $this->onSubmit;
        //~ $s($this);
      //~ }
    //~ }
   //~ public function test__call2() {
      //~ $this->markTestIncomplete(
          //~ 'This test has not been implemented yet.'
        //~ );
    //~ }

//~ $form->addPassword('password', 'Heslo:')
    //~ ->setRequired('Zvolte si heslo')
    //~ ->addRule(Form::MIN_LENGTH, 'Heslo musí mít alespoň %d znaky', 3);
//~
//~ $form->addPassword('password', 'Heslo:')
    //~ ->addRule(Form::MIN_LENGTH, 'Heslo musí mít alespoň %d znaky', 3);
    //~ ->addRule(Form::PATTERN, 'Musí obsahovat číslici', '.*[0-9].*');
//~
//~ $form->addTextArea('note', 'Poznámka:')
    //~ ->addRule(Form::MAX_LENGTH, 'Poznámka je příliš dlouhá', 10000);
//~
//~ 'onSubmit' => null, // predelat na pole a setry!
                          //~ 'onReset' => null,
//~ $form->addUpload('avatar', 'Avatar:')
    //~ ->addRule(Form::IMAGE, 'Avatar musí být JPEG, PNG nebo GIF.')
        //~ ->addRule(Form::MAX_FILE_SIZE, 'Maximální velikost souboru je 64 kB.', 64 * 1024 /* v bytech */);
//~ $form->addCheckbox('agree', 'Souhlasím s podmínkami')
    //~ ->addRule(Form::EQUAL, 'Je potřeba souhlasit s podmínkami', TRUE);
//~ $form->addUpload('avatar', 'Avatar:')
    //~ ->addRule(Form::IMAGE, 'Avatar musí být JPEG, PNG nebo GIF.')
        //~ ->addRule(Form::MAX_FILE_SIZE, 'Maximální velikost souboru je 64 kB.', 64 * 1024 /* v bytech */);
//~
//~ $form->addCheckbox('agree', 'Souhlasím s podmínkami')
    //~ ->addRule(Form::EQUAL, 'Je potřeba souhlasit s podmínkami', TRUE);
//~
//~ $sex = array(
    //~ 'm' => 'muž',
    //~ 'f' => 'žena',
//~ );
//~ $form->addRadioList('gender', 'Pohlaví:', $sex);
//~
//~ // pro vypsání možností do 1 řádku
//~ $form->addRadioList('gender', 'Pohlaví:', $sex)
    //~ ->getSeparatorPrototype()->setName(NULL);
//~
//~ $countries = array(
    //~ 'Europe' => array(
        //~ 'CZ' => 'Česká Republika',
        //~ 'SK' => 'Slovensko',
        //~ 'GB' => 'Velká Británie',
    //~ ),
    //~ 'CA' => 'Kanada',
    //~ 'US' => 'USA',
    //~ '?'  => 'jiná',
//~ );
//~ $form->addSelect('country', 'Země:', $countries)
    //~ ->setPrompt('Zvolte zemi');
//~
//~ $form->addPassword('password', 'Heslo:')
    //~ // pokud není heslo delší než 5 znaků
    //~ ->addCondition(Form::MAX_LENGTH, 5)
        //~ // pak bude muset obsahovat číslici
        //~ ->addRule(Form::PATTERN, 'Musí obsahovat číslici', '.*[0-9].*');
//~
  //~ $form->addCheckbox('newsletters', 'zasílejte mi newslettery');
//~
//~ $form->addText('email', 'E-mail:')
    //~ // pokud je checkbox zaškrtnut
    //~ ->addConditionOn($form['newsletters'], Form::EQUAL, TRUE)
        //~ // pak vyžaduj e-mail
        //~ ->addRule(Form::FILLED, 'Zadejte e-mailovou adresu');
//~
//~ function divisibilityValidator($item, $arg)
//~ {
    //~ return $item->value % $arg === 0;
//~ }
//~
//~ $form->addText('number', 'Číslo:')
    //~ ->addRule('divisibilityValidator', 'Číslo musí být dělitelné %d.', 8);
//~
var_dump(array($this->form->lastElement->getHtmlName() => $value));
    /**
     * Sets control's default value
     * nastaveni vychozi hodnoty do value
     * umistuje se pred ->render()
     * alias k setDefaultValue z Form
     *
     * @param value hodnota value
     * @return this
     */
    public function setDefaultValue($value) { // overit ze se tam ukaze jen pokud nebylo odeslano!
      $this->setValue($value);  // nastavuje vnitrne value
      return $this;
    }
    //~ $form->addCheckbox('agree', 'Agree with conditions')
    //~ ->setDefaultValue(TRUE);
    /**
     * @covers classes\Form::addCondition
     * @   Implement testAddCondition().
     */
    public function testAddCondition()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }

    /**
     * @covers classes\Form::addConditionOn
     * @   Implement testAddConditionOn().
     */
    public function testAddConditionOn()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }

    /**
     * @covers classes\Form::elseCondition
     * @   Implement testElseCondition().
     */
    public function testElseCondition()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }

    /**
     * @covers classes\Form::endCondition
     * @   Implement testEndCondition().
     */
    public function testEndCondition()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }
    /**
     * @covers classes\Form::setEmptyValue
     * @   Implement testSetEmptyValue().
     */
    public function testSetEmptyValue()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }
/~ $form->addText('name', 'Jméno');
//~ $form->addText('age', 'Věk');
//~
//~ $form->setDefaults(array(
    //~ 'name' => 'John',
    //~ 'age' => '33'
//~ ));
//~
//~ $form->addText('email', 'E-mail')
    //~ ->setDefaultValue('user@example.com');
//~
//~ $form->addCheckbox('agree', 'Agree with conditions')
    //~ ->setDefaultValue(TRUE);

//~ require_once('./Nette/loader.php');
//~
//~ define(HESLO_MIN_ZNAKU,6);
//~ define(URL_ADRESA_OBCHODNICH_PODMINEK,'http://www.example.com/');
//~
//~ function loginValidator($item){
  //~ return dibi::query('SELECT [id] FROM [zakaznici] WHERE [nick]=%s LIMIT 1',$item->getValue())->count() == 0 ? true : false;
//~ }
//~
//~
//~ $form = new Form('registracni_formular');
//~ $form->setMethod('post');
//~ $form->getElementPrototype()->id = 'registrace';
//~ $form->getElementPrototype()->class = 'formular';
//~ $form->addGroup('Přihlašovací údaje');
//~ $form->addText('nick','Login:',25)
     //~ ->addRule(Form::FILLED, 'Login nebyl vyplněn')
     //~ ->addRule('loginValidator', 'Tento login již existuje');
//~ $form->addPassword('heslo','Heslo:',25)
      //~ ->addRule(Form::FILLED, 'Heslo nebylo vyplněno')
      //~ ->addRule(Form::MIN_LENGTH, 'Heslo je příliš krátké', HESLO_MIN_ZNAKU)
      //~ ->setOption('description','Heslo musí mít minimálně '.HESLO_MIN_ZNAKU.' znaků');
//~ $form->addPassword('heslo2','Zopakujte heslo:',25)
      //~ ->addRule(Form::FILLED, 'Heslo nebylo vyplněno')
      //~ ->addRule(Form::EQUAL, 'Hesla se neshodují',$form['heslo']);
//~
//~ $form->addGroup('Povinné údaje');
//~
//~ $form->addText('email', 'Email:',35)
      //~ ->addRule(Form::FILLED, 'Email nebyl vyplněn')
      //~ ->addRule(Form::EMAIL, 'Zadaný email není platným emailem')
      //~ ->emptyValue = '@';
//~
//~ $typ_osoby = array(
  //~ '1' => 'Fyzická osoba',
  //~ '2' => 'Právnická osoba',
//~ );
//~
//~ $form->addRadioList('typ', 'Typ:', $typ_osoby)->addRule(Form::FILLED, 'Vyberte typ registrovaného subjektu')->addCondition(Form::EQUAL, 2)->toggle('povinneUdajePravnicka');
//~ $form->addText('jmeno','Jméno:',35)->addRule(Form::FILLED, 'Zadejte jméno');
//~ $form->addText('prijmeni','Příjmení:',35)->addRule(Form::FILLED, 'Zadejte příjmení');
//~ $form->addText('ulice','Ulice:',35)->addRule(Form::FILLED, 'Zadejte ulici');
//~ $form->addText('mesto','Město:',35)->addRule(Form::FILLED, 'Zadejte město');
//~ $form->addText('psc','PSČ:',35)->addRule(Form::FILLED, 'Zadejte PSČ');
//~ $souhlasLabel = Html::el()->setHtml('Souhlasím s obchodními podmínkami.');
//~ $form->addCheckbox('souhlas', $souhlasLabel)->addRule(Form::FILLED, 'Pro pokračování je nutné souhlasit s podmínkami.');
//~
//~ $form->addGroup('Povinné údaje právnické osoby')->setOption('container', Html::el('fieldset')->id('povinneUdajePravnicka'));
//~ $form->addText('firma','Firma:',35)->addConditionOn($form['typ'], Form::EQUAL, 2)->addRule(Form::FILLED,'Zadejte firmu');
//~ $form->addText('ico','IČO:',35)->addConditionOn($form['typ'], Form::EQUAL, 2)->addRule(Form::FILLED,'Zadejte IČO');
//~ $form->addText('dic','DIČ:',35)->addConditionOn($form['typ'], Form::EQUAL, 2)->addRule(Form::FILLED,'Zadejte DIČ');
//~ $form->addGroup('Nepovinné údaje')->setOption('container', Html::el('fieldset')->id('nepovinneUdaje'));
//~ $form->addText('telefon','Telefon:',35);
//~ $form->addText('mobil','Mobil:',35);
//~ $form->addText('fax','Fax:',35);
//~ $form->setCurrentGroup(NULL);
//~
//~ $form->addSubmit('ok','Registrovat se')->getControlPrototype()->class = 'submit';
//~ $form->addProtection('Vypršela platnost formuláře.');
//~
//~ if ($form->isSubmitted() and $form->isValid()) {
  //~ $values = $form->getValues();
  //~ unset($values['heslo2']);
  //~ unset($values['souhlas']);
  //~ $ok = dibi::query('INSERT INTO [zakaznici] %v',$values);
  //~ //..... nasleduje redirect
  //~
//~ } else {
//~

  //~ $defaults = array('typ'=>1);
  //~ $form->setDefaults($defaults);
  //~
//~ }
//~ $renderer = $form->getRenderer();
//~ $renderer->wrappers['controls']['container'] = 'dl';
//~ $renderer->wrappers['pair']['container'] = NULL;
//~ $renderer->wrappers['label']['container'] = 'dt';
//~ $renderer->wrappers['control']['container'] = 'dd';
//~
//~ echo $form;
//~ $this->object->addText('mujtext', 'popisek', 'hodnota', array('class' => 'foo'));
        //~ ->addText('txt')
        //~ ->addText('txt2', null, 0)

        //~ ->addUpload('soubor')
          //~ ->addRule(Form::FILLED)
          //->addRule(Form::MAX_FILE_SIZE, null, 64 * 1024)

        //~ ->addUpload('soubor2', array('multiple' => true))
          //~ ->addRule(Form::FILLED)

        //~ ->addText('txt')
          //~ ->addRule(Form::FILLED)

      //~ var_dump($f['txt']->getValue());
//~ var_dump($f->getElements());
        //~ $countries = array(
            //~ 'Europe' => array(
                //~ 'CZ' => 'Česká Republika',
                //~ 'SK' => 'Slovensko',
                //~ 'GB' => 'Velká Británie',
            //~ ),
            //~ 'rusko' => array(
              //~ 'a' => 'aaaaa',
              //~ 'b' => 'bbbb',
              //~ 'c' => 'cccc',
              //~ 'd' => 'dddd',
            //~ ),
            //~ 'CA' => 'Kanada',
            //~ 'US' => 'USA',
            //~ '?'  => 'jiná',
          //~ );
//~
        //~ $countries2 = array(
            //~ 'CA' => 'Kanada',
            //~ 'US' => 'USA',
            //~ '?'  => 'jiná',
        //~ );
// dopsat sakra testy!!!!
    /**
     * @covers classes\Form::getEmptyValue
     * @   Implement testGetEmptyValue().
     */
    public function testGetEmptyValue()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }

    /**
     * @covers classes\Form::setDefaultValue
     * @   Implement testSetDefaultValue().
     */
    public function testSetDefaultValue()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }
//~ form->addText('name', 'Jméno')
     //~ ->addRule($form::FILLED, 'Vyplňte své jméno');
//~ $form->addText('username', 'Uživatelské jméno')
     //~ ->addRule($form::FILLED, 'Vyplňte své uživatelské jméno')
     //~ ->addRule(callback('MyApplication\Models\Users', 'isUsernameAvailable'), //v databázi ověříme, že dané jméno ještě není registrováno
         //~ 'Toto uživatelské jméno je již registrováno');
//~ $form->addText('email', 'E-mail')
     //~ ->addRule($form::FILLED, 'Vyplňte svůj email')
     //~ ->addRule($form::EMAIL, 'Vyplňte platný email')
     //~ ->addRule(callback('MyApplication\Models\Users', 'isEmailAvailable'), //v databázi ověříme, že daný email ještě není registrován
         //~ 'Tento e-mail je již registrován');
//~ $form->addPassword('password', 'Heslo')
     //~ ->addRule($form::FILLED, 'Vyplňte své budoucí heslo')
     //~ ->addRule($form::MIN_LENGTH, 'Minimální délka hesla je %d znaků', 6);
//~ $form->addPassword('passwordCheck', 'Ověření hesla')
     //~ ->addRule($form::EQUAL, 'Hesla musí být stejné', $form['password']); //ověřovací heslo musí být shodné
//~ $form->addCheckbox('agreeToTerms', 'Souhlas s podmínkami')
     //~ ->addRule($form::FILLED, 'Musíte souhlasit s podmínkami'); //s podmínkami je nutno souhlasit
//~
//~ $form->addSubmit('submitter', 'Registrovat');

//mc: prvni house: -506, 92, -326
//vesnice: 2360, 70, 2370
//vesnice-doly: 2395, 41, 2346
//1.portal (fortees): -156, 54, -32
//2.portal: 225, 99, 287

//http://thefinishedbox.com/files/freebies/loginfreebie/index.html

        //~ function my_valid($item, $arg) {
          //~ return ($item === $arg);
        //~ }
  //~ ->addLabel('nejaky pokusny label')
            //~ ->addUrl('adresa')
            //~ ->addPhone('telef', 'muj label tel')
              //~ ->addRule('my_valid', 'nesplnila se validacni funkce! pro <b>%value, %label, %name</b>', 'telefoon')
            //~ ->addNumber('cislo')
            //~ ->addSearch('hledaj')

            //~ ->addGroup()
            //~ ->removeGroup('')

            //~ ->addRange('rozsah', array('max' => 20))
            //~ ->addColor('barva')
            //~ ->addDate('datum')

            //~ ->addGroup('skuipina 01')
            //~ //->addGroup()

            //~ ->addWeek('tyden')
            //~ ->addMonth('mesic')
            //~ ->addTime('cas')
            //~ ->addDateTime('datumcas')
            //~ ->addDateTimeLocal('datecaslok')

            //~ ->addTextArea('texty')
            //~ ->addTextArea('texty1')
            //~ ->addHidden('skryte')
            //~ ->addImage('obrtlacitko')
//~
            //~ ->addGroup('skuipina 02')
              //~ ->addHidden('skryte')
//~
            //~ ->addButton('obyctl')
            //~ ->addUpload('soubor0')
            //~ ->addUpload('soubor', array('multiple' => true))
            //~ ->addSelect('vyber0', array('value' => $countries))
            //~ ->addSelect('vyber1')
              //~ ->setItems($countries)
            //~ ->addSelect('vyberRange', array('range' => array(5, 15)))
            //~ ->addSelect('vyberInterval', array('range' => array(date('H') - 5, date('H') + 5)))
            //~ ->addSelect('vyber2', array('value' => $countries2))
              //~ ->setPrompt('Select your country')
              //~ ->addRule($frm::FILLED, 'Vyberte zemi')
            //~ ->addMultiSelect('multivyber', array('value' => $countries, 'size' => 6))

            //~ ->addCheckbox('check')
            //~ ->addCheckbox('check1', array('value' => 'souhlasim', 'label' => 'uzasny co?'))
            //~ ->addCheckbox('check2', array('label' => 'uzasny popisek co?'))
//~
            //~ ->addGroup()

            //~ ->addText('nick', 'Login:', 25)

              //~ ->setDefaultValue('user@example.com')
              //->setEmptyValue('@')
              //~ ->addRule($frm::FILLED, 'pokus Musi byt vyplneno! ,,%label,,%name,,%value ')
              //~ ->addRule($frm::MIN_LENGTH, 'pokus musí mít alespoň %d znaky', 3)

            //~ ->addCondition($frm::FILLED) //pokud je vyplneno
                //~ ->addRule($form::RANGE, 'musi byt v rozmezi %s az %s', array(1, 15))
                //~ ->addRule(~$form::IS_IN, 'nesmi byt value: %value', array(11, 9, 5))
            //~ ->addCondition($frm::EQUAL, 1)
                //~ ->addRule($frm::MIN_LENGTH, 'pokus musí mít alespoň %d znaky', 3)
            //~ ->addCondition($frm::EQUAL, 2)
                //~ ->addRule($frm::MIN_LENGTH, 'pokus musí mít alespoň %d znaky', 8)
                //~ //->addRule(~$frm::EQUAL, 'pokus musí mít alespoň %d znaky', 15)
              //~ ->elseCondition()
                //~ ->addRule($frm::MIN_LENGTH, 'pokus musí mít alespoň %d znaky', 10)
                //->addRule($frm::FILLED, 'pokus musí mít byt vyplnen')
              //~ ->endCondition()
            //->removeGroup('')
            //~ ->addRadioList('radiolist', array('value' => $countries2))
            //~ ->addRadioList('radiolist1')
 //~ ->setItems($countries2)
//->addGroup()  //konec skupiny
            //->addPassword('password', array('label' => 'Heslo:'))
            //->setRequired('Zvolte si heslo')
            //->addRule($form::MIN_LENGTH, 'Heslo musí mít alespoň %d znaky', 3)

            //->addPassword('passwordVerify', array('label' => 'Heslo pro kontrolu:'))
            //->setRequired('Zadejte prosím heslo ještě jednou pro kontrolu')
            //->addRule($form::EQUAL, 'Hesla se neshodují', $frm['password'])

            //->addText('pokus2', array('class' => 'trida_inputu2'))
            //~ ;
//var_dump($_POST);
//$frm = new Form;
        //var_dump($frm->getAction(), $frm->getMethod());
//~ Form::FILLED	je prvek vyplněn?
//~ Form::EQUAL	je hodnota rovna uvedené?
//~ Form::IS_IN	testuje, zda hodnota spadá do výčtu
//~ Form::VALID	je prvek vyplněn správně?
//~
//~ V textu chybových hlášek lze používat i speciální zástupné řetězce:
//~
//~ %label	nahradí se textem popisky
//~ %name	nahradí se identifikátorem prvku
//~ %value	nahradí se zadanou hodnou
//~
//~ ->toggle("shippingAddress", FALSE)
 //echo $html::div()->style('backgroud: red')->style('width', 100)->style(array('height' => 200));

        //echo $frm;

        //var_dump($frm['pokus2']->getAttribute('class'));
        //var_dump($frm['pokus2']->getCosik());
        //var_dump($frm);


        //~ $frm->setDefaults(array(
          //~ 'telef' => 420609,
          //~ 'mail' => 'mejlovic@hu.com',
        //~ ));

        //~ var_dump($frm['pokus']->getValue(), $frm['pokus']->getSendValue());

        //$frm->setReturnValues($_POST, array('password', 'password2'));
        //~ $frm->setReturnValues($_POST);  //, array('password', 'password2')
        //~ var_dump($frm['nick']->isFilled(), $frm['texty']->isFilled(), $frm['vyberInterval']->isFilled());

        //~ if ($frm->isSubmitted()) {
          //~ if ($frm->isValid()) {
            //~ //...
            //~ var_dump($frm->getValues());
          //~ } else {
//~
            //~ var_dump($frm->getErrors());
          //~ }
        //~ }
// test nad polem formularu!!!!!
        $f = new Form($p);
        $f->addText('popis', 'Tvuj text: ', 'Vlozeny text...')
            ->setRequired('popis musi byt plne')
            ->addRule(~Form::EQUAL, 'zadne %s!', 'hopla')
            ->addRule(Form::MIN_LENGTH, 'kratke nez %s!', 6)
          ->addUpload('soubor', 'Tvuj single soubor: ')
            //~ ->setRequired('soubor musi byt plne')
            ->addRule(Form::IMAGE, 'obrazek musi byt jpg, png, gif')
            ->addRule(Form::MAX_FILE_SIZE, 'Maximální velikost souboru je %s kB.', 150 * 1024) // v bytech
            ->addRule(Form::MIME_TYPE, 'neni daneho %s typu', 'image/png')
          //~ ->addUpload('soubor2', array('label' => 'Tvuj multivyber pro soubor2: ', 'multiple' => true))
            //~ ->addRule(Form::IMAGE, 'obrazek musi byt jpg, png, gif')
            //~ ->addRule(Form::MAX_FILE_SIZE, 'Maximální velikost souboru je 64 kB.', 64 * 1024) // v bytech
            //~ ->addRule(Form::MIME_TYPE, 'neni daneho mime typu', 'image/jpeg')
          ->addSubmit('tlacitko', 'Odeslat data');

          $f->setReturnValues($_POST);

          if ($f->isSubmitted()) {

            if ($f->isValid()) {
              var_dump($f->getValues());
            } else {
              var_dump($f->getErrors());
            }

          }
/*
        $p = array(
                Form::CALLBACK_LABEL => function($r) {
                  return $r['html']::label()->add($r['label'] ? $r['html']::span()->setText($r['label']) : null)->add($r['element']); }
                );


        //~ if (isset($_FILES['soubor']['tmp_name'])) {
          //~ if (is_uploaded_file($_FILES['soubor']['tmp_name'])) {
            //~ var_dump($_POST, $_FILES);
            //~ if (move_uploaded_file($_FILES['soubor']['tmp_name'], __DIR__.'/.cache/'.$_FILES['soubor']['name'])) {
              //~ echo 'zkopirovano...';
            //~ }
          //~ }
        //~ }
$form->render(7)
*/



//~ $_SERVER['REQUEST_METHOD'] = 'POST';
//~ $_POST = array('name'=>'John Doe ','age'=>'','email'=>'  @ ','send'=>'on','street'=>'','city'=>'','country'=>'HU','password'=>'xxx','password2'=>'','note'=>'','submit1'=>'Send','userid'=>'231',);
//~
//~
//~ $countries = array(
	//~ 'Europe' => array(
		//~ 'CZ' => 'Czech Republic',
		//~ 'SK' => 'Slovakia',
		//~ 'GB' => 'United Kingdom',
	//~ ),
	//~ 'CA' => 'Canada',
	//~ 'US' => 'United States',
	//~ '?'  => 'other',
//~ );
//~
//~ $sex = array(
	//~ 'm' => 'male',
	//~ 'f' => 'female',
//~ );
//~
//~
//~
//~ // Step 1: Define form with validation rules
//~ $form = new Form;
//~
//~ // group Personal data
//~ $form->addGroup('Personal data')
	//~ ->setOption('description', 'We value your privacy and we ensure that the information you give to us will not be shared to other entities.');
//~
//~ $form->addText('name', 'Your name:')
	//~ ->addRule(Form::FILLED, 'Enter your name');
//~
//~ $form->addText('age', 'Your age:')
	//~ ->addRule(Form::FILLED, 'Enter your age')
	//~ ->addRule(Form::INTEGER, 'Age must be numeric value')
	//~ ->addRule(Form::RANGE, 'Age must be in range from %d to %d', array(10, 100));
//~
//~ $form->addRadioList('gender', 'Your gender:', $sex);
//~
//~ $form->addText('email', 'Email:')
	//~ ->setEmptyValue('@')
	//~ ->addCondition(Form::FILLED) // conditional rule: if is email filled, ...
		//~ ->addRule(Form::EMAIL, 'Incorrect email address'); // ... then check email
//~
//~
//~ // group Shipping address
//~ $form->addGroup('Shipping address')
	//~ ->setOption('embedNext', TRUE);
//~
//~ $form->addCheckbox('send', 'Ship to address')
	//~ ->addCondition(Form::EQUAL, TRUE) // conditional rule: if is checkbox checked...
		//~ ->toggle('sendBox'); // toggle div #sendBox
//~
//~

//~ // subgroup
//~ $form->addGroup()
	//~ ->setOption('container', Html::el('div')->id('sendBox'));
//~
//~ $form->addText('street', 'Street:');
//~
//~ $form->addText('city', 'City:')
	//~ ->addConditionOn($form['send'], Form::EQUAL, TRUE)
		//~ ->addRule(Form::FILLED, 'Enter your shipping address');
//~
//~ $form->addSelect('country', 'Country:', $countries)
	//~ ->setPrompt('Select your country')
	//~ ->addConditionOn($form['send'], Form::EQUAL, TRUE)
		//~ ->addRule(Form::FILLED, 'Select your country');
//~
//~ $form->addSelect('countrySetItems', 'Country:')
	//~ ->setPrompt('Select your country')
	//~ ->setItems($countries);
//~
//~
//~ // group Your account
//~ $form->addGroup('Your account');
//~
//~ $form->addPassword('password', 'Choose password:')
	//~ ->addRule(Form::FILLED, 'Choose your password')
	//~ ->addRule(Form::MIN_LENGTH, 'The password is too short: it must be at least %d characters', 3);
//~
//~ $form->addPassword('password2', 'Reenter password:')
	//~ ->addConditionOn($form['password'], Form::VALID)
		//~ ->addRule(Form::FILLED, 'Reenter your password')
		//~ ->addRule(Form::EQUAL, 'Passwords do not match', $form['password']);
//~
//~ $form->addUpload('avatar', 'Picture:')
	//~ ->addCondition(Form::FILLED)
		//~ ->addRule(Form::IMAGE, 'Uploaded file is not image');
//~
//~ $form->addHidden('userid');
//~
//~ $form->addTextArea('note', 'Comment:');
//~
//~
//~ // group for buttons
//~ $form->addGroup();
//~
//~ $form->addSubmit('submit', 'Send');
//~
//~
//~
//~ $defaults = array(
	//~ 'name'    => 'John Doe',
	//~ 'userid'  => 231,
	//~ 'country' => 'CZ', // Czech Republic
//~ );
//~
//~ $form->setDefaults($defaults);
//~ $form->fireEvents();

//~ $form = new Form;
//~
//~ $form->addProtection('Security token did not match. Possible CSRF attack.', 3);
//~
//~ $form->addHidden('id')->setDefaultValue(123);
//~ $form->addSubmit('submit', 'Delete item');
//~ $form->fireEvents();



//~ $countries = array(
	//~ 'Europe' => array(
		//~ 'CZ' => 'Czech Republic',
		//~ 'SK' => 'Slovakia',
		//~ 'GB' => 'United Kingdom',
	//~ ),
	//~ 'CA' => 'Canada',
	//~ 'US' => 'United States',
	//~ '?'  => 'other',
//~ );
//~
//~ $sex = array(
	//~ 'm' => Html::el('option', 'male')->style('color: #248bd3'),
	//~ 'f' => Html::el('option', 'female')->style('color: #e948d4'),
//~ );
//~
//~
//~
//~ // Step 1: Define form with validation rules
//~ $form = new Form;
//~ // setup custom rendering
//~ $renderer = $form->renderer;
//~ $renderer->wrappers['form']['container'] = Html::el('div')->id('form');
//~ $renderer->wrappers['form']['errors'] = FALSE;
//~ $renderer->wrappers['group']['container'] = NULL;
//~ $renderer->wrappers['group']['label'] = 'h3';
//~ $renderer->wrappers['pair']['container'] = NULL;
//~ $renderer->wrappers['controls']['container'] = 'dl';
//~ $renderer->wrappers['control']['container'] = 'dd';
//~ $renderer->wrappers['control']['.odd'] = 'odd';
//~ $renderer->wrappers['control']['errors'] = TRUE;
//~ $renderer->wrappers['label']['container'] = 'dt';
//~ $renderer->wrappers['label']['suffix'] = ':';
//~ $renderer->wrappers['control']['requiredsuffix'] = " \xE2\x80\xA2";
//~
//~
//~ // group Personal data
//~ $form->addGroup('Personal data');
//~ $form->addText('name', 'Your name')
	//~ ->addRule(Form::FILLED, 'Enter your name');
//~
/~ $countries = array(
	//~ 'Select your country',
	//~ 'Europe' => array(
		//~ 'CZ' => 'Czech Republic',
		//~ 'SK' => 'Slovakia',
		//~ 'GB' => 'United Kingdom',
	//~ ),
	//~ 'CA' => 'Canada',
	//~ 'US' => 'United States',
	//~ '?'  => 'other',
//~ );
//~
//~ $sex = array(
	//~ 'm' => 'male',
	//~ 'f' => 'female',
//~ );
//~
//~
//~
//~ // Step 1: Define form with validation rules
//~ $form = new Form;
//~
//~ // group First person
//~ $form->addGroup('First person');
//~ $sub = $form->addContainer('first');
//~ $sub->addText('name', 'Your name:');
//~ $sub->addText('email', 'Email:');
//~ $sub->addText('street', 'Street:');
//~ $sub->addText('city', 'City:');
//~ $sub->addSelect('country', 'Country:', $countries);
//~
//~ // group Second person
//~ $form->addGroup('Second person');
//~ $sub = $form->addContainer('second');
//~ $sub->addText('name', 'Your name:');
//~ $sub->addText('email', 'Email:');
//~ $sub->addText('street', 'Street:');
//~ $sub->addText('city', 'City:');
//~ $sub->addSelect('country', 'Country:', $countries);
//~
//~ // group for buttons
//~ $form->addGroup();
//~
//~ $form->addSubmit('submit', 'Send');
//~ $form->fireEvents();
//~
//~ Assert::same( array(
   //~ 'first' => array(
      //~ 'name' => 'James Bond',
      //~ 'email' => 'bond@007.com',
      //~ 'street' => 'Unknown',
      //~ 'city' => 'London',
      //~ 'country' => 'GB',
   //~ ),
   //~ 'second' => array(
      //~ 'name' => 'Jim Beam',
      //~ 'email' => 'jim@beam.com',
      //~ 'street' => '',
      //~ 'city' => '',
      //~ 'country' => 'US',
   //~ ),
//~ ), $form->getValues(TRUE) );


//~ $countries = array(
    //~ 'Co' => 'Kanadads',
    //~ 'Europe' => array(
        //~ 'CZ' => 'Česká Republika',
        //~ 'SK' => 'Slovensko',
        //~ 'GB' => 'Velká Británie',
    //~ ),
    //~ 'CA' => 'Kanada',
    //~ 'US' => 'USA',
    //~ '?'  => 'jiná',
    //~ ->addSubmit('seeend', array('value' => 'Poslat...'))
            //~ ->addReset('res', array('value' => 'resset'))
 /**
     * @covers classes\Form::setDefaults
     * @   Implement testSetDefaults().
     */
    public function testSetDefaults()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }

    /**
     * @covers classes\Form::setReturnValues
     * @   Implement testSetReturnValues().
     */
    public function testSetReturnValues()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }

    /**
     * @covers classes\Form::addRule
     * @   Implement testAddRule().
     */
    public function testAddRule()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }

    /**
     * @covers classes\Form::setRequired+setMaxLength
     * @   Implement testSetRequired().
     */
    public function testSetRequired()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }

    /**
     * @covers classes\Form::getPrompt
     * @   Implement testGetPrompt().
     */
    public function testGetPrompt()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }

    /**
     * @covers classes\Form::setPrompt
     * @   Implement testSetPrompt().
     */
    public function testSetPrompt()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }
//~ var_dump($frm['mail']->getAttribute('class'));
            //~ var_dump($frm['mail']->getAttribute('id'));
            //~ var_dump($frm['mail']->getEmptyValue());
//~ $form->addSelect('countrySetItems', 'Country:')
	//~ ->setPrompt('Select your country')
	//~ ->setItems($countries);
//~

//~ $form->addText('age', 'Your age')
	//~ ->addRule(Form::FILLED, 'Enter your age')
	//~ ->addRule(Form::INTEGER, 'Age must be numeric value')
	//~ ->addRule(Form::RANGE, 'Age must be in range from %d to %d', array(10, 100));
//~
        //~ $label_callback = function($row) {
          //~ return $row['html']::label()->add($row['label'] ? $row['html']::span()->setText($row['label']) : null)->add($row['element']);
        //~ };

        //~ $checkobal_callback = function($row) {
          //~ return $row['html']::div()->class('foo')->add($row['rows']);
        //~ };
//~
        //~ $checkelem_callback = function($row) {
          //~ return array($row['element'], $row['html']::strong()->class('boo')->setText($row['value']));
        //~ };

        //~ $frm = new $form(array($form::CALLBACK_LABEL => $label_callback));
//~ $form->addText('pearCount', 'Počet hrušek')
     //~ ->addRule($form::FILLED, 'Musíte uvést kolik hrušek chcete')
     //~ ->addRule($form::INTEGER, 'Počet hrušek musí být číslo')
     //~ ->addRule($form::RANGE, 'Můžete koupit pouze %d-%d hrušek', array(5, 20));
//~
//~ $form->addText('username', 'Uživatelské jméno')
     //~ ->addRule(~$form::EQUAL, 'Bylo použito zakázané uživatelské jméno', array('admin', 'administrator'));
 //~ ->addPassword('password', array('label' => 'Heslo:'))
              //~ ->setEmptyValue('userr')
                //~ ->addRule($frm::FILLED, 'pass1 Musi byt vyplneno!')
                //~ ->addRule($frm::MIN_LENGTH, 'pass musí mít alespoň %d znaky', 3)
                //~ ->addRule($frm::PATTERN, 'pass obsahovat číslici', '.*[0-9].*')
              //->setRequired('musi byt vyplneno!')
//~ //~
            //~ ->addPassword('password2', array('label' => 'Heslo2:'))
                //~ ->addRule($frm::FILLED, 'pass2 Musi byt vyplneno!')
                //->addCondition($frm::FILLED, 2)
                //~ ->addRule($frm::EQUAL, 'hesla musi byt stejny!', $frm['password'])
                //~ //->addRule($frm::EQUAL, 'hesla musi byt stejny!', 1)

            //~ ->addEmail('mail', array('id' => 'eimal'))
              //->setDefaultValue('user@example.com')
              //->setEmptyValue('user@example.com')
              //~ ->setAttribute('class', 'nečuč')
              //~ ->addRule($frm::EMAIL, 'musi byt valdni mail')

            //~ ->addCheckList('checklist', array('value' => $countries2, 'multiple' => true))
            //~ ->addCheckList('checklist1', array('multiple' => true))
              //~ ->setItems($countries2)
//~ ->addElement('captcha', array('label' => 'popisek'), $html::img()->src('http://upload.wikimedia.org/wikipedia/commons/thumb/3/30/Googlelogo.png/320px-Googlelogo.png'))
            //~ ->addBackLink('navrat zpet', array('a' => 'b'))

            //~ ->addSubmit('seeend', array('value' => 'Poslat...'))
            //~ ->addReset('res', array('value' => 'resset'))
//~ var_dump($frm['mail']->getAttribute('class'));
            //~ var_dump($frm['mail']->getAttribute('id'));
            //~ var_dump($frm['mail']->getEmptyValue());
                    //~ $frm->addConditionOn($frm['pokus'], $frm::EQUAL, 3)
                //~ ->addRule(~$frm::FILLED, 'DSDSDSDpass Musi byt vyplneno!ds sd sad')
            //~ ;

        //~ $frm->addSelect('vyber3', array('value' => $countries))->setPrompt('Select your country');
        //~ $frm->setPrompt('prenastaveny novy prompt');
        //var_dump($frm['checklist']->getItems());
        //var_dump($frm['radiolist1']->getItems() === $countries2);

        //var_dump($frm->getPrompt());

        //var_dump($frm['pokus']->getAttribute('class'));
        //var_dump($frm['pokus']->getValue());
        //var_dump($frm);
        //print_r($frm);
//~ $form->addText('age', 'Your age')
	//~ ->addRule(Form::FILLED, 'Enter your age')
	//~ ->addRule(Form::INTEGER, 'Age must be numeric value')
	//~ ->addRule(Form::RANGE, 'Age must be in range from %d to %d', array(10, 100));
//~
//~ $form->addSelect('gender', 'Your gender', $sex);
//~
//~ $form->addText('email', 'Email')
	//~ ->setEmptyValue('@')
	//~ ->addCondition(Form::FILLED) // conditional rule: if is email filled, ...
		//~ ->addRule(Form::EMAIL, 'Incorrect email address'); // ... then check email
//~
//~
//~ // group Shipping address
//~ $form->addGroup('Shipping address')
	//~ ->setOption('embedNext', TRUE);
//~
//~ $form->addCheckbox('send', 'Ship to address')
	//~ ->addCondition(Form::EQUAL, TRUE) // conditional rule: if is checkbox checked...
		//~ ->toggle('sendBox'); // toggle div #sendBox
//~
//~

//~ // subgroup
//~ $form->addGroup()
	//~ ->setOption('container', Html::el('div')->id('sendBox'));
//~
//~ $form->addText('street', 'Street');
//~
//~ $form->addText('city', 'City')
	//~ ->addConditionOn($form['send'], Form::EQUAL, TRUE)
		//~ ->addRule(Form::FILLED, 'Enter your shipping address');
//~
//~ $form->addSelect('country', 'Country', $countries)
	//~ ->setPrompt('Select your country')
	//~ ->addConditionOn($form['send'], Form::EQUAL, TRUE)
		//~ ->addRule(Form::FILLED, 'Select your country');
//~
//~
//~ // group Your account
//~ $form->addGroup('Your account');
//~
//~ $form->addPassword('password', 'Choose password')
	//~ ->addRule(Form::FILLED, 'Choose your password')
	//~ ->addRule(Form::MIN_LENGTH, 'The password is too short: it must be at least %d characters', 3)
	//~ ->setOption('description', '(at least 3 characters)');
//~
//~ $form->addPassword('password2', 'Reenter password')
	//~ ->addConditionOn($form['password'], Form::VALID)
		//~ ->addRule(Form::FILLED, 'Reenter your password')
		//~ ->addRule(Form::EQUAL, 'Passwords do not match', $form['password']);
//~
//~ $form->addUpload('avatar', 'Picture');
//~
//~ $form->addHidden('userid');
//~
//~ $form->addTextArea('note', 'Comment');
//~
//~
//~ // group for buttons
//~ $form->addGroup();
//~
//~ $form->addSubmit('submit', 'Send');
//~
//~
//~
//~ $defaults = array(
	//~ 'name'    => 'John Doe',
	//~ 'userid'  => 231,
	//~ 'country' => 'CZ', // Czech Republic
//~ );
//~
//~ $form->setDefaults($defaults);
//~ $form->fireEvents();

//~ );
        //~ ->addMultiSelect('mulisel', array('multiple' => false, 'size' => 1))
          //~ ->setItems($countries)
        //~ ->addCheckbox('checkbox', 'aaa')
        //~ ->addCheckList('checklist')
          //~ ->setItems($data->getZeme())
        //~ ->addRadioList('radiolist')
          //~ ->setItems($data->getZeme())
//~ ->addEmail('registrace_email', 'Email')
        //~ ->addTextArea('textik', 'huhuh', 'bleblabla')
        //~ ->addTextArea('textik', 'huhuh1', 'bleblabla', array('class' => 'kratky'))
        //~ ->addTextArea('textik', 'huhuh2', 'bleblabla', array('class' => 'dlouhy'))
        //~ ->addUpload('fiel', 'dfdsf')
        //~ ->addText('pokusssada', 'Loginsdasd', null, array('class' => 'dlouhy'))
//$this->assertEquals('', strval($this->object));

//CALLBACK_BACKLINK

        //$leg_cb = function($row) { return $row['html']::legend()->setText($row['caption']); };
        //$fie_cb = function($row) { return $row['html']::fieldset()->add($row['legend'])->add($row['elements']); };
        //$fie_cb = function($row) { return $row['elements']; };


        //~ $frm//->addGroup(null, array('fieldset' => $fie_cb))//->setLegend('ahoj svete!!')
            //~ ->setLegend('hlavni field')
            //~ ->addText('pokus', array('class' => 'trida_inputu', 'label' => 'pokusny popisek', 'label_callback' => $label_callback))

            //~ ->addCheckList('checklist2', array('label' => 'lze oznacit jen jeden', 'value' => $countries2, $form::CALLBACK_OBAL => $checkobal_callback, $form::CALLBACK_ELEMENT => $checkelem_callback))
            //~ ->addCheckList('checklist2', array('label' => 'lze oznacit jen jeden', $form::CALLBACK_OBAL => $checkobal_callback, $form::CALLBACK_ELEMENT => $checkelem_callback))
              //~ ->setItems($countrie
    //~ /**
     //~ * @expectedException classes\ExceptionForm
     //~ */
    //~ public function testSetItems3() {
        //~ $this->object->addSelect('vyber');
        //~ $this->object['vyber']->setItems($this->countries2);
        //~ //$this->assertEquals($this->countries2, $this->object['vyber']->getItems());
        //~ //$this->assertEquals('<form action="" method="post"><fieldset><select name="vyber"><option value="CA">Kanada</option><option value="US">USA</option><option value="?">jiná</option></select></fieldset></form>', $this->object);
    //~ }
 /**
     * @covers classes\Form::isSubmitted
     * @   Implement testIsSubmitted().
     */
    public function testIsSubmitted()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }

    /**
     * @covers classes\Form::isValid
     * @   Implement testIsValid().
     */
    public function testIsValid()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }
 /**
     * @covers classes\Form::setLegend
     * @   Implement testSetLegend().
     */
    public function testSetLegend()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }

    /**
     * @covers classes\Form::__toString
     * @   Implement test__toString().
     */
    public function test__toString()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }

    /**
     * @covers classes\Form::render
     * @   Implement testRender().
     */
    public function testRender()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }
//~ $_var = (is_array($var) ? $var : array($var));
        //~ // spravci
        //~ $cont = array(
                      //~ '' => '72500292392c54db9c17cf69e4e88320e0239630a99fd284226ca3d610676bd5105d7c3d66271a2f',
                      //~ '' => '2fe68c9dc0b75ceb0642d79c4b1acdfd46ebcc9eaa9fc236c2cc4fd1c4c91cc5a3933b453962b43d',
                      //~ '' => '95384963092854d788a93af7b5109a4eb25cb944e8a244b336b94aac1ac5c9a38fc85cea5787172c'
                      //~ );
        //~ $db->truncate('uzivatele');
        //~ foreach ($cont as $k => $v) {
          //~ $c = new classes\ContentValues;
          //~ $c->put('login', $k)
            //~ ->put('hash', $v)
            //~ ->putDate('pridano');var_dump($c);
          //~ $db->insert('uzivatele', $c);
        //~ }
        $info = pathinfo($path);
        $dirname = $info['dirname'];
var_dump($dirname);
//die('neexistuje adresar "'.self::$config['tpl_dir'].'" pro ukladani templatu.');
            //~ die('neexistuje slozka "'.self::$config['compile_dir'].'" pro vysledek kompilace');
            //~ echo 'neexistuje slozka "'.self::$config['compile_dir'].'" pro vysledek kompilace';
$title = $mainClass->configure['htmlpage']['title'];
                  //~ $c->put('nazev', $val['nazev'])
                    //~ ->put('popis', $val['popis']);
var_dump($c);
array(
                                    'idrole' => $d->idrole,
                                    'jmeno' => $d->jmeno,
                                    'login' => $d->login,
                                    'email' => $d->email,
                                    )
//~ $c->put('nazev', $val['nazev'])
                //~ ->put('popis', $val['popis']);
$c->put('nazev', $val['nazev'])
                ->put('popis', $val['popis']);
$c->put('idrole', $val['idrole'])
                    ->put('jmeno', $val['jmeno'])
                    ->put('login', $val['login'])
                    ->put('email', $val['email'])
                    ->putDate('upraveno');
$c->put('idrole', $val['idrole'])
                ->put('jmeno', $val['jmeno'])
                ->put('login', $val['login'])
                ->put('hash', $user::getCleverHash($val['login'], $val['hash']))
                ->put('email', $val['email'])
                ->putDate('pridano');
, \Countable
          //~ $dbResult = $db->query('suroviny', array('idsuroviny', 'nazev', 'popis'), null, null, null, null, 'nazev ASC');

          //~ $dbResult = array(2);
          //~ $dbResult = null;


          $__array1 = $dbResult;
          //~ var_dump($dbResult->hasNext());
          //if (isset($__array1) && (is_array($__array1) || $__array1 instanceof \Traversable) && count($__array1))
//~ var_dump($__array1 instanceof \Countable);

          $p = (isset($__array1) && !empty($__array1) && (is_array($__array1) || ($__array1 instanceof \Traversable)) && count($__array1));
//~ var_dump($p);

          if ($p)
          foreach ($__array1 as $k => $value) {
            var_dump($k.': ');
          } else {
            var_dump('nic tu neni!!!!!!!!!!!');
          }

          $dbResult = null;



          //~ $__array1 = $dbResult;
          //~ $__array1 = array();
          //~ var_dump(isset($__array1) && (is_array($__array1) || $__array1 instanceof \Traversable) && count($__array1));
          //~ var_dump(count($__array1));
'loop_else' => array('({elseloop})', '/{elseloop}/'),
{loop="$value" as $vv}gg: {$vv}{else}mrož{/loop}
      //~ $g = $this->control['source']->getGroups();
      //~ var_dump($name, $g[2]->getCaption());
//SELECT idnadobi, nazev, (select count(idnadobi) from (select idrecepty, idnadobi from nadobi_na_recepty join (select idrecepty from recepty where smazano is null) as nn_recepty using(idrecepty)) as nr where nr.idnadobi=n.idnadobi) pocet FROM nadobi as n order by nazev;
//~ ->addRule($f::INTEGER, 'musí být celé číslo')
          //~ ->addRule($f::INTEGER, 'musí být celé číslo')
//~ $sql[] = 'nazev LIKE "%'.$val['nazev'].'%"';
//~ $map = array_map(function($r) { return 'idsuroviny='.$r; }, $val['suroviny_na_recepty']);  // mapovani idsuroviny
//~ $sql[] = '('.implode(' AND ', $map).')';
//~ var_dump($val['suroviny_na_recepty']);
$map = array_map(function($r) { return 'idnadobi='.$r; }, $val['nadobi_na_recepty']);  // mapovani idnadobi
$sql[] = '('.implode(' AND ', $map).')';
_admin menu:
--recepty
--kategorie
--jednotky
--suroviny
--nadobi
--role
--uzivatele
//~ $val = $row['value'][0];
        //~ $obal = $row['html']::div()->class('obal');
        if ($row['value'][0] != $map[$index]) {
          // pokusit se o rozdelovani do kategorii?!
          var_dump('zmena: '.$row['value'][0]);
          $index++;
        }
          //~ $obal->add($row['element']);
        //~ } else {
          //~ $res[] = $obal;
        //~ }
//~ var_dump($val, $map, $index);
        //if ($map[$index])
        //~ $index++;
//~ if ($lastpismeno != $row['value'][0]) { // test.. napsano z hecu!
          //~ $lastpismeno = $row['value'][0];
          //~ $gr = $row['html']::div()->class('obal_pismena');
          //~ $gr->add($row['html']::span()->setText(strtoupper($row['value'][0])));
        //~ }
        //~ $gr->add($celek);
      //~ $map = array_values(array_unique(array_map(function($r) { return $r[0]; }, $nadobi)));
      //~ $index = 0;
//~ $map, $index,
      //~ var_dump($nadobi, $map);
      //~ $lastpismeno = 'a';
      //~ $gr = null;use (&$lastpismeno, &$gr)
      //~ $res = array();//, &$res
$elem = function($row) {  //element pro CheckList group
        $popisek = $row['html']::span()->setText($row['value']);
        $celek = $row['html']::label()->add($row['element'])->add($popisek);
        $res[] = $celek;
        return $res;
      };
      //~ var_dump($handle->getSQLitePath());
      //~ $handle->deleteDatabase()
// pocitani kolik kazdy uzivatel vlozil receptu...!
www.owasp.org
// dodelat: Recepty(s hledanim)/Suroviny/Nadobi
zakladni menu:
-seznam receptu (serazeni podle: kategorie/nazvu, hledani podle: surovin/jmena/nadobi)
-seznam surovin
-seznam nadobi
              289 19883 ACCEPT     tcp  --  *      *       78
            13019 4488K ACCEPT     tcp  --  *      *       78
            10797 8177K ACCEPT     tcp  --  *      *       19
              246 27103 ACCEPT     tcp  --  *      *       88
                0     0 ACCEPT     tcp  --  *      *       17
             3948 4155K ACCEPT     tcp  --  *      *       78
             1395  114K ACCEPT     tcp  --  *      *       78
             1170  146K ACCEPT     tcp  --  *      *       88
            58664   21M ACCEPT     tcp  --  *      *       78
            1907K  551M ACCEPT     tcp  --  *      *       85
            62993   50M ACCEPT     tcp  --  *      *       89
CREATE  TABLE IF NOT
// vytvoreni tabulky a_uzivatele
        //~ $db->execSQL('CREATE  TABLE IF NOT EXISTS
/~ ->put('iduzivatel', $v->iduzivatel)
predelat na RAW a iduzivatel vytazovat rovnou ze spojeni uzivatele!!!!
$result = new static;
$result->setTimestamp($time);
, $class = 'classes\SessionSection'
//~ var_dump($this->regenerated);
          //~ var_dump(date('d.m.Y H:i:s', $sessionTime));
//var_dump($sessionTime);
//$e = strtotime('+'.$this->timeExpire, $time);
//var_dump($sessionTime, $this->timeExpire);, date('d.m.Y H:i:s', $e)
//~ $sessionTime = $time;
//~ var_dump($time, $sessionTime);
$_SESSION[$_SERVER[self::SESSIONKEY]]
//$_SESSION[$_SERVER[self::SESSIONKEY]]
//~ var_dump('dat:' ,$this->dataSession, $_SESSION[$this->mainSection][$this->nameSection]);
// domyslet tady ten system!! jinak prejit na system data/meta
          //kde do mety jdou casove udaje a pripadne stavy!
/**
     * zacatek mereni casu
     */
    public static function startTime() {
      self::$worktime[0] = microtime(true); //vrati cas v mikro sec.
    }

    /**
     * konec mereni casu a vypocet s vypsanim
     *
     * @return cas vykonani
     */
    public static function stopTime() {
      self::$worktime[1] = microtime(true); //vrati cas v mikro sec.
      //nadefinovane symboly
      $symbol = array(-2 => '&mu;s', -1 => 'ms', 0 => 's');
      //vypocet rozdilu, vysledek je v sekundach
      $conv = round(self::$worktime[1] - self::$worktime[0], 10);
      //vypocet exponentu
      $exp = floor(log($conv) / log(1000));
      //vypocet vysledne hodnoty
      $converted = ($conv / pow(1000, floor($exp)));
      return sprintf('%.4f %s', $converted, $symbol[$exp]);
    }
    private static $worktime; //promena pro mereni casu
    private static $browscap = NULL;  //promenna browscap-u
$row = array();
        //~ foreach ($array as $value) {
          //~ if (!empty($value)) {
            //~ $row[] = $value;
          //~ }
        //~ }

        $row = array_filter($array);
// DEPRECATED!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
//inicializace browscapu
    public static function initBrowscap($path = __DIR__) {
      if (is_null(self::$browscap)) {
        $temp = sprintf('%s/.tmp', $path);  //slozeni cesty pro temp
        //vytvoreni slozky tempu
        if (!file_exists($temp)) {
          if (!@mkdir($temp, 0777)) {
            echo sprintf('nelze vytcorit "%s"', $temp);
          }
        }
        //pokud se do tempu zapisovat
        if (is_writable($temp)) {
          self::$browscap = new Browscap($temp);  //vytvoreni instance od staticke promennne
          self::$browscap->lowercase = true;  //nacte do cache a indexy z malich pismen
          //prvotni inicializace
          if (!file_exists(self::$browscap->cacheDir.self::$browscap->cacheFilename) ||
              !file_exists(self::$browscap->cacheDir.self::$browscap->iniFilename)) {
            print_r(self::$browscap->getBrowser());
            self::setLocation('.');
            exit(0);
          }
        }
      }
    }

    //prekryti metody z Browscap-u, vraci jeho objekt
    public static function getBrowser($user_agent = null, $return_array = false) {
      $result = NULL;
      if (!is_null(self::$browscap)) {
        $result = self::$browscap->getBrowser($user_agent, $return_array);
      }
      return $result;
    }
//~ //vraci hodnotu z indexu cookie
    //~ public static function getCookie($name) {
      //~ return self::isFill($_COOKIE, $name);
    //~ }
//~
//~ //nastavuje hodnotu cookie na index
    //~ public static function setCookie($name, $value, $deltatime = 31536000) {
      //~ setcookie($name, $value, Time() + $deltatime);
    //~ }
//~
//~ //zruseni indexu cookie
    //~ public static function unsetCookie($name, $deltatime = 31536000) {
      //~ setcookie($name, '', Time() - $deltatime);
    //~ }
//inicializace session
    public static function initSession($name = NULL) {
      @session_start();  //ma tehdenci nekdy zlobit!!!
      if (!empty($name)) {
        session_name($name);
      }
    }

//vraci hodnotu indexu session
    public static function getSession($name) {
      return self::isFill($_SESSION, $name);
    }

//nastaveni indexu session
    public static function setSession($name, $value) {
      $_SESSION[$name] = $value;
    }

//vraceni id session
    public static function getSessionId($id = NULL) {
      $result = session_id();
      if (!empty($id)) {
        $result = session_id($id);
      }
      return $result;
    }

//prinuti sesion o regeneraci id
    public static function setRenewSessionId() {
      session_regenerate_id();
    }

//vraci jmeno session
    public static function getSessionName() {
      return session_name();
    }
// vyhodit prijde do Core!
  /**
   * nevlastni trida starajici se o requesy (cookie)
   */
  class Response {
    const VERSION = 2.06;
    private $cookiePath = '/';
    private $cookieDomain = '';
    private $cookieSecure = false;
    private $cookieHttpOnly = true;

    /**
     * konrola hlavicek
     */
    private function checkHeadersSent() {
      if (headers_sent($file, $line)) {
        throw new ExceptionResponse('nelze odeslat hlavicky, via: '.$file.', '.$line);
      }
    }

    //~ public function getHeaders() {
      //~ $headers = headers_list();
      //~ $keys = array_map(function($value) { $e = explode(': ', $value); return $e[0]; }, $headers);
      //~ $values = array_map(function($value) { $e = explode(': ', $value); return $e[1]; }, $headers);
      //~ return array_combine($keys, $values);
    //~ }

    /**
     * byli hlavicky poslany?
     *
     * @return true pokud byli poslany
     */
    public function isSent() {
      return headers_sent();
    }

    /**
     * nacitani hodnoty cookie
     *
     * @param key klic cooke
     * @param default defaultni hodnota cookie pokud klic neexistuje
     * @return hodnota cookie
     */
    public function getCookie($key, $default = null) {
      return (isset($_COOKIE[$key]) ? $_COOKIE[$key] : $default);
    }

    /**
     * nastavovani hodnoty cookie
     *
     * @param name jmeno klice cookie
     * @param value hodnota pro dany klic
     * @param time cas expirace
     * @param path cesta pro cookie
     * @param domain domena pro cookie
     * @param secure pouzivane v https rezimu
     * @param httpOnly posilani pouze v http hlavicce
     * @return this
     */
    public function setCookie($name, $value, $time, $path = null, $domain = null, $secure = null, $httpOnly = null) {
      $this->checkHeadersSent();
      setcookie($name,
                $value,
                $time ? DateAndTime::from($time)->format('U') : 0,
                is_null($path) ? $this->cookiePath : $path,
                is_null($domain) ? $this->cookieDomain : $domain,
                is_null($secure) ? $this->cookieSecure : $secure,
                is_null($httpOnly) ? $this->cookieHttpOnly : $httpOnly
                );
      return $this;
    }

    public function deleteCookie($name, $path = null, $domain = null, $secure = null) {
      $this->setCookie($name, false, 0, $path, $domain, $secure);
      return $this;
    }
  }
    //~ /**
     //~ * zajistuje revalidaci casu pro globalni uroven session
     //~ *
     //~ * @return this
     //~ */
    //~ public function revalidate() {
      //~ if (!self::$started) {
        //~ $this->start();
      //~ }
      //~ $_SESSION[$this->mainSection][self::SESSIONTIME] = strtotime('+'.$this->timeExpire);
      //~ return $this;
    //~ }
//~ //vyhodit asi urcite expirace na globalni urovni!
    //~ public function getExpirationTime() {
      //~ if (!self::$started) {
        //~ $this->start();
      //~ }
      //~ return $_SESSION[$this->mainSection][self::SESSIONTIME];
    //~ }
// ma cenu nastavovat expiraci na konkterni promennou?!
          //~ $session = &$_SESSION[$this->mainSection];
          //~ $sessionTime = &$session[self::SESSIONTIME];
          //~ $time = time();
//~
          //~ if ($this->timeExpire != 0 &&  $time > $sessionTime) {
            //~ $this->regenerated = ($this->regenerated || isset($sessionTime));
            //~ $sessionTime = strtotime('+'.$this->timeExpire, $time);
//~ // doladit mazani po vyprseni aby toto nastaveni nebylo permamentni!!!
            //~ if (!is_null($session) && $this->clearAfterExpire) {
              //$session = null;
            //~ }
          //~ }
//~ // bude vyhodit!!!
    //~ /**
     //~ * vraceni casu expirace
     //~ *
     //~ * @param
     //~ * @return
     //~ */
    //~ public function getExpiration() {
      //~ return $this->timeExpire;
    //~ }
//~
    //~ public function setExpiration($time) {
      //~ $this->timeExpire = $time;
      //~ return $this;
    //~ }
//~
    //~ public function getClearAfterExpire() {
      //~ return $this->clearAfterExpire;
    //~ }
//~
    //~ //true po expiraci zaruci vycisteni
    //~ public function setClearAfterExpire($state) {
      //~ $this->clearAfterExpire = $state;
      //~ return $this;
    //~ }
const SESSIONTIME = '__time';
Response & Cookie,
//~ if (is_array($privileges)) {
  //~ //pokud jsou privilegia pole
  //~
  //~ var_dump($resources, $privileges);
//~ } else {
  //~ foreach ($resources as $resource) {
    //~ $this->rules[$role][$resource][$privileges] = self::ALLOW;
  //~ }
//~ }
//nacteni rodicu ze zdroju
    public function getResourceParents($resource) {
      return (isset($this->resources[$resource]['parents']) ? $this->resources[$resource]['parents'] : null);
    }

    //ma zdroj zadaneho predka?
    public function resourceInheritsFrom($resource, $inherit) {
      return (isset($this->resources[$resource]['parents']) && in_array($inherit, $this->resources[$resource]['parents']));
    }
  class ACLRole {
    private $role = array();
    private $res = array();

    public function __construct($role, $parents = null) {
      $this->role[$role] = $parents;
    }

    public function addRes($obj) {
      $this->res[] = $obj;
    }
  }

  class ACLResource {
    private $resources = array();
    private $priv = array();

    public function __construct($resource, $parents = null) {
      $this->resources[$resource] = $parents;
    }

    public function addPriv($obj) {
      $this->priv[] = $obj;
    }
  }

  class StaticACL2 {
    private $roles = array(); // pole roles
    private $resources = array(); // pole resources
    private $rules = array(); //pole rules

    public function addRole($role, $parents = null) {
      $par = (isset($this->roles[$parents]) ? $this->roles[$parents] : null);
      $this->roles[$role] = new ACLRole($role, $par);
      return $this;
    }

    public function addResource($resource, $parents = null) {
      $par = (isset($this->resources[$parents]) ? $this->resources[$parents] : null);
      $this->resources[$resource] = new ACLResource($resource, $par);
      return $this;
    }

    public function allow($role = self::ALL, $resources = self::ALL, $privileges = self::ALL) {
      $res = $this->resources[$resources]->addPriv($privileges);
      $this->roles[$role]->addRes($res);

      //$this->rules[]

      //~ var_dump($this->roles[$role]);
      //~ var_dump($this->resources[$resources]);
      return $this;
    }
  }
//~ class UserStorage {
  //~ const VERSION = 2.02;
//~
  //~ private $handler = null;
//~
  //~ public function __construct() {
    //~ $this->handler = new classes\Session;
  //~ }
//~ }
//~ $userstorage = new UserStorage;
//~ var_dump($userstorage);
      $this->rules[$role][$resources][$privileges] = self::ALLOW;
      //zparacovani zdedenych zdroju
      $__resources = array();
      foreach ($this->resources as $k_resource => $v_resource) {
        $parents_resource = $v_resource['parents'];
        if (!is_null($parents_resource) && $parents_resource === $resources) {
          $__resources[$k_resource][$privileges] = self::ALLOW;
        }
      }
      $this->rules[$role] += $__resources;


      //zpracovani zdedenych uzivatelu
      //~ $__roles = array();
      //~ foreach ($this->roles as $k_role => $v_role) {
        //~ $parents_role = $v_role['parents'];
        //~ if (!is_null($parents_role) && $parents_role === $role) {
         //~ // $__roles[$k_role] += $this->rules[$role];
          //~ // $__roles[$k_role][$resources][$privileges] = self::ALLOW;
        //~ }
      //~ }
      //~ var_dump($__roles);
      $parents_role = $this->roles[$role]['parents'];
      if (!is_null($parents_role)) {
        $this->rules[$role][$resources] += $this->rules[$parents_role][$resources];
        //$this->rules[$role][$resources] = array_merge($this->rules[$role][$resources], $this->rules[$parents_role][$resources]);
      }
$this->rules[$role][$resources][$privileges] = self::;
      //~ $this->rules[$role][$resources][$privileges] = self::ALLOW;

      //~ if (is_array($resources)) {
//~
        //~ //prochazeni zdroju
        //~ foreach ($resources as $__resource) {
//~
          //~ if (is_array($privileges)) {
            //~ //pokud jsou zdroje a privilegia pole
            //~ foreach ($privileges as $__privilege) {
              //~ $this->rules[$role][$__resource][$__privilege] = self::ALLOW;
            //~ }
            //~ $this->applyRoleParents($role, $__resource);
          //~ } else {
            //~ //pokud jsou jen zdroje pole
            //~ $this->rules[$role][$__resource][$privileges] = self::ALLOW;
//~
            //~ $this->applyRoleParents($role, $__resource);
          //~ }
//~
        //~ }
//~
      //~ } else
      //~ if (is_array($privileges)) {
//~
        //~ //pokud jsou privilegia pole
        //~ foreach ($privileges as $privilege) {
          //~ $this->rules[$role][$resources][$privilege] = self::ALLOW;
        //~ }
        //~ $this->applyRoleParents($role, $resources);
//~
      //~ } else {
        //~ $this->rules[$role][$resources][$privileges] = self::ALLOW;
//~
        //~ $this->applyRoleParents($role, $resources);
      //~ }
 //~ var_dump($k_role.' dedi od: '.$v_role_parents);
          //~ var_dump('predat: ', $this->rules[$v_role_parents]);
          //~ var_dump('projit: ', $this->rules[$k_role]);
          //~ $this->rules[$k_role][$k_res]

      foreach ($this->roles as $k_role => $v_role) {

        foreach ($this->rules[$k_role] as $k_resource => $v_resource) {

//~ var_dump($k_resource);

          $v_resource_parents = $this->getResourceParents($k_resource);
          if (!is_null($v_resource_parents)) {
            // doimpekementovat!
            //~ var_dump($k_resource.' <-- dedi RESOURCES z: '.$v_resource_parents);
            //~ print_r($this->rules[$k_role][$v_resource_parents]);
          }


          //prochazeni pole zdroju (aby byla zarucene dedeni z rodice na potomky)
          foreach ($this->resources as $k_res => $v_res) {
            //overeni jestli zdroj ma aktualniho rodice?
            if ($this->getResourceParents($k_res) == $k_resource) {
              // vlozi zdedene a preda tam to co je v rodici
              //~ $this->rules[$k_role][$k_res] = $this->rules[$k_role][$k_resource]; //////////////////////
            }
            //~ var_dump($k_res.' :vs: '.$k_resource);
          }

        }


        $v_role_parents = $this->getRoleParents($k_role);//$v_role['parents'];
        if (!is_null($v_role_parents)) {
          //~ var_dump($k_role.' <-- dedi ROLE z: '.$v_role_parents);
          //zajistuje dedeni zdroju
          //~ $this->rules[$k_role] = array_merge_recursive($this->rules[$k_role], $this->rules[$v_role_parents]);
        }
        //~ var_dump($v_role_parents);
        //~ print_r($this->rules[$k_role]);
      }

      // zpracovani zavislosti role/resource

      // vyreseni zavislosti se provede az nakonec!!!!!
// akceptovat jeste dedeni zdroju z rodice na potomky!!! (podobny jako u roli)

normal:
Array
(
    [registrovany] => Array
        (
            [administrace] => Array
                (
                    [view] => allow
                    [vote] => allow
                )

            [clanky] => Array
                (
                    [exec] => allow
                    [paka] => allow
                    [view] => allow
                    [vote] => allow
                )

            [ankety] => Array
                (
                    [exec] => allow
                    [paka] => allow
                    [view] => allow
                    [vote] => allow
                )

            [komentare] => Array
                (
                    [view] => allow
                    [vote] => allow
                )

        )

    [moderator] => Array
        (
            [administrace] => Array
                (
                    [edit] => allow
                    [append] => allow
                    [view] => allow
                    [vote] => allow
                )

            [komentare] => Array
                (
                    [kick] => allow
                    [del] => allow
                    [view] => allow
                    [vote] => allow
                    [edit] => allow
                    [append] => allow
                )

            [ankety] => Array
                (
                    [kick] => allow
                    [exec] => allow
                    [paka] => allow
                    [view] => allow
                    [vote] => allow
                    [edit] => allow
                    [append] => allow
                )

            [clanky] => Array
                (
                    [exec] => allow
                    [paka] => allow
                    [view] => allow
                    [vote] => allow
                    [edit] => allow
                    [append] => allow
                )

        )

    [admin] => Array
        (
            [administrace] => Array
                (
                    [all] => allow
                    [edit] => allow
                    [append] => allow
                    [view] => allow
                    [vote] => allow
                )

            [komentare] => Array
                (
                    [kick] => allow
                    [del] => allow
                    [view] => allow
                    [vote] => allow
                    [edit] => allow
                    [append] => allow
                    [all] => allow
                )

            [ankety] => Array
                (
                    [kick] => allow
                    [exec] => allow
                    [paka] => allow
                    [view] => allow
                    [vote] => allow
                    [edit] => allow
                    [append] => allow
                    [all] => allow
                )

            [clanky] => Array
                (
                    [exec] => allow
                    [paka] => allow
                    [view] => allow
                    [vote] => allow
                    [edit] => allow
                    [append] => allow
                    [all] => allow
                )

        )

)
    // finalni potvrzeni pravidel a aplikace dedeni
    public function commitRules() {

//~ print_r($this->roles);
//~ print_r($this->resources);
//~ print_r($this->rules);

      //aplikace dedeni na role
      foreach ($this->roles as $k_role => $v_role) {
        // nacitani rodice
        $role_parents = $this->getRoleParents($k_role);
        if (!is_null($role_parents)) {
          // secteni pole pravide a pravidel rodicu
          $this->rules[$k_role] = array_merge_recursive($this->rules[$k_role], $this->rules[$role_parents]);

          // prochazeni pravidel s klicem rodice
          //~ foreach ($this->rules[$role_parents] as $r_k => $r_v) {
            //~ // pokud index neexsistuje vytvori jej jinak secte indexy
            //~ if (!isset($this->rules[$k_role][$r_k])) {
              //~ $this->rules[$k_role][$r_k] = $r_v;
            //~ } else {
              //~ $this->rules[$k_role][$r_k] += $r_v;
            //~ }
          //~ }
        }


        //aplikace dedeni na zdroje
        foreach ($this->resources as $k_res => $v_res) {
          $resource_parents = $this->getResourceParents($k_res);
          if (!is_null($resource_parents)) {
            // pokud index neexistuje vytvori jej, jinak secte pole
            if (!isset($this->rules[$k_role][$k_res])) {
              $this->rules[$k_role][$k_res] = $this->rules[$k_role][$resource_parents];
            } else {
              $this->rules[$k_role][$k_res] += $this->rules[$k_role][$resource_parents];
            }
          }
        }
      }



      //~ foreach ($this->roles as $k_role => $v_role) {
//~
        //~ foreach ($this->resources as $k_res => $v_res) {
          //~ $resource_parents = $this->getResourceParents($k_res);
          //~ if (!is_null($resource_parents)) {
            //~ // pokud index neexistuje vytvori jej, jinak secte pole
            //~ if (!isset($this->rules[$k_role][$k_res])) {
              //~ $this->rules[$k_role][$k_res] = $this->rules[$k_role][$resource_parents];
            //~ } else {
              //~ $this->rules[$k_role][$k_res] += $this->rules[$k_role][$resource_parents];
            //~ }
          //~ }
        //~ }
      //~ }


      // vysledek pak rvat do JSON nebo jineho rychlejsiho stylu generovani!!!!!

      //ulozeni do JSON "databaze" ale jen ->rules, to bohate postaci
      return $this;
    }
//~ private function applyRoleParents($role, $resource) {
      //~ $role_parents = $this->roles[$role]['parents'];
      //~ if (!is_null($role_parents) && $resource != self::ALL) {
        //~ $this->rules[$role][$resource] = array_merge($this->rules[$role][$resource], $this->rules[$role_parents][$resource]);
      //~ }
    //~ }
      // vysledek pak rvat do JSON nebo jineho rychlejsiho stylu generovani!!!!!
      //ulozeni do JSON "databaze" ale jen ->rules, to bohate postaci
//~ var_dump('rol: '.$k_role.', res: '.$k_res.', ', $resource_parents);
// od pole: resource_parents pro kazdou adresu:
                //$this->rules[$k_role][$k_res] = $this->rules[$k_role][<<ARRAY>>];
                 //~ var_dump($this->rules[$k_role], $k_res, $this->rules[$k_role], $resource_parents);
    //~ private function getRulesArray($rules, $roles) {
      //~ $result = array();
      //~ foreach ($roles as $rol) {
        //~ $result += $rules[$rol];
      //~ }
      //~ return $result;
    //~ }
//~
    //~ private function getResourcesArray($roles, $resources) {
      //~ $result = array();
      //~ foreach ($resources as $res) {
        //~ $result += $roles[$res];
      //~ }
      //~ return $result;
    //~ }
//~ $this->rules[$k_role] = array_merge_recursive($this->rules[$k_role], $this->rules[$role_parents]);
//~ $this->rules[$k_role][$k_res] = $this->rules[$k_role][$resource_parents];
//~ $this->rules[$k_role][$k_res] += $this->rules[$k_role][$resource_parents];
 Html::setBreakDepth(true);

$f = new Form;
$f
  //->addRange('posuvnik', array('list' => 'id_pokusny_list'))  //'min' => 1, 'max' => 5,
  ->addText('textik', array('list' => 'id_pokusny_list'))
  //~ ->setEmptyValue('k1')
  //~ ->setDefaultValue('vychozi')
  //~ ->addDatalist('id_pokusny_list', array('value' => array('auto', 'arabler', 'arrrhovno', 'bota', 'celer', 'dedek', 'eliska')))
  //~ ->addDatalist('id_pokusny_list', array('value' => array('k1' => 'h1', 'k2' => 'h2', 'k3' => 'h3', 'k4' => 'h4')))
  //~ ->addDatalist('id_pokusny_list', array('value' => array(10, 25, 50, 100, 200)))
  ->addDatalist('id_pokusny_list')
    //~ ->setItems(array(10, 25, 50, 100, 200))
    //~ ->setItems(array('auto', 'arabler', 'arrrhovno', 'bota', 'celer', 'dedek', 'eliska'))
    ->setItems(array('k1' => 'h1', 'k2' => 'h2', 'k3' => 'h3', 'k4' => 'h4'))
  ->addSubmit('sdas')
  //~ ->setReturnValues($_POST)
  ;
  //~ var_dump($f['id_pokusny_list']->getItems());

echo $f;
	$(PHPTES T) $(DIR)/response.php ResponseTest

//~ class mycls{
		//~ var $var;
	//~ function mycls($var)
	//~ {
		//~ global $obj_ins;
		//~ $obj_ins = $this;
		//~ $this->val = $var;
	//~ }
//~ }
 //~
	//~ $obj = new mycls("something ");
	//~ echo $obj->val;
	//~ echo $obj_ins->val;

//~ interface Printable{ public function prnt($a, $b); }
	//~ interface Portable extends Printable{}
	//~ abstract class Printer1 implements Printable{}
	//~ class Printer1 implements Portable{}

  //~ $a = 0;
//~ define("MINSIZE", 5);
//~ while(MINSIZE > $a ){
	//~ echo MINSIZE--;
//~ }

//~ public abstract function meth(){}
//~ abstract function meth($var);
//~ private abstract function meth();
//~ public abstract meth();

//~ $foo = 'foo';
//~ $FOO = 'bar';
 //~
//~ echo "$foo$FOO";

//~ class MyException extends Exception{}
 //~
 	//~ class Ex {
   		//~ public function fun() {
      		//~ throw new MyException();
   		//~ }
 	//~ }
 //~
//~ $obj = new Ex();
 //~
   //~ try {
      //~ $obj->fun();
	//~ }catch(Exception $e) {
		//~ print "Exception";
	//~ }catch(MyException $e) {
       		//~ print "MyException";
	//~ }

  //~ $bar = 1;
//~ $foo = 1.70;
 //~
//~ $bar += ceil($foo);
//~ $foo = round($foo);
 //~
//~ if ($foo > $bar) {
    //~ echo "too high";
//~ } elseif ($foo == $bar) {
    //~ echo $foo;
//~ } else {
    //~ echo $bar;
//~ }

//~ $x = 10;
 //~
//~ function prints() {
	//~ $x;
	//~ echo "$x";
//~ }
 //~
//~ prints();
//~ echo " ";
//~ echo "$x";

	//~ class Test {
		//~ var $val = 10;
	//~ function Test($a) {
      	//~ $this->val = $a;
	//~ }
//~ }
//~ $obj = new Test();
//~ echo $obj->val;

//~ $var = "you@urdomain.net";
//~ echo substr($var,strpos($var,"@"));

//~ abstract class Ab{
	//~ var $val = 10;
		//~ function Test($a){
		//~ $this->val = $a;
		//~ }
	//~ }
	//~
	 //~ $ob =  new Ab(8);
	 //~ echo $ob->val;

   //~ interface Printable{ public function prnt($a, $b); }
	//~
	//~ class Printer1 implements Printable {
		//~ public function prnt($a, $b){
			//~ echo " Color : $a ";
			//~ echo " Speed : $b pps";
		//~ }
	//~ }
	//~ $printer = new Printer1();
	//~ $printer->prnt("black" , 25);

  $foo = 4 + "6";
echo $foo . "0";
//~ $authenticator = new classes\SimpleAuthenticator(array(
          //~ 'john' => 'IJ^%4dfh54*',
          //~ 'kathy' => '12345',
          //~ 'franta' => 'flinta',
        //~ ));
//~ $user = new classes\User('user');
//~ $user->setExpiration('1 minutes')
    //~ ->setAuthenticator($authenticator)
    //~ ->setCallbackLoggedIn(function ($r) { echo "ahoj prave se prihlasuji!!\n"; })
    //~ ->setCallbackLoggedOut(function ($r) { echo "ahoj prave se odhlasuji!!\n"; })
    ;

//~ $user->login('kathy', '12345');
//~ $user->login('franta', 'flinta');
//~ $user->login('foo', 'bar');
//~ var_dump($user->isLoggedIn());

//~ $user->logout();
//~ $user->logout(true);
        $acl->allow('guest');
        $this->assertTrue($acl->isAllowed('guest'));
        $this->assertTrue($this->user->isAllowed());
        $acl->removeAllow('guest');
print_r($acl->getRules());
exit();
        $this->assertTrue($acl->isAllowed('guest', 'anketa', 'view'));

        $acl->allow('guest', 'anketa');
        $this->assertTrue($acl->isAllowed('guest', 'anketa'));
        $this->assertTrue($this->user->isAllowed('anketa'));
        $acl->removeAllow('guest', 'anketa');

        $this->assertTrue($acl->isAllowed('guest', 'anketa', 'view'));

        $acl->deny('guest', 'anketa');
        $this->assertTrue($acl->isAllowed('guest', 'anketa', 'view'));  //musi platit?
        //~ var_dump($acl->isAllowed('guest', 'anketa', 'view'));
        $this->assertFalse($acl->isAllowed('guest', 'anketa'));
        $this->assertFalse($this->user->isAllowed('anketa'));
        //~ $i->setId('josef');
        $this->assertEquals('josef', $i->getId());
//~ return ( && in_array($inherit, $this->roles[$role]['parents']));
//~ return (isset($this->roles[$role]['parents']) ? $this->roles[$role]['parents'] : null);
 $this->assertTrue($acl->isAllowed('nekdo', 'anketa', 'vote'));
        $this->assertFalse($acl->isAllowed('nekdo', 'anketa', 'nic'));
        $this->assertFalse($acl->isAllowed('nekdo', 'nic', 'nic'));
//~ $this->assertFalse($acl->isAllowed('nekdo', 'anketa', 'vote'));
        //~ $acl->allow('nekdo', 'anketa', 'vote');
        //~ $this->assertTrue($acl->isAllowed('nekdo', 'anketa', 'vote'));
//~ $this->assertTrue($acl->isAllowed('nekdo', 'clanek', 'view'));
        //~ $this->assertTrue($acl->isAllowed('nekdo', 'kdekoliv', 'cokoliv'));
        //~ $this->assertTrue($acl->isAllowed('nekdo', 'kdekoliv'));
        //~ $this->assertTrue($acl->isAllowed('nekdo'));
//~ var_dump($resource);
      //~ return (isset($this->resources[$resource]['parents']) ? $this->resources[$resource]['parents'] : null);
var_dump($acl->getResourceParents('userprofil'));
var_dump('pred isset: '.$resource.', inhh: '.$inherit);
      if (isset($this->resources[$resource]['parents'])) {
        //~ var_dump('pred for: ', $this->resources[$resource]['parents']);
        foreach ($this->resources[$resource]['parents'] as $resources) {
          var_dump('ve for:'. $resources.', inh: '.$inherit);
          if ($resources != $inherit) {
            return $this->resourceInheritsFrom($resources, $inherit);
          } else {
            var_dump($resources, $inherit, 'okok');
            return true;
          }
        }
        return false;
      }

        //~ var_dump($this->resources[$resource]['parents'], $inherit);
        //~ exit;
        //~ if ($this->roles[$role]['parents'][0] != $inherit) {
          //~ return $this->roleInheritsFrom($this->roles[$role]['parents'][0], $inherit);
        //~ } else {
          //~ return true;
        //~ }
      //~ }
      //~ return false;
      //~ return (isset($this->resources[$resource]['parents']) && in_array($inherit, $this->resources[$resource]['parents']));
      //~ if (isset($this->roles[$role]['parents'])) {
        //~ if ($this->roles[$role]['parents'][0] != $inherit) {
          //~ return $this->roleInheritsFrom($this->roles[$role]['parents'][0], $inherit);
        //~ } else {
          //~ return true;
        //~ }
      //~ }
      //~ return false;

//var_dump($authenticator->authenticate(array('kathy', '12345')));
      //$user = new User();
          //~ $sess = new Session();
        //~ $storage = new UserStorage($sess);
      //~ $user = new User($storage);
      //$user->setStorage($storage);

      //~ $sess->setExpiration('+1 minutes');
      //~ $storage->setExpiration('+1 minutes');

      //~ $authenticator = new SimpleAuthenticator(array(
          //~ 'john' => 'IJ^%4dfh54*',
          //~ 'kathy' => '12345',
          //~ 'franta' => 'flinta',
      //~ ));

      //~ $user->setCallbackLoggedIn('onLoggedIn');
      //~ $user->setCallbackLoggedOut('onLoggedOut');

      //~ $user->setAuthenticator($authenticator);
      //var_dump($user->getRoles());
      //~ $username = 'franta';
      //~ $password = 'flinta';
      //~ $user->login($username, $password);

      //~ function onLoggedIn($a) {
        //~ var_dump('prihlaseni', $a);
      //~ }
      //~ function onLoggedOut($a) {
        //~ var_dump('odhlaseni', $a);
      //~ }

//~ var_dump($user->getLogoutReason());
      //~ $user->setExpiration('+30 minutes');
      //$user->setExpiration('+ 2 days', false);
      //$user->setExpiration(0, true);
//~ var_dump($user->getLogoutReason());
//~ var_dump($user->isLoggedIn());
//~ var_dump($user->isLoggedIn(true));
//~ var_dump($user->getIdentity());
      //~ var_dump($user->isLoggedIn() ? 'ano!' : 'ne!!', $user->getIdentity());
//~ var_dump($user->getLogoutReason());
      //~ $user->logout();
      //~ var_dump($user->isLoggedIn() ? 'ano!' : 'ne', $user->getIdentity());
//~ var_dump($user->getLogoutReason());
      //~ $user->logout(true);
      //~ var_dump($user->isLoggedIn() ? 'ano!' : 'ne', $user->getIdentity());
//~ var_dump($user->getLogoutReason());
//~ print_r($acl->getRoles());
//~ print_r($acl->getResources());
//~ print_r($acl->getRules());
//~ print_r($acl);
//~ var_dump(count($acl->getRules(), COUNT_RECURSIVE));
//~ $acl->allow('moderator', 'administrace', array('add', 'edit', 'extras'));
//~ $acl->allow('moderator', 'komentare', array('del'));
//~ $acl->allow('admin', 'administrace', array('leviosa'));
//~ $acl->allow('registrovany', array('clanek', 'komentar', 'anketa'), 'view');
//~ $acl->allow('moderator', array('clanek', 'komentar', 'anketa'), array('add', 'edit'));
//~ $acl->allow('moderator', 'clanek', array('add', 'extra'));
//~ $acl->allow('moderator', 'komentar', 'hopla');
//~ $acl->allow('admin', array('clanek', 'komentar', 'anketa'));
//~ $acl->allow('admin');
      //klasicke pridavani pojednom
      //~ $acl->allow('registrovany', 'administrace', 'view');
      //~ $acl->allow('registrovany', 'administrace', 'vote');
      //~ $acl->allow('moderator', 'administrace', 'edit');
      //~ $acl->allow('moderator', 'komentare', 'append');
      //~ $acl->allow('admin', 'administrace', 'del');
//~ $acl->allow('registrovany', array('clanky', 'komentare', 'ankety'), array('view', 'add', 'edit'));
//~ $acl->allow('admin', 'administrace');
//~ $acl->allow('admin');
//~ $acl->allow('registrovany', 'anketa', 'vote');
//~ $acl->allow('registrovany', array('clanek', 'anketa'), array('add', 'edit', 'del'));
//~ $acl->allow('registrovany', 'clanky', array('add', 'edit', 'del'));
//~ var_dump($acl->isAllowed('registrovany'));
      // vytvoreni session, userstorage, uzivatel
      //~ $sess = new classes\Session();
      //~ $sess->setExpiration($this->configure['session']['expire']);
      // user storage
      //~ $user_storage = new classes\UserStorage($sess);
      //~ $user_storage->setNamespace('user');
      //~ // user
      //~ $user = new classes\User($user_storage);
      //~ $user->setAuthenticator(new UserAuthenticator($db));
      //~ $this['user'] = $user;
//~ var_dump($session->isExists());
//~ $ss->value = 656456;
//~ var_dump($session->isExists());
//~ $session->destroy();

//~ var_dump($_COOKIE);

//~ $ss->value = 656456;
//~ var_dump('started: '.$session->isStarted());
//~ var_dump('exists1: '.$session->hasSection('pokus1'));
//~ var_dump('exists2: '.$session->hasSection('pokus2'));
//~ $gg = $session->getSection('pokus2');

//~ $session->setExpiration('1 hours')
        //~ ->setClearAfterExpire(true)
        //~ ;

//~ var_dump($ss->getExpiration());
      //  = 0 (0 do zavreni prohlizece)
      //  = '/'
      //  = ''
      //  = false
      //  = true

      //  =  ()
      //  = null   (default "nocache", special value "\0")
      //  = null    (default "180")
      //  = null   (default "0", means MD5)
      //  = null     (default "4")
    /**
     * nacteni session cookie parametru
     *
     * @return pole parametru: lifetime, path, domain, secure, httponly
     */
    public function getCookieParameters() {
      return session_get_cookie_params();
    }
...nastavit:

session_set_cookie_params(
  $cookie['lifetime'], $cookie['path'], $cookie['domain'],
  $cookie['secure'], $cookie['httponly']
);
* a pak posle cookie
posilani cookie:
* $cookie = session_get_cookie_params();
->setCookie(
  session_name(), session_id(),
  $cookie['lifetime'] ? $cookie['lifetime'] + time() : 0,
  $cookie['path'], $cookie['domain'], $cookie['secure'], $cookie['httponly'])
->setCookie(
  'nette-browser', $_SESSION['__NF']['B'],
  Response::BROWSER, $cookie['path'], $cookie['domain']
);
      //pri nastaveni techto parametru se musi nacpat do cookie
      /*
PLATI stejne jako u session ze pokud se nastavi na session: cookie_lifetime=0 a cookie expirace=0 tak bude do zavreni prohlizece
      */
 --template old-ocean
      //~ ini_set('session.gc_maxlifetime');  // number of seconds after which data will be seen as 'garbage' and potentially cleaned up.
      //~ ini_set('session.cookie_lifetime'); //The value 0 means "until the browser is closed."
      //~ ini_set('session.cookie_httponly'); //true pro redukci XSS
//~ var_dump($seconds);
        //~ ini_set('session.gc_maxlifetime', $seconds);
        //~ ini_set('session.cookie_lifetime', $seconds);
        //~ var_dump(ini_get('session.gc_maxlifetime'), ini_get('session.cookie_lifetime'));
//~ if (function_exists('ini_set')) {
        //~ $seconds = strtotime('+'.$time) - time();
      //~ }
    //~ /**
     //~ * predavany konstruktor do rodice
     //~ *
     //~ * @param name jmeno databaze
     //~ */
    //~ public function __construct($name) {
      //~ parent::__construct($name);
    //~ }
    /**
     * predavany konstruktor do rodice
     *
     * @param name jmeno databaze
     */
    public function __construct($name) {
      parent::__construct($name);
    }
///interface pro cron????
 //~ if ($fileinfo->isFile()) {
          //~ $this->zip->addFile($fileinfo->getPathname(), $localname.'/'.$fileinfo->getFilename());
        //~ } else {
          //~ $this->addFile($fileinfo->getPathname(), $localname.'/'.$fileinfo->getFilename());
        //~ }
//~ $zip = new ZipArchive();
//~ $filename = "./test112.zip";
//~ if ($zip->open($filename, ZIPARCHIVE::CREATE)!==TRUE) {
//~ exit("cannot open <$filename>\n");
//~ }
//~ $zip->addFromString("testfilephp.txt" . time(), "#1 This is a test string added as testfilephp.txt.\n");
//~ $zip->addFromString("testfilephp2.txt" . time(), "#2 This is a test string added as testfilephp2.txt.\n");
//~ $zip->addFile($thisdir . "/too.php","/testfromfile.php");
//~ echo "numfiles: " . $zip->numFiles . "\n";
//~ echo "status:" . $zip->status . "\n";
//~ $zip->close();
    //~ //pridavani slozky/slozek
    //~ public function addDir($dir) {
      //~ if (!is_array($dir)) {
        //~ $this->dirs[] = $dir;
      //~ } else {
        //~ $this->dirs += $dir;  // spatne
      //~ }
      //~ return $this;
    //~ }
//~ private $dirs = array();
    //~ public function instantSync() {
      //~ var_dump($this->files);
      //~ foreach (array_unique($this->files) as $f) {
        //~ var_dump('f: '.$f.': '.is_file($f), 'd: '.$f.': '.is_dir($f));
      //~ }
    //~ }
//~ $array = array(
//~ 'destination' => $this->destination,
//~ 'files' => $this->files,
//~ );
//~ file_put_contents($path, json_encode($array));
// cachovani do json!
//~ var_dump($this->destination, $this->files);
//~ var_dump($decode['files']);
var_dump($decode['destination'].$file);
//nacteni souboru z path kterou bude brat vnitrne defaultni
// dopsat...
//~ $path = sprintf(self::DEFAULT_FILE, date(self::DEFAULT_DATE_FORMAT));
//~ var_dump($path);
//~ 'config_name' => self::DEFAULT_CONFIG_NAME,
//auto zalohovac danych soubororu / slozek
//myslenka: bude json databaze slozek nebo konktretnich souboru, bude umet zalohovat jen existujici
//sloubory nebo slozky, detekce jestli jde o adresar nebo soubor bude delat automaticky
//pokud pujde o zalohu slozek bude sapozrejme prochazet rekurzivne..
//veskere zalohy bude balit do ZIPu
//bude zalohovat na dane misto, + metoda na automaticke spousteni s Cronem!
//s Cronem bude nejen zalohovat ale i cistit zalohy po uplynute dobe expirace aby se nehromadily
//~ var_dump($count);
//~ $cur = time();
//~ var_dump(date('Y-m-d H:i:s', $posun));
//~ var_dump(date('Y-m-d H:i:s', filemtime($l)));
        var_dump($posun <= filemtime($l));
// vyradit do Core!! pouze 3 parametry (path, pripony, pocet[dni/souboru])
//~ $list = classes\Core::getListFile(array(
          //~ 'path' => ($path ?: __DIR__),
          //~ 'full' => true,
          //~ 'filter+' => $ext,
          //~ 'sort' => array(classes\Core::LIST_SORT_MTIME, classes\Core::LIST_SORT_DESC),
        //~ ));
$path, $ext,
 $path, $ext,
      * @param path cesta k adresaru kontroly
     * @param ext pole koncovek
     * @param path cesta k adresari kontroly
     * @param ext pole koncovek
//$cesta = sprintf('%s/%s.php', __DIR__, $file);
    /**
     * nastaveni typu obsahu emailu
     *
     * @since 1.00
     * @param content nastaveni typu obsahu
     * @return this
     */
    public function setContent($content) {
      $this->content = $content;
      return $this;
    }

    /**
     * nastaveni kodovani
     *
     * @since 1.00
     * @param charset nastaveni kodovani
     * @return this
     */
    public function setCharset($charset) {
      $this->charset = $charset;
      return $this;
    }
//~ var_dump(preg_match('/^(?!(?>(?1)"?(?>\\\[ -~]|[^"])"?(?1)){255,})(?!(?>(?1)"?(?>\\\[ -~]|[^"])"?(?1)){65,}@)((?>(?>(?>((?>(?>(?>\x0D\x0A)?[     ])+|(?>[        ]*\x0D\x0A)?[   ]+)?)(\((?>(?2)(?>[\x01-\x08\x0B\x0C\x0E-\'*-\[\]-\x7F]|\\\[\x00-\x7F]|(?3)))*(?2)\)))+(?2))|(?2))?)([!#-\'*+\/-9=?^-~-]+|"(?>(?2)(?>[\x01-\x08\x0B\x0C\x0E-!#-\[\]-\x7F]|\\\[\x00-\x7F]))*(?2)")(?>(?1)\.(?1)(?4))*(?1)@(?!(?1)[a-z0-9-]{64,})(?1)(?>([a-z0-9](?>[a-z0-9-]*[a-z0-9])?)(?>(?1)\.(?!(?1)[a-z0-9-]{64,})(?1)(?5)){0,126}|\[(?:(?>IPv6:(?>([a-f0-9]{1,4})(?>:(?6)){7}|(?!(?:.*[a-f0-9][:\]]){7,})((?6)(?>:(?6)){0,5})?::(?7)?))|(?>(?>IPv6:(?>(?6)(?>:(?6)){5}:|(?!(?:.*[a-f0-9]:){5,})(?8)?::(?>((?6)(?>:(?6)){0,3}):)?))?(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])(?>\.(?9)){3}))\])(?1)$/isD', '"John Doe" <doe@example.com>'));
//test angliar scriptu
//~ echo <<<HTML
//~

//~
//~ HTML;
//~
//~ exit;
// dopsat!!!!
  //~ $b = new Backuper;
  //~ $b->setDestination('');
  //~ $b->addFile('icon_services_4.png')
    //~ ->addFile('templates')
    //~ ->addFile('templates1')
    //~ ->addFile('icon_services_4.png')
    //~ ->save();
  //~ var_dump($b->load());

  //~ var_dump(classes\Backuper::synchronizeCron());
  //~ var_dump(Backuper::synchronizeCron(array('path' => 'moje_cesta')));
//~ $z = new Zipper;
//~ $z->open('muj_zip.zip')
  //~ ->addFile('icon_services_4.png')
  //~ ->addFile('index.php')
  //~ ->addDir('templates')
  //~ ->addDir('classes');
//~ ->close();
//~ var_dump($z->getFileName(), $z->getStatus());
//~ $z->close();
//~ var_dump($z);

        //typ: $error['type']
        //text: $error['message']
        //soubor: $error['file']
        //chyba na radku: $error['line']
        //dodatecne: null

      //typ: $errno
      //text: $errstr
      //soubor: $errfile
      //chyba na radku: $errline
      //dodatecne: print_r($errcontext, true)

            //~ var_dump($errno, $errstr, $errfile, $errline, $errcontext);

      //pokud se vyskytne standartni chyba v php tak ju zaloguje....

      // dopsat implememntaci!

            //~ var_dump($exception);
      //pokud se vyskytne nejaky problem jako exception tak ho zaloguje...

      // dopsat implememntaci!


      //typ: get_class($exception) :: $exception->getCode()
      //text: $exception->getMessage()
      //soubor: $exception->getFile()
      //chyba na radku: $exception->getLine()
      //dodatecne: print_r($exception->getTrace(), true)
      // pro odesilani pouzije multibyte
      mb_language($this->charset);

//~ use classes\Core;

  //~ var_dump(mail('geniv.radek@gmail.com', 'předmět', 'zpráva'));

  //~ var_dump(PCRE_VERSION, defined('PCRE_VERSION'));
  //~ var_dump(classes\Core::isEmail('doe.sdfsf.sad.sdasd.safdas@example.com'));
  //~ var_dump(filter_var('doe.sdfsf.sad.sdasd.safdas@example.com', FILTER_VALIDATE_EMAIL) !== false);
  //~ var_dump(classes\Core::isEmail('"John Doe" <doe@example.com>'));
 // oddelit a otestovat na pripojeni ktere neblokuje 25!!!
//
//nmap -v ....cz -p25
//logovat chyby za urcitou dobu, minimalne za 1 cely den, ten pak pomoci cronu odesilat
var_dump($errorMsg); //PHP Notice:  Undefined variable: bbb in /var/www/www/git/goodflow/layout_test/index.php on line 693
    //~ /**
     //~ * renderovani error page
     //~ *
     //~ * @since 1.28
     //~ * @return void|string preformatovany text stranky
     //~ */
    //~ public static function render() {
      //~ if (self::$echoErrorPage) {
        //~ echo self::$errorPage; // primy vystup na stdout
      //~ } else {
        //~ return self::$errorPage;
      //~ }
    //~ }
 * @param echo true pro automaticky tisk na stdout
//~ self::$echoErrorPage = $echo;//, $echo = true
//self::$echoErrorPage = $decode->echoErrorPage;
// ukladat konfiguraci do .soubor a pri synchronizaci ji nacitat kvuli pathu chyby a emailu chyby
delat!!
      //~ var_dump(self::$errorPage); //<<-- pouze toto se bude formatovat a tobrazovat, bytek bude strojove dany!!
//private static $echoErrorPage = null; // tisknout rovnou pres echo?
//~ var_dump(self::$errorPage);
// self::$echoErrorPage muze byt i tpl!!!
var_dump(isset(self::$config['base_dir']), self::$config['base_dir'], '...');
//~ $tpl = new Tpl(array('base_dir' => __DIR__.'/'));
$tpl = new Tpl;
//~ $tpl->assign(array('sekce' => '..sekce..', 'menu' => '..menu..'));
//~ echo $tpl->template('error');
       var_dump(self::$errorPage);

        //~ var_dump('to je tpl?', self::$errorPage);
        self::$errorPage->assign(array(
            'date' => date('Y-m-d H:i:s'),
            'type' => $_code,
            'message' => $message,
            'file' => $file,
            'line' => $line,
            'other' => $other,
        ));
        //~ echo $tpl->template('error');
        //~ exit;
//~ var_dump($tpl);

      } else {
 // instanceof Tpl
//~ 'errorPage' => self::$errorPage,
          //'echoErrorPage' => self::$echoErrorPage,
//~ 'enabled' => self::$enabled,
//~ self::$enabled = $decode->enabled;
      //~ self::$errorPage = $decode->errorPage;
  ErrorLoger::setErrorPage($tpl->template('error'));
//~ self::$enabled = true;
//~ self::$enabled = true;
//~ private static $enabled = false;
if () {
         self::$errorPage;  // formatovany vystup ze sablony nebo podle zadani
      }
 var_dump('emailer...', $set);
var_dump(self::$path, self::$emailer, self::$email);
//~ $email = new Emailer; // otestovat pri pripojeni!
        //~ $email->setFrom('error@project.com')
              //~ ->addTo('geniv.radek@gmail.com')
              //~ ->setSubject('error log ze stranek xyz')
              //~ ->setMessage($errorMsg);
        //~ $email->send();
    // nesmi by byt instancni! a taky nesmi vyjebavat vykon pokud nebude naprosto potreba ji volat
    //proste lehka inicializace a vic nic

    //myslenka: error loger bude odchytavat error callbacky, bude je monitoroat a logovat (def 1 week),
    //a podle nastaveneho intervalu je bude posilat na nastavenou emailovou adresu jako error/bug report
var_dump($f1, $f2);
// cisteni se bude provadet vzdy
      //~ // nacteni pole souboru
      //~ $list = Core::getListFile(array(
          //~ 'path' => (self::$path),
          //~ 'full' => true,
          //~ 'filter+' => array('log'),
          //~ 'sort' => array(Core::LIST_SORT_MTIME, Core::LIST_SORT_DESC),
        //~ ));
      // dopsat implementaci

      //POZN. zadne zpozdene posilani nebude, protoze se o to stara cron!!!

      //posilat report z aktualniho a posledniho dne!! pokud teda nejaky je...
//~ var_dump($conf['path'], self::$path, self::$email);
      //promazavani error logu
      //odesilani reportu s chybama

      //nacte si konfigurak a z podle toho provede vyhodnoceni/ respektive procisteni a eventualni odeslani emailu pokud bude z den co posilat...
clean_count
      // tady ta trida musi mit nekolik modu funkci ->
      //->
use classes\ICron, classes\Core, classes\Emailer, classes\Tpl;
// oddelit ++testy!!!
* @expectedException PHPUnit_Framework_Error_Notice
//~ echo $bbb;

//~ $page = '
//~ toto je chybova stranka.. bojte se...
//~ cas: {$date},
//~ typ: {$type},
//~ zprava: {$message},
//~ soubor: {$file},
//~ linka: {$line},
//~ -------------------
//~ dalsi info: {$other}';

  //~ $email = new Emailer;
  //~ $email->setFrom('error@project.com')
        //~ ->addTo('geniv.radek@gmail.com')
        //~ ->setSubject('error log ze stranek xyz');

//logovat / logovat a posilat hned / posilat hned / jen zobrazovat
  //~ ErrorLoger::enable(); //jen zobrazovat
  //~ ErrorLoger::enable(__DIR__.'/'); //logovat
  //~ ErrorLoger::enable(__DIR__.'/', 'email@email.com');  //logovat a posilat hned
  //~ ErrorLoger::enable(__DIR__.'/', $email);  //logovat a posilat hned
  //~ ErrorLoger::enable(null, 'email@email.com');  //posilat hned

  //~ ErrorLoger::setErrorPage($page);
  //~ ErrorLoger::setEmailer();
  //~ ErrorLoger::save();
  //~ ErrorLoger::load();

  //~ var_dump(ErrorLoger::synchronizeCron());


//~ try {

  //~ throw new \Exception('bleeeeeee', 10);
  //~ echo $ccc;
  //~ classes\Core::getHoliday('ahoj');
  //~ echo $aaa;

//~ } catch (\Exception $e) {
  //~ ErrorLoger::logTryCatchException($e);
//~ }

//~ echo $ddd;
    /**
     * aktivace debuggeru
     *
     * @param mode mode debuggeru DEVELOPMENT|PRODUCTION
     * @param logDirectory slozka pro logovani
     * @param email adresa kam se budou odesilat logy
     */
    public static function enable($mode = null, $logDirectory = null, $email = null) {

      // dodelat!

      //http://doc.nette.org/cs/debugging
      //via: http://api.nette.org/2.0/source-Diagnostics.Debugger.php.html
      //http://www.php.net/manual/en/function.register-shutdown-function.php
      //http://www.php.net/manual/en/function.set-exception-handler.php
      //http://www.php.net/manual/en/function.set-error-handler.php

      switch ($mode) {
        case self::DEVELOPMENT:
          //vypis klasicky chyb+logovani
          ini_set('display_errors', true);  // poresit
        break;

        case self::PRODUCTION:
          //vypisy zakazat?+logogvat+email

          ini_set('display_errors', false);
          ini_set('html_errors', FALSE);
          ini_set('log_errors', FALSE);
        break;
      }

      //~ register_shutdown_function(array(__CLASS__, '_shutdownHandler'));
      //~ set_exception_handler(array(__CLASS__, '_exceptionHandler'));
      //~ set_error_handler(array(__CLASS__, '_errorHandler'));

      self::$enabled = true;
    }    private static $enabled = false;
    const DEVELOPMENT = ':development',
          PRODUCTION = ':production';
    /**
     * je debugger zapnuty?
     *
     * @return true pokud je zapnuty
     */
    public static function isEnabled() {
      return self::$enabled;
    }
    // loger
/*

array(5) {
  [0] => int(10)
  [1] => float(20.2)
  [2] => bool(true)
  [3] => NULL
  [4] => string(5) "hello"
}

//E_USER_ERROR, E_USER_WARNING, E_USER_NOTICE, E_USER_DEPRECATED
    public static function error($message, $level = E_USER_NOTICE) {
      $last = debug_backtrace();
      $last = end($last); //vezme posledni index
      $msg = sprintf('%s in: %s on line: %s', $message, $last['file'], $last['line']);
      user_error($msg.PHP_EOL.'From classes\Debugger', $level);
    }

// nedoreseno, nevidim v tomto mo velike uplatneni?!
    private static function setErrors($level, $file) {
      switch ($level) {
        case 0:
          error_reporting(0);
        break;

        case 1:
          ini_set('display_errors', 'Off');
          ini_set('error_log', $file);
        break;

        case 2:
          ini_set('display_errors', 'On');
        break;
      }
    }

// nedoreseno, nevidim tady v tom moc velke pouzit...
    public static function configure() {
      self::setErrors(2, 'php_chyby.log');
    }
*/

      // model ma jediny index pole
      $main_model = $model[0];
    } else
    //~ $req = self::request();
    //~ var_dump($req, preg_grep('/^kuksa\/ne\/.*$/', $model));
    //~ exit;

    //~ var_dump($explode_request);

    $main_model = null;
    //~ if (is_string($model) || count($model) === 1) {
      // model je jediny text / nebo jediny index pole

    //~ } else {
      //~ $main_model = $model[0];


    //~ }
     //~ $_mod = explode('/', $model);
//~ $main = $model[0];
$new_index = ;
      //~ var_dump($new_index);
      //~ print_r($poc);
      /*
    $out_model = null;
    // prochazeni modelu
    foreach ($model as $_mod) {
      $explode_model = explode('/', $_mod);

      //~ var_dump($explode_model);

      $slice = array_slice($explode_model, 0, count($explode_request));
      var_dump($slice);

      // hledani vyrazu v modelu
      if (strpos($_mod, '==[') !== false) { // hledani pro regularni vyraz
        //~ var_dump('==[ > ' . $_mod);
      } else
      if (strpos($_mod, '==') !== false) {  // hledani pro klasicky porovnani
        //~ var_dump('== > ' . $_mod);
        //~ var_dump($explode_model, $explode_request);
        $poc = 0;
        foreach ($explode_model as $_ex_index => $_ex_model) {
          $explode_ex_model = explode('==', $_ex_model);
          if (isset($explode_ex_model[1])) {
            if ($explode_request[$_ex_index] === $explode_ex_model[1]) {
              //~ continue(2);  // vyskoceni o 2 urovne
              //~ var_dump($_ex_index);
              $poc++;
            }
          }
        }
        var_dump('== > ' . $_mod);
      } else {
        //jine
        //~ var_dump('jine: ' . $_mod);
      }

      //~ var_dump($explode_model, $explode_request);

      //~ exit;
    }
*/
    //~ var_dump($_req);

    //~ return null;
      //~ $slice = array_slice($explode_model, 0, $count_request);
      //~ if (count($slice) === $count_request) {
        //~ $result = array_combine($slice, $explode_request);
      //~ }
// pripadne jestli to nebude mit co na zacatku delat to vyhodnoceni [0] tak by to melo byt tu...
      //~ print_r($newmodel);
      //~ print_r($poc);
        //~ if (isset($explode_model))
        //~ var_dump($explode_model);
        //~ $newmodel
          //~ if ()
          //~ var_dump($cmp_ex_model);
          // ukladani modelu pro rozhodovani
          //~ var_dump('porovnani: '.$cmp_ex_model[1].' a '.$explode_request[$_ex_index]);
//~ var_dump($cmp_ex_model[1]);
//~ $count_request = count($explode_request);
 //~ // orezani modelu podle poctu polozek v requestu
      //~ $slice = array_slice(explode('/', $main_model), 0, $count_request);
      //~ if (count($slice) === $count_request) {
        //~ // slouceni klicu a hodnot
        //~ $result = array_combine($slice, $explode_request);
      //~ }
//~ // vyber presne tolik hodnot kolik je v requestu
      //~ $slice = array_slice($newmodel[$_max[0]], 0, $count_request);
      //~ if (count($slice) === $count_request) {
        //~ // slouceni klicu a hodnot
        //~ $result = array_combine($slice, $explode_request);
      //~ }
#include <iostream>
#include "TZasobnik.cpp"
using namespace std;
int main(int argc, char **argv) {

  enum volby {EXIT, EMPTY, FULL, PUSH, POP, INSPECTION};
  int choice, vyber;

  cout << "0= pro textovy zasobnik, 1= pro double zasobnik\n";
  (cin >> vyber).get();

  if (vyber == 0) {
    TZasobnik<const char*> *zas = new TZasobnik<const char*>(40);
  } else {
    TZasobnik<double> *zas = new TZasobnik<double>(40);
  }

  do {
      cout << "\nMenu\n/-------------------------\\\n";
      cout << "[ 0] - EXIT -               |\n";
      cout << "[ 1] - ZAS-EMPTY?         |\n";
      cout << "[ 2] - ZAS-FULL?          |\n";
      cout << "[ 3] - PUSH                 |\n";
      cout << "[ 4] - POP                  |\n";
      cout << "[ 5] - INSPECTION           |\n";
      cout << "-----------------------------\\\n";
  }while(choice != 0);

  (cin >> choice).get();

  switch(choice)
  {
    case EMPTY:
    {
      cout << (zas->isEmpty() ? "true" : "false");
      break;
    }

    case FULL:
    {
      cout << (zas->isFull() ? "true" : "false");
      break;
    }

    case PUSH:
    {
      string name;
      getline(cin, name);
      zas->push(name.c_str());
      break;
    }

    case POP:
    {
      cout << zas->pop() << endl;
      break;
    }

    case INSPECTION:
    {
      zas->show();
      break;
    }

    default:
    {
      break;
    }
  }

  delete zas;

  return 0;
}

//~ openlog(__FILE__, LOG_PID | LOG_PERROR, LOG_LOCAL0);
//~ syslog(LOG_WARNING, "fak jeee");
//~ var_dump(error_get_last());
//~ closelog();
//~ http://php.net/manual/en/function.error-get-last.php
//~ var_dump($_SERVER['REQUEST_URI']);
//~ var_dump($_SERVER['REQUEST_URI']);

//~ $_SERVER['REQUEST_URI'] = '/www/git/goodflow/layout_test/kukse/ne/co/je/jak/jo/co/aaa';
//~ $_SERVER['REQUEST_URI'] = '/www/git/goodflow/layout_test/galerie/54';
//~ $req = 'galerie/aaa';
//~ $r = new Router($p);
//~ var_dump(Router::uri($p));
//~ var_dump($r->getModel(), $r::request(), $r->getRequestUri());
//~ $explode_request = explode('/', ($request ?: self::request()));
!is_null($default_uri) ?
// jeste pat testu!!!
//~ $p = array(
    //~ //hlavni
    //~ 'action/sekce/nesekce/asekce/usekce/nasekce/aaaaa/bbbbb/ccc',
    //~ //dalsi jsou uz volitelne pro konkretni pripady
    //~ 'actiony==kuksa/subjinaakce/subsub2/busbus4',
    //~ 'actionx==kuksa/subjinaakcex==ne/subsub2x/busbus4x',
    //~ 'action==galerie/substranka',
    //~ 'action==galerie/page==[0-9]+',
//~ );

//~
//~ var_dump(Router::uri($p));  //, '', $req
//~ print_r(classes\Router::uri($p, '', null, null, 3));
//~ print_r(classes\Router::uri($p, '', null, 2, 3));
//~ print_r(classes\Router::uri($p, '', null, -2));
 // aplikovat exclude, pokud bude v ecxlude ta vyjimka tak se musi vynutit zacachovat!
//~ var_dump($file, date('Y-m-d H:i:s', filemtime($file)), );  // vyhodit podle data filemtime!!!!
var_dump($file, date('Y-m-d H:i:s', filemtime($file)));
count, $interval = 'days'
 $poc =
      foreach ($list as $file) {
        // vymazani starych souboru
        if (filemtime($file) < strtotime('-' . $conf['expire'])) {
          if (unlink($file)) {
            $poc++;
          }
        }
      }
//~ $model = array('action/subakce/id/di/ouje');//, 'a/b/d'
        //~ $r = new classes\Router;
        //~ $r->setDefault('domu')
          //~ ->setModel($model)
          //~ ->setRequest('');
//~ var_dump($r->getUri());
      //~ echo DateAndTime::different($this->getModifyTime())->format('%d.%m.%Y %H:%i:%s');
        //~ $cur = new \DateTime;
        //~ $fil = new \DateTime('@' . $this->getModifyTime());
        //~ var_dump($cur->diff($fil), $cur->diff($fil)->format('%d.%m.%Y %H:%i:%s'));
        //$cur->diff($fil);
 date('d.m.Y H:i:s', $c->getModifyTime()), $c->getExpiration(), $c->getElapsedTime(), $c->getRemainTime(),
 //nastavovat z venci request zdroj, pro vetsi flefibilitu a nezavislost urcite!
//~ $c = new classes\Cache;
//~ $c->setEnabled(true)
  //~ ->setExclude(array('a', 'a/c'))
  //~ ->setExpiration('10 minutes');

//~ $c->reload();
//~ $c->clear();
//~ $c->clearAll(true);
//~ var_dump($c->isCached());
// test aplikace: vynechavani slozek adres ktere neexistuji, aby zbytecne necachoval!!!!!

//~ if ($c->isCached()) {
  //~ echo $c->getContents();
//~ } else {
  //~ $c->start();
  //~ echo 'ahoj'.PHP_EOL;
  //~ echo 'hello word, hviiii';
  //~ $c->end();
//~ }
//~ date('d.m.Y H:i:s', $c->getModifyTime()), $c->getExpiration(), $c->getElapsedTime(), $c->getRemainTime(),

//~ classes\Cache::synchronizeCron(array('expire' => '10 minutes'));

//~ $c->clearAll(true);
//echo $c->getInfo();
$c = classes\Cache::OB();
$c->setEnabled(true)
  ->setExclude(array('a', 'a/c'))
  ->setExpiration('10 minutes');
//~ var_dump($c->isCached());
//~ $c->reload();
if ($c->isCached()) {
  echo $c->getContents();
} else {
  $c->start();
  echo 'ahoj'.PHP_EOL;
  echo 'hello word, hviiii';
  $c->end();
}
echo $c->getInfo();
$this->__data['gg'] = 'abc123';
class XXObjectArray extends \ArrayObject {

    public function __get($name) {
      return (isset($this[$name]) ? $this[$name] : null);
    }

    public function __set($name, $value) {
      $this[$name] = $value;
    }

    public function __isset($name) {
      return isset($this[$name]);
    }

    public function toArray() {
      return $this->getArrayCopy();
    }

  public function init() {
    $this['a'] = 5;
    $this['cc'] = 'ahoj';

    $this->aa = 6;

    $this->ccc = 'ahoj2';
  }
}


//~ $aa = new ObjectArray;
//~ $aa->setFlags();
//~ $aa->init();

//~ $aa['bb'] = 'data1';
//~ $aa->cc1 = 'data2';
//~ $aa->dd = 'data3';

//~ var_dump($aa, count($aa));
//~ var_dump(isset($aa->cc));
//~ var_dump('a--: ' . $aa->b);
//~ var_dump('a[]: ' . $aa['a']);
//~ var_dump($aa->toArray());

//~ $it = $aa->getIterator();
//~ foreach ($it as $k => $v) {
  //~ var_dump($k, $v, PHP_EOL.PHP_EOL);
//~ }
// do teto tridy oddedit toto: \ArrayObject a nechat pouze magic metody!!! a kdyz ne oddedit tak asociaci!!..
//ASI UDELAT PRES ASOCIACI!!!!!    //~ /**
     //~ * inicializace Iterator-u
     //~ *
     //~ * @since 2.12
     //~ * @param void
     //~ * @return void
     //~ */
    //~ public function rewind() {
      //~ $this->position = 0;  // vynulovani pocitadla
      //~ $this->keys = array_keys($this->data);  // nacteni pracovnich klicu
    //~ }
//~
    //~ /**
     //~ * overovani existence indexu
     //~ *
     //~ * @since 2.12
     //~ * @param void
     //~ * @return bool true pokud index existuje
     //~ */
    //~ public function valid() {
      //~ return isset($this->keys[$this->position]);
    //~ }
//~
    //~ /**
     //~ * nacteni polozky podle aktualniho indexu
     //~ *
     //~ * @since 2.12
     //~ * @param void
     //~ * @return mixed hodnota polozky
     //~ */
    //~ public function current() {
      //~ return $this->data[$this->keys[$this->position]];
    //~ }
//~
    //~ /**
     //~ * nacteni hodnoty klice podle aktualniho indexu
     //~ *
     //~ * @since 2.12
     //~ * @param void
     //~ * @return string|int hodnota klice
     //~ */
    //~ public function key() {
      //~ return $this->keys[$this->position];
    //~ }
//~
    //~ /**
     //~ * posun indexu
     //~ *
     //~ * @since 2.12
     //~ * @param void
     //~ * @return void
     //~ */
    //~ public function next() {
      //~ ++$this->position;
    //~ }
//~ $ser = $m->serialize();
//~ var_dump($ser);
//~ $nn = new MujMain;
//~ var_dump($nn);
//~ $nn->unserialize($ser);
//~ var_dump($nn->toArray());
//~ var_dump($m->toArray() === $nn->toArray());

//~ $it = $m->getIterator();
//~ foreach ($it as $k => $v) {
  //~ var_dump($k, $v, PHP_EOL.PHP_EOL);
//~ }
// prijde do testu jako reference!!!!! ++++testy!!!!! a ten pubodni "base" vyradit!!!
//~ class MujMain extends classes\ObjectArray {

  //~ public function __construct() {
    //~ $a = array('c5' => 'zije');
    //~ parent::__construct($a);

    //~ $this->init();
  //~ }

  //~ public function init() {
//~
    //~ $this['a'] = 5;
    //~ $this['cc'] = 'ahoj';
//~
    //~ $this->ccc = 'aahhoojj';
    //~ $this->aa = '55fd';

    //~ $this->getData()->append('hhh');
  //~ }
//~ }

//~ $a = array('c5' => 'zije');
//~ $m = new MujMain;//($a);
//~ $m->init();
//~ var_dump($m['data']);
//~ $m['data'] = 'moje data';
//~ var_dump($m['data']);
//~ var_dump(isset($m['data']));
//~ var_dump(isset($m['data1']));
//~ unset($m['data']);
//~ unset($m['data1']);

//~ var_dump(isset($m->cc));
//~ var_dump(isset($m->gg));
//~ var_dump($m->gg);
//~ $m->gg = 'ggggg';
//~ var_dump($m->gg);
//~ unset($m->gg);
//~ unset($m->gga);

//~ var_dump(count($m));
//~ var_dump();
//~ var_dump($m, $m->a, $m['a']);
//~ var_dump($m->toArray());
/**
     * nastaveni defaultni adresy
     *
     * @since 3.80
     * @param string default defaultni adresa
     * @return this
     */
    public function setDefault($default) {
      $this->menu_default = $default;
      return $this;
    }
 /**
     * nacteni defaultni adresy
     *
     * @since 3.80
     * @param void
     * @return string defaultni adresa
     */
    public function getDefault() {
      return $this->menu_default;
    }
/*
void Zkouska1::operator ()(QString slovo)
{
    //a,e,i,o,u
    QChar pismeno = slovo.at(0).toLower();
    if (pismeno == 'a' || pismeno =='e' || pismeno == 'i' || pismeno == 'o' || pismeno == 'u') {
        if (slovo.at(0).isUpper()) {
            //ui->lineEdit1->setText(slovo.toUpper());
            //result.push_back(slovo.toUpper());
            qDebug() << slovo.toUpper();
            //vektor.push_back();
            ui->lineEdit1->setText(slovo.toUpper());
        } else {
            //ui->lineEdit1->setText(slovo);
            //result.push_back(slovo);
            qDebug() << slovo;
        }
    }
}
**/

/*
void click1Foreach(QString slovo) {
    QString result;
    //a,e,i,o,u
    QChar pismeno = slovo.at(0).toLower();
    if (pismeno == 'a' || pismeno =='e' || pismeno == 'i' || pismeno == 'o' || pismeno == 'u') {
        if (slovo.at(0).isUpper()) {
            result.append(slovo.toUpper());
            //ui->lineEdit1->setText(slovo.toUpper());
        } else {
            result.append(slovo);
            //ui->lineEdit1->setText(slovo);
        }
    }
    return result;
}
*/
//if (isset($values['link'])) {
              //~ var_dump('jde o manualne zadany link');

              //$data['url'] = $values['link'];

            //} else {
              //~ var_dump('jde o automaticky a klasicky generovany path');


            //}
if ($loopLevel == 0) {  // normalni else
} else {  // loop else
//~ $level--;//~ $level++;
            }
[DEVELOPMENT ENVIRONMENT]
* NEW: update czech translation.
svn checkout svn://svn.code.sf.net/p/gambas/code/gambas/trunk
svn checkout https://svn.code.sf.net/p/gambas/code/gambas/trunk
svn checkout svn+ssh://geniv@svn.code.sf.net/p/gambas/code/gambas/trunk
svn+ssh://USERNAME@svn.code.sf.net/p/PROJECTNAME/MOUNTPOINT/
*
$layout = array(
  'home' => array(
    'name' => 'domu',
    //~ 'js' => array(),
    //~ 'css' => array(),
    'visible' => true,  //defaultne ne?
  ),

  'sekce2' => array(
    'name' => 'sekce 2',
    'visible' => false,
  ),

  'sekceX' => array(
    'name' => 'nejaka sekce',
    'link' => 'http://google.cz',
  ),

  'pod' => array(
    'name' => 'podmenu',
    'menu' => array(

                'kontakt' => array(
                  'name' => 'kontaktik',
                ),
                'sub-sekce' => array(
                  'name' => 'sub sekce',
                ),

              ),
  ),

  'sekce1' => array(
    'name' => 'sekce 1',
  ),

  'o-nas' => array(
    'name' => 'O nás',
  ),
);
*/
// promyslet!!!! jestli to ma cenu delit, pac se musi urcit co kde bude... a nema cenu
//asi delat 2 ruzme metody pro totez, musi se uvedomit smet a to z pole->adresare!!
// metodu na nastaveni pocatecni a home stranky $tpl->setEmptyPage('home'));
// testy na configurator!!
// format pole bude zadavene asi v neon formatu, ale musi davat smysl! vytvorit koncept nad neon polem, to same pak nad normalnim a z toho se bude vychazet!!!!
//var_dump(mail('info@pizzeria-mafiosi.cz', 'test subject', 'test mail'));
//~ print_r($layout);
// nastudovat si zasady MVC?
/*
 * MVC: (model-view-controler)
 * model:
 * -datova struktura, data
 * (data ktere se nactidaji z ulozist)
 *
 * view:
 * -zobrazeni, s modelem nic spolecneho
 * (tpl template)
 *
 * controler:
 * -aktualizace dat, spousti provazovani model-view ale nema s nima nic spolecnyho
 * (router + cache a generovani tpl)
 *
 */
          //~ var_dump(file_exists($original_uz));
          //~ if (file_exists($original_uz)) {
            //~ if (move_uploaded_file($original_uz, $new_uz)) {
              //~ echo 'presunuto so slozky out<br />';
            //~ }
          //~ }
        //$new_uz = __DIR__ . '/kf/out/' . pathinfo($value, PATHINFO_FILENAME).'.uz2';
        //var_dump($original, $original_uz, $new_uz);
        //$original_uz = __DIR__ . '/kf/in/' . pathinfo($value, PATHINFO_FILENAME).'.uz2';
String[] args = {String.valueOf(serie), MyCore.intToDate(year, month, day)};
    	Cursor c = mydb.query("days", null, "idserie=? AND strftime('%Y-%m-%d', added)==?", args, null, null, null);
    	(c.getCount() != 0);
;
        String[] args = {String.valueOf(serie), (new SimpleDateFormat("yyyy-MM-dd")).format(new Date())};
        Cursor c = mydb.query("days", null, "idserie=? AND strftime('%Y-%m-%d', added)==?", args, null, null, null);
        c.getCount() == 0
if (!existDay(serie, MyCore.getCurentDate())) {
            ContentValues cv = new ContentValues();
            cv.put("idserie", serie);
            cv.put("added", MyCore.getCurrentDateTime());
            try {
                return mydb.insertOrThrow("days", null, cv);
            } catch (SQLiteException e) {
                return -1;
            }
        } else {
            return -1;
        }
//System.out.println(">>>>>>>>>>>>>.cmp datum: "+MyCore.compareDate(dialog_date, MyCore.getCurentDate()));
						//System.out.println(">>>>>>>>>>>>>.cmp datum begin: "+MyCore.compareDate(dialog_date, MyCore.getFormatDateTime(detail_begin_date, "yyyy-MM-dd")));
						//System.out.println(">>>>>>>>>>>>>.cmp datum begin: "+MyCore.compareDate(dialog_date, MyCore.getFormatDateTime(detail_end_date, "yyyy-MM-dd")));
            //MyCore.getFormatDateTime(detail_begin_date, "yyyy-MM-dd")
if (date != null) {
            Calendar cal = Calendar.getInstance();
            cal.setTime((new SimpleDateFormat("yyyy-MM-dd HH:mm:ss")).parse(date, new ParsePosition(0)));   // z formatu do kalendate
            return (new SimpleDateFormat(format)).format(cal.getTime()).toString(); //do formatu z kalendare
        } else {
            return "";
        }
Calendar cal1 = Calendar.getInstance();
        Calendar cal2 = Calendar.getInstance();
        cal1.setTime((new SimpleDateFormat("yyyy-MM-dd")).parse(d1, new ParsePosition(0)));
        cal2.setTime((new SimpleDateFormat("yyyy-MM-dd")).parse(d2, new ParsePosition(0)));
        return cal1.compareTo(cal2);
Calendar cal1 = Calendar.getInstance();
        Calendar cal2 = Calendar.getInstance();
        cal1.setTime((new SimpleDateFormat("yyyy-MM-dd HH:mm:ss")).parse(d1, new ParsePosition(0)));
        cal2.setTime((new SimpleDateFormat("yyyy-MM-dd HH:mm:ss")).parse(d2, new ParsePosition(0)));
        return cal1.compareTo(cal2);
System.out.println(">>>>>>>>>>>>>>vstupni datum: "+datum);
    	System.out.println(">>>>>>>>>>>>>>>getFormatDateTime: "+MyCore.formatToFormatDateTime(datum, "yyyy-MM-dd", "yyyy-MM-dd HH:mm:ss"));
//// zhavaruje dpc!!!!! asi na konvertech!!!!
// pokud datum neexistuje vlozi se do db
						// musi pridavat datumy jen v rozsahu!! a pokud je --now tak musi brat od minimalniho data po dnesni!
						//mesmi jit pridat dnesni datum a nesmi jit pridat >datum nez to dnesni!!!
  //~ var_dump($__conf['uri_values'][0]);

    //~ var_dump(self::getCurrent($source));

    //~ var_dump($__conf['auto_default_page']);

    //~ var_dump($__conf['uri_values']);
    //~ array_key_exists(
    //~ print_r($source);
    // neznama adresa!!! ale jak???
      //~ var_dump($_lasturl, self::$uri_values);
//($_lasturl === $__conf['uri_values']) ||
   //~ $this->__conf['level']--;
    //~ var_dump($this->__conf['level']);
    //~ var_dump($this->__conf['level']--);
        //~ $this->__conf['level']++;
    //~ var_dump($this->__conf['level']++);
    //~ $conf = $this->__conf;
    //~ $conf['level']--;
    //~ var_dump($this->__conf);
    //~ $p = array_values($this->array_address);
    //~ var_dump($this->last_address);
    //~ var_dump($p[count($p) - 1]['js']);
 //~ print_r($this->array_address);
    //~ return array_map(function($item) {
      //~ var_dump($item);
        //~ return $item['js'];
        //~ }, $this->array_address);
$conf = array(
    //'weburl' => Core::getUrl(),
);

 generovat se bude nad polem ktere bude vytvaret strukturu, laysout bude urcovat konecny format!!!

$tpl = new classes\Tpl;//(array('debug' => false));
$tpl->setMenuDir('my_menu')
    ->setMenuLayout($layout)
    ->setMenuRequest()
    ->setMenuRouter($model)
    ->setDefaultPage('home')
    ->setUserData($conf)

    ->setWebUrl(Core::getUrl())
    ;


// takove uziti! tam jsou 2 rozdilne pristupy!!!!
//$tpl->menuDir();  //menu z adresaru
//$tpl->menuLayout(); //menu z array laytouu


//~ $cas = strtotime("14:41 6.6.2013");
//~ var_dump(date("d.m.Y H:i:s", strtotime('+159 minutes', $cas)));


// testovat nad zakladmin tpl layoutem!!!! do ktereho se to bude hrnout!!!!

//~ print_r($tpl->getMenu());
//var_dump($tpl->getUri());
//~ var_dump($tpl);
//print_r($tpl);

//~ print_r($tpl->getMenu());

$tpl->assign(array(
    'neco' => 'ahoj...',
    'tpl' => $tpl,
));

echo $tpl->template('new_main');

//~ var_dump($tpl->getContent());
// novy android projekt: pocitani kolik dni nosim cocky, a kolikata serie

  /**
   * udrzovani instance radku
   *
   * @package stable
   * @author geniv
   * @version 2.14
   */
  class TplMenuRow extends ObjectArray {

    private $index = 'url'; // defaultni index

    /**
     * nastaveni defaultniho indexu pro __toString
     *
     * @since 2.04
     * @param string index nazev indexu
     * @return this
     */
    public function setIndex($index) {
      $this->index = $index;
      return $this;
    }

    /**
     * obsahuje submenu?
     *
     * @since 2.06
     * @param void
     * @return bool true pokud obsahuje submenu
     */
    public function hasMenu() {
      return !is_null($this->menu);
    }

    /**
     * nacteni indexu pole
     *
     * @since 2.02
     * @param void
     * @return string text z konkretniho indexu
     */
    public function __toString() {
      return $this[$this->index];
    }
  }
    private $menu_dir = null;
    private $menu_layout = null;

    private $menu_request = null;
    private $menu_default = '';
    private $menu_default_page = null;
    private $menu_uri = null;
    private $menu_uri_values = null;
    private $menu_userdata = array();
    private $menu_weburl = null;

    /*
     * zpracoani menu & obsahu
     */

    /**
     * nacteni slozky pro menu
     *
     * @since 3.56
     * @param void
     * @return string path ke slozce
     */
    public function getMenuDir() {
      return $this->menu_dir;
    }

    /**
     * nastaveni slozky pro menu
     *
     * @since 3.56
     * @param string dir path ke slozce
     * @return this
     */
    public function setMenuDir($dir) {
      $this->menu_dir = $dir;
      return $this;
    }

    /**
     * nacteni requestu
     *
     * @since 3.76
     * @param void
     * @return string text request
     */
    public function getMenuRequest() {
      return $this->menu_request;
    }

    /**
     * nastaveni requestu
     *
     * @since 3.76
     * @param string request text request
     * @return this
     */
    public function setMenuRequest($request = null) {
      $this->menu_request = ($request ?: Router::request());
      return $this;
    }

    /**
     * nastaveni menu layoutu
     *
     * @since 3.64
     * @param array layout pole vzoru menu
     * @return this
     */
    public function setMenuLayout($layout) {
      $this->menu_layout = $layout;
      return $this;
    }

    /**
     * nastaveni konfigurace routeru
     *
     * @since 3.86
     * @param string|array model pole modelu
     * @param string default defaultni
     * @param int from
     * @return this
     */
    public function setMenuRouter($model, $default = '', $from = 0) {
      $this->menu_uri = Router::uri($model, $default, $this->menu_request, $from);
      $this->menu_uri_values = array_values($this->menu_uri);
      $this->menu_default = $default;
      return $this;
    }

    /**
     * nastaveni (spojení) defaultni tpl stranky a defaultni route uri
     *
     * @since 4.08
     * @param string page nazev defaultni tpl stranky
     * @return this
     */
    public function setDefaultPage($page) {
      $this->menu_default_page = $page;
      return $this;
    }

    /**
     * nacteni pole z routeru
     *
     * @since 3.88
     * @param void
     * @return array pole routeru
     */
    public function getUri() {
      return $this->menu_uri;
    }

    /**
     * nacteni uzivatelskych dat
     *
     * @since 3.90
     * @param void
     * @return array pole uzivatelskych dat
     */
    public function getUserData() {
      return $this->menu_userdata;
    }

    /**
     * nastaveni uzivatelskych dat
     *
     * @since 3.90
     * @param array data pole uzivatelskych dat
     * @return this
     */
    public function setUserData($data) {
      if ($data && is_array($data)) {
        $this->menu_userdata += $data;
      }
      return $this;
    }

    /**
     * nacitani adresy templatu ktery se ma zobrazovat
     *
     * @since 4.10
     * @param
     * @return
     */
    private function __getActiveTemplate($source = null, $index = 0) {
      // jelikoz jde o tento typ.. tak staci aby se cesta overila proti poli a zarovem podle adresarove struktury??

      $key = (isset($this->menu_uri_values[$index]) ? $this->menu_uri_values[$index] : null);
      $value = ($source ?: $this->menu_layout);

      // reseni!!!: pokud nebude existovat adresarova struktura bude generovat pomocne pole jako json s odkazy na konkretni indexy nebo rovnou premapuje celou strukturu do jednourovneveho pole adresa=>pole nebo adresa/subadresa=>pole
      //to aby kvuli tomu aby do toho dokazal sahat rovnou i bez znovu a znovu regenerovani, regenerace bude poble rekurzivniho poctu polozek count(, recursive!)

      //~ var_dump($value[$key]); //  dodelat...
      //  prochazet rekurzivne? nebo si udelat seznam adres podle layoutu a z toho vychazet? mno jo ale se aadresuje konkretni adresa kdyz to pole bude na jedne urovni?
    }

    /**
     * vnitrni pocitani viditelnych polozek
     *
     * @since 4.02
     * @param array source zdrojove pole
     * @return int pocet viditelnych polozek
     */
    private function __getCount($source) {
      $filter = array_filter($source, function($row) {  //  jestli bude potreba vicekrat oddeli se do metody isVisible, pokud jinak oddeli se metody getVisibleMenu
          return (isset($row['visible']) ? $row['visible'] : true);
      });
      return count($filter);
    }

    /**
     * vnitrni metoda pro generovani menu
     *
     * @since 3.68
     * @param array pole vstupni pole
     * @param array __conf predavan konfigurace mezi volenim pri rekurzi
     * @return array pole instanci TplMenuRow
     */
    private function __getMenu($pole, $__conf = array()) {  //, $maxlevel = 0, $lasturl = array()
      $result = array();

      //~ $this->menu_default
      //~ $this->menu_uri

      //  vzor: trida Web, toto musi mi v sobe  tezce upravenou verzi tridy web!!
      //s tim ze musi byt metody na nacitani to HtmlPage a podobynch trida, takze v podstate se drzet metod jako ma trida web!!!!
      //a timto se stane v podstate nezavislou a trida Web v podstate vypadne ze hry..  :S

      $count = $this->__getCount($pole);

      $lasturl = $__conf['lasturl'];
      $level = $__conf['level'];

      //  active nacitat z externi metody!! ne vnitrne!

      $poc = 0;
      foreach ($pole as $page => $values) {

        $visible = (isset($values['visible']) ? $values['visible'] : true);
        $link = (isset($values['link']) ? $values['link'] : null);

        $_lasturl = array_merge($lasturl, array($page));
        //~ var_dump($_lasturl);
        //~ var_dump($page);

        //~ var_dump($page, $this->menu_default, $this->menu_default_page, '...');
        //$page == $this->menu_default_page
        //~ var_dump($this->menu_uri_values[$level]);
        //($page === $this->menu_default_page)
        //~ var_dump($this->menu_uri_values);

        // ? true : ($this->menu_uri_values[$level] == $this->menu_default ? $page === $this->menu_default_page : false)
        //var_dump($this->menu_uri_values[0] == $this->menu_default);
        //  OMG vyresit defaultni !!!!
        //~ var_dump($this->menu_uri_values[0], $page, $page === $this->menu_default_page);
        //~ var_dump($this->menu_uri);

      // musi taky resit pokd data nastanka neexistuje aby se oznacilo taky defaultni!!!
      //~ var_dump(!isset($this->menu_layout[$this->menu_uri_values[0]]));

      // musi dokaz vyhodnotit ze adresa neexistuje v cele urovni nebo jen v aktualni?

      // taky se m zadratovam aby tady ta metoda vedela jaka je akualni zobrazovana stranka (vnitrni tpl-url)

        // aktivni podle: adresy || defaultni prazdne polozky || ... // dodelat podle vzoru na web.php!!!!!
        $active = (isset($this->menu_uri_values[$level]) && ($page === $this->menu_uri_values[$level])) ||
                      //((!isset($this->menu_uri_values[$level])) && ($page === $this->menu_default_page)) ||
                      (($this->menu_uri_values[0] === $this->menu_default) && ($page === $this->menu_default_page)); // bacha pri prazdne page a


        // vyresit urgentne rozdil mezi linkem menu a url adresou!!!

        // osefovat max zanoreni!

        // doserit oznacovani aktivity

        // doresit maximalni pocty

        //~ var_dump($this->menu_weburl);
        // nastaveni defaultni adresy: pro defaultni uri bude ktery defaultni tpl???

        // dodelat oznacovani aktualnich...!
        //~ var_dump($this->menu_default);
        //~ var_dump(implode('/', $_lasturl));
        $data = array(
          'url' => $page,
          'lasturl' => $_lasturl,
          'allurl' => ($link ?: $this->menu_weburl . implode('/', $_lasturl)),  // kdy je link tak ho pouzije, jinak spoji url a lasturl
          'name' => $values['name'],
          'level' => $level,
          'maxlevel' => $__conf['maxlevel'],
          'active' => $active,
          'visible' => $visible,
          'link' => $link,
          //~ 'menu' => null,
          'poc' => $poc,
          'count' => $count,
        );
        // nejak zarucit aby menu bylo schopne se dal generovat polozky menu?!

        $data = array_merge($data, $values, $this->menu_userdata);

        //~ print_r($data);

        if ($visible) {

          if (isset($values['menu'])) {
            $__conf['level']++;
            // konvert menu layoutu na menu tridy Row
            $__conf['lasturl'] = array($page);
            $data['menu'] = $this->__getMenu($values['menu'], $__conf);
            $__conf['level']--;
          }

          $result[] = new TplMenuRow($data);

          $poc++;
        }

      }

      return $result;
    }

    // meotdu na nastavovani URL, defaultne si stahne tu z Core, predavani do kazdeho radku, prepis indexem [url|link]

    /**
     * nacteni web url
     *
     * @since 3.92
     * @param void
     * @return string text url adresy
     */
    public function getWebUrl() {
      return $this->menu_weburl;
    }

    /**
     * nastaveni web url
     *
     * @since 3.92
     * @param string url test url adresy
     * @return this
     */
    public function setWebUrl($url) {
      $this->menu_weburl = $url;
      return $this;
    }

    // metoda getMenu(maxlevel) by mela byt dostupna z radku, + pridat metody do radku isSubmenu() atd...!

    /**
     * nacteni vygenerovaneho menu
     *
     * @since 3.60
     * @param int maxlevel maximalni level vykreslovaciho zanoreni do ktereho se ma maximalne vykreslovat/generovat
     * @return array pole instanci
     */
    public function getMenu($maxlevel = -1) {
      //generovani menu

      // aplikace levelu
      $this->__getActiveTemplate();

      // promyslet jeste jednou jestli se bude uzivat vykraslovani od levelu? nebo do levelu? i kdyz od levelu je picovina!
      //pac nema cenu to tak resitk kdyz se pozadavky na vykreslovani radavaji rucne a je potreba omezit jak hluboko vykreslovat! --> takze MXA je spravne!

  // auto-rekurzivne to byt nemuze! musi se jeste zadat nejake pole ktere urci u kazde polozky:
  //:: cely nazev (ktery prislusi ke konkretnimu tpl-nazvu), js, css, viditelnost[, *pridavky], a cela struktura hlavne urci poradi!

  //pokud by mely byt nejake pridavky tak jedine resieni asi jako nadglovblani pristup?! .. test jako globalni nastaveni title...

  // vystup musi byt jako pole objektu aby se to dalo opet na urovni hlavniho tpl pouzit v loopu

  //co se tyce budovani menu: tak to bude delat tak ze se udela kontrakt a podle neho se konkterni souboty (*.tpl) vygeneruji!!!

  //odkazy menu se budou generovat automaticky (podle vzoru → pole), s tim ze se budou dat prepsat!!! u polozek kde bude uvedeny link se soubor generovat nesmi!!!!

  //indexy: name, js, css, visible, link, menu

      return $this->__getMenu($this->menu_layout, array('level' => 0, 'maxlevel' => $maxlevel, 'lasturl' => array()));


      //~ print_r($this->menu_layout);





      //~ $list = Core::getLi
      //~ $dir = self::$config['tpl_dir'] . $this->menu_dir;
      //~ var_dump($dir);

      //~ $it = new \DirectoryIterator($dir);
      //~ foreach ($it as $item) {
        //~ if (!$item->isDot()) {
          //~ var_dump($item);
        //~ }
        //~
      //~ }

    }

    // co na to jit od lesa, kazdy objekt bude moct vygenerovat svoje submenu, tzn bude generovat vzdy jen jednu konkterni uroven
    // tzn ze vygeneruje vzdy uroven pokud je v array modelu menu dostupna, to tak ze menu modul bude volan na vygenerovani presne zadane urovne pole a budou pouze tusit kde je submenu ale nebude ho venvnitr tvorit!!!!

    /**
     * nacitani vygenerovaneho obsahu
     *
     * @since 3.60
     * @param void
     * @return string vraci obsah stranek, dle pozice v menu
     */
    public function getContent() {
      //generovani obsahu
    }
// mozna budou minimalne parametry predavane do getContent, getJS, getCSS
    /**
     * nacitani titulku stranek, dle pozice v menu
     *
     * @since 4.10
     * @param void
     * @return slozeny titulek stranek
     */
    public function getTitle() {}

    /**
     * nacitani JS pro konkretni stranku
     *
     * @since 4.10
     * @param void
     * @return array pole JS
     */
    public function getJS() {}

    /**
     * nacitani CSS pro konktretni stranku
     *
     * @since 4.10
     * @param void
     * @return array
     */
    public function getCSS() {}

    /***************************************************************************
     * samotne tpl
     */
//array_key_exists($__conf['uri_values'][$level], $source);
//~ var_dump($__conf['last_exist'], $__conf['possible_active']);  // zapracovat!!!!
var_dump($__conf['possible_active']);
      // existuje submenu k aktualnimu requestu na danem levelu
      //~ $exist_item = self::__existsMenu($__conf['uri_values'], $level, $source);
      //~ $__conf['last_exist'] = $exist_item;
// jak udrzovat aktualni pokud je v adrese 3 polozky a prostredni polozka je chyba...!
//~ var_dump($active.'--'.$page);
//~ var_dump($__conf['uri_values'], $level);
 //~ var_dump('page: ' . $page . ': '. $__conf['last_exist']);
 //~ var_dump($__conf['possible_active']);//~ var_dump(!$__conf['last_exist']);
 // kua duplicita!!!! vyresit, vyhodit!!
      // zajisteni oznacovani defaultni polozky v levelu pokud neexistuje
      //$level_default = (isset($__conf['uri_values'][$level]) ? !array_key_exists($__conf['uri_values'][$level], $source) : false);
//~ var_dump($level_default);
 //~ $active = ((isset($__conf['uri_values'][$level]) && $__conf['uri_values'][$level] === $page) ||  // postupne oznacovani skrz indexy
                      //~ ($__conf['uri_values'][0] == $__conf['uri_default'] && $__conf['default_page'] === $page) ||  // oznacovani pokud je adresa prazdna
                      //~ ($__conf['auto_default_page'] ? false : false))
                      //~ && ($__conf['possible_active'])
                      //~ ;
                      //($__conf['auto_default_page'] ? $level_default && $__conf['default_page'] === $page : false)) && // oznacovani nezname adresy, pokud je zapnuto
                      //($__conf['possible_active']);
// && ($__conf['uri_values'][0] != '')
//~ var_dump($__conf['default_page'] == implode('/', $_lasturl));
    /**
     * zapinani auto oznacovani pokud je neexistujici (spatna) stranka (adresa)
     * - pri spatne adrese oznacovat defaultni?
     *
     * @since 5.22
     * @param bool state true pro zapnuti
     * @return this
     */
    public function setAutoDefaultPage($state) {
      $this->auto_default_page = $state;
      return $this;
    }
//~ ->setAutoDefaultPage(true)
//~ $path = self::$config['compile_dir'].$this->template_name.'.'.$hash.'.php';
//vystupen teto tridy by mohlo byt neco co bude rikat jakou stranku ma jiny externi modul nacist!

$neon_layout = <<<T

home:
  name: domů
  js:
  css:
  menu:
  visible: true
  link:
sekce2:
  name: sekce2
  visible: true
sekceX:
  name: ultra sekce
  link: http://google.cz
  visible: false
pod:
  name: podsekce
  js: d2.js
  css: s2.css
  menu:
    kontakt:
      name: kontaktik
      js: [x3.js]
      css: [d3.css]
      idmenu: kuksa
      menu:
        kuksa:
          name: kukša
          js: [a1.js, a2.js]
          css: [b1.css, b2.css]
          idmenu: ahoj
        huksa:
          name: hukšá bača
          menu:
            guksa:
              name: huhúksa
            duksa:
              name: dudukša +ěščřžýáíé
    sub-sekce:
      name: sub sekce
    sub-sub-sekce:
      name: sub sub sekce
\$ad:
  name: tajna sekce1

T;


$layout = classes\Configurator::decode($neon_layout);
//~ var_dump($layout);

$model = 'a/b/c/d/e/f';

//~ $m = new classes\Menu($layout);
//~ $m->setRouter($model) //'pod/kontakt/kuksa'
  //~ ->setDefaultPage('home', true)
  //~ ->setWebUrl(Core::getUrl())
  //~ ;


$m = classes\Menu::simple($layout, $model, 'home');

//~ var_dump($_SERVER);

$tpl = new classes\Tpl(array('debug' => true));
$tpl->assign(array(
    'neco' => 'ahoj...',
    'menu_loop' => $m->getMenu(),
    'menu' => $m,
));
echo $tpl->template('menu_main');

var_dump(classes\Tpl::synchronizeCron());

//~ $m->getMenu();
//~ var_dump($m->getNames());
//~ var_dump($m->getJS());
//~ var_dump($m->getCSS());
//~ var_dump($m->getActiveAddress());
//~ echo('>>>>>>pro tpl: '.implode('/', $m->getActiveAddress()));
//~ var_dump($m->getVariable('idmenu'));
//~ var_dump($m->getLastAddress());
// vyhazet jednu vnitrni super instanci tridy stdClass!!, btw toto bude abstraktni trida!!
//~ $this->helper->param = array_merge($param, $options);
      //~ $this->helper = new stdClass;

      //~ $this->helper->db = null;
      //~ $this->helper->sqlitePath = null; //
      //~ $this->helper->param = array();
//~ private $helper = null;
  use stdClass,
      PDO,
      PDOException;
// odstranit USE a vyhazet stdClass!!!
   * a budovani podminek uz na
   * urovni databaze je jen kvuli tomu pokud se apliakce uvazuje nad ruznyma
   * zpusobama pristupu tj webowe rozhrani nebo desktop aplikace, aby programator
   * nemusel v kazde aplikaci resit ty same podminky ktere se prave resi obvykle
   * primo v aplikaci.
property_exists($this->helper, 'db')
//overeni jestli existuje vlastnost db
$this->helper->param['charset'];
sprintf(, , , $this->helper->param['charset']);
if (!empty($this->helper->param['dbname'])) { //neprazdne jmeno
        if (!empty($dbpath)) {
          $path = $dbpath.'/'.$this->helper->param['dbname'];
        } else
        if (!empty($this->helper->param['path'])) { //neprazdna cesta
          $path = $this->helper->param['path'].'/'.$this->helper->param['dbname'];
        } else {
          $path = $this->helper->param['dbname'];
        }
      } else {  //prazdne jmeno
        $path = self::SQLITE_MEMORY;
      }

      $this->helper->sqlitePath = $path;  //ulozeni sqlite path
      //~ var_dump($this->data, $this->fetch);
      var_dump($this->fetch, (bool) $this->fetch);
      //~ $this->data
// a co s timto???
    public function hasNext() {}
    public function next() {}
    public function nextRow() {}  // rezim kompatibility
// PDOCursor2 / PDOCursorData / PDOCursorData2
 aby row polozka byla trida PDOCursorData
// wtf?

  class PDOCursorData2 extends \PDOStatement {
    private function __construct() {}

    /*
    public function fetch($fetch_style = \PDO::FETCH_CLASS, $cursor_orientation = \PDO::FETCH_ORI_NEXT, $cursor_offset = 0) {
      //~ var_dump($this);
      parent::setFetchMode($fetch_style, 'classes\PDOCursorData2');
      return parent::fetch($fetch_style, $cursor_orientation, $cursor_offset);
    }

    public function fetchAll($fetch_style = \PDO::FETCH_CLASS, $fetch_argument = 'classes\PDOCursorData2', $ctor_args = array()) {
      //
    }
    */
    //~ public function __get($name) {
      //~ var_dump('__get: '.$name);
      //~ return $this->$name;
    //~ }
  }
/**/

  class PDOCursorData3 {

  }
//~ class PDOCursorData extends ObjectArray { extends \ArrayObject
// musi byt schopno vracet objekt pro -> pristup (nastaveni fetch mode!!!!)
//~ class PDOCursorData extends classes\ObjectArray {}
//~ $a = new PDOCursorData(array('a' => 'b'));
//~ $a->b = 'c';
//~ $a->a = 'dd';
//~ var_dump($a->a);
//~ $a['a'] = 2;
//~ var_dump($a['a']);
//~ var_dump($a, $a->a, $a['a']);
// nasldujici tu byt nemuzou!!!!
    //~ public function getBool($columnIndex) {}
    //~ public function getFloat($columnIndex) {}
    //~ public function getInt($columnIndex) {}
    //~ public function getString($columnIndex) {}
    //~ public function getType($columnIndex) {}
    //~ public function isNull($columnIndex) {}
$it = $st->iter();
var_dump($it);
foreach ($it as $k => $v) {
  var_dump($k, $v);
}
    public function iter() {
      return new \IteratorIterator($this);
    }
//PDOCursorForeachIterator
  /**
   * Trida obsluhujici iterator radku s podporou foreach
   *
   * @deprecated
   * @package stable/pdo
   * @author geniv
   * @version 1.08
   */
  class PDOCursorForeachIterator implements \Iterator {
    private $cursor = null; // predana instance z PDOCursor
    private $fetch = null;  // aktualni polozky
    private $count = 0; // pocitani klicu

    /**
     * defaultni konstruktor
     *
     * @since 1.04
     * @param mixed cursor instance predana z PDOCursor
     */
    public function __construct($cursor) {
      $this->cursor = $cursor;
    }

    /**
     * Returns the current element.
     * - #abstract public mixed current ( void )
     * - nacitani aktualni polozky
     *
     * @since 1.02
     * @param void
     * @return mixed Can return any type.
     */
    public function current() {
      return $this->fetch;
    }

    /**
     * Returns the key of the current element.
     * - #abstract public scalar key ( void )
     * - nacitani aktualniho klice
     *
     * @since 1.02
     * @param void
     * @return scalar Returns scalar on success, or NULL on failure.
     */
    public function key() {
      return $this->count++;
    }

    /**
     * Moves the current position to the next element.
     * - #abstract public void next ( void )
     * - posouvani pozice (provedeni fetch-u)
     *
     * @since 1.02
     * @param void
     * @return void
     */
    public function next() {
      $this->fetch = $this->cursor->fetch();
    }

    /**
     * Rewinds back to the first element of the Iterator.
     * - #abstract public void rewind ( void )
     * - inicializace iteratoru
     *
     * @since 1.02
     * @param void
     * @return void
     */
    public function rewind() {
      $this->count = 0;
      $this->next();
    }

    /**
     * This method is called after Iterator::rewind() and Iterator::next() to check if the current position is valid.
     * - #abstract public boolean valid ( void )
     * - overovani jestli existuje dalsi polozka
     *
     * @since 1.02
     * @param void
     * @return bool The return value will be casted to boolean and then evaluated. Returns TRUE on success or FALSE on failure.
     */
    public function valid() {
      return (bool) $this->fetch;
    }
  }
$result = new PDOCursor($statement);
var_dump($statement->execute($selectionArgs));
$result = new PDOCursor($statement);  //predani cursoru
      return $result;
// predelat!!!!
  /**
   * PDOCursorData,
   * obsluhuje jednotlive radky
   *
   * @deprecated
   * @package unstable/pdo
   * @author geniv
   * @version 1.18
   */
  class PDOCursorDataX implements \ArrayAccess, \Countable {  // opravit a implementovat nebo dedit spis ObjectArray!!

    private $data = null;

    // iterator
    private $iteratorIndex = 0;
    private $klice = array();

    /**
     * kostruktor tridy
     *
     * @param data vstupni data z dotazu
     */
    private function __construct() {
      //$data
      //~ $this->data = $data;
    }

    /**
     * osetrovani existence klicu pole s funkci "array_key_exists"
     *
     * @param array vstupni pole
     * @param key klic do pole
     * @param defautl defaultni polozka
     * @return hodnota z pole pokud v poli existuje
     */
    private function _isNull($array, $key, $default = '') {
      return (isset($array[$key]) ? $array[$key] : $default);
    }

    /**
     * Returns the value of the requested column as a String.
     * public abstract String getString (int columnIndex)
     *
     * @param columnIndex the zero-based index of the target column.
     * @return the value of that column as a String.
     */
    public function getString($columnIndex) {
      return strval($this->_isNull($this->data, $columnIndex));
    }

    /**
     * Returns data type of the given column's value.
     * public abstract int getType (int columnIndex)
     *
     * @param columnIndex the zero-based index of the target column.
     * @return column value type
     */
    public function getType($columnIndex) {
      return gettype($this->_isNull($this->data, $columnIndex, null));
    }

    /**
     * Returns the value of the requested column as a boolean.
     *
     * @param columnIndex the zero-based index of the target column.
     * @return the value of that column as a boolean.
     */
    public function getBool($columnIndex) {
      return (bool) $this->_isNull($this->data, $columnIndex);
    }

    /**
     * Returns the value of the requested column as a float.
     * public abstract float getFloat (int columnIndex)
     *
     * @param columnIndex the zero-based index of the target column.
     * @return the value of that column as a float.
     */
    public function getFloat($columnIndex) {
      return floatval($this->_isNull($this->data, $columnIndex));
    }

    /**
     * Returns the value of the requested column as an int.
     * public abstract int getInt (int columnIndex)
     *
     * @param columnIndex the zero-based index of the target column.
     * @return the value of that column as an int.
     */
    public function getInt($columnIndex) {
      return intval($this->_isNull($this->data, $columnIndex));
    }

    /**
     * Returns true if the value in the indicated column is null.
     * public abstract boolean isNull (int columnIndex)
     *
     * @param columnIndex the zero-based index of the target column.
     * @return whether the column value is null.
     */
    public function isNull($columnIndex) {
      return is_null($this->_isNull($this->data, $columnIndex, null));
    }

    /**
     * vraceni hodnot na zaklade klice predaneho jako objektovy atribut
     *
     * @param name klic k hodnote
     * @return hodnota
     */
    public function __get($name) {
      return $this->_isNull($this->data, $name);
    }

    /**
     *
     * implementace \ArrayAccess
     *
     */

    // test existence
    public function offsetExists($offset) {
      return isset($this->data[$offset]);
    }

    // nacteni hodnoty
    public function offsetGet($offset) {
      return $this->_isNull($this->data, $offset);
    }

    // nastaveni hodnoty (zamerne neimplementovano)
    public function offsetSet($offset, $value) {}
    // likvidae hodnoty (zamerne neimplementovano)
    public function offsetUnset($offset) {}

    /**
     *
     * implementace \Iterator
     *
     */

    public function rewind() {  // inicializace
      $this->iteratorIndex = 0;
      $this->klice = array_values(array_filter(array_keys($this->data), function($v) { return !is_numeric($v); })); // nazvy klicu a oprava indexu
    }

    public function current() { // vraceni hodnoty
      return $this->data[$this->klice[$this->iteratorIndex]]; //klic saha do dat
    }

    public function key() { // vraceni klice
      return $this->klice[$this->iteratorIndex];  //index saha do klicu
    }

    public function next() {  // posouvani na dalsi index
      $this->iteratorIndex++;
    }

    public function valid() { // je dalsi?
      return isset($this->klice[$this->iteratorIndex]);
    }

    /**
     *
     * implementace \Countable
     *
     */
    public function count() {
      return count($this->data) / 2;
    }
  }
   //\Traversable,
//var_dump($iterate); // vyresit problem s typem!!! a zrucit aby se to pokazde naiterovalo jak ma!!!!
      // pokud se s tim muze pracovat tak ten vstup musi byt typu Traversable !!!!
//~ $iterate = array_merge(array($this->first_row), (array) $this->all_row);  // vyresit!!
var_dump('tu je novatrida...');
// tridu ktera bude tyto 2 pole regulerne slucovat!!!
//~ var_dump($st->moveToFirst());
//~ if (!$this->all_row) {
          //~ $this->loadAllRow();
        //~ }
        //~ var_dump($this->sumRow());$this->first_row, $this->all_row
        var_dump('my row');
//first, $ all
//~ if ($first) {
        //~ $this->pole[] = $first;
      //~ }
//array_merge($this->pole, $all);
     * @param object|null first prvni radek z databaze
// doimplementovat!!! - promyslet system prehazovani indexu.. nejstli to bude tady nebo az nad itaratorama? protoze se jinak musi udelat nacitani vsech radku a v tom iteraovat!!!
 //~ var_dump($a);
        //~ $iterate = new __MergeIterator($this->sumRow());
//~ $it = $st->getIterator(true);
     * @param bool foreach true pro iterator na foreach nebo javovsky hasNext()/next(), defaultne true
PDOCursorIterator nebo
     * - true: \IteratorIterator, foreach($it as $v) { ... }
     * - false: PDOCursorIterator, while($it->hasNext()) { $v = $it->next(); ... }
     |PDOCursorIterator
 /**
   * vnitrni trida scitajici prvni a vsechny polozky
   *
   * @package stable/pdo
   * @author geniv
   * @version 1.10
   */
  class __MergeIterator implements \Iterator {
    private $pole = array();  // nosne pole
    private $index = 0; // vnitrni index

    /**
     * defaultni konstruktor pro iterator
     *
     * @since 1.00
     * @param array data vsechny radky z databaze
     */
    public function __construct($data) {
      $this->pole = $data;
    }

    /**
     * nacitani aktuani hodnoty iteratoru
     *
     * @since 1.02
     * @param void
     * @return mixed hodnota polozky
     */
    public function current() {
      return $this->pole[$this->index];
    }

    /**
     * nacitani klice aktualni hodnoty iteratoru
     *
     * @since 1.02
     * @param void
     * @return int hodnota klice
     */
    public function key() {
      return $this->index;
    }

    /**
     * posouvani indexu iteratoru
     *
     * @since 1.02
     * @param void
     * @return void
     */
    public function next() {
      $this->index++;
    }

    /**
     * inicializace iteratoru
     *
     * @since 1.02
     * @param void
     * @return void
     */
    public function rewind() {
      $this->index = 0;
    }

    /**
     * existuje polozka v iteratoru?
     *
     * @since 1.02
     * @param void
     * @return bool true pokud existuje
     */
    public function valid () {
      return isset($this->pole[$this->index]);
    }
  }
    public function isClosed() {
      var_dump($this->closeCursor());
      return (is_null($this));
    }
var_dump($st->isClosed());
private $count = 0;
$this->count = 1;
$this->count += count($this->all_row);  // pripocitani poctu radku
if (is_numeric($columnIndex)) {
        $pole = array_values((array) $this);
        return $pole[$columnIndex];
      } else {
        $this->$columnIndex
        }
  /**
   * PDOCursor, prace s navratovym cursorem dotazu
   * podporuje foreach(...) a count()
   * - zalozeno na: http://developer.android.com/reference/android/database/Cursor.html
   *
   * @deprecated
   * @package unstable/pdo
   * @author geniv
   * @version 2.00
   */
  class PDOCursorX implements \Iterator/*, \Countable*/ {
// prepracovat!!!
    private $cursor = null;

    /**
     * hlavni konstruktor
     *
     * @param statement handler po preparaci a execute
     */
    public function __construct($statement) {
      $this->cursor = new \stdClass;  // VYHODIT!!!!
      //fetch pristup (iterator)
      $this->cursor->fetch = null;
      //fetchAll pristup (naraz)
      $this->cursor->fetchAll = new \stdClass;
      $this->cursor->fetchAll->data = null;
      $this->cursor->fetchAll->index = 0;
      $this->cursor->fetchAll->columns = null;
      //statement from executed
      $this->cursor->statement = $statement;

      // predelat na pole....
      //~ $this->cursor = array('fetch', 'fetchAll', 'statement');
    }

    /**
     * Closes the Cursor, releasing all of its resources and making it completely invalid.
     * public abstract void close ()
     *
     * @return Returns TRUE on success or FALSE on failure.
     */
    public function close() {
      $result = $this->cursor->statement->closeCursor();
      $this->cursor->statement = null;
      return $result;
    }
// upravit podle: http://stackoverflow.com/questions/7617275/in-php-how-do-i-set-default-pdo-fetch-class nebo http://php.vrana.cz/pdo-a-dalsi-novinky-v-php-5-1.php
    /**
     * osetrovani existence klicu pole s funkci "array_key_exists"
     *
     * @param array vstupni pole
     * @param key klic do pole
     * @param defautl defaultni polozka
     * @return hodnota z pole pokud v poli existuje
     */
    private function _isNull($array, $key, $default = '') {
      return (is_array($array) && array_key_exists($key, $array) ? $array[$key] : $default);
    }
// dporuceni: nepouzivat zatim metody pracujici s fetchAll !!!!! jsou tu kvuli ni duplikace kodu!
    /**
     * interni incializace pro cteni kurzoru s fetchAll
     */
    private function _initFetchAll() {
      if (is_null($this->cursor->fetch) && is_null($this->cursor->fetchAll->data)) {
        // nacitat veskera data do PDOCursorData (kazdy radek!)
        $this->cursor->fetchAll->data = $this->cursor->statement->fetchAll(); //inicializace fetchAll()
        $this->cursor->fetchAll->count = count($this->cursor->fetchAll->data);
        if ($this->cursor->fetchAll->count > 0) {
          $this->cursor->fetchAll->columns = array_keys($this->cursor->fetchAll->data[0]);
        }
      }
    }

    /**
     * vraceni zdroje z fetch nebo fetchAll
     *
     * @return nactene data kurzoru
     */
    private function _getSource() {
      return (!is_null($this->cursor->fetch) ?
                $this->cursor->fetch :
                $this->cursor->fetchAll->data[$this->cursor->fetchAll->index]
              );
    }

    /**
     * Return total number of columns
     * public abstract int getColumnCount ()
     * (fetchAll)
     *
     * @return number of columns
     */
    public function getColumnCount() {
      $this->_initFetchAll();
      return count($this->cursor->fetchAll->columns) / 2;
    }

    /**
     * Returns the zero-based index for the given column name, or -1
     * if the column doesn't exist.
     * public abstract int getColumnIndex (String columnName)
     * (fetchAll)
     *
     * @param columnName the name of the target column.
     * @return the zero-based column index for the given column name, or -1 if the column name does not exist.
     */
    public function getColumnIndex($columnName) {
      $this->_initFetchAll();
      $func = function($val) { return is_string($val); };
      $filter = array_flip(array_values(array_filter($this->cursor->fetchAll->columns, $func)));
      return $this->_isNull($filter, $columnName, -1);
    }

    /**
     * Returns the zero-based index for the given column name,
     * or throws PDOException if the column doesn't exist.
     * If you're not sure if a column will exist or not use getColumnIndex(String)
     * and check for -1, which is more efficient than catching the exceptions.
     * public abstract int getColumnIndexOrThrow (String columnName)
     * (fetchAll)
     *
     * @param columnName the name of the target column.
     * @return the zero-based column index for the given column name
     */
    public function getColumnIndexOrThrow($columnName) {
      $result = $this->getColumnIndex($columnName);
      if ($result < 0) {
        throw new \PDOException('column does not exist');
      }
      return $result;
    }

    /**
     * Returns the column name at the given zero-based column index.
     * public abstract String getColumnName (int columnIndex)
     * (fetchAll)
     *
     * @param columnIndex the zero-based index of the target column.
     * @return the column name for the given column index.
     */
    public function getColumnName($columnIndex) {
      $this->_initFetchAll();
      $func = function($val) { return is_string($val); };
      $filter = array_values(array_filter($this->cursor->fetchAll->columns, $func));
      return $this->_isNull($filter, $columnIndex);
    }

    /**
     * Returns a string array holding the names of all of the columns in the
     * result set in the order in which they were listed in the result.
     * public abstract String[] getColumnNames ()
     * (fetchAll)
     *
     * @return the names of the columns returned in this query.
     */
    public function getColumnNames() {
      $this->_initFetchAll();
      $func = function($val) { return is_string($val); };
      return array_values(array_filter($this->cursor->fetchAll->columns, $func));
    }

    /**
     * Returns the numbers of rows in the cursor.
     * public abstract int getCount ()
     * (fetchAll)
     *
     * @return the number of rows in the cursor.
     */
    public function getCount() {
      $this->_initFetchAll();
      return $this->cursor->fetchAll->count;
    }

    /**
     * alias for getCount(), this is not \Countable!
     * (fetchAll)
     *
     * @return Count elements of an object
     */
    public function count() {
      return $this->getCount();
    }

    /**
     * Returns the value of the requested column as a boolean.
     *
     * @param columnIndex the zero-based index of the target column.
     * @return the value of that column as a boolean.
     */
    public function getBool($columnIndex) {
      return (bool) $this->_isNull($this->_getSource(), $columnIndex);
    }

    /**
     * Returns the value of the requested column as a float.
     * public abstract float getFloat (int columnIndex)
     *
     * @param columnIndex the zero-based index of the target column.
     * @return the value of that column as a float.
     */
    public function getFloat($columnIndex) {
      return floatval($this->_isNull($this->_getSource(), $columnIndex));
    }

    /**
     * Returns the value of the requested column as an int.
     * public abstract int getInt (int columnIndex)
     *
     * @param columnIndex the zero-based index of the target column.
     * @return the value of that column as an int.
     */
    public function getInt($columnIndex) {
      return intval($this->_isNull($this->_getSource(), $columnIndex));
    }

    /**
     * Returns the current position of the cursor in the row set.
     * public abstract int getPosition ()
     * (fetchAll)
     *
     * @return the current cursor position.
     */
    public function getPosition() {
      return $this->cursor->fetchAll->index;
    }

    /**
     * Returns the value of the requested column as a String.
     * public abstract String getString (int columnIndex)
     *
     * @param columnIndex the zero-based index of the target column.
     * @return the value of that column as a String.
     */
    public function getString($columnIndex) {
      return strval($this->_isNull($this->_getSource(), $columnIndex));
    }

    /**
     * Returns data type of the given column's value.
     * public abstract int getType (int columnIndex)
     *
     * @param columnIndex the zero-based index of the target column.
     * @return column value type
     */
    public function getType($columnIndex) {
      return gettype($this->_isNull($this->_getSource(), $columnIndex, null));
    }

    /**
     * Returns whether the cursor is pointing to the position after the last row.
     * public abstract boolean isAfterLast ()
     * (fetchAll)
     *
     * @return whether the cursor is after the last result.
     */
    public function isAfterLast() {
      return ($this->cursor->fetchAll->index == ($this->getCount() - 2));
    }

    /**
     * Returns whether the cursor is pointing to the position before the first row.
     * public abstract boolean isBeforeFirst ()
     * (fetchAll)
     *
     * @return whether the cursor is before the first result.
     */
    public function isBeforeFirst() {
      return ($this->cursor->fetchAll->index == 1);
    }

    /**
     * return true if the cursor is closed
     * public abstract boolean isClosed ()
     * (fetchAll)
     *
     * @return true if the cursor is closed.
     */
    public function isClosed() {
      return (is_null($this->cursor->statement));
    }

    /**
     * Returns whether the cursor is pointing to the first row.
     * public abstract boolean isFirst ()
     * (fetchAll)
     *
     * @return whether the cursor is pointing at the first entry.
     */
    public function isFirst() {
      return ($this->cursor->fetchAll->index == 0);
    }

    /**
     * Returns whether the cursor is pointing to the last row.
     * public abstract boolean isLast ()
     * (fetchAll)
     *
     * @return whether the cursor is pointing at the last entry.
     */
    public function isLast() {
      return ($this->cursor->fetchAll->index == ($this->getCount() - 1));
    }

    /**
     * Returns true if the value in the indicated column is null.
     * public abstract boolean isNull (int columnIndex)
     *
     * @param columnIndex the zero-based index of the target column.
     * @return whether the column value is null.
     */
    public function isNull($columnIndex) {
      return is_null($this->_isNull($this->_getSource(), $columnIndex, null));
    }

    /**
     * Move the cursor by a relative amount, forward or backward, from the current position.
     * Positive offsets move forwards, negative offsets move backwards.
     * If the final position is outside of the bounds of the result set then the resultant
     * position will be pinned to -1 or count() depending on whether the value is off the front or end of the set, respectively.
     * public abstract boolean move (int offset)
     * (fetchAll)
     *
     * @param offset the offset to be applied from the current position.
     * @return whether the requested move fully succeeded.
     */
    public function move($offset) {
      $this->_initFetchAll();
      $index = $this->cursor->fetchAll->index;
      $offsetindex = $index + $offset;  //predvypocet posunu
      $podm = ($offsetindex > 0 && $offsetindex < $this->getCount());
      $this->cursor->fetchAll->index = ($podm ? $offsetindex : $index);
      return $podm;
    }

    /**
     * Move the cursor to the first row.
     * This method will return false if the cursor is empty.
     * public abstract boolean moveToFirst ()
     * (fetchAll)
     *
     * @return whether the move succeeded.
     */
    public function moveToFirst() {
      $this->_initFetchAll();
      $this->cursor->fetchAll->index = 0;
      return ($this->getCount() > 0);
    }

    /**
     * Move the cursor to the last row.
     * This method will return false if the cursor is empty.
     * public abstract boolean moveToLast ()
     * (fetchAll)
     *
     * @return whether the move succeeded.
     */
    public function moveToLast() {
      $this->_initFetchAll();
      $this->cursor->fetchAll->index = $this->getCount() - 1;
      return ($this->getCount() > 0);
    }

    /**
     * Move the cursor to the next row.
     * This method will return false if the cursor is already past the last entry in the result set.
     * public abstract boolean moveToNext ()
     * (fetchAll)
     *
     * @return whether the move succeeded.
     */
    public function moveToNext() {
      $this->_initFetchAll();
      $result = ($this->getCount() > ($this->cursor->fetchAll->index + 1));
      if ($result) {
        $this->cursor->fetchAll->index++;
      }
      return $result;
    }

    /**
     * Move the cursor to an absolute position. The valid range of values is -1 <= position <= count.
     * This method will return true if the request destination was reachable, otherwise, it returns false.
     * public abstract boolean moveToPosition (int position)
     * (fetchAll)
     *
     * @param position the zero-based position to move to.
     * @return whether the requested move fully succeeded.
     */
    public function moveToPosition($position) {
      $this->_initFetchAll();
      $result = ($position > 0 && $position < $this->getCount());
      if ($result) {
        $this->cursor->fetchAll->index = $position;
      }
      return $result;
    }

    /**
     * Move the cursor to the previous row.
     * This method will return false if the cursor is already before the first entry in the result set.
     * public abstract boolean moveToPrevious ()
     * (fetchAll)
     *
     * @return whether the move succeeded.
     */
    public function moveToPrevious() {
      $this->_initFetchAll();
      $result = (0 <= ($this->cursor->fetchAll->index - 1));
      if ($result) {
        $this->cursor->fetchAll->index--;
      }
      return $result;
    }

    /**
     *
     * normal iterator hasNext() + nextRow()
     *
     */

    /**
     * Return true if has next row (fetch)
     * public boolean hasNext ()
     *
     * @return true if exist next
     */
    public function hasNext() {
      $this->cursor->fetch = $this->cursor->statement->fetch(); //inicializace fetch()
      return (!empty($this->cursor->fetch));
    }

    /**
     * Return current row (fetch)
     * public boolean next ()
     *
     * @return current row
     */
    public function nextRow() {
      return new PDOCursorData($this->cursor->fetch);
    }

    /**
     * Interface for external iterators or objects that can be iterated themselves internally.
     * (fetch)
     */

    /**
     * incialization iterator (fetch)
     */
    private function _initIterate() {
      $this->cursor->fetch = $this->cursor->statement->fetch(); //inicializace fetch()
    }

    private $_iterate = 0;  //pocitadlo Iteratoru

    /**
     * Return the current element
     */
    public function current() {
      return new PDOCursorData($this->cursor->fetch);
    }

    /**
     * Return the key of the current element
     */
    public function key() {
      return $this->_iterate++;
    }

    /**
     * Move forward to next element
     */
    public function next() {
      $this->_initIterate();
    }

    /**
     * Rewind the Iterator to the first element
     */
    public function rewind() {
      $this->_initIterate();
      $this->_iterate = 0;
    }

    /**
     * Checks if current position is valid
     */
    public function valid() {
      return (!empty($this->cursor->fetch));
    }
  }
 * phpunit --bootstrap ../classes/pdoopenhelper.php PDOOpenHelperTest
var_dump('h:'.$this->data[$this->index]->$offset);
//~ $this->elem = new \stdClass;
//~ private $elem = null;
//~ $this->elem->id = $id;
      //~ $this->elem->depth = $depth;
$this->configure_doctype = $doctype;
      $this->page = new \stdClass;
      $this->page->htmlClass = $htmlClass;  //trida generovani html kodu
      $this->page->head = array();  //head
      $this->page->meta = array();  //meta v head (http-/content, xx/yy)
      $this->page->metaTag = array();  //meta v head (name/content)
      $this->page->title = null;  //title v head
      $this->page->body = array();  //body
      $this->page->favicon = null;  //favicona
      $this->page->embedCSS = array();  //embed css zapis
      $this->page->externalCSS = array(); //externi css linky
      $this->page->embedJS = array();  //embed js zapis
      $this->page->externalJS = array();  //externi js linky
      $this->page->googleCode = null; //kod google analitics

      $this->page->configure = new \stdClass;
      $this->page->configure->doctype = $doctype;
      $this->page->configure->language = 'cs';
      $this->page->configure->url = null;
      $this->page->configure->charset = 'utf-8';
      $this->page->configure->bodyAttributes = array();
      $this->page->configure->bodyContent = array('text' => null, 'html' => null);
      $this->page->configure->isBody = false; //detekce jestli uz bylo vlozeno body
// naprosto nevhodne uziti stdClass!
    private $page = null;
// vyzet jednu vnitrni univerzalni promennou a nahradit promennyma!!
// rozepsanio doopravit!!
$this->page->configure->doctype;
this->page->configure->charset;
 //~ private $htmlClass = null;  // trida generovani html kodu
     //~ private $meta = array();  // meta v head (http-/content, xx/yy)
    //~ private $metaTag = array(); // meta v head (name/content)
    //~ private $title = null;
     //~ private $favicon = null;
    //~ private $googleCode = null;
$this->page->htmlClass;
$this->page->googleCode
@since 3.00
      $this->page->configure->isBody = true;
$this->page->configure->isBody = true;
$this->page->configure->bodyContent
        $this->page->configure->isBody = true;
$this->page->htmlClass
$this->page->configure->doctype
$this->page->configure->language
$this->page->configure->language
$this->page->configure->charset
$this->page->configure->language
$this->page->configure->language
$this->page->configure->charset
$this->page->meta
$this->page->metaTag
$this->page->googleCode
is_null($this->page->favicon)
$this->page->title
$this->page->configure->bodyAttributes
$this->page->configure->bodyContent
  //~ use stdClass,
      //~ classes\Core,
      //~ ArrayAccess;
$this->page->configure->bodyContent
       if ($this->db->query('suroviny')->getCount() > 0) {
          $this->db->truncate('suroviny');
        }
implements \ArrayAccess
//if (is_numeric($offset))var_dump($offset);
//(isset($this->$offset) ? $this->$offset : null);
//~ var_dump($i.'=> row: ->id: '.$v->_id.', [_id]: '.$v['_id'].', [0]: '.$v[0].', ->(0): '.$v->getInt(0).', ->(_id): '.$v->getInt('_id').', ->(get(_id)): '.$v->getInt($c->getColumnIndex('_id')));
//~ $this->assertEquals($predpoklad[$i][0], $v[$c0->getColumnName(0)]);
          //~ $this->assertEquals($predpoklad[$i][0], $v[$c0->getColumnIndex('_id')]);
          //~ $this->assertEquals($predpoklad[$i][0], $v->getInt($c0->getColumnName(0)));
          //~ $this->assertEquals($predpoklad[$i][0], $v->getInt($c0->getColumnIndex('_id')));
        //~ $c0 = $this->db->query('suroviny');
        //~ var_dump($c0->getColumnName(0));

        //~ $c = $this->db->query('suroviny');
        //~ $it = $c->getIterator();
        //~ var_dump($it->getColumnName(0));
        //~ foreach ($it as $i => $v) {
          //~ var_dump($v->_id);
          //~ var_dump($c->getColumnName(0));
          //~ var_dump($predpoklad[$i][0], $v[$c->getColumnName(0)]);
          //~ $this->assertEquals($predpoklad[$i][0], $v[$c->getColumnName(0)]);
          //~ $this->assertEquals($predpoklad[$i][0], $v[$c->getColumnIndex('_id')]);
        //~ }
//~ $c0 = $this->db->query('suroviny');
        //~ $cv = new ContentValues(array('_id' => 1));
        //~ $cv->put('nazev', 'cau');
        //~ $this->db->insert('suroviny', $cv);
//~
        //~ $cv = new ContentValues(array('_id' => 2));
        //~ $cv->put('nazev', 'ahoj');
        //~ $this->db->insert('suroviny', $cv);
//~
        //~ $cv = new ContentValues(array('_id' => 3));
        //~ $cv->put('nazev', 'nazdar');
        //~ $this->db->insert('suroviny', $cv);
implode(', ', ($columns ?: array('*')))
// na rekurzivni generovani slozek!
//vytvareni struktury slozek podle znameho pathu
// overovat existenci adresare a prava zapicu, colat: Core::
throw new Exception('ahojy');
//null, 'geniv.radek@gmail.com'
var_dump($crate->menu->getActiveAddress());
//~ var_dump($crate->menu->getUri(), $crate->menu->getWebUrl(), $crate->menu->getActiveAddress());
var_dump(implode(',', $crate->menu->getActiveAddress()));
//~ $html = "\nT;\n".$cmrs.' .= ('.$html.") . <<<T\n";  // vlozeni
//~ var_dump('g >>> '.$html, preg_match('/.*\?.*\:.*/', $html));
// menu + tpl + html page + core konstrola php
    /*
     * reimplementace Android Cursor
     */
// toto tu asi fakt nebude!!!
    /**
     * Returns data type of the given column's value.
     * - #public int getType (int column)
     *
     * @since 1.10
     * @param string columnIndex the zero-based index of the target column.
     * @return string column value type
     */
    public function getType($columnIndex) {
      return gettype($this[$columnIndex]);
    }
      //~ var_dump($this->__getValue($offset));
       var_dump();isset($this->$offset);

 0: 000000000110000000000000011
15: 111100000001111100000000000


1  10 MonsterSquad=4A
2  10 MonsterSquad=4A1G
3  00 MonsterSquad=2B
4  00 MonsterSquad=4B
5  00 MonsterSquad=3A1G
6  00 MonsterSquad=2D
7  00 MonsterSquad=3A1C
8  00 MonsterSquad=2A2C
9  00 MonsterSquad=2A3B1C
10 00 MonsterSquad=1A3C
11 00 MonsterSquad=3A1C1H
12 01 MonsterSquad=3A1B2D1G1H
13 01 MonsterSquad=3A1E
14 01 MonsterSquad=2A1E
15 01 MonsterSquad=2A3C1E
16 01 MonsterSquad=2B3D1G2H
17 10 MonsterSquad=4A1C
18 10 MonsterSquad=4A
19 00 MonsterSquad=4D
20 00 MonsterSquad=4C
21 00 MonsterSquad=6B
22 00 MonsterSquad=2B2C2D1H
23 00 MonsterSquad=2A2B2C2H
24 01 MonsterSquad=1F
25 01 MonsterSquad=1I
26 01 MonsterSquad=2A1C1I
27 01 MonsterSquad=2I

MonsterClasses=(MClassName="KFChar.ZombieClot",Mid="A")
MonsterClasses=(MClassName="KFChar.ZombieCrawler",Mid="B")
MonsterClasses=(MClassName="KFChar.ZombieGoreFast",Mid="C")
MonsterClasses=(MClassName="KFChar.ZombieStalker",Mid="D")
MonsterClasses=(MClassName="KFChar.ZombieScrake",Mid="E")
MonsterClasses=(MClassName="KFChar.ZombieFleshpound",Mid="F")
MonsterClasses=(MClassName="KFChar.ZombieBloat",Mid="G")
MonsterClasses=(MClassName="KFChar.ZombieSiren",Mid="H")
MonsterClasses=(MClassName="KFChar.ZombieHusk",Mid="I")
$this->groups = new \stdClass;  // komplet total shit!
private $groups = null;
private $form = null; // instancni atribut obsahu
echo $crate->tpl->template('index');
string|null compile_path cesta pro prime vykonani uz zkompilovaneho soubouru (musi byt s returnem)
$compile_path = null
 // pokud je predan radoby zkompilovanej php soubor
      if ($compile_path) {
        $_compile_path = self::$config['tpl_dir'] . $compile_path; // template musi vracet data pres return!

        if (!file_exists($_compile_path)) {
          die('neexistuje kompilace: '.$_compile_path);
        }
      } else {
      }
//~ var_dump('p2: ' .$name);
// $this->template
var_dump('render to: '.$_compile_path);
        //~ var_dump($name, $this->template, $template);

        if (file_exists($name)) {
          //
        }

        $template = ;
if (preg_match('/.*\(.*\)/', $_path)) { // detekce funkce

              var_dump('eval: '.eval($_path));

              $_path = '".' . $_path . '."';

            }
var_dump($_path);
var_dump($actual);
var_dump('incl>: '.$include);
// dodelt upracu a korekci cesty!!!!
//~ var_dump(self::$config['tpl_dir'], $_path, $include, preg_match('', $_path), PHP_EOL.PHP_EOL.PHP_EOL);
$this->replaceVar($matches[1], false, false)
{include="ahoj"}
-----
var_dump($actual, $include, $this->vars['menu']->getMenu());
//~ $crate->tpl->clearAll();
//$crate->tpl->template(implode('/', $crate->menu->getActiveAddress()))->render()
//~ echo (classes\Tpl::draw('index')->assign($crate->toArray()));
//~ $result .= "\nT;\n \classes\Tpl; echo \$__var->template(\"$_path\"); ".$cmrs." .= <<<T\n";
//var_dump($_path, $include);
              //~ $result .= "\nT\n. require(\"" . $_path . '.tpl' . "\") . <<<T\n";
              //~ $result .= "\nT\n. $this->compileTemplate(file_get_contents(\"".$include."\")) . <<<T\n";
              //~ $result .= "\nT\n. $this->compileTemplate(\"".$include."\") . <<<T\n";
var_dump(preg_match('/\$.*|.*\(.*\)/', $_path));
//~ $__tpl = new self;
                //~ $__tpl->assign($this->vars) //prenos promennych
                      //~ ->template($_path); //prenos nazvu
                //~ $result .= $__tpl->render();  // vlozeni
// pokud neni nastaveny path ani email, vytiskne na stdout
      //~ if (!self::$path && !self::$email) {
      //~ }
//var_dump('pole:'.print_r($array, true).', chyba: '.$array[$key], $key, PHP_EOL.PHP_EOL);
var_dump($method, $parameters);//~ $attr = self::isFill($parameters, 0, null); /
//self::isFill($parameters, 0, null)
self::isFill($parameters, 1);
// self::isFill(self::$elements[$this->elem_id]['attributes'], $attribute);
$parameters[1]
//self::isFill($parameters, 1, null));
//self::isFill($parameters, 1, null),
// self::isFill(self::$elements, $contentid, $contentid);
    /**
     * overuje jestli dany klic existuje v danem poli
     * alias metody: Core::isFill()
     *
     * @since 4.00
     * @param array array vstupni pole
     * @param string key vstupni klic
     * @param mixed default defaultni polozka pokud klic neexistue nebo neni plny
     * @return mixed hodnota z klice nebo default
     */
    //~ private static function isFill($array, $key, $default = '') {
      //~ return (!empty($array[$key]) ? $array[$key] : $default);
    //~ }
, array('base_dir' => dirname(__DIR__).'/')
//~ var_dump($_path, self::$config['tpl_dir'] . $_path);
var_dump($include);
//~ $act = $_path;
//~ var_dump('template: '.self::$config['tpl_dir']);
      var_dump($name);
//~ var_dump('p1: '. $path);
// poresit vytvareni jestli tak vyhodit auto vytvareni slozek a vytvaret pouze soubory!!!
      // utvoreni souborove struktury pokud neexituje
      /*
      $dir = dirname($path);
      if (!file_exists($dir)) {
        if (!@mkdir($dir, 0777, true)) {
          die('nelze vytvorit dir strukturu pro path "'.$dir.'"');
        }
      }
  //~ $this->template = file_get_contents($path);    */
// tyto metody se tu uz opakuji! tak projit a vyhodit!!!!
//~ var_dump('template path: '.$path.', name: '.$name.PHP_EOL.PHP_EOL.PHP_EOL);
var_dump(!file_exists($path));
var_dump(self::$config['auto_create'], $name);
private $template;
//~ Tpl::setConfigure('auto_gen_dir', true);  //aktivace automatickeho generovani
        //~ $this->object->installDirs()->clearAll(); //instalace slozek a vycisteni
        //~ $this->assertTrue(Tpl::getConfigure('auto_gen_dir'));
/**
     * kontrola a instalace adresaru potrebnych pro template
     *
     * @deprecated
     * @since 2.00
     * @param void
     * @return this
     */
    public function installDirs() {
      if (self::$config['auto_gen_dir']) {
        // template dir
        if (!file_exists(self::$config['tpl_dir'])) {
          if (!is_writable(dirname(self::$config['tpl_dir']))) {
            die('nemam dost prav na zapis na slozku "'.self::$config['tpl_dir'].'"');
          }

          if (!@mkdir(self::$config['tpl_dir'])) {
            die('nepodarilo se vytvorit "'.self::$config['tpl_dir'].'"');
          }
        }

        // compile dir
        if (!file_exists(self::$config['compile_dir'])) {
          if (!is_writable(dirname(self::$config['compile_dir']))) {
            die('nemam dost prav na zapis na slozku "'.self::$config['compile_dir'].'"');
          }

          if (!@mkdir(self::$config['compile_dir'])) {
            die('nepodarilo se vytvorit "'.self::$config['compile_dir'].'"');
          }
        }
      }
      return $this;
    }
    array('force_compile' => $this->configure['tpl']['force_compile'])
var_dump();
->assign(array(
                    //'loop_menu' => $crate->menu->getMenu(),
                ));
//class MyMysql extends PDOHelper {}
  //__construct()
  //onCreate()
//~ }

//~ try {
/*
$handle = new MyMysql('gmr-cook');
$db = $handle->MySQL('localhost', 'root', 'geniv')->getDatabase();
*/

//~ $pdo = $db->getPDO();
//~ var_dump($pdo);

//~ var_dump($st);
//~ $st = $pdo->query('SELECT * FROM kategorie;');  // mene vykone a nebezpecne
//~ $st = $pdo->prepare('SELECT * FROM kategorie;');
//~ $st->setFetchMode(\PDO::FETCH_CLASS, 'classes\PDOCursorData3');
//~ $st->execute();

//~ var_dump($db->getDriverName());
//$c = $db->query('kategorie');
//~ $st = $db->rawQuery('SELECT * FROM kategorie;');

//foreach ($c as $v) {
  //
  //~ var_dump($v);
//}

//~ var_dump($st);
//~ var_dump($st->getColumnCount());
//~ var_dump($st->getColumnIndex('nazev'));
//~ var_dump($st->getColumnIndexOrThrow('nazevX'));
//~ var_dump($st->getColumnNames());
//~ var_dump($st->getColumnName(1));
//~ var_dump($st->getCount(), $st->count());

//~ var_dump($st->getFirst());
//~ var_dump($st->getAll());

//~ var_dump($st);

//~ foreach ($st as $k => $v) {
  //~ var_dump($k, $v);
  //~ var_dump($v, $v->nazev, $v['nazev']);
  //~ $v['nazevX'] = 'xx';
  //~ unset($v['nazevX']);
  //~ $v->nazevX = 'cc';
  //~ var_dump('obj: '.$v->nazevX, 'arr: '.$v['nazevX'], $v, '--------');
  //~ var_dump(count($v));
  //~ var_dump($v->getFloat('idkategorie'));
  //~ var_dump($v->getInt('idkategorie'));
  //~ var_dump($v->getString('idkategorie'));

  //~ foreach ($v as $kk => $vv) {
    //~ var_dump($kk, $vv);
  //~ }
//~ }


//~ $it = $st->getMoveIterator();

//~ var_dump($st->getColumnCount());
//~ var_dump($st->getColumnIndex('nazev'));
//~ var_dump($st->getColumnNames());
//~ var_dump($st->getColumnName(1));
//~ var_dump($st->getCount());
//~ var_dump('pos: '.$it->getPosition());
//~ var_dump($st->getColumnIndex('nazev'));
//~ var_dump($it->isFirst());
//~ var_dump($it->nazev, isset($it->nazev2), isset($it['nazev2']), $it['nazev']);  //$it['nazev'],$it->getString('nazev') ,$it->getString($it->getColumnIndex('nazev'))
//~ var_dump($it->get());
//~ var_dump($it->get()->getString($st->getColumnIndex('nazev')));
//~ var_dump($it->moveToPosition(0));
//~ var_dump($it->moveToPosition(-1));
//~ var_dump($it->moveToPosition(2));
//~ var_dump($it->moveToPosition(3));
//~
//~ var_dump($it->move(1));
//~ var_dump('pos: '.$it->getPosition());
//~ var_dump($it->move(2));
//~ var_dump('pos: '.$it->getPosition());
//~ var_dump($it->move(1));
//~ var_dump('pos: '.$it->getPosition());
//~ var_dump($it->move(1));
//~ var_dump('pos: '.$it->getPosition());
//~ var_dump($it->move(-2));
//~ var_dump('pos: '.$it->getPosition());
//~ var_dump($it->move(-1));
//~ var_dump('pos: '.$it->getPosition());
//~ var_dump($it->move(0));
//~ var_dump('pos: '.$it->getPosition());

//~ var_dump($it->moveToFirst());
//~ var_dump($it->moveToNext(), 'pos: '.$it->getPosition());
//~ var_dump($it->moveToNext(), 'pos: '.$it->getPosition());
//~ var_dump($it->moveToNext(), 'pos: '.$it->getPosition());
//~ var_dump($it->isFirst());
//~ var_dump($it->isLast());

//~ var_dump($it->moveToPrevious(), 'pos: '.$it->getPosition());
//~ var_dump($it->moveToPrevious(), 'pos: '.$it->getPosition());
//~ var_dump($it->moveToPrevious(), 'pos: '.$it->getPosition());

//~ var_dump($it->isFirst());
//~ var_dump($it->isLast());

//~ var_dump($it->move(2));


//~ $it = $st->getIterator();
//~ foreach ($it as $k => $v) {
  //~ var_dump($v);
//~ }


//~ $it = $st->getJavaIterator();
//~ while ($it->hasNext()) {
  //~ $v = $it->next();
  //~ var_dump($v);
//~ }

//~ var_dump($st->nazev);

//~ var_dump('------------');

//~ foreach ($st as $v) {
  //~ var_dump($v);
//~ }

//~ var_dump($st);

//~ var_dump($st->fetchAll());
//~ var_dump($st->fetch());
//~ var_dump($st->fetch());
//~ var_dump($st->fetch());
//~ var_dump($st->fetchAll());


//~ $st->close();
//~ $handle->close();


//'classes\PDOCursorData3'
//~ var_dump($q);
//~ foreach ($q as $r) {
  //~ var_dump($r);
  //~ var_dump($r->idkategorie);
//~ }

//~ $c = new ContentValues;
//~ $c->put('aaaaaaaaaa', 'bbbbbbbbb');
//~ $db->insert('aa', $c);



//~ $c = $db->query('kategorie');
//~ var_dump($c);
  //~ class WebAdminHome implements classes\IPage {
    //~ public static function getName() {
      //~ return array('name' => 'home');
    //~ }
//~
    //~ public static function getContent() {
      //~ return 'Home';
    //~ }
  //~ }
//~
  //~ class ServerAdminHome extends WebAdminHome {}
  //~ class ServerAdminHome1 extends WebAdminHome {}
  //~ class ServerAdminHome2 extends WebAdminHome {}
//~
  //~ class SubServerAdmin1 extends WebAdminHome {}
  //~ class SubServerAdmin2 extends WebAdminHome {}
//~
  //~ class WebJakAdminHomeSub implements classes\IPage {
    //~ public static function getName() {
      //~ return array('name' => 'home sub');
    //~ }
//~
    //~ public static function getContent() {
      //~ return 'Home sub';
    //~ }
  //~ }
//~
  //~ class WebJakAdminHomeSub2 extends WebJakAdminHomeSub {}
//~
  //~ class NovinkyHome implements classes\IPage {
    //~ public static function getName() {
      //~ return array('name' => 'novinky');
    //~ }
//~
    //~ public static function getSubmenu($data = null) {
      // var_dump($data->a);
      //~ return array('novX1' => 'Novinky1',
                    //~ 'novX2' => 'Novinky2');
    //~ }
//~
    //~ public static function getContent() {
      //~ return 'Novinky';
    //~ }
  //~ }
//~
  //~ class Novinky1 implements classes\IPage {
    //~ public static function getName() {
      //~ return array('name' => 'novinky1');
    //~ }
//~
    //~ public static function getSubmenu() {
      //~ return array('newXX1' => 'SubServerAdmin2');
    //~ }
//~
    //~ public static function getContent() {
      //~ return 'Novinky1';
    //~ }
  //~ }
//~
  //~ class Novinky2 implements classes\IPage {
    //~ public static function getName() {
      //~ return array('name' => 'novinky2');
    //~ }
//~
    //~ public static function getContent() {
      //~ return 'Novinky2';
    //~ }
  //~ }
//~
  //~ class Novinky3 implements classes\IPage {
    //~ public static function getName() {
      //~ return array('name' => 'novinky3');
    //~ }
//~
    //~ public static function getContent() {
      //~ return 'Novinky3';
    //~ }
  //~ }
//~
  //~ class Faktury_Main implements classes\IPage {
    //~ public static function getName() {
      //~ return array('name' => 'faktury main');
    //~ }
//~
    //~ public static function getContent() {
      //~ return 'Faktury_Main';
    //~ }
  //~ }
//~
  //~ class FakturyHome implements classes\IPage {
    //~ public static function getName() {
      //~ return array('name' => 'faktury');
    //~ }
//~
    //~ public static function getContent() {
      //~ return 'Faktury';
    //~ }
  //~ }
//~
  //~ class Faktury extends FakturyHome {}
//~
  //~ class FakturyStat implements classes\IPage {
    //~ public static function getName() {
      //~ return array('name' => 'faktury vypis');
    //~ }
//~
    //~ public static function getContent() {
      //~ return 'Faktury vypis';
    //~ }
  //~ }
//~
  //~ class Sys1Home implements classes\IPage {
    //const VISIBLE = false;
    //~ public static function getName() {
      //~ return array('name' => 'sys1');
    //~ }
//~
    //~ public static function getContent() {
      //~ return 'sys class 1';
    //~ }
  //~ }
//~
  //~ class Sys2Home implements classes\IPage {
    //~ public static function getName() {
      //~ return array('name' => 'sys2', 'visible' => false);
    //~ }
//~
    //~ public static function getContent() {
      //~ return 'sys class 2';
    //~ }
  //~ }
{*

{$f = $form::get()}
{$f->addText('login')
    ->setRequired('Je nutne vyplnit login')
  ->addPassword('hash')
    ->setRequired('Je nutne vyplnit heslo')
  ->addSubmit('tl', null, 'Přihlásit')}

{if="$f->isSubmitted()"}
  {if="$f->isValid()"}
    {code}
      $val = $f->getValues(); // nacteni hodnot
      $user->login($val['login'], $val['hash']);  // predani udaju na uzivatele

      if ($user->isLoggedIn()) {
        $out = 'prihlaseno .. cekejte na presmarovani';
      } else {
        $out = 'sorry blbe loginy..';
      }

    {/code}
    {$out}
  {else}
    {loop="$f->getErrors()"}
      chyba {$key+1}: {$value} :D HA-HA<br />
    {/loop}
  {/if}
{/if}

{if="$user->isLoggedIn()"}
  {$core::setRefresh(1, $admin_url)}
  pokud to nejde kilkej <a href="{$admin_url}">sem</a>
{/if}

*}
//$tpl->getConfigure('tpl_dir').$name.'.'.$tpl->getConfigure('suffix');
$neon_layout = <<<T

home:
  name: domů
  js:
  css:
  menu:
  visible: true
  link:
sekce2:
  name: sekce2
  visible: true
  neco: hodnota
sekceX:
  name: ultra sekce
  link: http://google.cz
  visible: false
pod:
  name: podsekce
  js: d2.js
  css: s2.css
  menu:
    kontakt:
      name: kontaktik
      js: [x3.js]
      css: [d3.css]
      idmenu: kuksa
      menu:
        kuksa:
          name: kukša
          js: [a1.js, a2.js]
          css: [b1.css, b2.css]
          idmenu: ahoj
        huksa:
          name: hukšá bača
          menu:
            guksa:
              name: huhúksa
            duksa:
              name: dudukša +ěščřžýáíé
    sub-sekce:
      name: sub sekce
    sub-sub-sekce:
      name: sub sub sekce
\$ad:
  name: tajna sekce1
emptyhome:
  name: prazdny url
  link: ''

T;

$m = classes\Menu::simple(classes\Configurator::decode($neon_layout), 'a/b/c/d/e/f', 'emptyhome');

$menu = $m->getMenu();

foreach ($menu as $mm) {
  var_dump($mm->name . ' - ' . $mm->url . ' - ' . $mm->allurl);
}
public static function setCollectVar($var) {
    self::$collect = $var;
  }

  public static function getCollectVar() {
    return self::$collect;
  }
  //~ Admin::setCollectVar(array(
    //~ 'admin_url' => $weburl . 'tajny_admin',
//~ ));
//~ $tpl = classes\Tpl::draw('main', array('auto_create' => true, 'force_compile' => true))->assign($pole);
//->assign(Admin::getCollectVar());
 //~ 'admin_login_form' => Admin::getLoginForm($tpl, $weburl . 'tajny_admin'),
    //~ 'admin' => $admin,
    //~ self::$collect['admin_url'] = $admin_url;

    //~ $tpl->assign('admin_url', $admin_url);
    //~ $tpl->assign('admin_url', self::$collect['admin_url'], true);

// overeni ze existujou konkterni promenne
//~ $tpl->isVariables('form')
//~ var_dump($tpl->isVariables(array('user', 'core', 'cosik', 'admin_url')));
//~ var_dump($tpl->isVariables('admin_url'));
// tady overovat existenci promennych!!!!
var_dump('exist var: '.$this->tpl->isVariables('admin_url'));
//~ Admin::getLoginForm($tpl, $weburl . 'tajny_admin');
      if ($force_extract) {
        extract($this->vars);
      }
, $force_extract = false
     * @param bool force_extract true pro nasilne zaneseni promennych do tpl pameti
/*preneseno do TPL
      $page = new classes\HtmlPage;
      $page->setTitle('tutulek super stranek')
          ->addMeta(array('http-equiv' => 'X-UA-Compatible', 'content' => 'IE=edge,chrome=1'))
          ->addMetaTag('viewport', 'width=device-width, initial-scale=1.0')
          ->addExternalCSS('css/bootstrap.min.css')
          ->addExternalCSS('css/normalize.css')
          ->addExternalCSS('css/main.css')
          ->addExternalJS('js/vendor/modernizr-2.6.2.min.js')
          //~ ->addMetaTag('author', 'GMR hosting, www.gmrhosting.cz')
          //~ ->addMetaTag('keywords', $mainClass->configure['htmlpage']['keywords'])
          //~ ->addMetaTag('description', $mainClass->configure['htmlpage']['description'])
          //~ ->addMetaTag('robots', $mainClass->configure['htmlpage']['robots'])
          ->setBodyHtml($crate->tpl->template('index')->render())
          ->addExternalJS('http://code.jquery.com/jquery.js')
          ->addExternalJS('js/bootstrap.min.js');
*/
      /*preneseno do TPL
      $page = new classes\HtmlPage;
      $page->setTitle('tutulek super stranek')
          ->addMeta(array('http-equiv' => 'X-UA-Compatible', 'content' => 'IE=edge,chrome=1'))
          ->addMetaTag('viewport', 'width=device-width, initial-scale=1.0')
          ->addExternalCSS('css/bootstrap.min.css')
          ->addExternalCSS('css/normalize.css')
          ->addExternalCSS('css/main.css')
          ->addExternalJS('js/vendor/modernizr-2.6.2.min.js')
          //~ ->addMetaTag('author', 'GMR hosting, www.gmrhosting.cz')
          //~ ->addMetaTag('keywords', $mainClass->configure['htmlpage']['keywords'])
          //~ ->addMetaTag('description', $mainClass->configure['htmlpage']['description'])
          //~ ->addMetaTag('robots', $mainClass->configure['htmlpage']['robots'])
          ->setBodyHtml($crate->tpl->template('index')->render())
          ->addExternalJS('http://code.jquery.com/jquery.js')
          ->addExternalJS('js/bootstrap.min.js');
*/
var_dump($crate->uri, $crate->configure['admin']['url']);
//~ if (classes\Core::inUrlSection($this->uri['action'], $this->configure['admin']['url'])) {
$a = null;
$a['a']='sadasd';
var_dump($a);
 $_menu = ;
      //~ if (!array_key_exists($_menu[0]->url, $this->array_address)) {
        //~ var_dump($_menu[0]->url);
        //~ var_dump($_menu[0]->url, $this->array_address);
        //~ $p = 0;
//~ if (!$this->array_address) {  // zarucit aby se znomu cele neprochazelo!! test na duplikatnost polozek
//~ var_dump($this->array_address, $menu->getNames()); // doladit, zarucit jen jedno spousteni!!!!
//~ var_dump(array_keys($this->array_address));
var_dump(self::$_last, !array_key_exists(self::$_last, $this->array_address));
      //~ var_dump($this->last_address);//~ var_dump($this->last_address);
//~ } catch (\Exception $e) {
  //~ echo $e;
//~ }

//~ $tpl = new classes\Tpl(array('debug' => true));
//~ $tpl->assign('v', true);
//~ echo $tpl->template('pokus');

/*
classes\Html::setBreakDepth(true);

$page = new classes\HtmlPage;
$page
  ->setAngularJS('myproject')
  //~ ->addExternalJS('https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js')
  ->setTitle('titulek stranky...')
  ->setBodyText('ahoj...');

//https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js

echo $page;
*/




$neon_layout = <<<T

home:
  name: domů
  js:
  css:
  menu:
  visible: true
  #link: ''
sekce2:
  name: sekce2
  visible: true
  neco: hodnota
sekceX:
  name: ultra sekce
  link: http://google.cz
  visible: false
pod:
  name: podsekce
  js: d2.js
  css: s2.css
  menu:
    kontakt:
      name: kontaktik
      js: [x3.js]
      css: [d3.css]
      idmenu: kuksa
      menu:
        kuksa:
          name: kukša
          js: [a1.js, a2.js]
          css: [b1.css, b2.css]
          idmenu: ahoj
        huksa:
          name: hukšá bača
          menu:
            guksa:
              name: huhúksa
            duksa:
              name: dudukša +ěščřžýáíé
    sub-sekce:
      name: sub sekce
    sub-sub-sekce:
      name: sub sub sekce
\$ad:
  name: tajna sekce1
emptyhome:
  name: prazdny url
  link: ''

T;

echo PHP_EOL;

$m = classes\Menu::simple(classes\Configurator::decode($neon_layout), 'a/b/c/d/e/f', 'emptyhome');
//~ var_dump($m->getNames());
//~ var_dump($m->getNames());
/*
foreach ($m->getMenu() as $v) {
  echo "<a href='{$v->allurl}'>{$v}</a> {$v->active}<br />";

  if ($v->hasMenu()) {
    echo '<ul>';
    foreach ($v->getMenu() as $v1) {
      echo "<a href='{$v1->allurl}'>{$v1}</a> {$v1->active}<br />";

      if ($v1->hasMenu()) {
        echo '<ul>';
        foreach ($v1->getMenu() as $v2) {
          echo "<a href='{$v2->allurl}'>{$v2}</a> {$v2->active}<br />";

          if ($v2->hasMenu()) {
            echo '<ul>';
            foreach ($v2->getMenu() as $v3) {
              echo "<a href='{$v3->allurl}'>{$v3}</a> {$v3->active}<br />";
            }
            echo '</ul>';
          }
        }
        echo '</ul>';
      }
    }
    echo '</ul>';
  }
}

echo PHP_EOL;
*/
//~ echo print_r($m->getTitle(), true);

$tpl = classes\Tpl::draw('main_menu', array('auto_create' => true, 'force_compile' => true));
$tpl->assign(array('menu' => $m));

echo $tpl;
//~ var_dump($m->getNames());
({$paginator->getOffset()} - {$paginator->getLength()})
{$paginator->getPageCount()}
case self::TYPE3:
        $page = $this->getPage();
        $last = $this->getLastPage();
        $min = 4;
        $max = 4;

        if ($page < 6) {
          $result = array_merge($result, range(1, 6));
        } else
        if ($page >= 6 && $page <= $last - 5) {
          $result = array_merge($result, range($page - 2, $page + 2));
        } else
        if ($page > $last - 5) {
          $result = array_merge($result, range($last - 5, $last));
        }
      break;
$result[] = $page - 1;
          $result[] = $page;
          $result[] = $page + 1;
$result = array_merge($result, range($last - 3, $last - 1));
//~ $content = ' //Content from your database or variable
  //~ <?php if($var == "something"): ?>
    //~ print this html
  //~ <?php endif; ?>
//~ ';
//~ echo file_get_contents('data://text/plain;base64,SSBsb3ZlIFBIUAo=');
include "data://text/plain;base64,".base64_encode($content);
var_dump('compile: >>'.self::compile($matches[1], $this->vars).'<<');
          // zpracovani use
          if (preg_match($tagMatch['use'], $html, $matches)) {
            $result .= "\nT;\n  use ".$matches[1].'; '.$cmrs." .= <<<T\n";  // rozdeleni
          } else
'use' => array('({use.*?})', '/{use="([^"]*)"}/'), //ok, use zapis. // prijde asi vyhodit!!!! k nicemu
nacteni use:{use="classes\Form"}
nacteni use:
 //~ $this->code[self::SECT_LIST] = '{$cursor = $db->query(\''.$this->table.'\', array(\''.implode('\', \'', $cols).'\'))}';
$index = self::SECT_LIST;
    switch ($this->uri_section) {
      case self::SECT_ADD:
        $index = self::SECT_ADD;
      break;

      case self::SECT_EDIT:
        $index = self::SECT_EDIT;
      break;

      case self::SECT_DEL:
        $index = self::SECT_DEL;
      break;
    }
, $router['action'], isset($router['id']) ? $router['id'] : null
$form;
//~
//~ echo $form;
//attr:method=post,class="kokus",enctype="multipart/form-data"
//~ $text = <<<T
//~ {form attr:hu="22",hi="23"}
  //~ n0: {text attr:name="nazev",value="val.."}<br />
  //~ n1: {text attr:name="cosik",value="uhuh" rule:require="musi byt vyplneno!!!!!!!"}<br />
  //~ nazev: {text attr:name="nazev",class="textik",value="hviiiii" rule:maxlength=100,require="musi byt vyplneno"}<br />
  //~ popis: {textarea attr:name="popis",value="watafaaK?" rule:maxlength=200,filled="melo by byt vypleno?"}<br />
  //~ p1: {textarea attr:name="popis"}<br />
  //~ {submit attr:name="tl",value="poslat voe"}<br />
//~ {/form}
//~ T;

//~ $form = new FormComilator;//('templates/main_form.tpl');
//~ echo $form->compile($text);
//~ var_dump($form);
// TPL je potreba zkonvertovat a ulozit do jinaho tpl bez toho aby zanechaval fyzicke soubory!!

//~ $tpl = classes\Tpl::draw('main_form', array('auto_create' => true, 'force_compile' => true));
//~ $tpl->assign();
//~ echo $tpl;


//~ exit(0);

/*
$neon = <<<T

home:
  name: domů
  js:
  css:
  menu:
  visible: true
  link:
sekce2:
  name: sekce2
  visible: true
  neco: hodnota
sekceX:
  name: ultra sekce
  link: http://google.cz
  visible: false
pod:
  name: podsekce
  js: d2.js
  css: s2.css
  menu:
    kontakt:
      name: kontaktik
      js: [x3.js]
      css: [d3.css]
      idmenu: kuksa
      menu:
        kuksa:
          name: kukša
          js: [a1.js, a2.js]
          css: [b1.css, b2.css]
          idmenu: ahoj
        huksa:
          name: hukšá bača
          menu:
            guksa:
              name: huhúksa
            duksa:
              name: dudukša +ěščřžýáíé
    sub-sekce:
      name: sub sekce
    sub-sub-sekce:
      name: sub sub sekce
\$ad:
  name: tajna sekce1

T;
// pripraveny neon jako kostra pro auto admin
$conf = classes\Configurator::decode($neon);
//~ var_dump($conf);
class AdminSection {}

class ModuleListSection {
  private $name = null;
  private $table = null;
  private $code = array();
  private $uri = '{$uri}';
  //~ private $form = null;
  //~ private $path = null;

  public function __construct($name, $table, $form) {
    $this->name = $name;
    $this->table = $table;
    //~ $this->form = ;
    $this->code[] = $form;
  }

  public function setDefault($id, $columns = null) {
    $cols = array_merge(array($id), $columns);
    $val = '{$value->' . implode('}, {$value->', $cols).'}';
    $val_id = '{$value->'.$id.'}';
    $this->code[]  = '{$cursor = $db->query(\''.$this->table.'\', array(\''.implode('\', \'', $cols).'\'))}
{loop="$cursor"}
  row: '.$val.' <a href="{$weburl}edit/'.$val_id.'">edit</a> <a href="{$weburl}del/'.$val_id.'">del</a><br />
{/loop}';
    return $this;
  }

  public function setAddSection() {}
  public function setEditSection() {}
  public function setDelSection() {}

  // lze umistit do slozky ukoncene /
  public function render($tpl) {
    $subpath = null;  // umistit do nejake metody??

    $include_name = $subpath . '__'.$this->table;
    $path = $tpl->buildPath($include_name); // sestaveni pathe

    //~ if (!file_exists($path)) {
      $complet = implode(PHP_EOL, $this->code);

      var_dump($complet);

      file_put_contents($path, $complet);
      chmod($path, 0777);
    //~ }

    return $include_name;
  }
  //~ public function getTPLName() {}

  //~ public function getTPL($tpl) {
    // pred vyvrcenim renderovat!
    //~ return $this->path;
  //~ }
}

// toto je uplne picuske reseni formularu!
$frm = '
{$f = $form::get()}
{$f->addText(\'naz\', \'Nazev\')
    ->setRequired(\'potreba zadat nazev\')
  ->addTextArea(\'pop\', \'Popis\')
    ->setRequired(\'potreba zadat nazev\')}
';

$cat = new ModuleListSection('Kategorie něčeho', 'kategorie', $frm);
$cat->setDefault('idkategorie', array('nazev', 'popis'));
*/
//~ var_dump($cat);
//~ $cat->render();
//~ var_dump($cat->render());
//~ var_dump($cat->getTPL());
//'FormComilator',
      //~ var_dump($this->elements);
      //~ foreach ($this->elements as $name => $value) {
        //~ switch ($value['type']) {
          //~ default:
            //~ $result .= '<input type="'.$value['type'].'" name="'.$name.'"/>';
          //~ break;
          //~ case 'textarea':
            //~ $result .= '<textarea name="'.$name.'"></textarea>';
          //~ break;
        //~ }
      //~ }
/*
// domyslet a dodelat!!!!
//jestli jo... tak prejmenovat a komentare!!
class ModuleAdminLogin {
  private $tpl = null;
  private $vars = array();

  const LOGIN_FORM = '__module_admin_login_form';

  public function __construct($tpl) {
    $this->tpl = $tpl;

    $this->installTpl();
  }

  // vnitrni inslace
  private function installTpl() {

    $path = $this->tpl->buildPath(self::LOGIN_FORM); //vystaveni pathu pro tpl

    if (!file_exists($path)) {
      $vzor = '
{$f = $form::get()}
{$f->addText(\'login\')
    ->setRequired(_(\'Je nutne vyplnit login\'))
  ->addPassword(\'hash\')
    ->setRequired(_(\'Je nutne vyplnit heslo\'))
  ->addSubmit(\'tl\', null, _(\'Přihlásit\'))}

{if="$f->isSubmitted()"}
  {if="$f->isValid()"}
    {code}
      $val = $f->getValues(); // nacteni hodnot
      $user->login($val[\'login\'], $val[\'hash\']);  // predani udaju na uzivatele

      if ($user->isLoggedIn()) {
        $out = _(\'prihlaseno .. cekejte na presmarovani<br />\');
      } else {
        $out = _(\'sorry blbe loginy..\');
      }

    {/code}
    {$out}
  {else}
    {loop="$f->getErrors()"}
      chyba {$key+1}: {$value} :D HA-HA<br />
    {/loop}
  {/if}
{/if}

{if="$user->isLoggedIn()"}
  {$core::setRefresh(1, $admin_url)}
  pokud to nejde kilkej <a href="{$admin_url}">sem</a>
{/if}';

      file_put_contents($path, $vzor);
      @chmod($path, 0777);
    }
  }

  public function setLoginForm($admin_url) {
    $this->vars['admin_url'] = $admin_url;
  }

  // prihlasovaci formular s prihlasenim
  public function form() {

    // dopilovat!!, promyslet koncept TPL modulu
    $required = array('core', 'form', 'user');
    if (!$this->tpl->isVariables($required)) {
      throw new ExceptionTpl('modul nesplnuje zavoslosti!');
    }

    return self::LOGIN_FORM;
  }

  public function toArray() {
    $this->vars['admin_login'] = $this; // pridani sebe sama
    return $this->vars;
  }
}

//pokud by bylo autoloadovani modulu tak musi byt dodrzeno komunikacni rozhranni!!!
// IDEA do budoucn pokud se vyskytne potrebya delat moduly do TPL, zatim neni proc...
interface ITplModule {
  function __setContext($tpl);  // prenost tpl instnace a neco dal ne? + musi zarucit i zaneseni jmena modulu do promennych+ musi si byt schopny kontrolovat zavoslosti dalsich promennych!!! + kdyz uz neco bude tak jak to volat z TPL a jak tomu v TPL vnutit promenne a jak z toho dostat promenne?!
}
//$tpl->addModule(??)
*/
//'cat' => $cat,
// id predavat prvni globalne!!!
//~ $this->uri_section = $uri_section;, $uri_section, $uri_id
//~ $this->uri_id = $uri_id;
//($this->template ?: )
// nastavovat docasny priznak!!! aby se netahalo dal do instance
//$this->template .= '{submit:'.$name.','.$value.'}';
//~ var_dump($this->elements, $_POST);
/**
 *
 *
 * @since 1.08
 * @param
 * @return
 */
   //~ const SECT_LIST = 0;
  //~ const SECT_ADD = 1;
  //~ const SECT_EDIT = 2;
  //~ const SECT_DEL = 3;
  //~ private $uri_section = null;
  //~ private $uri_id = null;
//~ $attr = ' ' . str_replace(',', ' ', $match['attr']);
          //~ $rule = isset($match['rule']) ? $match['rule'] : null;
          //~ var_dump($attr, $rule);
          //~ var_dump($match);
//~ var_dump($item);
//~ var_dump($attributes));
var_dump($this->processValue($match['value']));
//~ $attributes = array();
          //~ if (isset($match['attr'])) {
            //~ $attributes = array_map(function($item) {
                //~ return preg_replace('/(\w+):(.*)/', ' ${1}="${2}"', $item);
              //~ }, explode(',', $match['attr']));
          //~ }
          //~ ;
          //~ preg_match('/value="(?<value>.*?)"/', $attr, $m);
          //~ $value = isset($m['value']) ? $m['value'] : null;
          //~ $attr = preg_replace('/value=".*"/', '', $match['attr']);
          //~ $attr = ' ' . str_replace(',', ' ', $attr);
          //~ $result .= '<textarea'.$attr.'>'.$value.'</textarea>';
//~ var_dump($match['value']);
          //~ $attr = ' ' . str_replace(',', ' ', $match['attr']);
          //~ $result .= '<input type="submit"'.$attr.'/>';
$value = isset($match['value']) ? ' value="'.$match['value'].'"' : null;
      //~ 'input_text' => array('({text.*?})', '/{text attr:(?<attr>.*?)(?: rule:(?<rule>.*?)){0,1}}/'),
      //~ 'input_textarea' => array('({textarea.*?})', '/{textarea attr:(?<attr>.*?)(?: rule:(?<rule>.*?)){0,1}}/'),
      //~ 'input_submit' => array('({submit.*?})', '/{submit attr:(?<attr>.*?)}/'),
        //~ if (preg_match($tagMatch['form'], $html, $match)) {
          //~ $attr = isset($match['attr']) ? ' ' . str_replace(',', ' ', $match['attr']) : null;
          //~ $result .= '<form'.$attr.'>';

          //~ $result .= '<form method="'.$match['method'].'">';
        //~ } else

        //~ if (preg_match($tagMatch['form_close'], $html)) {
          //~ $result .= '</form>';
        //~ } else

        //~ if (preg_match($tagMatch['fieldset'], $html, $match)) {
          //~ var_dump($match);
          //~ $result .= '<fieldset>';
        //~ } else

        //~ if (preg_match($tagMatch['fieldset_close'], $html)) {
          //~ $result .= '</fieldset>';
        //~ } else
//{form:post}{fieldset}{/fieldset}{/form}
    //~ ->setForm(<<<T
    //~ back link: <a href="{$weburl}">zpet</a><br />
    //~ nazev položky: {text:_nazev}<br />
    //~ popis položky: {textarea:_popis}<br />
//~ T
    //~ )
//(?: rule:(?<rule>.*?)){0,1}
//(?: rule:(?<rule>.*?)){0,1}
//'form' => array('({form.*?})', '/{form(?: attr:(?<attribute>.*)){0,1}}/'),// (?<rules>rule:.*?){0,1}
      //~ 'form' => array('({form.*?})', '/{form(?: attr:(?<attr>.*?)){0,1}}/'),
//~ 'form' => array('({form:.*?})', '/{form:(?<method>.*?)}/'),
      //~ 'form_close' => array('({\/form})', '/{\/form}/'),
      //~ 'fieldset' => array('({fieldset.*?})', '/{fieldset(?: attr:(?<attr>.*?)){0,1}}/'),
      //~ 'fieldset_close' => array('({\/fieldset})', '/{\/fieldset}/'),
var_dump($item);//~ $this->rules[$name] = $_rules
class PageGenerator {
  private $inst = null;
  public function __construct() {
    //...
    //~ $inst
  }

  //factory method
  public static function PageBuilder() {
    //vraci nistanci vnitrne vytvorenou

    $prom = new self;

    return $prom;
  }
// konstruktory na ruzne bloky.. neblo by se to skladat z bloku...
  public function setMenuLink($links) {
    return $this;
  }

  public function setDefaultList($link) {
    return $this;
  }

  //~ public function setDefaultLink($link) {
    //~ return $this;
  //~ }

  public function setMenuContent($link, $callback) {
    return $this;
  }

  public function render() {
    //zbyldovani pripravene instance
    return '';
  }

  public function __toString() {
    return $this->render();
  }

  ///konstruktor vnitrni... atd...
}

//~ class AdminPageGenerator extends PageGenerator {}

//list/add/edit/del

//~ $a = classes\Html::span();
//~ var_dump($a);
//~ exit(0);


// dodelat!!!!
$admin = PageGenerator::PageBuilder();    //tady nebude mozna tolik factory potrevba ne?
$admin->setMenuLink(array('', 'add', 'edit', 'del'))
      ->setDefaultList('list')
      //~ ->setDefaultLink('')
      // a nebo nebmusi byt callback ale dalsi staticka tovarna ktera slozi dotycny blok...
      ->setMenuContent('', function($data) {
        //list
        //poskladani sql dotazu na vypis
        //vlozeni do resultu pro dalsi vypis
        $data['result'] = '..poskladani sql a vypisani..';
        //...

        return $data;
        })
      ->setMenuContent('add', function($data) {
        //add
        //...
        })
      //~ ->setContent('edit', PageGenerator::EditPage()->metoda()) //asi takhle nejak: <<-------
      ;

echo $admin;



exit(0);

////////////////////// NIC ///////////////////


//~ var_dump('cas: '.date('d.m.Y H:i:s'));
//~ classes\Core::getDownloadFile('icon_services_4.png');

//~ class DBHandler extends classes\PDOHelper {
  //~ public function onCreate(classes\PDODatabase $db) {
    //~ if ($db->isMySQL()) {
      //~ //
      //~ var_dump($db);
    //~ }
  //~ }
//~ }

try {

  //~ $db_handler = new DBHandler('test');
  //~ $db = $db_handler->MySQL('localhost', 'root', 'geniv')->getDatabase(true);

//~ var_dump($user->getIdentity());
//~ var_dump($user->getId());
//~ var_dump($user->getRoles());
//~ var_dump($user->getData());

//~ $user->revalidate();

//~ var_dump($user->isAllowed());

//~ var_dump('expirace v: '.date('d.m.Y H:i:s', $user->getExpirationTime()));


//~ var_dump($_SESSION, $_COOKIE);




} catch (Exception $e) {
 echo $e;
}
  try {

    if (classes\Core::checkPHP()) {

      //~ classes\Debugger::enable(classes\Debugger::PRODUCTION);  //DEVELOPMENT|PRODUCTION

      classes\Debugger::startTime();

      $html = 'classes\Html';

$conf = <<<NEON
menu:
	pages:
		webadmin:
			'': WebAdminHome
			s1: WebJakAdminHomeSub
			s2: WebJakAdminHomeSub2
			novinky:
				'': NovinkyHome
				sekce1: Novinky1
				sekce2: Novinky2
				sekce3: Novinky3
		serveradmin:
			'': ServerAdminHome
			x1: ServerAdminHome
			adminsekce1:
				'': ServerAdminHome1
				sub1: SubServerAdmin1
				sub2: SubServerAdmin2
			adminsekce2: ServerAdminHome2
		faktury:
			'': FakturyHome
			subsekce1: Faktury
			subsekce2: FakturyStat
		prejit: Sys1Home
		logout: Sys2Home
NEON;

      $c = classes\Configurator::decode($conf);

      //~ $sweb = new classes\StaticWeb(array('sekce/blok/akce',), 'webadnim');
      //~ $uri = $sweb->getUri();
      //~ $sweb->setLoadMenu($c['menu']['pages']);
      //~ var_dump($uri);
      $tpl = new classes\Tpl();
      //~ $tpl->clear('main');
      //~ $tpl->synchronizeCron();

      $route_model = array('sekce/blok/akce',);

      //~ $m = new classes\Web($c['menu']['pages'], array('user_data' => 'bleeee'));
      //~ $m->setRoute($route_model, 'webadmin');
      //~ $m->setUserData(array('b' => 66));

      //~ var_dump($m->getTitle());
      //~ var_dump($m->getContent());
      //~ var_dump($m->getBreadcrumbs());
      //~ var_dump($m->getVariable('name'));

      //~ $m->setWebRoute($route);

      //~ var_dump($m->getAllActiveClass(), $m->getLastActiveClass());

      //~ $m->setUserData(array('user_data' => 'bleeee'));
      //~ var_dump($m->getArrayMenu());

      //~ var_dump($m->getArrayMenu(0), '-----------------');
      //~ var_dump($m->getArrayMenu(1), '-----------------');
      //~ var_dump($m->getArrayMenu(2), '-----------------');
      //~ var_dump($m->getArrayMenu(3), '-----------------');
      //~ var_dump($m->getArrayMenu(), '-----------------');
      //~ //var_dump($m->getArrayMenu() === $m->getArrayMenu(1));
      //~ var_dump($m->getArrayMenu() === $m->getArrayMenu(2));
      //~ var_dump($m->getArrayMenu() === $m->getArrayMenu(3));
      //~ $sekce = $m->exist($c['menu']['pages'], 'sekce');
      //~ var_dump($m->exist($c['menu']['pages']['webadmin'], 'blok'));
      //~ $n = new classes\Web($c['menu']['pages'][$sekce]);  //$uri['sekce']
      //~ $n->setRoute($route_model, '', 1);
      //~ $x = new \stdClass;
      //~ $x->a = 4;
      //~ $n->setSelfSubmenu($x);
      //~ var_dump($c['menu']['pages'][$uri['sekce']]);
      //~ var_dump($n->getArrayMenu(1));
//~ var_dump($n->getLastActiveClass());
      //~ var_dump($m->getContent(), $n->getContent());

      /*
      classes\Tpl::setConfigure('auto_gen_dir', true);
      $tpl->installDirs()->clearAll();
      */
      $tpl->assign($c)
          //~ ->assign('menu', $m)
          //~ ->assign('menu2', $n)
          //~ ->assign('sekce', $sekce)
          ->assign('weburl', classes\Core::getUrl());

//~ $form = 'classes\Form';
//~
      //~ // data prochazejici celym kodem
      //~ $maindata = array(
                        //~ 'html' => $html,
                        //~ 'form' => $form,
                        //~ 'core' => 'classes\Core',
                        //~ );
//~
      //~ $mainClass = new MainClass($maindata);
      //~ // inicializace webu
      //~ $mainClass->initialization();
//~
      //~ // inicializace cache
      //~ $cache = new classes\Cache;
      //~ $cache->setCache($mainClass->configure['cache']['enabled'])
            //~ ->setCacheExpire($mainClass->configure['cache']['expire'])
            //~ ->setExceptionUri(array('admin'));
//~
      //~ // pri instlaci systemu
      //~ if ($mainClass->configure['system']['install']) {
        //~ $cache->clearAllCache();
      //~ }
//~
      //~ if ($cache->isCached()) {
        //~ echo $cache->getOutBuff();  //vypsani z cache
      //~ } else {
        //~ $cache->initOutBuff();
//~
        //~ // pri instlaci systemu po vyprazdneni cache
        //~ if ($mainClass->configure['system']['install']) {
          //~ classes\Tpl::setConfigure('auto_gen_dir', true);
          //~ $mainClass->tpl->installDirs()->clearAll();
        //~ }
//~
        //~ // definice modelu menu
        //~ $menuskel = array(
          //~ 'obal' => function($row) {
            //~ return $row['submenu'][0]->add(
                                            //~ Html::ul()->add(
                                                              //~ array_slice($row['submenu'], 1) // vezme polozky od 1
                                                            //~ )
                                          //~ );
          //~ },
          //~ 'menu' => function($row) {
            //~ $result = Html::li()->class($row['poc']['local'][0] == 0 ? 'first' : null)
                                //~ ->class($row['poc']['local'][0] == $row['count']['local'][0] ? 'last' : null)
                                //~ ->class(isset($row['poc']['local'][1]) && $row['poc']['local'][1] == 1 ? 'first' : null)
                                //~ ->class($row['level'] == 1 && $row['poc']['local'][1] == $row['count']['local'][1] ? 'last' : null)
                                //~ ->class($row['active'] || $row['subactive'] ? 'active' : null)
                                //~ ->add(
                                        //~ Html::a()->hrefrewrite('', array('action' => $row['url']))->setText(isset($row['menu']) ? $row['menu'] : $row['name'])
                                      //~ );
            //~ return $result;
          //~ }
        //~ );
//~
        //~ // vytvoreni instance static webu
        //~ $sweb = new classes\StaticWeb(array('action/sekce',
                                            //~ 'action==novinky/id',
                                            //~ 'action==user/login/akce',
                                            //~ 'action==registrace/typ',
                                            //~ )
                                      //~ );
        //~ $sweb->setLoadMenu($mainClass->configure['index_menu']['pages']);
//~
        //~ $mainClass['staticweb'] = $sweb;
        //~ $mainClass['staticweb_uri'] = $sweb->getUri();

        //~ // zapnuti zalamovani kodu
        $html::setBreakDepth(true);

        //~ // doplnovani TPL identity pro index
        //~ if ($mainClass->user->getIdentity()) {
          //~ $user_login = $mainClass->user->getIdentity()->getData('login');
          //~ $user_assign = array(
                                //~ 'index_user_isloggedin' => $mainClass->user->isLoggedIn(true),
                                //~ 'index_user_login' => $user_login,
                                //~ 'index_user_link' => 'user/'.$user_login,
                                //~ 'index_user_logout' => 'user/'.$user_login.'/logout',
                              //~ );
        //~ } else {
          //~ $user_assign = array(
                                //~ 'index_user_isloggedin' => '',
                                //~ 'index_user_login' => '',
                                //~ 'index_user_link' => '',
                                //~ 'index_user_logout' => '',
                              //~ );
        //~ }

        //~ // predani promennych do template
        //~ $mainClass->tpl->assign($mainClass->toArray()); // predani z mainClass
        //~ $assign = array(
                        //~ 'index_menu' => $sweb->getMenu($menuskel),
                        //~ 'index_content' => $sweb->getContent($mainClass),
//~
                        //~ 'index_novinky_link' => 'novinky',
                        //~ 'index_novinky_vypis' => $mainClass->getNovinky(),
                        //~ );
        //~ $mainClass->tpl->assign($user_assign)->assign($assign);  // predani menu a contextu
//~
        //~ $title = $sweb->getTitle(array('exception' => array(''), 'title' => $mainClass->configure['htmlpage']['title']));

        //~ $tpl->template('main_1')->render();

        // vytvoreni zakladni html stranky
        //~ $page = new classes\HtmlPage;
        //~ $page
            //~ ->setTitle($title)
            //~ ->setUrl($mainClass->weburl)
            //~ ->addMetaTag('author', 'GMR hosting, www.gmrhosting.cz')
            //~ ->addMetaTag('keywords', $mainClass->configure['htmlpage']['keywords'])
            //~ ->addMetaTag('description', $mainClass->configure['htmlpage']['description'])
            //~ ->addMetaTag('robots', $mainClass->configure['htmlpage']['robots'])
            //~ ->addExternalCSS('css/bootstrap.css')
            //~ ->addExternalCSS('css/bootstrap-responsive.css')
            //~ ->addExternalCSS('js/flexslider.css')
            //~ ->addExternalCSS('css/style.css')
            //~ ->addExternalCSS('css/print-style.css', array('media' => classes\HtmlPage::MEDIA_PRINT))
            //~ ->addExternalCSS('css?family=Oswald:400,300,700&amp;subset=latin,latin-ext', array('url' => 'http://fonts.googleapis.com/'))
            //~ ->addRSS('rss', 'RSS feed')
            //~ ->addExternalJS('js/vendor/modernizr-2.5.3.min.js')
            //~ ->addExternalJS('js/css_browser_selector.js')
//~
            //~ ->setBodyHtml($tpl->template('main')->render())
//~
            //~ ->addExternalJS('js/vendor/jquery-1.7.2.min.js')
//~
            //~ ->addExternalJS('js/jquery.tools.min.js')
            //~ ->addExternalJS('js/jquery.flexslider-min.js')
//~
//~
            //~ ->addExternalJS('js/jquery.scrollTo-1.4.3.1-min.js')
            //~ ->addExternalJS('js/jquery.easing.1.3.js')
//~
            //~ ->addExternalJS('js/main.js')
//~
            //~ ->setJS($sweb->getJS($mainClass))
            //~ ->setCSS($sweb->getCSS($mainClass))
            //->setGoogleAnalytics('UA-17828373-1')
            //~ ;

      //~ echo $page;


    $countries = array(
              'Europe' => array(
                  'CZ' => 'Česká Republika',
                  'SK' => 'Slovensko',
                  'GB' => 'Velká Británie',
              ),
              'rusko' => array(
                'a' => 'aaaaa',
                'b' => 'bbbb',
                'c' => 'cccc',
                'd' => 'dddd',
              ),
              'CA' => 'Kanada',
              'US' => 'USA',
              '?'  => 'jiná',
            );

    $countries2 = array(
                'CA' => 'Kanada',
                'US' => 'USA',
                '?'  => 'jiná',
            );

      //~ Html::setBreakDepth(true);

      $f = new classes\Form;
      $f
///*
      //~ ->addCheckbox('newsletters', 'zasílejte mi newslettery')  // omg naprosta ignorace
      //~ ->addText('email', 'E-mail:')
      //~ // pokud je checkbox zaškrtnut
      //~ ->addConditionOn($f['newsletters'], Form::EQUAL, true)
          //~ // pak vyžaduj e-mail
          //~ ->addRule(Form::FILLED, 'Zadejte e-mailovou adresu')
//*/

/*
      ->addPassword('password', 'Password:')
        // if password is not longer than 5 characters ...
        ->addCondition(Form::MAX_LENGTH, 5)
          // ... then it must contain a number
          ->addRule(Form::PATTERN, 'Must contain number', '.*[0-9].*')
*/


        //~ ->addCheckbox('agree', 'Souhlasím s podmínkami')
          //~ ->addRule(Form::EQUAL, 'Je potřeba souhlasit s podmínkami', TRUE)
          //~ ->setDefaultValue(true)

        //~ ->addText('name', 'Jmeno:')
          //~ ->setEmptyValue(2)
          //~ ->addRule(Form::FILLED)
            //~ ->addRule(Form::EMAIL, 'musi jit o korektni email')

        //~ ->addText('myname', 'Jméno:')
            //~ ->setRequired('Zadejte prosím jméno')

        ->addSelect('country', 'Země:')
          ->setItems($countries2)
          ->setPrompt('Zvolte zemi')
          ->setRequired()
          ->setDefaultValue('')

        ->addSubmit('tl')
        ;

        //~ $f->setDefaultValue(true);

//~ var_dump($f['email']->getSource());
        //~ $f['email']->addConditionOn($form['notifications'], $form::FILLED)
                     //~ ->addRule($form::EMAIL, 'Musíte zadat platný email')
      //~ $f//->setDefaults(array('vyber' => array('CA', '?'), 'txt' => 'no'))
        //~ ->setReturnValues($_POST);
//~ $f['txt']->setDefaultValue('nnoo');
//~ print_r($f);



      //~ $f->setReturnValues($_POST);

      $prm = array('ppokus');
      $f->onSubmit = function($form) use ($prm) {
        if ($form->isValid()) {
          $v = $form->getValues();
          var_dump($prm, $v);
        } else {
          print_r($form->getErrors());
        }
      };


      //~ if ($f->isSubmitted()) {
        //~ if ($f->isValid()) {
          //~ var_dump('val: ',$f->getValues());
        //~ } else {
          //~ var_dump('err: ',$f->getErrors());
        //~ }
      //~ }

      echo $f;

      echo '<hr>'.PHP_EOL.PHP_EOL.PHP_EOL;

      //~ $cb = function($value, $args) {
        //~ return ($value == $args[0]->getSendValue()+$args[1]->getSendValue());
      //~ };
      //~ $f2 = new Form;
      //~ $f2->addText('num1', 'N1');
      //~ $f2->addText('num2', 'N2');
      //~ $f2->addText('sum', 'Sum')
          //~ ->addRule($cb, 'neni Sum!', array($f2['num1'], $f2['num2']))
          //->addRule('cmpRule', 'nesplnuje uzivatelskou funkci', 5)
        //~ ->addSubmit('tl2')
        //~ ;
      //~ if (!$f2->isSubmitted()) {
        //~ $f2->setDefaults(array('num1' => 2, 'num2' => 3));
      //~ }
      //~ if ($f2->isSuccess()) {
        //~ var_dump('f2 val:', $f2->getValues());
      //~ } else {
        //~ var_dump('f2 err:', $f2->getErrors());
      //~ }
      //~ echo $f2;

//~ var_dump($f['vyber']->getSendValue());
//~ var_dump('f1 subm:', $f->isSubmitted());




        //~ $cache->setOutBuff();
      //~ }

      //~ if ($mainClass->configure['system']['debug']) {
        //~ echo $cache->getCacheInfo();
      echo classes\Debugger::viewTimes();
      //~ }

    } else {
      throw new Exception('php neni v poradku');
    }

  } catch (Exception $e) {
    die($e);
    //$e->getMessage(), $e->getFile(), $e->getTrace()
  }
//~ $code = 'predany externi text na kompilaci v TPL: {$ahoj}, {$a=2+4},{$a}, icl: {include="main_extra"}';
//, rekurze: {compile="$cod"}//, {compile="$cod"}
// udelat trochu efektivnejsi!!!!!
//~ $r = classes\Tpl::compile($code, array('ahoj' => 'cojeeee volee', 'kod' => null));

// jak to dostat do vice tplka?
/*
// databazi nahradit docasne polem?!
$tpl = classes\Tpl::draw('main_section', array('auto_create' => true, 'force_compile' => true));
$tpl->assign(array(
    //~ 'ahoj' => 'voe co? jee',
    //~ 'kod' => null,//$r,  // predani externi kompilace
    //~ 'cod' => $code,  // predani pouze zdrojoveho kodu
));
echo $tpl;

exit(0);



$number = isset($router['number']) ? $router['number'] : 1;

$tpl = classes\Tpl::draw('main_pager', array('auto_create' => true, 'force_compile' => true));
$tpl->assign('weburl', $weburl)
    ->assign('number', $number)
    ->assign('paginator_class', 'classes\Paginator');

echo $tpl;

*/
//~ var_dump($_POST[$name], $rule);
//~ foreach ($rules as $rule => $attr) {
//~ }
//~ var_dump($this->rules);
//~ $check = $this->checkRules($_POST[$name], $rules);
      //~ var_dump($rules);
      //~ var_dump($check);
      //~ if ($check)
//~ $c = classes\ContentValues::init();
//~ var_dump($c);
//~ classes\Html::setBreakDepth(true);
//~ $c = classes\ContentValues::hovno(); //(array('a' => 'b'))
//~ var_dump($c);
//~ $c = new classes\ContentValues();
//~ var_dump($c::init());
  //~ $module = new ModuleAdminLogin($tpl);
  //~ $admin->setLoginForm($weburl.'tajny_admin');
//$this->form = new FormComilator($form, 'post');//$f->compile($form);
{$cursor = $db->query('table', array('a', 'b'), 'idkuksa'.'=?', array($uri.id))}
(isset($match['value']) ? $match['value'] : null)
var_dump($this->defaults[$match['name']]);
//(isset($match['value']) && )
{*$data->nazev, $data->popis*}
    // nalezeni elementu submit tlacitka
    //~ foreach ($this->elements as $name => $element) {
      //~ if ($element['type'] === 'submit') {
        //~ return isset($_POST[$name]);
      //~ }
    //~ }
    //~ return false;
    var_dump($this->getMethodValue($this->submittedBy));
//~ use classes\ICron,
//~ classes\Router,
//~ classes\Core,
//~ classes\ObjectArray,
//~ classes\PDOHelper,
//~ classes\ContentValues;
'nazev sekce',
// domyslet nazev, (TplForm), FormTpl,FormCompiler, FormCompilator
// formulare zjednudusenym zpusobem a pak odchytavat poue data ktere budou nad nejakou tridu napsane ze se maji chytat!!!
// pokud jde o emailera
          $msg = self::$emailer['message']; // nacteni nazvu metod
          $snd = self::$emailer['send'];
          // nastaveni metod
/**
     * nastaveni nazvu metod emaileru
     *
     * @since 1.84
     * @param string msg nazev instancni metody pro nastaveni zpravy emailu
     * @param string send nazev instancni metody pro odeslani emailu
     * @return void
     */
    public static function setEmailer($msg = 'setMessage', $send = 'send') {
      self::$emailer = array('message' => $msg, 'send' => $send);
    }
/**
     * nastaveni nazvu metod emaileru
     *
     * @since 1.84
     * @param string msg nazev instancni metody pro nastaveni zpravy emailu
     * @param string send nazev instancni metody pro odeslani emailu
     * @return void
     */
    public static function setEmailer($msg = 'setMessage', $send = 'send') {
      self::$emailer = array('message' => $msg, 'send' => $send);
    }
    /**
     * nacteni nastaveni emaileru
     *
     * @since 2.22
     * @return array nastaveni emaileru
     */
    public static function getEmailer() {
      return self::$emailer;
    }
'emailer' => self::$emailer,
self::$emailer = $decode['emailer'];
private static $emailer = null; // pole nastaveni emaileru
$email
self::$email; //
    //dalsi: muze pak byt (ale asi nebude, pokud se budou projekty drzet proti gitu) dalsi trida nebo cast admina ktera bude bude obsahovat online editor
    // pomoci toho editoru ktery tam bude k dispozici bude moznot danou chybu vyladit (pokud se teda nebude nalazet chyba v core tridach)
    //-->> zavisi to na tom aby admin obsahoval moduly adminu ktere se tam proste jednoduse vlozi a nebude se resit apliace nekterych admin casti
  //~ use classes\Html,
      //~ classes\Form,
      //~ classes\Debugger;
//~ $this->assertEquals(array('message' => 'setMessage', 'send' => 'send'), ErrorLoger::getEmailer());
, 'm'
//~ var_dump($this->object->getJS('section1'), $this->object->getJS('section2'), $this->object->getJS('section3'));
, ++ test: getJS sekce a test: getTplAddress
  //~ classes\ErrorLoger::setPrintStdOut(false);
  //~ classes\ErrorLoger::setInstantlySend(false);
      // html - zapnuti zalamovani tagu
      //~ $this['html']::setBreakDepth(true);
// aplikace: user, session, ACL !!!! + session
// doimplememntovat!! nazvy vytahaz z DB konfigu!!
      //~ $roles = self::getConstRoles(); // nacteni (globalnich) roli
      //~ $this['roles'] = $roles;
      //~ $resources = self::getConstResource();  // nacteni (globalnich) zdroju
      //~ $this['resources'] = $resources;
$this->cache = $cache;
$this->menu = $menu;
$this->tpl = $tpl;
      //~ //definovani roli
      //~ $acl->addRole($roles['uzivatel'])
      //~ ->addRole($roles['administrator'], $roles['uzivatel'])
      //~ //definovani zdroju
      //~ ->addResource($resources['user_sekce'])
      //~ ->addResource($resources['admin_sekce'], $resources['user_sekce'])
//~ var_dump($this->acl);
{*@Trainz CSU: Oficiální stránky Trainz Railroad Simulator a Trainz Classics CZ, SK@*}
//~ var_dump($source, $address);
      var_dump($array_sum);
    /**
     * nacitani obsahu title stranek
     * - vnitrne si vynuti
     *
     * @since 5.58
     * @param string|null before
     * @param string|null after
     * @param bool show_defautl
     * @param string separator
     * @return string slozeny title
     */
    public function getTitle($before = null, $after = null, $show_defautl = true, $separator = ' - ') {
      $this->forceIterate($this);
      // nacteni nazvu
      $names = $this->getNames();
      if (!$show_defautl) {
        $address = $this->getActiveAddress();
        if ($address[0] === $this->default_page) {  // pokud prvni index === defaultni
          $names = array();
        }
      }
      // soucet pole
      $array_sum = array_merge(($before ? array($before) : array()), $names, ($after ? array($after) : array()));
      return implode($separator, $array_sum);
    }
 var_dump($array_sum, $separator, implode($separator, $array_sum));
//~ var_dump($this->menu->getNames('url'));
//~ $p = array('home' => _('kokot') , 'download' => _('debil'));
//~ var_dump($this->menu->getTitle2(array('source' => $p)));
//'source'var_dump($source[$url]);
//~ $m1 = $m->getMenu();
//~ $m2 = $m1[2]->getMenu();
//~ $m3 = $m2[0]->getMenu();
//~ $m4 = $m3[1]->getMenu();
var_dump(classes\Core::getCleverHash('l', 'h'));
$this->_admin_login = $db_conf['admin']['login'];
// musi se predava parametrem!!!
//$db_conf['admogin']
//var_dump($this->_admin_login);
//~ var_dump($data['adgin']);  // dodelat a zanes do dokumentacky
// tabulka roles
var_dump(classes\Core::getCleverHash('a', 'a'));
//~ if ($tpl_path) {
        //~ $this->template = file_get_contents($tpl_path);
      //~ }
$this->method
//~ $this->loginform = classes\TplForm::compile($_loginform);
//~ private $method = null;       // odesilaci methoda formulare
    //~ $this->method = $method;
//~ '(?<name>.*?)(?:,(?<value>.*?)){0,1}',
//~ (?<name>.*?)(?:,(?<value>.*?)){0,1}(?:\|(?<attr>.*?)){0,1}
//(?:\|(?<attr>.*?)){0,1}
//{textarea:(?<name>.*?)(?:,(?<value>.*?)){0,1}(?:\|(?<attr>.*?)){0,1}(?:\|\|(?<rules>.*?)){0,1}}
$pole = array('driver' => 'MySQL');
//zadani zakladniho formulare v tpl form tvaru
var_dump($match['name'], $this->submittedBy); //
 testovat pokus o zmenu nazvu a vyresit vkladani null nazvu u submit aby se aplikoval defaultni!!!!
//~ private $main_id = null;
{*<?*}
{code}
  $model = array(
    'section/b/c/d',
  );

  //~ var_dump($menu->getUri(), $this->admin_uri);
  var_dump($admin_uri, $uri);
{/code}
sekce4:
  name: sekce 4
  menu:
    home:
      name: m 4 1
    sekce44:
      name: m 4 2
// nesmi oznacovat pokud je vice stejnych sekci v ruznych urovnich
// pri vnuceni link-u do adresy se nesmi adresa vice opakovat?
//~ var_dump($__conf['uri_default']);
        //~ var_dump(array_slice($__conf['uri_values'], 0, $level + 1), ':vs:', array_slice($_lasturl, 0, $level + 1), array_slice($__conf['uri_values'], 0, $level + 1) === array_slice($_lasturl, 0, $level + 1));
//$level .':'.$__conf['uri_values'][$level].':'.$page.':---------------:'.
//~ var_dump(implode('/', array_slice($__conf['uri_values'], 0, $level + 1)).':::::'.implode('/', array_slice($_lasturl, 0, $level + 1)));
//~ var_dump($__conf['possible_active']);
var_dump('0:'.$this->uri_values[0]);//$__conf['uri_values'][0]
//count($source);
//~ var_dump($__conf['last_exist']);
//~ var_dump($__conf['auto_default_page']);
//~ var_dump($_lasturl);
/*
        $active = ($__conf['possible_active'] ? // pokud dana adresa existuje
            //(isset($__conf['uri_values'][$level]) && $__conf['uri_values'][$level] === $page) // oznacovani pokud sedi request[level] s iterovanou adresou
            array_slice($__conf['uri_values'], 0, $level + 1) === array_slice($_lasturl, 0, $level + 1)
            //~ implode('/', array_slice($__conf['uri_values'], 0, $level + 1)) === implode('/', array_slice($_lasturl, 0, $level + 1))
              : // nebo
            (isset($__conf['uri_values'][0]) && $__conf['uri_values'][0] == $__conf['uri_default'] && $__conf['default_page'] === $page) ||  // oznacovani pokud je adresa prazdna
            ($__conf['auto_default_page'] ? !$__conf['last_exist'] && $__conf['default_page'] === $page : false)  // oznacovani nezname adresy, pokud je zapnuto
        );
*/
//~ var_dump($__conf['uri_default']);
//~ var_dump($__conf['uri_values']);
//~ var_dump($__conf['default_page']);
//~ var_dump($__conf['default_page'] . '==='. $page .'::--------- '.($__conf['default_page'] === $page));
//~ var_dump()
//~ isset($__conf['uri_values'][0]) && $__conf['uri_values'][0] == $__conf['uri_default'] && $__conf['default_page'] === $page;
//~ ($__conf['auto_default_page'] ? !$__conf['last_exist'] && $__conf['default_page'] === $page : false);
//~ var_dump($__conf['uri_values'][0], $__conf['uri_default'], $__conf['default_page']);
    static $_last = null; // posledni polozka pri vynucenem iterovani
    //~ if (!array_key_exists(self::$_last, $this->array_address)) {
    //~ }
      //~ self::$_last = $this->last_address;
//~ foreach ($m->getMenu() as $v0) {
  //~ var_dump($v0->url, $v0->active);
  //~ if ($v0->hasMenu()) {
    //~ foreach ($v0->getMenu() as $v1) {
      //~ $this->assertEquals($expectedActive1[$v0->url][$v1->url], $v1->active);
    //~ }
  //~ }
//~ }
    /**
     *
     *
     * @since 1.22
     * @param
     * @return
     */
    public function setLoginSection() { // promysle jestli vkladat cele bloky a neb jen uzpusobovat na vkladani textu nebo vkladani konkternich textu+vkladat asi jen pres hromadne pole jiank se bude konfigurace splhat na brutalni pocet parametru
      $this->code[] = '
  {$loginSectionForm->addSubmit(\''.$this->submit_button.'\', \'Přihlásit\')->setAutoHide()}
  {if="$loginSectionForm->isSubmitted()"}
    {if="$loginSectionForm->isValid()"}
      {$val = $loginSectionForm->getValues()}
      {if="$user->login($val[\'login\'], $val[\'hash\'])->isLoggedIn()"}
        {$core::setLocation($weburl_admin)}
      {else}
        omg sorys spatna heslo zadat ty...
      {/if}
    {else}
      {loop="$loginSectionForm->getErrors()"}
        chyba: {$value}<br />
      {/loop}
    {/if}
  {/if}';

      return $this;
    }
  //~ $_builder = classes\Section::builder();
  //~ $_builder->setForm($_loginform)
          //~ ->setLoginSection();
  //~ $loginSectionForm = $_builder->getForm();
  //{*compile="$_builder->render()"*}

{*
ahoj, ťuňťo .. toto je ultra brutalni index adminu....
<br />
page: {$weburl}
<br />
admin: {$weburl_admin}
<br />
// tlacitko odhlasit
<br />
// autorizaci do adminu
<br
// overovani prihlaseny / neprihlaseny!!!!!
<br />
// prihlaseni az na teto urovni!!!


{$menu->getNames()|var_dump}
*}
{*$menu->getUri()|var_dump*}
{*$uri|var_dump*}
// toto vyhodit ++ prepsat action na page!!
        $_loginform = <<<T
  {text:login|placeholder:tvuj login||filled:musí bys vyplněno,minlength:minimálni délka loginu musi byt %s:5}<br />
  {password:hash|placeholder:tvuj heslo||filled:musí bys vyplněno heslo}<br />

T;
        //~ $loginSection = classes\Section::builder();
        //~ $loginSection->setForm($_loginform) // vnitrne si vytvori instanci
                    //~ ->setLoginSection();
// predavat nazvy promennych z tudma do section builderu
        //~ $this->loginSection = $loginSection->render();  //do TPL renderovat
        //~ $this->loginSectionForm = $loginSection->getForm(); // do TPL handler formulare
        $this->loginSectionForm = null;

// autorizaci pro pristup do souboru!!!
        // po zadani adresy adminu se bude snazit autorizovat pro admin, a nebo nebude primo dialog do adminu primo pod tim linkem s tim ze ten link se zobrazi jen nekomu nebo jen nekterym prohlizecum

        //~ var_dump($this->uri);// predat routovaci na adminu...
$form_pokus = classes\TplForm::compile($_form_code, );
//~ var_dump(array_filter($values, function($item) use ($ignore) {
          //~ var_dump($item);
          //~ return !in_array($item, $ignore);
          //~ }));
          var_dump();(array) $values
//~ preg_match('/(?<type>\w+)\:(?<message>.*)\:(?<argv>.*)/', $item, $match); // dopilovat regularni vyraz
        //~ preg_match('/(?:(\w+)?\:)?(?:(.*)?\:)?(.*)?/', $item, $match);
        //~ funguje:preg_match('/(?<type>(\w+)?)/', $item, $match); //   (?:[\:]?(?<message>(.*)))([\:](.*)?)     ((?:(?<argv>(.*)?)))?  /[\:]?(?:(?<message>(.*)?)?)(?:[\:](?<argv>(.*)?))
        //~ preg_match('/(?<type>(\w+))(?:\:(?<message>(.*))?)?(?:\:(?<argv>(.*))?)?/', $item, $match); TOTO je uz lepsi ale neakceptuje argumenty
        //~ preg_match('/(?<type>(\w+))(?:(\:(?<message>(.*)))?\:(?<argv>(.*))?)?/', $item, $match);  //TOTO asi pujde!!
//~ var_dump($item);
        echo $item.PHP_EOL;
//~ var_dump('r: >>'.$match['type'].'<<, pak: ""'.(@$match['message']).'"", a nepovinne argumenty: '.(@$match['argv']).PHP_EOL.PHP_EOL);
 $r = explode(':', $item);
//preg_match('/(?<type>(\w+))(?:(\:(?<message>(.*)))?\:(?<argv>(.*))?)?/', $item, $match);
//~ preg_match('/(?<type>\w+)\:(?<message>.*)\:(?<argv>.*)/', $item, $match);
//preg_match('/(?<type>(\w+))(?:(\:(?<message>(.*)))?\:(?<argv>(.*)))?/', $item, $match);
           //~ 'argv' => isset($r[2]) ? $r[2] : null,
echo $item.PHP_EOL;
//~ print_r($match);
var_dump(preg_split('/!\d,/', $match['rules']));
//~ var_dump()
//~ return array($match[1], $match[2]);
 //~ $this->rules[] = array(
            //~ 'name' => $name,
            //~ 'type' => $match['type'],
            //~ 'negation' => '',
            //~ 'msg' => $r[1],
            //~ 'argv' => isset($r[2]) ? $r[2] : null,
          //~ );
//
var_dump($rules['negation']);//~ $check = ($rules['negation'] ? !$check : $check);
....tady volam default....'.$this->uri_action.'....'.$url.' ..... '.$this->weburl.'
 'page==' . $this->configure['admin']['url'] . '/block==/'
//~ $values = array(
    //~ 'idnews_icon' => '3',
    //~ 'iduser' => '1',
    //~ 'name' => 'muj name',
    //~ 'description' => 'nejaky libovolny text',
    //~ 'added' => date('Y-m-d H:i:s'),
  //~ );
//~ var_dump($db->insertOrThrow('news', $content::init($values)->remove('__tl__')));
isset($uri.pager) ? $uri.pager : 1
{code}var_dump(isset($uri['pager']) ? $uri['pager'] : 1);/*isset($uri.pager) ? $uri.pager : 1 */{/code}
{*page/{$pagination->getFirstPage()}*}
{*page/{$pagination->getFirstPage()}*}
{* strankovani: {$weburl}page/{stranka} *}
{loop="array(1,2,3)"}p:{$counter1}-{$counter2}, {/loop}
      // pokud porobiha instalace
      if ($db_conf['autoinstall']) {
        echo 'probiha instalace databaze...';
        exit(0);
      }
$db->query('news', array('idnews'))->getCount()
var_dump($db->query('news', 'COUNT(idnews) pocet')->getFirst()->pocet);
{code}$pager = isset($uri['pager']) ? $uri['pager'] : 1;   $pager{/code}
{}
<script>
      function Ctrl(\$scope, \$http) {
        \$scope.userType = 'guest';
        \$http({
            method : 'POST',
            url : '/index.php',
            data : \$scope.user
        });
      }
    </script>
{noparse}{{loginForm.input.\$valid}}{/noparse}
fdf:{{loginForm.input.\$valid}}
, array('ng-controller' => 'Ctrl', 'name' => 'loginForm')
, array('ng-controller' => 'UserController')
, array('ng-controller' => 'UserController')
, array('ng-controller' => 'UserController')
//~ $row .= '<hr />'.PHP_EOL;
//~ foreach ($db->query('users') as $r) {
  //~ $row .= $r->login.'<input type="radio" name="iduser" value="'.$r->iduser.'">';
//~ }
//, array('name' => 'loginForm', 'runat' => 'server')
pozn: {$global_configure.novinky.pocetPolozekNaStranku}, {$global_configure.novinky.pocetOdstavcuNaPolozku}
//$order=$omg;  // docasne zaslepeno
// index 'order' a vyhodit url!!! a dat taky do pole!!!!
//$columns, $order = null, $omg = null$url,
//~ $max = $last < $range ? $last : $range;
      $p =
      $p->setItemCount($itemCount)
        ->setItemsPerPage($itemsPerPage);
  $var = array(
    'name[cz]',
    'pokus',
  );

foreach ($var as $v) {
  preg_match('/(?<name>(.+))\[(?<key>(.+))\]/', $v, $match);
  var_dump($match);
}  //~ var_dump($rules);
  //~ preg_match('/(?<name>(.+))\[(?<key>(.*))\]/', $rules['name'], $match);
  //~ var_dump($match);
//~ var_dump($_POST);$_langform .= '{text:pokus;hokus|||filled:musí bys vyplněno}';
.$this->menu->getTplAddress('_').'_'
        try {
          $result = require($_compile_path);
        } catch (\Exception $e) {
          echo($e);
        }
// try {} catch (\Exception $e) { throw new \Exception($e); }
//~ var_dump($m['name'], $m['key']);
//var_dump('getval:'.$this->parseValue($name));
var_dump('rule:'.);
      // detekce inputu s polem v name
      if (preg_match('/(?<name>(.+))\[(?<key>(.+))\]/', $rules['name'], $match)) {  // bacha test, muze php brblat kvuli neexistenci indexu!!
        $value = $this->getMethodValue($match['name'], $match['key']);
        //$_POST[$match['name']][$match['key']];
      } else {
        $value = $this->getMethodValue($rules['name']);
        //isset($_POST[$rules['name']]) ? $_POST[$rules['name']] : null;
      }
//$_POST[$match['name']][$match['key']];
//isset($_POST[$rules['name']]) ? $_POST[$rules['name']] : null;
{*
{if="$sectionForm->isSubmitted()"}
  {if="$sectionForm->isValid()"}
    {$val = $sectionForm->getValues()}
    {$val|var_dump}
  {else}
    {loop="$sectionForm->getErrors()"}
      chyba: {$value}<br />
    {/loop}
  {/if}
{/if}
*}
//var_dump(explode('],[', $match['value']));
        //~ var_dump($match['key'], $match['value']);
//~ var_dump($match);//~ var_dump($m1[1]);
//~ var_dump($match);
//~ var_dump($_all);
//$_fin = str_replace($_search, $_val, $match[0]);  // vyhodit toho vic!
  //~ var_dump($_pole, $_search);
            //~ str_replace($_search)
//~ var_dump($m['name'], $m['key']);
          //~ var_dump($array);
//~ var_dump($this->returnVarFromArray($match['name'], $this->defaults, $value));
//~ $value = isset($this->defaults[$match['name']]) ? $this->defaults[$match['name']] : $value;
//~ var_dump($value);
      //~ var_dump( $match['name'], 'val:'.$value);//$this->returns,
      //$value = isset($this->returns[$match['name']]) ? $this->returns[$match['name']] : $value;
/ opravit vraceni hodnot po odeslani!!!!
            /*
            //~ $_pole = explode(',', $match['value']);
            //~ var_dump($_pole);
            preg_match('/\[(.*)\]/', $match['value'], $m);var_dump($m);
            $_row = explode(',', $m[1]);
            $_pole = array_map(function($r) {
                return explode(':', $r);
              }, $_row);
*/
//~ var_dump($match);
{*
  nazev položky:
  {text:nazev|ng-model:text,:required,class:form-control has-error,placeholder:Název položky||filled:musí bys vyplněno,minlength:minimálni prvku %name delka musi byt %s s hodnotou %value:15}<br />
  popis položky:
  {textarea:popis|placeholder:tu ma byt popis,cols:40,rows:10||filled:nemusi byt vyplněno ale test je test}<br />
*}
{*
{*textlist:nazyyyev[%%1%%]|maxlength:100;placeholder:preklad pro %%2%%||filled:musí být %%2%% vyplneno|||items:[cs,CZ,en,EN,de,DE];alfa:beta*}<br />

  {textlist:nazev11[%%1%%]|maxlength:100;placeholder:preklad pro %%2%%||filled:musí být %%2%% vyplneno|||items:[[cs,CZ],[en,EN],[de,DE]];alfa:beta}<br />
;filled:musí bys vyplněno;minlength:minimálne prvku:12;~range:musi byt v rozsahu %s az %s:[15,50];range:sfsdfsdf:[-12.1,10.6];is_in:ffddsfd:[1,12,54,53,47,46,84.644,83,987,654,6,321,15]
  pokus2:
  {text:nazev|class:tri||minlength:minimálni prvku %name delka musi byt %s s hodnotou %value:15}<br />
*}
  {checkboxlist:nazev;vialue}<br />
  {radiolist:nazev;vialue}<br />
  // opravit aby bylo mozno psat v ruznem poradi!!! aby slo vypustit atributy asi vyreseno vkladanim | a || kdyz je samo |||
 // input list - list inputu
          //~ if (preg_match($tagMatch['input_textlist'], $html, $match)) { // vyhodit!!!!
            //~ $this->elements[$match['name']] = array(
                //~ 'type' => 'textlist',
                //~ 'match' => $match,
              //~ );
//~ // kurva to nemuze samo generovat sebe bez toho aby se to dalo nastylovat, nbo poobalovat
            //~ $_pole = $this->parseToArray($match['other']);
            //~ $_itm = $_pole['items'];
            //~ $_search = array_map(function($r) { // priprava substituce pro elementy
                //~ return '%%'.$r.'%%';
              //~ }, range(1, count($_itm[0])));
            //~ $_fin = '';
            //~
            //~ $p1 = implode(';', array($match['name'], $match['value']));
            //~
            //~ foreach ($_itm as $_val) {  // vytvoreni serie text elementnu
              //~ $_fin .= str_replace($_search, $_val, '{text:'.$p1.'|'.$match['attr'].'||'.$match['rules'].'}').PHP_EOL;
            //~ }
            //~ $result .= $this->compileTemplate($_fin);
          //~ } elsevar_dump($match['name'] ?: $this->submittedBy);
//~ 'input_textlist' => array('({textlist:.*?})', '/{textlist:%%inputPattern%%%%otherPattern%%}/'),
            //~ var_dump($name, $array, $m['name'], $m['key']);
            var_dump($array);
//~ var_dump($f->tags['input_text'][1]);
//'%%otherPattern%%',//'(?:\|\|\|(?<other>.*?))?',
//~ '%%NameValue%%(?:\|(?<attr>.*?))?',
//~ $this->elements[$match['name']] = array(
                //~ 'type' => 'radio',
                //~ 'match' => $match,
              //~ );
              //~ $_source = $this->parseToArray($match['source']);
              //~ var_dump($_source['items']); // dodelat
              /
//~ $this->elements[$match['name']] = array(
                //~ 'type' => 'checkbox',
                //~ 'match' => $match,
              //~ );
              //~ $this->elements[$match['name']] = array(
                //~ 'type' => 'password',
                //~ 'match' => $match,
              //~ );
              //~ $this->elements[$match['name']] = array(
                //~ 'type' => 'text',
                //~ 'match' => $match,
              //~ );
$this->processRules($match['name'], $match);  // zaneseni do pravidel
$this->processRules($match['name'], $match);  // zaneseni do pravidel
$this->processRules($match['name'], $match);  // zaneseni do pravidel
//~ $this->elements[$match['name']] = array(
                //~ 'type' => 'radio',
                //~ 'match' => $match,
              //~ );
            $this->processRules($match['name'], $match);  // zaneseni do pravidel
$this->processRules($match['name'], $match);  // zaneseni do pravidel
//~ $this->elements[$match['name']] = array(
                //~ 'type' => 'radio',
                //~ 'match' => $match,
              //~ );
$this->processRules($match['name'], $match);  // zaneseni do pravidel

//~ $this->elements[$match['name']] = array(
                //~ 'type' => 'textarea',
                //~ 'match' => $match,
              //~ );
{$user->getData('jmeno') ? '(' . $user->getData('jmeno') . ')' : ''}

$codf = '
      {{text:dfsfq1}}<br />
      {{text:nazev2;vialue}}<br />
      {{text:nazev3;vialue|class:a;id:asdf}}<br />
      {{text:nazev3|||filled:vole vypln to;range:dfd:[4,6]}}<br />
      {{text:nazev4;vialue|||filled:vole vypln to;range:dfd:[4,6]}}<br />
      {{text:nazev5|placeholder:bleee;class:ggg||filled:vole vypln to}}<br />
      {{text:nazev6;vialue|placeholder:bleee;class:ggg||filled:vole vypln to}}<br />
      <hr/>
    '; foreach (array('cs', 'en', 'de') as $value) {
      $codf .= '{{text:nazev11['.$value.']|maxlength:100;placeholder:preklad pro '.$value.'||filled:musí být '.$value.' vyplneno}}
    ';
    }
  $codf .= '
  <hr/>
  {{select:sel1;vialue;"{cs: česky, en: anglicky, de: německy}"}}<br />
  {{select:sel2;vialue;"{europe: {cs: česky, de: dojčasky}, word: {en: englišsky, uk: ukrajinsky}}"}}<br />

  {{checkbox:chck;vialuex}}<br />
  {{radio:rad;vialuexx}}<br />

  {{file:fil}}<br />

{{submit:;asi oslat vole|class:hovinko}}

  ';//'chck' => true, 'rad' => true,
  $ff = ->setDefaults(array('nazev11' => array('cs' => 'ahoj', 'en' => 'vole', 'de' => 'co je?'), 'dfsf' => 'kviuii'), array('nazev11'))->setReturnValues($_POST);//->setDefaults(array('nazev' => 'hups...', 'nenazev' => 'blink', 'nazev11' => array('cs' => 'ahoj', 'en' => 'vole', 'de' => 'co je?', 'se' => 'grrk'), 'nazev22' => array('br' => 'ks')))->setReturnValues($_POST)->setAutoHide();
  //{$ff->addSubmit(null, 'odeslati', 'class:hovinko')}
  //~ '%%nameValueSourceAttr%%'
          //~ '(?<name>.*?)(?:;(?<value>.*?))?(?:;(?<source>.*?))?(?:\|(?<attr>.*?))?',
//~ var_dump($match);
            //~ $pp = array('europe' => array('cs'=>'česky', 'de'=>'dojčasky'), 'word' => array('en'=>'englišsky', 'uk'=>'ukrajinsky'));
            //~ var_dump(json_encode($pp));
            //~ var_dump(Configurator::encode($pp));
            // JSON_HEX_QUOT, JSON_HEX_TAG, JSON_HEX_AMP, JSON_HEX_APOS, JSON_NUMERIC_CHECK, JSON_PRETTY_PRINT, JSON_UNESCAPED_SLASHES, JSON_FORCE_OBJECT, JSON_UNESCAPED_UNICODE
            //~ $pp = array('cs'=>'česky', 'en'=>'anglicky', 'de'=>'německy');
            //~ var_dump(Configurator::encode($pp));
            //~ var_dump(json_encode($pp));
            //~ var_dump(Configurator::encode($pp));
            //~ var_dump();
            //~ $j = json_encode();
            //~ var_dump($j);
            //~ $_source = $this->parseToArray($match['source']);
            //~ var_dump($_source['items']); // dodelat
            // source|items? nebo proste 3 polozka?
//->setDefaults(array('nazev' => 'hups...', 'nenazev' => 'blink', 'nazev11' => array('cs' => 'ahoj', 'en' => 'vole', 'de' => 'co je?', 'se' => 'grrk'), 'nazev22' => array('br' => 'ks')))->setReturnValues($_POST)->setAutoHide();
// oznacovani ++ zpetne oznacovani!!
 // detekovat typ checkbox a radio a select a neprepisovat pro ne value ale vkladat checked/selected
      $type = $this->parseType($match[0]);
      switch ($type) {
        case 'select':
        //~ case 'checkbox':
          return $value;
        break;

          //~ var_dump('chval: '.$value);
          //~ return $value;
        //~ break;

        case 'radio':
        break;
      }
 var_dump($_send_value, $_value);
            //~ var_dump($_send_value);
            //~ var_dump($_v, $match['value']);
            //~ var_dump($_v);
            //~ var_dump($_v, $match['value']);
            //$_v === $match['value'] ||
            //~ var_dump('_v: '.$_v.', send: '.$_send_value);
            //~ $_val = $_v && $_v != 'on' ? ' value="'.$_v.'"' : null;
            //~ $_val .
//~ var_dump($_value, $match['value'], $_value === $match['value'], $match['value']);
//~ var_dump($match, $this->processValue($match), $_value);
 // oznacovani ++ zpetne oznacovani!!
            //~ $_send_value = $this->getMethodValue($match['name']);
var_dump($_value);
//$this->processValue($match)
//~ $_value = $this->processValue($match, false);
 //~ var_dump('nam:'.$match['name'], $this->returns);
) {  // promenna je pole
                  // '/(?<name>(.+))\[(?<key>(.+))\]/'
        $match['key'] = $m0[1];
        ;
        var_dump($m1);
      }
      //~ $match['name'] = $source;
      return false; // klasicka promenna
      // detekce inputu s polem v name
      //~ return (bool) preg_match('/(?<name>(.+))\[(?<key>(.+))\]/', $source, $match);
 $this->keyIsArray('pole[]', $mm);
      var_dump('1:'.$mm['name']);
      $this->keyIsArray('pole[aa]', $mm);
      var_dump('2:'.$mm['name'].':'.$mm['key']);
      $this->keyIsArray('pole', $mm);
      var_dump('3:'.$mm['name']);
//~ $val[$m['name']][$m['key']] = $method[$m['name']][$m['key']]; // nacteni udaju jako pole
  var_dump($_value);
      //$this->getMethodValue($rules['name'])
// bud dokoncit nebo pozdeji domyslet a dodelat!!!!
    $html = 'classes\Html';
var_dump(in_array($key, $_value, true));
    //~ $weburl = classes\Core::getRequestUrl();
// momentalne neumi multiple select
->addSubmit(null, 'Přihlásit se', 'class:btn btn-default');//
$crate->addNotification(16, null, 'registrace uživatele', 'huhu zaregistroval se novy uživatel');
var_dump($_compile_path, self::$config['compile_dir']);
// kompiluje jen tehdy pokud je neco na zkompilovani
//~ if (file_exists($name)) {
//~ }
//~ 'html' => 'classes\Html', // vyhodit!
//~ 'form' => 'classes\Form', // vyhodit!!
//~ 'debugger' => 'classes\Debugger',
//dosazeni callbacku, btw ballback mebude mozna uplne dobry napad kdyz tam nebude sahat viditelnost promennych?!!!!
      //jinak nacitani row, celeho lopu, emptyloop, vytvaret se boudou v podstate jen linky a ty se pak busou dal vkladat
//$message
      var_dump(array_slice($array, 1));
//'input_select' => array('({select:.+?})', '/{select:%%InputPattern%%%%Source%%}/s'),  //bez ? zamerne! vice selectu musi byt pod sebou!!! // opravit ten zadrbany select!!!!
// predelat na generovane pole kvuli udrzitelnosti stejny casti paternu!!!
//Configurator::decode($match['source']);
'%%Source%%','(?:\|\|\|(?<source>.*?))?',
//~ '%%NameValueAttr%%',
//~ '%%NameValue%%%%Attr%%',
//, '.$this->form_settings.'//'.$this->tplform.'->setReturnValues($_POST)->
//inicializace formu? si vtdy vytvori vlastni instanci formulare?!!
    // dodelat!!!!

    /**
     * dodatecna konfigurace formulare
     *
     * @since 2.08
     * @param array settings pole atributu na nastaveni formulare
     * @return this
     */
    public function configureForm($settings = array()) {
      $this->tplform->setAttributes($settings);
      return $this;
    }

    /**
     * nacitani vnitrne vytvoreneho tplform-ulare
     *
     * @since 2.04
     * @param void
     * @return TplForm vytvorena instance
     */
    //~ public function getForm() {
      //~ return $this->tplform;
    //~ }
    /**
     * parser textu do pole (max 2 zanoreni)
     * - alfa:beta
     * - items:[cs,CZ,en,EN,de,DE]
     * - items:[[cs,CZ],[en,EN],[de,DE]]
     *
     * - toto same uz mam davno pod nosem a spolehlivejsi!, via konfigurator a neon format v inline tvaru!
     *
     * @deprecated
     * @since 1.58
     * @param string value
     * @return array
     */
    private function parseToArray($value) {// asi prijde vyhodit.. parser z konfigurtoru bude bohate stacit!!!!
      $result = '';
      $_all = explode(';', $value); // rozsekani pole ;
      foreach ($_all as $_val) {
        preg_match('/(?<key>.*)\:(?<value>.*)/', $_val, $match);  //rozsekani podle :
        if (preg_match('/\[(.*)\]/', $_val, $m0)) {  // array(array())
          if (preg_match('/\[(.*)\]/', $m0[1], $m1)) {  //array()
            $m2 = explode('],[', $m1[1]);
            $result[$match['key']] = array_map(function($r) {
                return explode(',', $r);
              }, $m2);  // items:[[cs,CZ],[en,EN],[de,DE]]
          } else {  // items:[cs,CZ,en,EN,de,DE]
            if ($match) {
              $result[$match['key']] = explode(',', $m0[1]);
            } else {  // ma by [] nebo tak jak je to ted?
              $result = explode(',', $m0[1]); // pokud neni k dispozici klic
            }
          }
        } else {
          $result[$match['key']] = $match['value']; // alfa:beta
        }
      }
      return $result;
    }
$this->processArgv($match['argv'])
    /**
     * zpracovani argumentu rule pravidel
     * - rosekani na pole
     *
     * @since 1.52
     * @param string argv argument pro zpracovani
     * @return array|string zpracovany argument
     */
    private function processArgv($argv) { // pokud bude venyhovujici tak se nahradi za Configutrator syntax
      var_dump($argv, Configurator::decode($argv));
      if (preg_match('/\[(.*)\]/', $argv, $match)) {
        return explode(',', $match[1]);
      } else {
        return $argv;
      }
    }
|+|
----
|;|
----
|@|
---
|,|
---
|$|
//return preg_replace(array('/^:(\w+)/', '/(.*)\:(.*)/'), array(' ${1}', ' ${1}="${2}"'), $item);
// udelat chytrejsi parsrovani a polozek: require,ng-model,class:blleee
//~ var_dump($attr);
//~ $this->separator_attr_k_v
      //~ var_dump(preg_split('/(\\?)[;]/', $attr));  // musi muet parsrovt podle ; ale nesni parsrovat spacialni znaky &quot; nebo &nbsp; atd...
    /**
     * @covers classes\TplForm::addSubmit
     * @   Implement testAddSubmit().
     */
    public function testAddSubmit()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }
    var_dump($match['type'] == 'pattern');
          var_dump($match);
               preg_match('/(?<negation>\~)?(?<type>\w+)(?:('.$this->separator_rules_attr.'(?<message>.*))?'.$this->separator_rules_attr.'(?<argv>.*))?/', $item, $mm);
          var_dump($mm);
' value="'.$match['value'].'"'
//~ $c = new classes\ContentValues;
            //~ $c->put('name');
//~ var_dump($code, $langs);//~ var_dump($code, $key, $lang);
//~ return $this->db->query('links_category', 'idlink_category');
      var_dump($idlink_category);SELECT name, url, picture FROM links
WHERE idlink_category=1
SELECT
          users.login login,
          users.jmeno jmeno,
          news_icons.name icon_name,
          news_icons.description icon_description,
          idnews,
          news.name name,
          news.description description,
          news.added added
          FROM news
          JOIN users USING(iduser)
          JOIN news_icons USING(idnews_icon)
          WHERE idnews=?
//$cursor = $db->rawQuery('SELECT users.login login, users.jmeno jmeno, news_icons.name icon_name, news_icons.description icon_description, idnews, news.name name, news.description description, news.added added FROM news JOIN users USING(iduser) JOIN news_icons USING(idnews_icon) WHERE idnews=?', array($uri['id']));
//$db->rawQuery('SELECT users.login login, users.jmeno jmeno, news_icons.name icon_name, news_icons.description icon_description, idnews, languages_has_news.name name, languages_has_news.description description, news.added added FROM news JOIN languages_has_news USING(idnews) JOIN languages USING(idlanguage) JOIN users USING(iduser) JOIN news_icons USING(idnews_icon) ORDER BY news.added DESC '.$pagination->getLimit())
var_dump($m['type'], $this->ruleHasArgv($m['type']));
var_dump('hu?', $value['size'], $value['size'] > 0 && $argv >= $value['size']);
//~ $form = $sekce->getForm();
    //~ ->setUriAddress('$uri.subaction', '$uri.id')
    //~ ->setWeburl($weburl_admin.'news/icons/')
//~ ->setFormColumns(array('name', 'description'))
$__form = $builder->getForm();
{compile="$builder->render()"}
  {select:idrole;
{3: administrátor, 2: moderátor, 1: uživatel}}
//<div class="grid_8"></div>
var_dump();$this->errors && count($this->errors) === 0;
{if="'.$this->var_form.'->isValid()"}{/if}
{if="'.$this->var_form.'->isSuccess()"}
    {code}
      $_values = '.$this->var_form.'->getValues();
      $_cv = $content::init($_values)->remove('.$this->var_form.'->getSubmittedBy())'.$_content_values.';

      $_id = $db->insertOrThrow(\''.$this->table.'\', $_cv);
      if ($_id) {
        $_msg = \'%%success%%\';
        $core::setRefresh(2, \''.$this->weburl.'\');
      } else {
        $_msg = \'%%failure%%\';
      }
    {/code}
    {$_msg}
  {/if}
{/if}
  {if="'.$this->var_form.'->isSuccess()"}
      {$_id = '.$this->id_uri.'}
      {code}
        $_values = '.$this->var_form.'->getValues();
        $_cv = $content::init($_values)->remove('.$this->var_form.'->getSubmittedBy())'.$_content_values.';

        $_rows = $db->update(\''.$this->table.'\', $_cv, \''.$this->id_table.'=?\', array($_id));
        if ($_rows) {
          $_msg = \'%%success%%\';
        } else {
          $_msg = \'%%failure%%\';
        }
        $core::setRefresh(2, \''.$this->weburl.'\');
      {/code}
      {$_msg}
  {/if}
$result = ;
var_dump($res['statement']->errorInfo());
      //~ $content = $values->_getContent();
      //~ $values = implode(', ', array_map(function($pole) {
          //~ return $pole . '=?';
        //~ }, $content['keys']));
      //~ $sql = 'UPDATE ' . $table . ' SET ' . $values . ' WHERE ' . $whereClause . ';';
      //~ $stpdo = $this->pdo->prepare($sql);
      //~ $result = ($stpdo->execute(array_merge($content['values'], $whereArgs)) ? $stpdo->rowCount() : 0);
      //~ $this->checkPDOError($stpdo);
//'.$this->add_suffix.'
//'.$this->action_uri.''.$this->action_uri.'//'{'.$this->var_form.'->render()}',
////classes\TplForm::compile($code, $settings);$tplform
$this->var_form.'->getErrors()',//'{'.$this->var_form.'->getErrors()}',
'%%error%%',
{if="'.$this->var_form.'->isErrors()"}
 {loop="'.$this->var_form.'->getErrors()"}
        chyba: {$value}<br />
      {/loop}
{/if}
deleted
// predavani issubmited na promenne aby slo prehazovat v kontext value atd...
var_dump(classes\Tpl::compileVar(\''.$this->id_uri.'\'));
{$__id = '.$this->id_uri.'}
$__id = classes\Tpl::compileVar(\''.$this->id_uri.'\');
//$__action = classes\Tpl::compileVar(\''.$this->action_uri.'\');
  //var_dump($__action);
//$_id = $db->insertOrThrow(\''.$this->table.'\', $_cv);
$_id = ;
//'$__action', //'classes\Tpl::compileVar(\''.$this->action_uri.'\')',
// zajistit v tpl kompilatoru aby slo prekonvertovavat promenne do spravneho pole!!!! elenetualne udelat v tom statickou metodu na konvert pro sekci code!!!!
//~ $this->action_uri,//~ '%%aaaa%%',
$this->action_uri,
%%action_uri%% == \'%%add_suffix%%\' ? \'added\' : (%%action_uri%% == \'%%edit_suffix%%\' ? \'edited\' : \'deleted\')
, 'code_success' => '
if (%%action_uri%% == \'%%edit_suffix%%\') {
var_dump($_values);exit;
}
'
var_dump($_value);var_dump($_send_value);
//$this->getMethodValue($match['name']); // defaultni oznacovni je pres |:checked
//~ var_dump($match, $_value, $this->processValue($match, false, false)); //
 rozbite!
var_dump($this->processValue($match, false), '...........');
//~ $_send_value = $this->getMethodValue($match['name']); // defaultni oznacovni je pres |:checked
//$this->processValue($match, false);
//~ var_dump($_send_value, $_value, '................');
 $this->getMethodValue($match['name']) ?: $check_value;
 //$_value vs $_send_value
            var_dump('..........vraceni: <b>'.$_value.'</b>, poslano: <b>'.($_send_value ?: $check_value). '</b>.................');//$_send_value, $_value,
$_send_value = null;
 var_dump($_value == $check_value);
 var_dump($check_value, $_value,'.......');
//~ $check_value = $this->processValue($match, false, false); // nacitani pouze value
//~ var_dump($_send_value);
//~ var_dump($_value);
//~ var_dump($match['value']);
//|| ($_send_value == $match['value'] ? $_value === $match['value'] : false)
//($_send_value === $match['value'] || (isset($match['value']) ? $_value === $match['value'] : false) ? ' checked' : null);
//($_value && $check_value === $_value || $_value === 'on' || $_value === true ? ' checked' : null);
//$_check_value,|| $_send_value$_check_value && //~ var_dump($this->returnValue($match['name']));
            //~ $_check_value = isset($match['value']) ? $match['value'] : null;
//~ var_dump($_value, $_check_value);
//~ var_dump('$_check_value: <b>'.$_check_value.'</b>, $_value: <b>'.$_value.'</b>, $_send_value: <b>'.$_send_value.'</b> ................', $_value);
//$_send_value === null && $_value && $_value === $_check_value ||
//$_value === $this->processValue($match, true, false) ||
//~ var_dump($_send_value);
//~ var_dump($_send_value, $_value);
//~ var_dump($_value);//$_value === $this->processValue($match, false, false) ||

            if ($_send_value) {

            }
$_send_value = ;
var_dump($this->getMethodValue($match['name']));
 //~ if ($this->processValue($match, false) && !$this->getMethodValue($match['name'])) {
              //~ $_value = true;
            //~ }

          //is_string($this->processValue($match, false)

            //~ if ($this->processValue($match, false) && !$this->getMethodValue($match['name'])) {
              //~ $_value = true;
            //~ }

            //~ var_dump($this->getMethodValue($match['name']), $_value);

            //~ if ($this->getMethodValue($match['name']) && $_value) {  // pokud je odeslano neprazdne value tak oznaci
              //~ $_value = true;
            //~ }

            //~ if ($_value)
            //~ var_dump($this->getMethodValue($match['name']), $_value);
//~ var_dump($this->processValue($match, false), $this->getMethodValue($match['name']));
    //~ private function returnValue($name) {
      //~ // vraceni nactenych dat z DB
      //~ $value = $this->returnVarFromArray($name, $this->defaults, null);
      //~ // vraceni poslanych dat z formulare
      //~ return $this->returnVarFromArray($name, $this->returns, $value);
    //~ }
$this->processValue($match, true, false) .
//~ var_dump((bool)$this->processValue($match, false), (bool)$this->getMethodValue($match['name']));

            // jeste pripadne vic otestovat!!!! + ioptimalizovat!!! + vice testu!!!!!!
            //~ if (!$this->processValue($match, false) && $this->getMethodValue($match['name']) == 'on') {
            //~ if ($this->processValue($match, false) && !$this->getMethodValue($match['name'])) { // ouznacovani pro checkboxy bez value
              //~ $_value = true;
            //~ }
            //~ else
            //~ if ($this->processValue($match, false) === true && !$this->getMethodValue($match['name'])) {
              //~ $_value = true;
            //~ }
// vyhodit vubec moznost value!!!!!!!$_value === 'on' ||
//~ var_dump($method[$name]); // pri file to to nejak promyslet!!!
// proc tu kurva dostane pole? u uzivatelu?
//var_dump($match, $this->returnVar($match['value'], 'baf'));onerror="this.src=\''.$match['value'].'download_preview2.jpg\'"
var_dump($this->returnVar($match['name']));
              //~  $_values[\'avatar\'][\'name\'];  // nasmerovat spravne slozku!!!
var_dump($dest);

              //~ $dest = \'img/avatars/\' . classes\Core::getUniqId(md5_file($_values[\'avatar\'][\'tmp_name\']));
              //~ var_dump($dest, pathinfo($_values[\'avatar\'][\'name\'], PATHINFO_EXTENSION));
              exit;
//~ if (move_uploaded_file($_values[\'avatar\'][\'tmp_name\'], $dest)) {
                //~  nasadit a otestovat zmensovac!!!!
                //~ 128x?
              //~ } else {
                //~ $_values[\'avatar\'] = null;
              //~ }
/*
$ff = <<<T
    back link:
    <a href="{$weburl}">zpet</a><br />
    nazev položky:
    {text:nazev|ng-model:text,:required,class:form-control has-error,placeholder:Název položky||filled:musí bys vyplněno,minlength:minimálni prvku %name delka musi byt %s s hodnotou %value:15}<br />
    popis položky:
    {textarea:popis|placeholder:tu ma byt popis,cols:40,rows:10||filled:nemusi byt vyplněno ale test je test}<br />
    tlačítka:
T;

//~ $form = classes\TplForm::compile($ff);
//~ $form->setSubmittedBy('_tl'); // toto zdejme nastavovat vnitrne v buidru!
//~ var_dump($router);

$builder = classes\Section::builder();
$builder
    ->setTable('kategorie', 'idkategorie')
    ->setForm($ff)
    ->appendDefault(null, array('nazev', 'popis'))
    ->appendAddSection('add', array('nazev', 'popis'))
    ->appendEditSection('edit', array('nazev', 'popis'))
    ->appendDelSection('del');

// navrah admi menu!!
*/
  //~ $i = '123456bar';
  //~ preg_match('/^(>.*)(?<=abcd)/', $i, $m);
  //~ var_dump($m);

  //~ var_dump(classes\Configurator::encode(array(4,60,3,5,3,43,4,4,6,6,5,5,4)));
  //~ var_dump(classes\Configurator::encode(array(4,60)));

  //~ var_dump(classes\Core::trimParagraphs('textovy text', 3), classes\Core::getCountParagraphs('textovy text'));
var_dump($w && $w < $geometry['width'] || $h && $h < $geometry['height']);
// tridu na zpracovani obrazku!!!!
  //~ classes\ImageMaker::resize('coolislowefullhd.jpg', 'test1.jpg', null, 800);
  //~ Picturer::resize('coolislowefullhd.jpg', 'test1.jpg', 1000, null);
  //~ Picturer::resize('coolislowefullhd.jpg', 'test1.jpg', null, 200);
  //~ Picturer::resize('coolislowefullhd.jpg', 'test1.jpg', 200, 200);
  //~ Picturer::crop('coolislowefullhd.jpg', 'test1.jpg', 300, 300, 550, 0);

  //~ echo '<img src="coolislowefullhd.jpg"/>';
  //~ echo '<img src="test1.jpg"/>';
// tridu na generovani prihlasovani do aminu napsaz pomoci TplForm!!!
//~ $_send_value = $this->getMethodValue($match['name']); // defaultni oznacovni je pres |:checked
            //~ var_dump($_send_value, $this->processValue($match, false, false));
var_dump($_send_value, $_value);
//$this->processValue($match, false);
// zadne otestovat??
// opravit + otestovat oznacovani!!!
// pokud bude prazdny text erroru tak by se meli nacitat a pouzivat defaultni hlasky!!!
//~ $rules['message']
//~ var_dump($m['message'], $m['argv']);

          if (isset($m['message']) && isset($m['argv']) && $m['message'] == '' && $m['argv'] != '') {
            //~ $m['message'] = $m['argv'];
            //~ $m['argv'] = null;
          }
        //~ // vraceni nactenych dat z DB
        //~ $value = $this->returnVarFromArray($match['name'], $this->defaults, $value);
        //~ // vraceni poslanych dat z formulare
        //~ $value = $this->returnVarFromArray($match['name'], $this->returns, $value);
//~ $_value = $this->processValue($match, false);
            var_dump($_send_value);
            //~ var_dump(strval($_key), $_value);
// nevim na kolik % je spolehlive zpetne oznacovani
//~ var_dump('potrebuje argument');
            //~ var_dump($m['message'], $m['argv']);
            //~ $m['message'] = $m['argv'];!isset($m['message']) ||
var_dump('NEPOtrebuje a nema argument!!');
            //~ var_dump($m['message'], $m['argv']);
          // prohozeni argumentu kdyz je message v argumentu (respektive neni alrument a message je prohozeny s argv)
          //~ if (isset($m['argv']) && !$this->ruleHasArgv($m['type'])) {
            //~ $m['message'] = $m['argv'];
            //~ $m['argv'] = null;
          //~ }
//~ // sloucit podminky?
          //~ // kontrola pravidel ktere vyzaduji zadany argument
          //~ if (!isset($m['argv']) && $this->ruleHasArgv($m['type'])) {
            //~ throw new ExceptionTplForm('pravidlo '.$m['type'].' vyzaduje argument!');
          //~ }
        //~ case 'is_in': // kontrola ve vyctu, existuje value v poli argumentu?
          //~ return is_array($argv) && in_array($value, $argv);
  $pp = array();
  foreach ($crate->getListRoles() as $v) {
    $pp[$v->idrole] = $v->name;
  }
//~ var_dump();
    public static function resizeBestfit($path_in, $path_out, $w, $h) {
      $img = new \Imagick($path_in);
      $img->thumbnailImage($w, $h, true);
      return $img->writeImage($path_out);
    }
{$__id = '.$this->id_uri.'}
//$this->list_suffix = isset($settings['back_link']) ? $settings['back_link'] : '<a>';
<a href="%%add_link%%" class="btn btn-success btn-success45 btn-large">%%add_link_title%%</a>
//~ $this->list_suffix = isset($settings['list_suffix']) ? $settings['list_suffix'] : $this->list_suffix;
//~ $this->add_suffix = isset($settings['add_suffix']) ? $settings['add_suffix'] : $this->add_suffix;
//~ $this->edit_suffix = isset($settings['edit_suffix']) ? $settings['edit_suffix'] : $this->edit_suffix;
//~ $this->del_suffix = isset($settings['del_suffix']) ? $settings['del_suffix'] : $this->del_suffix;
//~ $this->dup_suffix = isset($settings['dup_suffix']) ? $settings['dup_suffix'] : $this->dup_suffix;
// doimpelementovat!!!
// ignorovat podle pridanych sekci
// predeat!! musi dosazovat tlacitk z venku? rekpektive tlacitka budou spravovat samotny sekce!!!!
//~ $_name = isset($settings['name']) ? $settings['name'] : '{$value.0}';
//~ $_description = isset($settings['description']) ? $settings['description'] : '{$value.1} ';
//~ $_id_row = isset($settings['id_row']) ? $settings['id_row'] : '{$value->'. $this->id_table . '}';
//~ '%%name%%',
          //~ '%%description%%',
          //~ $_name,
          //~ $_description,
          // linky
          //~ '%%id_row%%',
          //~ '%%add_link_title%%',
          //~ '%%add_link%%',
          //~ '%%edit_link%%',
          //~ $_id_row,
          //~ $_add_link_title,
          //~ $this->weburl . $this->add_suffix,
          //~ $this->weburl . $this->edit_suffix . '/{$value->'. $this->id_table . '}',
          var_dump(!in_array(5, array()));
//{if="!in_array($value->'. $this->id_table . ', '.var_export($_ignore_del, true).')"}{/if}
//'{if="!in_array($value->'. $this->id_table . ', '.var_export($_ignore, true).')"}' .) . '{/if}'
//~ $this->weburl . $this->del_suffix . '/{$value->'. $this->id_table . '}',
//~ '%%del_link%%',
//~ $this->acl->addRole($this->roles['moderator'], $this->roles['user']);
//~ $this->acl->addRole($this->roles['admin'], $this->roles['moderator']);
//~ $this->acl->addResource($this->resources['user_section']);
//~ $this->acl->addResource($this->resources['admin_section'], $this->resources['user_section']);
//{$core::getCzechDay(strtotime($value->added))} {date_str="j."$value->added} {$core::getCzechMonth(strtotime($value->added),false)} {date_str="Y",$value->added}
//{$core::getCzechDay(strtotime($value->added))} {date_str="j."$value->added} {$core::getCzechMonth(strtotime($value->added),false)} {date_str="Y, H:i:s",$value->added}
$core::getCzechDay(strtotime($value->added))} {date_str="j."$value->added} {$core::getCzechMonth(strtotime($value->added),false)} {date_str="Y",$value->added}
{$core::getCzechDay(strtotime($value->added))} {date_str="j."$value->added} {$core::getCzechMonth(strtotime($value->added),false)} {date_str="Y, H:i:s",$value->added}
{$core::getCzechDay(strtotime($value->edited))} {date_str="j."$value->edited} {$core::getCzechMonth(strtotime($value->edited),false)} {date_str="Y, H:i:s",$value->edited}
'$db->query(\'%%table%%\', null, \'deleted IS NULL\')'
//do core globalizovat tady ten format co martin pouziva!
//SELECT * FROM users JOIN roles USING(idrole) WHERE deleted IS NULL
var_dump($crate->getArrayListAclRoles());
{$core::getCzechDay(strtotime($value->added))} {date_str="j."$value->added} {$core::getCzechMonth(strtotime($value->added),false)} {date_str="Y, H:i:s",$value->added}
//$this->roles['user']
//$this->roles['superadmin']
//$this->roles['user']
//$this->roles['superadmin']
      //$db_conf['admin']['roles'];
      //~ $this->resources = $db_conf['admin']['resources'];
$this->roles['superadmin']
$roles['superadmin']
// opravit na index!! na extovy nazev!!!!
var_dump($roles);
//~ var_dump(basename('ikona.png', '.png'));
//$user->isInRole($roles[2]);
//var_dump(!in_array($user->getId(), array (1, 2)));
//.', '$uri.
//var_dump($uri['subblock'], $uri['subaction']);
//$superadmin ? : '$db->query(\'%%table%%\', null, \'iduser=?\', array('.$user->getId().'))'
//moznost pridavat jednorazove sekce?!
//var_dump($uri);// opravit!!!!!§//'.if (%%action_uri%%=='add') { /* je tu add */ }.'
var_dump(in_array($uri['subaction'], array (1, 2)));
// ohlidat u hodnoty 0!!!!
    /**
     * pridani odesilaciho tlacitka
     * - prida docasne tlacitko
     *
     * @deprecated
     * @since 1.12
     * @param string|null name nazev elementu, pokud je null pouzije se interni nazev z: submittedBy
     * @param string|null value hodnota elementu
     * @param string|null attr doplnujici argumenty v testovem tvaru a;b;c
     * @return
     */
    public function addSubmit($name = null, $value = null, $attr = null) {
      $attr = implode(';', array_filter(array(
          $name ?: $this->submittedBy,
          $value
        ))) . ($attr ? '|' . $attr : null); // filtrovani null hodnot
      $this->template_temp .= '{submit:'.$attr.'}';
      return $this;
    }
      //~ var_dump($value);
      //~ var_dump($this->parseValue($match['name']));
//INSERT INTO `trainz-cz`.`languages_has_news` (`idlanguage`, `idnews`, `name`, `description`) VALUES (NULL, NULL, NULL, NULL);
//array('contents' => array('iduser' => $user->getId(), 'idnews_icon' => isset($_POST['idnews_icon']) ?$_POST['idnews_icon']:null, 'added' => date('Y-m-d H:i:s')))
// tplfomr - pripdavat nebo odebirat hodnoty z content values!
// tplform - predavani hodnot do radio listu.. ale uz asi jen pole.. asi ne object!!!!
// tplform - predavani edded a edited datetime formtu!!!
//prvni se prida news a to id se preda s tabulkama na languages_has_...
// chyby predavani dat!
{loop="'.$this->var_form.'->getErrors()"}
{/loop}
// udelat k tlacitkum polozku enabled, jen pro vyhradni editaci konktretniho id!!! + tady asi v del!!
exit;
// musi brat pri vice preklacech vsechny radky, stejne sloucit, rozdilene do druhe urovne pole
//$a = array(\'sloupec\' => array(\'s1\', \'s2\'));
//var_dump(array_values($a));
//zadane externe....
//$gru = \'idlanguage\';
//$dup = array(\'name\', \'description\');
//~ $_data = $cursor->getFirst();
//'{'.$this->var_form.'->render()}',
//~ $_ignore = isset($settings['ignore']) ? $settings['ignore'] : array();
//~ $_add_link_title = isset($settings['add_link_title']) ? $settings['add_link_title'] : 'Přidat';
//->put(\'idlanguage\', $i)
//->put(\'idnews\', $__id)
var_dump($__id, $_data, $_values[\'name\'], $_values[\'description\']);
//'' => '', // brutalni dotaz na mazani, ++ otestovat caskadove automaticke mazani!!! respektive opravit caskadove vazby!!!!
//tato trida az tak nespecha!!!
  //~ public static function build() {
    //~ var_dump($roles, $resources);
  //~ }
allow: {radio:acltype['.$k0.']['.$k1.'];allow|$|'.($item == 'allow' ? 'checked' : '').'}
deny: {radio:acltype['.$k0.']['.$k1.'];deny|$|'.($item == 'deny' ? 'checked' : '').'}
allow: {radio:acltype['.$k0.']['.$k1.'];allow|$|'.($item == 'allow' ? 'checked' : '').'}
deny: {radio:acltype['.$k0.']['.$k1.'];deny|$|'.($item == 'deny' ? 'checked' : '').'}
{submit:;potvrdit}
    //~ $this->code = '
    //~ {loop="'.var_export($this->roles, true).'" as $k0 => $v0}
      //~ {$k0} - {$v0}<br />
      //~ <hr />
      //~ {loop="'.var_export($this->resources, true).'" as $k1 => $v1}
        //~ >>> "{$k1}" možnosti: |
        //~ {loop="$v1" as $k2 => $v2}
          //~ {$v2},
        //~ {/loop}
        //~ |<br />
      //~ {/loop}
      //~ <hr />
    //~ {/loop}
    //~ ';
//~ $item = @$_POST['acltype'][$k0][$k1];
//~ var_dump($_POST['acltype'][$k0], $k1);
//~ var_dump($item2, $v2);
//~ var_dump($item2);
//~ var_dump(classes\Configurator::encode($gg, classes\Configurator::BLOCK));
if (isset($vv[$id])) {
      foreach ($vv[$id] as $v) {
        $this->code .= $v.' {checkbox:acl['.$v.']}';
      }
    }
/*
    $this->code = '
  <form method="post">';
    foreach ($this->roles as $k0 => $v0) {

      $this->code .= 'role: "'.$v0.'"<hr />
      ';
      foreach ($this->resources as $k1 => $v1) {
        $item = isset($_POST['acltype'][$k0][$k1]) ? $_POST['acltype'][$k0][$k1] : null;
        //(isset($_POST['acltype'][$k0][0]) ? $_POST['acltype'][$k0][0] : null);
//~ var_dump($item);
        $this->code .= '
      >> <b>"'.$k1.'"</b> možnosti:<br />
      allow: <input type="radio" name="acltype['.$k0.']['.$k1.']" value="allow" '.($item == 'allow' ? 'checked' : '').'/>
      deny: <input type="radio" name="acltype['.$k0.']['.$k1.']" value="deny" '.($item == 'deny' ? 'checked' : '').'/>
      ';
        foreach ($v1 as $k2 => $v2) {
          //~ $item = isset($_POST['acl'][$k0][$k1][$v2]) ? $_POST['acl'][$k0][$k1][$v2] : (isset($_POST['acl'][$k0][0][$v2]) ? $_POST['acl'][$k0][0][$v2] : null);
          $item2 = isset($_POST['acl'][$k0][$k1]) ? $_POST['acl'][$k0][$k1] : array();

          //~ var_dump(isset($_POST['acl'][$k0][0]) ? $_POST['acl'][$k0][0] : array());

          //(isset($_POST['acl'][$k0][0]) ? $_POST['acl'][$k0][0] : null);
          //~ var_dump($_POST['acl'][$k0][$k1], $v2);

          $this->code .= ''.$v2.': <input type="checkbox" name="acl['.$k0.']['.$k1.'][]" value="'.$v2.'" '.(in_array($v2, $item2) ? 'checked' : '').'/>
          ';
        }
        $this->code .= '<br />';

      }
      $this->code .= '
      <hr />
      ';

    }
    $this->code .= '
    <input type="submit" name="_button_" value="potvrdit">
  </form>
    ';
*/
//~ var_dump($gg);  // opravdu tak?! ale pak se to stejne bude muset parsrovat to co dostane z vales a to zpracovavat dal!
//~ var_dump(classes\Configurator::encode($this->roles));
//~ var_dump(classes\Configurator::encode($this->resources, classes\Configurator::BLOCK));
$vv = array_values($this->resources);
//~ var_dump(isset($vv[$uri['id']]) ? $vv[$uri['id']] : null);
    // uplne statne!!!
    // budou se pridavat po radkach!!! role(select)->zdroje(select)->typ(radio/select)->[podle zdroje se se nactou jeho moznosti] a ty se budou nacitat v poli checkboxu!!!!
    //~ $id = null;
    //~ if (isset($uri['id'])) {
      //~ $id = $uri['id'];
    //~ }
    //~ var_dump($vv[$id]);
//'|$|onchange|:|document.location=\''.$weburl.'select/\'+this.value
// omg! bud to tady ten form opravit a nebo proste udelat dalsi checkbox ktery bude jen a pouze reagovat na value!!!!
//nechat obtgroup asi teda!!! a do skupiny vkladat jen nazev a do value vkladat vsechny moznosti dostupneho zdroje!!!?!$this->resources
($raw ? $method[$m['name']][$m['key']] : htmlspecialchars($method[$m['name']][$m['key']], ENT_NOQUOTES))
      //~ $this->acl->addRole($this->roles[1]);    // musi nacitat aktualni role z databaze!!!
      //~ $this->acl->addRole($this->roles[2]);
      //~ $this->acl->addRole('download admin');

      // definovani zdroju *****************************************************
      //~ $this->acl->addResource('');
      //~ $this->acl->addResource('home');
      //~ $this->acl->addResource('home/stats');
      //~ $this->acl->addResource('notifications');
      //~ $this->acl->addResource('notifications/archives');
      //~ $this->acl->addResource('messages');
      //~ $this->acl->addResource('news');
      //~ $this->acl->addResource('news/icons');
      //~ $this->acl->addResource('users');
      //~ $this->acl->addResource('users/deactivated');
      //~ $this->acl->addResource('users/roles');
      //~ $this->acl->addResource('users/slideshows');
      //~ $this->acl->addResource('downloads');
      //~ $this->acl->addResource('downloads/section');
      //~ $this->acl->addResource('downloads/version');
      //~ $this->acl->addResource('downloads/kuids');
      //~ $this->acl->addResource('links');
      //~ $this->acl->addResource('links/category');
      //~ $this->acl->addResource('languages');
      //~ $this->acl->addResource('examples');
//~ var_dump($db_conf['admin']['resources']); // pridat konstruktor na tam to... instanci vyrvyret jen tam v te sekci!!! a tu cist konfigurak ACL!!!!
      //~
      //~ foreach ($this-> as $k_rules => $v_rules) {
        //~ $this->code .= 'role: '.$k_rules.' <br />';
        //~ foreach ($v_rules as $k_res => $v_res) {
          //~ $this->code .= 'zdroj: '.$k_res . '<br />';
          //~ $kk = array_keys($v_res);
          //~ $vv = array_values($v_res);
          //~ $this->code .= 'typ: ' . implode(array_unique($vv)) . '<br />
          //~ privilegia: '. implode(', ', $kk).'<hr />';
        //~ }
        //~ $this->code .= '<hr />';
      //~ }
{if="isset('.$this->action_uri.') && '.$this->action_uri.'==\'edit\' && isset('.$this->id_uri.')"}
      typ: {checkbox:type} (check = allow)

      <div class="mws-form-row">
        <label class="mws-form-label">typy:</label>
        <div class="mws-form-item">
          {select:type;'.Configurator::encode(array('allow' => 'Povoleno', 'deny' => 'Zakazano'), Configurator::BLOCK).'|$|class|:|mws-select2 small}
        </div>
      </div>

      <div class="mws-form-row">
        <label class="mws-form-label">role</label>
        <div class="mws-form-item">
            {select:roles;'.Configurator::encode($this->roles, Configurator::BLOCK).'|$|class|:|mws-select2 small}
        </div>
      </div>

      <div class="mws-form-row">
        <label class="mws-form-label">zdroje:</label>
        <div class="mws-form-item">
          {select:resources[];'.Configurator::encode($this->modify_resources, Configurator::BLOCK).'|$|class|:|mws-select2 large|,|multiple|,|size|:|20}
        </div>
      </div>

      {submit:;potvrdit}
{/if}//~ $_send_value = $this->returnVar($match['name']);
//~ $_dat[\'_acl\'][\'--\' . $k0] = \'on\';
//~ var_dump($k0, $kk);
//~ var_dump($v0);
//~ var_dump(\'kl: \'.$kl);
// home/stats--show
//~ var_dump($_dat);
//~ $_data[\'_acl\'] = array();
// dodelat zpetne nacitani !!! az to bude fakcit tak zapacovat na ukladani !!!!
 //~ if (!$this->defaults) {
        //~ } else {
          //~ $this->defaults += $def;
        //~ }
->remove(\'_type\')->remove(\'_roles\')->remove(\'_resources\')
//~ var_dump($acl_type, $acl_pole);
// rucne tu pridat docasne roli do ACL roli!!!!
//~ $this->acl->deny();//
 cele by se melo nacitat ze souboru a generovat zpet do souboru, a po nacteni zase aplikovat!!!!
//~ $_type = isset($_values[\'_type\']) ? \'allow\' : \'deny\';
// dodelat ulozeni + prevedeni na ACL a pak ACL ulozit a nechat jen nacitat!!!! na [2] nechat full !!! prava!
//~ var_dump("ulozeno?", $acl);exit;
//~ var_dump($roles[$__id]);
      //~ var_dump($this->acl);
      //~ $this->acl->allow($this->roles[1]);
// doaplikovat!!! vyhodit tady ty zakladni a nechat defaultne!!!
//loadFromFile
//isLoadFromFile
//commitRules
      //~ $this->acl->deny($this->roles[2], 'news', array('add', 'edit', 'del'));
// musi se generovat!!!!
      //~ $this->acl->deny($this->roles[3]);
      //~ $this->acl->allow($this->roles[3], '', array('show'));
      //~ $this->acl->allow($this->roles[3], 'home', array('show'));
      //~ $this->acl->allow($this->roles[3], 'home/stats', array('show'));
      //~ $this->acl->allow($this->roles[3], 'downloads', array('show', 'add', 'edit', 'del'));
      //~ $this->acl->allow($this->roles[3], 'downloads/section', array('show', 'add', 'edit', 'del'));
      //~ $this->acl->allow($this->roles[3], 'downloads/version', array('show', 'add', 'edit', 'del'));
      //~ $this->acl->allow($this->roles[3], 'downloads/kuids', array('show', 'add', 'edit', 'del'));
// udelat GUIko na to!!!!
      //~ $this->acl->allow($this->roles[3], 'users', array('show', 'edit'));
//~ var_dump($this->acl);
// udelat obrzlicku a mit moznost predavat do instalce i vlastni instance!!! ,treba this :D
  $res = array('all' => 'Všechno');  //$res=
  foreach ($resources as $k => $v) {
    foreach ($v as $k0 => $v0) {
      $res['sekce '.$k][$k.'--'.$v0] = $k . '/' . $v0;
    }
  }

  //~ <hr />
      //~ typ: {checkbox:_type} (check = allow)
      //~ <div class="mws-form-row">
        //~ <label class="mws-form-label">role</label>
        //~ <div class="mws-form-item">
            //~ {select:_roles;'.classes\Configurator::encode($roles, classes\Configurator::BLOCK).'|$|class|:|mws-select2 small}
        //~ </div>
      //~ </div>
      //~ <div class="mws-form-row">
        //~ <label class="mws-form-label">zdroje:</label>
        //~ <div class="mws-form-item">
          //~ {select:_resources[];'.classes\Configurator::encode($res, classes\Configurator::BLOCK).'|$|class|:|mws-select2 large|,|multiple|,|size|:|20}
        //~ </div>
      //~ </div>
{code}
  $gui = classes\gui\GuiStaticACL::build($weburl_admin.'users/roles/', '$uri.subaction', '$uri.id');
  $gui->setACL($roles, $resources, $acl)
      ->compile();
{/code}

{*compile="$gui->render()"*}
{*code}
  $roles = array(
    1 => 'uživatel',
    'supr admin',
    'download admin',
  );
  $resources = array(
    '' => array('show'),
    'home' => array('show'),
    'home/stats' => array('show'),
    'notifications' => array('show'),
    'notifications/archives' => array('show'),
    'messages' => array('show'),
    'news' => array('show', 'add', 'edit', 'del'),
    'news/icons' => array('show', 'add', 'edit', 'del'),
  );

  $gui = new classes\gui\GuiStaticACL($roles, $resources, null);
  $gui->compile();
{/code}
//($raw ? $method[$m['name']] : htmlspecialchars($method[$m['name']], ENT_NOQUOTES))
//~ var_dump($values, $raw);
//~ $val[$m['name']][$m['key']] = isset($method[$m['name']][$m['key']]) ? ($raw ? $method[$m['name']][$m['key']] : htmlspecialchars($method[$m['name']][$m['key']], ENT_NOQUOTES)) : null;
//~ $val[$m['name']] = isset($method[$m['name']]) ? ($raw ? $method[$m['name']] : htmlspecialchars($method[$m['name']], ENT_NOQUOTES)) : null;//$this->prepareRaw($raw, $method[$m['name']])
//~ $val[$name] = $raw || is_array($method[$name]) ? $method[$name] : htmlspecialchars($method[$name], ENT_NOQUOTES);  // nacteni udaju jen z aktualniho formulare
// zdrojovy kod formulare
$code = '
formulář...

<div class="mws-button-row">
  %%save_button%%
</div>';
//~ ->setAdd(array(
        //~ 'enabled' => $user->isAllowed($acl_resource, 'add'),
        //~ 'title' => 'Přidat screen',
        //~ 'url' => 'st1',
      //~ ))
//~ '__form' => null, //
 docasne prenaseci promenna
$this->printstdout = $db_conf;
//~ $driver_options[\PDO::ATTR_ERRMODE] = \PDO::ERRMODE_WARNING;
//~ $this->pdo->setAttribute(\PDO::ATTR_ERRMODE, \PDO::ERRMODE_EXCEPTION);  // pri chybe volat exception
//global_configure.home.slideshowWidth
//global_configure.home.slideshowHeight
var_dump($_url);
// ulozeni dat a presmerovani na se crop kde se obrazek zobrazi
base64_decode(urldecode(
base64_decode(urldecode(
//~ var_dump($_geometry[\'width\'], $_geometry[\'height\']);
//~ var_dump($_values, $global_configure[\'home\'][\'slideshowWidth\'], $global_configure[\'home\'][\'slideshowHeight\']);
// stav 0. upload obrazku
$code = '
upload

%%save_button%%
';

// stav 1. crop obrazku (jen pokud je vetsi nez zadane rozmery)
$st1 = '
crop

%%save_button%%
';
// prepinani kodu
$c = null;
//~ switch ($uri['subblock']) {
  //~ case 'add0':  // upload
    //~ $c = $st0;
  //~ break;
//~
  //~ case 'add1':  // crop
    //~ $c = $st1;
  //~ break;
//~
  //~ case 'add2':  // add/edit
    //~ $c = $st1;
  //~ break;
//~ }
<input type="text" name="crop_x1" id="crop_x1" readonly="readonly" value="32">
<input type="text" name="crop_y1" id="crop_y1" readonly="readonly" value="32">
<input type="text"  name="crop_x2" id="crop_x2" readonly="readonly" value="132">
<input type="text" name="crop_y2" id="crop_y2" readonly="readonly" value="132">
// pro nad slideshows vyvyjinou prazhdnou sekci, respektive sekci ktera bude schopna zprostredkovat vece stavovy formular pri ruznych adresach!!!!!
//s tim ze bude predava i nejake data mezi formlarama tak aby se formulare dokazaly domluvit!!!
//~ var_dump($_values, $_values[\'crop_x2\'] - $_values[\'crop_x1\'], $_values[\'crop_y2\'] - $_values[\'crop_y1\']);
//3:stavy
//upload/[pokud bude vetsi rozmer: crop, mensi -> chyba]/samotne zaneseni polozky
// dodelat!!! bude 2.stavovy formualar? nebo proste na uploadovat a tam az potom cropovat.
//#1.varianta prvni formular jen upload (singl / multiple)??? pote co nauploaduje tak se zobrazi okno s kropovanim a obrazek se nekropuje a ulozi final do databaze s dalsima udajama
$_img = new \Imagick($img_url);
$_img->getImageGeometry();
var_dump(); // doaplikovat!!!!
$_img = new \Imagick($_values[\'obrazek\'][\'tmp_name\']);
          $_geometry = $_img->getImageGeometry();
{*
{$global_configure.home.slideshowWidth}
x
{$global_configure.home.slideshowHeight}
*}
              <img src="{$weburl}preview1.jpg" alt="Vlak v krajině" data-cycle-title="pitrs30" />
              <img src="{$weburl}preview2.jpg" alt="Vlak přijíždí do vesnice" data-cycle-title="pitrs30" />
              <img src="{$weburl}preview3.jpg" alt="Vyjíždíme ze stanice" data-cycle-title="pitrs30" />
              <img src="{$weburl}preview4.jpg" alt="Na trati v plné rychlosti" data-cycle-title="pitrs30" />
confirmed: {checkbox:confirmed|$|class|:|ibutton|,|id|:|smazat_avatar_lb|,|data-label-on|:|ANO|,|data-label-off|:|NE&nbsp;}
<input type="checkbox" disabled{$value->confirmed ? \' checked\' : null} class="ibutton" data-label-on="ANO" data-label-off="NE&nbsp;" /><br />
->putBool(\'confirmed\', isset(%%values%%[\'confirmed\']))
/*
$builder = $section::builder();
$builder
    ->setTable('links_category', 'idlink_category')
    ->setUriAddress('$uri.subaction', '$uri.id')
    ->setWeburl($weburl_admin.'links/category/')
    ->setForm('
{text:name|maxlength:100;placeholder:tu ma byt nazev;class:form-control||filled:nazev musi byt vyplneno!}*<br/>
    ')
    ->setFormColumns(array('name'))
    ->setDefault()
    ->add()
    ->edit()
    ->del();
// test prelozitelnosti!!
$__form = $builder->getForm();
*/

// pri nacitani se musi vyplnit nactene hodnoty

//~ $_langform = null;
//~ foreach ($db->query('languages', array('code', 'name')) as $v) {
 //~ $_langform .= $v->name.': {text:name['.$v->code.']|maxlength:100;placeholder:tvuj preklad pro '.$v->name.'||filled:musí bys vyplněno}<br />'.PHP_EOL;
//~ }
// tady se to dodelava a testujou se preklady!!!

//INSERT INTO `trainz-cz`.`languages_has_links_category` (`idlanguage`, `idlink_category`, `name`) VALUES (NULL, NULL, NULL);
//INSERT INTO `trainz-cz`.`languages` (`idlanguage`, `code`, `name`) VALUES (NULL, NULL, NULL);
//INSERT INTO `trainz-cz`.`links_category` (`idlink_category`) VALUES (NULL);
//INSERT INTO `trainz-cz`.`links` (`idlink`, `idlink_category`, `name`, `url`, `picture`) VALUES (NULL, NULL, NULL, NULL, NULL);

//~ $sectionForm = $form::compile($_langform)->addSubmit(null, 'Přidat')->setAutoHide();
//~ $sectionForm = null;
'configurator' => 'classes\Configurator',
$elems = ;
//~ var_dump(array_map(function($item) {
//~ return $item
//~ }, $argv));
//~ var_dump(array_filter($elems, function($item) use ($th) {
//~ return $th->getMethodValue($item) != '';
//~ }));
//~ var_dump('v: '.$value.', send: '.$this->getMethodValue($argv));
break;
    var_dump($aff);
    //~ var_dump(array_diff($file_system, $args['db']));
var_dump($diff);
// jeste pripadne i soubory na vyjimky
//otazka predavat to pri parametru crona ? a nebo vytvaret XX instanci???
  //se sem budou pridavat z nekama nejake polozky co budou potreba sycnchronizovat
  //a samotny tento script pobezi nebu teda bude sposten ze slozky cronu dejme tomu ~co 5 minut
  //musi bat parametry podle kterych bude rozlisovat jestli se spoustet co 1/5/60 min... a pak denne
  /*
   * tento soubour musi stat sam o osbe jako by to by index!
   *
   * json databaze kde bude array(array('namespace/class', 'metoda', array('database', ...)), ...)
   * myslenka je jednoducha... pri spusteni se projde pole ulozenych trid v cronu a vykona se... vic nic
   * pak jen muze byt admin nadstavba ktera umozni pridani z adminu bez hrabani v kodu, tak ze pregeneruje json
   *
   * ++tento soubor by mel mit v zasuvnych modulech vlastni administraci!!!
   */        var_dump('redy', $cfg);

//pocetecni pole, toto pole musi byt v konfiguraci, asi json (musi byt editovatelny z venku!!!)
$cl = array(
    'classes\Tpl' => array(),
    //~ 'classes\Backuper' => array(),
    'classes\ErrorLoger' => array(),
    'classes\Cache' => array(),
    //~ 'classes\DbDirComparator' => array(),
    'Crate' => array(),
);
//~ var_dump(classes\Tpl::synchronizeCron());
        // hash puvodniho template
        $hash = ;  // detekuje zmeny tpl
      // uplny path template
      $name = ;
//var_dump('include pry: '.self::draw($_path)->assign($this->vars)->getCompileName());
//~ $tmp = tempnam('/tmp', 'ggg');
//~ file_put_contents($tmp, );
//~ var_dump();
{code}
  $a = include('main_extra.e8e58bb1e3349780aa87ffd60acd0bbc.php');
{/code}
{$a}
$_t = self::draw($_path)->assign($this->vars);
//~ $_t->render();
$result .= $_t->render();
$include_compile = $_t->getCompileName();
//~ var_dump(stream_resolve_include_path($include_compile));
//~ var_dump($include_compile);
//~ var_dump(file_exists($include_compile));
//~ $result .= include(stream_resolve_include_path($include_compile));
//~ $result .= "\nT\n;".$cmrs." .= include('".$include_compile."'); " . $cmrs ." .= <<<T\n";;
//~ $result .= "\nT;\n  " . $cmrs ." .= include('".stream_resolve_include_path($include_compile)."'); " . $cmrs ." .= <<<T\n"; // rozdeleni
{$varr}
include:
{include="main_extra"}
.....
{$url=$v0->url}
{*$v0->name*}
{*$v0->name*}
//~ $result .= self::compile($matches[1], $this->vars);
//~ var_dump(file_get_contents());
//~ var_dump(var_export($this->vars, true));/".var_export($this->vars, true)."
//~ $result .= self::compile($matches[1], $this->vars);
'mnu' => file_get_contents('templates/menu.tpl'),
{compile="file_get_contents('/var/www/www/git/goodflow/trainz_cz/templates/menu.tpl')"}
// TPL musi cachovat podle adresy a musi podporiovat prefixy!!!
 $diff = ;
{*include="menu"*}
{*include="language"*}
var_dump();
      //~ foreach ($list as $l) {
        //~ if (filemtime($l) < $posun) { // pokud je modifikace < jak cas pred -X dny
          //~ if (unlink($l)) {
            //~ $poc++;
          //~ }
        //~ }
      //~ }
var_dump($poc);
        //~
        //~ foreach ($slice as $l) {
          //~ if (unlink($l)) {
            //~ $poc++;
          //~ }
        //~ }
//~ $neon = <<<T
//~ sync:
  //~ class: classes\DbDirComparator
  //~ - [dir: slozka1, db: list1]
  //~ - [dir: slozka2, db: list2]
//~ T;
//~ $cfg = classes\Configurator::decode($neon);
//~ var_dump($cfg);
//~ var_dump(array_slice($list, 0, $count));
//~ var_dump($code == E_USER_NOTICE);
      //~ trigger_error($_message, E_USER_NOTICE);
 && je vypnute okamzite odesilani emailu!!!
 && !self::$instantlySend
//~ if (preg_match($tagMatch['variable_input'], $html, $match)) { // jak sakra predavat promenny? to nejak musi jit?
  //~ $_sp = explode('.', $match[1]);
  //~ $_n = substr($_sp[0], 1);
  //~ var_dump($this->elements[$_n], $_sp, ;
  //~ $result .= '{code}$'.$_n.'.value{/code}';
  //$this->elements[$match['name']]);
  //~ $result .= '{'.Tpl::compileVar('$ahoj.value').'}';
  //~ $attr = $this->processAttr($match);
  //~ $result .= '<img src="'.$this->processValue($match, false, false).$this->returnVar($match['name']).'"'.$attr.'/>';
//~ } else
var_dump('.$this->var_form.'->render()));  // naaplikovat!!
//Tpl::compile() ++ predat promenne // otestovat, vyzkouset a pripadne nasadit!!!!!
edit...  ';
  if ($uri['subblock'] == 'edit') {
$code .= '
';
}
$code .= '

'; if (!$superadmin) {
  $code .= '
($uri.subblock == \\\'edit\\\' && in_array($uri.subaction, array (1, 2)))
//~ $a = array(
          //~ 'dirfont' => 'ttf/',
          //~ 'dirfontobr' => 'previews/',
          //~ 'safegen' => 200,
          //~ 'fontwrap' => 60,
          //~ 'fonttext' => "a b c d e f g h i j k l m n o p q r s t u v w x y z\n\n0 1 2 3 4 5 6 7 8 9  + - * / ^ √\n\nA B C D E F G H I J K L M N O P Q R S T U V W X Y Z\n\ně š č ř ž ý á í é ú ů ! ? ( )\n\nĚ Š Č Ř Ž Ý Á Í É Ú Ů",
          //~ 'fontsize' => 40,
          //~ 'fontpadding' => array(20, 20, 20, 20),
          //~ 'fontpozadi' => '#000',
          //~ 'fontbarvafontu' => '#fff',
        //~ );
      //~ file_put_contents('config.neon', Neon::encode($a, Neon::BLOCK));
      //~ var_dump();
        - 20
  - 20
  - 20
  - 20
'%%del_link%%' => '',
//~ ->setDel(array('content_values' => '->putDate(\'deleted\')'));
  //~ var_dump(addslashes('[\-0-9]\{3,\}\:[0-9]\{2,\}\:[0-9]+'));
  //~ var_dump(base64_encode('[\-0-9]\{3,\}\:[0-9]\{2,\}\:[0-9]+'));
  //~ var_dump(rawurlencode('[\-0-9]\{3,\}\:[0-9]\{2,\}\:[0-9]+'));
  //~ var_dump(urlencode('[\-0-9]\{3,\}\:[0-9]\{2,\}\:[0-9]+'));
// ?= ?! ?<= (?<!foo)
/*
 (?=) - Positive look ahead assertion foo(?=bar) matches foo when followed by bar
 (?!) - Negative look ahead assertion foo(?!bar) matches foo when not followed by bar
 (?<=) - Positive look behind assertion (?<=foo)bar matches bar when preceded by foo
 (?<!) - Negative look behind assertion (?<!foo)bar matches bar when not preceded by foo
 (?>) - Once-only subpatterns (?>\d+)bar Performance enhancing when bar not present
 (?(x)) - Conditional subpatterns
 (?(3)foo|fu)bar - Matches foo if 3rd subpattern has matched, fu if not
 (?#) - Comment (?# Pattern does x y or z)
*/
var_dump($argv);
(?<!foo)
<!foo
<!
//~ $(".kuid2_check").click(
//~ function () {
  //~ if ($(this).attr('checked')) {
    //~ $(".switch_kuid1").css('display', 'block');
    //~ $(".switch_kuid2").css('display', 'none');
  //~ } else {
    //~ $(".switch_kuid1").css('display', 'none');
    //~ $(".switch_kuid2").css('display', 'block');
  //~ }
//~ });
<!fioo
$_enabled = isset($settings['enabled']) ? ((bool) $settings['enabled'] ? 1 : 0) : 1;
      $_ignore = isset($settings['ignore']) ? $settings['ignore'] : array();
      $s = array(
          '%%title%%',
          '%%url%%',
        );
      $r = array(
          $_title,
          $this->weburl . $_url . '/{$value->'. $this->id_table . '}',
        );
str_replace(array('\{', '\}', '\*'), array('{', '}', '*'),
(?<!\\\)
(?<!\\\)
// podporuje \{\} v @ rules
//(?<!\\\)
, synchronizoat databzai kvuli ikonkam, upravit nazvy sloupcu pri vyberech + upravit nazvy inputu ve formularich!!!
//'{$value->'. $this->id_table . '}';
$value->'.$this->id_table.'
!in_array(%%id_row%%, '.var_export($_ignore, true).') &&
// prepinani sekci nejak podle jmena?!
//~ '$db->rawQuery(\'SELECT iddownload_section, parent, rewrite, languages_has_download_sections.name, languages_has_download_sections.description FROM download_sections
                                    //~ JOIN languages_has_download_sections USING(iddownload_section)
                                    //~ JOIN languages USING(idlanguage)
                                    //~ WHERE languages.code=? AND parent IS NULL
                                    //~ ORDER BY languages_has_download_sections.name ASC\', array(\'cs\'))',
$db->rawQuery(\'SELECT iddownload_section, parent, rewrite, languages_has_download_sections.name, languages_has_download_sections.description FROM download_sections
                        JOIN languages_has_download_sections USING(iddownload_section)
                        JOIN languages USING(idlanguage)
                        WHERE languages.code=? AND parent=?
                        ORDER BY languages_has_download_sections.name ASC\', array(\'cs\', $value->iddownload_section))
$db->rawQuery(\'SELECT iddownload_section, parent, rewrite, languages_has_download_sections.name, languages_has_download_sections.description FROM download_sections
                        JOIN languages_has_download_sections USING(iddownload_section)
                        JOIN languages USING(idlanguage)
                        WHERE languages.code=? AND parent=?
                        ORDER BY languages_has_download_sections.name ASC\', array(\'cs\', $value->iddownload_section))
$db->rawQuery(\'SELECT iddownload_section, parent, rewrite, languages_has_download_sections.name, languages_has_download_sections.description FROM download_sections
                        JOIN languages_has_download_sections USING(iddownload_section)
                        JOIN languages USING(idlanguage)
                        WHERE languages.code=? AND parent=?
                        ORDER BY languages_has_download_sections.name ASC\', array(\'cs\', $value->iddownload_section))
$db->rawQuery(\'SELECT iddownload_section, parent, rewrite, languages_has_download_sections.name, languages_has_download_sections.description FROM download_sections
                        JOIN languages_has_download_sections USING(iddownload_section)
                        JOIN languages USING(idlanguage)
                        WHERE languages.code=? AND parent=?
                        ORDER BY languages_has_download_sections.name ASC\', array(\'cs\', $value->iddownload_section))
 //~ return $this->db->rawQuery('', array($rewrite));
       //~ var_dump($this->db->query('download_sections', 'iddownload_section', 'rewrite=?', array($rewrite))->getFirst());
      //SELECT iddownload_section FROM download_sections WHERE rewrite='dss'
 //~ return $this->db->rawQuery('', array($rewrite));
       //~ var_dump($this->db->query('download_sections', 'iddownload_section', 'rewrite=?', array($rewrite))->getFirst());
      //SELECT iddownload_section FROM download_sections WHERE rewrite='dss'
';

foreach ($crate->getListLanguages() as $v) {
  $code .= '
      <li><a href="#tab-'.$v->code.'">'.$translate['lang_code'][$v->code].'</a></li>';
}

$code .= '
    //~ /**
     //~ * nacteni konkretni polozky podle id (download.tpl)
     //~ *
     //~ * @since 1.64
     //~ * @param int id identifikator polozky
     //~ * @return PDOCursor vysledny kurzor
     //~ */
    //~ public function getDownloadSection($id) {
      //~ return $this->db->rawQuery('SELECT iddownload_section, parent, rewrite, languages_has_download_sections.name, languages_has_download_sections.description FROM download_sections
          //~ JOIN languages_has_download_sections USING(iddownload_section)
          //~ JOIN languages USING(idlanguage)
          //~ WHERE languages.code=? AND iddownload_section=?
          //~ ORDER BY languages_has_download_sections.name ASC', array($this->current_language, $id));
    //~ }
{code}//<?
  // dodelat a pridavat z pole a aktivni polozku vyhazovat odkaz
  $links = array_slice($uri, 1);
  //$link_parents = implode('/', array_slice($uri, 1));

  //$source_array = array_merge(array('download'), array_slice($uri, 1));
  //~ var_dump($links);
  //~ var_dump($uri);
  //{$link_path = implode('/', array_slice($source_array, 0 ,$counter1+1))}
{/code}
  var_dump($current_section);
  //array_values(array_slice($uri, -1));
  //$current_section = $current_section[0] != 'download' ? $current_section[0] : null;
  var_dump(implode(array_slice(array_slice($this->uri, 1), -1)));
  //$last = array_values(array_slice($uri, -1));
  //var_dump($current_section, $last);
  //var_dump($current_section);
//$last[0] != 'download' ? $crate->getDownloadID($last[0]) : null;
var_dump(implode(array_slice(array_slice($uri, 1), -1)));
// metodu na autoCrop
//~ $img = new Imagick($obr_in);
//~ $img->cropthumbnailimage(200, 200);
//~ $img->writeImage($obr_out);
//~ '.$_code_pre_insert.'//~ $_code_pre_insert = isset($settings['code_pre_insert']) ? $settings['code_pre_insert'] : ''; // pred provedeni insert
// pridat rows do promennych aby se spravne vyhodnocvaly hlasky!!!!!!
    //~ /**
     //~ * vytvareni duplikacni sekce
     //~ *
     //~ * @since 1.00
     //~ * @param array settings pole nastaveni
     //~ * @return this
     //~ */
    //~ public function setDuplicate($settings = array()) {
      //~ $_url = isset($settings['url']) ? $settings['url'] : $this->dup_suffix;
      //~ $_title = isset($settings['title']) ? $settings['title'] : 'Smazat';
//~ // domyslet vkladani odkazu podle sekci do listu (do vypisu) respektive ty kontexty vyhodit ven a predavat tam obsahy jen z venku!
      //~ $_content = isset($settings['content']) ? $settings['content'] : '';
      //~ $search = array(
          //~ //
          //~ '%%content%%',
          //~ '%%title%%',
        //~ );
      //~ $replace = array(
          //~ //
          //~ $_content,
          //~ $_title,
        //~ );
      //~ $this->code[$_url] = str_replace($search, $replace, '
//~ {if="isset('.$this->action_uri.') && '.$this->action_uri.'==\''.$_url.'\'"}
  //~ %%title%%
  //~ // dodelat a doaplikovat!! az bude zapotreby
  //~ %%content%%
//~ {/if}');
      //~ return $this;
    //~ }
    //~ /**
     //~ * nacteni roli uzivatelu
     //~ *
     //~ * @since 1.50
     //~ * @param void
     //~ * @return PDOCursor vysledny kurzor
     //~ */
    //~ public function getListRoles() {
      //~ return $this->db->query('roles', null, null, null, null, null, 'idrole ASC');
    //~ }
//slideshows: nesmi pustit vevyplneny jeden z formularu useru
//~ var_dump($m); // doresit
//~ $val[$m['name']][] = ??var_dump($name, $m['key']);
 //~ var_dump(count($m['key']));
// podporuje maximalne 2-rozmerne pole
//~ if ($m['key']) {  // nacteni udaju jako pole
            //~ $val[$m['name']][$m['key']] = isset($method[$m['name']][$m['key']]) ? $this->prepareRaw($raw, $method[$m['name']][$m['key']]) : null;
          //~ } else {
            //~ $val[$m['name']] = isset($method[$m['name']]) ? $this->prepareRaw($raw, $method[$m['name']]) : null;
          //~ }
//~ (bool) preg_match('/(?<name>(.+))\[(?<key>(.*))\]/', $source, $match);
//~ var_dump($name, $m['name'], $m['key']);//~ var_dump($name, $m['name'], $m['key']);
//~ var_dump($value, $m);$m['key'][1]
', array(\'uri\' => $uri, \'crate\' => $crate, \'translate\' => $translate)',
//', array(\'uri\' => $uri, \'crate\' => $crate, \'translate\' => $translate)',
', array(\'uri\' => $uri)'
', array(\'uri\' => $uri)'
//', array(\'uri\' => $uri)';
{*
(verze je zavisla od CDP)
{select:trainz_version;'.classes\Configurator::encode($crate->getArrayListTrainzVersion(), classes\Configurator::BLOCK).'}<br />
cdpecka: {file:cdp|$|multiple}<br />
*}
// base64_decode($argv)
//SELECT parent, level FROM download_sections WHERE iddownload_section=24
{$level=0}
{$level=1}
{$level=2}
{$level=3}
{$level=4}
var_dump(preg_match('/(?<negation>\~)?(?<type>\w+)/', $type, $m), $type, $m);
($m['type'] == 'pattern' ? $m['argv'] : Configurator::decode())
//~ var_dump('repl: '.base64_decode($argv, true).', argv: '.$argv);
(base64_decode($argv, true) ?: )
, pro bezpecny format zadavat v base64_encode(), pokud bude neplatny base64 pouzije se pouze argument
// [0-9]{3}|@|pattern|:|....|:|WzAtOV17M30=
// [0-9]{3}|@|pattern|:|....|:|WzAtOV17M30=
// [\-0-9]{3,}\:[0-9]{2,}\:[0-9]{1,}|@|pattern|:|....|:|W1wtMC05XXszLH1cOlswLTldezIsfVw6WzAtOV17MSx9
// |@|pattern|:|....|:|W1wtMC05XXszLH1cOlswLTldezIsfVw6WzAtOV17MSx9
// |@|pattern|:|....|:|W1wtMC05XXszLH1cOlswLTldezIsfVw6WzAtOV17MSx9
// |@|pattern|:|....|:|W1wtMC05XXszLH1cOlswLTldezIsfVw6WzAtOV17MSx9
//|,|pattern|:|Kuid musí mít správný formát!<ul><li><strong>xxxxx:yyyyy</strong> pro <strong>&lt;kuid:xxxxx:yyyyy&gt;</strong></li><li><strong>xxxxx:yyyyy:zzz</strong> pro <strong>&lt;kuid2:xxxxx:yyyyy:zzz&gt;</strong></li></ul>|:|KFwtKT9bMC05XStcOlswLTldKyhcOlswLTldKyk/
//|@|filledor|:|Musí být vyplněn uživatel, nebo vybrán ze seznamu uživatelů!|:|iduser
//|@|filledor|:|Musí být vyplněn uživatel, nebo vybrán ze seznamu uživatelů!|:|iduser
          //~ if (this.value.split(':').length > 1) {
            //~ $('.kuid_format').html('&lt;' + (this.value.split(':').length == 2 ? 'kuid' : 'kuid2') +  ':' + this.value + '&gt;');
          //~ } else {
            //~ $('.kuid_format').html('&lt;kuid(2):xxxxx:yyyyy(:zzz)&gt;');
          //~ }
/*
		_change: function ( e ) {
			var file = e.target.files !== undefined ? e.target.files[0] : { name: e.target.value.replace(/^.+\\/, '') };
			if ( !file ) return;

			this.container.find( '.fileinput-preview ' ).val(file.name);
		}
*/
//~ console.log(data_self_kuid[k]);
//~ console.log(data_self_kuid[k]);

{*
        <div class="mws-form-row">
          <label class="mws-form-label" for="kuid_sznm_lb">Kuid (seznam kuidů)</label>
          <div class="mws-form-item">
            <div class="small">
              {select:idtrainz_kuid;'.classes\Configurator::encode($kuids, classes\Configurator::BLOCK).'|$|class|:|mws-select2|,|id|:|sekce_dwnld_lb|,|onchange|:|document.getElementById(\\\'kuid_lb\\\').disabled=this.selectedIndex|@|filledor|:|Musí být vyplněn kuid, nebo vybrán ze seznamu kuidů!|:|self_kuid}
            </div>
          </div>
        </div>
        <div class="mws-form-row">
          <label class="mws-form-label" for="kuid_lb">Kuid (definovaný)</label>
          <div class="mws-form-item">
            <div class="large end-owrfl">
              {text:self_kuid|$|maxlength|:|30|,|placeholder|:|xxxxx:yyyyy(:zzz)|,|class|:|kuid_input defined-250|,|id|:|kuid_lb|@|pattern|:|Kuid musí mít správný formát!<ul><li><strong>xxxxx:yyyyy</strong> pro <strong>&lt;kuid:xxxxx:yyyyy&gt;</strong></li><li><strong>xxxxx:yyyyy:zzz</strong> pro <strong>&lt;kuid2:xxxxx:yyyyy:zzz&gt;</strong></li></ul>|:|KFwtKT9bMC05XStcOlswLTldKyhcOlswLTldKyk/}
              <label class="defined-350 custom-label">Formát: <span class="kuid_format">&lt;kuid(2):xxxxx:yyyyy(:zzz)&gt;</span></label>
            </div>
            <span class="error">Zadejte kuid pokud není uveden v seznamu kuidů. V opačném případě vyberte kuid ze seznamu kuidů nahoře!<br />Kuid musí mít správný formát!<ul><li><strong>xxxxx:yyyyy</strong> pro <strong>&lt;kuid:xxxxx:yyyyy&gt;</strong></li><li><strong>xxxxx:yyyyy:zzz</strong> pro <strong>&lt;kuid2:xxxxx:yyyyy:zzz&gt;</strong></li></ul></span>
          </div>
        </div>
*}

{*
        <div class="mws-form-row">
          <label class="mws-form-label" for="kuid_lb">Externí kuid (definovaný)</label>// osetrit ID
          <div class="mws-form-item">
            <div class="large end-owrfl">
              {text:self_kuid_dependency|$|maxlength|:|30|,|placeholder|:|xxxxx:yyyyy(:zzz)|,|class|:|kuid_input defined-250|,|id|:|kuid_lb|@|pattern|:|Kuid musí mít správný formát!<ul><li><strong>xxxxx:yyyyy</strong> pro <strong>&lt;kuid:xxxxx:yyyyy&gt;</strong></li><li><strong>xxxxx:yyyyy:zzz</strong> pro <strong>&lt;kuid2:xxxxx:yyyyy:zzz&gt;</strong></li></ul>|:|KFwtKT9bMC05XStcOlswLTldKyhcOlswLTldKyk/}
              <label class="defined-350 custom-label">Formát: <span class="kuid_format">&lt;kuid(2):xxxxx:yyyyy(:zzz)&gt;</span></label>
            </div>
            <span class="error">Zadejte kuid pokud není uveden v seznamu kuidů. V opačném případě vyberte kuid ze seznamu kuidů nahoře!<br />Kuid musí mít správný formát!<ul><li><strong>xxxxx:yyyyy</strong> pro <strong>&lt;kuid:xxxxx:yyyyy&gt;</strong></li><li><strong>xxxxx:yyyyy:zzz</strong> pro <strong>&lt;kuid2:xxxxx:yyyyy:zzz&gt;</strong></li></ul></span>
          </div>
        </div>
*}
//  sfdsfsdf;+ěščřžýáííé=pú)§§lků§ů,-..mn\\*/-+\|€¶ŧ←↓→øþ[}*{&^%$#@!`\|đ~dfdsd+++;+ěščy\\y/\//|\\
//  sfdsfsdf;+ěščřžýáííé=pú)§§lků§ů,-..mn\\*/-+\|€¶ŧ←↓→øþ[}*{&^%$#@!`\|đ~dfdsd+++;+ěščy\\y/\//|\\
tasks:
  classes\Tpl: []
  #classes\Backuper: []
  classes\ErrorLoger: [path: logs/, email: geniv.radek@gmail.com]
  #classes\Cache: []
  #classes\DbDirComparator: []
  Crate: []
// As of PHP 5.3.0
//~ call_user_func_array(__NAMESPACE__ .'\Foo::test', array('Hannes'));

// As of PHP 5.3.0
//~ call_user_func_array(array(__NAMESPACE__ .'\Foo', 'test'), array('Philip'));




//~ $_class = str_replace('/', '\\', $_POST['class']);  // nacteni a uprava adresy tridy
//~ if (method_exists($_class, $_POST['method'])) {
  //~ echo $_class::$_POST['method']($mainClass, $_POST); // zavolani samotne metody
//~ } else {
  //~ throw new Exception('neplatné volání metody!!');
//~ }

// dodelat
//~ var_dump(urldecode($_POST['value']));
//~ var_dump(parse_str(urldecode($_POST['value']), $r), $r);
//~ var_dump($post, $_POST);$_POST, $_GET, $_SERVER$post, $get, $server
// volat metodu z prepravky?!, zadavat z neon konfigurace!!
var_dump(parse_str(urldecode($_POST['value']), $r), $r);
var_dump($_key != '0', $_key != 0 && in_array($_key, $_send_value));// : strval($_key) == $_send_value ? ' selected' : null
//~ var_dump($value[$match['name']]);
$self_kuid_dependency = isset($_POST['self_kuid_dependency']) ? json_encode($_POST['self_kuid_dependency']) : '[]';
var data_self_kuid_dependency = {$self_kuid_dependency};

        var poc_dep = 0;
        $('.add_kuid_dependency').click(function() {
          $('.kuid_dependency').append('<div class="mws-form-row dependencyrow'+poc_dep+'">'+
            '<label class="mws-form-label" for="kuid_lb'+poc_dep+'">Externí kuid (definovaný)</label>'+
            '<div class="mws-form-item">'+
              '<div class="large end-owrfl">'+
                '<input type="text" value="'+(data_self_kuid_dependency[poc_dep] ? data_self_kuid_dependency[poc_dep] : '')+'" name="self_kuid_dependency['+poc_dep+']" placeholder="xxxxx:yyyyy(:zzz)" id="kuid_lb'+poc_dep+'" onkeyup="javascript:prepisKuidu(this.value, \''+poc_dep+'\')" class="kuid_input defined-250">'+
                '<label class="defined-350 custom-label">Formát: <span class="kuid_format'+poc_dep+'">&lt;kuid(2):xxxxx:yyyyy(:zzz)&gt;</span></label>'+
              '</div>'+
              '<span class="error">Zadejte kuid pokud není uveden v seznamu kuidů. V opačném případě vyberte kuid ze seznamu kuidů nahoře!<br />Kuid musí mít správný formát!<ul><li><strong>xxxxx:yyyyy</strong> pro <strong>&lt;kuid:xxxxx:yyyyy&gt;</strong></li><li><strong>xxxxx:yyyyy:zzz</strong> pro <strong>&lt;kuid2:xxxxx:yyyyy:zzz&gt;</strong></li></ul></span>'+
            '</div><a href="javascript:removeDependencyRow('+poc_dep+')">fuj fuj</a>'+
          '</div>');
          poc_dep++;

          $('.kuid_input').numberMask({pattern:/^[\-0-9\:]+$/});

          return false;
        });
//#'+(poc+1)+'

        for (var k in data_self_kuid_dependency) {
          $('.add_kuid_dependency').trigger('click');
        }
        <a href="#" class="add_kuid_dependency">přidej další ruční kuid dependency které néni v seznamu kuidů a je potřeba ještěvíc přidat</a>
// moznost pridavat jako PLAIN/TEXT ktery se bude posleze parsrovat a validovat (existujici pridat zavislot, neexistujici insertovat)
        <div class="kuid_dependency"></div>
{*
// PICO nastavit javascriptovy pattern na only cisla !!!!!!!!!!!!!!!
*}
test aajaxu
        $('.ajax_name').keyup(function() {
          $.post('{$weburl}ajax.php', {'type': 'download_name', 'value': $('.ajax_name').serialize()}, function(data) {
            $('.ajax_result').html(data);
          });
        });
<a href="javascript:addSubRow('+poc+')">přidat kud ktery neni v seznamu</a><div class="subitem'+poc+'">
        for (var k in data_self_kuid) {
          for (var j in data_self_kuid[k]) {
            addSubRow(k);
          }
        }
      //~ var subpoc = 0;
      //~ function addSubRow(num) {
        //~ $('.subitem'+num).append('<div class="mws-form-row subrow'+num+''+subpoc+'">'+
          //~ '<label class="mws-form-label" for="kuid_lb'+num+''+subpoc+'">Kuid (definovaný)</label>'+
          //~ '<div class="mws-form-item">'+
            //~ '<div class="large end-owrfl">'+
              //~ '<input type="text" name="self_kuid['+num+']['+subpoc+']" value="'+(data_self_kuid[num] && data_self_kuid[num][subpoc] ? data_self_kuid[num][subpoc] : '')+'" placeholder="xxxxx:yyyyy(:zzz)" id="kuid_lb'+num+''+subpoc+'" onkeyup="javascript:prepisKuidu(this.value, \''+num+''+subpoc+'\')" class="kuid_input defined-250">'+
              //~ '<label class="defined-350 custom-label">Formát: <span class="kuid_format'+num+''+subpoc+'">&lt;kuid(2):xxxxx:yyyyy(:zzz)&gt;</span></label>'+
            //~ '</div>'+
            //~ '<span class="error">Zadejte kuid pokud není uveden v seznamu kuidů. V opačném případě vyberte kuid ze seznamu kuidů nahoře!<br />Kuid musí mít správný formát!<ul><li><strong>xxxxx:yyyyy</strong> pro <strong>&lt;kuid:xxxxx:yyyyy&gt;</strong></li><li><strong>xxxxx:yyyyy:zzz</strong> pro <strong>&lt;kuid2:xxxxx:yyyyy:zzz&gt;</strong></li></ul></span>'+
          //~ '</div><a href="javascript:removeSubRow(\''+num+''+subpoc+'\')">fuj fuj</a>'+
        //~ '</div>');
        //~ $('.kuid_input').numberMask({pattern:/^[\-0-9\:]+$/});
        //~ subpoc++;
      //~ }
//~ $('.kuid_dependency_plain').addTag(value_split[v]);
//~ console.log(getKuid(value_split[v]));
            //~ if (event.keyCode == 13 || event.keyCode == 32) {
              console.log(value_split[v]);
              var kk = getKuid(value_split[v]);
        //~ $('.kuid_dependency_plain').keyup(function() {
          //~ var value_split = this.value.split('\\n');
          //~ var out = '';
          //~ for (var v in value_split) {
            //~ out += typKuidu(value_split[v]) + ', stav: '+ (isKuid(value_split[v]) ? 'ok' : 'špatně!!!!') + '<br />';
          //~ }
          //~ $('.pico_omg').html(out);
        //~ });
//~ $('.kuid_input_plain').numberMask({pattern:/^[\-0-9\:\\n]+$/});
      function prepisKuidu(value, n) {
        if (value.split(':').length > 1) {
          $('.kuid_format'+n).html('&lt;' + (value.split(':').length == 2 ? 'kuid' : 'kuid2') +  ':' + value + '&gt;');
        } else {
          $('.kuid_format'+n).html('&lt;kuid(2):xxxxx:yyyyy(:zzz)&gt;');
        }
      }
 function removeDependencyRow(num) {
        $('.dependencyrow'+num).remove();
      }
function removeSubRow(num) {
        $('.subrow'+num).remove();
      }
//~ subpoc = 0;
{*
// bud hrabnout do formulare a nebo skusit prepsat pattern!!
//ale prvni otestovat na piskovisti ze se to bije!!!!
*}
//zmensovani: full: 800*x (bez cropu), maly: 240x180 imagecroptrumb
//~ $('.add_cdp').trigger('click');//~ $('.add_cdp').trigger('click');
//~ 'code_post_form' => 'var_dump($_POST);',
123456:687456
123456:687456:5454:454
123456:687456:54
123456:687456:1
123456:687456
123456:44444
123456:-6856
123456:6874
123456:6998
-456:68756
-524:441:5487
 + podporu vlastnich callback funkci do addRule
//~ var_dump('closure:', $rules);//$value > $argv
var_dump('function:', $rules);//$value > $argvreturn false;
<div class="ajax_result">...</div>
// z uploadu nebere veskere udaje (jen pri single poli)
var_dump(in_array(0, $value['error']));//[0] === 0
 //~ $val = implode(', ', $values['name']);
//~ var_dump($val, array_values($values['name']));
//idlanguage
//~ $c = $db->rawQuery('SELECT * FROM languages_has_downloads WHERE name IN (?, ?, ?)', array_values($values['name']));// WHERE someId IN ($plist)
//->getAllRows();
  // dodelat!!! jak bude zapotrebi...
      //~ var_dump($_POST);
      //~ var_dump(parse_str(urldecode($_POST['value']), $r), $r);
      //http://cz1.php.net/manual/en/function.parse-str.php
$cond = isset($_POST[\'iduser\']) && $_POST[\'iduser\'] > 0 ? \'~\' : null;
          //%%form_var%%->addRule(\'author\', $cond . \'filled\', \'Musí být vyplněn uživatel, nebo vybrán ze seznamu uživatelů!\');
->addRule(\'author\', $cond . \'filled\', \'Musí být vyplněn uživatel, nebo vybrán ze seznamu uživatelů!\');
 //|@|filledor|:|Musí být vyplněn uživatel, nebo vybrán ze seznamu uživatelů!|:|iduser
          //~ var_dump($_POST, $_FILES);
//|@|pattern|:||:|
// pri vraceni hodnot neosetruje XSS!
// musi byt jeste pripadne pravidla na min pocet a max pocet, nebo to zahrnout v ramci min a max pravidel...
case 'filledor':  // kontrola vyplneni, jeden z X musi byt vyplneny
          if (is_array($argv)) {  // vyhodit!!! zbytecna podminka!!!
            $poc = 0;
            foreach (array_merge($argv, array($rules['name'])) as $item) {
              if ($this->getMethodValue($item) != '') {
                $poc++;
              }
            }
            return $poc > 0;
          } else {
            return ($value != '' && $value != '0') || ($this->getMethodValue($argv) != '' && $this->getMethodValue($argv) != '0');
          }
    /**
     * @covers classes\TplForm::isValid
     */
    public function testIsValid_filledor()  // nic
    {
        $this->object->setCode('{text:t1}{text:t2|@|filledor|:|....|:|t1}');
        $_POST = array($this->object->getSubmittedBy() => '...', 't1' => '', 't2' => '');
        $this->object->render();
        $this->assertTrue($this->object->isSubmitted());
        $this->assertFalse($this->object->isValid());
    }

    /**
     * @covers classes\TplForm::isValid
     */
    public function testIsValid_filledor1()  // 1/2
    {
        $this->object->setCode('{text:t1}{text:t2|@|filledor|:|....|:|t1}');
        $_POST = array($this->object->getSubmittedBy() => '...', 't1' => 'sdsds', 't2' => '');
        $this->object->render();
        $this->assertTrue($this->object->isSubmitted());
        $this->assertTrue($this->object->isValid());
    }

    /**
     * @covers classes\TplForm::isValid
     */
    public function testIsValid_filledor2()  // 2/1
    {
        $this->object->setCode('{text:t1}{text:t2|@|filledor|:|....|:|t1}');
        $_POST = array($this->object->getSubmittedBy() => '...', 't1' => '', 't2' => 'sdfsdf');
        $this->object->render();
        $this->assertTrue($this->object->isSubmitted());
        $this->assertTrue($this->object->isValid());
    }

    /**
     * @covers classes\TplForm::isValid
     */
    public function testIsValid_filledor3()  // 2/2
    {
        $this->object->setCode('{text:t1}{text:t2|@|filledor|:|....|:|t1}');
        $_POST = array($this->object->getSubmittedBy() => '...', 't1' => 'fdsfdf', 't2' => 'sdfsdf');
        $this->object->render();
        $this->assertTrue($this->object->isSubmitted());
        $this->assertTrue($this->object->isValid());
    }

    /**
     * @covers classes\TplForm::isValid
     */
    public function testIsValid_filledor4()
    {
        $this->object->setCode('{text:t1}{text:t2|@|filledor|:|....|:|t1}');
        $_POST = array($this->object->getSubmittedBy() => '...', 't1' => '0', 't2' => '0');
        $this->object->render();
        $this->assertTrue($this->object->isSubmitted());
        $this->assertFalse($this->object->isValid());
    }

    /**
     * @covers classes\TplForm::isValid
     */
    public function testIsValid_filledor5()
    {
        $this->object->setCode('{text:t1}{text:t2|@|filledor|:|....|:|t1}');
        $_POST = array($this->object->getSubmittedBy() => '...', 't1' => '0', 't2' => '');
        $this->object->render();
        $this->assertTrue($this->object->isSubmitted());
        $this->assertFalse($this->object->isValid());
    }

    /**
     * @covers classes\TplForm::isValid
     */
    public function testIsValid_filledor6()
    {
        $this->object->setCode('{text:t1}{text:t2|@|filledor|:|....|:|t1}');
        $_POST = array($this->object->getSubmittedBy() => '...', 't1' => '', 't2' => '0');
        $this->object->render();
        $this->assertTrue($this->object->isSubmitted());
        $this->assertFalse($this->object->isValid());
    }
// pridat polozku na prompt!
var_dump($this->define_attr[$match['name']]);7
//TPLForm dodelat vlastni callback funkce jako vlastni rule pravidla!!!
(!is_bool($value) ?
: null)
//~ $this->define_attr[$match['name']]
//~ var_dump();
//~ $predef =  ? $this->define_attr[$match['name']] : null;
//
element {link:url|$|attr}//
+ ten element {link:}
//$attr = $this->processAttr($match);var_dump($attr);
$this->processValue($match, false, false).
;'.classes\Configurator::encode($users, classes\Configurator::BLOCK).'
//~ $users[] = 'Autor není v seznamu';
//~ $users += $crate->getArrayListUsers();

//~ $kuids[] = 'Kuid není v seznamu';
//~ $kuids += $crate->getArrayListTrainzKuids();

//~ $sections[] = 'Není vybrána kategorie!';
//~ $sections += $crate->getArrayListDownloadSections();;'.classes\Configurator::encode($sections, classes\Configurator::BLOCK).'
;'.classes\Configurator::encode($crate->getArrayListTrainzKuids(), classes\Configurator::BLOCK).'
// dotahnout synchronizaci!!!
//  potom vypis existujicich cdp s verzema zvast nebo v tom JS??
$users[] = 'Autor není v seznamu';
$users += $crate->getArrayListUsers();;'.classes\Configurator::encode($users, classes\Configurator::BLOCK).'
          $vv = count(array_count_values($values['name']));
var_dump($vv);
 var_dump($count_values);
|,|%%tpl__%%$uri.subblock == \\\'edit\\\' && $data->iduser > 0 ? \\\'disabled\\\' : \\\'\\\'%%__tpl%%
$cond = isset($_POST[\'iduser\']) && $_POST[\'iduser\'] > 0 ? \'~\' : null;
->remove(\'self_kuid\')
          //~ if (isset(%%values%%[\'self_kuid\'])) {  // zajisteni vlozeni rucne zadaneho kuidu
            //~ %%values%%[\'idtrainz_kuid\'] = $db->insert(\'trainz_kuids\', classes\ContentValues::init(array(\'kuid\' => %%values%%[\'self_kuid\'], \'name\' => %%values%%[\'name\'][1])));
          //~ }
// opravit dotazy!!!
// kontrola duplicity na kuidy (nedestruktivni) a destruktivni kontrola loginu
var_dump(explode(PHP_EOL, $_POST[\'kuid_dependency_plain\']));
 //musi byt vlozeny nejaky cdp: %%values%%[\'cdp\'] !!!!
\'name\' => %%values%%[\'name\'][1]
//~ var_dump($crate->existDownloadsName(\'aaaaaaaaaaaaaabbbbbbbb1\'), $crate->existKuid(\'2222:222222\'));
$crate->existDownloadsName(\'aaaaaaaaaaaaaabbbbbbbb1\'),
if (!$crate->existKuid($v)) {
$id_kuid = $db->insert(\'trainz_kuids\', classes\ContentValues::init(array(\'kuid\' => $v))); // vlozi kuid
if (!$crate->existKuid($v)) {}
//~ var_dump($crate->existKuid(\'2222:222222\'), $crate->getKuidId(\'2222:22222\'));
    //~ /**
     //~ * existuje kuid? (downloads.tpl)
     //~ *
     //~ * @since 1.88
     //~ * @param string kuid vstupni kuid
     //~ * @return bool true kdyz kuid existuje
     //~ */
    //~ public function existKuid($kuid) {
      //~ $c = $this->db->query('trainz_kuids', 'idtrainz_kuid', 'kuid=?', array($kuid));
      //~ return $c->count() > 0;
    //~ }
    // validatory na duplikacni kuidy
    // validatory na duplitani nazvy
img/download/mini/
//author:|,|%%tpl__%%$data && $data->iduser > 0 ? \\\'disabled\\\' : \\\'\\\'%%__tpl%%
        //, trainz_kuids.idtrainz_kuid, trainz_kuids.kuid kuid_dependency
        //, \'idtrainz_kuid\' => array(\'kuid_dependency\')
//~ SELECT t1.rewrite, t2.rewrite, t3.rewrite, t4.rewrite, t5.rewrite
//~ FROM download_sections AS t1
//~ LEFT JOIN download_sections t2 ON t1.parent = t2.iddownload_section
//~ LEFT JOIN download_sections t3 ON t2.parent = t3.iddownload_section
//~ LEFT JOIN download_sections t4 ON t3.parent = t4.iddownload_section
//~ LEFT JOIN download_sections t5 ON t4.parent = t5.iddownload_section
//~ WHERE t1.iddownload_section = 38
SELECT t1.rewrite, t2.rewrite, t3.rewrite, t4.rewrite, t5.rewrite
FROM download_sections AS t1
LEFT JOIN download_sections AS t2 ON t2.parent = t1.iddownload_section
LEFT JOIN download_sections AS t3 ON t3.parent = t2.iddownload_section
LEFT JOIN download_sections AS t4 ON t4.parent = t3.iddownload_section
LEFT JOIN download_sections AS t5 ON t5.parent = t4.iddownload_section
WHERE t1.iddownload_section=34
SELECT t1.rewrite, t2.rewrite, t3.rewrite, t4.rewrite, t5.rewrite
FROM download_sections AS t1
LEFT JOIN download_sections AS t2 ON t2.parent = t1.iddownload_section
LEFT JOIN download_sections AS t3 ON t3.parent = t2.iddownload_section
LEFT JOIN download_sections AS t4 ON t4.parent = t3.iddownload_section
LEFT JOIN download_sections AS t5 ON t5.parent = t4.iddownload_section
WHERE t4.iddownload_section=32
//~ var_dump($v->idtrainz_cdp);
//~ $version_db[] = $v->idtrainz_cdp;
//~ $c = $db->rawQuery(\'SELECT idtrainz_cdp FROM trainz_cdp
                    //~ JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
                    //~ WHERE iddownload=?\', array(%%row_id%%))->getAllRows();

//~ foreach ($c as $v) {
  //~ $c = $db->rawQuery(\'SELECT idtrainz_kuid FROM trainz_kuids
                      //~ JOIN trainz_cdp_has_trainz_kuids USING(idtrainz_kuid)
                      //~ WHERE idtrainz_cdp=?\', array($v))->getAllRows();
  //~ var_dump($c);
  //~ $c = $db->rawQuery(\'SELECT idtrainz_version FROM trainz_versions
                      //~ JOIN trainz_cdp_has_trainz_versions USING(idtrainz_version)
                      //~ WHERE idtrainz_cdp=?\', array($v))->getAllRows();
  //~ var_dump($c);
//~ }
// EDIT dohazet funkcnost!!!! upravy!!
//~ var_dump($dat);
// cdp, version, kuid_cdp
select
    t1.parentid, t2.parentid, t3.parentid, t4.parentid, t5.parentid
from
    tableName t1
    left join tableName t2 on t1.parentid = t2.id
    left join tableName t3 on t2.parentid = t3.id
    left join tableName t4 on t3.parentid = t4.id
    left join tableName t5 on t4.parentid = t5.id
where
    t1.name = 'thing3'
//~ unset($this->rules[$name . '_' . $type]);
var_dump(!isset($this->rules[$name . '_' . $m['type']]));
          //~ if (isset($_FILES[\'cdp\'][\'name\'][0]) && $_FILES[\'cdp\'][\'name\'][0] != \'\') {
            //~ %%form_var%%->addRule(\'cdp\', \'filled\', \'musí být vyplněny CDP soubory\');
          //~ }
var_dump(classes\Core::isChrome(), classes\Core::isFirefox());
{if="classes\Core::isChrome() OR classes\Core::isFirefox()"}{/if}
{*
              <div class="download_novinka">
                <a href="#" title="stejny nazev jak nazev objektu">
                  <img src="{$weburl}download_preview1.jpg" alt="nadpis objektu 1" class="img-rounded" />
                  <em>Budova traťovky (trafostanice)</em>
                  <span>Přidáno: středa 7. srpna 2013</span>
                </a>
              </div>

              <div class="download_novinka">
                <a href="#" title="stejny nazev jak nazev objektu">
                  <img src="{$weburl}download_preview2.jpg" alt="nadpis objektu 1" class="img-rounded" />
                  <em>Budova traťovky (trafostanice) Budova traťovky (trafostanice) Budova traťovky (trafostanice) Budova traťovky (trafostanice) Budova traťovky (trafostanice) Budova traťovky (trafostanice)</em>
                  <span>Přidáno: středa 7. srpna 2013</span>
                </a>
              </div>

              <div class="download_novinka">
                <a href="#" title="stejny nazev jak nazev objektu">
                  <img src="{$weburl}download_preview3.jpg" alt="nadpis objektu 1" class="img-rounded" />
                  <em>Budova traťovky (trafostanice) Budova traťovky (trafostanice)</em>
                  <span>Přidáno: středa 7. srpna 2013</span>
                </a>
              </div>

              <div class="download_novinka">
                <a href="#" title="stejny nazev jak nazev objektu">
                  <img src="{$weburl}download_preview4.jpg" alt="nadpis objektu 1" class="img-rounded" />
                  <em>Budova traťovky (trafostanice) Budova traťovky (trafostanice) Budova traťovky (trafostanice)</em>
                  <span>Přidáno: středa 7. srpna 2013</span>
                </a>
              </div>

              <div class="download_novinka posledni">
                <a href="#" title="stejny nazev jak nazev objektu">
                  <img src="{$weburl}download_preview5.jpg" alt="nadpis objektu 1" class="img-rounded" />
                  <em>Budova traťovky (trafostanice) Budova traťovky (trafostanice) Budova traťovky (trafostanice) Budova traťovky (trafostanice)</em>
                  <span>Přidáno: středa 7. srpna 2013</span>
                </a>
              </div>
*}
(bool)preg_match('/^[0-9]+\-(.+)/', $last)
$last = implode(array_slice($uri, -1));
 //~ var_dump($id);
      //{$crate->getDownloadSectionRewrite($value, 'name')}
// doresit!!!!
  if ($crate->isDownloadObject($uri)) { // detekce objektu
    // objekt
  } else {
    // vypis
  }
rozkliknutá položka downloadu....


SELECT t1.rewrite, t2.rewrite, t3.rewrite, t4.rewrite, t5.rewrite
FROM download_sections AS t1
LEFT JOIN download_sections t2 ON t1.parent = t2.iddownload_section
LEFT JOIN download_sections t3 ON t2.parent = t3.iddownload_section
LEFT JOIN download_sections t4 ON t3.parent = t4.iddownload_section
LEFT JOIN download_sections t5 ON t4.parent = t5.iddownload_section
WHERE t1.iddownload_section = 42

select
    t1.parentid, t2.parentid, t3.parentid, t4.parentid, t5.parentid
from
    tableName t1
    left join tableName t2 on t1.parentid = t2.id
    left join tableName t3 on t2.parentid = t3.id
    left join tableName t4 on t3.parentid = t4.id
    left join tableName t5 on t4.parentid = t5.id
where
    t1.name = 'thing3'
var_dump(%%values%%, %%data%%);
var_dump(%%rows%%);exit;
// dotaz na nacteni konktretniho downaload objektu
// vytvaret zpetnym chodem path pro konkretni objekt!!! zacinat od konkretnich levelu
// metody na nacitani download objektu podle rewrite!! a opravit vypisy posledni sekce v title a drobeckove navigaci
BEGIN
	DELETE FROM trainz_cdp_has_trainz_version WHERE idtrainz_cdp=OLD.idtrainz_cdp;
END
// odladit mazani!!! mazat: trainz_cdp, trainz_cdp_has_trainz_kuids, trainz_cdp_has_trainz_versions
'refresh_url' => '%%weburl%%\'.$crate->getDownloadUrlBuildID(%%data%%[\'iddownload_section\']).\'',
//~ 'code_pre_delete' => '          $return_download_category = ;
          //~ $iddownload_section = $db->query(\'downloads\', \'iddownload_section\', \'iddownload=?\', array(%%row_id%%))->getFirst()->iddownload_section;
          //~ $return_download_category = $crate->getDownloadUrlBuildID($iddownload_section);
        //~ ',
        //~ 'refresh_url' => '%%weburl%%\'.$return_download_category.\'',
// nemaza se ale pouze deaktivuje!!!!
//->setDel(array(
//~ 'color' => 'btn-small btn-success btn-success45',

{loop="$crate->getListDownloadSection(null, \'cs\')"}
  <div class="grid_8 mws-panel mws-panel-zanoreni-0">
    <div class="mws-panel-header mws-panel-header-normal">
      <span class="nazevpolozky">%%name%%</span>
      <span class="idpolozky">#{%%id_row%%}</span>
    </div>
    <div class="mws-panel-body no-padding">
      %%description%%
      <div class="mws-button-row">
        %%links%%
      </div>
    </div>
  </div>
  {loop="$crate->getListDownloadSection($value->iddownload_section, \'cs\')"}
    <div class="grid_8 mws-panel mws-panel-zanoreni-1">
      <div class="mws-panel-header mws-panel-header-normal">
        <span class="nazevpolozky">%%name%%</span>
        <span class="idpolozky">#{%%id_row%%}</span>
      </div>
      <div class="mws-panel-body no-padding">
        %%description%%
        <div class="mws-button-row">
          %%links%%
        </div>
      </div>
    </div>
    {loop="$crate->getListDownloadSection($value->iddownload_section, \'cs\')"}
      <div class="grid_8 mws-panel mws-panel-zanoreni-2">
        <div class="mws-panel-header mws-panel-header-normal">
          <span class="nazevpolozky">%%name%%</span>
          <span class="idpolozky">#{%%id_row%%}</span>
        </div>
        <div class="mws-panel-body no-padding">
          %%description%%
          <div class="mws-button-row">
            %%links%%
          </div>
        </div>
      </div>
      {loop="$crate->getListDownloadSection($value->iddownload_section, \'cs\')"}
        <div class="grid_8 mws-panel mws-panel-zanoreni-3">
          <div class="mws-panel-header mws-panel-header-normal">
            <span class="nazevpolozky">%%name%%</span>
            <span class="idpolozky">#{%%id_row%%}</span>
          </div>
          <div class="mws-panel-body no-padding">
            %%description%%
            <div class="mws-button-row">
              %%links%%
            </div>
          </div>
        </div>
        {loop="$crate->getListDownloadSection($value->iddownload_section, \'cs\')"}
          <div class="grid_8 mws-panel mws-panel-zanoreni-4">
            <div class="mws-panel-header mws-panel-header-normal">
              <span class="nazevpolozky">%%name%%</span>
              <span class="idpolozky">#{%%id_row%%}</span>
            </div>
            <div class="mws-panel-body no-padding">
              %%description%%
              <div class="mws-button-row">
                %%links%%
              </div>
            </div>
          </div>
        {/loop}
      {/loop}
    {/loop}
  {/loop}
{emptyloop}
    <div class="grid_8 mws-panel">
      <div class="mws-panel-header mws-panel-header-normal mws-panel-header-center">
        <span>Žádná položka</span>
      </div>
    </div>
{/loop}
//~ %%rows%% += $db->delete(\'downloads_has_trainz_cdp\', \'iddownload=?\', array(%%row_id%%));  // promaznuti vazeb, aby se mohly znovu vlozit (1,N)
// pozor pri editaci pri umazavani vazeb na FK kaskadove mazani!!!
//~ foreach ($this->db->query('users', 'iduser, login, alias', null, null, null, null, 'iduser ASC') as $v) {
&nbsp;&nbsp;&nbsp;
var_dump($db->inTransaction());
//~ if (isset($_POST)) {exit;}
var_dump(preg_match(\'/-?[0-9]+:[0-9]+(?::[0-9]+)?/\', $row, $match), trim($row) == $match[0], \'.............\');
//~ var_dump($poc);
var_dump(count($explode), $poc);
var_dump($sumpoc, $poc);
return false;
$kuid_explode = ;
$kuid_explode = ;$kuid_explode
if ($v) {}
$kuid_explode = ;  // prekopat na array_filter!!!!$kuid_explode
$kuid_explode = ;$kuid_explode
if ($v) {}
if ($v) {}
var_dump(array_filter(explode(PHP_EOL, %%values%%[\'kuid_dependency_plain\'])));
$db->rollBack();exit;
;'.classes\Configurator::encode($crate->getArrayListRoles(), classes\Configurator::BLOCK).'
// pridat do section duplikovat
// prejmenovat na makeFilesName
SELECT idlanguage, COUNT(iddownload)
FROM languages_has_downloads
GROUP BY idlanguage
vyhledani polezek ktere maji chyby:

SELECT iddownload_section, COUNT(iddownload_section) FROM languages_has_download_sections
GROUP BY iddownload_section
HAVING COUNT(iddownload_section) < 3
lip:
SELECT idlanguage, COUNT(iddownload) FROM downloads
LEFT JOIN languages_has_downloads USING(iddownload)
GROUP BY idlanguage
SELECT languages.code, COUNT(idnews) pocet FROM languages_has_news
                      JOIN languages USING(idlanguage)
                      GROUP BY idlanguage
SELECT languages.code, COUNT(idlink_category) pocet FROM languages_has_links_category
                      JOIN languages USING(idlanguage)
                      GROUP BY idlanguage
  SELECT languages.code, COUNT(iddownload_section) pocet FROM languages_has_download_sections
                      JOIN languages USING(idlanguage)
                      GROUP BY idlanguage
(data_cdp_file[poc] ?  : '')
--tady je vypis objektu--  dodelat!! ;)
  {$down|print_r:true}
  // na stazeni pripocitavat +1
<input type="radio" name="options" id="option2">
<span ></span>
<input type="radio" name="options" id="option1"> <span class=""></span>
// doresit stahovani!!!
//ajaxovy pocitadlo
SELECT iddownload, idlanguage, users.login, users.alias, downloads.author, picture, polygons, visible, downloads.added, downloads.edited,
                                          languages_has_downloads.name, languages_has_downloads.description FROM downloads
                                    JOIN languages_has_downloads USING(iddownload)
                                    JOIN languages USING(idlanguage)
                                    LEFT JOIN users USING(iduser)
                                    WHERE languages.code=? AND iddownload_section=? AND downloads.deleted IS NULL
                                    ORDER BY downloads.added DESC
(SELECT GROUP_CONCAT(kuid) FROM trainz_kuids JOIN downloads_has_trainz_kuid USING(idtrainz_kuid) WHERE downloads_has_trainz_kuid.iddownload=down.iddownload) kuid_dependency
SELECT iddownload, idlanguage, users.login, users.alias, downloads.author, picture, polygons, visible, downloads.added, downloads.edited,
  languages_has_downloads.name, languages_has_downloads.description, GROUP_CONCAT(trainz_kuids.kuid SEPARATOR ', ') FROM downloads
  JOIN languages_has_downloads USING(iddownload)
  JOIN languages USING(idlanguage)
  JOIN downloads_has_trainz_kuid USING(iddownload)
  JOIN trainz_kuids USING(idtrainz_kuid)
  LEFT JOIN users USING(iduser)
  WHERE languages.code='cs' AND iddownload_section=25 AND downloads.deleted IS NULL
  ORDER BY downloads.added DESC



SELECT iddownload, idlanguage, users.login, users.alias, down.author, picture, polygons, visible, down.added, down.edited,
  languages_has_downloads.name,
  languages_has_downloads.description,
  (SELECT GROUP_CONCAT(kuid) FROM trainz_kuids JOIN downloads_has_trainz_kuid USING(idtrainz_kuid) WHERE downloads_has_trainz_kuid.iddownload=down.iddownload)
  FROM downloads AS down
  JOIN languages_has_downloads USING(iddownload)
  JOIN languages USING(idlanguage)
  LEFT JOIN users USING(iduser)
  WHERE languages.code='cs' AND iddownload_section=25 AND down.deleted IS NULL
  ORDER BY down.added DESC



SELECT iddownload, idlanguage, users.login, users.alias, downloads.author, picture, polygons, visible, downloads.added, downloads.edited,
  languages_has_downloads.name, languages_has_downloads.description FROM downloads
  JOIN languages_has_downloads USING(iddownload)
  JOIN languages USING(idlanguage)
  LEFT JOIN users USING(iduser)
  WHERE languages.code='cs' AND iddownload_section=25 AND downloads.deleted IS NULL
  ORDER BY downloads.added DESC
//~ return classes\Core::getDownloadFile('files/' . $c->path, $c->name);
//$weburl.'files/'.$c->path; //.'" class="super_href">'.$c->name.'</a>'
//~ var_dump($weburl, $c);
(navrat counteru asi do spanu.. aby se po kliknuti zobrazilo live cislo...)
{$weburl}files/{$value->path}
          //pripocita se +1 a jsonem se vrati path, name a counter
// opravit a dodelat!!!! musi vyblit spravne jmeno ulozene pod jmenem!!!!
          //~ header("Cache-Control: public");
          //~ header("Content-Description: File Transfer");
          //~ header("Content-Disposition: attachment; filename=".$c->name);
          //~ header("Content-Type: application/zip");
          //~ header("Content-Transfer-Encoding: binary");
          //~ readfile('files/' . $c->path);
// pripocitani a vraceni aktualniho cisla  + pricitani stazeni!!!!
$('.result_ajax_name').html(data);
<span class="result_ajax_name"></span>
// +1 a updatnout do DB!!!
  {if="isset($uri.block) && $uri.block == 'logout'"}

  {/if}
  {$_rev=}
  {if="isset($uri.block) && $uri.block == 'logout'"}
    {}
    {}
  {/if}
SELECT COUNT(iddownload) FROM download_sections
LEFT JOIN downloads USING(iddownload_section)
WHERE parent=27
GROUP BY iddownload
HAVING iddownload IS NOT NULL
$stpdo = $this->pdo->prepare($sql);
array_merge($content['values'], )
$result = ($stpdo->execute($whereArgs) ? $stpdo->rowCount() : 0);
      $this->checkPDOError($stpdo);
      return $result;
//~ $sql = 'DELETE FROM ' . $table . ' WHERE ' . $whereClause;
      //~ $stpdo = $this->pdo->prepare($sql);
      //~ $result = ($stpdo->execute($whereArgs) ? $stpdo->rowCount() : 0);
      //~ $this->checkPDOError($stpdo);
      //~ return $result; var_dump($code);exit;
classes\Core::setRefresh('.$this->refresh_time.', \''.$_refresh_url.'\');
'%%success_title%%',
//~ $_success_title = isset($settings['success_title']) ? $settings['success_title'] : 'Položka byla smazána.';
'code_post_delete' => '
//na tlacitko dat jeste tuto podminku!!!!
// nekonfliktni mazani!!!!
var_dump(%%rows%%);
var_dump($db->getError());
//~
exit;
        ',
<div class="mws-form-message info">%%success_title%%</div>
// domyslet dalsi...!!!!
->setExpiration('1 minutes');
$_SESSION = null;
$usr = new classes\User('prokus');
$usr->setAuthenticator(new UploadUserAuthenticator($this->db));
//~ var_dump($usr->login('pokus', 'aaaaaa')->isLoggedIn());
//~ $usr->revalidate();
//~ var_dump($usr->isLoggedIn());
$usr1 = new classes\User('ue?');
$usr1->setAuthenticator(new UploadUserAuthenticator($this->db));
//~ var_dump($usr1->login('pokus', 'aaaaaa')->isLoggedIn());
//~ $usr1->revalidate();
//~ var_dump($usr1->isLoggedIn());
var_dump($upload_user->isAllowed('home', 'show'));
    switch (isset($uri['block']) ? $uri['block'] : null) {
      case 'authorize':
        //~ var_dump('probiha autorizace');
        //poslani emailu na potvrzeni

      break;

      case 'profile':
      break;

      case 'downloads':
      break;

      case 'slideshow':
      break;

      case 'messages':
      break;

      case 'faq':
      break;
    }
//~ var_dump($_SESSION);
//~ var_dump($uri);
// menu a oddelt do vladniho menu!!
//~ var_dump($this->admin_menu->getTplAddress());
{include="'upload_'.$upload_menu->getTplAddress('_')"}
var_dump(session_save_path());
      <a href="{$weburl}upload/profile">editovat profil</a><br />
      <a href="{$weburl}upload/downloads">download objekty</a><br />
      <a href="{$weburl}upload/slideshow">slideshow</a><br />
      <a href="{$weburl}upload/messages">kominikace</a><br />
      <a href="{$weburl}upload/faq">FAQ</a><br />
//~ var_dump($this->uri);
// opravit auto logout!
  //~ var_dump($upload_uri['action']);
{/code}
{code}
<a href="{$weburl}upload/messages/send">poslat</a><br />
//~ 'ignore' => array('({ignore}|{\*)', '/{ignore}|{\*/'),
                      //~ 'ignore_close' => array('({\/ignore}|\*})', '/{\/ignore}|\*}/'),
//~ 'ternary' => array('({.[^{?]*?\?.*?\:.*?})', '/{(.[^{?]*?)\?(.*?)\:(.*?)}/'),
//~ var_dump($upload_uri);
{/*
{loop="$db->query('notifications', 'type, subject, message, added', 'to_id=?', array($upload_user->getId()))"}

{emptyloop}
  žádné notifikace
{/loop}
*/}
select: to_id
!in_array($value->'.$this->id_table.', '.var_export($_ignore, true).')
  '.$_enabled.'
if ($uri['subblock'] == 'edit') {
';

  $code .= '
  ';
}
$code .= '
// nektere veci prehazet do globalu!!!!
;'.classes\Configurator::encode($crate->getArrayListLinksCategory(), classes\Configurator::BLOCK).'
{loop="$res" as $k0 => $v0}{radio:_acltype[--%%tpl__%%$k0%%__tpl%%];none|$|checked|,|class|:|ibutton|,|data-label-on|:|&nbsp;None&nbsp;|,|data-label-off|:|&nbsp;None&nbsp;}{/loop}
{$v0->iddownload_category}-{$v1->iddownload_category}-{$v2->iddownload_category}
{$v0->iddownload_category}-{$v1->iddownload_category}
{$v0->iddownload_category}
{$v0->iddownload_category}-{$v1->iddownload_category}-{$v2->iddownload_category}-{$v3->iddownload_category}
{$v0->iddownload_category}-{$v1->iddownload_category}-{$v2->iddownload_category}-{$v3->iddownload_category}-{$v4->iddownload_category}
{$v0->iddownload_category}
{$v0->iddownload_category}-{$v1->iddownload_category}
{$v0->iddownload_category}-{$v1->iddownload_category}-{$v2->iddownload_category}
{$v0->iddownload_category}-{$v1->iddownload_category}-{$v2->iddownload_category}-{$v3->iddownload_category}
{$v0->iddownload_category}-{$v1->iddownload_category}-{$v2->iddownload_category}-{$v3->iddownload_category}-{$v4->iddownload_category}
{$v0->iddownload_category}-{$v1->iddownload_category}-{$v2->iddownload_category}-{$v3->iddownload_category}-{$v4->iddownload_category}
{if="$form->isErrors()"}
  <div class="mws-form-message error">
    Nastaly tyto chyby:
    <ul>
    {loop="$form->getErrors()"}
      <li>{$value}</li>
    {/loop}
    </ul>
  </div>
{/if}

{$msg}
{$render}


{else}

  <a href="{$weburl}upload/profile/edit">editovat</a><br />

  jenom informativni vypis<br />

  alias: {$usrdata->alias}<br />
  avatar: <img src="{$weburl}img/avatars/{$usrdata->avatar}" onerror="this.src='http://localhost/www/git/goodflow/trainz_cz/img/avatars/no-profile-img.png'"/><br />
  kuid: {$usrdata->kuid ?: '---'}<br />
  email: {$usrdata->email}<br />
  registrován: {$core::getCzechDateTime($usrdata->added)}<br />
  upraven: {$usrdata->edited ? $core::getCzechDateTime($usrdata->edited) : '---'}<br />

{/if}
// dopcic predelat na section!!!
  $form = classes\TplForm::compile($code, array('class' => 'mws-form clearfix', 'autocomplete' => 'off'))
              ->setDefaults($usrdata, array('hash'))
              ->setReturnValues($_POST, array('hash'))
              ->setAutoHide()
              ->addRule('kuid', 'pattern', 'Trainz UID musí být číslo!', '[0-9]*');
  $render = $form->render();

  $msg = null;
  $rows = 0;
  if ($form->isSuccess()) {
    $val = $form->getValues();

    if ($val['avatar']['name']) {
      $dest = 'img/avatars/' . classes\Core::makeFilesName($val['avatar']);
      classes\ImageMaker::resize($val['avatar']['tmp_name'], $dest, $global_configure['admin']['userAvatarWidth'], $global_configure['admin']['userAvatarHeight']);
      $val['avatar'] = basename($dest);
    } else {
      $val['avatar'] = $usrdata->avatar;
    }

    if (isset($val['avatar_delete'])) {  // pokud chce obrazek smazat
      $val['avatar'] = null;
    }

    $cv = classes\ContentValues::init($val)
              ->remove($form->getSubmittedBy())
              ->remove('avatar_delete')
              ->put('hash', $val['hash'] ? classes\Core::getCleverHash($val['login'], $val['hash']) : $usrdata->hash)
              ->put('alias', $val['alias'] ?: null)
              ->putDate('edited')
              ->putBool('confirmed_email', false)
              ->put('kuid', $val['kuid'] ?: null);

    do {
      if ($db->beginTransaction()) {
        $rows += $db->update('users', $cv, 'iduser=?', array($upload_user->getId()));
        $db->endTransaction();  // legalni ukonceni transakce
      }
    } while (0);  // pro vyskoceni: $db->rollBack(); break;

    if ($rows == 0) {
      $msg = 'žádná změna';
      classes\Core::setRefresh(2, $weburl.'upload/profile');
    } else
    if ($rows > 0) {
      $msg = 'upraveno';
      classes\Core::setRefresh(2, $weburl.'upload/profile');
    } else {
      $msg = 'chyba';
    }
  }
{if="isset($upload_uri['action']) && $upload_uri['action'] == 'edit'"}
// pokud bude prazdne id vratit na adresu zpet!
 isset('.$this->id_uri.') && is_numeric('.$this->id_uri.') && !in_array('.$this->id_uri.', '.var_export($_ignore, true).')
'.Tpl::compileVar($this->id_uri).'
//~ 'url' => 'edit/'.$upload_user->getId(),
->putBool(\'confirmed\', isset(%%values%%[\'confirmed\']))
                                ->putBool(\'confirmed_email\', isset(%%values%%[\'confirmed_email\']))'.($superadmin ? '->remove(\'idrole\')' : '').'
//~->addRule(\'kuid\', \'pattern\', \'Trainz UID musí být číslo!\', \'[0-9]*\')
                  //|@|minlength|:||:|6
var_dump($this->processValue($match, false, false), $this->returnVar($match['name']), $this->returnVarFromArray($match['name'], $this->defaults));
<a href="{$weburl}upload/slideshows/add">přidat</a><br />
// formular + vypis
//~ {$usrdata = $db->query('users', 'hash, alias, avatar, kuid, email, confirmed_email, added, edited', 'iduser=?', array($upload_user->getId()))->getFirst()}
SELECT idnotification, _from.login from_login, _to.login to_login, _handled.login handled_login, type, subject, message, notifications.added, notifications.deleted FROM notifications
JOIN users _from ON _from.iduser = from_id
LEFT JOIN users _to ON _to.iduser = to_id
LEFT JOIN users _handled ON _handled.iduser = handled_id
sekce Notifikace
{*
  'enabled' => $user->isAllowed($acl_resource, 'list'),
*}
    <script type="text/javascript">
      //~ alert(screen.width+'x'+screen.height+', ');
      //~ screen.width
      //~ screen.height

      //~ screen.availWidth
      //~ screen.availHeight

      //~ screen.availLeft
      //~ screen.availTop

      //~ screen.colorDepth
      //~ screen.pixelDepth
//, 'onsubmit' => 'javascript:loadHid()'
      //~ console.log(screen);
    </script>
    alert($('#hid_scr').val());//window.screen
    return false;
    //.val();document.getElementById('hid_scr').value('ahaoho');
// dajistit aby se neprepisoval description!!! via rozklikavaci polozky!!!
<script src="{$weburl}js/json2.js"></script>
//~ $('#hid_scr').val(JSON.stringify(window.screen));
      //~ var p = new Array();
      //~ p['availWidth'] = window.screen.availWidth;
 //{"availWidth":1920,"availHeight":1173,"availTop":27,"availLeft":0,"pixelDepth":24,"colorDepth":24,"width":1920,"height":1200}
    //~ alert(JSON.stringify(p));
<script>$('#hid_scr').val(JSON.stringify(window.screen));</script>

              ->setItems(\'iduser\', $crate->getArrayListUsers(), \'Autor není v seznamu\')
              ->addRule(\'author\', function($value, $argv) { return $value || $_POST[$argv]; }, \'Musí být vyplněn autor, nebo vybrán z databáze autorů!\', \'iduser\')
->put(\'author\', %%values%%[\'iduser\'] ? null : %%values%%[\'author\'])
%%values%%[\'iduser\'] ?: null
  ->putBool(\'confirmed\', true)
                            ->putBool(\'visible\', isset(%%values%%[\'visible\']))
%%form_var%%
              ->setItems(\'iduser\', $crate->getArrayListUsers(), \'Autor není v seznamu\')
              ->setAttribute(\'author\', \'disabled\', %%data%%->iduser > 0)
              ->addRule(\'author\', function($value, $argv) { return $value || $_POST[$argv]; }, \'Musí být vyplněn autor, nebo vybrán z databáze autorů!\', \'iduser\');
->put(\'iduser\', %%values%%[\'iduser\'] ?: null)
->put(\'author\', %%values%%[\'iduser\'] ? null : %%values%%[\'author\'])
->putBool(\'visible\', isset(%%values%%[\'visible\']))
   'code_post_insert' => '
        var_dump(%%row_id%%, $_cv, %%data%%, %%values%%);
        $db->rollBack();exit;
        ',
'code_post_form' => '
          //
        ',
 //~ ->put(\'to_id\', null)
//isset($admin_uri['subaction']), //' && $value->type == \'message\'', // vyresit skryvani tady toho tlacitka!!!
98798897988797
// && $admin_uri['subblock'] == 'show'&& $admin_uri['subblock'] == 'show'
  if ($admin_uri['subblock'] == ) {}
'enabled' => $admin_uri['subblock'] != 'show',
// dodelat vystaveni aktivacnich linku na aktivaci ci deaktivaci uzivatelu
// do download objektu zatahnout a akceptovat hodnotu sloupce confirmed, visible!!!
{/*
<ul>
{loop="$crate->getListNotification()"}
  <li>{$value->subject}, {$value->message} <a href="#">potvrdit vole</a> <a href="#">edit</a> <a href="#">del</a></li>
{/loop}
</ul>

 dodelat sekcni editaci atd.. pridavani bude formou odesilani posty...
*/}
    /**
     * nacteni vsech notifikaci
     *
     * @since 1.40
     * @param void
     * @return PDOCursor vysledny kurzor
     */
    public function getListNotification() {
      return $this->db->rawQuery('SELECT idnotification, from_id, to_id, handled_id, type, subject, message, deleted FROM notifications ORDER BY added DESC');
    }
   type: ({$value->type})<br />
// dokoncit sekci!!!!! (bez cropu se s tim neda nic delat!)
// doresit razeni polozek
//~ 'enabled' => $admin_uri['subblock'] == 'show',
            //~ 'global' => false,
{$value->type},
->setAdd(array(
            'url' => 'reply/%%id_row%%',
            'title' => 'Odpovědět',
            'if_link' => ' && $value->type == \'message\'',
            'enabled' => $user->isAllowed($acl_resource, 'reply'),
            'global_link' => false,
          ));
{select:to_id[]|$|class|:|mws-select2 large|,|id|:|opravneni_lb}
// tlacitka: nova
//~ var_dump($admin_uri, $admin_uri['subblock'] == 'show');
$value = $cursor;
// casem udelat i multi vyber na posilani...??
'content_values' => '->put(\'from_id\', $user->getId())
                            ->put(\'type\', \'message\')
                            ->putDate(\'added\')',
{$value->message}<br />
//~ 'title' => 'Napsat zprávu',
//~ 'success_title' => 'Zpráva byla úspěsně odeslána',
tu bude brutalni formular na brutalni zpravy adminum a uzivatelum
// reply je jednosmerna odpoved!!
    /**
     * nacteni kategorie odkazu (odkazy.tpl)
     *
     * @since 1.42
     * @param void
     * @return PDOCursor vysledny kurzor
     */
    public function getListLinksCategory() {//$crate->getListLinksCategory()
      return $this->db->rawQuery('SELECT idlink_category, languages_has_links_category.name name FROM links_category
          JOIN languages_has_links_category USING(idlink_category)
          JOIN languages USING(idlanguage)
          WHERE languages.code=?
          ORDER BY languages_has_links_category.name ASC',
        array($this->current_language));
    }
// pro pripad usetreni nekolika radku se toto muze presunout do odkazu...
{$value->message}<br />
    #notifications:
    #  name: Notifikace
    #  ikona: exclamation-sign
    #  menu:
    notifications:
      - show
      - list
      - archive
    notifications/archive:
      - show
, null, null, 'added DESC', '0, 10'
{if="$crate->getCountNotConfirmedNotification() > 0"}<span class="mws-dropdown-notif">{$crate->getCountNotConfirmedNotification()}</span>{/if}
{if="$crate->getCountNotConfirmedNotification() > 0"}<span class="mws-dropdown-notif">{$crate->getCountNotConfirmedNotification()}</span>{/if}
<span class="mws-dropdown-notif">35</span>
|,|onclick|:|javascript:loadHid()
($v0->url == 'notifications' OR
$crate->getCountNotConfirmedNotification() > 0
$crate->getCountNotConfirmedNotification()
// poladit nazvy respektive udelat univerzalnejsi?????
    /**
     * nacteni poctu nepotvrzenych polozek (a:menu.tpl, a:index.tpl)
     *
     * @deprecated
     * @since 1.38
     * @param void
     * @return int pocet polozek
     */
    public function getCountNotConfirmedNotification() {
      return $this->db->query('notifications', 'COUNT(idnotification) pocet', 'handled_id IS NULL')->getFirst()->pocet;
    }
sekce soukrome zpravy
NotConfirmed
    //~ /**
     //~ * nacteni nepotvrzenych notifikaci (a:index.tpl)
     //~ *
     //~ * @since 1.38
     //~ * @param void
     //~ * @return PDOCursor vysledny kurzor
     //~ */
    //~ public function getListNotConfirmedNotification() {
      //~ return $this->db->query('notifications', 'idnotification, type, added', 'handled_id IS NULL', null, null, null, 'added DESC', '0, 10');
    //~ }
PDOCursor vysledny kurzor
'registration'
<li>
                <a href="#">
                  <span class="sender">John Doe</span>
                  <span class="message">
                    Lorem ipsum dolor sit amet
                  </span>
                  <span class="time">
                    January 21, 2012
                  </span>
                </a>
              </li>
              <li>
                <a href="#">
                  <span class="sender">John Doe</span>
                  <span class="message">
                    Lorem ipsum dolor sit amet
                  </span>
                  <span class="time">
                    January 21, 2012
                  </span>
                </a>
              </li>
  $acl->setResources($resources);
$_res = array();
          foreach ($resources as $k_resources => $v_resources) {
            $_res[] = $k_resources;
          }
 $acl->setResources(array_keys($resources));
var_dump($acl)%%values%%, ;
var_dump($acl);exit;
// upravit pristupy jen na prohlizece Chrome a Firefox
'enabled' => $user->isAllowed($acl_resource, 'list'),
,array('var' => array('upload_menu'))
$crate->tpl->assign('crate', $crate);
      #menu:
      #  category:
      #    name: Kategorie
    #languages:
    #  name: Jazyky
    #  ikona: globe
'section' => 'classes\Section',
'tplform' => 'classes\TplForm',
'content' => 'classes\ContentValues',
'paginator' => 'classes\Paginator',
//~ if ($crate->cache->isCached()) {
      //~ echo $crate->cache->getContents();
    //~ } else {
      //~ $crate->cache->start();

  //~ $crate->cache->end();
    //~ }
    //~ echo classes\Debugger::viewTime();
    //~ classes\Debugger::startTime();
{include="upload_menu"}
var_dump(is_numeric($v));
    #links/category:
    #  - show
    #languages:
    #  - show
switch ($admin_uri['subblock']) {
  default:
    $sekce

  break;

  case 'new':
    $sekce

  break;
}
// hodnoty zanest do konfiguratoru! -> konfigurator API do gui klikatka


SELECT downloads.iddownload, users.login, users.alias, author, rewrite, picture, polygons, downloads.added, downloads.edited,
GROUP_CONCAT(DISTINCT trainz_versions.name SEPARATOR ', ') versions,
languages_has_downloads.name,
languages_has_downloads.description
FROM downloads
LEFT JOIN users USING(iduser)
JOIN languages_has_downloads USING(iddownload)
JOIN downloads_has_trainz_cdp USING(iddownload)
JOIN trainz_cdp USING(idtrainz_cdp)
LEFT JOIN trainz_cdp_has_trainz_versions USING(idtrainz_cdp)
LEFT JOIN trainz_versions USING(idtrainz_version)
JOIN languages USING(idlanguage)
WHERE downloads.deleted IS NULL AND downloads.confirmed=1 AND downloads.visible=1 AND languages.code='cs' AND downloads.iddownload_category=25
GROUP BY downloads.iddownload




      SELECT iddownload, iduser, author, rewrite, picture, languages_has_downloads.name FROM downloads
                                  JOIN languages_has_downloads USING(iddownload)
                                  JOIN languages USING(idlanguage)
                                  WHERE downloads.deleted IS NULL AND confirmed=1 AND visible=1 AND languages.code=? AND iddownload_category=?

SELECT downloads.iddownload, users.login, users.alias, author, rewrite, picture, polygons, downloads.added, downloads.edited,
GROUP_CONCAT(DISTINCT trainz_versions.name SEPARATOR ', ') versions,
languages_has_downloads.name,
languages_has_downloads.description
FROM downloads
LEFT JOIN users USING(iduser)
JOIN languages_has_downloads USING(iddownload)
JOIN downloads_has_trainz_cdp USING(iddownload)
JOIN trainz_cdp USING(idtrainz_cdp)
LEFT JOIN trainz_cdp_has_trainz_versions USING(idtrainz_cdp)
LEFT JOIN trainz_versions USING(idtrainz_version)
JOIN languages USING(idlanguage)
WHERE downloads.deleted IS NULL AND downloads.confirmed=1 AND downloads.visible=1 AND languages.code='cs' AND downloads.iddownload_category=25
GROUP BY downloads.iddownload
{ ? ''..'' : null}
GROUP_CONCAT
//~ '/[a-z0-9\d]/' => '$0',  // propusteni indexu 0
//~ var_dump(preg_match_all('/[a-z0-9- ]+/', $repl, $m), implode($m[0]));
//<a href="javascript:confirmUser('.$id_user.')">SCHVALIT</a> <a href="{$weburl_admin}users/del/'.$id_user.'">ZAMITNOUT</a>
// doimplementovat!!! (zrejme update)
// jeste nejak dodelat????
// rozkategorizovat!!!!!
array_values($values['name'])
//~ 'argv_form_compile' => array('admin_uri', 'crate', 'translate'),
            //~ $c = $db->query('languages_has_downloads_category JOIN languages USING(idlanguage)', 'languages.code', 'languages_has_downloads_category.name IN (?,?,?)', $array_values);
//~ var_dump($cX);
//var_dump(classes\Core::getRewrite($values['name'][1]));->getAll()classes\Core::getRewrite($values['name'][1])
//~ $c = $db->query('languages_has_downloads_category JOIN languages USING(idlanguage)', 'languages.code', 'languages_has_downloads_category.name IN (?,?,?) AND iddownload_category!=?', array_merge($array_values, array($_POST['id'])));
var_dump($c);
//~ 'argv_form_compile' => array('uri', 'crate', 'translate'),
   <a href="#" id="mws-form-dialog-mdl-btn" class="btn btn-success">Show Modal Form</a>
// doimplementovat!!! (zrejme update)
//GREAT EST(added, edited) DESC
ORDER BY IF(edited > added, edited, added) DESC
//~ var patr = /\-?[0-9]+\:[0-9]+(\:[0-9]+)?/;
{$core::getReplaceText($core::trimParagraphs($value->description, 1), array('/<\/?[a-zA-Z"= ]+>/' => ''))}
{$value->description}
{$core::getReplaceText('<p> sadsad asd asdsad sa</p>', array('//' => 'x'))}
// dopsat!!!!
//rozlisovani podle typu
//~ var_dump($value, intval($_POST['id']));
//upraveni nofifikace nako smazane a vlozeni state hlasky do notifikace, vlozeni data smazano a vyrizeni na false
//~ var_dump($c, intval($c->from_id));
        //~ ->setUpdate(array(
            //~ 'url' => 'deactivate',
            //~ 'enabled' => $user->isAllowed($acl_resource, 'deactivate'),
            //~ 'title' => 'Zamítnout',
            //~ 'question' => 'Opravdu DEaktivovat?',
            //~ 'content_values' => '->putDate(\'deleted\')
                                //~ ->put(\'handled_id\', $user->getId())',
            //~ 'code_post_update' => '
              //~ var_dump(%%row_id%%);
//~ // domyslet a dodelat!!!!
              //~ $db->rollBack(); exit;
            //~ ',
          //~ ));
      //~ ->setList(array(
            //~ 'url' => 'show',
            //~ 'query' => '$db->rawQuery(\'SELECT %%table_id%%, type, subject, message, added FROM %%table%%
                                        //~ WHERE %%table_id%%=?\', array(%%action_id%%))',
            //~ 'name' => '{$value->subject}',
            //~ 'description' => '
                //~ --toto je rozkliknuta zprava--
              //~ message: {$value->message}<br />
              //~ added {$core::getCzechDateTime($value->added)}<br />
            //~ ',
          //~ ))
        //~ ->setUpdate(array(
            //~ 'title' => 'Potvrdit',
            //~ 'question' => 'Opravtu potvrdit?',
          //~ ))
        //~ ->setUpdate(array(  // u potvrzeni registrace se archivuje sama po potvrzeni???
            //~ 'url' => 'archive',
            //~ 'title' => 'Archivovat zprávu',
            //~ 'question' => 'Opravdu de má zpráva archivovat?',
            //~ 'if_link' => ' && $value->type != \'message\'',
            //~ 'enabled' => $user->isAllowed($acl_resource, 'archive'),
            //~ 'content_values' => '->putDate(\'deleted\')->put(\'handled_id\', $user->getId())',
          //~ ))
          /// tlacitka: nova
//~ var_dump($admin_uri, $admin_uri['subblock'] == 'show');
//~ var_dump($admin_uri);
// prekopat a upravit!!!/~ ;
'enabled' => $user->isAllowed($acl_resource, 'list'),
// zdrojovy kod formulare
$code = '
{select:to_id|$|class|:|mws-select2 large|,|id|:|opravneni_lb}

{text:subject|$|maxlength|:|100|,|placeholder|:|Předmět}

{textarea:message|$|placeholder|:|Zpráva}

<div class="mws-button-row">
  %%submit%%
</div>';
//~ ->setFormCode($code, array('class' => 'mws-form', 'autocomplete' => 'off'), array('admin_uri'));
LEFT JOIN users _to ON _to.iduser = to_id_to.login to_login,
 if ($to) {  // pokud je prijemce definovany
        $cv;
      }
LEFT JOIN users _handled ON _handled.iduser = handled_id
vyrizeno kym: {$value->handled_login}<br />
 _handled.login handled_login,
type: ({$value->type})<br />
 to: {$value->to_login}<br />
//JOIN users _from ON _from.iduser = from_id
 from_login
,
                                          _id.login id_login
JOIN users _from ON _from.iduser = from_id
from (login): {$value->from_login}<br />
//: INSERT INTO `trainz-cz`.`notifications` (`idnotification`, `from_id`, `to_id`, `handled_id`, `type`, `subject`, `message`, `added`, `deleted`, `state`, `state_id`, `state_msg`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
type: ({$value->type})<br />
vyrizeno kym: {$value->handled_login}<br />
LEFT JOIN users _handled ON _handled.iduser = handled_id
 _handled.login handled_login,
 to: {$value->to_login}<br />
 // osetrovat stav pokud uzivatel uz neexistuje!
$state_id = $db->query(\'%%table%%\', \'state_id\', \'%%table_id%%=?\', array(%%row_id%%))->getFirst()->state_id;

              var_dump($state_id);
              $db->rollBack();
              exit;
//~ $from_id = $db->query(\'%%table%%\', \'from_id\', \'%%table_id%%=?\', array(%%row_id%%))->getFirst()->from_id;  // osetrovat stav pokud uzivatel uz neexistuje!
 // opravit podle user new!!!
//~ $db->update(\'users\', classes\ContentValues::init()->put(\'confirmed\', true), \'iduser=?\', array($from_id)); // potvrzeni atele
 $db->rollBack();
              exit;
var_dump(%%rows%%);
var_dump(%%rows%%);
JOIN languages_has_downloads USING(iddownload)
{code}
$f = '/files/' . $cdp->path;
var_dump($f, $core::getFileSize($f));
{/code}
//console.log(data);
// pres session drzet posledniho kdo to stahovatal!!! at se tam nikdo nehraje!!!
$global_configure['download']['sessionExpire']
//~ $ses->setExpiration($global_configure['download']['sessionExpire']);  // expirace dle nastaveni
          var_dump($ses);


SELECT kuid, trainz_kuids.name kuid_name, trainz_cdp.name cdp_name FROM trainz_kuids
JOIN downloads_has_trainz_kuid USING(idtrainz_kuid)
JOIN trainz_cdp_has_trainz_kuids USING(idtrainz_kuid)
JOIN trainz_cdp USING(idtrainz_cdp)
WHERE iddownload=44
GROUP BY idtrainz_cdp
-----------------
-524:441:5487	NULL	829708-firefox-chrome.png
-456:68756	NULL	explorer__firefox__chrome_and_opera_by_excelhensgg...
-456:68756	NULL	chrome_vs_firefox.jpg
-524:441:5487	NULL	TCZ_bum.doc
---------------

SELECT kuid, name FROM trainz_kuids
JOIN downloads_has_trainz_kuid USING(idtrainz_kuid)
WHERE iddownload=44
---------------
-3:101282
988:9999	uuuuuuuuuu
-456:68756	NULL
-524:441:5487	NULL
-123456:6998:1
--------------

SELECT kuid, trainz_kuids.name, idtrainz_cdp, trainz_cdp.name cdp_name FROM trainz_kuids
JOIN downloads_has_trainz_kuid USING(idtrainz_kuid)
LEFT JOIN trainz_cdp_has_trainz_kuids USING(idtrainz_kuid)
LEFT JOIN trainz_cdp USING(idtrainz_cdp)
WHERE iddownload=44
GROUP BY idtrainz_kuid
----------------
-3:101282		NULL	NULL
988:9999	uuuuuuuuuu	NULL	NULL
-456:68756	NULL	37	explorer__firefox__chrome_and_opera_by_excelhensgg...
-524:441:5487	NULL	35	829708-firefox-chrome.png
-123456:6998:1		NULL	NULL
---------------
SELECT kuid, name FROM trainz_kuids
JOIN downloads_has_trainz_kuid USING(idtrainz_kuid)
WHERE iddownload=?
//~ $ses->remove();
//~ var_dump(date('d.m.Y H:i:s', $ses->getExpirationTime()));
console.log(data);

SELECT idtrainz_kuid, kuid, name FROM trainz_kuids ORDER BY CAST(kuid AS DECIMAL) ASC, kuid ASC

SELECT idtrainz_kuid, kuid, trainz_kuids.name, trainz_cdp.name cdp_name FROM trainz_kuids
LEFT JOIN downloads_has_trainz_kuid USING(idtrainz_kuid)
LEFT JOIN trainz_cdp_has_trainz_kuids USING(idtrainz_kuid)
LEFT JOIN trainz_cdp USING(idtrainz_cdp)
GROUP BY idtrainz_kuid
ORDER BY CAST(kuid AS DECIMAL) ASC, kuid ASC

$this->db->query('trainz_kuids', 'idtrainz_kuid, kuid, name', null, null, null, null, 'CAST(kuid AS DECIMAL) ASC, kuid ASC')
var_dump($this->db->query('trainz_kuids', 'idtrainz_kuid, kuid, name', null, null, null, null, 'CAST(kuid AS DECIMAL) ASC, kuid ASC'));

SELECT kuid, trainz_kuids.name, url, idtrainz_cdp, trainz_cdp.name cdp_name, trainz_cdp.path cdp_path FROM trainz_kuids
                        JOIN downloads_has_trainz_kuid USING(idtrainz_kuid)
                        LEFT JOIN trainz_cdp_has_trainz_kuids USING(idtrainz_kuid)
                        LEFT JOIN trainz_cdp USING(idtrainz_cdp)
                        WHERE iddownload=44
                        GROUP BY idtrainz_kuid
                        ORDER BY CAST(kuid AS DECIMAL) ASC, kuid ASC
 var_dump($kuid, substr_count($kuid, ':'));
      //'&lsaquo;'.(count(explode(':', $v->kuid)) == 2 ? 'kuid' : 'kuid2').':'.$v->kuid.'&rsaquo;'.
      //
return null;
'&lsaquo;'.(count(explode(':', $v->kuid)) == 2 ? 'kuid' : 'kuid2').':'.$v->kuid.'&rsaquo;'
{$e = count(explode(\':\', $value->kuid))}&lt;{$e == 2 ? \'kuid\' : \'kuid2\'}:{$value->kuid}&gt;
$('#navigation-treeview').treeview({persist: "location",animated: "fast",collapsed: true,unique: false});$(".download-img-fancy").fancybox({helpers: {title: {type: 'inside'},overlay: {speedOut: 0}}});

      $("#navigation-treeview").treeview({
          persist: "location",
          animated: "fast",
          collapsed: true,
          unique: false
      });
      $(".download-img-fancy").fancybox({
        helpers: {
          title: {
            type: 'inside'
          },
          overlay: {
            speedOut: 0
          }
        }
      });
    //~ if (!$iddownload_list) {
      //~ classes\Core::setLocation($weburl);
      //~ exit;
    //~ }
SELECT downloads.iddownload, users.login, users.alias, author, rewrite, iddownload_category, picture, polygons, downloads.added, downloads.edited,
                                  GROUP_CONCAT(DISTINCT trainz_versions.name ORDER BY trainz_versions.name SEPARATOR \', \') versions,
                                  languages_has_downloads.name, languages_has_downloads.description
                                FROM downloads
                                LEFT JOIN users USING(iduser)
                                JOIN downloads_has_trainz_cdp USING(iddownload)
                                JOIN trainz_cdp USING(idtrainz_cdp)
                                LEFT JOIN trainz_cdp_has_trainz_versions USING(idtrainz_cdp)
                                LEFT JOIN trainz_versions USING(idtrainz_version)
                                JOIN languages_has_downloads USING(iddownload)
                                JOIN languages USING(idlanguage)
                                WHERE downloads.deleted IS NULL AND downloads.confirmed=1 AND downloads.visible=1 AND languages.code=? AND downloads.iddownload=?
                                GROUP BY downloads.iddownload
  verze:
    {loop="$db->rawQuery('SELECT name FROM trainz_versions
                          JOIN trainz_cdp_has_trainz_versions USING(idtrainz_version)
                          WHERE idtrainz_cdp=?', array($cdp->idtrainz_cdp))"}
      verze: {$value->name}<br />
    {emptyloop}
      žádvé verze
    {/loop}
!isset($ses->$id) || (isset($ses->$id) &&
 je nedefinovano nebo kdyz je tak z jine IP

<div id="mws-form-dialog">

        <div id="mws-validate-error" class="mws-form-message error" style="display:none;"></div>
        <div class="mws-form-inline">
            <div class="mws-form-row">
                <label class="mws-form-label">Duvod zamítnutí</label>
                <div class="mws-form-item">
                    <textarea name="state_msg" id="state_msg"></textarea>
                </div>
            </div>

        </div>

<a href="javascript:archiveNotification({$value->idnotification}, \'#state_msg\', \'.ajax_ret\')">odeslat</a>
/
<a href="#">zrušit</a>
<span class="ajax_ret"></span>
<br />

// nevim jak skrývat, tazke po kliknuti odeslat nebo zrusit si predstavis ze toto okno zmyzlo! a kliknes na [X]
</div>
//~ ->setLink(array(
            //~ 'title' => 'Zamítnout',
            //~ 'enabled' => $user->isAllowed($acl_resource, 'deactivate'),
            //~ 'link' => '<a href="#" id="mws-form-dialog-mdl-btn" class="btn btn-success">Zamítnout</a>',
        //~ ));
    function archiveNotification(id, state_msg, ret) {
      $.post('{$weburl}ajax.php', {'type': 'notification', 'value': $(state_msg).serialize(), 'id': id}, function(data) {
        $(ret).html(data);
      });
      return false;
    }
        case 'notification':  // zpracovani notifikaci (deaktivace)
          parse_str(urldecode($_POST['value']), $value);

          $state_msg = $value['state_msg'];
          $result = null;
          if ($db->beginTransaction() && $user->isLoggedIn()) {
            $id = intval($_POST['id']);
            $c = $db->query('notifications', 'idnotification, type, state_id', 'deleted IS NULL AND idnotification=?', array($id))->getFirst(); // nacteni konkretni notifikace
            if ($c) { // pokud je co vybirat
              switch ($c->type) { // rozlisovani podle typu
                case self::TYPE_REGISTRATION: // schalovani uzivatelu
                  $cv = classes\ContentValues::init()
                      ->put('handled_id', $user->getId())
                      ->putDate('deleted')
                      ->put('state', false)
                      ->put('state_msg', $state_msg);
                  $db->update('notifications', $cv, 'idnotification=?', array($id));  // uprava notifikace

                  $iduser = intval($c->state_id);

                  $email = new classes\Emailer(classes\Emailer::HTML);
                  $email->addTo($db->query('users', 'email', 'iduser=?', array($iduser))->getFirst()->email)  // nacteni emailu
                        ->setFrom('admin@trainz.cz')
                        ->setSubject('Registrace do autorské sekce Trainz.cz')
                        ->setMessageArgs('Dobrý den,<br /><br />Vaše žádost o registraci do autorské sekce Trainz.cz byla zamítnuta s důvodem: <br /><br /><br />Děkujeme za Vaši registraci.<br />--<br />Trainz.cz', $state_msg ?: "-- nevyplněno --")
                        ->send();

                  $db->delete('users', 'iduser=?', array($iduser)); // odmazani

                  $result = 'uloženo a posláno!';
                break;  // na uzivatelske sekci pak musi uselt resresh pryc!!!

                case self::TYPE_DOWNLOAD: // dopsat dalsi!!!
                case self::TYPE_SLIDESHOW:
                case self::TYPE_MESSAGE:
                break;
              }
            } else {
              $result = 'už není co upravovat uživatel neexistuje a zpráva je archivovaná!';
            }
            $db->endTransaction();  // legalni ukonceni transakce
          }

          return $result;
        case 'notification':  // zpracovani notifikaci (deaktivace)
          parse_str(urldecode($_POST['value']), $value);

          $state_msg = $value['state_msg'];
          $result = null;
          if ($db->beginTransaction() && $user->isLoggedIn()) {
            $id = intval($_POST['id']);
            $c = $db->query('notifications', 'idnotification, type, state_id', 'deleted IS NULL AND idnotification=?', array($id))->getFirst(); // nacteni konkretni notifikace
            if ($c) { // pokud je co vybirat
              switch ($c->type) { // rozlisovani podle typu
                case self::TYPE_REGISTRATION: // schalovani uzivatelu
                  $cv = classes\ContentValues::init()
                      ->put('handled_id', $user->getId())
                      ->putDate('deleted')
                      ->put('state', false)
                      ->put('state_msg', $state_msg);
                  $db->update('notifications', $cv, 'idnotification=?', array($id));  // uprava notifikace

                  $iduser = intval($c->state_id);

                  $email = new classes\Emailer(classes\Emailer::HTML);
                  $email->addTo($db->query('users', 'email', 'iduser=?', array($iduser))->getFirst()->email)  // nacteni emailu
                        ->setFrom('admin@trainz.cz')
                        ->setSubject('Registrace do autorské sekce Trainz.cz')
                        ->setMessageArgs('Dobrý den,<br /><br />Vaše žádost o registraci do autorské sekce Trainz.cz byla zamítnuta s důvodem: <br /><br /><br />Děkujeme za Vaši registraci.<br />--<br />Trainz.cz', $state_msg ?: "-- nevyplněno --")
                        ->send();

                  $db->delete('users', 'iduser=?', array($iduser)); // odmazani

                  $result = 'uloženo a posláno!';
                break;  // na uzivatelske sekci pak musi uselt resresh pryc!!!

                case self::TYPE_DOWNLOAD: // dopsat dalsi!!!
                case self::TYPE_SLIDESHOW:
                case self::TYPE_MESSAGE:
                break;
              }
            } else {
              $result = 'už není co upravovat uživatel neexistuje a zpráva je archivovaná!';
            }
            $db->endTransaction();  // legalni ukonceni transakce
          }

          return $result;
'global_link' => false,
            'link' => '<a href="%%weburl%%deactivate/{$admin_uri[\'id\']}" class="btn btn-success btn-success45">%%title%%</a>',
//~ $iduser
var_dump($iduser);
                $db->rollBack();
                exit;
$iduser = ;
<div id="mws-form-dialog">

        <div id="mws-validate-error" class="mws-form-message error" style="display:none;"></div>
        <div class="mws-form-inline">
            <div class="mws-form-row">
                <label class="mws-form-label">Duvod zamítnutí</label>
                <div class="mws-form-item">
                    <textarea name="state_msg" id="state_msg"></textarea>
                </div>
            </div>

        </div>

<a href="javascript:archiveNotification({$value->idnotification}, \'#state_msg\', \'.ajax_ret\')">odeslat</a>
/
<a href="#">zrušit</a>
<span class="ajax_ret"></span>
<br />

// nevim jak skrývat, tazke po kliknuti odeslat nebo zrusit si predstavis ze toto okno zmyzlo! a kliknes na [X]
</div>
// ...pri uprave ni se zdulikuje polozoka a bude se pak zobrazovat porovnavani mezi puvodni a novou!
        ->setLink(array(
            //~ 'title' => 'Zamítnout',
            'enabled' => $user->isAllowed($acl_resource, 'deactivate'),
            'link' => '<a href="#" id="mws-form-dialog-mdl-btn" class="btn btn-success">Zamítnout</a>',
          ));
//~ 'url' => '%%weburl%%slideshows/edit/{$value->state_id}',  // url v section je kryplovky koncipovane!!!!
javascript:downloadCDP({$cdp->idtrainz_cdp}, '.class_counter')
return javascript:downloadCDP({$value->idtrainz_cdp}, null)
//~ $db->query('downloads', 'iddownload', 'iduser=?', array($user->iduser), null, null, 'added DESC');
//$db->query('downloads', 'iddownload', 'author=?', array($uri['login']), null, null, 'added DESC');
//~ var_dump($admin_uri[\'id\']);
// doresit posilani notifikace!! nejde se sem dotat pokud nejsou dostupne konkretni skripty a styly! momentalne neposila!!!
    $alias = $upload_user->getData('alias');
    if ( &&  == '') {  // predelat na $crate->upload_uri !!!!  at je to vsude stejne!!
 if ($crate->upload_uri)
    }
<td class="td_kuid">{$crate::formatKuid($value->kuid)}</td>
  {if="$value->url && !$value->idtrainz_cdp"}
  <td>[<a href="{$value->url}">externí odkaz</a>]
  {else}
  <td>{$value->name ?: null}{if="!$value->idtrainz_cdp"}{$value->name ? ' - [neznámé umístění]' : '[neznámý]'}{/if}
  {/if}
  {if="$value->idtrainz_cdp"}[<a href="#" onclick="return downloadCDP({$value->idtrainz_cdp}, null)" title="{$value->cdp_name}">{$value->cdp_name}</a>] <em>({$core::getFileSize('files/' . $value->cdp_path)})</em>{/if}
$_SERVER['HTTP_USER_AGENT']
 // slozit "kryptovanou adresu"
$_SERVER['REQUEST_TIME'],
//~ confirmed
//~ ->confirmed_email
// tady dodelat posilani emailu a aktivaci profilu, po potvrzeni se to presmeruje sem!!!!
//~ var_dump($upload_menu, $crate->upload_menu);
//~ var_dump($upload_menu);
//~ $upload_uri = $crate->upload_uri;
//~ var_dump($upload_user->getData('login'));
//~ var_dump($upload_user->getId());
// poslat email jako upozorneni!!! a vzit si tu z vrchu ID uzivatele!!!!!
// dochytat podminky editace a jiz pri aktivnim && viditelnem objektu!!!!
 // po vozeni do tadulky
//vezme ID: %%row_id%% a to vlozi do notifikace!!!
//~ 'content_values' => '->putDate(\'edited\')',  // dodelat!!!!
 // jak ma byt mazani??? resp asi zadost o mazani ne?
'name' => '{$crate->getMsgTypeNotification($value->type)}',
Content-type: text/html; charset=UTF-8
Content-Type: text/html; charset=ISO-8859-2
new classes\Emailer(classes\Emailer::HTML, 'ISO-8859-2');
// vnutit 3 parametr o ID notifikace?! a pak to az tam schvalit
else {
              //
            }
exit;

// nacte notifikaci, pokud bude definováno: state_new_id (to by melo byt predane ID, tu upravi), a state_id smaze a notifikaci archivuje!!!!!
var_dump($notif_id, $c);
// nacist data z konktetni slideshow a vlozit to jako duplikatni polozku!! ++rozsirit notifikace o sloupce OLD/NEW a pak se do notifikace zatahne stare ID (toto) a nove ktere se vlozi ted!
// test jestli musi byt?!

SELECT idslideshow, confirmed, visible, path, description, slideshows.added, edited
FROM slideshows
LEFT JOIN notifications ON idslideshow=state_id
WHERE iduser=6
ORDER BY added ASC

SELECT * FROM slideshows
LEFT JOIN notifications ON idslideshow=state_id
WHERE iduser=6
ORDER BY slideshows.added ASC

SELECT * FROM slideshows
LEFT JOIN notifications ON idslideshow=state_id
WHERE iduser=6 AND idslideshow!=state_new_id
ORDER BY slideshows.added ASC
# musi mit GUI nastavbu!!!
var_dump($c->state_new_id, $ss);
$db->rollBack();
exit;
{code}//<?

$sekce = classes\Section::build($weburl_admin.'archive/', '$admin_uri.subblock', '$admin_uri.subaction');
$sekce
    ->setTable('notifications', 'idnotification')
    ->setRefreshTime($global_configure['admin']['sectionRefreshTime'])
    //~ ->setFormCode($code, array('class' => 'mws-form', 'autocomplete' => 'off'), array('admin_uri'))
    ->setList(array(
        ''
        'query' => '$db->rawQuery(\'SELECT idnotification,
                                      _from.login from_login,
                                      _to.login to_login,
                                      _handled.login handled_login,
                                      type, subject, message, %%table%%.added, %%table%%.deleted,
                                      state, state_msg
                                    FROM %%table%%
                                    LEFT JOIN users _from ON _from.iduser = from_id
                                    LEFT JOIN users _to ON _to.iduser = to_id
                                    LEFT JOIN users _handled ON _handled.iduser = handled_id
                                    WHERE %%table%%.deleted IS NOT NULL AND type=?
                                    ORDER BY %%table%%.deleted DESC\', array($crate::TYPE_REGISTRATION))',
        'name' => '{$crate->getMsgTypeNotification($value->type)}',
        'description' => '
          from: {$value->from_login}<br />
          to: {$value->to_login}<br />
          handled: {$value->handled_login} (vyrizeno kym)<br />
          type: ({$value->type})<br />
          subject: {$value->subject}<br />
          message: {$value->message}<br />
          added {$core::getCzechDateTime($value->added)}<br />
          deleted {$core::getCzechDateTime($value->deleted)}<br />
          stav: {$value->state === "1" ? \'v poradku\' : null}
                {$value->state === "0" ? \'v neporadku\' : null}
                {$value->state === null ? \'žádný stav!?\' : null}<br />
          text stavu: {$value->state_msg}
        ',
      ))
    ->setList(array(
        'query' => '$db->rawQuery(\'SELECT idnotification,
                                      _from.login from_login,
                                      _to.login to_login,
                                      _handled.login handled_login,
                                      type, subject, message, %%table%%.added, %%table%%.deleted,
                                      state, state_msg
                                    FROM %%table%%
                                    LEFT JOIN users _from ON _from.iduser = from_id
                                    LEFT JOIN users _to ON _to.iduser = to_id
                                    LEFT JOIN users _handled ON _handled.iduser = handled_id
                                    WHERE %%table%%.deleted IS NOT NULL AND type=?
                                    ORDER BY %%table%%.deleted DESC\', array($crate::TYPE_MESSAGE))',
        'name' => '{$crate->getMsgTypeNotification($value->type)}',
        'description' => '
          from: {$value->from_login}<br />
          to: {$value->to_login}<br />
          handled: {$value->handled_login} (vyrizeno kym)<br />
          type: ({$value->type})<br />
          subject: {$value->subject}<br />
          message: {$value->message}<br />
          added {$core::getCzechDateTime($value->added)}<br />
          deleted {$core::getCzechDateTime($value->deleted)}<br />
          stav: {$value->state === "1" ? \'v poradku\' : null}
                {$value->state === "0" ? \'v neporadku\' : null}
                {$value->state === null ? \'žádný stav!?\' : null}<br />
          text stavu: {$value->state_msg}
        ',
      ));
{/code}

{compile="$sekce->render()"}
classes\Core::getReplaceText(classes\Core::trimParagraphs($value->description, 1), array('/<\/?[a-zA-Z"= ]+>/' => ''))
{code}$t = classes\Core::getReplaceText(classes\Core::trimParagraphs($value->description, 1), array('/<\/?[a-zA-Z"= ]+>/' => ''));{/code}{$t}
{code}$t = classes\Core::getReplaceText(classes\Core::trimParagraphs($value->description, 1), array('/<\/?[a-zA-Z"= ]+>/' => ''));{/code}{$t}
{code}$t = classes\Core::getReplaceText(classes\Core::trimParagraphs($value->description, 1), array('/<\/?[a-zA-Z"= ]+>/' => ''));{/code}{$t}
{$a=array($current_language, '%' . $search . '%')}{$a|var_dump}
, array($current_language, '%' . $search . '%')
  var_dump();
neděle 8. září 2013
{$db->query('users', 'added', 'iduser=?', array($crate->upload_user->getId()))->getFirst()->added}
//~ $usrdata = $db->query('users', 'hash, alias, avatar, kuid, email, confirmed_email, added, edited', 'iduser=?', array($upload_user->getId()))->getFirst();
($core::isFirefox() OR $core::isChrome() )
{code}
  $script = urldecode($menu->getVariable('extern_js'));
{/code}
{$script}
LEFT JOIN notifications ON idslideshow=state_id
%%action_id%%


SELECT idnotification, type, subject, message, notifications.added, state_id,
_from.login,
_id.duplicate,
_id.path, _id.description,
_new.description new_description
FROM notifications
JOIN users _from ON _from.iduser=from_id
JOIN slideshows _id ON _id.idslideshow=state_id
LEFT JOIN slideshows _new ON _id.duplicate=_new.idslideshow
WHERE notifications.deleted IS NULL AND type='slideshow' AND idnotification=38

SELECT idnotification, type, subject, message, notifications.added, state_id,
_from.login,
_id.duplicate,
_id.path, _id.description,
_old.description old_description
FROM notifications
JOIN users _from ON _from.iduser=from_id
JOIN slideshows _id ON _id.idslideshow=state_id
LEFT JOIN slideshows _old ON _old.idslideshow=_id.duplicate
WHERE notifications.deleted IS NULL AND type='slideshow' AND idnotification=40


SELECT slideshows.idslideshow, slideshows.duplicate, slideshows.confirmed, slideshows.visible, slideshows.path, slideshows.description, slideshows.added, slideshows.edited FROM slideshows
LEFT JOIN slideshows _new ON slideshows.duplicate=_new.idslideshow
WHERE slideshows.iduser=6
ORDER BY slideshows.visible DESC, slideshows.confirmed DESC, slideshows.added DESC


SELECT idslideshow, duplicate, confirmed, visible, path, description, slideshows.added, edited FROM slideshows
WHERE iduser=6

SELECT idslideshow FROM slideshows WHERE duplicate IS NOT NULL AND iduser=6

SELECT idslideshow, duplicate, confirmed, visible, path, description, slideshows.added, edited FROM slideshows
WHERE iduser=6 AND idslideshow NOT IN (SELECT duplicate FROM slideshows WHERE duplicate IS NOT NULL AND iduser=6)

LEFT JOIN notifications _id ON _id.state_id = idslideshow

SELECT idslideshow, confirmed, visible, path, description, slideshows.added, edited, state_new_id FROM slideshows
LEFT JOIN notifications ON state_id=idslideshow
WHERE iduser=6

SELECT idslideshow, confirmed, visible, path, description, slideshows.added, edited, state_id, state_new_id FROM slideshows
LEFT JOIN notifications ON state_id=idslideshow
WHERE iduser=6

->put(\'duplicate\', %%action_id%%)

SELECT idslideshow, confirmed, visible, path, description, s0.added, edited, state_id, state_new_id FROM slideshows s0
LEFT JOIN notifications ON state_id=idslideshow
WHERE iduser=6 AND idslideshow NOT IN (SELECT state_new_id FROM notifications WHERE state_new_id IS NOT NULL AND from_id=s0.iduser)

state_new_id IS NOT NULL AND
schvalit (stary se smaze), OK
editovat a schvalit (novy se upravy a stary smaze), OK
zamitnout (novy se smaze) OK
?'.$admin_uri['id'].'
$ss = $db->query(\'slideshows\', \'iduser, description\', \'idslideshow=?\', array($c->state_id))->getFirst();

// vzit si na hledacek stav kdy se potvrzuje nebo zamita aktualizace!  se nikde nesmi nechat zanesene duplikatni ID!!!
                if ($c->state_old_id) {
                  // aktualizovane
                  $db->delete(\'slideshows\', \'idslideshow=?\', array($c->state_id)); // odmazani stareho
                } else {
                  // nove
                }
var_dump($c->state_id, $c->state_old_id);
$db->rollBack();
exit;
$value->state_old_id ?:
var_dump($notif_id);

$db->rollBack();
exit;

upload sekce ---autorizovaný požadavek---
//~ ->setDefaults(array(\'iddownload_category\' => %%action_id%%))
->addRule(\'author\', function($value, $argv) { return $value || $_POST[$argv]; }, \'Musí být vyplněn autor, nebo vybrán z databáze autorů!\', \'iduser\')
//~ %%values%%[\'name\'][2] = %%values%%[\'name\'][1] . \' - en\';
          //~ %%values%%[\'name\'][3] = %%values%%[\'name\'][1] . \' - de\';
 ->put(\'iduser\', $)
var_dump(%%row_id%%, %%values%%, $_cv);

// uzivatel dela pouze ceskou varianu, admin bude mit v notifikcich jen upravit a schvalit NEBO zamitnout!!
// u prekladu smelit <= vzit ceskou variantu a tu soupnout do ostatnich jazyku a s tim ze se pripose EN / DE

$db->rollBack();
exit;

SELECT idnotification, type, subject, message, notifications.added, state_id, state_old_id,
_from.login,
_id.name, _old.name,
_id.description, _old.description old_description
FROM notifications
JOIN users _from ON _from.iduser=from_id

JOIN downloads _id ON _id.iddownload=state_id
LEFT JOIN downloads _old ON _old.iddownload=state_old_id

JOIN languages_has_downloads USING(iddownload)
JOIN languages USING(idlanguage)
WHERE notifications.deleted IS NULL AND languages.code=? AND type=? AND idnotification=?





upravit!!!!!!!!!

SELECT idnotification, type, subject, message, notifications.added, state_id, state_old_id,
_from.login,
_idlandhas.name, _oldlanghas.name,
_idlandhas.description, _oldlanghas.description old_description
FROM notifications
JOIN users _from ON _from.iduser=from_id

JOIN downloads _id ON _id.iddownload=state_id
LEFT JOIN downloads _old ON _old.iddownload=state_old_id

JOIN languages_has_downloads _idlandhas ON _idlandhas.iddownload=_id.iddownload
LEFT JOIN languages_has_downloads _oldlanghas ON _oldlanghas.iddownload=_old.iddownload

JOIN languages _idlang ON _idlang.idlanguage=_idlandhas.idlanguage
LEFT JOIN languages _oldlang ON _oldlang.idlanguage=_oldlanghas.idlanguage

WHERE notifications.deleted IS NULL AND _idlang.code='cs' AND type='download' AND idnotification=8

SELECT %%table_id%%, type, subject, message, %%table%%.added, state_id, state_old_id,
                                          _from.login,
                                          _id.name, _old.name,
                                         _id.description, _old.description old_description
                                        FROM %%table%%
                                        JOIN users _from ON _from.iduser=from_id

                                        JOIN downloads _id ON _id.iddownload=state_id
                                        LEFT JOIN downloads _old ON _old.iddownload=state_old_id

                                        JOIN languages_has_downloads USING(iddownload)
                                        JOIN languages USING(idlanguage)
                                        WHERE %%table%%.deleted IS NULL AND languages.code=? AND type=? AND %%table_id%%=?
-- JOIN downloads_category _idcategory ON _idcategory.iddownload=_id.iddownload_category
-- _idlangcategory.idlanguage=_idlang.idlanguage AND
  <div class="mws-form-row">
    <label class="mws-form-label" for="tuid_lb">Trainz UID</label>
    <div class="mws-form-item">
      <div class="small">
        {text:kuid|$|maxlength|:|10|,|class|:|large jenom-cisla|,|id|:|tuid_lb}
      </div>
    </div>
  </div>
kuid,
            <div class="sloupec info_blok_s">
              <table>
                <tr>
                  <td class="key">Trainz UID</td>
                  <td class="val">{$value->kuid ?: \'-- nevyplněno --\'}</td>
                </tr>
              </table>
            </div>

              ->addRule(\'kuid\', \'pattern\', \'Trainz UID musí být číslo!\', \'[0-9]*\')

                            ->put(\'kuid\', %%values%%[\'kuid\'] ?: null)

              ->addRule(\'kuid\', \'pattern\', \'Trainz UID musí být číslo!\', \'[0-9]*\')

                            ->put(\'kuid\', %%values%%[\'kuid\'] ?: null)
.''
var_dump($c);
$db->rollBack();
exit;
// pripadne poserit lepsi generovani jazyku?!
// napevno urceno jazykem!
          %%values%%[\'name\'] = array( // naplneni nazvu
              1 => %%values%%[\'name\'][1],
              2 => %%values%%[\'name\'][1] . \' - en\',
              3 => %%values%%[\'name\'][1] . \' - de\',
            );


          %%values%%[\'description\'] = array(  // naplneni popisku
              1 => %%values%%[\'description\'][1],
              2 => %%values%%[\'description\'][1],
              3 => %%values%%[\'description\'][1],
            );
//~ %%data%% = array(\'path\' => $ss->path, \'description\' => $ss->description);
// dopsat!!!
//~ var_dump($do);
            //~ var_dump(%%action_id%%);
// nacteni hodnot do dormulare!!!!
//~ var_dump($do);
//~ exit;
 // dokoncit sekci!!!! tedal hlavne funkcne!!
    // nacteni jazyku, kuidu, cdp a zavislosti!!!
            // z indexu vyhodit PHP bloky!! ktere tam nemji co delat! protoze prima editace se nikdy nedela!!!!! ty bloky patri sem!!!!
 AND _oldlang.idlanguage=_idlang.idlanguage)

SELECT idtrainz_cdp, name, path FROM trainz_cdp
JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
WHERE iddownload=86

|,|onkeyup|:|checkDownloadsName(\\\'.result_ajax_name\\\', this.value, '.$v->idlanguage.')
var_dump($value_id, );
// SELECT languages.code FROM languages_has_downloads JOIN languages USING(idlanguage) WHERE languages_has_downloads.name IN (?,?,?)
            // opravit na toto: SELECT idlanguage FROM languages_has_downloads WHERE idlanguage=1 AND name='sdfdsf'
             v jazyku ' . $translate['lang_code'][$r->code] . '
//~ $c = $db->query('languages_has_downloads JOIN languages USING(idlanguage)', 'languages.code', 'languages_has_downloads.name IN (?,?,?)', array_values($values['name']));
// kontrola proti ostatnim jazykum (+nesmi akceptovat mezery)
          $count_values = array_count_values($values['name']);
          if (!isset($count_values['']) && count($values['name']) != count($count_values)) {
            $flip = array_flip($count_values);  // flipnuti poctu a indexu
            $dupl = (isset($flip[2]) ? $flip[2] : null).(isset($flip[3]) ? $flip[3] : null);
            $result[] = '<strong><em>'.$dupl.'</em> již existuje v jiném jazyku!</strong>';
          }0
// predelat!!
            //~ $c = $db->query('languages_has_downloads JOIN languages USING(idlanguage)', 'languages.code', 'languages_has_downloads.name IN (?,?,?) AND iddownload!=?', array_merge(array_values($values['name']), array(intval($_POST['id']))));
//~ $cv = classes\ContentValues::init()
                    //~ ->put(\'idlanguage\', $i)
                    //~ ->put(\'iddownload\', %%row_id%%)
                    //~ ->put(\'name\', $v)
                    //~ ->put(\'description\', %%values%%[\'description\'][$i]);
            //~ if ($db->insert(\'languages_has_downloads\', $cv) < 0) {
              //~ %%row_id%% = -1;
              //~ $db->rollBack();
              //~ break(2);
            //~ }
var_dump(%%row_id%%);
$db->rollBack();
exit;
// udelat kontrolu duplicity na prp urovni pro jednotlive jazyky!!
%%values%%[\'name\'][1] = \'ggggg\';
%%values%%[\'name\'][2] = \'sdfsdf cs\';
$db->rollBack();
exit;
var_dump($db->query(\'languages_has_downloads\', \'COUNT(idlanguage) pocet\', \'idlanguage=? AND name=? AND iddownload!=?\', array($i, $v, %%row_id%%))->getFirst()->pocet);
//~ $expl[0] $expl = explode('::', $this->processValue($match, false, false)); //url :: nazev odkazu.$expl[1].

if ($db->query(\'languages_has_downloads\', \'COUNT(idlanguage) pocet\', \'idlanguage=? AND name=?\', array($i, $v))->getFirst()->pocet == 0) {  // pokud neexistuje (0.pocet radku)

SELECT idslideshow, confirmed, visible, path, description, s0.added, edited, state_old_id FROM slideshows s0
LEFT JOIN notifications ON state_id=idslideshow
WHERE iduser=6 AND idslideshow NOT IN (SELECT state_old_id FROM notifications WHERE state_old_id IS NOT NULL AND from_id=s0.iduser)



-- _idlang.code=? AND _oldlang.code=? AND

-- JOIN languages_has_downloads _idlangdown ON _idlangdown.iddownload=_id.iddownload
-- LEFT JOIN languages_has_downloads _oldlangdown ON _oldlangdown.iddownload=_old.iddownload

-- JOIN languages _idlang ON _idlang.idlanguage=_idlangdown.idlanguage
-- LEFT JOIN languages _oldlang ON (_oldlang.idlanguage=_oldlangdown.idlanguage AND _oldlang.code=_idlang.code)

-- JOIN languages_has_downloads_category _idlangcategory ON (_idlangcategory.iddownload_category=_id.iddownload_category AND _idlangcategory.idlanguage=_idlang.idlanguage)
-- LEFT JOIN languages_has_downloads_category _oldlangcategory ON (_oldlangcategory.iddownload_category=_old.iddownload_category AND _oldlangcategory.idlanguage=_oldlang.idlanguage AND _oldlang.code=_idlang.code)


-- _idlangdown.name, _oldlangdown.name old_name,
-- _idlangdown.description, _oldlangdown.description old_description,
-- _idlangcategory.name category, _oldlangcategory.name old_category,

//\'cs\', \'cs\',
var_dump($db->query(\'languages_has_downloads\', \'COUNT(idlanguage) pocet\', \'idlanguage=? AND name=? AND iddownload!=?\', array($i, $v, %%action_id%%))->getFirst()->pocet);
$db->rollBack();
exit;
->putDate(\'edited\')
<a href="{$weburl}files/'+data_cdp_file[poc].path+'"
, path
// poresit dotaz na porovnavani a spojovat spravne radky!!!!! pri jazykach!!
<h1>// dodelat vypisi jazyku natvrdo z databaze!!!! loopen tady!!!!!!!!!!!!!!!!</h1>7
// kontrola duplicity vuci konkretnimu jazyku + duplicitu hlidat na urovni php!!!!
// OR $value->state_old_id)',
$poc += $db->rawQuery('DELETE FROM lastlogins
WHERE idlastlogin IN (SELECT * FROM (SELECT idlastlogin FROM lastlogins WHERE added <= (CURDATE() - INTERVAL 7 DAY)) as s)');
// globalizovat!!!!!
// prekopat!!!! a dotaz zjednodisit!!!! tu podminku na datum dat rovnou!!!!idlastlogin IN (SELECT idlastlogin FROM (SELECT idlastlogin FROM lastlogins WHERE ) AS s)
-- ON _category.iddownload_category=iddownload
-- ON (_languages.idlanguage=languages_has_downloads.idlanguage AND _languages.idlanguage=_category.idlanguage)
SEM / PRIJDE / KATEGORIE


SELECT iddownload, author, picture, polygons, confirmed, visible, d0.added, edited,
languages_has_downloads.name, languages_has_downloads.description, languages_has_downloads_category.name category, state_old_id
FROM downloads d0
LEFT JOIN notifications ON state_id=iddownload
JOIN languages_has_downloads USING(iddownload)
JOIN languages_has_downloads_category USING(iddownload_category, idlanguage)
JOIN languages USING(idlanguage)
WHERE d0.deleted IS NULL AND languages.code='cs' AND iduser=1 AND iddownload NOT IN (SELECT state_old_id FROM notifications WHERE deleted IS NULL AND state_old_id IS NOT NULL AND from_id=d0.iduser)

OR !$value->state_old_id)

SELECT *
FROM downloads d0
LEFT JOIN notifications ON state_id=iddownload
JOIN languages_has_downloads USING(iddownload)
JOIN languages_has_downloads_category USING(iddownload_category, idlanguage)
JOIN languages USING(idlanguage)
WHERE d0.deleted IS NULL AND languages.code='cs' AND iduser=1 AND state IS NULL

//~ 'argv_form_compile' => array('admin_uri', 'crate', 'translate'),
//~ 'argv_form_compile' => array('admin_uri', 'crate', 'translate'),
else {
                  // pridani
                  %%rows%% += $db->update(\'slideshows\', classes\ContentValues::init()->put(\'confirmed\', true), \'idslideshow=?\', array($c->state_id)); // potvrzeni
                }
//~ $crate->addNotification($user->getId(), $c->from_id, $crate::TYPE_DOWNLOAD, null, null, \'informace o downloadu\', \'download vám byl smazán downlaod s duvodem: \'.(%%values%%[\'state_msg\'] ?: \'-- nevyplněno --\'));
//~ $crate->addNotification($user->getId(), $c->from_id, $crate::TYPE_SLIDESHOW, null, null, \'informace o slideshow\', \'slideshow vám byl smazán slideshow: "\'.$c->description.\'" s duvodem: \'.(%%values%%[\'state_msg\'] ?: \'-- nevyplněno --\'));
// vlozi se taky state_msg
// vlozi se taky state_msg
// opravit dotaz!!!! maximelne zjednodusit!!!!!!
// opravit dotaz!!!!! musi vyhazovat duplikatne starou polozku!!!!!
// select s vyberem skupin adminu kterym bude moci uzivatel psat!!!!
// opravit dotaz!!!!! musi vyhazovat duplikatne starou polozku!!!!!
// udelat mazani???
//~ $this->forceIterate($this);
      //~ if ($inherit) {
        //~ $all = array_map(function($v) {
          //~ return $v['js'];
        //~ }, $this->array_address);
        //~ $result = array();
        //~ foreach ($all as $v) {
          //~ if ($v) {
            //~ $result = array_merge_recursive($result, (array) $v);
          //~ }
        //~ }
      //~ } else {
        //~ $result = (array) $this->array_address[$this->last_address]['js'];
      //~ }
return $result;
$this->forceIterate($this);
      $pole = (array) $this->array_address[$this->last_address]['css'];
      $result = $this->_getVar('css', $inherit);
      return $section ? (isset($pole[$section]) ? $pole[$section] : null) : $pole;
sl.confirmed,
function downloadCDP(id, ret, reckon) {
        $.post(weburl+'ajax.php', {'type': 'download_cdp', 'id': id, 'reckon': reckon}, function(data) {
          var jdata = jQuery.parseJSON(data);
          if (ret) {
            $(ret+id).html(jdata.counter+'x');
          }
          window.location = weburl+'down.php?name='+jdata.name+'&path='+jdata.path;
        });
        return false;
      }
{$menu->getVariable('extern_js')|urldecode}
{if="isset($uri['page']) && $uri['page'] == 'upload'"}{/if}
->setUpdate(array(  // poladit tlacitka pri aktualizaci zaznamu!!!!
            'url' => 'activate',
            'enabled' => $user->isAllowed($acl_resource, 'activate'),
            'title' => 'Schválit',
            'question' => 'Opravdu aktivovat?',
            'content_values' => '->put(\'handled_id\', $user->getId())
                                ->putDate(\'deleted\')
                                ->put(\'state\', true)',
            'code_post_update' => '
              // vytazeni id z notifikaci
              $c = $db->rawQuery(\'SELECT state_id, state_old_id FROM %%table%%
                                  JOIN slideshows ON idslideshow=state_id
                                  WHERE %%table_id%%=?\', array(%%row_id%%))->getFirst();
              if ($c) { // overeni existence
                if ($c->state_old_id) {
                  //aktualizace
                  %%rows%% += $db->delete(\'slideshows\', \'idslideshow=?\', array($c->state_old_id));  // stary smaze
                }
                %%rows%% += $db->update(\'slideshows\', classes\ContentValues::init()->put(\'confirmed\', true), \'idslideshow=?\', array($c->state_id)); // novy potvrdi
              }
            ',
          ))
#- ++++%24%28function%28%29+%7B%0A++++++%24%28%27.jenom-cisla%27%29.numberMask%28%29%3B%0A%0A++++++%24%28%27.kuid_input%27%29.numberMask%28%7Bpattern%3A%2F%5E%5B%5C-0-9%5C%3A%5D%2B%24%2F%7D%29%3B%0A%0A++++++initValidation%28%29%3B%0A%0A++++++%24%28%27.kuid_input%27%29.keyup%28function%28%29+%7B%0A++++++++%24%28%27.kuid_format%27%29.html%28typKuidu%28this.value%29+%2B+%27+%3Cem%3E%26rarr%3B%3C%2Fem%3E+%27%2B+%28isKuid%28this.value%29+%3F+%27%3Ci+class%3D%22icon-ok-sign%22%3E%3C%2Fi%3E%27+%3A+%27%3Ci+class%3D%22icon-remove-sign%22%3E%3C%2Fi%3E%27%29%29%3B%0A++++++%7D%29%3B%0A%0A++++++var+data_cdp_file+%3D+%7B%24cdp_file%7D%3B%0A++++++var+data_version+%3D+%7B%24version%7D%3B%0A++++++var+data_kuid_cdp+%3D+%7B%24kuid_cdp%7D%3B%0A++++++var+data_kuid_cdp_plain+%3D+%7B%24kuid_cdp_plain%7D%3B%0A%0A++++++var+poc+%3D+0%3B%0A++++++function+addCDP%28%29+%7B%0A++++++++%24%28%27.download_cdp%27%29.append%28%27%3Cdiv+class%3D%22row%27%2Bpoc%2B%27+file_oddil%22%3E%3Cul+class%3D%22list-group%22%3E%27%2B%0A++++++++++%27%3Cli+class%3D%22panel-heading+clearfix%22%3EOdd%C3%ADl+%23%27%2B%28poc+%2B+1%29+%2B+%28poc+%3E+0+%3F+%27%3Ca+href%3D%22javascript%3AremoveCDP%28%27%2Bpoc%2B%27%29%22+class%3D%22btn+btn-primary+btn-xs+pull-right+odebrat_oddil%22%3E%3Ci+class%3D%22icon-remove-sign%22%3E%3C%2Fi%3E+Odebrat+Odd%C3%ADl+%23%27%2B%28poc+%2B+1%29%2B%27%3C%2Fa%3E%27+%3A+%27%27%29+%2B+%27%3C%2Fli%3E%27%2B%0A++++++++++%27%3Cli+class%3D%22list-group-item%22%3E%27%2B%0A++++++++++++%27%3Cdiv+class%3D%22form-group%22%3E%27%2B%0A++++++++++++++%27%3Clabel+class%3D%22col-lg-2+control-label%22%3ESoubor%3C%2Flabel%3E%27%2B%0A++++++++++++++%27%3Cdiv+class%3D%22col-lg-10%22%3E%27%2B%0A++++++++++++++++%27%3Cinput+type%3D%22file%22+name%3D%22cdp%5B%27%2Bpoc%2B%27%5D%22+id%3D%22soubor%27%2Bpoc%2B%27%22+class%3D%22filestyle%22+%2F%3E%27%2B%0A++++++++++++++++%27%3Cspan+class%3D%22help-block%22%3EPovinn%C3%A9+pole.+Zde+vlo%C5%BEte+soubor+%28%2A.cdp%2C+%2A.zip%2C+%2A.rar%2C+apod.%29%3C%2Fspan%3E%27%2B%0A++++++++++++++%27%3C%2Fdiv%3E%27%2B%0A++++++++++++%27%3C%2Fdiv%3E%27%2B%0A++++++++++++%28data_cdp_file%5Bpoc%5D+%3F%0A++++++++++++%27%3Cdiv+class%3D%22form-group%22%3E%27%2B%0A++++++++++++++%27%3Clabel+class%3D%22col-lg-2+control-label%22%3ENahran%C3%BD+soubor%3C%2Flabel%3E%27%2B%0A++++++++++++++%27%3Cdiv+class%3D%22col-lg-10%22%3E%27%2B%0A++++++++++++++++%27%3Ca+href%3D%22%23%22+onclick%3D%22return+downloadCDP%28%27%2Bdata_cdp_file%5Bpoc%5D.idtrainz_cdp%2B%27%2C+null%2C+false%29%22+class%3D%22btn+btn-default%22%3E%27%2Bdata_cdp_file%5Bpoc%5D.name%2B%27%3C%2Fa%3E%27%2B%0A++++++++++++++++%27%3Cspan+class%3D%22help-block%22%3EZde+m%C5%AF%C5%BEete+st%C3%A1hnout+aktu%C3%A1ln%C4%9B+p%C5%99i%C5%99azen%C3%BD+soubor.%3C%2Fspan%3E%27%2B%0A++++++++++++++%27%3C%2Fdiv%3E%27%2B%0A++++++++++++%27%3C%2Fdiv%3E%27+%3A+%27%27%29%2B%0A++++++++++++%27%3Cdiv+class%3D%22form-group%22%3E%27%2B%0A++++++++++++++%27%3Clabel+class%3D%22col-lg-2+control-label%22%3ETrainz+verze%3C%2Flabel%3E%27%2B%0A++++++++++++++%27%3Cdiv+class%3D%22col-lg-10%22%3E%27%2B%0A++++++++++++++++%27%3Cselect+name%3D%22version%5B%27%2Bpoc%2B%27%5D%5B%5D%22+class%3D%22upload-select2%22+multiple%3E%7Bloop%3D%22%24crate-%3EgetArrayListTrainzVersion%28%29%22%7D%3Coption+value%3D%22%7B%24key%7D%22%27%2B%28in_array%28%7B%24key%7D%2C+data_version%5Bpoc%5D%29+%3F+%27+selected%27+%3A+%27%27%29%2B%27%3E%7B%24value%7D%3C%2Foption%3E%7B%2Floop%7D%3C%2Fselect%3E%27%2B%0A++++++++++++++++%27%3Cspan+class%3D%22help-block%22%3EZde+m%C5%AF%C5%BEete+vybrat+neomezen%C3%BD+po%C4%8Det+Trainz+verz%C3%AD+z+datab%C3%A1ze.%3C%2Fspan%3E%27%2B%0A++++++++++++++%27%3C%2Fdiv%3E%27%2B%0A++++++++++++%27%3C%2Fdiv%3E%27%2B%0A++++++++++++%27%3Cdiv+class%3D%22form-group%22%3E%27%2B%0A++++++++++++++%27%3Clabel+class%3D%22col-lg-2+control-label%22%3EKuid+%28datab%C3%A1ze%29%3C%2Flabel%3E%27%2B%0A++++++++++++++%27%3Cdiv+class%3D%22col-lg-10%22%3E%27%2B%0A++++++++++++++++%27%3Cselect+name%3D%22kuid_cdp%5B%27%2Bpoc%2B%27%5D%5B%5D%22+class%3D%22upload-select2%22+multiple%3E%7Bloop%3D%22%24crate-%3EgetArrayListTrainzKuids%28%29%22%7D%3Coption+value%3D%22%7B%24key%7D%22%27%2B%28in_array%28%7B%24key%7D%2C+data_kuid_cdp%5Bpoc%5D%29+%3F+%27+selected%27+%3A+%27%27%29%2B%27%3E%7B%24value%7D%3C%2Foption%3E%7B%2Floop%7D%3C%2Fselect%3E%27%2B%0A++++++++++++++++%27%3Cspan+class%3D%22help-block%22%3EZde+m%C5%AF%C5%BEete+vybrat+neomezen%C3%BD+po%C4%8Det+kuid%C5%AF+z+datab%C3%A1ze.%3C%2Fspan%3E%27%2B%0A++++++++++++++%27%3C%2Fdiv%3E%27%2B%0A++++++++++++%27%3C%2Fdiv%3E%27%2B%0A++++++++++++%27%3Cdiv+class%3D%22form-group+posledni-form-group%22%3E%27%2B%0A++++++++++++++%27%3Clabel+class%3D%22col-lg-2+control-label%22%3EKuid+%28p%C5%99idat+nov%C3%BD%29%3C%2Flabel%3E%27%2B%0A++++++++++++++%27%3Cdiv+class%3D%22col-lg-10+clearfix%22%3E%27%2B%0A++++++++++++++++%27%3Ctextarea+name%3D%22kuid_cdp_plain%5B%27%2Bpoc%2B%27%5D%22+class%3D%22kuid_input_plain+defined-265+autosize+form-control%22+onkeyup%3D%22javascript%3AvalidateKuid%28this.value%2C+%5C%27.kuid_dyn_kontrola_%27%2Bpoc%2B%27%5C%27%29%22+placeholder%3D%22xxxxx%3Ayyyyy%28%3Azzz%29%22%3E%27%2B%28data_kuid_cdp_plain%5Bpoc%5D+%3F+data_kuid_cdp_plain%5Bpoc%5D+%3A+%27%27%29%2B%27%3C%2Ftextarea%3E%3Cdiv+class%3D%22kuid_dyn_kontrola_%27%2Bpoc%2B%27+custom-label-2+defined-265%22%3EForm%C3%A1t%3A+%26lt%3Bkuid%282%29%3A%28-%29xxxxx%3Ayyyyy%28%3Azzz%29%26gt%3B%3C%2Fdiv%3E%27%2B%0A++++++++++++++++%27%3Cspan+class%3D%22help-block+clrb%22%3EZde+m%C5%AF%C5%BEete+zadat+neomezen%C3%BD+po%C4%8Det+kuid%C5%AF.+Ka%C5%BEd%C3%BD+nov%C3%BD+kuid+mus%C3%AD+b%C3%BDt+na+nov%C3%A9m+%C5%99%C3%A1dku%21%3Cbr+%2F%3EPr%C3%A1zdn%C3%A9+%C5%99%C3%A1dky+se+vyhodnocuj%C3%AD+jako+%C5%A1patn%C3%A9+zad%C3%A1n%C3%AD%21%3Cbr+%2F%3EKuid+mus%C3%AD+m%C3%ADt+spr%C3%A1vn%C3%BD+form%C3%A1t%21+Pouze+%C4%8D%C3%ADsla%2C+dvojte%C4%8Dky+a+m%C3%ADnusy%21%3Cul%3E%3Cli%3E%3Cem%3Exxxxx%3Ayyyyy%3C%2Fem%3E+pro+%3Cem%3E%26lt%3Bkuid%3Axxxxx%3Ayyyyy%26gt%3B%3C%2Fem%3E%3C%2Fli%3E%3Cli%3E%3Cem%3Exxxxx%3Ayyyyy%3Azzz%3C%2Fem%3E+pro+%3Cem%3E%26lt%3Bkuid2%3Axxxxx%3Ayyyyy%3Azzz%26gt%3B%3C%2Fem%3E%3C%2Fli%3E%3C%2Ful%3E%3C%2Fspan%3E%27%2B%0A++++++++++++++%27%3C%2Fdiv%3E%27%2B%0A++++++++++++%27%3C%2Fdiv%3E%27%2B%0A++++++++++%27%3C%2Fli%3E%27%2B%0A++++++++%27%3C%2Ful%3E%27%2B%0A++++++%27%3C%2Fdiv%3E%27%29%3B%0A+++++++++poc%2B%2B%3B%0A+++++++++initValidation%28%29%3B%0A%0A++++++++%24%28%22%3Afile%22%29.filestyle%28%7BbuttonText%3A+%22Vybrat+soubor%22%2C+classButton%3A+%22btn+btn-primary%22%2C+classInput%3A+%22form-control+btn-file%22%7D%29%3B%0A%0A++++++++%24%28%22select.upload-select2%22%29.select2%28%29%3B%0A++++++%7D%0A%0A++++++%24%28%27.add_cdp%27%29.click%28function%28%29+%7B++%2F%2F+nabindovani+hrefu+na+funkci%0A++++++++addCDP%28%29%3B%0A++++++++%24.jGrowl%28%22Byl+p%C5%99id%C3%A1n+Odd%C3%ADl+%23%22%2Bpoc%2B%22%21%22%2C+%7Bposition%3A+%27bottom-right%27%7D%29%3B%0A++++++++return+false%3B%0A++++++%7D%29%3B%0A%0A++++++if+%28data_version.length+%3D%3D+0%29+%7B+%2F%2F+pridani+jedne+cdp+polozky%0A++++++++addCDP%28%29%3B%0A++++++%7D%0A%0A++++++for+%28var+k+in+data_version%29+%7B+%2F%2F+naklikani+podle+vracenych+poctu%0A++++++++addCDP%28%29%3B%0A++++++%7D%0A%0A++++++%24%28%27.ajax_downloads_name%27%29.keyup%28function%28%29+%7B++%2F%2F+ajax+kontrola+download+duplicity%0A++++++++var+patr+%3D+%2F%5B0-9%5D%7B1%7D%2F%3B%0A++++++++var+m+%3D+patr.exec%28%24%28this%29.attr%28%27name%27%29%29%3B++%2F%2F+identifikace+jednotlivych+indexu+elementu%0A++++++++%24.post%28%27%7B%24weburl%7Dajax.php%27%2C+%7B%27type%27%3A+%27unique_download_name%27%2C+%27value%27%3A+%24%28%27.ajax_downloads_name%27%29.serialize%28%29%2C+%27value_id%27%3A+m%5B0%5D%2C+%27act%27%3A+%27%7Bif%3D%22isset%28%24upload_uri.action%29%22%7D%7B%24upload_uri.action+%3F%3A+%27null%27%7D%7Belse%7Dnull%7B%2Fif%7D%27%2C+%27id%27%3A+%7Bif%3D%22isset%28%24upload_uri.id%29%22%7D%7B%24upload_uri.id+%3F%3A+%27null%27%7D%7Belse%7Dnull%7B%2Fif%7D%7D%2C+function%28data%29+%7B%0A++++++++++%24%28%27.result_ajax_name%27%2Bm%5B0%5D%29.html%28data%29%3B%0A++++++++%7D%29%3B%0A++++++%7D%29%3B%0A++++%7D%29%3B
- ++++%24%28%22.upload-img-fancy%22%29.fancybox%28%7B%0A++++++helpers%3A+%7B%0A++++++++title%3A+%7B%0A++++++++++type%3A+%27inside%27%0A++++++++%7D%2C%0A++++++++overlay%3A+%7B%0A++++++++++speedOut%3A+0%0A++++++++%7D%0A++++++%7D%0A++++%7D%29%3B
- ++++%24%28%22.upload-img-fancy%22%29.fancybox%28%7B%0A++++++helpers%3A+%7B%0A++++++++title%3A+%7B%0A++++++++++type%3A+%27inside%27%0A++++++++%7D%2C%0A++++++++overlay%3A+%7B%0A++++++++++speedOut%3A+0%0A++++++++%7D%0A++++++%7D%0A++++%7D%29%3B
- ++++tinymce.init%28%7B%0A++++++selector%3A+%22.obal_upload_sekce+.obal_upload_download+textarea.tiny-upload%22%2C%0A++++++language%3A+%27cs%27%2C%0A++++++autoresize_on_init%3A+false%2C%0A++++++autoresize_bottom_margin%3A+15%2C%0A++++++autoresize_min_height%3A+200%2C%0A++++++autoresize_max_height%3A+500%2C%0A++++++height%3A+200%2C%0A++++++menubar%3A+false%2C%0A++++++resize%3A+true%2C%0A++++++paste_as_text%3A+true%2C%0A++++++++plugins%3A+%5B%0A++++++++++%22advlist+autolink+lists+link+preview+wordcount+autoresize+contextmenu+paste%22%0A++++++++%5D%2C%0A++++++toolbar%3A+%22undo+redo+%7C+bold+italic+underline+strikethrough+superscript+subscript+%7C+bullist+numlist+outdent+indent+%7C+preview%22%2C%0A++++++contextmenu%3A+%22undo+redo+%7C+link+removeformat%22%0A++++%7D%29%3B
->putDate(\'edited\')

SELECT idslideshow, confirmed, visible, path, description, s0.added, edited, state_old_id
FROM slideshows s0
LEFT JOIN notifications ON (state_id=idslideshow AND notifications.deleted IS NULL)
WHERE iduser=1  AND idslideshow NOT IN (SELECT state_old_id FROM notifications WHERE state_old_id IS NOT NULL AND from_id=s0.iduser)


SELECT idslideshow, confirmed, visible, path, description, s0.added, edited, state_old_id
FROM slideshows s0
LEFT JOIN notifications ON state_id=idslideshow
WHERE iduser=1  AND idslideshow NOT IN (SELECT state_old_id FROM notifications WHERE deleted IS NULL AND from_id=s0.iduser)
LEFT JOIN notifications ON (state_id=idslideshow AND notifications.type='slideshow')
(SELECT state_old_id FROM notifications WHERE state_old_id IS NOT NULL AND deleted IS NULL AND from_id=s0.iduser)

SELECT idslideshow, confirmed, visible, path, description, s0.added, edited, state_old_id
FROM slideshows s0
LEFT JOIN notifications ON (state_id=idslideshow AND notifications.type='slideshow')
WHERE iduser=1 AND idslideshow NOT IN (SELECT state_old_id FROM notifications WHERE state_old_id IS NOT NULL AND deleted IS NULL AND from_id=s0.iduser)

 AND idslideshow NOT IN (SELECT state_old_id FROM notifications WHERE state_old_id IS NOT NULL AND from_id=s0.iduser)
notifications.deleted IS NULL
//~ ->setFormCode($code, array('class' => 'mws-form', 'autocomplete' => 'off'))
  :
    :
    : ''
    :
      : []
    :
      :
        :
        : false
return array(
    'project_name' => 'Trainz.cz',
    'date_timezone' => 'Europe/Berlin',

    'user' => array(
        'expire' => '2 hours',
        'url' => 'upload',
        'menu' => array(
            'home' => array('name' => 'Home', 'link' => ''),
            'profile' => array('name' => 'Profile', 'visible' => false),
            'downloads' => array('name' => 'Objekty / Mapy',
                'js' => array(
                    'external' => array(),
                    'embed' => array(
<<<T
    tinymce.init({
      selector: ".obal_upload_sekce .obal_upload_download textarea.tiny-upload",
      language: 'cs',
      autoresize_on_init: false,
      autoresize_bottom_margin: 15,
      autoresize_min_height: 200,
      autoresize_max_height: 500,
      height: 200,
      menubar: false,
      resize: true,
      paste_as_text: true,
        plugins: [
          "advlist autolink lists link preview wordcount autoresize contextmenu paste"
        ],
      toolbar: "undo redo | bold italic underline strikethrough superscript subscript | bullist numlist outdent indent | preview",
      contextmenu: "undo redo | link removeformat"
    });
T
,

                    ),
                  ),
              ),
            'slideshows',
            'messages',
            'notification',
            'faq',
          ),
      ),
    'system' => array(
        'clearall' => false,  // true, live nahled, false pro klasicke cachovani
      ),
    'tpl' => array(
        'auto_create' => false,   // true pro autovytvareni tpl pri volani metody template()
        'force_compile' => false, // true pro okamzite kompilovani a ulozeni bez cachovani
      ),
    'language' => array(
        'default' => 'cs',
        'list' => array(
            'cs' => array('cs_CZ', 'CZ'),
            'en' => array('en_US', 'EN'),
            'de' => array('de_DE', 'DE'),
          ),
      ),
    'menu' => array(
        'home' => array(
            'name' => 'Oficiální stránky Trainz Railroad Simulator',
            'link' => '',
            'js' => array(
                'external' => array('js/jquery.cycle2.min.js'),
              ),
            'menu' => array(
                'novinky' => array('name' => 'Novinky', 'visible' => false),
              ),
          ),
        'forum' => array(
            'name' => 'Forum',
            'link' => 'http://forum.trainz.cz/',
          ),
        'download' => array(
            'name' => 'Download',
            'css' => array('js/jquery.treeview/jquery.treeview.css', 'js/jquery.fancybox/jquery.fancybox.css'),
            'js' => array(
                'external' => array('js/jquery.treeview/jquery.treeview.js', 'js/jquery.fancybox/jquery.fancybox.pack.js'),
                'embed' => <<<T
      $("#navigation-treeview").treeview({
          persist: "location",
          animated: "fast",
          collapsed: true,
          unique: false
      });

      $(".download-img-fancy").fancybox({
        helpers: {
          title: {
            type: 'inside'
          },
          overlay: {
            speedOut: 0
          }
        }
      });

      function downloadCDP(id, ret, reckon) {
        $.post(weburl+'ajax.php', {'type': 'download_cdp', 'id': id, 'reckon': reckon}, function(data) {
          var jdata = jQuery.parseJSON(data);
          if (ret) {
            $(ret+id).html(jdata.counter+'x');
          }
          window.location = weburl+'down.php?name='+jdata.name+'&path='+jdata.path;
        });
        return false;
      }
T
              ),
            'menu' => array(
                'autor' => array('name' => 'Autor', 'visible' => false),
                'hledat' => array('name' => 'Hledat', 'visible' => false),
              ),
          ),
      ),
    //~ 'admin' => array(),
  );


  :
    :
    :
  :
    :
    : [, ]
    :
      : [, ]
      :
        - ++++++%24%28%22%23navigation-treeview%22%29.treeview%28%7B%0A++++++++++persist%3A+%22location%22%2C%0A++++++++++animated%3A+%22fast%22%2C%0A++++++++++collapsed%3A+true%2C%0A++++++++++unique%3A+false%0A++++++%7D%29%3B%0A++++++%24%28%22.download-img-fancy%22%29.fancybox%28%7B%0A++++++++helpers%3A+%7B%0A++++++++++title%3A+%7B%0A++++++++++++type%3A+%27inside%27%0A++++++++++%7D%2C%0A++++++++++overlay%3A+%7B%0A++++++++++++speedOut%3A+0%0A++++++++++%7D%0A++++++++%7D%0A++++++%7D%29%3B
        - ++++++function+downloadCDP%28id%2C+ret%2C+reckon%29+%7B%0A++++++++%24.post%28weburl%2B%27ajax.php%27%2C+%7B%27type%27%3A+%27download_cdp%27%2C+%27id%27%3A+id%2C+%27reckon%27%3A+reckon%7D%2C+function%28data%29+%7B%0A++++++++++var+jdata+%3D+jQuery.parseJSON%28data%29%3B%0A++++++++++if+%28ret%29+%7B%0A++++++++++++%24%28ret%2Bid%29.html%28jdata.counter%2B%27x%27%29%3B%0A++++++++++%7D%0A++++++++++window.location+%3D+weburl%2B%27down.php%3Fname%3D%27%2Bjdata.name%2B%27%26path%3D%27%2Bjdata.path%3B%0A++++++++%7D%29%3B%0A++++++++return+false%3B%0A++++++%7D
    :
      :
        :
        :
      :
        :
        : false
  odkazy:
    name: Odkazy
  shop:
    name: Shop
  upload:
    name: Upload
    css: [js/select2-3.4.2/select2.css, admin_template/css/fonts/icomoon/style.css, js/jquery.jgrowl/jquery.jgrowl.min.css, js/jquery.fancybox/jquery.fancybox.css, js/jquery.imgareaselect-0.9.10/css/imgareaselect-animated.css]
    js:
      external: [js/jquery.ui.effect-shake-min.js, js/jquery.validate-min.js, js/upload-registrace.js, admin_template/plugins/maskedinput/jquery.numberMask.js, js/bootstrap-filestyle.min.js, js/select2-3.4.2/select2.min.js, js/select2-3.4.2/select2_locale_cs.js, admin_template/plugins/autosize/jquery.autosize.min.js, js/tinymce/tinymce.min.js, js/jquery.jgrowl/jquery.jgrowl.min.js, js/jquery.fancybox/jquery.fancybox.pack.js, js/jquery.imgareaselect-0.9.10/scripts/jquery.imgareaselect.js]
      embed:
    menu:
      registrace:
        name: Registrace
        js:
          external: [js/jquery.ui.effect-shake-min.js, js/jquery.validate-min.js, js/upload-registrace.js]
        visible: false

require($path . 'global_config.php');  //
==  OR $uri['page'] ==
{/* $menu->getJS('external', true)   external   embed   */}
//~ var weburl = '{$weburl}';
external:
      embed:
        - ++++++%24%28%22%23navigation-treeview%22%29.treeview%28%7B%0A++++++++++persist%3A+%22location%22%2C%0A++++++++++animated%3A+%22fast%22%2C%0A++++++++++collapsed%3A+true%2C%0A++++++++++unique%3A+false%0A++++++%7D%29%3B%0A++++++%24%28%22.download-img-fancy%22%29.fancybox%28%7B%0A++++++++helpers%3A+%7B%0A++++++++++title%3A+%7B%0A++++++++++++type%3A+%27inside%27%0A++++++++++%7D%2C%0A++++++++++overlay%3A+%7B%0A++++++++++++speedOut%3A+0%0A++++++++++%7D%0A++++++++%7D%0A++++++%7D%29%3B
        - ++++++function+downloadCDP%28id%2C+ret%2C+reckon%29+%7B%0A++++++++%24.post%28weburl%2B%27ajax.php%27%2C+%7B%27type%27%3A+%27download_cdp%27%2C+%27id%27%3A+id%2C+%27reckon%27%3A+reckon%7D%2C+function%28data%29+%7B%0A++++++++++var+jdata+%3D+jQuery.parseJSON%28data%29%3B%0A++++++++++if+%28ret%29+%7B%0A++++++++++++%24%28ret%2Bid%29.html%28jdata.counter%2B%27x%27%29%3B%0A++++++++++%7D%0A++++++++++window.location+%3D+weburl%2B%27down.php%3Fname%3D%27%2Bjdata.name%2B%27%26path%3D%27%2Bjdata.path%3B%0A++++++++%7D%29%3B%0A++++++++return+false%3B%0A++++++%7D
js:
        external:
        embed:
          - ++++%24%28%22.mws-crop-target%22%29.imgAreaSelect%28%7B%0A++++++parent%3A+%27%23upload-crop-parent%27%2C%0A++++++handles%3A+false%2C%0A++++++resizable%3A+false%2C%0A++++++persistent%3A+true%2C%0A++++++resizeMargin%3A+0%2C%0A++++++show%3A+true%2C%0A++++++x1%3A+0%2C%0A++++++y1%3A+0%2C%0A++++++x2%3A+950%2C%0A++++++y2%3A+370%2C%0A++++++minWidth%3A+950%2C%0A++++++minHeight%3A+370%2C%0A++++++onSelectChange%3A+function+%28img%2C+selection%29+%7B%0A++++++++%24%28%22%23crop_x1%22%29.val%28selection.x1%29%3B%0A++++++++%24%28%22%23crop_y1%22%29.val%28selection.y1%29%3B%0A++++++++%24%28%22%23crop_x2%22%29.val%28selection.x2%29%3B%0A++++++++%24%28%22%23crop_y2%22%29.val%28selection.y2%29%3B%0A++++++%7D%0A++++%7D%29%3B
++++tinymce.init%28%7B%0A++++++selector%3A+%22.obal_upload_sekce+.obal_upload_download+textarea.tiny-upload%22%2C%0A++++++language%3A+%27cs%27%2C%0A++++++autoresize_on_init%3A+false%2C%0A++++++autoresize_bottom_margin%3A+15%2C%0A++++++autoresize_min_height%3A+200%2C%0A++++++autoresize_max_height%3A+500%2C%0A++++++height%3A+200%2C%0A++++++menubar%3A+false%2C%0A++++++resize%3A+true%2C%0A++++++paste_as_text%3A+true%2C%0A++++++++plugins%3A+%5B%0A++++++++++%22advlist+autolink+lists+link+preview+wordcount+autoresize+contextmenu+paste%22%0A++++++++%5D%2C%0A++++++toolbar%3A+%22undo+redo+%7C+bold+italic+underline+strikethrough+superscript+subscript+%7C+bullist+numlist+outdent+indent+%7C+preview%22%2C%0A++++++contextmenu%3A+%22undo+redo+%7C+link+removeformat%22%0A++++%7D%29%3B
function downloadCDP(id, ret, reckon) {
        $.post(weburl+'ajax.php', {'type': 'download_cdp', 'id': id, 'reckon': reckon}, function(data) {
          var jdata = jQuery.parseJSON(data);
          if (ret) {
            $(ret+id).html(jdata.counter+'x');
          }
          window.location = weburl+'down.php?name='+jdata.name+'&path='+jdata.path;
        });
        return false;
      }
js:
        external:
        embed:
          -
          -
 function downloadCDP(id, ret, reckon) {
        $.post(weburl+'ajax.php', {'type': 'download_cdp', 'id': id, 'reckon': reckon}, function(data) {
          var jdata = jQuery.parseJSON(data);
          if (ret) {
            $(ret+id).html(jdata.counter+'x');
          }
          window.location = weburl+'down.php?name='+jdata.name+'&path='+jdata.path;
        });
        return false;
      }
 -
          -
          -
          -
          -
          -
          -
{/*

{loop="$menu->getJS('embed')"}{$value|urldecode}\n\n{/loop}
{loop="isset($upload_menu) ? $upload_menu->getJS('embed') : array()"}{$value|urldecode}\n\n{/loop}

*/}
    function replacePath(name) {
      return name.split('\\').pop();
    }
 {/if}


{if="isset($upload_uri['block']) && $upload_uri['block'] == 'downloads'"}
//~ if (isset($upload_uri['block']) && $upload_uri['block'] == 'downloads') {
  //~ if (isset($uri['subblock']) && $uri['subblock'] == 'add') {
    //~ $version = isset($_POST['version']) ? json_encode($_POST['version']) : '[]';
    //~ $kuid_cdp = isset($_POST['kuid_cdp']) ? json_encode($_POST['kuid_cdp']) : '[]';
    //~ $kuid_cdp_plain = isset($_POST['kuid_cdp_plain']) ? json_encode($_POST['kuid_cdp_plain']) : '[]';
  //~ }
//~ }
//~ var_dump($uri, $uri['page'] == 'upload');
//~ $uri['page'] == 'upload' && isset($uri['block']) && $uri['block'] == 'downloads'
if ($uri['page'] == 'upload' && isset($uri['block']) && $uri['block'] == 'downloads')
      function typKuidu(value) {
        if (value.split(':').length > 1) {
          return '<' + (value.split(':').length == 2 ? 'kuid' : 'kuid2') +  ':' + value + '>';
        } else {
          return '<kuid(2):(-)xxxxx:yyyyy(:zzz)>';
        }
      }
{code}
  //~ var_dump($upload_menu);
  //var_dump($uri);
{/code}
      $(".download-img-fancy").fancybox({
        helpers: {
          title: {
            type: 'inside'
          },
          overlay: {
            speedOut: 0
          }
        }
      });
    {if="$uri['page'] == 'upload' && isset($uri['block']) && $uri['block'] == 'slideshows'"}



    {/if}
, js/upload-registrace.js
js: [js/jquery.ui.effect-shake-min.js, js/jquery.validate-min.js]
(is_array($result) && count($result) == 1 ? $result[0] :
//~ $this->forceIterate($this);
      //~ return (isset($this->array_address[$this->last_address][$index]) ? $this->array_address[$this->last_address][$index] : null);
      //~ var_dump($res);
- js/jquery.fancybox/jquery.fancybox.pack.js
#[, , , , , , , , , , , ]
{code}var_dump($menu->getJS(null, true));{/code}


SELECT iddownload, author, picture, polygons, confirmed, visible, d0.added, edited,
  languages_has_downloads.name, languages_has_downloads.description, languages_has_downloads_category.name category, state_old_id
FROM downloads d0
LEFT JOIN notifications ON (state_id=iddownload AND notifications.deleted IS NULL)
JOIN languages_has_downloads USING(iddownload)
JOIN languages_has_downloads_category USING(iddownload_category, idlanguage)
JOIN languages USING(idlanguage)
WHERE
  d0.deleted IS NULL AND
  notifications.type=? AND languages.code=? AND iduser=? AND
  iddownload NOT IN (SELECT state_old_id FROM notifications WHERE state_old_id IS NOT NULL AND from_id=d0.iduser)



SELECT iddownload, author, picture, polygons, confirmed, visible, d0.added, edited,
  languages_has_downloads.name, languages_has_downloads.description, languages_has_downloads_category.name category, state_old_id
FROM downloads d0
LEFT JOIN notifications ON state_id=iddownload
JOIN languages_has_downloads USING(iddownload)
JOIN languages_has_downloads_category USING(iddownload_category, idlanguage)
JOIN languages USING(idlanguage)
WHERE
  d0.deleted IS NULL AND
  notifications.type='download' AND languages.code='cs' AND iduser=1 AND
  iddownload NOT IN (SELECT state_old_id FROM notifications WHERE state_old_id IS NOT NULL AND deleted IS NULL AND from_id=d0.iduser)
iddownload NOT IN (SELECT state_old_id FROM notifications WHERE state_old_id IS NOT NULL AND from_id=d0.iduser)
notifications.deleted IS NULL AND

SELECT iddownload, author, picture, polygons, confirmed, visible, d0.added, edited,
  languages_has_downloads.name, languages_has_downloads.description, languages_has_downloads_category.name category, state_old_id
FROM downloads d0
LEFT JOIN notifications n0 ON (n0.state_id=iddownload AND n0.deleted IS NULL AND n0.type='download')
JOIN languages_has_downloads USING(iddownload)
JOIN languages_has_downloads_category USING(iddownload_category, idlanguage)
JOIN languages USING(idlanguage)
WHERE
  d0.deleted IS NULL AND
  languages.code='cs' AND iduser=1 AND
  iddownload NOT IN (SELECT state_old_id FROM notifications WHERE state_old_id IS NOT NULL AND deleted IS NULL AND from_id=d0.iduser)
vyresit pruchod zpravy pri autorizovanem pozadavku!!!!! ++
 //to_id je nepovinny
//~ ->setAdd(array(
            //~ 'url' => 'reply/%%id_row%%',
            //~ 'title' => 'Odpovědět',
            //~ 'if_link' => ' && $value->type == \'message\'',
            //~ 'enabled' => $user->isAllowed($acl_resource, 'reply'),
            //~ 'global_link' => false,
          //~ ));
    messages/show:  # umele vytvoreny (pouze pro zobrazeni tlacitek)
      - show
&& $admin_uri['subblock']
// jak udelat stav aby se mohlo uzivateli odpovedet!!!!!
//~ 'if_link' => ' && !isset($admin_uri.subaction)',
//~ var_dump($admin_uri);
// bude rozklikavaci!!!  jako ostatni sekce podobneho razeni!!
// doresit logiku!!!!

        ->setLink(array(  // rozkliknuti (but takto nebo toto vyhodit a napsat odkaz natvrdo do description)
            'url' => '',
            'title' => 'zobrazit notifikaci',
          ))
// archivace!
    ->setLink(array(
        'title' => 'Odepsat',
        'if_link' => ' && isset($value->to_id) && $value->to_id == $upload_user->getId() && !isset($value->deleted)',
      ));
'enabled' => $user->isAllowed('messages', 'reply'),'enabled' => $user->isAllowed('messages', 'archive'),
 'enabled' => $user->isAllowed('messages', 'reply'),



SELECT kuid, trainz_kuids.name, url, _tc.idtrainz_cdp, _tc.name cdp_name, trainz_cdp.path cdp_path FROM trainz_kuids
JOIN downloads_has_trainz_kuid USING(idtrainz_kuid)
LEFT JOIN trainz_cdp_has_trainz_kuids USING(idtrainz_kuid)
LEFT JOIN trainz_cdp _tc ON _tc.idtrainz_cdp=trainz_cdp_has_trainz_kuids.idtrainz_cdp
WHERE iddownload=190
GROUP BY idtrainz_kuid
ORDER BY CAST(kuid AS DECIMAL) ASC, kuid ASC

LEFT JOIN trainz_cdp USING(idtrainz_cdp)
LEFT JOIN trainz_cdp USING(idtrainz_cdp)
array(\'kuid\' => )
$id_kuid = $db->insert(\'trainz_kuids\', classes\ContentValues::init(array(\'kuid\' => trim($v)))); // vlozi kuid



SELECT idtrainz_kuid, kuid, trainz_kuids.name, _tc.name cdp_name FROM trainz_kuids
LEFT JOIN downloads_has_trainz_kuid USING(idtrainz_kuid)
LEFT JOIN trainz_cdp_has_trainz_kuids USING(idtrainz_kuid)
LEFT JOIN trainz_cdp _tc ON _tc.idtrainz_cdp=trainz_cdp_has_trainz_kuids.idtrainz_cdp
GROUP BY idtrainz_kuid
ORDER BY CAST(kuid AS DECIMAL) ASC, kuid ASC

nove:
SELECT idtrainz_kuid, kuid, trainz_kuids.name, _tc.name cdp_name FROM trainz_kuids
LEFT JOIN trainz_cdp _tc USING(idtrainz_cdp)
ORDER BY CAST(kuid AS DECIMAL) ASC, kuid ASC


SELECT idtrainz_kuid, kuid, trainz_kuids.name, _tc.name cdp_name FROM trainz_kuids
LEFT JOIN downloads_has_trainz_kuid USING(idtrainz_kuid)
LEFT JOIN trainz_cdp_has_trainz_kuids USING(idtrainz_kuid)
LEFT JOIN trainz_cdp _tc ON _tc.idtrainz_cdp=trainz_cdp_has_trainz_kuids.idtrainz_cdp
GROUP BY idtrainz_kuid
ORDER BY CAST(kuid AS DECIMAL) ASC, kuid ASC

// pripomenout moznost pripojovani jmena na vypisu kouidu + 3 spoupcovy layout?
//~ 'query' => '$db->query(\'%%table%%\', \'idtrainz_kuid, kuid, name, url, idtrainz_cdp\', null, null, null, null, \' CAST(kuid AS DECIMAL) ASC, kuid ASC\')',
// nasadit novy text: a tam ajaxem cehckovyt a prepisovat name v textu podle zadaneho id
//~ use classes\IAuthenticator;
//~ use classes\IAuthenticator;
class ExceptionAjax extends Exception {}
var_dump($c);
           $db->query('trainz_cdp', 'name', 'idtrainz_cdp=?', array(intval($_POST['id'])))->getFirst()->name;
//~ SELECT languages_has_downloads.name FROM trainz_cdp
                                //~ JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
                                //~ JOIN languages_has_downloads USING(iddownload)
                                //~ JOIN languages USING(idlanguage)
                                //~ WHERE languages.code=? AND idtrainz_cdp=?
//~ $c = $this->db->rawQuery('SELECT idtrainz_cdp, trainz_cdp.name cdp_name, languages_has_downloads.name FROM trainz_cdp
                          //~ JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
                          //~ JOIN languages_has_downloads USING(iddownload)
                          //~ JOIN languages USING(idlanguage)
                          //~ WHERE languages.code=?', array('cs'))->getAll();
//~ var_dump($c);$this->db->query('trainz_cdp', 'idtrainz_cdp, name')


SELECT idtrainz_kuid, kuid, t0.name, url, idtrainz_cdp, _tc.name cdp_name, languages_has_downloads.name lang_name
FROM trainz_kuids t0
LEFT JOIN trainz_cdp _tc USING(idtrainz_cdp)
LEFT JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
LEFT JOIN languages_has_downloads USING(iddownload)
LEFT JOIN languages USING(idlanguage)
WHERE languages.code='cs'

SELECT idtrainz_kuid, kuid, t0.name, url, idtrainz_cdp, _tc.name cdp_name, languages_has_downloads.name lang_name
FROM trainz_kuids t0
LEFT JOIN trainz_cdp _tc USING(idtrainz_cdp)
LEFT JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
LEFT JOIN languages_has_downloads USING(iddownload)
LEFT JOIN languages USING(idlanguage)
WHERE languages.code='cs' OR languages.code IS NULL
array( => )
array(\'kuid\' => trim($v))
// otestovat spravnost!!!!
// otestovat spravnost!!!!
'<a href="#" onclick="return downloadCDP('+data_cdp_file[poc].idtrainz_cdp+', null, false)" class="btn btn-default">'+data_cdp_file[poc].name+'</a>'+
var_dump($cdp_file_db);
//~ ->addRule(\'cdp\', \'filled\', \'Musí být vložen/y soubor/y!\')
//~ if (isset($cdp[$i]->idtrainz_cdp)) {  // pokud existuje stare
//~ %%rows%% += $db->delete(\'downloads_has_trainz_cdp\', \'idtrainz_cdp=?\', array($cdp[$i]->idtrainz_cdp));  // promaznuti vazeb, aby se mohly znovu vlozit (1,N)
//~ }

JOIN trainz_cdp_has_trainz_kuids _tchtk USING(idtrainz_kuid)
_tchtk.

SELECT kuid, trainz_kuids.name, url, _tc.idtrainz_cdp, _tc.name cdp_name, _tc.path cdp_path FROM trainz_kuids
JOIN downloads_has_trainz_kuid USING(idtrainz_kuid)
LEFT JOIN trainz_cdp_has_trainz_kuids USING(idtrainz_kuid)
LEFT JOIN trainz_cdp _tc ON _tc.idtrainz_cdp=trainz_cdp_has_trainz_kuids.idtrainz_cdp
WHERE iddownload=190
GROUP BY idtrainz_kuid
ORDER BY CAST(kuid AS DECIMAL) ASC, kuid ASC


SELECT kuid, trainz_kuids.name, url, _tc.idtrainz_cdp, _tc.name cdp_name, _tc.path cdp_path FROM trainz_kuids
JOIN downloads_has_trainz_kuid USING(idtrainz_kuid)
LEFT JOIN trainz_cdp _tc USING(idtrainz_cdp)
WHERE iddownload=190
GROUP BY idtrainz_kuid
ORDER BY CAST(kuid AS DECIMAL) ASC, kuid ASC


LEFT JOIN trainz_cdp_has_trainz_kuids USING(idtrainz_kuid)
ON _tc.idtrainz_cdp=trainz_cdp_has_trainz_kuids.idtrainz_cdp


SELECT kuid, name FROM trainz_kuids
-- JOIN trainz_cdp_has_trainz_kuids USING(idtrainz_cdp)
WHERE idtrainz_cdp=124

SELECT kuid, name FROM trainz_kuids
JOIN trainz_cdp_has_trainz_kuids USING(idtrainz_cdp)
WHERE idtrainz_cdp=124


SELECT * FROM trainz_kuids _tk
LEFT JOIN trainz_cdp_has_trainz_kuids _tchtk ON _tchtk.idtrainz_cdp=_tk.idtrainz_cdp AND _tchtk.idtrainz_kuid=_tk.idtrainz_kuid
WHERE _tchtk.idtrainz_cdp=124


SELECT idtrainz_kuid, kuid, name FROM trainz_kuids
JOIN trainz_cdp_has_trainz_kuids _tchtk USING(idtrainz_kuid)
WHERE _tchtk.idtrainz_cdp=124
'question' => 'Opravdu se má zpráva archivovat?',
// test jestli je pro toto schopne!!!
      $a = null;
      //~ if ($this->submit_blocker) {
        //~ $name = $this->getSubmittedBy();
        //~ $a .= ' name="form'.$name.'" onsubmit="form'.$name.'.'.$name.'.disabled=true; return false;"';
      //~ }$a.
//~ var_dump($this->submit_blocker, $attr);
//~ $attr .= ' onclick="this.disabled=true;this.form.submit();"';
    $('input:submit').click(function() {
      //~ $('input:submit').attr("disabled", true);
      //~ return true;
    });
l1.idlanguage
$c = $db->query(\'%%table%%\', \'subject, message, from_id\', \'%%table_id%%=?\', array(%%action_id%%))->getFirst();
'code_post_insert' => '
              //~  nejake dalsi akce co se stanou po odeslani zpravy?
              //~ var_dump(%%values%%[\'to\'] != \'0\');
              //~ $db->rollBack();
              //~ exit;
            ',
%%values%%[\'to\'] != \'0\' ?  : null
 'code_post_insert' => '
              foreach (array_slice($global_configure[\'notification\'][%%values%%[\'to\']][\'to\'], 1) as $v) { // posila od 2 ID
                if ($upload_user->getId() != $v) { // aby neslo poslat samo sobe
                  $cv = classes\ContentValues::init(%%values%%)
                            ->remove(\'to\')
                            ->put(\'from_id\', $upload_user->getId())
                            ->put(\'to_id\', $v)
                            ->put(\'type\', $crate::TYPE_MESSAGE)
                            ->putDate(\'added\');

                  $_id += $db->insert(\'%%table%%\', $cv);
                }
              }
            ',
//~ var_dump($this->global_configure['notification']);
            //~ return array_map(function($v) {
          //~ return $v['name'];
        //~ }, $this->global_configure['notification']);
// 0.indexu musi existovat!
<li><a href="{if="$user->isInRole($roles[2])"}{$weburl_admin}users/edit/{$user->getId()}{else}{$weburl}upload/profile/edit{/if}">Profil</a></li>
//~ 'code_post_update' => '
          //~ if (%%rows%% < 0) {
            //~ %%rows%% = 0;
          //~ }
        //~ ',
SELECT * FROM trainz_cdp
JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
WHERE iddownload=148


SELECT * FROM trainz_cdp
JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
JOIN trainz_cdp_has_trainz_kuids _tchtk USING(idtrainz_cdp)
JOIN trainz_kuids USING(idtrainz_kuid)
WHERE iddownload=148


SELECT idtrainz_kuid, trainz_cdp.name, iduser, author, trainz_kuids.name FROM trainz_cdp
JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
JOIN downloads USING(iddownload)
JOIN trainz_cdp_has_trainz_kuids _tchtk USING(idtrainz_cdp)
JOIN trainz_kuids USING(idtrainz_kuid)

SELECT idtrainz_kuid, trainz_cdp.name, iduser, author, trainz_kuids.name FROM trainz_cdp
JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
JOIN downloads USING(iddownload)
JOIN trainz_cdp_has_trainz_kuids _tchtk USING(idtrainz_cdp)
JOIN trainz_kuids USING(idtrainz_kuid)
WHERE trainz_kuids.name IS NULL

SELECT idtrainz_kuid, _tk.kuid, iddownload, _tc.name cdp_name, _lhd.name, _u.login, _u.alias, author FROM trainz_cdp _tc
JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
JOIN downloads USING(iddownload)
JOIN trainz_cdp_has_trainz_kuids _tchtk USING(idtrainz_cdp)
JOIN trainz_kuids _tk USING(idtrainz_kuid)
JOIN users _u USING(iduser)
JOIN languages_has_downloads _lhd USING(iddownload)
JOIN languages USING(idlanguage)
WHERE languages.code='cs' AND _tk.name IS NULL
 WHERE deleted <= (CURDATE() - INTERVAL 7 DAY)
      // cisteni archivu
{*
        	<!-- Searchbox -->
        	<div id="mws-searchbox" class="mws-inset">
            	<form action="typography.html">
                	<input type="text" class="mws-search-input" placeholder="Search...">
                    <button type="submit" class="mws-search-submit"><i class="icon-search"></i></button>
                </form>
            </div>
*}

{/*

SELECT idtrainz_kuid, trainz_cdp.name, iduser, author, trainz_kuids.name FROM trainz_cdp
JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
JOIN downloads USING(iddownload)
JOIN trainz_cdp_has_trainz_kuids _tchtk USING(idtrainz_cdp)
JOIN trainz_kuids USING(idtrainz_kuid)

SELECT idtrainz_kuid, trainz_cdp.name, iduser, author, trainz_kuids.name FROM trainz_cdp
JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
JOIN downloads USING(iddownload)
JOIN trainz_cdp_has_trainz_kuids _tchtk USING(idtrainz_cdp)
JOIN trainz_kuids USING(idtrainz_kuid)
WHERE trainz_kuids.name IS NULL

SELECT idtrainz_kuid, _tk.kuid, iddownload, _tc.name cdp_name, _lhd.name, _u.login, _u.alias, author FROM trainz_cdp _tc
JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
JOIN downloads USING(iddownload)
JOIN trainz_cdp_has_trainz_kuids _tchtk USING(idtrainz_cdp)
JOIN trainz_kuids _tk USING(idtrainz_kuid)
JOIN users _u USING(iduser)
JOIN languages_has_downloads _lhd USING(iddownload)
JOIN languages USING(idlanguage)
WHERE languages.code='cs' AND _tk.name IS NULL

var_dump($global_configure['expire']['notifications']);
// dodelat!!!!!!

// ["block"]=> string(5) "users" ["subblock"]=> string(0) "" }
// {*$configure['admin']['search']*}{$admin_uri|var_dump}
//[$admin_uri['subblock']]
else {
            //
          }
//var_dump($configure['admin']['search'][$admin_uri['block']], $admin_uri['subblock']);
 //var_dump($admin_uri['subblock']);
 var_dump($admin_uri['subblock']);
          var_dump($configure['admin']['search'][$admin_uri['block']]);
          var_dump($blok);
          ///var_dump($configure['admin']['search'][$admin_uri['block']][$admin_uri['subblock']]);
{$blok = !in_array($admin_uri.block, array('users', 'slideshows', 'downloads'))}
//if (isset($configure['admin']['search'][$admin_uri['block']][$admin_uri['subblock']])) {
          //  $access = $configure['admin']['search'][$admin_uri['block']][$admin_uri['subblock']];
          //}
//var_dump($configure['admin']['search'][$admin_uri['block']], $admin_uri['subblock']);
$configure['admin']['search']
  //
//~ var_dump($admin_uri, $search);
  //~ switch ($admin_uri['subblock']) {
    //~ case 'news':
      //~ //
    //~ break;
  //~ }


SELECT idtrainz_kuid, _tk.kuid, iddownload, _tc.name cdp_name, _lhd.name, _u.login, _u.alias, author FROM trainz_cdp _tc
JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
JOIN downloads USING(iddownload)
JOIN trainz_cdp_has_trainz_kuids _tchtk USING(idtrainz_cdp)
JOIN trainz_kuids _tk USING(idtrainz_kuid)
JOIN users _u USING(iduser)
JOIN languages_has_downloads _lhd USING(iddownload)
JOIN languages USING(idlanguage)
WHERE languages.code='cs' AND _tk.name IS NULL


SELECT idtrainz_kuid, _tk.kuid, _tk.name, _tc.name cdp_name FROM trainz_cdp _tc
JOIN trainz_cdp_has_trainz_kuids _tchtk USING(idtrainz_cdp)
JOIN trainz_kuids _tk USING(idtrainz_kuid)
 'enabled' => $user->isAllowed($acl_resource, 'list'),
description: nejaky libovolny popisek ci poznamka k sekci?
LOCK_EX
SELECT login, alias, message, _s.added FROM shoutboards _s
JOIN users USING(iduser)
WHERE _s.added > (CURDATE() - INTERVAL 1 DAY)
$code = '
<div class="mws-button-row">
  %%submit%%
</div>';
//~ ->setFormCode($code, array('class' => 'mws-form', 'autocomplete' => 'off'), array('admin_uri'))
       $_id = ;
          // odelat!!!
//~ var_dump($values['message']);
// na HOME musi byt casova smycka s: getListMessages
//~ var_dump(classes\ImageMaker::geometry(%%values%%[\'path\']), array(\'width\' => $global_configure[\'home\'][\'slideshowWidth\'], \'height\' => $global_configure[\'home\'][\'slideshowHeight\']));
//~ var_dump($global_configure[\'home\'][\'slideshowWidth\'], %%values%%[\'crop_x2\'] - %%values%%[\'crop_x1\'], $global_configure[\'home\'][\'slideshowHeight\'], %%values%%[\'crop_y2\'] - %%values%%[\'crop_y1\']);
var_dump(%%values%%[\'crop_x1\'], %%values%%[\'crop_y1\']);
exit;
//~ classes\Core::setRefresh(%%refresh_time%%, \'%%back_link%%add2/\'.urlencode(base64_encode(%%values%%[\'path\'])));  // predani uz jen nazvu
//~ classes\Core::setRefresh(%%refresh_time%%, \'%%back_link%%add2/\'.urlencode(base64_encode(%%values%%[\'path\'])));  // predani uz jen nazvu
classes\Core::setRefresh(%%refresh_time%%, \'%%back_link%%add2/\'.urlencode(base64_encode(%%values%%[\'path\'])));  // predani uz jen nazvu
//~ classes\Core::setRefresh(%%refresh_time%%, \'%%back_link%%add2/\'.urlencode(base64_encode(%%values%%[\'path\'])));  // predani uz jen nazvu
: '->setSubmitBlocker(false)').'
' : null).( ? '
'.( ? '
'.($_auto_hide ? '->setAutoHide()' : '').';
->setAutoHide();
ret$(ret).html(data);\'.send_result\'
$('.send_result').html(''); // vymazani hlasky pridano
$sekce = classes\Section::build($weburl_admin.'home/', '$admin_uri.subblock', '$admin_uri.subaction');
$sekce
    ->setTable('shoutboards', 'idshoutboard')
    ->setRefreshTime($global_configure['admin']['sectionRefreshTime'])
    ->setList(array(
        'query' => '$db->rawQuery(\'SELECT idshoutboard, login, alias, _r.name role, message, _s.added FROM %%table%% _s
                                    JOIN users USING(iduser)
                                    JOIN roles _r USING(idrole)
                                    WHERE _s.added > (CURDATE() - INTERVAL 1 DAY)\')', // limitovani na posledni 1 den
        'name' => '',
        'description' => '',
        'content' => '
  <div class="grid_8 addbtn">
    %%add_link%%
  </div>
        ',
      ));
{compile="$sekce->render()"}
//po odeslani poslani do databaze
///+ nasledne dotaz na vytazeni informaci za posledni 1 den!
//ajaxem i vkladat
//hitorie podle datumu
//~ $c = $db->rawQuery('SELECT DATE(added) FROM shoutboards GROUP BY DATE(added)');
        //~ case 'getlisthistory':
          //~ $c = $db->rawQuery('SELECT DATE(added) FROM shoutboards GROUP BY DATE(added)');
          //~ return null;
//nacitani zaszamu dejme tomu nazde 1.5 - 2s (5s resp do 20s-30s)
//nacitat v chatu avatary
// vice mene ajaxem nebo konbinace ajax+pevny dotaz
//zbytes vypisu se musi strankovat a nebo proste radit do jakesik historie
//udrzovat nejakym jednoduchym stylem aktualne online uzivatele
//SELECT * FROM shoutboards WHERE added > (CURTIME() - INTERVAL 10 MINUTE)
{$value->to_alias ? \' (\' . $value->to_alias . \')\' : null}
              od uzivatele: {$value->from_login} ==> {$value->to_login ?: \'všeci přeci\'}<br />
              adresovano: (od) {$value->from_login} ==> (pro) {$value->to_login ?: \'<strong>Všici</strong>\'} <br />
              vyrizeno kym: {$value->handled_login}<br />
{$value->from_role ? \'\' .  . \'\' : null}Fugess (Martin[cze])  [Super administrátor]
isset(%%values%%[\'confirmed\'])
<div class="mws-form-row">
    <label class="mws-form-label" for="confirmed_lb">Schválený uživatel</label>
    <div class="mws-form-item">
      <div class="small">
        {checkbox:confirmed|$|class|:|ibutton|,|id|:|confirmed_lb|,|data-label-on|:|ANO|,|data-label-off|:|NE&nbsp;}
      </div>
    </div>
  </div>
<div class="sloupec info_blok_m ibtn_blok">
              <table>
                <tr>
                  <td class="key">Schválený uživatel</td>
                  <td class="val"><input type="checkbox" disabled{$value->confirmed ? \' checked\' : null} class="ibutton" data-label-on="ANO" data-label-off="NE&nbsp;" /></td>
                </tr>
              </table>
            </div>
->putBool(\'confirmed\', isset(%%values%%[\'confirmed\']))
 confirmed,
, (from_id=? OR )$id_user
$cv = classes\ContentValues::init(%%values%%)
                            ->put(\'from_id\', $user->getId())
                            ->put(\'to_id\', $v)
                            ->put(\'type\', $crate::TYPE_MESSAGE)
                            ->putDate(\'added\');
                  $_id += $db->insert(\'%%table%%\', $cv);
//~ var_dump($to, $subject, $message);
//~ 'content_values' => '->remove(\'to\')
                                //~ ->put(\'from_id\', $upload_user->getId())
                                //~ ->put(\'to_id\', $global_configure[\'notification\'][%%values%%[\'to\']])
                                //~ ->put(\'type\', $crate::TYPE_MESSAGE)
                                //~ ->putDate(\'added\')',
            //~ 'success_title' => '<div class="alert alert-success">Zpráva byla odeslána!</div>',
//~ 'submit_button' => '{submit:;Odeslat|$|class|:|btn btn-small btn-success btn-success45}',
            //~ 'enabled' => $user->isAllowed($acl_resource, 'send'),
 //~ 'submit_button' => '{submit:;Odeslat|$|class|:|btn btn-small btn-success btn-success45}',
            //~ 'submit_button' => '{submit:;Odeslat|$|class|:|btn btn-small btn-success btn-success45}',
$cv = classes\ContentValues::init(%%values%%)
                        ->remove(\'adresat\')
                        ->put(\'from_id\', $user->getId())
                        ->put(\'to_id\', $c->from_id) // odesilatel se stava prijemcem
                        ->put(\'type\', $crate::TYPE_MESSAGE)
                        ->putDate(\'added\');
              $_id = $db->insert(\'%%table%%\', $cv);
$crate->addNotification($user->getId(), $c->from_id, $crate::TYPE_MESSAGE, null, null, %%values%%[\'subject\'], %%values%%[\'message\']);
//~ $cv = classes\ContentValues::init(%%values%%)
                        //~ ->remove(\'adresat\')
                        //~ ->put(\'from_id\', $upload_user->getId())
                        //~ ->put(\'to_id\', $c->from_id) // odesilatel se stava prijemcem
                        //~ ->put(\'type\', $crate::TYPE_MESSAGE)
                        //~ ->putDate(\'added\');
              //~ $_id = $db->insert(\'%%table%%\', $cv);
{$value->to_id == $upload_user->getId() ? \'Příchozí\' : \'Odchozí\'}
//IF(to_id=?, to_id DESC, to_id ASC),, $upload_user->getId()IF(to_id=?; (to_id DESC); (to_id ASC)),, $upload_user->getId()
//~ var_dump('rozeslani na: '.$v, $from);
'Dobrý den,<br /><br />Vaše ? žádost o registraci do autorské sekce Trainz.cz byla zamítnuta s novy registrovany %s, <a href="%s">link adminu</a><br /><br /><br />Děkujeme za Vaši registraci.<br />--<br />Trainz.cz',
//~ $c = $this->db->query('downloads', 'rewrite', 'iddownload=?', array($state_old_id))->getFirst();  // opravit!!!, predelat na rawQuery() !!!!
$c = $this->db->query('downloads', 'rewrite', 'iddownload=?', array($state_id))->getFirst();
 var ser = $(this).sortable("serialize");
, $this->isSuccess() && !isset($ses)
'__security'.$this->submittedBy
//~ $ses = Session::factory()->getSection('tplform')->$name;
 ?: $value->add_date
//~ if ($this->isSuccess()) {
        //~ $this->generateSecurityText();
      //~ }
      var_dump('new: '.);
//~ var_dump($this->submit_security, $ses);
      //~ $ses = $this->getSecurityText();  // sloucit!!!!!!
      //~ if (!isset($ses)) { // kdyz je prazdny
        //~ $this->generateSecurityText();
      //~ }
//~ private function generateSecurityText() {
      //~ $name = $this->submit_security_name;
      //~ Session::factory()->getSection('tplform')->$name = Core::getUniqText('tplform_');
    //~ }

SELECT idtrainz_cdp, trainz_cdp.name, path, GROUP_CONCAT(DISTINCT trainz_versions.name ORDER BY trainz_versions.rank SEPARATOR \\\' ,\\\') versions FROM trainz_cdp
                      JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
                      LEFT JOIN trainz_cdp_has_trainz_versions USING(idtrainz_cdp)
                      LEFT JOIN trainz_versions USING(idtrainz_version)
                      WHERE iddownload=?
 ?: $value->add_date
{*



---------------------------------------
co s tim ?


{if="$value->state_old_id"}
              stare:<br />
              {loop="$db->rawQuery(\'SELECT idtrainz_cdp, trainz_cdp.name, path, GROUP_CONCAT(DISTINCT trainz_versions.name ORDER BY trainz_versions.rank SEPARATOR \\\' ,\\\') versions FROM trainz_cdp
                                    JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
                                    LEFT JOIN trainz_cdp_has_trainz_versions USING(idtrainz_cdp)
                                    LEFT JOIN trainz_versions USING(idtrainz_version)
                                    WHERE iddownload=?\', array($value->old_id))" as $cdp}
                {$cdp->name}, verze: {$cdp->versions ?: \'nejsouuuu\'}<br />

                {loop="$db->rawQuery(\'SELECT kuid, name FROM trainz_kuids
                                      JOIN trainz_cdp_has_trainz_kuids _tchtk USING(idtrainz_kuid)
                                      WHERE _tchtk.idtrainz_cdp=?\', array($cdp->idtrainz_cdp))" as $k}
                  {$crate::formatKuid($k->kuid)}
                {emptyloop}
                  žádné kuidy
                {/loop}
{/if}
              {emptyloop}
                žádné položky
              {/loop}


---------------------------------------






*}
{/*




----puvodni reseni----


{loop="$db->rawQuery(\'SELECT idtrainz_cdp, trainz_cdp.name, path, GROUP_CONCAT(DISTINCT trainz_versions.name ORDER BY trainz_versions.rank SEPARATOR \\\' ,\\\') versions FROM trainz_cdp
                      JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
                      LEFT JOIN trainz_cdp_has_trainz_versions USING(idtrainz_cdp)
                      LEFT JOIN trainz_versions USING(idtrainz_version)
                      WHERE iddownload=?\', array($value->id))" as $cdp}
            <div class="sloupec sloupec_flexhg info_blok_l">
              <table>
                <tr>
                  <td class="key">Oddíl #CISLO Soubor</td>
                  <td class="val">{$cdp->name} stary <a href="#">stahnout</a></td>
                  <td class="val">{$cdp->name} novy <a href="#">stahnout</a></td>
                </tr>
              </table>
            </div>






            <div class="sloupec sloupec_flexhg info_blok_l">
              <table>
                <tr>
                  <td class="key">Oddíl #CISLO Trainz verze</td>
                  <td class="val">{$cdp->versions ?: \'-- nevyplněno --\'} stary</td>
                  <td class="val">{$cdp->versions ?: \'-- nevyplněno --\'} novy</td>
                </tr>
              </table>
            </div>





            <div class="sloupec sloupec_flexhg info_blok_l">
              <table>
                <tr>
                  <td class="key">Oddíl #CISLO Kuidy</td>


  {loop="$db->rawQuery(\'SELECT kuid, name FROM trainz_kuids
                        JOIN trainz_cdp_has_trainz_kuids _tchtk USING(idtrainz_kuid)
                        WHERE _tchtk.idtrainz_cdp=?\', array($cdp->idtrainz_cdp))" as $k}


                  <td class="val">{$crate::formatKuid($k->kuid)} stary</td>
                  <td class="val">{$crate::formatKuid($k->kuid)} novy</td>








  {emptyloop}


                  <td class="val">{$crate::formatKuid($k->kuid)} stary</td>
                  <td class="val">{$crate::formatKuid($k->kuid)} novy</td>







  {/loop}


                </tr>
              </table>
            </div>




{emptyloop}
  žádné položky ??? toto je nesmysl
{/loop}



*/}
{*



toto sem zakometoval 18.9.2013 20:07:43


{loop="$db->rawQuery(\'SELECT idtrainz_cdp, trainz_cdp.name, path, GROUP_CONCAT(DISTINCT trainz_versions.name ORDER BY trainz_versions.rank SEPARATOR \\\' ,\\\') versions FROM trainz_cdp
                      JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
                      LEFT JOIN trainz_cdp_has_trainz_versions USING(idtrainz_cdp)
                      LEFT JOIN trainz_versions USING(idtrainz_version)
                      WHERE iddownload=?\', array($value->id))" as $cdp}



            <div class="sloupec sloupec_flexhg info_blok_l">
              <table>
                <tr>
                  <td class="key">Kuidy</td>
                  <td class="val">



  {loop="$db->rawQuery(\'SELECT kuid, name FROM trainz_kuids
                        JOIN trainz_cdp_has_trainz_kuids _tchtk USING(idtrainz_kuid)
                        WHERE _tchtk.idtrainz_cdp=?\', array($cdp->idtrainz_cdp))" as $k}


                  {$crate::formatKuid($k->kuid)} stary








  {emptyloop}

-- nevyplněno --







  {/loop}

                  </td>
                  <td class="val">


  {loop="$db->rawQuery(\'SELECT kuid, name FROM trainz_kuids
                        JOIN trainz_cdp_has_trainz_kuids _tchtk USING(idtrainz_kuid)
                        WHERE _tchtk.idtrainz_cdp=?\', array($cdp->idtrainz_cdp))" as $k}


                  {$crate::formatKuid($k->kuid)} novy








  {emptyloop}

-- nevyplněno --




  {/loop}





                  </td>
                </tr>
              </table>
            </div>




{emptyloop}
  žádné položky ??? toto je nesmysl
{/loop}



*}
{/*

{loop="$db->rawQuery(\'SELECT idtrainz_cdp, trainz_cdp.name, path, GROUP_CONCAT(DISTINCT trainz_versions.name ORDER BY trainz_versions.rank SEPARATOR \\\' ,\\\') versions FROM trainz_cdp
                      JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
                      LEFT JOIN trainz_cdp_has_trainz_versions USING(idtrainz_cdp)
                      LEFT JOIN trainz_versions USING(idtrainz_version)
                      WHERE iddownload=?\', array($value->id))" as $cdp}
            <div class="sloupec sloupec_flexhg info_blok_l">
              <table>
                <tr>
                  <td class="key">Soubor</td>
                  <td class="val"><a href="#">{$cdp->name} stary</a></td>
                  <td class="val"><a href="#">{$cdp->name} novy</a></td>
                </tr>
              </table>
            </div>

{emptyloop}
  žádné položky ??? toto je nesmysl
{/loop}

{loop="$db->rawQuery(\'SELECT idtrainz_cdp, trainz_cdp.name, path, GROUP_CONCAT(DISTINCT trainz_versions.name ORDER BY trainz_versions.rank SEPARATOR \\\' ,\\\') versions FROM trainz_cdp
                      JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
                      LEFT JOIN trainz_cdp_has_trainz_versions USING(idtrainz_cdp)
                      LEFT JOIN trainz_versions USING(idtrainz_version)
                      WHERE iddownload=?\', array($value->id))" as $cdp}


            <div class="sloupec sloupec_flexhg info_blok_l">
              <table>
                <tr>
                  <td class="key">Trainz verze</td>
                  <td class="val">{$cdp->versions ?: \'-- nevyplněno --\'} stary</td>
                  <td class="val">{$cdp->versions ?: \'-- nevyplněno --\'} novy</td>
                </tr>
              </table>
            </div>




{emptyloop}
  žádné položky ??? toto je nesmysl
{/loop}

*/}
{*
{loop="$db->rawQuery(\'SELECT idtrainz_cdp, trainz_cdp.name, path, GROUP_CONCAT(DISTINCT trainz_versions.name ORDER BY trainz_versions.rank SEPARATOR \\\' ,\\\') versions FROM trainz_cdp
                      JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
                      LEFT JOIN trainz_cdp_has_trainz_versions USING(idtrainz_cdp)
                      LEFT JOIN trainz_versions USING(idtrainz_version)
                      WHERE iddownload=?\', array($value->old_id))" as $cdp}

  {$cdp->name}, verze: {$cdp->versions ?: \'nejsouuuu\'}<br />




  {loop="$db->rawQuery(\'SELECT kuid, name FROM trainz_kuids
                        JOIN trainz_cdp_has_trainz_kuids _tchtk USING(idtrainz_kuid)
                        WHERE _tchtk.idtrainz_cdp=?\', array($cdp->idtrainz_cdp))" as $k}
    {$crate::formatKuid($k->kuid)}
  {emptyloop}
    žádné kuidy
  {/loop}

{emptyloop}
  žádné položky
{/loop}
*}
({$value->old_id}-{$value->id})
$('.obal_stare').children()
//$('.obal_stare').children('div')$('.obal_nove').children('div')
//~ var max_count = Math.max(obal_stare.length, obal_nove.length);
$('.obal_nove').children()
$('.obal_nove').children('div')
$('.obal_stare').children()

var old_children = $('.obal_stare').children('div');old_children
var new_children = $('.obal_nove').children('div');new_children
if (obal_stare.length < obal_nove.length) {
        // novych je vic
        obal_nove.each(function(index) {
          var item_max = Math.max($(this).height(), obal_stare.eq(index).height());
          $(this).height(item_max);
          obal_stare.eq(index).height(item_max);
        });
      } else {
        // starych je vic
        obal_stare.each(function(index) {
          var item_max = Math.max($(this).height(), obal_nove.eq(index).height());
          $(this).height(item_max);
          obal_nove.eq(index).height(item_max);
        });
      }
      //~ $( ".obal_nove" ).
        //~ $(this).height(),//~ console.log(td_max);
        //~ console.log(td_max);
        //~ $(this).height(),
//~ $(this).height(),
        //~ obal_nove.eq(i).map(function() {
            //~ console.log($(this));
          //~ }).css("border", "solid 1px red");
        //~ if (obal_stare.eq(i).height() < obal_nove.eq(i).height()) {
          //~ console.log($('.obal_nove div table td.tr_ver_hg').length);
          //~ console.log($('.obal_nove div table td.kuidy_hg').height());
        //~ }
        //~ console.log(obal_stare.eq(i).nextUntil('.tr_ver_hg').height());
        //~ obal_stare.eq(i).children('table').children('tbody').children('tr').children('td').css("background-color", "red");
        //~ obal_nove.eq(i).children('table').children('tbody').children('tr').children('td').css("background-color", "red");
        //~ console.log(obal_nove.eq(i).children('table').children('tbody').children('tr').children('td:first').length);
        //~ obal_nove.eq(i).children('table').children('tbody').children('tr').children('td:second').css("border", "solid 1px red");
        //~ obal_nove.eq(i).children('table').children('tbody').children('tr').children('td').each(function() {
          //~ $(this).css("border", "solid 1px red");
          //~ console.log($(this).height());
        //~ });
        //.children('table').children('tr').children('td').children('.tr_ver_hg').height());
      //~ var tr_stare
      //~ console.log($('.obal_nove div table td.tr_ver_hg').height());
      //~ console.log($('.obal_nove div table td.kuidy_hg').height());

      // .obal_nove div table td.tr_ver_hg
      // .obal_nove div table td.kuidy_hg
if (obal_stare.length < obal_nove.length) {

          $('.obal_nove div table td.tr_ver_hg').each(function(index) {
            var td_max = Math.max($('.obal_stare div table td.tr_ver_hg').eq(index).height(), $('.obal_nove div table td.tr_ver_hg').eq(index).height());

            $('.obal_stare div table td.tr_ver_hg').eq(index).height(td_max);
            $('.obal_nove div table td.tr_ver_hg').eq(index).height(td_max);
          });

        } else {

          $('.obal_stare div table td.tr_ver_hg').each(function(index) {
            var td_max = Math.max($('.obal_stare div table td.tr_ver_hg').eq(index).height(), $('.obal_nove div table td.tr_ver_hg').eq(index).height());

            $('.obal_stare div table td.tr_ver_hg').eq(index).height(td_max);
            $('.obal_nove div table td.tr_ver_hg').eq(index).height(td_max);
          });
        }
SELECT idshoutboard, login, alias, avatar, _r.name role, message, _s.added FROM shoutboards _s
JOIN users USING(iduser)
JOIN roles _r USING(idrole)
WHERE DATE(_s.added)='2013-09-18'
return $this;
 $result = $uniq;  // nacteni pro vraceni
//~ var_dump('old: '.$ses, $this->submit_security);//~ $ses = ;

SELECT idnotification, type, added, state_old_id FROM notifications
WHERE type='message' AND IF(type='message', to_id=1, 1) AND handled_id IS NULL



SELECT idnotification, from_id, to_id,
  _from.login from_login, _from.alias from_alias, _r.name from_role,
  _to.login to_login,
  _handled.login handled_login,
  subject, message, n0.added
FROM notifications n0
JOIN users _from ON _from.iduser = from_id
JOIN roles _r ON _r.idrole = _from.idrole
LEFT JOIN users _to ON _to.iduser = to_id
LEFT JOIN users _handled ON _handled.iduser = handled_id
WHERE
  n0.deleted IS NULL AND
  type='message' AND idnotification=183
    #home/stats:
    #  - show
    #home/integrity:
    #  - show
if ($this->submit_security) {
  // obnoveni klice jen pri uspesnem pruchodu validaci
  $this->getSecurityText($this->isSuccess());
}
// toto se bude proti submit sender naopk zapinat tam kde bude zapotrebi
//~ var_dump($this->submit_security);
// metodu ktera bude neco jako isSecuritySend atd....?!
//~ var_dump('post: '.$this->getMethodValue($this->submit_security_name));
//~ var_dump($this->submit_security, $this->getSecurityText());
      //~ var_dump($this->getMethodValue($this->submit_security_name), $this->getSecurityText());
if ($security) {
        return ($this->isSubmitted() && $this->isValid() && $this->isSecurityValid());
      } else {

      }
    /**
     * bylo odeslano a je validni i bezpecnostne validni?
     * - vymezuje se na jedno odeslani pokud je security zapnuto
     * - musi se volat jen jednou!
     *
     * @since 2.96
     * @param void
     * @return true pokud je uspesne a bezpecne odeslano
     */
    public function isSecuritySuccess() {
      return $this->isSuccess() && $this->isSecurityValid();
    }
  {/*success && security: {$ff->isSecuritySuccess()}<br />*/}
  success && security: {$ff->isSuccess(true)}<br />
 if ($security) {
        return $this->isSubmitted() && $this->isValid() && ;
      } else {

      }
/*
            out += '<div class="prispevek '+(v % 2 == 0 ? 'lichy_prispevek' : 'sudy_prispevek')+'">'+
  '<div class="levy_blok">'+
    '<img src="{$weburl}img/avatars/'+jdata[v].avatar+'" alt="" onerror="this.src=\'{$weburl}img/avatars/no-profile-img.png\'" />'+
  '</div>'+
  '<div class="pravy_blok">'+
    '<p class="autor">'+jdata[v].login+(jdata[v].alias ? ' ('+jdata[v].alias+')': null)+'&nbsp;&nbsp;['+jdata[v].role+']</p>'+
    '<p class="datum">'+jdata[v].added+'</p>'+
    '<div class="zprava">'+jdata[v].message+'</div>'+
  '</div>'+
'</div>';
*/
//~ var_dump(implode($user->getRoles()));
// vrace JSON jako pri get listu!!!!!
console.log(Object.keys(jdata));
console.log(renderRow(jdata));
console.log('row', data);
 // zajistit spravne prepinani sude/liche!!!
// vkladat pres fadeIn() !!!!
//~ $(ret).html(data);
if (manual) {
          $('.prispevek').fadeIn('slow');
        }
//~ $(ret).html('');
//~ $(ret).append(out);
          //~ $('.prispevek').fadeIn('slow');
// prekopat!!!
            //~ '<div class="prispevek '+(v % 2 == 0 ? 'lichy_prispevek' : 'sudy_prispevek')+'">'+
  //~ '<div class="levy_blok">'+
    //~ '<img src="{$weburl}img/avatars/'+jdata[v].avatar+'" alt="" onerror="this.src=\'{$weburl}img/avatars/no-profile-img.png\'" />'+
  //~ '</div>'+
  //~ '<div class="pravy_blok">'+
    //~ '<p class="autor">'+jdata[v].login+(jdata[v].alias ? ' ('+jdata[v].alias+')': null)+'&nbsp;&nbsp;['+jdata[v].role+']</p>'+
    //~ '<p class="datum">'+jdata[v].added+'</p>'+
    //~ '<div class="zprava">'+jdata[v].message+'</div>'+
  //~ '</div>'+
//~ '</div>';
//~ getListMessages('.chat_content', true); // obnoveni po odeslani
        // tady vlozit vkladani jedne polozky!
        // metodu na nacitani jedno polozky databaze!
        // postup: vlozi do DB .. a obratem z ajaxu dostane vysledne JSON data pridane polozky, ty se pak predaji parametrem do funkce ktera bude vykreslovat jeden radek!!!
        //pri nasledne rucni obnoveni se pak ta funkce bude volat tolikrat kolikrat je tam polozek!!!!
// dizablovat tlacitko kdyz je textarea prazdna!!!!
//(data.idshoutboard % 2 == 0 ? ' lichy_prispevek' : ' sudy_prispevek')+
//~ $('.prispevek:odd').addClass('lichy_prispevek');
//~ $('.prispevek:even').addClass('lichy_prispevek');
//~ $('.prispevek:odd').addClass('sudy_prispevek');
//~ $(ret).html(out);//~ var out = '';//~ out += renderRow(jdata[v], false);
$('.chat_content .prispevek').css('border', 'solid 1px red')
console.log($('.chat_content .prispevek').hasClass('zadny_prispevek'));
//~ $(ret + ' .prispevek').removeClass('sudy_prispevek'); //
            //~ $(ret + ' .prispevek:first').remove();
            //~ $(ret + ' .prispevek .zadny_prispevek').removeClass('lichy_prispevek');
            //~ $(ret).html('');  // vyprazdneni obsahu
            //~ $(ret + ' .prispevek').removeClass('zadny_prispevek');
            //~ $(ret + ' .prispevek').remove();
//~ if ($(ret + ' .prispevek').hasClass('zadny_prispevek')) { // pokud je zadny prispevek
  //~ $(ret + ' .prispevek:first').css('display', 'none');  // tak ho uklidi
//~ }
console.log(index);
$upload_user->logout();
          classes\Core::setLocation($weburl . 'upload');


ALTER TABLE `trainz-cz`.`downloads_category`
DROP INDEX `rewrite_UNIQUE`

ALTER TABLE `trainz-cz`.`downloads_category`
ADD UNIQUE INDEX `rewrite_UNIQUE` (`rewrite` ASC) ;
admin:
  resources:
$db_conf['admin']['resources']
#  - reply
#  - archive
  resources:
    '':
      - show
    home:
      - show
      - list
    messages:
      - show
      - list
      - send
      - reply
      - archive
    messages/show:  # virtualni sekce
      - show
    users:
      - show
      - list
      - add
      - edit
      - del
    users/new:
      - show
      - activate
      - deactivate
    users/deactivated:
      - show
      - del
      - restore
    users/roles:
      - show
      - add
      - edit
      - del
    users/lastlogin:
      - show
    news:
      - show
      - list
      - add
      - edit
      - del
    news/icons:
      - show
      - add
      - edit
      - del
    slideshows:
      - show
      - list
      - add
      - edit
      - del
    slideshows/new:
      - show
      - activate
      - deactivate
    slideshows/integrity:
      - show
    downloads:
      - show
      - list
      - add
      - edit
      - del
    downloads/new:
      - show
      - activate
      - deactivate
    downloads/deactivated:
      - show
      - del
      - restore
    downloads/category:
      - show
      - add
      - edit
      - del
    downloads/version:
      - show
      - add
      - edit
      - del
    downloads/kuids:
      - show
      - add
      - edit
      - del
    downloads/integrity:
      - show
    links:
      - show
      - list
      - add
      - edit
      - del
    settings:
      - show
      - list
      - save
    settings/integrity:
      - show
    archive:
      - show
      - list
#    examples:
#      - show
#      - list
    faq:
      - show
      - list
    all:
      - all
$email
//~ $email = new classes\Emailer(classes\Emailer::HTML);
$email = new classes\Emailer(classes\Emailer::HTML);
          $email
{$value->alias ?: null}
{$value->alias ?: $value->login}
// soucet velikosti webu!
//~ var_dump(classes\Core::getSizeDir());
// ,  ,  ,  ,
$email = new classes\Emailer(classes\Emailer::HTML);
$email = new classes\Emailer(classes\Emailer::HTML);
        $email
$email = new classes\Emailer(classes\Emailer::HTML);
            $email
 $email = new classes\Emailer(classes\Emailer::HTML);
                $email
$email = new classes\Emailer(classes\Emailer::HTML);
                $email
$email = new classes\Emailer(classes\Emailer::HTML);
                $email
$email = new classes\Emailer(classes\Emailer::HTML);
                $email
$email = new classes\Emailer(classes\Emailer::HTML);
            $email
//~ 'argv_form_compile' => array('uri', 'crate', 'translate'),
//~ 'argv_form_compile' => array('uri', 'crate', 'translate'),
var_dump($message);
///$values['message']$values['message']$values['message']
//~ parse_str(urldecode($_POST['value']), $values); // dekodovani z url a prevedeni do pole
 , null, 'UTF-8'
  {file:soubor}
  <br />
    if (isset($values['soubor']['name']) && $values['soubor']['name'] != '') {
      classes\Core::setCharset('ISO-8859-2');

      $res[] = 'html soubor: '.$values['soubor']['name'];

      $file = file_get_contents($values['soubor']['tmp_name']);
      //~ var_dump($file);

      // parsrovani jmena objektu
      if (preg_match('/<font style="font-family: Comic Sans MS; font-size: 17px;"><b>(.+)<\/b><\/font>/', $file, $m)) {
        //~ var_dump($m);
        $res[] = 'jmeno: <input type="text" readonly size="50" value="'.$m[1].'" />';
      }

      //<table bgcolor="#c0c0c0" border="1" cellpadding="2" cellspacing="0" width="100%">
      // popisek?!

      // parsrovani jmena obrazku
      if (preg_match('/http:\/\/trainz.jedisoft.cz\/upload\/user\/[a-z0-9\.]+/', $file, $m)) {
        //~ var_dump($m);
        $img_href = basename($m[0]);
        $res[] = 'obrazek: '.$img_href;
      }

      // parsrovani autora
      if (preg_match('/<a href="http:\/\/trainz.jedisoft.cz\/modules.php\?name=Your_Account&amp;op=userinfo&amp;username=(.+)">(.+)<\/a>/', $file, $m)) {
        //~ var_dump($m);
        $res[] = 'autor: <input type="text" readonly size="50" value="'.$m[2].'" />';
      }

      // parsrovani verze
      if (preg_match('/<acronym title="">(.*)<\/acronym>/', $file, $m)) {
        //~ var_dump($m);
        $res[] = 'verze: '.$m[1];
      }

      // parsrovani cdp
      if (preg_match_all('/<a href="http:\/\/trainz.jedisoft.cz\/file.php\?IdGuest=133788&amp;IdUser=3430&amp;IdFrag=(.+)"><b>(.+)<\/b><\/a>/', $file, $m)) {
        //~ var_dump($m);
        $res[] = 'cdp frags: '.implode(' | ', $m[1]);
        $res[] = 'cdp name: '.implode(' | ', $m[2]);
      }

      // parsrovani polygonu
      if (preg_match('/<td align="center">([0-9]+)<\/td>/', $file, $m)) {
        //~ var_dump($m);
        if ($m[0] != '<td align="center">1</td>') {
          $res[] = 'polygonu: '.$m[1];
        }
      }
    }
$res = array();
<hr />
{$res|implode:'<br />'}
$upload_user->getData('login')
{$upload_user->getData('login')}

 var_dump($values['vstup']);
//~ var_dump($v, substr_count($v, 'KUID2:'));
      <form action="" method="post" autocomplete="off" class="mws-form">
        <fieldset class="mws-form-inline">
          <legend>Převodník kuid formátů z configu/původních stránek/Trainz agent/TOZ maps</legend>
          <div class="mws-form-row">
            <label class="mws-form-label">Převodník vstup/výstup</label>
            <div class="mws-form-item">
              <div class="grid_4">
                <textarea name="" value="" rows="30" class="large"></textarea>
              </div>
              <div class="grid_4">
                <textarea name="" value="" rows="30" class="large"></textarea>
              </div>
            </div>
          </div>
        </fieldset>
        <div class="mws-button-row">
          <input class="btn btn-small btn-primary btn-primary18" type="submit" name="" value="Převést">
        </div>
      </form>
//SELECT COUNT(iddownload) + (SELECT COUNT(idslideshow) pocet FROM slideshows WHERE author IS NOT NULL AND confirmed=1) pocet FROM downloads WHERE author IS NOT NULL AND confirmed=1 AND deleted IS NULL')->getFirst()->pocet;
var_dump($db->query(\'languages_has_downloads\', \'COUNT(idlanguage) pocet\', \'idlanguage=? AND name=?\', array($idlanguage, %%values%%[\'name\'][$idlanguage]))->getFirst()->pocet != 0);
$db->rollBack();
exit;
// kontrola proti ostatnim jazykum (+nesmi akceptovat mezery)
          $count_values = array_count_values($values['name']);
          if (!isset($count_values['']) && count($values['name']) != count($count_values)) {
            $flip = array_flip($count_values);  // flipnuti poctu a indexu
            $dupl = (isset($flip[2]) ? $flip[2] : null).(isset($flip[3]) ? $flip[3] : null);
            $result[] = '<strong><em>'.$dupl.'</em> již existuje v jiném jazyku!</strong>';
          }
 v jazyku ' . $translate['lang_code'][$r->code] . '
array_merge($array_values,
priadat:
SELECT Round(Sum(data_length + index_length) / 1024 / 1024, 1) size
FROM information_schema.tables
WHERE table_schema=''

            SELECT languages.code FROM languages_has_downloads_category
                                JOIN languages USING(idlanguage)
                                JOIN downloads_category USING(iddownload_category)
                                WHERE languages_has_downloads_category.name IN (?,?,?) OR downloads_category.rewrite=?
                                GROUP BY iddownload_category
array_merge($array_values,
SELECT languages.code FROM languages_has_downloads_category
                                JOIN languages USING(idlanguage)
                                JOIN downloads_category USING(iddownload_category)
                                WHERE (languages_has_downloads_category.name IN (?,?,?) OR downloads_category.rewrite=?) AND iddownload_category!=?
                                GROUP BY iddownload_category
// POZN: bacha je nadefinovano napevno na 3 jazyky
{hidden:parent}
var_dump($_cv);$db->rollBack();exit;
->put(\'level\', %%values%%[\'parent\'] ? ($crate->getDownloadCategoryLevel(%%values%%[\'parent\']) + 1) : 0) // toto stratilo smysl!
->put(\'level\', %%values%%[\'parent\'] ? ($crate->getDownloadCategoryLevel(%%values%%[\'parent\']) + 1) : 0)
    /**
     * nacitani levelu pro konkterni id download sekce (downloads_category.tpl)
     *
     * @since 1.80
     * @param int id cislo download sekce
     * @return int|null cislo urovne sekce
     */
    public function getDownloadCategoryLevel($id) {
      $c = $this->db->query('downloads_category', 'level', 'iddownload_category=?', array($id))->getFirst();
      return $c && isset($c->level) ? $c->level : null;
    }
//~ $('.prispevek:even').addClass('sudy_prispevek');  // prohozene poradi
            //~ $('.prispevek:odd').addClass('lichy_prispevek');
//~ $(ret + ' .prispevek:first').css('display', 'none');  // tak ho uklidi
//~ alert('hu?');
//~ $(ret + ' .prispevek:first').addClass('hide');  // tak ho uklidi
//~ $(ret).before('<div class="prispevek lichy_prispevek hide">...</div>');
pocet: {$list|count} && ($list = ->getAll())
<span class="idpolozky">Nalezených výrazů: CISLO OMG WTF?</span>
{if="$admin_uri.subblock == 'news'"}Novinky{/if}{if="$admin_uri.subblock == 'users'"}Uživatelé{/if}{if="$admin_uri.subblock == 'slideshows'"}Slideshow{/if}{if="$admin_uri.subblock == 'downloads'"}Download{/if}{if="$admin_uri.subblock == 'downloads' && $admin_uri.subaction == 'deactivated'"} - Deaktivované{/if}{if="$admin_uri.subblock == 'downloads' && $admin_uri.subaction == 'kuids'"} - Databáze kuidů{/if}
<span class="idpolozky">Nalezených výrazů: {$list|count}</span>
var_dump(isset($admin_uri['subblock']) ? ($admin_uri['subblock']?:1) : 1);
var_dump($db->query('slideshows', 'COUNT(idslideshow) pocet', 'confirmed=1')->getFirst()->pocet);
//~ SELECT * FROM trainz_cdp
//~ LEFT JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
//~ WHERE iddownload IS NULL
 AND iddownload IS NOT NULL
<p style="margin: 3px 0 0 0;">Soubor bude automaticky smazán!</p>
{else}
    <div class="mws-button-row">
      <p style="margin: 3px 0 0 0;" class="clearfix">{$c->name}<span class="pull-right">#{$c->idtrainz_cdp}</span></p>
    </div>
    <div class="mws-button-row">

    </div>
  {/if}
// pridat kontrolu na neexistujici vazby: CDP<-->DOWNLOADS !!!!
$fial_list
$c = $db->rawQuery('SELECT idtrainz_cdp, name, iddownload FROM trainz_cdp
                        LEFT JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
                        WHERE path=?', array($value))->getFirst();
//var_dump(array_keys($fail_size));
 {code}
      var_dump($value->iddownload);
  {/code}
  //~ $in = ;
//~ var_dump($in);
// sjednotit do: id IN (?)
// optimalizovat!!!!
DELETE _table FROM shoutboards _table WHERE idshoutboard=100

DELETE _tc FROM trainz_cdp _tc
LEFT JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
WHERE iddownload IS NULL
      //~ $poc += $db->delete('trainz_cdp _tc LEFT JOIN downloads_has_trainz_cdp _dhtc ON _dhtc.idtrainz_cdp=_tc.idtrainz_cdp', 'iddownload IS NULL', array());
      //~ var_dump($db->delete('trainz_cdp _tc LEFT JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)', 'iddownload IS NULL', array()));

SELECT COUNT(iddownload) pocet, DATE(added) datum FROM downloads
GROUP BY datum
ORDER BY datum DESC


SELECT author, COUNT(author) pocet FROM downloads
LEFT JOIN users USING(iduser)
WHERE
confirmed=1 AND
deleted IS NULL
GROUP BY author

SELECT login, alias, author, COUNT(iduser) + COUNT(author) pocet FROM downloads _d
LEFT JOIN users _u USING(iduser)
WHERE
_d.confirmed=1 AND
_d.deleted IS NULL
GROUP BY iduser, author
ORDER BY pocet DESC, login ASC, author ASC
{*
{$uri|print_r:true}
angular test:
<input type="text" ng-model="yourName" placeholder="Enter a name here">
<h1>Hello {{yourName}}!</h1>
    actiooon: {$uri|print_r:true}
*}
//~ $date_pole[date('Y-m-d', strtotime('-'.$i.' day'))] = 0;
      //~ $date_pole[strtotime(date('Y-m-d', strtotime('-'.$i.' day'))) * 1000] = '['.(strtotime('-'.$i.' day') * 1000).', 0]';
//~ ,
                //~ pointStart: {date="U", strtotime('-15 day UTC') * 1000},  // 14 dni spatny
                //~ pointInterval: {date="U", strtotime('1 day', 0) * 1000}   // den
//~ var_dump($c, $c->state_old_id, %%row_id%%);
//~ var_dump($lang_id, );
$lang_id[] = $c->state_old_id;
var_dump(%%row_id%%, $c->state_old_id);
var_dump();$db->query(\'languages_has_downloads\', \'COUNT(idlanguage) pocet\', \'idlanguage=? AND name=? AND iddownload!=?\', array($idlanguage, %%values%%[\'name\'][$idlanguage], %%row_id%%))->getFirst()->pocet
pridavani downloadu za cas<br />
{loop="$db->rawQuery('SELECT COUNT(iddownload) pocet, DATE(added) datum FROM downloads
                      GROUP BY datum
                      ORDER BY datum DESC')"}
  {$value->pocet}x {$core::getCzechDate($value->datum)}<br />
{/loop}

<br />

pridavani screensotu za cas<br />
{loop="$db->rawQuery('SELECT COUNT(idslideshow) pocet, DATE(added) datum FROM slideshows
                      GROUP BY datum
                      ORDER BY datum DESC')"}
  {$value->pocet}x {$core::getCzechDate($value->datum)}<br />
{/loop}

<br />
podil trainz verzi<br />
{loop="$db->rawQuery('SELECT name, COUNT(idtrainz_cdp) pocet FROM trainz_versions
                      JOIN trainz_cdp_has_trainz_versions USING(idtrainz_version)
                      GROUP BY idtrainz_version
                      ORDER BY pocet DESC, rank ASC')"}
  {$value->name}, {$value->pocet}x<br />
{/loop}
//~ classes\Core::setLocation($this->weburl . 'download');
//~ classes\Core::setLocation($this->weburl);
{/*
              url: '{$weburl}ajax.php',
              //~ dataType: 'json',
              type: 'POST',
              data: function (term, page) {
//~ console.log('zadano: '+term);
                  return {
                      type: 'select_trainz_kuids',
                      value: term
                    };
                },
              results: function (data, page) {
console.log('vraceno: '+data);
                  return {results: data.movies};
                }

*/}
          //~ matcher: function(term, text) {
            //~ console.log(term, text);
            //~ return text.toUpperCase().indexOf(term.toUpperCase())==0;
          //~ },
          //~ dropdownCssClass: "bigdrop"
          //~ formatResult: movieFormatResult, // omitted for brevity, see the source of this page
          //~ formatSelection: movieFormatSelection, // omitted for brevity, see the source of this page
          //~ dropdownCssClass: "bigdrop", // apply css that makes the dropdown taller
          //~ escapeMarkup: function (m) { return m; }
//~ url: "http://api.rottentomatoes.com/api/public/v1.0/movies.json",
              //~ dataType: 'jsonp',
              //~ quietMillis: 100,

              //~ data: function (term, page) { // page is the one-based page number tracked by Select2
                //~ return {
                //~ q: term, //search term
                //~ page_limit: 10, // page size
                //~ page: page, // page number
                //~ apikey: "ju6z9mjyajq2djue3gbvv26t" // please do not use so this example keeps working
                //~ };
              //~ },
   //~ results: function (data, page) {
                  //~ console.log("called by select2", data);
                  //~ var more = (page * 10) <= data.length; // whether or not there are more results available
                  //~ return { results: '', more: false };
              //~ }
              //~ results: function(bond, page) {
                //~ return {results: bond.results, more: (bond.results && bond.results.length == 10 ? true: false)}
              //~ }
 formatResult: function(movie) {
console.log('formatResult', movie);
            var markup = "<table class='movie-result'><tr>";
            if (movie.posters !== undefined && movie.posters.thumbnail !== undefined) {
                markup += "<td class='movie-image'><img src='" + movie.posters.thumbnail + "'/></td>";
            }
            markup += "<td class='movie-info'><div class='movie-title'>" + movie.title + "</div>";
            if (movie.critics_consensus !== undefined) {
                markup += "<div class='movie-synopsis'>" + movie.critics_consensus + "</div>";
            }
            else if (movie.synopsis !== undefined) {
                markup += "<div class='movie-synopsis'>" + movie.synopsis + "</div>";
            }
            markup += "</td></tr></table>"
            return markup;
        },



        formatSelection: function(movie) {
console.log('formatSelection', movie);
            return movie.title;
        },
     //~ formatSelection: function(item) { // vypis vybrane
              //~ return 'vyber: '+item.title;
            //~ },
          //~ formatResult: function(item) {  // vypis vyhledavani
              //~ return item.title;
            //~ }
//~ dataType: 'json',
array(
                array('id' => 1, 'title' => 'ola'),
                array('id' => 2, 'title' => 'ahoj'),
                array('id' => 3, 'title' => 'cau'.urldecode($_POST['value'])),
                array('id' => 4, 'title' => 'vole'.$_POST['value']),
                //~ array('id' => 5, 'title' => $_POST['value']),
                )
          );
// doplnit funkcionalitu!!!
 //~ console.log({$crate->getArrayListTrainzKuids('$(element).val()')});
//~ $kuid_cdp = isset($_POST['kuid_cdp']) ? implode(',', $_POST['kuid_cdp']) : implode(',', $kuid_cdp_db);
//~ $kuid_cdp = '';
    //~ $kuid_cdp = isset($_POST['kuid_cdp']) ? implode(',', $_POST['kuid_cdp']) : '';
// 1) pri parsrovani rozsekat podle ','
//~ '<select id="kuid_sznm_dwn_lb'+poc+'" name="kuid_cdp['+poc+'][]" class="mws-kuid-select2 large" multiple></select>'+
// jestli bude dynamicky pres select2 tak se musi po prijeti textu rozdelit podle ","
var_dump(%%values%%[\'kuid_cdp\'][$i][0], explode(\',\', %%values%%[\'kuid_cdp\'][$i][0]));%%values%%[\'kuid_cdp\'][$i]
var_dump(explode(\',\', %%values%%[\'kuid_cdp\'][$i][0]));
'<input type="hidden" id="kuid_sznm_dwn_lb'+poc+'" name="kuid_cdp['+poc+'][]" class="mws-kuid-select2 large" value="'+(data_kuid_cdp[poc] ? data_kuid_cdp[poc] : '')+'"/>'+
var_dump(%%values%%[\'kuid_dependency\'], %%values%%[\'kuid_cdp\']);
$db->rollBack();exit;
{/*
              {select:kuid_dependency[]|$|multiple|,|class|:|mws-kuid-select2 large|,|id|:|kuid_zavs_lb}
*/}
var_dump($dat[\'kuid_dependency\']);
{/*
                //~ '<select id="kuid_sznm_dwn_lb'+poc+'" name="kuid_cdp['+poc+'][]" class="mws-kuid-select2 large" multiple>{loop="$crate->getArrayListTrainzKuids()"}<option value="{$key}"'+(in_array({$key}, data_kuid_cdp[poc]) ? ' selected' : '')+'>{$value}</option>{/loop}</select>'+
*/}
'<select name="kuid_cdp['+poc+'][]" class="upload-kuid-select2" multiple>{loop="$crate->getArrayListTrainzKuids()"}<option value="{$key}"'+(in_array({$key}, data_kuid_cdp[poc]) ? ' selected' : '')+'>{$value}</option>{/loop}</select>'+
'<select name="kuid_cdp['+poc+'][]" class="upload-kuid-select2" multiple>{loop="$crate->getArrayListTrainzKuids()"}<option value="{$key}"'+(in_array({$key}, data_kuid_cdp[poc]) ? ' selected' : '')+'>{$value}</option>{/loop}</select>'+
// 2) pri nacitani nejak dostat konkretni data spatky, resp php funkci ktere se data JS pole id a vona vrati vyber kuidu v konkretnim formatu zpet do inputu!!!
var selectFormat = function(item) {
          return item.value;
        };
{select:kuid_dependency[]|$|multiple|,|class|:|upload-kuid-select2}
//~ ->setItems(\'kuid_dependency[]\', $crate->getArrayListTrainzKuids())
//~ ->setItems(\'kuid_dependency[]\', $crate->getArrayListTrainzKuids())
//~ ->setItems(\'kuid_dependency[]\', $crate->getArrayListTrainzKuids())
//~ ->setItems(\'kuid_dependency[]\', $crate->getArrayListTrainzKuids())
    /**
     * nacteni pole kuidu (downloads.tpl, index.tpl, upload_downloads.tpl)
     *
     * @since 1.72
     * @param void
     * @return arry pole polozek
     */
    public function getArrayListTrainzKuids() {
      $result = array();
      foreach ($this->db->rawQuery('SELECT idtrainz_kuid, kuid, trainz_kuids.name, _tc.name cdp_name FROM trainz_kuids
                                    LEFT JOIN trainz_cdp _tc USING(idtrainz_cdp)
                                    ORDER BY CAST(kuid AS DECIMAL) ASC, kuid ASC') as $v) {
        $result[$v->idtrainz_kuid] = '[ID: #'.$v->idtrainz_kuid.'] '.self::formatKuid($v->kuid, true) . ($v->name ? '&nbsp;&nbsp;(' . $v->name . ')' : null) . ($v->cdp_name ? '&nbsp;&nbsp;['.$v->cdp_name.']' : null);
      }
      return $result;
    }
SELECT COUNT( DISTINCT login ) count_login, COUNT( DISTINCT author ) count_author
FROM downloads _d
LEFT JOIN users _u
USING ( iduser )
WHERE _d.confirmed =1
AND _d.deleted IS NULL
login ASC, author ASC
x {$value->visible == 1 ? 'viditelnych schvalenych' : 'neviditelnych - schvalenych'}<br />
<div class="grid_4 mws-panel">
  <div class="mws-panel-header mws-panel-header-normal">
    <span class="nazevpolozky">Počet nezobrazených objektů/map</span>
    <span class="idpolozky">CISLOx</span>
  </div>
</div>
{loop="$db->rawQuery('SELECT COUNT(iddownload) pocet, visible FROM downloads
                      WHERE confirmed=1
                      GROUP BY visible
                      ORDER BY visible DESC')"}

{/loop}
<a href="{$weburl}download/hledat/x{%%id_row%%}" title="{$value->name}"></a>
substr($search, 1)
// smazani logu, toto neni 100% reseni...
        //~ $file = sprintf(ErrorLoger::DEFAULT_FILE_FORMAT, date(ErrorLoger::DEFAULT_DATE_FORMAT));
        //~ if (file_exists($file)) {
          //~ unlink($file);
        //~ }
sprintf(self::DEFAULT_FILE_FORMAT, date(self::DEFAULT_DATE_FORMAT))
sprintf(self::DEFAULT_FILE_FORMAT, date(self::DEFAULT_DATE_FORMAT))
// specialni TPL test s vypnutym autoclean a prenosu promennych z prepravky dal!!!
// trida konfiguratoru
  //~ $pole = array(
      //~ 'skupina' => array(
          //~ 'klic' => 'hodnota',
          //~ 'klic2' => 123,
      //~ ),
      //~ 'jinaskupina' => array(
          //~ 'k1' => 'ahoj',
          //~ 'k2' => 25.96,
      //~ ),
  //~ );
  //~ $encode = json_encode($pole);
  //~ var_dump($encode);  //styl konfiguratoru
  // pro adminy mini editor, kterym se dokaze protlacit vytvorit/upravit kod na serveru bez potreby ftp
  //ale tot musi byt na druhe strane hodne solidne zabezpecene!!!
// opravit pak jeste HtmlPage, Captcha, Informace o prohlizecich!!!! a jeste tirdy ktere jsou unstable a nebo u nich nebyla udelana revize...
// web:
//Tree vypis v downloadech
// dir->db synchronizer s cron podporou!!, konstroluje slozku s danyma vyjimkama jestli sedi to co je v databazi a na disku,-> prebytky na disku maze cron!
// oddelit do noveho souboru!!!
// tridu na kontrolu integrity prekladu!!! <-- stava se totiz ze preklady se nemusi ulozit vsechy pro vsechny jazyky
// sekci nebo tridu ktera bude hlidat opravneni slozek!!!!
$tt = <<<T
      $("#navigation-treeview").treeview({
          persist: "location",
          animated: "fast",
          collapsed: true,
          unique: false
      });
      $(".download-img-fancy").fancybox({
        helpers: {
          title: {
            type: 'inside'
          },
          overlay: {
            speedOut: 0
          }
        }
      });
T;
//~ var_dump(urlencode($tt));
//~ intval(
//~ var_dump(classes\DbDirComparator::synchronizeCron(array('dir' => 'img/', 'ignore' => array('default.jpg'), 'db' => array('coolislowefullhd.jpg', 'test1.jpg', 'test2.jpg', 'test3.jpg'))));
// mozne nejen dir<-->db ale tak db<-->db synchronizer, protoze kdyz se nejake radky vyexpiruji tak se taky musi smazat!!!!
// ma cenu taky udelat takovou tridu????
class DbDbComparator {} // implements classes\ICron
//~ echo $aa;
//~ throw new Exception('huhu');
//~ echo 'dsdsd';
//~ $aa = 'ahojky voliku';
//~ include('pp.php');
//~ echo 'dsddfasghtzrjtusd';

//~ $list = classes\Core::getListFile(array('path' => 'img2/', 'full' => true));
//~ $list[] = 'eflo.jpg';
//~ var_dump(classes\Core::cleanExpire($list, '2 day'));
//~ var_dump(classes\Core::cleanCount($list, 98));
// GUI k user konfiguracim, alias guiko jako nastavka nad neon formatovacima konfigama
class GuiConfigurator {
  //tato trida az tak nespecha, nej urcit format!!!
}
// GUI k vypisu souboru z konkretni slozky
// GUI k souborum error logu atd...
class GuiListFiles {
  //tato trida taky az tak nespecha...
}
// sekci kde se bude nastavovat emaily pro konkretni notifikace (bude zrejme sekci gui konfiguratoru nacitany z neonu)
// uzivatele-> editovat
//nesmi videt opravnenu pri prihlaseni uzivatele, nesmi si editovat login a potvrzovani a roli (vymenovani formularu!)
//....
//v uzivatelske seci upload:  pri zmene hesla nebo zmene emailu se musi deaktivovat autorizaci emailu!!!

 // upravit TPL tak aby bylo moznost vytvaret tplka jako samostatne stranky
 //s tim ze index bude asi klasicky vygenerovany nebo proste napsany v tpl a definovany v indexu
 //ale asi by to melo byt rozsireni tridy Web ktera by mohla prijimat / vytvaret(poprve) stranky ktere by zastoupily nadmerne vytvareni obalove tridy
 //nebo proste taky muze byt to ze menu bude jeden tpl layout generovany z pole obsahujici konstrukci menu ze ktereho se bude urcovat jen url cesta a toto tpl menu se jen vlozi do indexu
 //jeste by se prinejlepsim udelala nejaka pomocna trida ktera by pomahala s komplexnim zpracovanim polozek menu... protoze to zpracovani je pri ruznych variantach stejne, lisi se jen html a slozitost
  // dasli novinka co by tam mela byt! je to ze admin by mel byt naprosto mudularni system! tj nepsat admin
  //na mirua ale mit moduly ktere moznoni podle konfigurace nadefinova defaultni pristupy a vypisi nad databazi!
  /**
   * trida pro nacitani promenne konfigurace
   * -v podstate nova verze konfiguratoru ze stareho systemu
   *
   * @package unstable
   * @author geniv
   * @version 1.00
   */
  //~ class variableConfigurator {
    //myslenka: konfigurator ktery bude tahat polozky z pouzivane databaze (json/pdo), a budou schopny nacitat data ve strankach/templatech z globalni instance
    //proste brutalne nova verze konfiguratoru, pri JS strance zasadne pouziti angularJS
  //~ }
//~ $tpl = new classes\Tpl;
//~ $tpl->assign(array('sekce' => '..sekce..', 'menu' => '..menu..'));
//~ echo $tpl->template('main');
//~ var_dump(classes\Tpl::synchronizeCron());
/*
$neon_layout = <<<T
home:
  name: domu
  link: ''
  menu:
    home:
      name: m 0 1
    sekce00:
      name: m 0 2
sekce1:
  name: sekce 1
  js:
    external: [externi skrity, dalsi externi]
    embed: embed skripty...
  menu:
    home:
      name: m 1 1
      js:
        external: [a nejaky dalsi skript]
    sekce11:
      name: m 1 2
      js:
        embed: specialni embed skripty...
sekce2:
  name: sekce 2
  menu:
    home:
      name: m 2 1
    sekce22:
      name: m 2 2
sekce3:
  name: sekce 3
  menu:
    home:
      name: m 3 1
    sekce33:
      name: m 3 2
T;

$m = classes\Menu::simple(classes\Configurator::decode($neon_layout), 'a/b/c/d/e/f', 'home'); //, $weburl.'admin/', 1
//~ print_r($m->getJS('external'));
//~ print_r($m->getJS('embed'));
$tpl = classes\Tpl::draw('main_menu', array('auto_create' => true, 'force_compile' => true));
echo $tpl->assign('menu', $m);
exit(1);
*/

/*
$text = '<p>toto ma byt nejaky super text</p>
<p>gfdgsdgdsfdsfsd</p>
<p>&nbsp;dsfsdfsdfdsfdsfsd</p>
<p>a a &nbsp;wad wa d aw<em>d wa dwa d wa dwa</em> d wad wa d</p>
<p>awdwadsa dsafdsfdsfsdfsa sad sad sadsa dsa dwadsad&nbsp;</p>
<p>safdsafsdgdsgsd</p>
<p>čtřzžhfewrč&scaron;řčžh rtř &yacute;čr řhz fds htrj trt hž&yacute;ř&aacute;k znrthžr ztfs</p>
<p>+ě&scaron;čřž&yacute;&aacute;&iacute;&eacute;=pokjftrřžtzghjngtesrzht</p>
<p>fsdfsdfsd s fsd fsdf</p>';

var_dump($text, '...', classes\Core::trimParagraphs($text, 3), classes\Core::getCountParagraphs($text));
*/

/*
$neon_config = <<<T
novinky:
  description: nejaky libovolny popisek ci poznamka k sekci
  pocetPolozekNaStranku: 4
  pocetOdstavcuNaPolozku: 3
T;
var_dump(classes\Configurator::decode($neon_config));
*/

//~ class aa {
  //~ public function __construct() {
    //~ $this->object = new classes\TplForm;
    //~ $this->object->setCode('{file:nazev|@|maxfilesize|:|....|:|1024}');
    //~ $_POST = array('__button__' => '...',);
    //~ $_FILES = array('nazev' => array('name' => '', 'type' => '', 'tmp_name' => '', 'error' => 4, 'size' => 0));
    //~ $this->object->render();
    //~ var_dump($this->object->isSubmitted());
    //~ var_dump($this->object->isValid());
  //~ }
  //~
//~ }
//~ new aa;

//~ classes\ImageMaker::resize('coolislowefullhd.jpg', 'test1.jpg', 2280, 2280);
//~ classes\ImageMaker::resize('types_of_photographers.jpg', 'test2.jpg', 2280, 2280);
  //~ abstract class aa {
    //~ public function gg() {
      //~ echo "bleee\n";
    //~ }
    //~
    //~ public function __construct() {
      //~ echo "hu konstriktor aa\n";
    //~ }
  //~ }
  //~
  //~ class bb extends aa {
    //~ public function gg() {
      //~ echo "hu\n";
    //~ }
    //~
    //~ public function __construct() {
      //~ echo "hu konstriktor bb\n";
    //~ }
  //~ }
  //~
  //~ $bb = new bb;
  //~ $bb->gg();
//~ classes\Core::deleteCookie('hopla');
//~ classes\Core::deleteCookie('PHPSESSID');

//~ new classes\User('kk');
//-------------------------------


//~ $session = new classes\Session;
//~ $session->setExpiration(0);
//~ $ss = $session->getSection('pokus1');

//~ $ss->setExpiration('2 hours');
  //~ ->setClearAfterExpire(true);
//~ $ss->revalidate();

//~ var_dump($ss->getExpiration());
//~ $_SESSION = null;

//~ $ss->revalidate();

//~ $session->revalidate();
//~ var_dump($session->getExpiration());
//~ var_dump('start: '.$session->isStarted(), $session->isExists());
//date('d.m.Y H:i:s',

//~ $ss->aa = 'ahoj';
//~ $ss->cc = 984564845664454;
//~ var_dump('---------', $ss->aa, $ss->cc, '---------');
//~ var_dump('ss expire: '.date('d.m.Y H:i:s', $ss->getExpirationTime()), $ss->getExpiration());
//~ var_dump(session_name(), session_id());

//~ var_dump($_SESSION['localhost']['_DATA_']['pokus1']);
//~ print_r($_SESSION);
//~ print_r($_COOKIE);

//~ var_dump($_SESSION);
//~ var_dump($_COOKIE);

//~ exit;

//~ $gg->blee = 'dsd sfhgs ě+čers ed';
//~ $gg->aaa = 513;
//~ var_dump(date('d.m.Y H:i:s',$gg->getExpirationTime()));

//~ unset($_SESSION);


//~ var_dump(date('d.m.Y H:i:s',$session->getExpirationTime()));


//~ var_dump('start: '.$session->isStarted());
//~ var_dump($ss->aa, isset($ss->aa), isset($ss->bb), $ss->bb);
//~ unset($ss->aa);
//~ unset($ss->bb);
//~ var_dump($ss->aa, $ss->bb);
//~ var_dump(isset($ss->aa), isset($ss->bb));

//~ var_dump($session->getId());
//~ var_dump($session->getName());
//~ $session->setName('hopla');
//~ var_dump($session->getName());
//~ var_dump($session->isExists());

//~ var_dump($_SESSION);
//~ $session->close();

//~ print_r($_SESSION);
//~ print_r($_COOKIE);

//~ var_dump(classes\Core::isChrome());
//~ var_dump(classes\Core::implodeTitle(array('a', 'b', 5, null, 'c', '', 'd')));
//~ var_dump(classes\Core::getFileOwner('index.php', false));
//~ var_dump(classes\Core::getHost('10.10.2.3'));

//~ var_dump($session->getCookieParameters());

//~ var_dump('start: '.$session->isStarted());
//~ var_dump($_SESSION, $_COOKIE);


//~ $session->regenerateId();

//~ $session->destroy();

//~ var_dump('start: '.$session->isStarted());
//~ var_dump($_SESSION, $_COOKIE);



//~ var_dump(date(DateTime::COOKIE));

//~ var_dump('pokus1: ', $session->hasSection('pokus1'), 'pokus2: ', $session->hasSection('pokus2'));

//~ var_dump($_SESSION);
//~
 //~ $dd = new DateTime;
 //~ $dd->setTimestamp(1367356589);
//~ var_dump(date(DateTime::COOKIE, strtotime('+2 hours')));

//~ var_dump(classes\DateAndTime::from()->__toString());
//~ var_dump(classes\DateAndTime::from(30)->__toString());

//~ var_dump(classes\DateAndTime::from('+2 hours')->__toString());
//~ var_dump(classes\DateAndTime::from(1367356589)->__toString());
//~ var_dump(classes\DateAndTime::from('now')->format('U'));
//~ var_dump('i:'.classes\DateAndTime::from($dd)->format(DateTime::ISO8601));
//~
 //~ $cc = new DateTime('+2 hour');

//1367356589
//31557600

//~ var_dump('....>',date('d.m.Y H:i:s', 31557600), date('d.m.Y H:i:s', strtotime('January 1 1470 00:00:00 GMT')), strtotime('January 1 1470 00:00:00 GMT'), date('d.m.Y H:i:s', strtotime('January 1 1970 00:00:00 GMT')));


        //~ var_dump(classes\DateAndTime::from('+2 hours')->format('U'), time());
        //~
        //~ var_dump('d: '.date(DateTime::COOKIE, strtotime('+2 hours')).' :: '.$cc->format(DateTime::COOKIE).' :: '.$dd->format(DateTime::COOKIE));
        //~ var_dump(strtotime('now'));
        //~ //setcookie('expire', 'test', $date->format(DateTime::COOKIE), "/");
//~ var_dump(headers_list(), 'cc: '. $cc->format('D, d M Y H:i:s \G\M\T'));
  // upravit tridy Tpl nebo Web proto aby byla moznost pouzivate TPL templaty jako samostatne soubory nad tpl tridou bez nutnosti to norit do vlastni tridy ktera
  //teprve tvori obal pro samotne pouziti tpl-ka
//~ var_dump($_SESSION['localhost']['_DATA_']['userab']);
//~ $_SESSION['localhost']['_DATA_']['userab']['identity'] = null;

//~ var_dump(classes\Core::getInteligentRewrite('První pokusná Sekce'));


//~ $text = '  První pokusná Sekce a 12šč5-6ý89é  -  dsf  sdsad        sdas<AF <{>sd (sajd )s[][`}@/°"(/!\/°#&@{}^<>*\'!":_:?→€Đ@{<>*Łþ[]\'$d sads,mnm';
//~ var_dump($text, '<br />', classes\Core::getRewrite($text), '<br />', classes\Core::getInteligentRewrite($text));
//, classes\Core::getSafeText($text, '/[a-z0-9_ \-\.\(\)]{1}/'), classes\Core::getInteligentRewrite($text));
//3chyby
$string = '
123456:687455
123456:687454:5454:423:123
123456:687453:54
123456:687452:1
123456:687451
123456:44444
123456:-6156
123456:6274
123456:6998::1
-456:68756
-524:441:5487
';

//bez chyby
$string2 = '
123456:687455
123456:687454:545
123456:687453:54
123456:687452:1
123456:687451
123456:44444
123456:56
123456:6274
123456:6
-456:68756
-524:441:5487
';

//~ $string = '
//~ 123456:687455
//~ 123456:687454:5454
//~ 123456:687453:54
//~ 123456:687452:1
//~ 123456:687451
//~ 123456:44444
//~ 123456:6156
//~ 123456:6274
//~ 123456:6998:1
//~ -456:68756
//~ -524:441:5487
//~ ';

// dimpelementovat jako hromadnou kontrolu!!


//~ ->addRule(\'kuid_dependency_plain\', function($value) {
        //~ $explode = array_filter(explode(PHP_EOL, $value));
        //~ $poc = 0;
        //~ foreach ($explode as $row) {
          //~ if (preg_match('/-?[0-9]+:[0-9]+(?::[0-9]+)?/', $row, $match) && $row == $match[0]) {
            //~ $poc++;
          //~ }
        //~ }
        //~ return count($explode) == $poc;
    //~ }, \'musi splnovat spravky kuid format\')


  //~ $expl = array_filter(explode(PHP_EOL, $string));
  //~ $pc = 0;
  //~ foreach ($expl as $v) {
    //~ if (preg_match('/-?[0-9]+:[0-9]+(?::[0-9]+)?/', $v, $match) && $v == $match[0]) {
      //~ $pc++;
    //~ }
  //~ }
  //~ var_dump($pc == count($expl) ? 'je to spravne! ;)': 'je to idiotsky!!!!', $pc . ' vs ' . count($expl));

  //~ var_dump(preg_match('/-?[0-9]+:[0-9]+(?::[0-9]+)?/', $string, $match), $match);
  //~ var_dump(count($match[0]) === count(array_filter(explode(PHP_EOL, $string))));
//~ (?:,(?<argv>.*?))?
//~ (?:)?

  //~ $string = '';
  //~ var_dump(preg_match_all('/(\-)?[0-9]+\:[0-9]+(\:[0-9]+)?/s', $string, $match), $match[0]);
  //~ var_dump(count($match[0]) === count(array_filter(explode(PHP_EOL, $string))));

/*
 * jestli bude potreba bude to skladat tady ty 2 tridy,
 * myslenka: trida ktera bude za zaklada nejakeho nastaveni vystavet kompletni spravu zadanych akci list/add/edit/del a dalsi volitelne,
 * musi obsahovat metody na pridavani techto akci, mozna to budou muset nejak resit tovarni metody, musi to byt hlavne variabilni na jine pridavaci metodiky nez add/edit/del ...
 * to kvuli tomu by mela trida mnohome vetsi uplatneni a v podstate jde o to aby se uplne nebo z vetsi casti odstranila potreba zdlouhave opisovat furt stejne postupy u administrace stranek;
 * trida by mela pracovat s html generatorem a tyto veci nejspis bude generovat jen dynamicky, protoze u masivnejsich adminu by bylo vic templatu v adminu nez pomalu ve stranakch samotych
 *
 * tyto tridy musi byt schopny zpracovat admin cast ktera pouziva soubory (json/?xml?) a taky databaze
 * -mozna inspirace muze byt nad tridama ktere v androidu ktere tvori alertbuilder...
 */
{/*
{loop="range(1, 20)"}
  c1: {$counter1}<br />

  {loop="range(2, 30)"}
    c2: {$counter1}-{$counter2}<br />
  {/loop}
{/loop}
*/}

<hr /><hr />
{code}
  $sekce = $section::build($weburl, '$uri.action', '$uri.id'); // rovnou zkouset nad nejakou jednoduchou sekci!!!!
  //$sect->configureForm();
  $sekce
        ->setTable('news', 'idnews')
        ->setFormCode('
{text:name[1]|$|maxlength|:|100|@|filled|:|vyplnit!}*<br/>
{text:name[2]|$|maxlength|:|100|@|filled|:|vyplnit!}*<br/>
{text:name[3]|$|maxlength|:|100|@|filled|:|vyplnit!}*<br/>
<br/>
{text:description[1]|$|maxlength|:|100|@|filled|:|vyplnit!}*<br/>
{text:description[2]|$|maxlength|:|100|@|filled|:|vyplnit!}*<br/>
{text:description[3]|$|maxlength|:|100|@|filled|:|vyplnit!}*<br/>
<br/>
%%save_button%%
        ', array('class'=>'mws-form'))
        ->setList(array(
            'name' => '{$value->nazev}',
            'description' => '{$value->popis}',
            'query' => '$db->rawQuery(\'SELECT idnews, users.login, news_icons.name icon_name, news_icons.path icon_path, languages_has_news.name name, languages_has_news.description description, news.added, news.edited FROM news
                                        JOIN languages_has_news USING(idnews)
                                        JOIN languages USING(idlanguage)
                                        JOIN news_icons USING(idnews_icon)
                                        JOIN users USING(iduser)
                                        WHERE languages.code=?\', array(\'cs\'))',
          ))
        ->setAdd(array(
            'else_link' => '<span>%%title%% (hovinko)</span>',
            'enabled' => false,
          ))
        ->setEdit(array(
            //~ 'ignore' => array(1, 2),
            'query_separator' => array('idlanguage' => array('name', 'description')),
            'query' => '$db->rawQuery(\'SELECT iduser, idnews_icon, idlanguage, idnews, languages_has_news.name, languages_has_news.description FROM news
                                        JOIN languages_has_news USING(idnews)
                                        JOIN languages USING(idlanguage)
                                        JOIN news_icons USING(idnews_icon)
                                        JOIN users USING(iduser)
                                        WHERE idnews=?\', array(12))',
          ))
        ->setDel(array(
            //~ 'ignore' => array(1, 2),
          ))
        ;
{/code}

{/*compile="$sekce->render()"*/}

SELECT * FROM trainz_cdp
JOIN trainz_cdp_has_trainz_kuids USING(idtrainz_cdp)
JOIN trainz_kuids USING(idtrainz_kuid)
WHERE trainz_kuids.idtrainz_cdp IS NULL

//UPDATE users SET idrole=1 WHERE idrole=OLD.idrole;
$db->rollBack();
exit;
/*
 prekopat opravit a naaplikovat!!! (je to tu v transakci!)

      IF OLD.alias THEN
        UPDATE slideshows SET author=OLD.alias WHERE iduser=OLD.iduser;
        UPDATE downloads SET author=OLD.alias WHERE iduser=OLD.iduser;
      ELSE
        UPDATE slideshows SET author=OLD.login WHERE iduser=OLD.iduser;
        UPDATE downloads SET author=OLD.login WHERE iduser=OLD.iduser;
      END IF;
*/
$p=
var_dump(%%row_id%%, $p);
$db->rollBack();
exit;

/*
        // nasadit + otestovat: (je to tu v transakci!)
  -- odmazani cdp
  DELETE FROM trainz_cdp
  WHERE idtrainz_cdp IN (SELECT idtrainz_cdp FROM downloads_has_trainz_cdp WHERE iddownload=OLD.iddownload);

  -- odmazani download-cdp M:N
  DELETE FROM downloads_has_trainz_cdp
  WHERE iddownload=OLD.iddownload;

  -- odmazani download-language M:N
  DELETE FROM languages_has_downloads
  WHERE iddownload=OLD.iddownload;




SELECT * FROM trainz_cdp
  WHERE idtrainz_cdp IN (SELECT idtrainz_cdp FROM downloads_has_trainz_cdp WHERE iddownload=5)

SELECT * FROM downloads_has_trainz_cdp
  WHERE iddownload=5;

SELECT * FROM languages_has_downloads
  WHERE iddownload=5;

*/

sql-vyradit:
SELECT * FROM information_schema.TRIGGERS

trigger1:

DELIMITER $$
USE `trainz-cz`$$
DROP TRIGGER IF EXISTS `trainz-cz`.`roles_BDEL` $$
DELIMITER ;

trigger2:

DELIMITER $$
USE `trainz-cz`$$
DROP TRIGGER IF EXISTS `trainz-cz`.`users_BDEL` $$
DELIMITER ;

trigger3:

DELIMITER $$
USE `trainz-cz`$$
DROP TRIGGER IF EXISTS `trainz-cz`.`downloads_BDEL` $$
DELIMITER ;
////HOTOVO!!!/////

// odzkouset aby se pri novem cdp neprerusily vazby a nebo aby se vubec nerusily pokud se opravuje pouze obrazek!!!!
var_dump("old: ".$cdp[$i]->idtrainz_cdp);
var_dump("new: ".$id_cdp);
              // dodelelat update!
//pokud jsou ID stejny puvodni i nove tak se nic nemenilo, pokud jsou jine musi se v kuidu poupravit id cdp ze stareho na nove!!!!!!!!
var_dump($old_id_cdp, $id_cdp);
var_dump("probiha zmena cdp ID z: ".$old_id_cdp.", na: ".$id_cdp);
// pokud se zmeni soubor + projede se cron vyrusi se vazby na cdp ke konkretnimu cdp u kuidu -> reseni vzit stare ID cdp a to nahradit v kuidech tim novym
foreach ($db->rawQuery(\'SELECT * FROM trainz_kuids
                        WHERE idtrainz_kuid IN (SELECT idtrainz_kuid FROM trainz_cdp_has_trainz_kuids WHERE idtrainz_cdp=?)\', array($cdp[0]->idtrainz_cdp)) as $v) {
  echo (\'idkuid: \'.$v->idtrainz_kuid.\' - idcdp: \'.$v->idtrainz_cdp) . \'<br>\';
}
echo \'
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
<br>
\';

foreach ($db->rawQuery(\'SELECT * FROM trainz_kuids
                        WHERE idtrainz_kuid IN (SELECT idtrainz_kuid FROM trainz_cdp_has_trainz_kuids WHERE idtrainz_cdp=?)\', array($cdp[0]->idtrainz_cdp)) as $v) {
  echo (\'idkuid: \'.$v->idtrainz_kuid.\' - idcdp: \'.$v->idtrainz_cdp) . \'<br>\';
}

//~ $db->rollBack();
//~ exit;

foreach ($db->rawQuery(\'SELECT * FROM trainz_kuids
                        WHERE idtrainz_kuid IN (SELECT idtrainz_kuid FROM trainz_cdp_has_trainz_kuids WHERE idtrainz_cdp=?)\', array($cdp[0]->idtrainz_cdp)) as $v) {
  echo (\'idkuid: \'.$v->idtrainz_kuid.\' - idcdp: \'.$v->idtrainz_cdp) . \'<br>\';
}
var_dump($old_id_cdp, $id_cdp);
echo \'
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
<br>
\';

foreach ($db->rawQuery(\'SELECT * FROM trainz_kuids
                        WHERE idtrainz_kuid IN (SELECT idtrainz_kuid FROM trainz_cdp_has_trainz_kuids WHERE idtrainz_cdp=?)\', array($cdp[0]->idtrainz_cdp)) as $v) {
  echo (\'idkuid: \'.$v->idtrainz_kuid.\' - idcdp: \'.$v->idtrainz_cdp) . \'<br>\';
}
$db->rollBack();
exit;
$in = '
<p><span id="result_box" lang="en" tabindex="-1"><span class="hps">Uzkorozchodn&aacute; v&yacute;topna se dvěma m&iacute;sty pro rozchod 760mm. <br />Velmi děkuji Baldovi, kter&yacute; mi pomohl vyře&scaron;it probl&eacute;my s t&iacute;mto objektem.<br /></span></span></p>

<p><span id="result_box" class="short_text" lang="en" tabindex="-1"><span class="hps">Reskin elektrick&eacute; lokomotivy 181 009 ve služb&aacute;ch ČD.<br /></span></span></p>

<p><span id="result_box" class="short_text" lang="en" tabindex="-1"><span class="hps">DC</span> <span class="hps">universal</span> <span class="hps">locomotive</span> <span class="hps">ZSR</span> <span class="hps">163</span> <span class="hps">colors</span> <span class="hps">..</span></span></p>

<p><span id="result_box" lang="en"><span class="hps">Platforms with</span> <span class="hps">underpasses</span> <span class="hps">have a height of</span> <span class="hps">60 cm</span>. <span class="hps">Subways</span> <span class="hps">are available in two</span> <span class="hps">versions.</span> <span class="hps">With inscription</span> <span class="hps">station</span> <span class="hps">in texture</span>, <span class="hps">are adapted</span> <span class="hps">to</span> <span class="hps">arc</span> <span class="hps">around and</span> <span class="hps">rewritable</span> <span class="hps">sign</span> <span class="hps">that</span> <span class="hps">they are straight</span>.<br /><span class="hps">The platforms</span> <span class="hps">are</span> <span class="hps">also</span> <span class="hps">of two kinds,</span> <span class="hps">the first</span> <span class="hps">number 1</span> <span class="hps">are</span> <span class="hps">more</span> <span class="hps">grassy</span>. <span class="hps">Trodden</span> <span class="hps">grass</span> <span class="hps">strips</span> <span class="hps">are</span> <span class="hps">wider</span> <span class="hps">on one side</span>, <span class="hps">so that</span> <span class="hps">the clutch</span> <span class="hps">"s"</span> <span class="hps">for</span> <span class="hps">both sides of the</span> <span class="hps">subways.</span><br /><span class="hps">The</span> <span class="hps">number of</span> <span class="hps">polygons</span> <span class="hps">for</span> <span class="hps">subways</span> <span class="hps">roof.</span><br /><strong><span class="hps">Update 1</span>:</strong><br /><span class="hps">- Added</span> <span class="hps">file</span> <span class="hps">objects</span> <span class="hps">for</span> <span class="hps">Ts2009</span> <span class="hps">and</span> <span class="hps">TS10</span>. <span class="hps">Original</span> <span class="hps">file for</span> <span class="hps">TRS2004</span> <span class="hps">and</span> <span class="hps">TRS2006</span> <span class="hps">is</span> <span class="hps">only</span> <span class="hps">renamed.</span></span></p>

<p><span id="result_box" lang="en"><span class="hps">Platforms</span> <span class="hps">are</span> <span class="hps">done</span> <span class="hps">in the map</span> <span class="hps">Praha</span> <span class="hps">-</span> <span class="hps">Plzeň</span> <span class="hps">from the author</span> <span class="hps">asrajera</span>. <span class="hps">They were made</span> <span class="hps">mainly</span> <span class="hps">size</span> <span class="hps">in width</span> <span class="hps">and end</span> <span class="hps">towards the main</span> <span class="hps">station</span> <span class="hps">as</span> <span class="hps">scenery.</span> <span class="hps">Scenery</span> <span class="hps">is</span> <span class="hps">the transition</span> <span class="hps">between</span> <span class="hps">11.5 meters</span> <span class="hps">to</span> <span class="hps">6.5 meters</span> <span class="hps">(language</span>) <span class="hps">and</span> <span class="hps">turn</span> <span class="hps">the fence</span> <span class="hps">on</span> <span class="hps">the fence</span> <span class="hps">for</span> <span class="hps">the platform</span> <span class="hps">Ia.</span> <span class="hps">It also includes a</span> <span class="hps">side</span> <span class="hps atn">(</span>not) <span class="hps">platform</span> <span class="hps">with a fence</span> <span class="hps">and a separate</span> <span class="hps">part of the</span> <span class="hps">fence</span> <span class="hps">with</span> <span class="hps">wire mesh</span> <span class="hps">2</span> <span class="hps">and tailpiece</span> <span class="hps">with columns</span> <span class="hps">on both</span> <span class="hps">sides.</span> <span class="hps">Platform</span> <span class="hps">with a width of</span> <span class="hps">8 meters</span> <span class="hps">are</span> <span class="hps">one-sided</span> <span class="hps">to</span> <span class="hps">the station building</span>.<br /><span class="hps">All platforms</span> <span class="hps">are</span> <span class="hps">for</span> <span class="hps">passengers</span> <span class="hps">height</span> <span class="hps">60 cm</span> <span class="hps">above ground level</span>. <span class="hps">Subways</span> <span class="hps">are not yet</span>.<br /><span class="hps">First</span> <span class="hps">Review:</span><br /><span class="hps">- Added</span> <span class="hps">file</span> <span class="hps">objects</span> <span class="hps">for</span> <span class="hps">Ts2009</span> <span class="hps">and</span> <span class="hps">TS10</span>.<br /><span class="hps">-</span> <span class="hps">In the original</span> <span class="hps">file</span> <span class="hps">for</span> <span class="hps">TRS2004</span> <span class="hps">and</span> <span class="hps">TRS2006</span> <span class="hps">Some have been modified</span> <span class="hps">object names</span>. <span class="hps">Modified</span> <span class="hps">files</span> <span class="hps">for textures</span> <span class="hps">with alpha</span> <span class="hps">line</span> <span class="hps">of</span> <span class="hps">"hint</span> <span class="hps">=</span> <span class="hps">dynamic"</span></span></p>

<p><span id="result_box" lang="de" tabindex="-1"><span class="hps">Es gibt</span> <span class="hps">einige</span> <span class="hps">schmale</span> <span class="hps">Plattform mit</span> <span class="hps">einer H&ouml;he von 45</span> <span class="hps">cm</span> <span class="hps">von zwei Arten</span>. <span class="hps">Einer der</span> <span class="hps">Abschr&auml;gung</span> <span class="hps">45 cm</span> <span class="hps">in</span> <span class="hps">sn&aacute;stupn&iacute;</span> <span class="hps">Spuren an 30</span> <span class="hps">cm</span> <span class="hps">auf der gegen&uuml;berliegenden Seite</span>. <span class="hps">Radot&iacute;n</span>, die sp&auml;ter kommen <span class="hps">und</span> <span class="hps">werden durch einen Buchstaben</span> <span class="hps">im Namen des</span> <span class="hps">R.</span> <span class="hps">Der zweite Typ</span> <span class="hps">mit einer flachen Oberfl&auml;che</span> <span class="hps">in einer H&ouml;he von</span> <span class="hps">45 cm</span> <span class="hps">ermittelt</span> <span class="hps">-</span> <span class="hps">Diese sind speziell</span> <span class="hps">f&uuml;r verdeckte</span> <span class="hps">Peron</span> <span class="hps">Bahnhof</span> <span class="hps">Praha</span> <span class="hps">konzipiert.</span><br /><span class="hps">F&uuml;r jede Art von</span> <span class="hps">Peron</span> <span class="hps">gibt zwei Arten von</span> <span class="hps">Anf&auml;ngen und Enden</span>. <span class="hps">Es ist</span> <span class="hps">so</span>, dass, wenn Sie beginnen <span class="hps">College</span> <span class="hps">links</span>, <span class="hps">so dass Sie</span> <span class="hps">am Anfang beginnen</span>, <span class="hps">dann</span> <span class="hps">eine eigene Plattform</span>, und beenden <span class="hps">Ende</span> <span class="hps">zusammen.</span><br /><span class="hps">Dann gibt es die</span> <span class="hps">Insel</span> <span class="hps">Plattform, um &uuml;ber</span> <span class="hps">10 ms</span> <span class="hps">Oberfl&auml;che</span> <span class="hps">H&ouml;he</span> <span class="hps">60 cm</span> <span class="hps">und 2</span> <span class="hps">Unterf&uuml;hrungen</span> <span class="hps">f&uuml;r diese</span> <span class="hps">H&ouml;he</span> <span class="hps">zu werfen.</span> <span class="hps">Die Beendigung der</span> <span class="hps">Plattform</span> <span class="hps">ist an dem Ende</span> <span class="hps">verbunden ist.</span> <span class="hps">Hier</span> <span class="hps">unterscheiden wir</span> <span class="hps">Anfang und Ende</span>, weil <span class="hps">die Plattform</span> <span class="hps">ist symmetrisch.</span><br /><span class="hps">Alle</span> <span class="hps">Objekte au&szlig;er</span> <span class="hps">U-Bahnen,</span> <span class="hps">die wie die</span> <span class="hps">Landschaft, die</span> <span class="hps atn">Spur (</span>Spline) <span class="hps">sind</span>. <span class="hps">Spline</span>-Objekte sind <span class="hps">napojiten&eacute;</span> <span class="hps">zueinander</span> <span class="hps">so</span>, wenn Sie <span class="hps">Elektrifizierung</span> <span class="hps">haben</span>, <span class="hps">so</span> <span class="hps">vorsichtig sein, um</span> <span class="hps">nicht beitreten</span>.</span></p>

<p><span id="result_box" lang="en" tabindex="-1"><strong><span class="hps">Update 1</span>:</strong><br /><span class="hps">- Added</span> <span class="hps">file</span> <span class="hps">objects</span> <span class="hps">for</span> <span class="hps">Ts2009</span> <span class="hps">and</span> <span class="hps">TS10</span>. <span class="hps">Original</span> <span class="hps">file for</span> <span class="hps">TRS2004</span> <span class="hps">and</span> <span class="hps">TRS2006</span> <span class="hps">is</span> <span class="hps">only</span> <span class="hps">renamed</span></span></p>

<p><span id="result_box" lang="en" tabindex="-1"><span class="hps">Roofing</span> <span class="hps">platform</span> <span class="hps">for</span> <span class="hps">Prague</span> <span class="hps">Sm&iacute;chov</span> <span class="hps">on the map</span> <span class="hps">Praha</span> <span class="hps">-</span> <span class="hps">Plzeň</span> <span class="hps">from the author</span> <span class="hps">asrajera</span>. <span class="hps">Coverings</span> <span class="hps">are made</span> <span class="hps">by</span> <span class="hps">the widths</span> <span class="hps">of platforms</span> <span class="hps">and some</span> <span class="hps">are</span> <span class="hps">even</span> <span class="hps">variants</span> <span class="hps">with</span> <span class="hps">different textures</span> <span class="hps">roofs.</span> <span class="hps">Length of the part</span> <span class="hps">is</span> <span class="hps">also</span> <span class="hps">sometimes</span> <span class="hps">adapted</span> <span class="hps">building</span> <span class="hps">roof covering</span>. <span class="hps">The only thing</span> <span class="hps">is</span> <span class="hps">the</span> <span class="hps">glass</span> <span class="hps">part of</span> <span class="hps">the building</span> <span class="hps">jenžto</span> <span class="hps">not</span> <span class="hps">to</span> <span class="hps">Trainz</span> <span class="hps">or</span> <span class="hps">actual</span> <span class="hps">station building</span>.<br /><span class="hps">roof</span> <span class="hps">pillars</span> <span class="hps">are</span> <span class="hps">in the middle</span> <span class="hps">of</span> <span class="hps">but</span> <span class="hps">four meters</span> <span class="hps">from the start,</span> <span class="hps">so that</span> <span class="hps">stretches from</span> <span class="hps">the beginning</span> <span class="hps">of</span> <span class="hps">each side</span> <span class="hps">of the platform</span> <span class="hps">and connects to</span> <span class="hps">approximately above</span> <span class="hps">the</span> <span class="hps">underpass</span> <span class="hps">and</span> <span class="hps">there is more</span> <span class="hps">space</span> <span class="hps">between the</span> <span class="hps">columns</span> <span class="hps">for the</span> <span class="hps">location of the</span> <span class="hps">underpass</span> <span class="hps atn">(</span><span>those</span> <span class="hps">not</span> <span class="hps">in the previous</span> <span class="hps">set</span> <span class="hps">of platforms</span> <span class="hps">are not</span>).<br /><span class="hps">Update 1</span>:<br /><span class="hps">- Added</span> <span class="hps">file</span> <span class="hps">objects</span> <span class="hps">for</span> <span class="hps">Ts2009</span> <span class="hps">and</span> <span class="hps">TS10</span>. <span class="hps">Original</span> <span class="hps">file for</span> <span class="hps">TRS2004</span> <span class="hps">and</span> <span class="hps">TRS2006</span> <span class="hps">is</span> <span class="hps">only</span> <span class="hps">renamed.</span></span></p>

<p><span id="result_box" lang="en" tabindex="-1"><span class="hps">Station building</span> <span class="hps">in</span> <span class="hps">question was</span> <span class="hps">on track</span> <span class="hps">Studenec</span> <span class="hps">- Large</span> <span class="hps">Mezir&iacute;c&iacute;</span> <span class="hps">-</span> <span class="hps">Krizanov</span>. <span class="hps">Station name</span> <span class="hps">sign is</span> <span class="hps">of course</span> <span class="hps">customizable</span><span>.</span></span></p>

<p><span id="result_box" lang="en" tabindex="-1"><span class="hps">It is a</span> <span class="hps">modular</span> <span class="hps">basic</span> <span class="hps">building</span> <span class="hps">Bu&scaron;těhradsk&aacute; line</span> <span class="hps">in</span> <span class="hps">embodiment</span> <span class="hps">corresponding</span><br /><span class="hps">original</span> <span class="hps">projects</span> <span class="hps">arch</span> <span class="hps">praise.</span><br /><span class="hps">Spot</span> <span class="hps">correspond to the state</span> <span class="hps">of</span> <span class="hps">the</span> <span class="hps">1.republiky</span> <span class="hps">about</span> <span class="hps">1930</span>.<br /><span class="hps">Models</span> <span class="hps">are</span> <span class="hps">illuminated at night</span> <span class="hps">and</span> <span class="hps">rewritable</span> <span class="hps">texts.</span><br /><span class="hps">Polygons</span> <span class="hps">would</span> <span class="hps">in any of the</span> <span class="hps">buildings</span> <span class="hps">should not</span> <span class="hps">exceed the value</span> <span class="hps">in the table.</span><br /><span class="hps">The container</span> <span class="hps">set</span> <span class="hps">with</span> <span class="hps">accessories,</span> <span class="hps">which</span> <span class="hps">are</span> <span class="hps">signs</span> <span class="hps">and</span> <span class="hps">console</span> <span class="hps">telegraph</span> <span class="hps">wires</span>.</span></p>

<p><span id="result_box" lang="en" tabindex="-1"><span class="hps">Village</span> <span class="hps">station</span> <span class="hps">called</span> <span class="hps">Cerekvice</span> <span class="hps">the</span> <span class="hps">sklasi&scaron;těm</span> <span class="hps">the</span> <span class="hps">goods.</span> <span class="hps">Function</span> <span class="hps">is preserved</span> <span class="hps">charges and</span> <span class="hps">interpretation.</span></span></p>

<p><span id="result_box" lang="en" tabindex="-1"><span class="hps">Building</span> <span class="hps">Hranick&yacute;</span> <span class="hps">station</span>, <span class="hps">I</span> <span class="hps">redid</span> <span class="hps">textures</span> <span class="hps">on</span> <span class="hps">screen</span>, <span class="hps">I removed</span> <span class="hps">the platform</span> <span class="hps">so</span> <span class="hps">we can put in</span> <span class="hps">any</span>, <span class="hps">I</span> <span class="hps">redid</span> <span class="hps">the building</span>, added a <span class="hps">mod</span> <span class="hps">night</span> <span class="hps">I finally</span> <span class="hps">taught him</span> <span class="hps">to do.</span></span></p>

<p><span id="result_box" lang="en" tabindex="-1"><span class="hps">Building</span> <span class="hps">depot</span> <span class="hps">of</span> <span class="hps">Sendražick&eacute;ho</span> <span class="hps">station</span>, <span class="hps">Cologne</span> <span class="hps">sugar beet</span> <span class="hps atn">(</span><span>KRD</span><span>)</span><span>.</span></span></p>

<p><span id="result_box" lang="en" tabindex="-1"><span class="hps">Photorealistic</span> <span class="hps">model</span> <span class="hps">Kyjov</span> <span class="hps">station</span> <span class="hps">(on line</span> <span class="hps">340).</span> <span class="hps">Model</span> <span class="hps">includes</span> <span class="hps">night</span><span>-mode</span> <span class="hps">and</span> <span class="hps">a</span> <span class="hps">chimney</span> <span class="hps">with</span> <span class="hps">smoke.</span></span></p>

<p><span id="result_box" lang="en" tabindex="-1"><span class="hps">The town</span> <span class="hps">of Křivokl&aacute;tu</span> <span class="hps">station</span> <span class="hps">illuminated at night</span> <span class="hps">with</span> <span class="hps">nepřepisovateln&yacute;m</span> <span class="hps">name</span> <span class="hps">is required</span> <span class="hps">to be</span> <span class="hps">fitted</span> <span class="hps">on a slope</span> <span class="hps">with a gradient</span> <span class="hps">of 1:1.</span> <span class="hps">Poly</span> <span class="hps">count</span> <span class="hps">is set</span> <span class="hps">to</span> <span class="hps">night</span> <span class="hps">mode</span>.</span></p>

<p><span id="result_box" lang="en" tabindex="-1"><span class="hps">Universal</span> <span class="hps">Czech</span> <span class="hps">station building</span> <span class="hps">without a name.</span> <span class="hps">The model</span> <span class="hps">is</span> <span class="hps">Lužn&aacute;</span> <span class="hps">station</span> <span class="hps">Rakovn&iacute;ka.</span> <span class="hps">The model</span> <span class="hps">is a night</span> <span class="hps">mode</span>. <span class="hps">Texture</span> <span class="hps">is 1024 x</span> <span class="hps">1024.</span> <span class="hps">Who</span> <span class="hps">comes</span> <span class="hps">large</span>, <span class="hps">it</span> <span class="hps">may</span> <span class="hps">shrink</span>.</span></p>

<p><span id="result_box" lang="en" tabindex="-1"><span class="hps">Penthouse</span> <span class="hps">with</span> <span class="hps">a</span> <span class="hps">roof and</span> <span class="hps">subways</span> <span class="hps">platform</span> <span class="hps">at</span> <span class="hps">railway</span> <span class="hps">station building</span>. <span class="hps">Wed</span> <span class="hps">Prague</span>-Radot&iacute;n. <span class="hps">It is not</span> <span class="hps">the exact</span> <span class="hps">model</span>, <span class="hps">for example,</span> <span class="hps">is</span> <span class="hps">building</span> <span class="hps">the</span> <span class="hps">subways</span> <span class="hps">constricted</span>, the other side <span class="hps">is</span> <span class="hps">entrance</span> <span class="hps atn">(</span>the <span class="hps">one image</span> <span class="hps">I saw only</span> <span class="hps">part of it)</span> <span class="hps">and</span> <span class="hps">what</span> <span class="hps">is</span> <span class="hps">on the side</span>, I <span class="hps">do not know.</span> <span class="hps">I hope it</span> <span class="hps">at least</span> <span class="hps">somewhat</span> <span class="hps">resembles</span> <span class="hps">the</span> <span class="hps">tracks</span>.<br /><span class="hps">Area</span> <span class="hps">of the platform</span> <span class="hps">is</span> <span class="hps">made ​​in</span> <span class="hps">total</span> <span class="hps">length and</span> <span class="hps">the</span> <span class="hps">station building</span> <span class="hps">and an adjacent</span> <span class="hps">restaurant.</span></span></p>

<p><span id="result_box" class="short_text" lang="en" tabindex="-1"><span class="hps">Set</span> <span class="hps">concrete</span> <span class="hps">shelters</span> <span class="hps">for</span> <span class="hps">main and</span> <span class="hps">branch lines</span>.</span></p>

<p><span id="result_box" class="long_text" lang="en" tabindex="-1"><span class="hps">Sounds</span> <span class="hps">created by</span> <span class="hps">Jacek</span> <span class="hps atn">(</span>MSTS).<br /><br /><span class="hps">Engine sound</span> <span class="hps">12V170DR</span> <span class="hps">for locomotives</span>: <span class="hps">M262</span>, <span class="hps">TU47</span>, <span class="hps">T334</span><br /><br /><span class="hps">installation:</span><br /><span class="hps">After installing the</span> <span class="hps">CDP</span> <span class="hps">go</span> <span class="hps">into the folder:</span><br /><span class="hps">?</span> <span class="hps">:/ Program</span> <span class="hps">Files/Auran/TRS2004/World/Dispatcher</span><br /><br /><span class="hps">...</span> <span class="hps">and here you</span> <span class="hps">will find</span> <span class="hps">kuid</span> <span class="hps">locomotives</span>, <span class="hps">you want to change</span> <span class="hps">the sound.</span> <span class="hps">Open</span> <span class="hps">config.txt</span> <span class="hps">and</span> <span class="hps">transcripts</span> <span class="hps">here</span> <span class="hps">in the box</span>:<br /><span class="hps">enginesound</span> <span class="hps">&lt;kuid:xxxxx:xxx&gt;</span><br /><br /><span class="hps">the new value</span><span>:</span><br /><span class="hps">&lt;kuid:91431:53001&gt;</span></span></p>

<p><span id="result_box" lang="en" tabindex="-1"><span class="hps">Tatra</span> <span class="hps">148</span> <span class="hps">in the fire</span> <span class="hps">design.</span> <span class="hps">Tank</span> <span class="hps">body</span> <span class="hps">is</span> <span class="hps">greatly simplified</span><span>, I would not</span> <span class="hps">go</span> <span class="hps">over 500</span> <span class="hps">poly</span>.</span></p>

<p><span id="result_box" lang="en" tabindex="-1"><span class="hps">Lifts</span> <span class="hps">for</span> <span class="hps">buses</span> <span class="hps">RTO</span>. <span class="hps">A</span> <span class="hps">lift</span> <span class="hps">has</span> <span class="hps">put</span> <span class="hps">oj</span> <span class="hps">a</span> <span class="hps">parked</span> <span class="hps">trailer</span> <span class="hps">and</span> <span class="hps">tow</span> <span class="hps">B</span> <span class="hps">is</span> <span class="hps">a</span> <span class="hps">tiller in upright position</span> <span class="hps">for connection to the</span> <span class="hps">bus.</span></span></p>

<p><span id="result_box" lang="de" tabindex="-1"><span class="hps">Aufbauend</span> <span class="hps">leider</span> <span class="hps">heute</span> <span class="hps">Svor</span> <span class="hps">Anschlag</span> <span class="hps">liegend auf</span> <span class="hps">der Route</span> <span class="hps">080</span> <span class="hps">zwischen</span> <span class="hps">New</span> <span class="hps">Bor</span> <span class="hps">und Tanne</span>.<br /><span class="hps atn">RW-</span><span>Namen</span></span></p>

<p><span id="result_box" lang="de" tabindex="-1"><span class="hps">Reversible</span> <span class="hps">Design</span> <span class="hps">Wand als</span> <span class="hps">Kulisse</span> <span class="hps">Objekt f&uuml;r</span> <span class="hps">Old Town</span> <span class="hps">Station</span> <span class="hps">der U-Bahnlinie</span> <span class="hps">A.</span> <span class="hps">Diese W&auml;nde</span> <span class="hps">wurden</span> <span class="hps">nur f&uuml;r meine</span> <span class="hps">Anwendung</span> <span class="hps">erstellt</span> <span class="hps">und es hat die</span> <span class="hps">ersten</span> <span class="hps">Objekte</span> <span class="hps">TRS</span> <span class="hps">2004.</span></span></p>

<p><span id="result_box" lang="de" tabindex="-1"><span class="hps">Glasierte</span> <span class="hps">U</span> <span class="hps">Bahnschranke</span> <span class="hps">II</span>. <span class="hps">Subway</span> <span class="hps">ist</span> <span class="hps">auch</span> <span class="hps">unter der Erde</span> <span class="hps">modelliert</span>, <span class="hps">so</span> <span class="hps">m&uuml;ssen Sie</span> <span class="hps">ein Loch</span> <span class="hps">mit einem Objekt</span> <span class="hps atn">"</span><span>Dighole</span>" <span class="hps">machen</span> <span class="hps">um</span> <span class="hps">dann</span> <span class="hps">etwas zu verbergen.</span></span></p>

<p><span id="result_box" lang="de" tabindex="-1"><span class="hps">Erfunden</span> <span class="hps">Glas</span> <span class="hps">U-Bahn bis</span> <span class="hps">L</span> <span class="hps">mit</span> <span class="hps">Zugang f&uuml;r Rollstuhlfahrer.</span> <span class="hps">Subway</span> <span class="hps">ist</span> <span class="hps">auch</span> <span class="hps">unter der Erde</span> <span class="hps">modelliert</span>, <span class="hps">so</span> <span class="hps">m&uuml;ssen Sie</span> <span class="hps">ein Loch</span> <span class="hps">mit einem Objekt</span> <span class="hps atn">"</span><span>Dighole</span>" <span class="hps">machen</span> <span class="hps">um</span> <span class="hps">dann</span> <span class="hps">etwas zu verbergen.</span></span></p>

<p><span id="result_box" lang="de" tabindex="-1"><span class="hps">Glasierte</span> <span class="hps">U</span> <span class="hps">Railways</span> <span class="hps">T</span> <span class="hps">- PK</span> <span class="hps atn">(</span><span class="atn">Praha-</span>Kyje). <span class="hps">Diese Aufgabe wurde durch</span> <span class="hps">den</span> <span class="hps">besonderen Wunsch</span> <span class="hps">von</span> <span class="hps">Tomas</span> <span class="hps">Verbesserung</span> <span class="hps">geschaffen</span> <span class="hps">und wird von</span> <span class="hps">der U-Bahn</span> <span class="hps">in</span> <span class="hps">Prag</span> <span class="hps">inspiriert</span> <span class="hps">-</span> <span class="hps">ein Verein</span>. <span class="hps">Die U-Bahn</span> <span class="hps">ist mit</span> <span class="hps">sanften Hang</span> <span class="hps">auf dem erh&ouml;hten</span> <span class="hps">Teil</span> <span class="hps">gedacht.</span> <span class="hps">Subway</span> <span class="hps">ist</span> <span class="hps">auch</span> <span class="hps">unter der Erde</span> <span class="hps">modelliert</span>, <span class="hps">so</span> <span class="hps">m&uuml;ssen Sie</span> <span class="hps">ein Loch</span> <span class="hps">mit einem Objekt</span> <span class="hps atn">"</span>Dighole" <span class="hps">machen</span> <span class="hps">um</span> <span class="hps">dann</span> <span class="hps">etwas zu verbergen.</span></span></p>

<p><span id="result_box" lang="de" tabindex="-1"><span class="hps">Schaltschrank</span> <span class="hps">f&uuml;r die Stra&szlig;enbeleuchtung</span>. <span class="hps">Die M&ouml;glichkeit der Verwendung</span> <span class="hps">grunds&auml;tzlich</span> <span class="hps">&uuml;berall</span> <span class="hps">erregt</span> <span class="hps">-</span> <span class="hps">Bau-,</span> <span class="hps">Werk</span>-Komplexe, etc.. <span class="hps">Aktualisieren</span> <span class="hps">ausgef&uuml;hrt</span> <span class="hps">in</span> <span class="hps">Reaktion auf</span> <span class="hps">die Kommentare.</span> <span class="hps">Das Geb&auml;ude</span> <span class="hps">besteht aus zwei</span> <span class="hps">Racks</span>, eine mit <span class="hps">Graffiti</span>, <span class="hps">die andere ohne</span>. <span class="hps">Die erste</span> <span class="hps">hat 36</span> <span class="hps">Polygone</span> <span class="hps">zweiten</span> <span class="hps">28</span> <span class="hps">Polygone</span> <span class="hps">-</span> <span class="hps">absichtlich</span>, <span class="hps">um den Unterschied</span> <span class="hps">/</span> <span class="hps">nerozd&iacute;l</span> <span class="hps">:-)</span> <span class="hps">in das Erscheinungsbild der</span> <span class="hps">Objekte zu sehen.</span> <span class="hps">Sparen Sie</span> <span class="hps">22</span><span>%</span> <span class="hps">auf</span> <span class="hps">Polygone</span> <span class="hps">-</span> <span class="hps">die gr&ouml;&szlig;eren und</span> <span class="hps">fragmentierte</span> <span class="hps">Objekte</span> <span class="hps">wahrscheinlich brauchen</span>;-).</span></p>

<p><span id="result_box" lang="de" tabindex="-1"><span class="hps">Das Set beinhaltet:</span><br /><span class="hps">-</span> <span class="hps">Pitch</span><br /><span class="hps">-</span> <span class="hps">Fu&szlig;balltor</span><br /><span class="hps">- Alte</span> <span class="hps">Basketballkorb</span><br /><span class="hps">- Basketball</span> <span class="hps">neue</span><br /><span class="hps">-</span> <span class="hps">Einsatz</span> <span class="hps">im Netzwerk</span><br /><br /><span class="hps">Jeder kann</span> <span class="hps">r&uuml;sten ihre</span> <span class="hps">nat&uuml;rlich, was</span> <span class="hps">er will.</span> <span class="hps">Es ist</span> <span class="hps atn">Multi-</span><span>Zweck</span> <span class="hps">-</span> <span class="hps">Fu&szlig;ball, Basketball</span>, Volleyball, <span class="hps">Tennis, Fu&szlig;ball,</span> <span class="hps">...</span><br /><span class="hps">Das Modell ist ein</span> <span class="hps">Spielplatz</span> <span class="hps">in</span> <span class="hps">Litomysl</span> <span class="hps">on line</span> <span class="hps">018</span> <span class="hps">Als</span> <span class="hps">Grenze und</span> <span class="hps">ein Netzwerk</span> <span class="hps">mit einem geeigneten</span> <span class="hps">Grundst&uuml;ck von</span> <span class="hps">TRS</span>.</span></p>

<p><span id="result_box" lang="de" tabindex="-1"><span class="hps">Ein Gehweg</span> <span class="hps">mit</span> <span class="hps">Arbeitsbreite</span> <span class="hps">von 4</span> <span class="hps">m</span> <span class="hps">ist ein wesentlicher Teil</span> <span class="hps">des B&uuml;rgersteigs</span> <span class="hps">Konstruktion, die</span> <span class="hps">aus folgenden Teilen</span> <span class="hps">besteht</span>:<br /><br /><span class="hps">Erste</span> <span class="hps">Gerade Abschnitte</span> <span class="hps">der</span> <span class="hps">Bordstein</span> <span class="hps">auf der einen Seite</span> <span class="hps">mit einer L&auml;nge von</span> <span class="hps">1, 1,5,</span> <span class="hps">2-10</span> <span class="hps">m</span> <span class="hps">von</span> <span class="hps">1 m</span> <span class="hps">und</span> <span class="hps">20-100</span> <span class="hps">Meter nach</span> <span class="hps">10</span><br /><span class="hps">Metern.</span><br /><span class="hps">Zweite</span> <span class="hps">Gerade Abschnitte</span> <span class="hps">1.5, 2</span> <span class="hps">und 10 Meter</span> <span class="hps">ohne</span> <span class="hps">den Bordstein</span> <span class="hps">als Maskierung</span> <span class="hps">Teil</span>.<br /><span class="hps">3.</span> <span class="hps">Eckteile</span> <span class="hps">bei 45</span>, 90 und <span class="hps">135 &deg;</span>.<br /><span class="hps">4.</span> <span class="hps">Wedges</span> <span class="hps">45</span> <span class="hps">und 90 &deg;</span> <span class="hps">mit den Armen</span> <span class="hps">1 und 2</span> <span class="hps">Meter</span>, einige mit <span class="hps">und einige</span> <span class="hps">ohne</span> <span class="hps">Bordsteine</span>​​.<br /><span class="hps">5.</span> <span class="hps">2</span> <span class="hps">Ecke</span> <span class="hps">Keile</span> <span class="hps">mit einer L&auml;nge von</span> <span class="hps">3 m</span> <span class="hps">Arm</span>, um den <span class="hps">Parkstreifen</span> <span class="hps">beenden.</span><br /><span class="hps">6.</span> <span class="hps">Verbesserte</span> <span class="hps">Bordsteine</span> <span class="hps">​​auf der anderen Seite</span> <span class="hps">der Fahrbahn</span> <span class="hps">in</span> <span class="hps">der</span> <span class="hps">1</span>, 1,5, 2-10 <span class="hps">m</span> <span class="hps">von</span> <span class="hps">1 m</span> <span class="hps">und</span> <span class="hps">20-100</span> <span class="hps">Meter nach</span> <span class="hps">10</span><br /><span class="hps">Metern.</span><br /><span class="hps">7.</span> <span class="hps">2 Spline</span> <span class="hps">B&uuml;rgersteige</span>, einzud&auml;mmen <span class="hps">eins zu eins,</span> <span class="hps">eins mit</span> <span class="hps">einem schmaleren</span> <span class="hps">Bordstein</span> <span class="hps">auf der anderen Seite</span>.<br /><br /><span class="hps">Die</span> <span class="hps">Polygonanzahl</span> <span class="hps">ist das Maximum f&uuml;r</span> <span class="hps">135 &deg;</span> <span class="hps">Eckschrank</span>, sonst <span class="hps">gleichen Teilen</span> <span class="hps">an den Stra&szlig;enrand</span>. <span class="hps">haben 6</span> <span class="hps">Polygone</span>, <span class="hps">usw.</span><br /><br /><span class="hps">Objekte</span> <span class="hps">in</span> <span class="hps">TRS2004</span> <span class="hps">in</span> <span class="hps">der Region</span> <span class="hps">JediTrainz</span> <span class="hps">Teams</span> <span class="hps">in</span> <span class="hps">den B&uuml;rgersteig</span> <span class="hps">in</span> <span class="hps">TRS2006</span> <span class="hps">in</span> <span class="hps">der Tschechischen Republik</span> <span class="hps">in der Menge</span> <span class="hps">gefunden</span></span></p>

<p>R<span id="result_box" lang="de" tabindex="-1"><span class="hps alt-edited">Schalttafel</span>.<br /><br /><span class="hps">Mit der Erlaubnis</span> <span class="hps">des Autors</span> <span class="hps">Radawimmera</span>, die <span class="hps">auf seiner Homepage</span> <span class="hps">erkl&auml;rt</span>, <span class="hps">die wir auf unserer</span> <span class="hps">Website</span> <span class="hps">die Objekte</span> <span class="hps">ver&ouml;ffentlichen</span>.<br /><span class="hps">Allgemeine</span> <span class="hps">Best&auml;tigungen</span> <span class="hps">Autoren</span> <span class="hps">Texturen</span> <span class="hps">/ photos</span> <span class="hps">auf</span> <span class="hps">http://www.rawer.euweb.cz/</span></span></p>

<p><span id="result_box" lang="de" tabindex="-1"><span class="hps">Brick</span> <span class="hps">Unterstationen</span> <span class="hps">&auml;ltere Version</span>.<br /><span class="hps">Der eigentliche</span> <span class="hps">Entwurf</span> <span class="hps">Modell wird</span> <span class="hps">an der Station</span> <span class="hps">Bakov</span> <span class="hps">hl</span> <span class="hps">gelegen</span>. <span class="hps">n</span></span></p>

<p><span id="result_box" lang="de" tabindex="-1"><span class="hps">Mailbox</span> <span class="hps">Orange</span> <span class="hps">kleinen und</span> <span class="hps">gro&szlig;en Zeh</span>, <span class="hps">wie es normalerweise der</span> <span class="hps">Post,</span> <span class="hps">der Bahnhof</span>, <span class="hps">in den Stra&szlig;en,</span> <span class="hps">in</span> <span class="hps">den D&ouml;rfern</span> <span class="hps">am h&auml;ufigsten</span> <span class="hps">auf dem Platz</span> <span class="hps">oder</span> <span class="hps">auf dem Gemeindeamt</span> <span class="hps">und</span> <span class="hps">an verschiedenen</span> <span class="hps">Orten</span> <span class="hps">besch&auml;ftigt</span><span>.</span> <span class="hps">Fr&uuml;her habe ich</span> <span class="hps">Fototexturen</span> <span class="hps">aus Prag,</span> <span class="hps">Petersplatz</span> <span class="hps">bei der Post</span>, <span class="hps">und es</span> <span class="hps">ist ein kleines Dorf</span> <span class="hps">in</span> <span class="hps">Pardubice</span> <span class="hps">Valy</span> <span class="hps">neben dem</span> <span class="hps">Gemeindeamt</span>.</span></p>

<p><span id="result_box" lang="de" tabindex="-1"><span class="hps">Set von neun</span> <span class="hps alt-edited">Gleise</span> <span class="hps">mit fotorealistischen</span> <span class="hps">Texturen</span> <span class="hps">von</span> <span class="hps">MSTS</span>, <span class="hps">mit freundlicher Genehmigung von</span> <span class="hps">Roman</span> <span class="hps">Trunečka</span>, der auch <span class="hps">der Autor</span> <span class="hps">von Texturen</span> <span class="hps">der meisten</span> <span class="hps">B&auml;ume</span>. <span class="hps">Wohnheime</span> <span class="hps">werden</span> <span class="hps">auch verwendet, um</span> <span class="hps">Honolulu,</span> <span class="hps">die im Sommer</span> <span class="hps">ver&ouml;ffentlicht werden</span> <span class="hps">verfolgen.</span></span></p>

<p>Model locomotives 753,229 from the operation of the ČD</span> Cargo, SOKV &Uacute;st&iacute; nad Labem. Reskin to <span class="hps">ČD 750 from Stary author.</p>
';
$r = preg_replace(array(
                      '/<span id="result_box" lang="(en|de)">(.+)<\/span>/',
                      '/<span id="result_box" lang="(en|de)" tabindex="-1">(.+)<\/span>/',
                      '/<span id="result_box" class="(short_text|long_text)" lang="(en|de)" tabindex="-1">(.+)<\/span>/',

                      '/<span class="(hps|atn|hps atn|hps alt-edited)">([\w \-\.\"\=\:\(\)\;\&\/,žňěčř]+)<\/span>/',  //
                      '/<span class="(hps|atn|hps atn|hps alt-edited)">(.+)(<\/span>)?/',

                      //~ '/<span class="(hps atn">(.+)<\/span>/',
                      '/<span>(.*)<\/span>/',
                      '/<\/span>(.*)<span>/',
                      '/<\/span><span>/',
                      '/<\/span>/',

                      //~ '/<span class="hps">(\S+)<\/span>/',
                    ),
                  array(
                      '${2}',
                      '${2}',
                      '${3}',

                      '${2}',
                      '${2}',

                      //~ '${1}',
                      '${1}',
                      '${1}',
                      '',
                      '',
                    ),
                  $in);

echo "<pre>{$r}</pre>





";
//~ var_dump($table);//~ $result .= 'DROP TABLE '.$table.';'.PHP_EOL;
//~ var_dump((array)$this->db->query($table)->getAll());
//~ 'rows' => array_map('base64_encode', (array)$this->db->query($table)->getAll()),
// predelat!!!!
        //~ $create_table = $this->db->rawQuery('SHOW CREATE TABLE ' . $table)->getFirst();
        //~ $result .= $create_table[1].PHP_EOL.PHP_EOL;
// nemuze vkladat v normelnim formatu!!! musi se ulozit do jsonu a t zoho si to pak importer zpetne vychrousta!!!!
        //~ foreach ($this->db->query($table) as $v1) {
          //~ $result .= 'INSERT INTO ' . $table . ' VALUES(\'' . implode('\', \'', array_map('base64_encode', (array)$v1)) . '\');'.PHP_EOL;
        //~ }
//~ $sql .= 'INSERT INTO `'.$table.'` VALUES(`'.implode('`,`', array_map('base64_decode', $v1)).'`);'.PHP_EOL;
        //~ var_dump($table);
        //~ $v['create_table'];
        //~ $v['rows'];
        //~ $v['cols'];
        //~ var_dump(base64_decode($v['create_table']));
        // prvni smazat a pak zavolat create script!!!
        // a potom inserty...!!!
        //~ var_dump(base64_decode($v['create_table']));
//~ $cols = array_keys($v['rows'][0]);
//~ var_dump($cols);
//~ var_dump($code);
/// nemuze delat!!! musi byt po davkach!!!!
//(' . $values . ');';
//~ var_dump($values);
//~ var_dump($values);
//~ $content = $v->_getContent();
          //~ var_dump($content);
//~ $this->db->insert($table, ContentValues::init(array_map('base64_decode', $v1)));
 if ($this->error) {
          var_dump($this->error);
        }
        var_dump($values);
//~ var_dump($sql);//~ var_dump($v->_getContentValues());
//~ $sql = 'INSERT INTO ' . $table . ' (' . $keys . ') VALUES (' . $values . ');';
//~ $result[$table]['cols'] = array_keys((array) $v1);  // ulozeni sloupcu
var_dump(json_decode(file_get_contents('export.json')));
//~ var_dump(file_exists('export3.json'));
UPDATE slideshows SET edited = NULL WHERE edited = '0000-00-00 00:00:00'
//~ var_dump($it[$index]);
        //~ $this->assertEquals($it[$index], $name);
        //~ $this->assertEquals($name, $this->db->query('suroviny', 'nazev')->getFirst()->nazev);
$db->insertMultiple('downloads', array(classes\ContentValues::init(array('a'=>2)))+range(1,5));
//~ $batch = 100; // dávka 100 polozek
          //~ foreach ($v['rows'] as $v1) {
            //~ $r = array_map('base64_decode', $v1);
            //~ $r = array_map($inline_function, $v1);
            //~ $cv[] = ContentValues::init($r);
          //~ }
          //~ $res = $this->db->insertMultiple($table, $cv);
// jeste metody na nastavovani ruznych vecua jako u mysql workbenchu
// metodu -> createModel nebo neco takoveho!!!
var_dump($v, isset($v['create_table']));
db update:
ALTER TABLE `trainz-cz`.`trainz_cdp` CHANGE COLUMN `counter` `counter` INT(10) UNSIGNED NOT NULL DEFAULT 0 COMMENT 'pocitadlo'  , ADD COLUMN `rank` INT(10) UNSIGNED NOT NULL DEFAULT 0 COMMENT 'rucni razeni'  AFTER `counter` ;
hotovo..
{if="$admin_uri.subblock == \\\'edit\\\'"} id="sortable-cdp"{/if}
//{if="$admin_uri.subblock == \\\'edit\\\'"} id="sortable-cdp"{/if}
IF(trainz_kuids.name IS NULL AND _tc.name IS NULL AND url IS NOT NULL, 1, 0) ASC,
/*
         double cinnost2[] = {
         5, // 0.1
         8, // 0.2
         10 // 0.7
         };
         double cinnost5[] = {
         nahoda.nextUniform(6, 7), // 0.1
         nahoda.nextUniform(8, 9), // 0.3
         nahoda.nextUniform(3, 5) // 0.6
         };
         double cinnost8[] = {
         7, // 0.2
         1, // 0.3
         nahoda.nextUniform(2, 5) // 0.5
         };

         // cesta 1
         for (int i = 0; i < pocet; i++) {
         var1[i] += nahoda.nextUniform(5, 10);  // 1
         var1[i] += cinnost2[nahoda.nextEmpiric(0.1, 0.2)];  // 2
         var1[i] += nahoda.nextGaussian(12, 2);   // 4
         var1[i] += 3;   // 7
         var1[i] += nahoda.nextGaussian(11, 2); // 9
         //System.out.println("var1 (" + i + "): " + var1[i]);
         }

         // cesta 2
         for (int i = 0; i < pocet; i++) {
         var2[i] = 0;
         var2[i] += nahoda.nextUniform(5, 10);  // 1
         var2[i] += nahoda.nextGaussian(4, 1);  // 3
         var2[i] += nahoda.nextGaussian(10, 3);  // 6
         var2[i] += 3;   // 7
         var2[i] += nahoda.nextGaussian(11, 2); // 9
         //System.out.println("var2 (" + i + "): " + var2[i]);
         }

         // cesta 3
         for (int i = 0; i < pocet; i++) {
         var3[i] = 0;
         var3[i] += nahoda.nextUniform(5, 10);  // 1
         var3[i] += nahoda.nextGaussian(4, 1);  // 3
         var3[i] += cinnost5[nahoda.nextEmpiric(0.1, 0.3)];  // 5
         var3[i] += cinnost8[nahoda.nextEmpiric(0.2, 0.3)];   // 8
         var3[i] += nahoda.nextGaussian(11, 2); // 9
         //System.out.println("var3 (" + i + "): " + var3[i]);
         }
         */
//System.out.println("min: "+Collections.min(Arrays.asList(var0)));
//~ foreach (array('global_config.php', 'database_config.php') as $v) {
  //~ if (!file_exists($v)) {
    //~ die('nektery ze souboru neexistuje!');
  //~ }
//~ } //najit vyhozeno, majit kopirovac!!!
{loop=""}
{$value}: {if="($val = )"}{$val}{else}0{/if}<br />
{/loop}
var_dump($v, classes\Core::getSafeName($v));
$db->rollBack();
exit;
//~ $name = classes\Core::getSafeText(base64_decode($_GET['name']), '/[a-zA-Z0-9 _\-\.\(\)]{1}/');
  //~ str_replace(array(' '), array('_'), $name)
//self::isFill($_SERVER, $proxy, $_SERVER['REMOTE_ADDR']);

SELECT downloads.iddownload, downloads.iddownload_category, users.login, users.alias, author, rewrite, picture, polygons, downloads.added, downloads.edited,
                          GROUP_CONCAT(DISTINCT trainz_versions.name ORDER BY trainz_versions.rank SEPARATOR ', ') versions,
                          languages_has_downloads.name, languages_has_downloads.description
                        FROM downloads
                        LEFT JOIN users USING(iduser)
                        JOIN downloads_has_trainz_cdp USING(iddownload)
                        JOIN trainz_cdp USING(idtrainz_cdp)
                        LEFT JOIN trainz_cdp_has_trainz_versions USING(idtrainz_cdp)
                        LEFT JOIN trainz_versions USING(idtrainz_version)
JOIN downloads_has_trainz_kuid USING(iddownload)
JOIN trainz_kuids USING(idtrainz_kuid)
                        JOIN languages_has_downloads USING(iddownload)
                        JOIN languages USING(idlanguage)
                        WHERE
                          downloads.deleted IS NULL AND
                          downloads.confirmed=1 AND downloads.visible=1 AND
                          languages.code='cs' AND
                          (downloads.iddownload='147:792' OR login LIKE '147:792' OR author LIKE '147:792' OR alias LIKE '147:792' OR
                          languages_has_downloads.name LIKE '147:792' OR languages_has_downloads.description LIKE '147:792' OR
                          trainz_cdp.name LIKE '147:792' OR trainz_versions.name LIKE '147:792')
                        GROUP BY downloads.iddownload


SELECT downloads.iddownload, downloads.iddownload_category, users.login, users.alias, author, rewrite, picture, polygons, downloads.added, downloads.edited,
                          GROUP_CONCAT(DISTINCT trainz_versions.name ORDER BY trainz_versions.rank SEPARATOR ', ') versions,
                          languages_has_downloads.name, languages_has_downloads.description
                        FROM downloads
                        LEFT JOIN users USING(iduser)
                        JOIN downloads_has_trainz_cdp USING(iddownload)
                        JOIN trainz_cdp USING(idtrainz_cdp)
                        LEFT JOIN trainz_cdp_has_trainz_versions USING(idtrainz_cdp)
                        LEFT JOIN trainz_versions USING(idtrainz_version)
JOIN downloads_has_trainz_kuid _dhtk USING(iddownload)
JOIN trainz_kuids _dependency ON _dependency.idtrainz_kuid=_dhtk.idtrainz_kuid
JOIN trainz_cdp_has_trainz_kuids _tchtk ON _tchtk.idtrainz_cdp=trainz_cdp.idtrainz_cdp
JOIN trainz_kuids _block ON _block.idtrainz_kuid=_tchtk.idtrainz_kuid
                        JOIN languages_has_downloads USING(iddownload)
                        JOIN languages USING(idlanguage)
                        WHERE
                          downloads.deleted IS NULL AND
                          downloads.confirmed=1 AND downloads.visible=1 AND
                          languages.code='cs' AND
                          (downloads.iddownload='147:792' OR login LIKE '147:792' OR author LIKE '147:792' OR alias LIKE '147:792' OR
                          languages_has_downloads.name LIKE '147:792' OR languages_has_downloads.description LIKE '147:792' OR
                          trainz_cdp.name LIKE '147:792' OR trainz_versions.name LIKE '147:792' OR _dependency.kuid LIKE '147:792' OR _block.kuid LIKE '147:792')
                        GROUP BY downloads.iddownload
'/[\%\2\2]/' => '', // prevedeny " z uploadu
          $("input.mws-kuid-select2").select2({
            initSelection: initSelect
          });
          if (data_kuid_cdp[poc].length == 0) {
            //~ initSelect = function(element, callback) { callback(jQuery.parseJSON('')); };
          }
console.log(initSelect);
 && element.val() != last
var last = null;
last = element.val();
classes\Core::getDownloadFile('index.php', 'hovinko.pdf');
//classes\ErrorLoger::save('err_config');
neexistuje path: '.$_GET['path'].', name: '.$_GET['name']
 $limit = (int) ceil($count / $batch);
//~ var_dump(($i * $this->batch).', '.$this->batch);
$res = array_merge($res, ->fetchAll()); = $res;
//$result[$table]['rows'] = $this->db->query($table)->getAll();
$res = array();
//~ $result[$table]['rows'] = $this->db->query($table)->fetchAll();
foreach ( as $v) {
                  var_dump($v);
                }
//~ do {
                //~ } while ($r);
$options[\PDO::ATTR_STATEMENT_CLASS] = array('classes\PDOCursor', array());
//~ $driver_options = array _merge($option, (array) $driver_options);
var_dump($driver_options);
// attr: http://www.php.net/manual/en/pdo.setattribute.php
        //~ $this->pdo->setAttribute(\PDO::ATTR_STATEMENT_CLASS, array('classes\PDOCursor', array()));
//~ var_dump($table, $q->fetch());
              //~ foreach ($q as $v) {var_dump($v);
                //~ $result[$table]['rows'][] = $v;
              //~ }
              //~ $result[$table]['rows'][] = $q->fetchAll(\PDO::FETCH_ASSOC);
              //~ foreach ($q-> as $v) {
                //~ $result[$table]['rows'][] = $v;
              //~ }
        //~ $pdo = $this->db->getPDO();
        //~ var_dump($this->helper, $this->db, $pdo);
$initMemory = memory_get_usage();
$memory = 0;
echo ($memory-$initMemory).PHP_EOL;
echo (microtime(true) - $startTime);
            //~ foreach ($range as $i) {
              //~ $q = $this->db->query($table, null, null, null, null, null, null, ($i * $batch).', '.$batch);
              //~ $q = $this->db->rawQuery('SELECT * FROM '.$table.' LIMIT '.($i * $batch).', '.$batch);
              //~ while ($v = $q->fetch(\PDO::FETCH_ASSOC)) {
                //~ $memory = max($memory, memory_get_usage());
                //~ $result[$table]['rows'][] = $v;
              //~ }
              //~ foreach ($q as $v) {
                //~ $result[$table]['rows'][] = (array) $v;
              //~ }
              //~ $st = $pdo->prepare('SELECT * FROM '.$table.' LIMIT '.($i * $batch).', '.$batch);
              //~ if ($st->execute()) {
                //~ while ($v = $st->fetch()) {
                  //~ var_dump($v);
                  //~ $result[$table]['rows'][] = $v;
                //~ }
              //~ }
            //~ }
            // nezapomet sloucit!!!

          //~ }
 //~ $count = $this->db->query($table, 'COUNT(*) pocet')->getFirst()->pocet;
          //~ $batch = 500;
          //~ if ($count > 0) {
            //~ $range = range(0, (int) ceil($count / $batch));
$startTime = microtime(true);
ini_set('memory_limit', '999M');
system('mysqldump trainz-cz');
$this->db->setAttribute(\PDO::MYSQL_ATTR_USE_BUFFERED_QUERY, false);
          $this->db->setAttribute(\PDO::MYSQL_ATTR_USE_BUFFERED_QUERY, true);
//~ foreach ($q->fetch(\PDO::FETCH_ASSOC) as $v1) {var_dump($v1);
          //~ $result[$table]['rows'][] = (array) $v1;  // ulozeni radku
          //~ }
//~ var_dump($this->exportTable('trainz_kuids'));
array('downloads_has_trainz_kuid', 'languages_has_downloads', 'trainz_cdp_has_trainz_kuids', 'trainz_kuids'))
      //~ if ($ignore && is_array($ignore)) {
        //~ foreach ($ignore as $v) {
          //~ $result[$v]['rows'] = $this->exportTable($v);
        //~ }
      //~ }
$this->message = '=?'.$this->charset.'?B?'.base64_encode($this->message).'?=';
//~ if ($this->encoding == 'base64') {  // zakodaovani predmetu a zpravy//~ }inz.cz
$this->subject = $this->codeValue($this->subject);
// "\r\n" CRLF
//return '"' . ($name ?: $email) . '" <' . $email . '>';
      //slozeni finalni hlavicky
      $headers = ;
//~ var_dump("p:", %%data%%->pokus());%%data%%[0]; // vycteni pouze jednoho radku
'code_pre_form' => '
          %%data%%[\'description\'] = htmlspecialchars(%%data%%[\'description\']);
        ',
 'code_pre_form' => '
          %%data%%[\'name\'] = htmlspecialchars(%%data%%[\'name\']);
        ',
//        final double cinnost8[] = {
//            7, // 0.2
//            1, // 0.3
//            this.nextUniform(2, 5) // 0.5
//        };
//        return cinnost8[this.nextEmpiric(0.2, 0.3)];
nahodna hodnota
//        final double cinnost5[] = {
//            this.nextUniform(6, 7), // 0.1
//            this.nextUniform(8, 9), // 0.3
//            this.nextUniform(3, 5) // 0.6
//        };
//        return cinnost5[this.nextEmpiric(0.1, 0.3)];
//        final double cinnost2[] = {
//            5, // 0.1
//            8, // 0.2
//            10 // 0.7
//        };
//        return cinnost2[this.nextEmpiric(0.1, 0.2)];  // 2
, name ASC
    //~ /**
     //~ * poslani (pridani) shoutboard
     //~ * - admin <-> admin
     //~ *
     //~ * @since 1.36
     //~ * @param
     //~ * @return
     //~ */
    //~ public function addShoutboard($from, $subject, $message) {
      //~ // dopsat!!!
    //~ }
h_sum2.close();
h_sum3.close();
if (cesta3 <= rozpocet) {
                    //
                }
                if (cesta2 <= rozpocet) {
                    //
                }
sum1 += cesta1;
                if (cesta1 <= rozpocet) {
                    //
                }
//h_sum.append((sum1 / (i + 1)) + ";" + (sum2 / (i + 1)) + ";" + (sum3 / (i + 1)) + "\n");    // 3x gaus (ustalovani)
/*
         boolean state = true;
         if (state) {
         // generovani po cestach
         double[] var1 = new double[pocet];
         double[] var2 = new double[pocet];
         double[] var3 = new double[pocet];

         Map<Integer, Integer> cetnost = new HashMap<Integer, Integer>();

         // cesta 1
         for (int i = 0; i < pocet; i++) {
         var1[i] += nahoda.getCinnost1();
         var1[i] += nahoda.getCinnost2();
         var1[i] += nahoda.getCinnost4();
         var1[i] += nahoda.getCinnost7();
         var1[i] += nahoda.getCinnost9();
         }

         // cesta 2
         for (int i = 0; i < pocet; i++) {
         var2[i] += nahoda.getCinnost1();
         var2[i] += nahoda.getCinnost3();
         var2[i] += nahoda.getCinnost6();
         var2[i] += nahoda.getCinnost7();
         var2[i] += nahoda.getCinnost9();
         }

         // cesta 3
         for (int i = 0; i < pocet; i++) {
         var3[i] += nahoda.getCinnost1();
         var3[i] += nahoda.getCinnost3();
         var3[i] += nahoda.getCinnost5();
         var3[i] += nahoda.getCinnost8();
         var3[i] += nahoda.getCinnost9();
         }

         // vygenerovani cvs
         try {
         // vsecny 3 cesty
         FileWriter h = new FileWriter(new File("vystup_java123.cvs"));
         for (int i = 0; i < pocet; i++) {
         h.append(var1[i] + ";" + var2[i] + ";" + var3[i] + "\n");
         }
         h.close();
         System.out.println("Vygenerovano 1-3...");

         // minimum z ces
         h = new FileWriter(new File("vystup_java123_min.cvs"));
         double min = 0;
         int p = 0;
         int up_count = 0;
         int up_sum = 0;
         int sum = 0;
         ArrayList up_avg = new ArrayList<String>();
         ArrayList suma = new ArrayList<String>();
         for (int i = 0; i < pocet; i++) {
         min = Nahoda.minValue(var1[i], var2[i], var3[i]);
         h.append(i + ";" + min + "\n");

         if (min <= 35) {
         //pocitani pod 35k
         up_count++;
         up_sum += (int) min;
         up_avg.add(up_sum / (double) up_count);
         }
         p = (cetnost.containsKey((int) min) ? cetnost.get((int) min) : 0);
         cetnost.put((int) min, p + 1);

         sum += (int) min;
         suma.add(sum / (double) (i + 1));
         }
         h.close();
         System.out.println("Vygenerovano 1-3 min...");

         // cetnost
         h = new FileWriter(new File("vystup_java_cetnost123.cvs"));
         for (Integer key : cetnost.keySet()) {
         h.append(key + ";" + (cetnost.get(key) / (double) pocet) + "\n");
         }
         System.out.println("Vygenerovano cetnost 123...");
         h.close();

         // UP
         h = new FileWriter(new File("vystup_java_up123.cvs"));
         for (int i = 0; i < up_avg.size(); i++) {
         h.append(up_avg.get(i) + "\n");
         }
         System.out.println("Vygenerovano UP 123...");
         h.close();

         // ustalovani
         h = new FileWriter(new File("vystup_java_ustalovani123.cvs"));
         for (int i = 0; i < suma.size(); i++) {
         h.append(suma.get(i) + "\n");
         }
         System.out.println("Vygenerovano ustalovani 123...");
         h.close();

         } catch (IOException e) {
         e.printStackTrace();
         }
         } else {
         // generovani jednim pruchodem (prilis podivna cisla)
         // automaticky hleda minimalni hodnoty
         double[] var0 = new double[pocet];
         ArrayList up_avg = new ArrayList<Double>();
         Map<Integer, Integer> cetnost = new HashMap<Integer, Integer>();
         int up_count = 0;
         double c2, c3, c5, c6;
         int p = 0;
         for (int i = 0; i < pocet; i++) {
         var0[i] += nahoda.getCinnost1();
         c2 = nahoda.getCinnost2();
         c3 = nahoda.getCinnost3();
         if (c2 < c3) {
         var0[i] += c2;
         var0[i] += nahoda.getCinnost4();
         var0[i] += nahoda.getCinnost7();
         } else {
         var0[i] += c3;
         c5 = nahoda.getCinnost5();
         c6 = nahoda.getCinnost6();
         if (c5 < c6) {
         var0[i] += c5;
         var0[i] += nahoda.getCinnost8();
         } else {
         var0[i] += c6;
         var0[i] += nahoda.getCinnost7();
         }
         }
         var0[i] += nahoda.getCinnost9();
         if (var0[i] <= 35) {
         up_count++;
         up_avg.add(up_count / (double) pocet);
         }
         p = (cetnost.containsKey((int) var0[i]) ? cetnost.get((int) var0[i]) : 0);
         cetnost.put((int) var0[i], p + 1);
         }

         System.out.println("celkovy UP pocet: " + (up_count / (double) pocet));

         // vygenerovani cvs
         try {

         // castky
         FileWriter h = new FileWriter(new File("vystup_java0.cvs"));
         for (int i = 0; i < pocet; i++) {
         h.append(var0[i] + "\n");
         }
         h.close();
         System.out.println("Vygenerovano 0...");

         // prumer
         h = new FileWriter(new File("vystup_java_avg0.cvs"));
         for (int i = 0; i < up_avg.size(); i++) {
         h.append(up_avg.get(i) + "\n");
         }
         h.close();
         System.out.println("Vygenerovano avg 0...");

         // cetnost
         h = new FileWriter(new File("vystup_java_cetnost0.cvs"));
         for (Integer key : cetnost.keySet()) {
         h.append(key + ":" + cetnost.get(key) + "\n");
         }
         System.out.println("Vygenerovano cetnost 0...");
         h.close();
         } catch (IOException e) {
         e.printStackTrace();
         }
         }
         */
if (min == min2) {
                    px++;
                }
min = Nahoda.minValue(cesta1, cesta2, cesta3);
    /**
     * hledani minima ze 3 hodnot
     *
     * @param v1 hodnota z 1 cesty
     * @param v2 hodnota z 2 cesty
     * @param v3 hodnota z 3 cesty
     * @return minimum ze 3 hodnot
     */
    public static double minValue(double v1, double v2, double v3) {
        double p[] = {v1, v2, v3};
        double min = p[0];
        for (int i = 0; i < p.length; i++) {
            if (p[i] < min) {
                min = p[i];
            }
        }
        return min;
    }
import java.util.HashMap;
import java.util.Map;
//Map<Integer, Integer> cetnost = new HashMap<Integer, Integer>();
//long sum = 0;
        double min = 0;
//cetnost.put((int) min, (cetnost.containsKey((int) min) ? cetnost.get((int) min) + 1 : 0));
//sum += min; // pricteni do sumy
 //if (i > 0) {    // az od 2 polozky
                //    h_sum.append(sum / (i + 1) + "\n"); // ustalovani
                //}
//h_sum.close();
System.out.println("pxx: " + px);

            // vygenerovani hornot pro cetnost
            //h = new FileWriter(new File("vystup_java_cetnost.csv"));
            //for (Integer key : cetnost.keySet()) {
            //    h.append(key + ";" + (cetnost.get(key) / (double) pocet) + "\n");
            //}
            //System.out.println("Vygenerovano cetnost...");
            //h.close();
//FileWriter h_sum = new FileWriter(new File("vystup_sum.csv"));    // gaus 1,2,3


	arena	java
TP:	60,42%	65,50%
UP:	89,33%	84,81%

Cesta1:	0,89%	0,08%
Cesta2:	24,09%	13,72%
Cesta3:	75,02%	86,20%
	100,00%	100,00%


	arena	java
TP:	60,42%	65,50%
UP:	89,33%	84,81%

Cesta1:	0,89%	0,08%
Cesta2:	24,09%	13,72%
Cesta3:	75,02%	86,20%
	100,00%	100,00%
55

15	0,00%	0,00%
16	0,00%	0,00%
17	0,00%	0,00%
18	0,00%	0,00%
19	0,01%	0,00%
20	0,03%	0,00%
21	0,12%	0,04%
22	0,35%	0,11%
23	0,77%	0,34%
24	1,41%	0,94%
25	2,40%	1,89%
26	3,95%	3,23%
27	5,62%	4,98%
28	7,54%	6,74%
29	9,10%	8,46%
30	10,55%	9,60%
31	11,12%	10,36%
32	11,00%	10,74%
33	10,03%	10,33%
34	8,62%	9,27%
35	6,72%	7,78%
36	4,65%	5,82%
37	2,86%	4,13%
38	1,70%	2,66%
39	0,88%	1,45%
40	0,37%	0,70%
41	0,16%	0,28%
42	0,05%	0,11%
43	0,01%	0,03%
44	0,00%	0,02%
45	0,00%	0,00%
46	0,00%	0,00%
47	0,00%	0,00%
48	0,00%	0,00%
49	0,00%	0,00%
50	0,00%	0,00%
51	0,00%	0,00%
52	0,00%	0,00%
53	0,00%	0,00%
54	0,00%	0,00%
55	0,00%	0,00%
56	0,00%	0,00%

	arena	java
TP:	60,42%	65,50%
UP:	89,33%	84,81%

Cesta1:	0,89%	0,08%
Cesta2:	24,09%	13,72%
Cesta3:	75,02%	86,20%
	100,00%	100,00%
$_SERVER['REMOTE_ADDR']
//~ var_dump(classes\Configurator::decodeVariable('database_config.php', array('errorloger', 'printstdout')));
//~ var_dump(classes\Configurator::decodeVariable('database_config.php', array('errorloger', 'printstdout')));
var_dump(classes\Configurator::decodeVariable('database_config.php', 'errorloger'));
var_dump(classes\Configurator::decodeVariable('database1_config.php', array('errorloger', 'printstdout')));
//isset($c) ? $c['errorloger']['printstdout'] : true

$c = null;
    if (file_exists('database_config.php')) {
      $c = classes\Configurator::decode('database_config.php');
    }
throw new Exception('hu...');
      // cache *****************************************************************
      //~ $this->cache = classes\Cache::OB(); // bacha!!! TPL jako takove ma uz v sobe cachovani! toto je v podstate nadstandart..?
      //~ $this->cache->setEnabled($this->configure['cache']['enabled'])
            //~ ->setExpiration($this->configure['cache']['expire']);
            //->setExclude(array(...))
// do ignorace cely admin! nebo zapinat pro admin force generovani a asu fakt vypinat cachovani!!!
// pri chybe kdyz je zapnute cachovani tak pri vrzenem exceptionu udelat force reload (smazat zkompilovane php)
// pri zapnutem cachovani zajistovat spravnou ikonku jazyku pomoci JS a ne z PHP vice: https://github.com/carhartl/jquery-cookie + odstranit z php oznacovani na jazyk!
    $c = classes\Configurator::decode('database_config.php');
$c['errorloger']['printstdout']
// popremyslet jak udelat vetsi funkcni bloky
//s jiz hotovou nebo vestavenou administraci a pripravenym vystupem do tpl...
var_dump(classes\Configurator::decodeVariable('database_config.php', array('errorloger', 'printstdout')));
({$value->ip ?: 'nedostupné'})
({$value->ip ?: 'nedostupné'})
({$value->ip ?: 'nedostupné'})
$ses->$_code;
var_dump($_message, $_code);
var_dump('posilam: '.$ses->$_code);
//~ var_dump(getimagesize($value['tmp_name'][$index]), $_type); && getimagesize($value['tmp_name'][$index])
//getimagesize($value['tmp_name'][$index]) &&
// opravit [] indexy!!!!
          //~ var_dump($values);
            return ;
                } else {
                  return ;
                }
//var_dump($val);
//~ var_dump($values);
//~ var_dump($values[$i], $v);
var_dump($values[$i], $v);
//~ $values = array_map(function($val) {
              //~ return htmlspecialchars($val, ENT_NOQUOTES);
              //~ //return is_array($val) ? array_map(function($v) { return htmlspecialchars($v, ENT_NOQUOTES); }, $val) : htmlspecialchars($val, ENT_NOQUOTES);
            //~ }, $values);
//~ var_dump();htmlspecialchars($v, ENT_NOQUOTES)htmlspecialchars($values, ENT_NOQUOTES);
            //~ if (is_array($v)) {
              //~ $values[$i] = array_map(function($x) { return htmlspecialchars($x, ENT_NOQUOTES); }, $v);
            //~ } else {
              //~ $values[$i] = htmlspecialchars($v, ENT_NOQUOTES);
            //~ }
// prekladove pole - zdrojove texty, v konfigurakach se vubec nezobrazi **
      //$this->translate = require('translate.php');
// predelat!!!!
      //~ $after = $this->isDownloadObject($this->uri) ? $this->getDownload($this->getDownloadObjectID($this->uri), 'name') : $this->getDownloadCategoryRewrite(implode(array_slice(array_slice($this->uri, 1), -1)), 'name');
      //~ $this->title = $this->menu->getTitle(array('before' => $this->configure['project_name'], 'source' => $this->translate['title'], 'after' => isset($this->uri['page']) && $this->uri['page'] == 'download' ? $after : null));
    /**
     * logovani prihlasovani (upload.tpl, a:index.tpl)
     *
     * @since 2.18
     * @param int id_user id prihlaseneho uzivatele
     * @param string screen serializovany screen objekt
     * @param bool from_web true pokud jde o prihlaseni z webu, false z adminu
     * @return void
     */
    public function addLastLogin($id_user, $screen, $from_web) {
      $cv = new classes\ContentValues;
      $cv->put('iduser', $id_user)
        ->put('ip', classes\Core::getIP())
        ->put('agent', $_SERVER['HTTP_USER_AGENT'])
        ->put('screen', $screen)
        ->putDate('added')
        ->put('from_web', $from_web);
      //~ $this->db->insert('lastlogins', $cv); //FIMXE dodalat last login????
    }
$crate->addLastLogin($user->getId(), $val['screen'], false);
  //~ if (!$user->isAllowed($acl_resource, 'show')) {
    //~ if ($user->isLoggedIn()) {
      //~ $msg = '<div class="mws-form-message error"><h3>Bylo nastaveno špatné oprávnění</h3></div>';
      //~ $user->logout();
      //~ classes\Core::setRefresh(3, $weburl);
    //~ } else {
      //~ classes\Core::setLocation($weburl);
    //~ }
  //~ }
//~ $msg = null;//var_dump($acl_resource);
<script src="{$weburl}js/modernizr-2.6.2.min.js"></script>
{/* // nacitat JS a CSS z konfigurace!! nezavisle!!!! */}
    <!-- Plugin Stylesheets first to ease overrides -->
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/custom-plugins/wizard/wizard.css" media="screen">
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/plugins/select2-3.4.2/select2.css" media="screen">
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/plugins/ibutton/jquery.ibutton.css" media="screen">
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/plugins/imgareaselect/css/imgareaselect-default.css" media="screen">
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/plugins/jgrowl/jquery.jgrowl.css" media="screen">

    <!-- Required Stylesheets -->
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/bootstrap/css/bootstrap.min.css" media="screen">
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/css/fonts/ptsans/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/css/fonts/icomoon/style.css" media="screen">
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/css/fonts/font-awesome/font-awesome.css" media="screen">

    <!-- MWS icons -->
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/css/mws-style.css" media="screen">
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/css/icons/icol16.css" media="screen">
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/css/icons/icol32.css" media="screen">

    <!-- Components Stylesheet -->
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/css/main.css" media="screen">

    <!-- jQuery-UI Stylesheet -->
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/jui/css/jquery.ui.all.css" media="screen">
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/jui/jquery-ui.custom.css" media="screen">

    <!-- Theme Stylesheet -->
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/css/mws-theme.css" media="screen">
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/css/themer.css" media="screen">

    <!-- Plugin Stylesheets -->
    <link rel="stylesheet" type="text/css" href="{$weburl}admin_template/plugins/treeview/jquery.treeview.css" media="screen">
              // prepsat stare ID do noveho objektu kvuli zachovani linkovych vazeb!!
              // musi se vypinat vazby objektu!!!
              //a nebo: vysrat na toto, nemazat stary objekt ale pouze prehrat obsah do stavajicich tabulek????
//~ $db->rollBack();
//~ exit;
  use //DirectoryIterator,
      //RecursiveIteratorIterator,
      //RecursiveDirectoryIterator,
      DateTime;
    /**
     * get difference two date
     *
     * @param startdate first date time
     * @param enddate second date time
     * @param format (optional) format output interval date
     * @return difference date object (or null)
     */
    public static function getDifferenceDate($startdate, $enddate, $format = null) {
      if (!empty($startdate) && !empty($enddate)) {
        //start time
        $d1 = new \DateTime();
        $d1->setTimestamp(is_int($startdate) ? $startdate : strtotime($startdate));
// jde napsat jeste trosicku lip, neby vyhodit a zaradit do DateAndTime()
        //end time
        $d2 = new \DateTime();
        $d2->setTimestamp(is_int($enddate) ? $enddate : strtotime($enddate));

        //vypocet rozdilu
        $interval = $d1->diff($d2);
        if (!empty($format)) {
          return $interval->format($format);
        } else {
          return $interval;
        }
      } else {
        return null;
      }
    }
@since 2.00
 //~ if (is_array($path)) {
        //~ foreach ($path as $row) {
          //~ self::createPartPath($row);
        //~ }
      //~ } else {
        //~ self::createPartPath($path);
      //~ }
// dotestovat a dokoncit!!! komentare!!!!
//vytvyreni casti cesty
    //~ private static function createPartPath($path) {
      //~ try {
        //~ if (!empty($path)) {
          //~ $pole = explode('/', $path);
          //~ $dir = ''; //vynulovani generovaneho nazvu slozek
          //~ foreach ($pole as $value) {  //prochazi kazde jeden smer slozek
            //~ $dir .= sprintf('%s/', $value); //scita jmeno slozky
            //~ if (!file_exists($dir)) {  //overuje existenci
              //~ if (@mkdir($dir)) { //vytvari slozky
                //~ chmod($dir, 0777);  //nastavi opravneni na 777
              //~ } else {
                //~ throw new ExceptionCore(sprintf('dir "%s" does not create', $dir)); //opravneni
              //~ }
            //~ }
          //~ }
        //~ }
      //~ } catch (ExceptionCore $e) {
        //~ echo $e;
      //~ }
    //~ }
// predelat!!
//zpracovava Google markup
    public static function getMarkupText($text, $ownpattern = array()) {
      $patterns = array('/_([^_]+)_/' => Html::em()->setText('$1'),
                        '/\*([^\*]+)\*/' => Html::strong()->setText('$1'),
                        '/\\n|\\\n/' => Html::br(),
                        );
      if (!empty($ownpattern)) {
        $patterns = array_merge($patterns, $ownpattern);
      }
      return self::getOptionalMarkup($text, $patterns);
    }

    /**
     * volitelne znackovani/zpracovani textu
     *
     * @deprecated
     * @since 1.00
     * @param
     * @return
     */
    public static function getOptionalMarkup($text, $patterns = array()) {
      //  '/^.../' => Html::...
      $regex = array_keys($patterns);
      return preg_replace($regex, $patterns, $text);
    }
//zpracovava BBCode
    public static function getBBCodeText($text, $ownpattern = array()) {
      $patterns = array('/\[b\](.*?)\[\/b\]/' => Html::strong()->setText('$1'),
                        '/\[b id=(.*?)\](.*?)\[\/b\]/' => Html::strong(array('id' => '$1'))->setText('$2'),
                        '/\[b class=(.*?)\](.*?)\[\/b\]/' => Html::strong(array('class' => '$1'))->setText('$2'),
                        '/\[i\](.*?)\[\/i\]/' => Html::em()->setText('$1'),
                        '/\[i id=(.*?)\](.*?)\[\/i\]/' => Html::em(array('id' => '$1'))->setText('$2'),
                        '/\[i class=(.*?)\](.*?)\[\/i\]/' => Html::em(array('class' => '$1'))->setText('$2'),
                        '/\[s\](.*?)\[\/s\]/' => Html::span()->setText('$1'),
                        '/\[s id=(.*?)\](.*?)\[\/s\]/' => Html::span(array('id' => '$1'))->setText('$2'),
                        '/\[s class=(.*?)\](.*?)\[\/s\]/' => Html::span(array('class' => '$1'))->setText('$2'),
                        '/\\n|\\\n/' => Html::br(),
                        );
      if (!empty($ownpattern)) {
        $patterns = array_merge($patterns, $ownpattern);
      }
      return self::getOptionalMarkup($text, $patterns);
    }
// vyhazet zbytecne metody!!!
// napsat komentare+vygenerovat testy!
// vyhazet zbytecne use!
      //var_dump($_SERVER['HTTP_HOST']);
      //var_dump($_SERVER);
      //print_r(apache_request_headers());
//~ CURLOPT_POST => true,
          //~ CURLOPT_POSTFIELDS => $data,
//~ var_dump(curl_error($this->res), ); //curl_strerror(curl_errno($this->res))
curl_close($this->res);
var_dump($this->res);
var_dump(($result = curl_exec($this->res)) === false);
      if ($this->url) {
        $options[CURLOPT_URL] = ;
      }
    public static function isWebkit($agent = null) {

    }

    public static function isGecko($agent = null) {}
    public static function isPresto($agent = null) {}
public static function curlData($url, array $data) {}
    // curl prto get
    //TO curl pro raw-data
$result = null;
      if (extension_loaded('curl')) { //pokud je dostupny cURL
        $c = curl_init();
        $options = array(
            CURLOPT_URL => $url,  // nastaveni url
            CURLOPT_RETURNTRANSFER => true, // vracet do promenne
            CURLOPT_CONNECTTIMEOUT => 10, // time out
            CURLOPT_HEADER => false,
            CURLOPT_USERAGENT => 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/30.0.1599.114 Safari/537.36', // :D jak se bude hlasit user-agent

            CURLOPT_POST => count($data), // pocet post dat
            CURLOPT_POSTFIELDS => $data,  // post data
          );
        curl_setopt_array($c, $options);
        $result = curl_exec($c);
        curl_close($c);
      } else {
        throw new ExceptionCore('rozsireni Curl neni nacteno/instalovano');
      }
      return $result;
//~ xdebug_start_trace();
//~ xdebug_start_code_coverage();
//~ xdebug_print_function_stack();
//~ var_dump(xdebug_call_function(), xdebug_dump_superglobals(), xdebug_get_function_stack());
//~ xdebug_stop_trace();
//~ xdebug_get_function_stack();
//~ var_dump(xdebug_get_code_coverage());
// tiru ktera bude zajistovat useragenty????
 //if (preg_match('/<Files "(.*)">(.*)<\/Files>/s', $text, $match)) {
//http://localhost/www/git/goodflow/trainz_cz/img/download/mini/cda829956444da61473fb688429b70f25283e9934250f.png
//http://localhost/www/git/goodflow/trainz_cz/img/download/mini/c9da61119e3a78b245bde79189fde5e5523d87616fcca.jpg
//http://localhost/www/git/goodflow/trainz_cz/img/download/mini/cda829956444da61473fb688429b70f25283e9934250f.png
//~ var_dump($v0->rewrite);
//~ var_dump($url . 'download/' . $v0->rewrite . '/' . $vv0->rewrite);
//~ foreach (self::getStaticListDownloads($db, $v3->iddownload_category) as $vv) {
                //~ $site->addLink($url . 'download/' . $v3->rewrite . '/' . $vv->rewrite, $vv->edited ?: $vv->added)
                    //~ ->addImage($url . 'img/download/mini/' . $vv->picture);
              //~ }
//~ foreach (self::getStaticListDownloads($db, $v2->iddownload_category) as $vv) {
              //~ $site->addLink($url . 'download/' . $v2->rewrite . '/' . $vv->rewrite, $vv->edited ?: $vv->added)
                  //~ ->addImage($url . 'img/download/mini/' . $vv->picture);
            //~ }
//~ foreach (self::getStaticListDownloads($db, $v1->iddownload_category) as $vv) {
            //~ $site->addLink($url . 'download/' . $v1->rewrite . '/' . $vv->rewrite, $vv->edited ?: $vv->added)
                //~ ->addImage($url . 'img/download/mini/' . $vv->picture);
          //~ }
//~ foreach (self::getStaticListDownloads($db, $v0->iddownload_category) as $vv) {
          //~ $site->addLink($url . 'download/' . $v0->rewrite . '/' . $vv->rewrite, $vv->edited ?: $vv->added)
              //~ ->addImage($url . 'img/download/mini/' . $vv->picture);
        //~ }
var_dump(strlen($site->render()));
//~ $c = new Sitemap;
//~ $c->addLink('http://www.trainz.cz/abc')
  //~ ->addLink('http://www.trainz.cz/cba');
//~ $o = $c->addLink('http://www.trainz.cz/abcd');
//~ $o->addImage('http://example.cz/obrazek.jpg')
  //~ ->addImage('http://example.cz/obrazek2.jpg', 'title')
  //~ ->addImage('http://example.cz/obraze32.jpg', 'title', 'caption')
  //~ ->addImage('http://example.cz/obraze32.jpg', 'title', 'caption', 'geo')
  //~ ->addImage('http://example.cz/obraze32.jpg', 'title', 'caption', null, 'www.linklic.com');
//~ echo $c->render();  // render nebo save
// preskladat poradi, privni vytvorit a az pak zanaset dodatecne + metodu jde prepnou na jazyk ktery je mezi dostupnyma?
//~ var_dump($this->menu->getArrayAddress());
//~ var_dump($this->uri, $this->menu->getTplAddress('_'));  //obrzlicku v metode?
// nastavovani prefixu cache, po aplikaci prekladu ***********************
//~ $this->cache->setPrefix($this->current_language.'_');
// bacha tady se vypina exception pri neexistenci systemove podpory prekladu gettext+setlocale
//~ if (!in_array($table, $ignore)) {
          //~ }
    /*
          $q = $this->db->query($table);
          while ($v1 = $q->fetch(\PDO::FETCH_ASSOC)) {
            $result[$table]['rows'][] = $v1;
          }
*/
// $counter1++;
          // if (count($this->uri) - 2) != $counter1) {
  //var_dump(implode('/', array_slice($this->uri, 0, $counter1+1)));
            //echo '<a href="'.$weburl.(implode('/', array_slice($this->uri, 0, $counter1+1)){$value ? '/' . $value : null}" title="{$crate->getDownloadCategoryRewrite($value, 'name')}">{$crate->getDownloadCategoryRewrite($value, 'name')}</a>{else}{if="$crate->isDownloadObject($uri)"}{$crate->getDownload($crate->getDownloadObjectID($uri), 'name')}{else}{$crate->getDownloadCategoryRewrite($value, 'name')}{/if}{/if}
          // }
//else {
          // cesta
  //$current_section = implode(array_slice(array_slice($this->uri, 1), -1));
          // $counter1 = -1;
        //}
        //var_dump("cesta:", $current_section, $this->getDownloadCategoryRewrite(implode(array_slice(array_slice($this->uri, 1), -1)), 'name'));
        //isset($this->uri['page']) && $this->uri['page'] == 'download' ? $after : null
//$after = $this->isDownloadObject($this->uri) ? $this->getDownload($this->getDownloadObjectID($this->uri), 'name') : $this->getDownloadCategoryRewrite(implode(array_slice(array_slice($this->uri, 1), -1)), 'name');
//~ $this->cache->clearAll();
{code}
  // $count_downloads = $db->rawQuery('SELECT COUNT(iddownload) pocet FROM downloads WHERE confirmed=1 AND deleted IS NULL')->getFirst()->pocet;
  // $count_up_downloads = $db->rawQuery('SELECT COUNT(iddownload) pocet FROM downloads WHERE confirmed=1 AND deleted IS NULL AND DATE(added)=CURDATE()')->getFirst()->pocet;
  // $count_slideshows = $db->rawQuery('SELECT COUNT(idslideshow) pocet FROM slideshows WHERE confirmed=1')->getFirst()->pocet;
  // $count_up_slideshows = $db->rawQuery('SELECT COUNT(idslideshow) pocet FROM slideshows WHERE confirmed=1 AND DATE(added)=CURDATE()')->getFirst()->pocet;
  // $count_news = $db->rawQuery('SELECT COUNT(idnews) pocet FROM news')->getFirst()->pocet;
  // $count_up_news = $db->rawQuery('SELECT COUNT(idnews) pocet FROM news WHERE DATE(added)=CURDATE()')->getFirst()->pocet;
  // $count_links = $db->rawQuery('SELECT COUNT(idlink) pocet FROM links')->getFirst()->pocet;
  // $count_trainz_kuid = $db->rawQuery('SELECT COUNT(idtrainz_kuid) pocet FROM trainz_kuids')->getFirst()->pocet;
  // $count_downloads_category = $db->rawQuery('SELECT COUNT(iddownload_category) pocet FROM downloads_category')->getFirst()->pocet;
  // $count_trainz_versions = $db->rawQuery('SELECT COUNT(idtrainz_version) pocet FROM trainz_versions')->getFirst()->pocet;
  // $count_users = $db->rawQuery('SELECT COUNT(iduser) pocet FROM users WHERE confirmed=1 AND deleted IS NULL')->getFirst()->pocet;
  // $count_up_users = $db->rawQuery('SELECT COUNT(iduser) pocet FROM users WHERE confirmed=1 AND deleted IS NULL AND DATE(added)=CURDATE()')->getFirst()->pocet;
  // $count_authors = $db->rawQuery('SELECT COUNT(poc) + (SELECT COUNT(poc) pocet FROM
  //                                   (SELECT COUNT(author) poc FROM slideshows WHERE author IS NOT NULL AND confirmed=1 GROUP BY author) tab) pocet FROM
  //                                       (SELECT COUNT(author) poc FROM downloads WHERE author IS NOT NULL AND confirmed=1 AND deleted IS NULL GROUP BY author) tab')->getFirst()->pocet;
  // $file_size_files = classes\Core::calculateSize(classes\Core::getSizeDir('files/'));
  // $file_size_img_download = classes\Core::calculateSize(classes\Core::getSizeDir('img/download/', true));
  // $file_size_img_slideshow = classes\Core::calculateSize(classes\Core::getSizeDir('img/slideshow/'));
  // $db_size = classes\Core::calculateSize($db->rawQuery('SELECT Sum(data_length + index_length) size FROM information_schema.tables WHERE table_schema=?', array($crate->db_name))->getFirst()->size);
/* ==========================================================================
  $sum_counter_downloads = $db->rawQuery('SELECT SUM(counter) pocet FROM trainz_cdp')->getFirst()->pocet;
  <p class="mws-stat">
    <span class="mws-stat-icon icol32-box-down"></span>
    <span class="mws-stat-content">
      <span class="mws-stat-title">Objekty staženy</span>
      <span class="mws-stat-value">{$sum_counter_downloads ?: 0}x</span>
    </span>
  </p>
   ========================================================================== */
{/code}
            //$nodejs = self::giveCommand('which nodejs');
            // $npm = self::giveCommand('which npm');
            //$npm = self::giveCommand('which sl');
            // $npm = Bash::isInstall('sl');
// var_dump($nodejs, $npm, self::isInstall('ls'));
        // /**
        //  * zadavani prikazu do bashu
        //  *
        //  * @since 1.02
        //  * @param void
        //  * @return void
        //  */
        // private static function giveCommand($text, &$code) {
        //     exec($text, $ret, $code);
        //     return $ret;
        // }
// $arr = array_map(function($v) {
//         return date('d.m.Y H:i:s', filemtime($v));
//     }, $sep);
// var_dump($arr);
//date('d.m.Y H:i:s', filemtime($css))
// hlidat si modify time!!!
// var_dump(json_encode($sep));
                    // $arr = array_combine($sep, $sep);
                    $arr = array();
                    foreach ($sep as $value) {
                        $arr[$value] = md5_file($value);
                        //date(\DateTime::W3C, filemtime($value));
                    }
                    ;
{}{}<><><><><>><>
//$a = classes\Core::getListRecursiveAll(array('path' => dirname($less), 'onlyfile' => true));
                        //var_dump(array_filter($ret, function($v) { var_dump($v); return null; }), $ret);
var_dump($k, md5_file($k), $v, PHP_EOL);
b/**
         * YUI kompresssor kodu
         *
         * @since 1.08
         * @param void
         * @return void
         */
        public static function yuiCompressor() {
            // udelat volbu na js/css/jscss via: https://github.com/MartinFugess/GUI-pro-yuicompressor/blob/master/index.php
        }
// file_put_contents($map_path, json_encode(array_map($md5_file_function, $sep)));
$md5_file_function = function($v) { return md5_file($v); };
// $sep = explode(' ', substr($r[0], strlen($css.': ')));
                        // $arr = array($less => md5_file($less)); // pridani sama sebe
                        // foreach ($sep as $value) {
                        //     $arr[$value] = md5_file($value);
                        // }
                        // file_put_contents($map_path, json_encode($arr));
// prvni generovani musi jit bez dependency (ten nevytvari slozky)
                    // if (!file_exists($css)) {
                    //     echo 'prvni vytvoreni generuji bez zavislosti...';
                    //     unlink($map_path);
                    //     var_dump(Bash::giveCommand('lessc '.$param.' --no-color '.$less.' '.$css.' 2>&1', $c), $c);
                    // }
// var_dump($less, $m['sources']);$less_dir = dirname($less);

       //     if (file_exists($dir) && is_writable($dir) && is_executable(self::COMPRESSOR)) {
        //         $a = Bash::giveCommand('java -jar '.self::COMPRESSOR.' '.$param.' -o ".css$:-min.css" '.$dir.'*.css 2>&1', $c);
        //         if ($c == 1) {
        //             throw new Exception(implode('<br />'.PHP_EOL, $a), 1);
        //         }
        //         return $c == 0;
        //     } else {
        //         if (!file_exists($dir)) {
        //             throw new Exception('Slozka neexistuje!', 1);
        //         } else
        //         if (!is_writable($dir)) {
        //             throw new Exception('Nelze zapisovat do slozky!', 1);
        //         } else
        //         if (!is_executable(self::COMPRESSOR)) {
        //             throw new Exception('Nelze spoustet kompresor!', 1);
        //         }

        //     }


{/*
  {if="$crate->isActiveTask($value)"}
    {if="$crate->isAnyRun()"}
      |{$task = $crate->getTask($value)}|

      odstarovano: {date="d.m.Y H:i:s", $task.start}

      <a href="#">pause</a> - <a href="#" onclick="stopTask('{$value}'); return false;">stop</a>
    {else}
      <a href="#" onclick="addTask('{$value}'); return false;">spustit ulohu</a>
    {/if}
  {/if}
*/}

        /*public function getActiveTask() {
            if (file_exists(self::JSON_FILE)) {
                $data = json_decode(file_get_contents(self::JSON_FILE), true);
                if (isset($data[self::RUN_TASK])) {
                    $key = $data[self::RUN_TASK];
                    return $data[$key['name']][self::TASK_LIST][$key['time']];
                }
            }
            return null;
        }*/

{*
!$crate->isActiveProject($value) &&
!$crate->isAnyActiveProject()
*}

                        if ($pause[self::TASK_PAUSE_LENGTH]) {
                            //prvni ulozeni
                            //
                        } else {
                            //dopocitani rozdilu
                        }
var_dump($act[self::TASK_PAUSE][self::TASK_PAUSE_LENGTH]);
// var_dump($data);
                    /*$pause = &$data[$key][self::TASK_LIST][$time][self::TASK_PAUSE];
                    if (!$pause[self::TASK_PAUSE_START]) {
                        // pusteni pauzy
                        $pause[self::TASK_PAUSE_START] = time();
                    } else {
                        // zastaveni pauzy
                        $diff = classes\DateAndTime::different($pause[self::TASK_PAUSE_START], time());
                        $pause[self::TASK_PAUSE_LENGTH] += classes\DateAndTime::toSeconds($diff);   // pripocte sekundovy rozdil
                        $pause[self::TASK_PAUSE_START] = null;
                    }*/
                    // var_dump($data);
                    /*$pause = &$data[$key][self::TASK_LIST][$time][self::TASK_PAUSE];
                    if (!$pause[self::TASK_PAUSE_START]) {
                        // pusteni pauzy
                        $pause[self::TASK_PAUSE_START] = time();
                    } else {
                        // zastaveni pauzy
                        $diff = classes\DateAndTime::different($pause[self::TASK_PAUSE_START], time());
                        $pause[self::TASK_PAUSE_LENGTH] += classes\DateAndTime::toSeconds($diff);   // pripocte sekundovy rozdil
                        $pause[self::TASK_PAUSE_START] = null;
                    }*/
// $key = $_POST['key'];
                    // $time = $_POST['time'];4
// return $nodejs && $npm && $p;
var_dump(classes\Bash::giveCommand('echo "" | sudo -u  -i npm install less', $c), $c);
//~ var_dump(classes\Bash::giveCommand('pwd'))
  // ulozeni projektu
    $('#project_save').click(function(e) {

    })
// $data[self::RUN_TASK] = array(self::RUN_NAME => $key, self::RUN_TIME => $time);
        /**
         * synchronizacni metoda
         *
         * @since 1.02
         * @param array args pole konfigurace predavane z cronu
         * @return int pocet provedenych zmen
         */
        public static function synchronizeCron($args = array()) {
            $poc = 0;
            // synchronizace pro slideshows
            //~ $poc += classes\DbDirComparator::synchronizeCron(array('dir' => 'img/slideshow/', 'ignore' => array('no-slideshow-img.png'), 'db' => $db->query('slideshows', 'path')->getAllRows()));

            // synchronizace pro users
            //~ $poc += classes\DbDirComparator::synchronizeCron(array('dir' => 'img/avatars/', 'ignore' => array('no-profile-img.png'), 'db' => $db->query('users', 'avatar', 'avatar IS NOT NULL')->getAllRows()));

            // synchronizace pro downloads
            //~ $download_pictures = $db->query('downloads', 'picture')->getAllRows();
            //~ $poc += classes\DbDirComparator::synchronizeCron(array('dir' => 'img/download/mini/', 'db' => $download_pictures)); // mini
            //~ $poc += classes\DbDirComparator::synchronizeCron(array('dir' => 'img/download/full/', 'db' => $download_pictures)); // full

            // cisteni neslinkovanych cdp souboru
            //~ $poc += $db->execSQL('DELETE _tc FROM trainz_cdp _tc
                                //~ LEFT JOIN downloads_has_trainz_cdp USING(idtrainz_cdp)
                                //~ WHERE iddownload IS NULL');

            // synchronizace pro trainz_cdp
            //~ $poc += classes\DbDirComparator::synchronizeCron(array('dir' => 'files/', 'db' => $db->query('trainz_cdp', 'path')->getAllRows()));

            // cisteni lastloginu (dny)
            //~ $poc += $db->delete('lastlogins', 'added <= (CURDATE() - INTERVAL '.$global_configure['expire']['lastlogins'].' DAY)', array());

            // cisteni archivu (dny)
            //~ $poc += $db->delete('notifications', 'deleted <= (CURDATE() - INTERVAL '.$global_configure['expire']['notifications'].' DAY)', array());

            return $poc;
        }
task
// if (isset($data[self::RUN_TASK])) {
                        // $key = $data[self::RUN_TASK];
// }
                    // return null;
$key = ;
                    $time = ;
                    // $data[self::RUN_TASK] = null;
// return array_filter(array_keys($data), function($v) { return $v != Crate::RUN_TASK; });
 // /**
        //  * je aktivni nejaky projekt?
        //  *
        //  * @since 1.08
        //  * @param void
        //  * @return bool true pokud je nejaky projekt aktivni
        //  */
        // public function isAnyActiveProject() {
            // if (file_exists(self::JSON_FILE)) {
            //     $data = json_decode(file_get_contents(self::JSON_FILE), true);
            //     return isset($data[self::RUN_TASK]) && $data[self::RUN_TASK] != null;
            // }
        //     return null;
        // }

        // *
        //  * jeaktivni konkretni projekt?
        //  *
        //  * @since 1.06
        //  * @param string name jmeno projektu
        //  * @return bool true kdyz je aktnivni konkretni projekt
        // public function isActiveProject($name) {
            // if (file_exists(self::JSON_FILE)) {
            //     $data = json_decode(file_get_contents(self::JSON_FILE), true);
            //     if (isset($data[self::RUN_TASK])) {
            //         $key = $data[self::RUN_TASK];
            //         return $key[self::RUN_NAME] == $name;
            //     }
            // }
        //     return null;
        // }
// const RUN_TASK = '_run_';
        // const RUN_NAME = 'name';
        // const RUN_TIME = 'time';
// if (isset($data[self::RUN_TASK])) {
                //     $key = $data[self::RUN_TASK];
                //     return $key[self::RUN_NAME] == $project && $key[self::RUN_TIME] == $time;
                // }
// if (isset($data[self::RUN_TASK])) {
                        //     $key = $data[self::RUN_TASK];
                        //     $act = $data[$key[self::RUN_NAME]][self::TASK_LIST][$key[self::RUN_TIME]];

                        //     if ($act[self::TASK_PAUSE][self::TASK_PAUSE_START]) {
                        //         // pokud je pustena pauza
                        //         $pause = $act[self::TASK_PAUSE][self::TASK_PAUSE_START];
                        //         $diff_pause = classes\DateAndTime::different($pause, time());
                        //         $diff_sum = classes\DateAndTime::different($pause, time() + $act[self::TASK_PAUSE][self::TASK_PAUSE_LENGTH]);

                        //         //??? omg
                        //         $diff = classes\DateAndTime::different($act[self::TASK_START], $act[self::TASK_START] - $act[self::TASK_PAUSE][self::TASK_PAUSE_LENGTH]);

                        //         return '<strong>'.$key[self::RUN_NAME].'</strong> task: ??'.$diff->format('běží již %a dní a %H:%I:%S').'??? je zapauzovany od: '.date('d.m.Y H:i:s', $pause).', a pauza '.$diff_pause->format('běží již %a dní a %H:%I:%S').', a celkove uz '.$diff_sum->format('běží již %a dní a %H:%I:%S');
                        //     } else {
                        //         // pokud to normalne bezi
                        //         $diff = classes\DateAndTime::different($act[self::TASK_START], time() - $act[self::TASK_PAUSE][self::TASK_PAUSE_LENGTH]);
                        //         return 'projekt: <strong>'.$key[self::RUN_NAME].'</strong>, '.$diff->format('běží již %a dní a %H:%I:%S');
                        //     }
                        // } else {
                        //     return 'nic nebezi...';
                        // }
var_dump(); //, self::getFormatDate($v1[self::TASK_START])$diff->format('běží již %a a %H:%I:%S')
$diff->format('již %a a %H:%I:%S')
$diff_pause->format('běží již %a dní a %H:%I:%S')
$diff_sum->format('běží již %a dní a %H:%I:%S')
// 'name' => self::getFormatDate($diff, self::DATE_DIFF),
// else {
                    //    return 'nemam z ceho cerpat voe...';
                    // }
// doresit nic a nic nebezi!!
                        // if (count($result) > 0) {
                            // return 'nic nebezi...';
                        // } else {
                            // return implode('<br> KONEC ???', $result);
                        // }
// $result[] = 'task: '.self::getFormatDate($diff, self::DATE_DIFF).' je zapauzovany od: '.self::getFormatDate($pause, self::DATE_NORMAL).', a pauza běží již'.self::getFormatDate($diff_pause, self::DATE_DIFF).', a celkove uz běží již: '.self::getFormatDate($diff_sum, self::DATE_DIFF);
// $result[] = '??? ZACATEK <h3>'.$v[self::TASK_NAME].'</h3>';
// generovani jmen projektu
// $result[] = 'task běží: '.self::getFormatDate($diff, self::DATE_DIFF) . ', započato v: ' . self::getFormatDate($v1[self::TASK_START], self::DATE_NORMAL);
// spatne pocita sum!!!
var_dump(date('d.m.Y H:i:s', $first), $sumtime, $sumpause);
//~ var_dump(classes\DateAndTime::different($first, classes\DateAndTime::from($sumtime)));
{$diff2->format('<span><em>%a</em> den/dny/dnů</span> <strong>%H:%I:%S</strong>')}
var_dump($data);
                    //detekce spustenych
                    //detekce pauzy
                    return 0;
//~ var_dump($proj[self::TASK_STOP]);
strtotime('-1 month'),//
strtotime('-1 year  '),//
//~ $m = array_unique($m);  // vyhazeni duplikace
{*loop="$crate->getListProject()"*}
{*loop="$crate->getListTask($key)" as $k => $task*}
{$task->idproject}
{$task->idtask}
{*
<div class="panel panel-primary">
    <div class="panel-heading clearfix">
        <h3 class="panel-title pull-left">nazev projektu</h3>
    </div>
    <div class="panel-body">

        <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:00:00</strong></p>
        <p class="now-projekt-desc">22:30:29 (09.12.2013) - ?</p>

        <hr>

        <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:00:11</strong></p>
        <p class="now-projekt-desc">22:30:29 (09.12.2013) - ?</p>

        <hr>

        <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:00:11</strong></p>
        <p class="now-projekt-desc">22:30:29 (09.12.2013) - ?</p>

    </div>
</div>



<div class="panel panel-primary">
    <div class="panel-heading clearfix">
        <h3 class="panel-title pull-left">nazev projektu 2</h3>
    </div>
    <div class="panel-body">

        <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:00:11</strong></p>
        <p class="now-projekt-desc">22:30:29 (09.12.2013) - ?</p>

    </div>
</div>


<div class="panel panel-primary">
    <div class="panel-heading clearfix">
        <h3 class="panel-title pull-left">nazev projektu 3</h3>
    </div>
    <div class="panel-body">

        <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:00:11</strong></p>
        <p class="now-projekt-desc">22:30:29 (09.12.2013) - ?</p>



        <div class="panel panel-danger">
            <div class="panel-heading clearfix">
                <h3 class="panel-title pull-left">Pozastaveno</h3>
            </div>
            <div class="panel-body">

                <div class="col-xs-6 time-pause">
                    <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:00:46</strong></p>
                    <p class="now-projekt-desc">Čas pauzy</p>
                </div>
                <div class="col-xs-6 time-pause">
                    <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:01:46</strong></p>
                    <p class="now-projekt-desc">Celkový čas pauzy</p>
                </div>

            </div>
        </div>




        <hr>

        <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:00:11</strong></p>
        <p class="now-projekt-desc">22:30:29 (09.12.2013) - ?</p>



        <div class="panel panel-danger">
            <div class="panel-heading clearfix">
                <h3 class="panel-title pull-left">Pozastaveno</h3>
            </div>
            <div class="panel-body">

                <div class="col-xs-6 time-pause">
                    <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:00:46</strong></p>
                    <p class="now-projekt-desc">Čas pauzy</p>
                </div>
                <div class="col-xs-6 time-pause">
                    <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:01:46</strong></p>
                    <p class="now-projekt-desc">Celkový čas pauzy</p>
                </div>

            </div>
        </div>









    </div>
</div>

*}
$active_task[$crate::TASK_PAUSE][$crate::TASK_PAUSE_LENGTH]
        // konstanty projetu
        const TASK_LIST = 'tasks';
        const TASK_NAME = 'name';
        const TASK_ARCHIVE = 'archive';

        // konstanty samotnych tasku
        const TASK_START = 'start';
        const TASK_STOP = 'stop';
        const TASK_DESC = 'description';

        // doplnuji casove konstanty pro tasky
        const TASK_YEAR = 'year';
        const TASK_MONTH = 'month';
        const TASK_WEEK = 'week';
        const TASK_DAY = 'day';

        // konstanty na pauzu tasku
        const TASK_PAUSE = 'pause';
        const TASK_PAUSE_START = 'start';
        const TASK_PAUSE_LENGTH = 'length';
const JSON_FILE = 'timer_task.json';    // datovy soubor
// var_dump(json_decode(file_get_contents(self::JSON_FILE), true));
// tady asi 3 nasledujicic metody uplne vyhodit!!
        /**
         * nacitani pole pracovnich datumu
         * - vnitrne radi a-z, 0-9
         *
         * @since 2.36
         * @param void
         * @return array pole rok=>array(mesice)
         */
        public function getListMonthProject() {
            if (file_exists(self::JSON_FILE)) {
                $data = json_decode(file_get_contents(self::JSON_FILE), true);
                $result = array();
                foreach ($data as $proj) {
                    //~ var_dump($proj[self::TASK_LIST]);
                    $list = $proj[self::TASK_LIST];

                    $year = array_map(function($v) {
                        return $v[Crate::TASK_YEAR];
                    }, $list);

                    foreach ($year as $i => $y) {
                        //~ var_dump($y, $i);
                        var_dump($list[$i][self::TASK_MONTH]);

                        $years[$y][$i] = null;

                        //~ $years[$y][$i] = null;
                    }

                    var_dump($years);

/*
                    $month = array_map(function($v) {
                        return $v[Crate::TASK_MONTH];
                    }, $proj[self::TASK_LIST]);

                    $week = array_map(function($v) {
                        return $v[Crate::TASK_WEEK];
                    }, $proj[self::TASK_LIST]);

                    $day = array_map(function($v) {
                        return $v[Crate::TASK_DAY];
                    }, $proj[self::TASK_LIST]);
*/
                    //~ var_dump($year, $month, $week, $day);


                    /*
                    $year = $month = array_map(function($v) {
                        return intval(date('Y', $v[Crate::TASK_START]));
                    }, $proj[self::TASK_LIST]);
                    $year = array_values(array_unique($year));

                    // prochazeni roku
                    foreach ($year as $y) {
                        $month = array_map(function($v) {
                            return intval(date('m', $v[Crate::TASK_START]));
                        }, $proj[self::TASK_LIST]);
                        $m = array_values(array_unique($month));
                        sort($m);   // serazeni mesicu
                        $result[$y] = $m;
                    }
                    */
                }
                //~ ksort($result);   // serazeni roku
                return $result;
            }
            return array();
        }

        /**
         * nacitani sum statistik za dany rok a mesic
         *
         * @since 2.36
         * @param int year rok
         * @param int month mesic
         * @return array pole udaju pro dany rok+mesic
         */
        public function getSumByYearMonth($year, $month) {
            $data = json_decode(file_get_contents(self::JSON_FILE), true);
            var_dump($year, $month);
        }

// omg narazi na hranice pouzitelosti, proc se s tim srat kdyz to resit databazovy layer efektivnejc!!
        public function getSumYearMonthDay($year, $month, $day) {}
        public function getSumYearWeek($year, $week) {}
$pause = &$data[$id][self::TASK_LIST][$task][self::TASK_PAUSE];
            if (!$pause[self::TASK_PAUSE_START]) {
                // pusteni pauzy
                $pause[self::TASK_PAUSE_START] = time();
            } else {
                // zastaveni pauzy
                $diff = classes\DateAndTime::different($pause[self::TASK_PAUSE_START], time());
                $pause[self::TASK_PAUSE_LENGTH] += classes\DateAndTime::toSeconds($diff);   // pripocte sekundovy rozdil
                $pause[self::TASK_PAUSE_START] = null;
            }
            return $data;
/*
            if (file_exists(self::JSON_FILE)) {
                $data = json_decode(file_get_contents(self::JSON_FILE), true);
                $tasks = $data[$id][self::TASK_LIST];
                $_keys = array_keys($tasks);    // pocatecni task, od toho se pocita delka
                $first = isset($_keys[0]) ? $tasks[$_keys[0]][self::TASK_START] : 0;  // nacteni prvni polozky

                // soucet rozdilu casu (obsahuje pauzy)
                $sumtime = array_sum(array_map(function($v) {
                    return classes\DateAndTime::toSeconds(classes\DateAndTime::different($v[Crate::TASK_START], $v[Crate::TASK_STOP]));
                }, $tasks));

                // soucet pauzy
                $sumpause = array_sum(array_map(function($v) {
                    return $v[Crate::TASK_PAUSE][Crate::TASK_PAUSE_LENGTH];
                }, $tasks));

                return array(   // celkovy cas = sum cas - sum pauza
                    'sum' => self::getFormatDate(classes\DateAndTime::different($first, $first + $sumtime), self::DATE_DIFF),    // vcetne pauzy
                    'time' => self::getFormatDate(classes\DateAndTime::different($first, ($first + $sumtime) - $sumpause), self::DATE_DIFF),   // bez pauzy
                    'pause' => self::getFormatDate(classes\DateAndTime::different($first, $first + $sumpause), self::DATE_DIFF),   // jen pauza
                );
            }
*/

        /**
         * nacti konkretniho tasku
         *
         * @since 1.08
         * @param string id identifikator projektu
         * @param string task identifikator tasku
         * @return array nactehe data ulohy
         */
        public function getTask($id, $task) {
            if (file_exists(self::JSON_FILE)) {
                $data = json_decode(file_get_contents(self::JSON_FILE), true);
                return $data[$id][self::TASK_LIST][$task];
            }
            return array();
        }
/*
            if (file_exists(self::JSON_FILE)) {
                $data = json_decode(file_get_contents(self::JSON_FILE), true);
                return is_null($data[$id][self::TASK_LIST][$task][self::TASK_PAUSE][self::TASK_PAUSE_START]);
            }
            return null;
*/
/*
            if (file_exists(self::JSON_FILE)) {
                $data = json_decode(file_get_contents(self::JSON_FILE), true);
                return is_null($data[$id][self::TASK_LIST][$task][self::TASK_STOP]);
            }
            return null;
*/
/**
         * vypis tasku pro konktetni projekt
         *
         * @since 1.04
         * @param string id identifikator projektu
         * @return array 0=>id
         */
        public function getListTask($id) {
            if (file_exists(self::JSON_FILE)) {
                $data = json_decode(file_get_contents(self::JSON_FILE), true);
                // obratit vypis, nove nahore!!!
                return array_keys($data[$id][self::TASK_LIST]);
            }
            return array();
        }
/**
         * vypis projektu
         * - vypisuje indexy a jmena
         *
         * @since 1.04
         * @param bool|null vypis archivovanych, null vypis vseho
         * @return array pole id=>nazev
         */
        public function getListProject($archive = false) {
            //~ var_dump($this->db);

            if (file_exists(self::JSON_FILE)) {
                $data = json_decode(file_get_contents(self::JSON_FILE), true);
                $p_name = function($v) { return $v[Crate::TASK_NAME]; };    // separace jmena
                $f_name = function($v) { return !isset($v[Crate::TASK_ARCHIVE]); }; // vyrazovani archivu
                $f1_name = function($v) { return isset($v[Crate::TASK_ARCHIVE]); }; // vkadani archivu
                return array_map($p_name, !is_null($archive) ? array_filter($data, $archive ? $f1_name : $f_name) : $data);
            }
            return array();
        }
$poc = 0;
            foreach ($data[self::TASK_LIST] as $k1 => $v1) {
                if (is_null($v1[self::TASK_STOP])) {
                    $poc++;
                }
            }
            return $poc;
$result = array();
                    if (file_exists(self::JSON_FILE)) {
                        $data = json_decode(file_get_contents(self::JSON_FILE), true);
                        foreach ($data as $k => $v) {   // projiti projektu

                            if (self::getCountActivate($v) > 0) {   // pokud je neco aktivovano
                                $result[$k] = array(
                                    'name' => $v[self::TASK_NAME],  // nacteni jmen projektu
                                    'list' => array()
                                );
                            }

                            foreach ($v[self::TASK_LIST] as $k1 => $v1) {
                                if (is_null($v1[self::TASK_STOP])) {
                                    if ($v1[self::TASK_PAUSE][self::TASK_PAUSE_START]) {
                                        // pokud je pustena pauza
                                        $pause = $v1[self::TASK_PAUSE][self::TASK_PAUSE_START];

                                        $diff = classes\DateAndTime::different($v1[self::TASK_START], $pause - time() - $v1[self::TASK_PAUSE][self::TASK_PAUSE_LENGTH]);
                                        $diff_pause = classes\DateAndTime::different($pause, time());
                                        $diff_sum = classes\DateAndTime::different($pause, time() + $v1[self::TASK_PAUSE][self::TASK_PAUSE_LENGTH]);

                                        $result[$k]['list'][$k1] = array(
                                            'state' => 'pause',
                                            'name' => self::getFormatDate($diff, self::DATE_DIFF),
                                            'from' => self::getFormatDate($v1[self::TASK_START], self::DATE_NORMAL),

                                            'pause' => self::getFormatDate($pause, self::DATE_NORMAL),
                                            'current' => self::getFormatDate($diff_pause, self::DATE_DIFF),
                                            'sum' => self::getFormatDate($diff_sum, self::DATE_DIFF),
                                        );
                                    } else {
                                        // pokud to normalne bezi
                                        $diff = classes\DateAndTime::different($v1[self::TASK_START], time() - $v1[self::TASK_PAUSE][self::TASK_PAUSE_LENGTH]);
                                        $result[$k]['list'][$k1] = array(
                                            'state' => 'run',
                                            'name' => self::getFormatDate($diff, self::DATE_DIFF),
                                            'from' => self::getFormatDate($v1[self::TASK_START], self::DATE_NORMAL),
                                        );
                                    }
                                }
                            }
                        }
                    }
                    return json_encode($result);
$data = json_decode(file_get_contents(self::JSON_FILE), true);
                    $data[$_POST['id']][self::TASK_LIST][$_POST['task']][self::TASK_DESC] = $_POST['description'];
                    return file_put_contents(self::JSON_FILE, json_encode($data));
$data = json_decode(file_get_contents(self::JSON_FILE), true);
                    $data = self::processPause($data, $_POST['id'], $_POST['task']);
                    return file_put_contents(self::JSON_FILE, json_encode($data));
//~ $cv = classes\ContentValues::init()->putDate('pause_start');
                    //~ return $db->update('tasks', $cv, 'idproject=? AND idtask=?', array($_POST['id'], $_POST['task']));
$data = json_decode(file_get_contents(self::JSON_FILE), true);
                    // nastaveni casu zastaveni
                    $data[$_POST['id']][self::TASK_LIST][$_POST['task']][self::TASK_STOP] = time();
                    // pokud je pauza pustena, se stopem ji taky zastavi
                    if ($data[$_POST['id']][self::TASK_LIST][$_POST['task']][self::TASK_PAUSE][self::TASK_PAUSE_START]) {
                        $data = self::processPause($data, $_POST['id'], $_POST['task']);
                    }
                    return file_put_contents(self::JSON_FILE, json_encode($data));
$data = json_decode(file_get_contents(self::JSON_FILE), true);
                    unset($data[$_POST['id']][self::TASK_LIST][$_POST['task']]);
                    return file_put_contents(self::JSON_FILE, json_encode($data));
$data = json_decode(file_get_contents(self::JSON_FILE), true);
                    $t = time();
                    // ulozeni nove
                    $data[$_POST['id']][self::TASK_LIST][uniqid()] = array(
                            self::TASK_START => $t, // poctacecni cas
                            self::TASK_STOP => null,    // koncovy cas
                            // pro efektivni casove sortovani
                            self::TASK_YEAR => intval(date('Y', $t)),   // rok tasku
                            self::TASK_MONTH => intval(date('m', $t)),  // mesic tasku
                            self::TASK_WEEK => intval(date('W', $t)),   // tyden tasku
                            self::TASK_DAY => intval(date('d', $t)),    // den tasku
                            self::TASK_DESC => null,    // popisek
                            self::TASK_PAUSE => array(
                                    self::TASK_PAUSE_START => null, // zacatek pauzy
                                    self::TASK_PAUSE_LENGTH => 0,   // delka pauzy
                                ),
                        );
                    return file_put_contents(self::JSON_FILE, json_encode($data));
                    $data = json_decode(file_get_contents(self::JSON_FILE), true);
                    $data[$_POST['id']][self::TASK_ARCHIVE] = time();   // nastaveni data archivace
                    foreach ($data[$_POST['id']][self::TASK_LIST] as $task => &$list) {
                        // zastaveni tasku
                        if (is_null($list[self::TASK_STOP])) {
                            $list[self::TASK_STOP] = time();
                        }
                        // zastaveni pauzy
                        if (!is_null($list[self::TASK_PAUSE][self::TASK_PAUSE_START])) {
                            $data = self::processPause($data, $_POST['id'], $task);
                        }
                    }
                    return file_put_contents(self::JSON_FILE, json_encode($data));
$data = json_decode(file_get_contents(self::JSON_FILE), true);
                    unset($data[$_POST['id']]);
                    return file_put_contents(self::JSON_FILE, json_encode($data));
$data = json_decode(file_get_contents(self::JSON_FILE), true);
                    $data[$_POST['id']][self::TASK_NAME] = $_POST['name'];
                    return file_put_contents(self::JSON_FILE, json_encode($data));
$data = array();
                    if (file_exists(self::JSON_FILE)) {
                        $data = json_decode(file_get_contents(self::JSON_FILE), true);
                    }
                    $data[uniqid()] = array(
                            self::TASK_NAME => $_POST['name'],  // jmeno projektu
                            self::TASK_ARCHIVE => null, // datum archivace
                            self::TASK_LIST => array(), // list tasku
                        );
                    return file_put_contents(self::JSON_FILE, json_encode($data));
{loop="$db->query('tasks', 'idtask, start, stop, used, description, pause_start, pause_length', 'strftime(\'%Y\', start)=? AND strftime(\'%m\', start)=?', array($year->rok, $month->mesic))" as $task}

            // dopsat sumarizaci!!!!
        {/loop}
{$sumpause = 0}
    {$sumtime = 0}
    {$first = null}
    {loop="$db->rawQuery('SELECT start, stop, pause_length FROM projects
                        JOIN tasks USING(idproject)
                        WHERE strftime(\'%Y\', start)=?', array($year->rok))" as $task}
        {code}
            $sumtime += classes\DateAndTime::toSeconds(classes\DateAndTime::different($task->start, $task->stop));
            $sumpause += $task->pause_length;
            $first = $first ?: strtotime($task->start);
        {/code}
    {/loop}
    {code}
        $sum = Crate::getFormatDate(classes\DateAndTime::different($first, ($first) + $sumtime), Crate::DATE_DIFF);    // vcetne pauzy
        $time = Crate::getFormatDate(classes\DateAndTime::different($first, (($first) + $sumtime) - $sumpause), Crate::DATE_DIFF);   // bez pauzy
        $pause = Crate::getFormatDate(classes\DateAndTime::different($first, ($first) + $sumpause), Crate::DATE_DIFF);   // jen pauza
    {/code}
{$sumpause = 0}
        {$sumtime = 0}
        {$first = null}
        {loop="$db->rawQuery('SELECT start, stop, pause_length FROM projects
                            JOIN tasks USING(idproject)
                            WHERE strftime(\'%Y\', start)=? AND strftime(\'%m\', start)=?', array($year->rok, $month->mesic))" as $task}
            {code}
                $sumtime += classes\DateAndTime::toSeconds(classes\DateAndTime::different($task->start, $task->stop));
                $sumpause += $task->pause_length;
                $first = $first ?: strtotime($task->start);
            {/code}
        {/loop}
        {code}
            $sum = Crate::getFormatDate(classes\DateAndTime::different($first, strtotime($first) + $sumtime), Crate::DATE_DIFF);    // vcetne pauzy
            $time = Crate::getFormatDate(classes\DateAndTime::different($first, (strtotime($first) + $sumtime) - $sumpause), Crate::DATE_DIFF);   // bez pauzy
            $pause = Crate::getFormatDate(classes\DateAndTime::different($first, strtotime($first) + $sumpause), Crate::DATE_DIFF);   // jen pauza
        {/code}
{$sumpause = 0}
        {$sumtime = 0}
        {$first = null}
        {loop="$db->rawQuery('SELECT start, stop, pause_length FROM projects
                            JOIN tasks USING(idproject)
                            WHERE strftime(\'%Y\', start)=? AND strftime(\'%m\', start)=?', array($year->rok, $month->mesic))" as $task}
            {code}
                $sumtime += classes\DateAndTime::toSeconds(classes\DateAndTime::different($task->start, $task->stop));
                $sumpause += $task->pause_length;
                $first = $first ?: strtotime($task->start);
            {/code}
        {/loop}
        {code}
            $sum = Crate::getFormatDate(classes\DateAndTime::different($first, strtotime($first) + $sumtime), Crate::DATE_DIFF);    // vcetne pauzy
            $time = Crate::getFormatDate(classes\DateAndTime::different($first, (strtotime($first) + $sumtime) - $sumpause), Crate::DATE_DIFF);   // bez pauzy
            $pause = Crate::getFormatDate(classes\DateAndTime::different($first, strtotime($first) + $sumpause), Crate::DATE_DIFF);   // jen pauza
        {/code}
{$sumpause = 0}
            {$sumtime = 0}
            {$first = null}
            {loop="$db->rawQuery('SELECT start, stop, pause_length FROM projects
                                JOIN tasks USING(idproject)
                                WHERE strftime(\'%Y\', start)=? AND strftime(\'%m\', start)=? AND strftime(\'%d\', start)=?', array($year->rok, $month->mesic, $day->den))" as $task}
                {code}
                    $sumtime += classes\DateAndTime::toSeconds(classes\DateAndTime::different($task->start, $task->stop));
                    $sumpause += $task->pause_length;
                    $first = $first ?: strtotime($task->start);
                {/code}
            {/loop}
            {code}
                $sum = Crate::getFormatDate(classes\DateAndTime::different($first, strtotime($first) + $sumtime), Crate::DATE_DIFF);    // vcetne pauzy
                $time = Crate::getFormatDate(classes\DateAndTime::different($first, (strtotime($first) + $sumtime) - $sumpause), Crate::DATE_DIFF);   // bez pauzy
                $pause = Crate::getFormatDate(classes\DateAndTime::different($first, strtotime($first) + $sumpause), Crate::DATE_DIFF);   // jen pauza
            {/code}
$sumtime = $sumpause = 0;
            $first = null;
            foreach ($this->db->query('tasks', 'start, stop, pause_length', 'idproject=?', array($id)) as $task) {
                $sumtime += classes\DateAndTime::toSeconds(classes\DateAndTime::different($task->start, $task->stop));
                $sumpause += $task->pause_length;
                $first = $first ?: $task->start;
            }
            return array(
                'sum' => self::getFormatDate(classes\DateAndTime::different($first, strtotime($first) + $sumtime), self::DATE_DIFF),    // vcetne pauzy
                'time' => self::getFormatDate(classes\DateAndTime::different($first, (strtotime($first) + $sumtime) - $sumpause), self::DATE_DIFF),   // bez pauzy
                'pause' => self::getFormatDate(classes\DateAndTime::different($first, strtotime($first) + $sumpause), self::DATE_DIFF),   // jen pauza
            );
//~ $this->handle = new MyDBHandler(self::DATABASE_NAME);
            //~ $this->db = $this->handle->SQLite3()->getDatabase(true);   // true pro auto install
            $conf = array(
                'handler' => new MyDBHandler(self::DATABASE_NAME),
                'driver' => 'SQLite3',
                //~ 'dsn' => null,
                //~ 'dsn' => array(
                    //~ 'host' => null,
                    //~ 'username' => null,
                    //~ 'password' => null,
                    //~ 'port' => null,
                //~ ),
            );
            var_dump(classes\PDOHelper::getFactoryDatabase($conf));
        /**
         * destruktor tridy
         * - uzavreni db
         *
         * @since 3.00
         * @param void
         * @return void
         */
        public function __destruct() {
            $this->handle->close();
        }
if (!isset($configure['handler'])) {
            throw new \PDOException('handler is not defined!');
        }
//~ $this->db = classes\PDOHelper::getFactoryDatabase(new MyDBHandler($db_conf['name']), $db_conf['factory']);
return $g->$driver($dsn)->getDatabase($autocreate, $data);   // nacteni databaze
$g=$c('krtek');
//~ $handle = new MyDBHandler(self::DATABASE_NAME);
            //~ $db = $handle->SQLite3()->getDatabase();
/~ var_dump(ord('e')<<17, chr(12544 >> 7), chr(25>>2));
// aplikovat ochranu???
else
                if (!file_exists($out)) {
                    mkdir(dirname($out), 0777, true);
                } else
                if ($in == $out) {
                    throw new ExceptionJsUtils('stejny vstup i vystup!');
                } else {
                    throw new ExceptionJsUtils('jina chyba');
                }
if (!file_exists($out)) {
                    mkdir($out, 0777, true);
                }  else {
                    // chyba: nelze konvetrovat slozku do souboru!
                }
  // '<p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:00:11</strong></p>'+
        // '<p class="now-projekt-desc">22:30:29 (09.12.2013) - ?</p>'+

        // '<p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:00:11</strong></p>'+
        // '<p class="now-projekt-desc">22:30:29 (09.12.2013) - ?</p>';

/*
<div class="panel panel-primary">
    <div class="panel-heading clearfix">
        <h3 class="panel-title pull-left">nazev projektu 2</h3>
    </div>
    <div class="panel-body">

        <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:00:11</strong></p>
        <p class="now-projekt-desc">22:30:29 (09.12.2013) - ?</p>

    </div>
</div>


<div class="panel panel-primary">
    <div class="panel-heading clearfix">
        <h3 class="panel-title pull-left">nazev projektu 3</h3>
    </div>
    <div class="panel-body">

        <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:00:11</strong></p>
        <p class="now-projekt-desc">22:30:29 (09.12.2013) - ?</p>



        <div class="panel panel-danger">
            <div class="panel-heading clearfix">
                <h3 class="panel-title pull-left">Pozastaveno</h3>
            </div>
            <div class="panel-body">

                <div class="col-xs-6 time-pause">
                    <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:00:46</strong></p>
                    <p class="now-projekt-desc">Čas pauzy</p>
                </div>
                <div class="col-xs-6 time-pause">
                    <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:01:46</strong></p>
                    <p class="now-projekt-desc">Celkový čas pauzy</p>
                </div>

            </div>
        </div>




        <hr>

        <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:00:11</strong></p>
        <p class="now-projekt-desc">22:30:29 (09.12.2013) - ?</p>



        <div class="panel panel-danger">
            <div class="panel-heading clearfix">
                <h3 class="panel-title pull-left">Pozastaveno</h3>
            </div>
            <div class="panel-body">

                <div class="col-xs-6 time-pause">
                    <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:00:46</strong></p>
                    <p class="now-projekt-desc">Čas pauzy</p>
                </div>
                <div class="col-xs-6 time-pause">
                    <p class="now-projekt-time"><span><em>0</em> dnů</span> <strong>00:01:46</strong></p>
                    <p class="now-projekt-desc">Celkový čas pauzy</p>
                </div>

            </div>
        </div>
';
*/// $('#bezici_task').html(data);
// $('#save_info_box').stop();
// do Core zahrnou metodu na lessc konfiguraci!
// mozna tridu nodejs
// opravit languages, menit jen na jazyky ktere jsou vyhrdne dostupne!!!!!
------------------------------------------------------------------------------------------------------------------------

function oznacitDiv(div, radio) {
  $(div).addClass('option-selected');
  $(radio).attr('checked', true);
}

<div class="option konkretnioption{$odpovedi[j].text}">
   <span>{$odpovedi[j].text}</span>
   <a href="{$akce.root}img/stromky/stromek_v_{$odpovedi[j].text}.jpg" title="Strom {$odpovedi[j].text}"   data-lightbox="roadtrip">
       <img src="{$akce.root}img/stromky/stromek_m_{$odpovedi[j].text}.jpg" alt="Strom {$odpovedi[j].text}" />
   </a>
   <label for="odpoved{$odpovedi[j].id}">
       <a href="#" class="btn btn-primary btn-small" title="Hlasovat!" onclick="return oznacitDiv('.konkretnioption{$odpovedi[j].text}', '#odpoved{$odpovedi[j].id}');">Hlasovat!</a>
   </label>
   <input type="radio" id="odpoved{$odpovedi[j].id}"
                       name="odpoved[{$poleAnket[i]->GetId()}]"
                       value="{$odpovedi[j].id}"/>
</div>

*/
// napsat i tridu na to webapi??
// existuje latte jako samostatny modul???
  httpd konfigurace:
// test na serveru!!!!
rvat do htaccessu natvrdo generatorem, s tim ze se mu vytvori nejaky blok ktery on si bude hledat a pracovat s nim...
// bude prochazet a editovat jen htaccess
#ipban
....a tady budou pravidla
#/ipban
/*
Include conf/ssl.conf
<FilesMatch "\.(gif|jpe?g|png)$">
<Files ~ "\.(gif|jpe?g|png)$">

<FilesMatch "admin\.php$">
    Order deny,allow
    Deny from all
    Allow from 10.0.0.0/24
</FilesMatch>

<Files "admin.php">
    Order deny,allow
    Deny from all
    Allow from 10.0.0.0/24
</Files>



Order Deny,Allow
Deny from all
Allow from 10.1.0.0/255.255.0.0


Order Allow,Deny
Deny from 66.249.74.0/24
Allow from all



Order Allow,Deny
Deny from 78.128.149.0/24
Allow from all

deny from all
allow from all


*/
// vytvareni skupiny...
// systemovy vystup...
'/##ipban##(.*)##\/ipban##/s'
'/##ipban##(.*)##\/ipban##/s'
// dodelat!! musi vlozit na to same misto z kama to bylo parsrovano!!!
// dodelat!!! + si nejak zapamatovat presne z kama to bylo parsorvano aby se to pak mohlo vracet zpatky!!
//~ var_dump($this->data);
// otestovat nad vlozenym souborem do htaccesu kam se bude vkladat IPadresy...
foreach ($this->data as $v) {
                    $res .= $v->render();
                }

##ipban##
Order Deny,Allow
Deny from all
Allow from 127.0.0.0 127.0.0.1 127.0.0.2

<FilesMatch "admin\.php$">
    Deny from all
    Allow from 10.0.0.0/24 10.20.0.0/2
</FilesMatch>


<Files "admin.php">
    Deny from all
    Allow from 10.0.0.0/24
</Files>

##/ipban##
//1.04
        //public function addFiles($file) {}
        //1.04
        //public function addFilesMatch($file) {}
//$p = $this->parseHtaccess($this->path)
//~ $sum_hour = $sumtime / 60 / 60;
            //~ $sum_min = $sum_hour / 24;
            //~ var_dump($sumtime, $sumtime / 60, ($sum_hour), $sum_min);
, strtotime('-49 hour')
//(($seconds / 60) - (self::sumDays($seconds) * (60 * 24)))
//(($seconds / 60) - (self::sumDays($seconds) * (60 * 24)))
// $db->update('tasks', $cv, 'idproject=? AND idtask=?', array($_POST['id'], $_POST['task']));
                    // return $db->endTransaction();
var_dump(classes\DateAndTime::sumDays($sumtime), classes\DateAndTime::sumHours($sumtime), classes\DateAndTime::sumMinutes($sumtime));

/*$sum_min = $sumtime / 60;
$sum_day = floor($sum_min / (60 * 24));
$m = $sum_min - ($sum_day * (60 * 24));
$sum_hour = floor($m / 60);
$sum_c_min = round($m - ($sum_hour * 60), 2);
*/
/**
         * celkovy pocet dni pocitany ze sekund
         *
         * @since 1.24
         * @param int seconds pocet sekund
         * @return int celkovy pocet dni
         */
        public static function sumDays($seconds) {
            return intval(floor(($seconds / 60) / (60 * 24)));
        }

        /**
         * vypocet minutoveho offsetu
         *
         * @since 1.26
         * @param int seconds pocet sekund
         * @return float minutovy rozdil
         */
        private static function sumMinuteOffset($seconds) {
            return ($seconds / 60) - (self::sumDays($seconds) * (60 * 24));
        }

        /**
         * celkovy pocet hodin pocitany ze sekund
         *
         * @since 1.24
         * @param int seconds pocet sekund
         * @return int celkovy pocet hodin
         */
        public static function sumHours($seconds) {
            return floor(self::sumMinuteOffset($seconds) / 60);
        }
/**
         * celkovy pocet minut pocitany ze sekund
         *
         * @since 1.24
         * @param int seconds pocet sekund
         * @return float celkovy pocet minut
         */
        public static function sumMinutes($seconds) {
            return round(self::sumMinuteOffset($seconds) - (self::sumHours($seconds) * 60), 2);
        }
var_dump(classes\DateAndTime::correct(14.97));
// round($sumtime / (60 * 60), 2),;
round(($sumtime - $sumpause) / (60 * 60), 2);
round($sumpause / (60 * 60), 2)
 /**
         * name
         *
         * @since 1.00
         * @param void
         * @return void
         */
        // public function integer($size = null) {
        //     $this->columns[$this->last][self::TYPE] = 'INTEGER';
        //     return $this;
        // }

        // public function varchar($size) {
        //     $this->columns[$this->last][self::TYPE] = 'VARCHAR('.$size.')';
        //     return $this;
        // }

        public function text() {
            $this->columns[$this->last][self::TYPE] = 'TEXT';
            return $this;
        }

        public function bool() {
            $this->columns[$this->last][self::TYPE] = 'BOOL';
            return $this;
        }

        public function float() {
            $this->columns[$this->last][self::TYPE] = 'FLOAT';
            return $this;
        }

        public function datetime() {
            $this->columns[$this->last][self::TYPE] = 'DATETIME';
            return $this;
        }

        public function date() {
            $this->columns[$this->last][self::TYPE] = 'DATE';
            return $this;
        }
// var_dump($a['os_type'], $a['os_name'], $a['linux_distibution'], $a['os_versionNumber']);
                // if ($a['os_type'] != $a['os_name']) {
                //     $result .= ' ('.($a['linux_distibution'] != 'Null' ? $a['linux_distibution'] : $a['os_name']).')';
                // } else {
                //     $result .= $a['os_versionNumber'] ? ' ('.$a['os_versionNumber'].')' : null;
                // }
// return $a['os_type'] . (isset($a['os_name']) && $a['os_type'] != $a['os_name']  ? (' ('.($a['linux_distibution'] != 'Null' ? $a['linux_distibution'] : $a['os_name']).')') : ($a['os_versionNumber'] ? ' ('.$a['os_versionNumber'].')' : null));
echo '<br>';
            print_r(classes\UserAgentString::getOs('Mozilla/5.0 (Linux; U; Android 4.0.3; de-ch; HTC Sensation Build/IML74K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30'));
            echo '<br>';
            print_r(classes\UserAgentString::getOs());
            // var_dump(classes\UserAgentString::isAndroid('Mozilla/5.0 (Linux; U; Android 4.0.3; de-ch; HTC Sensation Build/IML74K) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30'));
//echo $html::a()->href('', array('path' => $path.'/'.$dir))->setText($dir).', ';
//~ $fileList = classes\Core::getListFile(array('path' => $pathFile));
//classes\Core::isChrome() || classes\Core::isFirefox() || $core::isOpera();
/*// uzivatele
                    $sql = 'CREATE TABLE IF NOT EXISTS users (
                            iduser INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
                            login VARCHAR(30) NOT NULL UNIQUE,
                            hash VARCHAR(100) NOT NULL
                            )';
                    $db->execSQL($sql);

                    // projekty
                    $sql = 'CREATE TABLE IF NOT EXISTS projects (
                            idproject INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
                            iduser INTEGER NOT NULL,
                            name VARCHAR(100) NOT NULL,
                            archive DATETIME
                            )';
                    $db->execSQL($sql);

                    // tasky
                    $sql = 'CREATE TABLE IF NOT EXISTS tasks (
                            idtask INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
                            idproject INTEGER NOT NULL,
                            start DATETIME NOT NULL,
                            stop DATETIME,
                            description TEXT,
                            used BOOL,
                            pause_start DATETIME,
                            pause_length INTEGER
                            )';
                    $db->execSQL($sql);*/
#$(DIR)/$$( basename $$FILE Test.php | awk '{print tolower($$0)}' )".php"
#$(DIR)/$$( basename $$FILE Test.php | awk '{print tolower($$0)}' )".php"
# tr 'A-Z' 'a-z'
# $(PHPTEST) $(DIR)/html.php HtmlTest
# $(PHPTEST) $(DIR)/htmlpage.php HtmlPageTest
# $(PHPTEST) $(DIR)/staticweb.php StaticWebTest
# $(PHPTEST) $(DIR)/form.php FormTest
# $(PHPTEST) $(DIR)/pdohelper.php PDOHelperTest
# $(PHPTEST) $(DIR)/route.php RouteTest
##  $(PHPTEST) $(DIR)/debugger.php DebuggerTest
# $(PHPTEST) $(DIR)/cache.php CacheTest
##### $(PHPTEST) $(DIR)/user.php UserTest
# $(PHPTEST) $(DIR)/dateandtime.php DateAndTimeTest
##### $(PHPTEST) $(DIR)/session.php SessionTest
##  $(PHPTEST) $(DIR)/paginator.php PaginatorTest
##  $(PHPTEST) $(DIR)/message.php MessageTest
# $(PHPTEST) $(DIR)/language.php LanguageTest
# $(PHPTEST) $(DIR)/tpl.php TplTest
    //~ /**
     //~ * destruktor
     //~ * - Closes a cURL session and frees all resources
     //~ *
     //~ * @since 1.06
     //~ * @param void
     //~ * @return void
     //~ */
    //~ public function __destruct() {
      //~ if (is_resource($this->res)) {
        //~ curl_close($this->res);
      //~ }
    //~ }
// do budoucna pridat: curl_getinfo($this->res)



pozn:
po vzoru MVC udelat komponenty do naseho systemu
(view->controler->model)

/*
SENDFROM=svn@gfdesign.cz
SENDTO="geniv.radek@gmail.com, martin.fugess@gmail.com"
-a "From: $SENDFROM" \
-a "MIME-Version: 1.0" \
-a "Content-Type: text/html; charset=UTF-8" \
-s "$SUBJECT" \
"$SENDTO"

/var/www/www/svn/svn_email_commit.sh "$REPOS" "$REV" "$SENDTO"
*/

//~ FK = 'fk'
/*$res = array();
                foreach ($this->columns as $name => $value) {
                    $res[] = '  `'.$name.'` '.
                        $value[self::TYPE].
                        ($value[self::UN] ? ' UNSIGNED' : null).
                        ($value[self::NN] ? ' NOT NULL' : ' NULL').
                        ($value[self::UQ] ? ' UNIQUE' : null).      // FIMXE resit zvlast jako index!!
                        //~ ($value[self::PK] ? ' PRIMARY KEY' : null). // FIXME primarnich klicu muze byt vic; a hlavne resit zvlast jako index!!!!
                        ($value[self::AI] ? ' AUTO_INCREMENT' : null);
                }*/
// nepodporuje: ENGINE = InnoDB, CONSTRAINT, INDEX, UNIQUE INDEX, COMMENT
                // $res[] = '  PRIMARY KEY (`' . implode('`, `', $this->generatePK()) . '`)';
                // skladat inteligentneji!!!!
                // return $result.implode(','.PHP_EOL, $res).')'.PHP_EOL.'ENGINE='.$this->engine;
// ($value[self::UQ] ? $this->attrColumns[$db][self::UQ] : null) .
// predelat!!
                $res = array();

                foreach ($this->columns as $name => $value) {
                    $res[] = $name.' '.
                        ($value[self::UN] ? 'UNSIGNED ' : null).
                            $value[self::TYPE].
                        ($value[self::NN] ? ' NOT NULL' : ' NULL').
                        ($value[self::UQ] ? ' UNIQUE' : null).
                        //~ ($value[self::PK] ? ' PRIMARY KEY' : null).
                        ($value[self::AI] ? ' AUTOINCREMENT' : null);
                }
                // primary klice davat jako indexy
                return $result.implode(','.PHP_EOL, $res).PHP_EOL.')';
, komentare k tabulce a radkum?!
// mohlo by podporovat zavislosti v podobe FK
 private $fk = array();          // foreign key
// foreigns: array(s1, s2);  references: table=>array(s1, s2); akce pro on delete; akce pro on update; 1.32
  var_dump($col);
                    // jako druhy sloupec probiha slucovani jako agregace
 // $this->columns[$this->last][self::FK]
// sprintf($this->attrColumns[$db][self::FK_INDEX], $name, $col);
            // $col = implode($this->attrColumns[$db][self::FK_INDEX_SEP], );

            // $result[] = ($index ? implode($this->attrColumns[$db][self::SEP], $index) : '');
            // return implode(',' . PHP_EOL, $index);
 - musi se pokazde zaponat pragma!
// seskupovat podle akci delete a update!!!!
// var_dump($value[self::FK][self::FK_DELETE], $value[self::FK][self::FK_UPDATE]);
                    // if (!isset($p[self::FK_DELETE])) {
                    // $p[self::FK_DELETE][$value[self::FK][self::FK_DELETE]][] = $value[self::FK][self::FK_REF];
                    // $p[self::FK_UPDATE][$value[self::FK][self::FK_UPDATE]][] = $value[self::FK][self::FK_REF];
                    // } else {
                        // $p[self::FK_DELETE][] = $value[self::FK][self::FK_REF];
                    // }
                    // $p[self::FK_DELETE][] = $value[self::FK][self::FK_DELETE];

                    // if (!isset($poc[$value[self::FK][self::FK_REF]])) {
                    //     $poc[$value[self::FK][self::FK_REF]] = 1;
                    // } else {
                    //     $poc[$value[self::FK][self::FK_REF]]++;
                    // }
var_dump($p);
            // var_dump($result);
            // $poc = array();
            $p = array();
                // neseskupovat!! musela by se resit kopa zavislosti navic!!!!

                // $foreign = array_keys($fk);

                // var_dump($foreign);
                // var_dump($fk);
                var_dump($idx);
                var_dump($fkx);
// dodelat substituce!!!


                // var_dump($a);
//                 foreach ($index as $value) {
//                     $idx[] = sprintf($this->attrColumns[$db][self::FK_INDEX],
//                                             implode('__', $value),
//                                             implode($this->attrColumns[$db][self::FK_INDEX_SEP], $value));
// // var_dump($value);
//                 }
//                 $idx =
// var_dump($foreign);

                    // toto musi zvladat kolekce ArraySet - ktera ignoruje duplicitni hodnoty
                    $for = $this->getFKFOR($value[self::FK][self::FK_FOR]);
                    // var_dump($for);
                    if (!in_array($for['name'], $index)) {
                        $index[] = $for['name'];
                        $foreign[] = $for[self::FK_REF];
                        // var_dump($value[self::FK][self::FK_REF]);
                    }

                    // $f = $value[self::FK];
                    // var_dump($for);
// var_dump($fk);
            if ($fk) {
                $idx = array();

                foreach ($fk as $name => $value) {

                }
            }
// generovani cizich klicu
// via: http://www.sqlite.org/foreignkeys.html
// http://www.sqlite.org/lang_createtable.html
            // $fk[$name] = $value[self::FK];
$index =
var_dump($value);
                    $fk = $value[self::FK];
$result = array();
            // separace fk indexu a fk
        /**
         * interni generovani skupin klicu
         *
         * @since 1.52
         * @param string column nazev sloupce
         * @return array pole skupiny
         */
        private function getFKFOR($column) {
            $result = array();
            foreach ($this->columns as $name => $value) {
                if ($value[self::FK] && $value[self::FK][self::FK_FOR] === $column) {
                    $result['name'][] = $name;
                    $result[self::FK_REF][] = $value[self::FK][self::FK_REF];

                }
            }
            return $result;
        }
                // $search = array(
                //     self::HEAD => self::CREATE . ' '.$this->table.' (' . PHP_EOL,
                //     self::COLS => $this->generateColumns($db) . PHP_EOL,
                //     self::PK => $this->generatePK($db),
                //     self::UQ => $this->generateUQ($db),
                //     self::FK => $this->generateFK($db),
                //     self::TAIL => ')',
                //     );
                // $r = str_replace(array_keys($search),
                //                         $search,
                //                         $this->attrColumns[$db][self::TPL_SQL]);

// var_dump('kk: '.$r);

                // $res[] = $this->generateColumns($db);
                // $res[] = $this->generatePK($db);
// rekonfigurace typu (+ test na PK) via: http://www.sqlite.org/datatype3.html
                // $res[] = $this->generateUQ($db);
                // $res[] = $this->generateFK($db);
                // $res = implode(',' . PHP_EOL, array_filter($res));
// }, $this->attrColumns[$db][self::TYPE_BLOCK]));//(, $value[self::TYPE]), $m);
                    // var_dump($value[self::TYPE], in_array($value[self::TYPE], $this->attrColumns[$db][self::TYPE_BLOCK]));
                    // if (in_array($value[self::TYPE], $this->attrColumns[$db][self::TYPE_BLOCK])) {
                    //     continue;
                    // }
  // $result[] = sprintf($this->attrColumns[$db][self::NAME], $name) .
                //     ($value[self::UN] ? $this->attrColumns[$db][self::UN] : null) .
                //     $value[self::TYPE] .
                //     ($value[self::NN] ? $this->attrColumns[$db][self::NN] : ' NULL') .
                //     ($value[self::DF] ? sprintf($this->attrColumns[$db][self::DF],
                //                                         $this->columns[$name][self::DF]) : null) .
                //     ($value[self::AI] ? $this->attrColumns[$db][self::AI] : null) .
                //     ($value[self::CM] ? sprintf($this->attrColumns[$db][self::CM],
                //                                         $this->columns[$name][self::CM]) : null);
TYPE_BLOCK = 'block_type',      // blokovane typy
// TPL_SQL = 'tpl_sql';            // template sql dotazu
// ignoraovani typu
                // if ($this->attrColumns[$db][self::TYPE_BLOCK]) {
                //     $t = $value[self::TYPE];
                //     if (($pos = strpos($value[self::TYPE], '(')) !== false) {   // pokud ma typ parmetry
                //         $t = substr($t, 0, $pos);   // parametry se vyhodi
                //     }
                //     // vyhledani blokovaneho typu a jeho preskoceni
                //     if (in_array($t, $this->attrColumns[$db][self::TYPE_BLOCK])) {
                //         continue;
                //     }
                // }
//ENUM pro sqlite3 neexistuje
//TYP INT nemuze byt u PK musi byt INTEGER
$res[] = $this->generateColumns($db);
                $res[] = $this->generatePK($db);
                $res[] = $this->generateUQ($db);
                $res[] = $this->generateFK($db);
                $res = implode(',' . PHP_EOL, array_filter($res));
// self::TPL_SQL => '%head%%cols%%pk%%uq%%fk%%tail%',
// self::TPL_SQL => '%head%%cols%%uq%%fk%%tail%',
        // const
        //     HEAD = '%head%',            // zacatek sql dotazu
        //     COLS = '%cols%',            // sloupce dotazu
        //     TAIL = '%tail%';            // konec sql dotazu
//unsigned pro PK u SQLITE3 nemuze byt!
// indexy pro FK zrejme nema
// u sqlite3 vyzkouset constr name!!
// tridu na curl...?!
// mui obsahivat iteratory!!
    interface Collection {
        public function add($element);
        // public function addAll(Collection $c);
        // public function remove($element);
        // public function clear();
        // public function removeAll();
        // public function retainAll(Collection $c);
        // public function isEmpty();
        // public function contains($element);
        // public function containsAll(Collection $c);
        // public function size();

        // public function toArray();
        // public function iterator();
        // public function equals($element);
    }

    // kolekce ktera zvlada duplicitni polozky
    class ArrayList {
        //
    }

    // dodelat tridu na vkladani NEduplicitnich polozek, viz IJAV Pr2
    // 1.02
    class ArraySet implements Collection {
        $set = array();

        //vkladani pokud neexistuje v poli
        public function add($element) { //1.02
            if (!in_array($element, $this->set)) {
                $this->set[] = $element;
                return true;
            }
            return false;
        }

        // toArray() !!!
    }
// var_dump(classes\Core::getRequestUrl());


/*
CREATE TABLE IF NOT EXISTS `angelica`.`posts` (
  `idpost` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `rewrite` VARCHAR(100) NOT NULL,
  `counter` INT UNSIGNED NOT NULL,
  `idmenu` INT UNSIGNED NOT NULL,
  `added` VARCHAR(45) NOT NULL,
  `edited` VARCHAR(45) NULL,
  PRIMARY KEY (`idpost`),
  UNIQUE INDEX `rewrite_UNIQUE` (`rewrite` ASC),
  INDEX `fk_posts_menu1_idx` (`idmenu` ASC),
  CONSTRAINT `fk_posts_menu1`
    FOREIGN KEY (`idmenu`)
    REFERENCES `angelica`.`menu` (`idmenu`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
COMMENT = 'prispevky'*/
/*
    $s = SqlBuilder::create('users')->column('iduser')->integer()->unsigned()->notNull()->primary()->autoIncrement()
                                    ->column('login')->varchar(30)->notNull()->unique()
                                    ->column('hash')->varchar(100)->notNull();
echo PHP_EOL;
// echo $s->getSQLite3();
echo $s->getMySQL();
echo PHP_EOL;

    $s = SqlBuilder::create('projects')->column('idproject')->integer()->unsigned()->notNull()->primary()->autoIncrement()
                                       ->column('iduser')->integer()->notNull()
                                       ->column('name')->varchar(100)->notNull()
                                       ->column('archive')->datetime();

*/
//kazda instance bude drzena jen na 1 tabulku!!!
// jeste jednou prehodnotit INT u PK!!!
// dopsat chybejici metody podle upraveneho rozhranni!!
// $val = array_values(array_map(function ($v) { return $v['name']; }, $result));
        // sort($val);
        // var_dump($val);
        // array_multisort(array_map(function ($v) {
        //  return $v['name'];
        // }, $result), SORT_ASC, SORT_STRING, $result);
$url = base64_encode($parent . '/' . $item->getFilename());
              // $result[$url] = array(
hasDefault(),

        /**
         * je sloupec primarni?
         *
         * @since 1.20
         * @param string column nazev sloupce
         * @return bool true pokud je primarni
         */
        public function isPrimary($column) {
            if (isset($this->columns[$column])) {
                return $this->columns[$column][self::PK];
            } else {
                throw new ExceptionSqlBuilder('sloupec neexistuje');
            }
        }

        /**
         * je sloupec Not Null?
         *
         * @since 1.20
         * @param string column nazev sloupce
         * @return bool true pokud je not null
         */
        public function isNotNull($column) {
            if (isset($this->columns[$column])) {
                return $this->columns[$column][self::NN];
            } else {
                throw new ExceptionSqlBuilder('sloupec neexistuje');
            }
        }

        /**
         * je sloupec unikatni?
         *
         * @since 1.20
         * @param string column nazev sloupce
         * @return bool true pokud je unikatni
         */
        public function isUnique($column) {
            if (isset($this->columns[$column])) {
                return $this->columns[$column][self::UQ];
            } else {
                throw new ExceptionSqlBuilder('sloupec neexistuje');
            }
        }

        /**
         * je sloupec unsigned?
         *
         * @since 1.20
         * @param string column nazev sloupce
         * @return bool true pokud je unsigned
         */
        public function isUnsigned($column) {
            if (isset($this->columns[$column])) {
                return $this->columns[$column][self::UN];
            } else {
                throw new ExceptionSqlBuilder('sloupec neexistuje');
            }
        }

        /**
         * je sloupec auto increment?
         *
         * @since 1.20
         * @param string column nazev sloupce
         * @return bool true pokud je auto increment
         */
        public function isAutoIncrement($column) {
            if (isset($this->columns[$column])) {
                return $this->columns[$column][self::AI];
            } else {
                throw new ExceptionSqlBuilder('sloupec neexistuje');
            }
        }

        /**
         * ma defaultni hodnotu?
         *
         * @since 1.66
         * @param string column nazev sloupce
         * @return string|null defaultni hodnota
         */
        public function hasDefault($column) {
            if (isset($this->columns[$column])) {
                return $this->columns[$column][self::DF];
            } else {
                throw new ExceptionSqlBuilder('sloupec neexistuje');
            }
        }

        /**
         * ma cizi klic?
         *
         * @since 1.68
         * @param string column nazev sloupce
         * @return string|null defaultni hodnota
         */
        public function hasForeign($column) {
            if (isset($this->columns[$column])) {
                return $this->columns[$column][self::FK];
            } else {
                throw new ExceptionSqlBuilder('sloupec neexistuje');
            }
        }

hasForeign(), tableComment, comment,
    /**
     * @covers classes\SqlBuilder::foreign
     * @covers classes\SqlBuilder::isForeign
     */
    // public function testIsForeign() {
    //     //
    // }
    /**
     * @covers classes\SqlBuilder::isPrimary
     * @expectedException classes\ExceptionSqlBuilder
     */
    public function testIsPrimaryException() {
        $sql = SqlBuilder::create('tabulka');
        $sql->isPrimary('id');
    }
* @covers classes\SqlBuilder::isNotNull
    /**
     * @covers classes\SqlBuilder::isNotNull
     * @expectedException classes\ExceptionSqlBuilder
     */
    public function testIsNotNullException() {
        $sql = SqlBuilder::create('tabulka');
        $sql->isNotNull('id');
    }
    /**
     * @covers classes\SqlBuilder::isUnique
     * @expectedException classes\ExceptionSqlBuilder
     */
    public function testIsUniqueException() {
        $sql = SqlBuilder::create('tabulka');
        $sql->isUnique('id');
    }
/**
     * @covers classes\SqlBuilder::isUnsigned
     * @expectedException classes\ExceptionSqlBuilder
     */
    public function testIsUnsignedException() {
        $sql = SqlBuilder::create('tabulka');
        $sql->isUnsigned('id');
    }
    /**
     * @covers classes\SqlBuilder::isAutoIncrement
     * @expectedException classes\ExceptionSqlBuilder
     */
    public function testIsAutoIncrementException() {
        $sql = SqlBuilder::create('tabulka');
        $sql->isAutoIncrement('id');
    }
/**
     * @covers classes\SqlBuilder::hasDefault
     * @expectedException classes\ExceptionSqlBuilder
     */
    public function testHasDefaultException() {
        $sql = SqlBuilder::create('tabulka');
        $sql->hasDefault('id');
    }
* @covers classes\SqlBuilder::isUnique
* @covers classes\SqlBuilder::isUnsigned
* @covers classes\SqlBuilder::isAutoIncrement
* @covers classes\SqlBuilder::hasDefault
    /**
     * @covers classes\SqlBuilder::defaultValue
     */
    public function testDefaultValue()
    {
        //
    }
// $this->assertTrue($sql->isPrimary('id'));
pokud bude potreba tak dodelat:  AUTO_INCREMENT=4 ;
// . $item->getFilename()
// dodelat!!: setEngine, setCharset, getAs()
/*
-- -----------------------------------------------------
-- Table `users`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `users` ;

CREATE TABLE IF NOT EXISTS `users` (
  `iduser` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `login` VARCHAR(45) NOT NULL,
  `hash` VARCHAR(100) NOT NULL,
  `idrole` INT UNSIGNED NOT NULL,
  `alias` VARCHAR(50) NULL COMMENT 'jmeny alias',
  `avatar` VARCHAR(200) NULL COMMENT 'obrazek',
  `kuid` INT UNSIGNED NULL COMMENT 'UID autora',
  `email` VARCHAR(100) NOT NULL,
  `confirmed` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'potvrzeny uzivatel',
  `confirmed_email` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'potvrzeny email',
  `added` DATETIME NOT NULL,
  `edited` DATETIME NULL,
  `deleted` DATETIME NULL,
  PRIMARY KEY (`iduser`),
  UNIQUE INDEX `login_UNIQUE` (`login` ASC),
  INDEX `fk_idrole_idx` (`idrole` ASC),
  UNIQUE INDEX `email_UNIQUE` (`email` ASC),
  CONSTRAINT `fk_users_roles`
    FOREIGN KEY (`idrole`)
    REFERENCES `roles` (`idrole`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
COMMENT = 'uzivatele';

-- -----------------------------------------------------
-- Table `trainz_cdp_has_trainz_kuids`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `trainz_cdp_has_trainz_kuids` ;

CREATE TABLE IF NOT EXISTS `trainz_cdp_has_trainz_kuids` (
  `idtrainz_kuid` INT UNSIGNED NOT NULL,
  `idtrainz_cdp` INT UNSIGNED NOT NULL,
  PRIMARY KEY (`idtrainz_kuid`, `idtrainz_cdp`),
  INDEX `fk_trainz_cdp_has_trainz_kuids_trainz_kuids1_idx` (`idtrainz_kuid` ASC),
  INDEX `fk_trainz_cdp_has_trainz_kuids_trainz_cdp1_idx` (`idtrainz_cdp` ASC),
  CONSTRAINT `fk_trainz_cdp_has_trainz_kuids_trainz_cdp`
    FOREIGN KEY (`idtrainz_cdp`)
    REFERENCES `trainz_cdp` (`idtrainz_cdp`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_trainz_cdp_has_trainz_kuids_trainz_kuids`
    FOREIGN KEY (`idtrainz_kuid`)
    REFERENCES `trainz_kuids` (`idtrainz_kuid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
COMMENT = 'trainz cdp vaze kuids';
*/
/*
echo <<<SQL
<pre>

CREATE TABLE IF NOT EXISTS `trainz-cz`.`notifications` (
  `idnotification` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `from_id` INT UNSIGNED NULL COMMENT 'od koho',
  `to_id` INT UNSIGNED NULL COMMENT 'pro koho',
  `handled_id` INT UNSIGNED NULL COMMENT 'vyrizeno kym',
  `type` ENUM('registration','download','slideshow','message') NOT NULL COMMENT 'typ notifikce',
  `subject` VARCHAR(100) NOT NULL,
  `message` TEXT NOT NULL,
  `added` DATETIME NOT NULL COMMENT 'pridano kdy',
  `deleted` DATETIME NULL COMMENT 'vyrizeno kdy',
  `state` TINYINT(1) NULL DEFAULT NULL,
  `state_id` INT UNSIGNED NULL COMMENT 'id noveho, add',
  `state_old_id` INT UNSIGNED NULL COMMENT 'id stareho, edit',
  `state_msg` TEXT NULL,
  `ip` VARCHAR(50) NULL,
  `agent` VARCHAR(300) NULL,
  PRIMARY KEY (`idnotification`),
  INDEX `fk_from_idx` (`from_id` ASC),
  INDEX `fk_to_idx` (`to_id` ASC),
  INDEX `fk_handled_id_idx` (`handled_id` ASC),
  CONSTRAINT `fk_notifications_from`
    FOREIGN KEY (`from_id`)
    REFERENCES `trainz-cz`.`users` (`iduser`)
    ON DELETE SET NULL
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_notifications_to`
    FOREIGN KEY (`to_id`)
    REFERENCES `trainz-cz`.`users` (`iduser`)
    ON DELETE SET NULL
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_notifications_handled`
    FOREIGN KEY (`handled_id`)
    REFERENCES `trainz-cz`.`users` (`iduser`)
    ON DELETE SET NULL
    ON UPDATE NO ACTION)
ENGINE = InnoDB
COMMENT = 'admin <--> user'


CREATE TABLE IF NOT EXISTS `mc-wiki`.`mobs` (
  `idmobs` INT NOT NULL AUTO_INCREMENT,
  `identites` INT NOT NULL,
  `name` VARCHAR(50) NOT NULL,
  `drops` INT NULL,
  `healt` VARCHAR(45) NULL,
  `idworld` INT NOT NULL,
  PRIMARY KEY (`idmobs`),
  UNIQUE INDEX `name_UNIQUE` (`name` ASC),
  INDEX `fk_entites_idx` (`identites` ASC, `drops` ASC),
  INDEX `fk_world_idx` (`idworld` ASC),
  CONSTRAINT `fk_entites`
    FOREIGN KEY (`identites` , `drops`)
    REFERENCES `mc-wiki`.`entitites` (`identites` , `cosik`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_world`
    FOREIGN KEY (`idworld`)
    REFERENCES `mc-wiki`.`world` (`idworld`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
COMMENT = 'jednotliva stvoreni (prisery) v mc'


CREATE TABLE IF NOT EXISTS `trainz-cz`.`notifications` (
  `idnotification` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `from_id` INT UNSIGNED NULL COMMENT 'od koho',
  `to_id` INT UNSIGNED NULL COMMENT 'pro koho',
  `handled_id` INT UNSIGNED NULL COMMENT 'vyrizeno kym',
  `type` ENUM('registration','download','slideshow','message') NOT NULL COMMENT 'typ notifikce',
  `subject` VARCHAR(100) NOT NULL,
  `message` TEXT NOT NULL,
  `added` DATETIME NOT NULL COMMENT 'pridano kdy',
  `deleted` DATETIME NULL COMMENT 'vyrizeno kdy',
  `state` TINYINT(1) NULL DEFAULT NULL,
  `state_id` INT UNSIGNED NULL COMMENT 'id noveho, add',
  `state_old_id` INT UNSIGNED NULL COMMENT 'id stareho, edit',
  `state_msg` TEXT NULL,
  `ip` VARCHAR(50) NULL,
  `agent` VARCHAR(300) NULL,
  PRIMARY KEY (`idnotification`),
  INDEX `fk_from_idx` (`from_id` ASC, `to_id` ASC, `handled_id` ASC),
  CONSTRAINT `fk_notifications_from`
    FOREIGN KEY (`from_id` , `to_id` , `handled_id`)
    REFERENCES `trainz-cz`.`users` (`iduser` , `iduser` , `iduser`)
    ON DELETE SET NULL
    ON UPDATE NO ACTION)
ENGINE = InnoDB
COMMENT = 'admin <--> user'

</pre>

SQL;
*/

/*
    $u1 = classes\SqlBuilder::drop('users');

    $u2 = classes\SqlBuilder::create('notifications', 'admin <--> user')
                ->c('idnotification')->int()->un()->nn()->pk()->ai()
                ->c('from_id')->int()->un()->comment('od koho')->fk('users', 'iduser', classes\SqlBuilder::FK_SET_DEFAULT)  // FK_SET_NULL
                ->c('to_id')->int()->un()->comment('pro koho')->foreign('users', 'iduser', classes\SqlBuilder::FK_SET_NULL) // FK_SET_NULL
                ->c('handled_id')->int()->nn()->comment('vyrizeno kym')->foreign('users', 'iduser', classes\SqlBuilder::FK_CASCADE) // FK_SET_NULL
                ->c('type')->enum(array('registration','download','slideshow','message'))->nn()->comment('typ notifikce')
                ->c('subject')->varchar(100)->nn()

                ->c('identites')->int()->nn()->uq()->fk('entitites', 'identites')
                ->c('drops')->int()->fk('entitites', 'cosik')
                ->c('idworld')->int()->nn()->fk('world', 'idworld')
                ;
*/
// var_dump($u2);
//~ var_dump($u2->isPrimary('name'));
    // echo 'gen:'.PHP_EOL;
  // echo $u1->getSQLite3();
  // echo '<br /><br />';
  // echo $u2->getSQLite3();
  // echo $u1->getAs(classes\SqlBuilder::SQLITE3);
  // echo '<br /><br />';
  // echo $u2->getAs(classes\SqlBuilder::SQLITE3);

// echo '<br /><br /><br /><br />';

  // echo $u1->getMySQL();
  // echo '<br /><br />';
  // echo $u2->getMySQL();
  // echo $u1->getAs(classes\SqlBuilder::MYSQL);
  // echo '<br /><br />';
  // echo $u2->getAs(classes\SqlBuilder::MYSQL);

// echo '</pre>';

/*
class MyHandler extends classes\PDOHelper {
    public function onCreate(classes\PDODatabase $db, $data = null) {
        $u1 = classes\SqlBuilder::drop('notifications');
//TODO test na nejake realne funkcni tabulce!!
        $u2 = classes\SqlBuilder::create('notifications', 'admin <--> user')
                ->c('idnotification')->int()->un()->nn()->pk()->ai()
                ->c('from_id')->int()->un()->comment('od koho')->fk('users', 'iduser', classes\SqlBuilder::FK_SET_NULL)
                ->c('to_id')->int()->un()->comment('pro koho')->foreign('users', 'iduser', classes\SqlBuilder::FK_SET_NULL)
                ->c('handled_id')->int()->nn()->comment('vyrizeno kym')->foreign('users', 'iduser', classes\SqlBuilder::FK_SET_NULL)
                ->c('type')->enum(array('registration','download','slideshow','message'))->nn()->comment('typ notifikce')
                ->c('subject')->varchar(100)->nn()

                ->c('identites')->int()->nn()->uq()->fk('entitites', 'identites')
                ->c('drops')->int()->fk('entitites', 'cosik')
                ->c('idworld')->int()->nn()->fk('world', 'idworld')
                ;
var_dump($u2->getAs($db->getDriverName()));
        $db->execSQL($u1->getAs($db->getDriverName()));
        $db->execSQL($u2->getAs($db->getDriverName()));
    }
}


$handle = new MyHandler('pokus.sqlite3');
$db = $handle->SQLite3(null ,true)->getDatabase(true);
// $handle = new MyHandler('test');
// $db = $handle->MySQL('localhost', 'root', 'geniv')->getDatabase(true);
var_dump($db->getDriverName());
*/
  /**
   * prekryvna trida pro EXIF, nacita z obrazku podrobne informace
   *
   * @package unstable
   * @author geniv
   * @version 1.24
   */
  class Exif {

    private static function readData($path, $sections = null, $index = null) {
      $res = exif_read_data($path, null, !is_null($sections));
      return ($index ? $res[$index] : ($sections ? $res[$sections] : $res));
    }

    public static function __callStatic($name, $arguments) {
      $result = null;

      switch ($name) {

        case 'isGIF':
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_GIF);
        break;

        case 'isJPG':
        case 'isJPEG':
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_JPEG);
        break;

        case 'isPNG':
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_PNG);
        break;

        case 'isSWF':
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_SWF);
        break;

        case 'isPSD':
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_PSD);
        break;

        case 'isBMP':
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_BMP);
        break;

        case 'isTIFF_II': // (intel byte order)
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_TIFF_II);
        break;

        case 'isTIFF_MM': // (motorola byte order)
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_TIFF_MM);
        break;

        case 'isJPC':
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_JPC);
        break;

        case 'isJP2':
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_JP2);
        break;

        case 'isJPX':
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_JPX);
        break;

        case 'isJB2':
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_JB2);
        break;

        case 'isSWC':
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_SWC);
        break;

        case 'isIFF':
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_IFF);
        break;

        case 'isWBMP':
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_WBMP);
        break;

        case 'isXBM':
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_XBM);
        break;

        case 'isIC':
          $result = (exif_imagetype($arguments[0]) == IMAGETYPE_IC);
        break;

        case 'getData': // ($sections = null)
          $sections = (isset($arguments[1]) ? $arguments[1] : null);
          $result = self::readData($arguments[0], $sections);
        break;

        case 'getDataByName': // ($name, $sections = null)
          $index = $arguments[1];
          $sections = (isset($arguments[2]) ? $arguments[2] : null);
          $result = self::readData($arguments[0], $sections, $index);
        break;

        //~ case 'getDataByTag':  // ($tag, $sections = null)
          //~ $index = exif_tagname($arguments[1]);
          //~ $sections = (isset($arguments[2]) ? $arguments[2] : null);
          //~ $result = self::readData($arguments[0], $sections, $index);
        //~ break;

        default:
          echo 'neznama funkce';
        break;
      }
      return $result;
    }
  }

  //~ var_dump(Exif::isPSD('kucharka_final.psd'));
  //~ var_dump(Exif::getData('2012-11-02 11.40.30.jpg'));
  //~ var_dump(Exif::getData('2012-11-02 11.40.30.jpg', 'FILE'));
  //~ var_dump(Exif::getDataByName('2012-11-02 11.40.30.jpg', 'Model'));
  //~ var_dump(Exif::getDataByTag('2012-11-02 11.40.30.jpg', 255));

//~ echo '<!DOCTYPE html>
//~ <!--[if lt IE 7]> <html class="lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
//~ <!--[if IE 7]>    <html class="lt-ie9 lt-ie8" lang="en"> <![endif]-->
//~ <!--[if IE 8]>    <html class="lt-ie9" lang="en"> <![endif]-->
//~ <!--[if gt IE 8]><!--><html lang="en"><!--<![endif]-->
  //~ <head>
    //~ <meta charset="utf-8">
    //~ <!-- Viewport Metatag -->
    //~ <meta name="viewport" content="width=device-width,initial-scale=1.0">
    //~ <title>Layout</title>
    //~ <meta name="robots" content="noindex, nofollow" />
  //~ </head>
//~ <body>
//~ ';

echo 'LAYOUT test!!!!'.PHP_EOL.'<br /><br />'.PHP_EOL;
/*
 *TODO rozsirit detektory prohlizecu o tyto kody:
 * http://mobiledetect.net/
 * https://github.com/lineshjose/php-browser-detection
 * http://wordpress.org/extend/plugins/php-browser-detection/
 * https://code.google.com/p/php-mobile-detect/
 * https://github.com/serbanghita/Mobile-Detect
 * http://martythornley.com/downloads/php-browser-detection/
 * <<-- detekce prohlizecu
 */
//https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js

// $info = pathinfo($item->getPathname());
      // $test_file = $dir . '/test/' . ucfirst($info['filename']) . 'Test.php';
      // if (file_exists($test_file)) {
        //
      // }
      // echo $item->getFilename() . '<br />';
var_dump();$item->getFilename();
// $core = $dir . '/classes/' . strtolower($file) . '.php';
// var_dump($dir . '/test/' . $item);
//~ var_dump(php_uname('n'));
    /**
     * @covers classes\Htpasswd::parseHtpasswd
     * @todo   Implement testParseHtpasswd().
     */
    public function testParseHtpasswd()
    {
        // Remove the following lines when you implement this test.
        $this->markTestIncomplete(
          'This test has not been implemented yet.'
        );
    }
var_dump(is_writable($this->path));
var_dump(is_writable($this->path));
            // if (is_writable($this->path) && $this->data) {
else {
                if (!is_writable($this->path)) {
                    throw new ExceptionHtpasswd('Nelze zapisovat do souboru!');
                }

            }
    // var_dump(classes\Htpasswd::users());

    $h = new classes\Htpasswd;
    $h->load();
    $h->addUser('pokus', 'aaa');
    // $h->editUser('pokus', 'abc');
    // $h->delUser('pokus');

    var_dump($h->getUsers(true));

    // $h->save();
//~ $cur = new classes\Curl('http://www.trainz.cz/img/download/mini/981e97075ba884219ed04f0c556d0eac52867eacc651e.jpg');
//~ file_put_contents('aa.jpg', $cur->exec());

//~ var_dump($cur::version());

//~ $ch = curl_init();
//~ curl_setopt($ch, CURLOPT_URL, "http://www.example.com/");
//~ $options = array(
              //~ CURLOPT_URL => 'http://www.useragentstring.com/?' . http_build_query(array('uas' => $_SERVER['HTTP_USER_AGENT'], 'getJSON' => 'all')),
              //~ CURLOPT_RETURNTRANSFER => true,
              //~ CURLOPT_CONNECTTIMEOUT => 1,  // 10
              //~ CURLOPT_HEADER => false,
              //~ CURLOPT_USERAGENT => '',
              //~ CURLOPT_POST => true,
              //~ CURLOPT_POSTFIELDS => $data,
            //~ );
//~ curl_setopt_array($ch, $options);
//~ $res = curl_exec($ch);
//~ curl_close($ch);

//~ print_r(json_decode($res));



//~ var_dump(http_build_query(array('uas' => $_SERVER['HTTP_USER_AGENT'], 'getJSON' => 'all')));
//http://www.useragentstring.com/?uas='urlencode($_SERVER['HTTP_USER_AGENT'])'&getJSON=all
// var_dump(classes\Core::getHtpasswdHash('pass'));

//~ var_dump(classes\Core::curlPOST('http://localhost/www/git/goodflow/i.php', array('a' => 44)));
//~ var_dump(classes\Core::curlGET('http://localhost/www/git/goodflow/i.php', array('a' => 44)));
//var_dump(classes\Core::getUrl(), classes\Core::getAbsoluteUrl());
//~ var_dump(classes\Core::getSizeDir('templates', true));
//var_dump(classes\Core::getListFile(array('path' => '.')));

// var_dump(classes\NodeJS::less2css('less/bootstrap.less', 'css/bootstrap.css', null));
// var_dump(yuiCompressor::convertCSS('css/'));
// yuicompressor::convertJS('js/');
// yuicompressor::convertJS('js/', '-o my-min.js');
PDOHelper $helper, $db
$this->dbname = $helper->getDatabaseName();
      $this->db = $db;
/**
     * nacteni polozek na davku
     *
     * @since 1.22
     * @param void
     * @return int pocet polozek na davku
     */
    public function getBatch() {
      return $this->batch;
    }

    /**
     * nastaveni poctu polozek na davku
     *
     * @since 1.20
     * @param int batch pocet na davku
     * @return this
     */
    public function setBatch($batch) {
      $this->batch = $batch;
      return $this;
    }

    /**
     * exportovani samostatneho modelu tabulky
     *
     * @since 1.34
     * @param string table jmeno tabulky
     * @return string serializovany create dotaz
     */
    public function exportModel($table) {
      $create_table = $this->db->rawQuery('SHOW CREATE TABLE ' . $table)->getFirst();
      return serialize(array('create_table' => $create_table[1]));
    }

    /**
     * exportovani samostatne tabulky
     *
     * @since 1.34
     * @param string table jmeno tabulky
     * @return string serializovane pole
     */
    public function exportTable($table) {
      $result = array();
      foreach ($this->db->query($table) as $v) {
        $result[] = (array) $v; // konvert do pole
      }
      return serialize(array('rows' => $result));
    }
//FIXME importeny neresi samostatne instance!!!
private $dbname = null; // jmeno databaze
        private $db = null;     // instance pripojeni databaze

    private $batch = 300;   // pocet polozek na davku
// instance haldlerudatabaze
Exporter
/**
     * exportovani aktualni databaze
     * - serializace
     *
     * @since 1.00
     * @param void
     * @return string poskladany sql
     */
    public function export() { //$ignore = array() opravdu vyuzijem ignore?
      $result = null;
      if ($this->db->beginTransaction()) {

        foreach ($this->db->rawQuery('SHOW TABLES') as $v) {
          $table = $v['Tables_in_' . $this->dbname];
          $create_table = $this->db->rawQuery('SHOW CREATE TABLE ' . $table)->getFirst();
          $result[$table] = array(
              //'create_table' => base64_encode($create_table[1]),  // ulozeny dotazu vytvareni
              'create_table' => $create_table[1],
            );
          $result[$table]['rows'] = array();  // inicializace rows

          foreach ($this->db->query($table) as $v1) {
            //$result[$table]['rows'][] = array_map('base64_encode', (array) $v1);  // ulozeni radku
            $result[$table]['rows'][] = (array) $v1;  // ulozeni radku
          }
        }
        $this->db->endTransaction();
      }

      //return json_encode($result);
      return serialize($result);
    }

//FIXME na vygenerovani nekolika tabulek s >10000 radku / tabulku, nezvlada memory limit!!! bud rozdelit na vice souboru s instancema
//pokud bude extra exportovani na tavulky bude se muset udelat i metoda ktera tyto vsechny data da do kupy...!!!
//TODO pokud by se to melo delit na vice pod metod na rucni generovani konkretnich mega tabulek se zaznamy se musi ukladat samostatne instance, create_table+rows
//array('downloads_has_trainz_kuid', 'languages_has_downloads', 'trainz_cdp_has_trainz_kuids', 'trainz_kuids'))
    //~ public function exportTable($table) {
      //~ $res = array();
      //~ if ($this->db->beginTransaction()) {
        //~ foreach ($this->db->query($table) as $v) {
          //~ $res[] = (array) $v;
        //~ }
        //~ $this->db->endTransaction();
      //~ }
      //~ return $res;
    //~ }

    /**
     * importovani modelu databaze
     * - zacatek stejny jako u metody import()
     * - unserializace
     *
     * @since 1.24
     * @param string data vstupni data
     * @return array pole importovanych tabulek
     */
    public function importModel($data) {
      //$code = json_decode($data, true);
      $code = unserialize($data);
      $result = null;
      if ($code && is_array($code) &&
              $this->db->beginTransaction()) {
        $this->db->execSQL('SET FOREIGN_KEY_CHECKS = 0'); // deaktivace FK
        foreach ($code as $table => $v) {
          if (is_array($v) && isset($v['create_table'])) {  // musi existovat indexy
            $this->db->execSQL('DROP TABLE IF EXISTS ' . $table); // smaznuti tabulek
            //$t = $this->db->execSQL(base64_decode($v['create_table']));  // vytvoreni tabulek
            $t = $this->db->execSQL($v['create_table']);  // vytvoreni tabulek
            $result[$table] = ($t == 0 ? 'ok' : 'fail');  // 0 modifikovanych radku
          }
        }
        $this->db->execSQL('SET FOREIGN_KEY_CHECKS = 1'); // aktivace FK
        $this->db->endTransaction();
      }
      return $result;
    }

    /**
     * importovani do aktualni databaze
     * - defaultne provadi drop tabulky
     * - unserializace
     *
     * @since 1.00
     * @param string data vstupni data
     * @param bool drop_table true pro drop a znovu vytvoreni modelu, false provadi jen truncate
     * @return array pole poctu zpracovanych polozek pri importu
     */
    public function import($data, $drop_table = true) {
      //$code = json_decode($data, true);
      $code = unserialize($data);
      $result = null;
      if ($code && is_array($code) &&
              $this->db->beginTransaction()) {
        $this->db->execSQL('SET FOREIGN_KEY_CHECKS = 0'); // deaktivace FK
        // inline funkce
        $inline_function = function($v) {
            //$v = base64_decode($v); // dekodovani
            return $v != '' ? $v : null;  // pokud je, jinak null
          };
        foreach ($code as $table => $v) {
          if (is_array($v) && isset($v['create_table']) && isset($v['rows'])) { // musi existovat indexy
            if ($drop_table) {  // pokud ma drop-ovat
              $this->db->execSQL('DROP TABLE IF EXISTS ' . $table); // smaznuti tabulek
              //$this->db->execSQL(base64_decode($v['create_table']));  // vytvoreni tabulek
              $this->db->execSQL($v['create_table']);  // vytvoreni tabulek
            } else {  // pokud ma cistit
              $this->db->truncate($table, false);
            }
            $res = 0;
            $count = count($v['rows']);
            if ($count > 0) { // pokud je vic jak 0 polozek
              $range = range(0, (int) ceil($count / $this->batch));
              foreach ($range as $i) {
                $cv = array();
                $select = array_slice($v['rows'], $i * $this->batch, $this->batch); // extrahovani pole
                foreach ($select as $v1) {  // prochazeni vyseku
                  $cv[] = ContentValues::init(array_map($inline_function, $v1));
                }
                $res += $this->db->insertMultiple($table, $cv);
              }
            }
            $result[$table] = $res . '; ' . ($res == $count ? 'ok' : 'fail');
          }
        }
        $this->db->execSQL('SET FOREIGN_KEY_CHECKS = 1'); // aktivace FK
        $this->db->endTransaction();
      }
      return $result;
    }
//FIXME opravit zarovnani!
//TODO spis asi prejmenovat na MySQLBackuper|MySQLBackup
private $drivers = array(
            'SQLite2' => array('sqlite2'),
            'sqlite3' => array('sqlite', 'sqlite3'),
            'mysql' => array('mysql'),
            );
    //FIXME vyhodit linearni vyber z php a nahradit unixovym mysql dumpem!! a operatory: <, >
//FIXME konstruktor: pristupova udaje do databaze, dbhost, dbname, dbuser, dbpass, dbport
//TODO vytvorit tempsoubor a ten prehodit na vystup a pak ho precist nebo rovnou zabalit
//TODO dal jeste volbu na auto zabaleni
// var_dump(sprintf(self::MYSQL_EXPORT, implode(' ', array_filter($p)), 'out'));
// , $gzip = false
// var_dump($this->config['output'], $this->config['gzip']);
// var_dump(Bash::exec('file '.$out));
// var_dump(tempnam(sys_get_temp_dir(), 'SqlExport'), $this->config['output']);
var_dump($this->config);
    //TODO domyslet!! dodelat!!!

                        // $temp = tempnam(sys_get_temp_dir(), 'SqlExport'.date('_Y-m-d_H-i-s_'));
                        $temp = Bash::getTempfile();

                        $result = $temp;//.$this->config['suffix'];

                        //$this->config['output'];  //TODO dopsat!!!
                        //'.'.$this->config['suffix'].($this->config['gzip'] ? '.gz' : null)
                    } else {
'suffix' => '.sql',     // implicitni automaticka koncovka skriptu
                    // pridani gzip koncovky
                    $result .=

var_dump(sprintf(self::MYSQL_EXPORT, implode(' ', array_filter($p)), $r));
var_dump(sprintf(self::MYSQL_EXPORT, implode(' ', array_filter($p)), $result));
// var_dump(sprintf(self::SQLITE2_EXPORT, implode(' ', array_filter($p)), $output));
// (isset($this->config['output']) && $this->config['gzip'] ? '| gzip' : null),
                        // (isset($this->config['output']) ? '>' : null),
// (isset($this->config['output']) && $this->config['gzip'] ? '| gzip' : null),
                        // (isset($this->config['output']) ? '>' : null),
if ($ext == 'gz') {
    var_dump($ext);
}
//TODO detekce zabalaneho archivu!!
//TODO implementovat gunzip a detekovat gz a volat dearchivaci
var_dump(sprintf(self::MYSQL_IMPORT, $input, implode(' ', array_filter($p)), $path));
// ($gz ? self::BASH_GUNZIP.' < '.$path.' | ' : null)
// $ gunzip < sandbox/backup_mysql.sql.gz | mysql --host=localhost --user=root --password=geniv trainz-cz
// sprintf(self::MYSQL_IMPORT, implode(' ', array_filter($p)), $path)
var_dump(sprintf(self::SQLITE3_IMPORT, $input, implode(' ', array_filter($p))));
// import: $ mysql -u root -pgeniv trainz-cz < ~/Downloads/out.sql
// export: $ mysqldump -u root -pgeniv trainz-cz pokus > out.sql

/*

#export:
$ mysqldump -uroot -pgeniv trainz-cz pokus > ~/Downloads/out.sql
 --port=port_num, -P port_num


#import:
$ mysql -u root -pgeniv trainz-cz < ~/Downloads/out.sql

-P, --port=#
3306

http://webcheatsheet.com/php/how_to_create_a_dump_of_mysql_database_in_one_click.php
http://help.1and1.com/hosting-c37630/linux-c85098/php-c37728/importing-and-exporting-mysql-databases-using-php-a595887.html
http://stackoverflow.com/questions/6750531/using-a-php-file-to-generate-a-mysql-dump
http://www.tutorialspoint.com/php/perform_mysql_backup_php.htm
*/
if ($code === 0 && $res) {
                        $result = implode(PHP_EOL, $res);
                    }
if ($code === 0 && $res) {
                        $result = implode(PHP_EOL, $res);
                    }
// (isset($this->config['output']) && $this->config['gzip'] ? '| '.self::BASH_GZIP : null),
                        // (isset($this->config['output']) ? '>' : null),  //FIXME picovina!!!
// $output = (isset($this->config['output']) ? ($this->config['gzip'] ? '| '.self::BASH_GZIP : null) . ' > ' . $this->config['output'] : null);
                    // $output = (isset($this->config['output']) ? ($this->config['gzip'] ? '| '.self::BASH_GZIP : null) . ' > ' . $this->config['output'] : null);
//TODO optimalizovat pouzite radky!!!
var_dump(sprintf(self::MYSQL_EXPORT, implode(' ', array_filter($p)), $output));
// vnitrni uprava konfigurace
            if (isset($this->config['output'])) {
                $this->config['output'] .= ;
            }
/*
class MyMysql extends classes\PDOHelper {
    public function onCreate(classes\PDODatabase $db, $data = null) {
        $db->execSQL(classes\SqlBuilder::drop('pokus')->getAs($db->getDriverName()));

        $sql = classes\SqlBuilder::create('pokus');
        $sql->c('id')->int()->nn()->pk()->ai()->comment('idecko')
            ->c('popisek')->text()->nn()->comment('popisecek');
        $db->execSQL($sql->getAS($db->getDriverName()));
    }
}

$install = true;
//~ $handle = new MyMysql('gmr-cook');
$handle = new MyMysql('trainz-cz');
$db = $handle->MySQL('localhost', 'root', 'geniv')->getDatabase($install);

// $db = MyMysql::connect(array(
//     'driver' => '',
//     'name' => '',
//     'dsn' => array(),
//     'user' => '',
//     'pass' => '',
//     'port' => '',
//     ));

if ($install) {
    $t = <<<T
tot je text kter " obsahuje specialni ' znaky \ a nemusi / se v db libit!

x' AND email IS NULL; --
T;

    $cv = new classes\ContentValues;
    $cv->put('popisek', $t);
    var_dump($db->insert('pokus', $cv));
    var_dump($db->insert('pokus', $cv));
    var_dump($db->insert('pokus', $cv));
    var_dump($db->insert('pokus', $cv));
    var_dump($db->insert('pokus', $cv));
    var_dump($db->insert('pokus', $cv));
    var_dump($db->insert('pokus', $cv));
    var_dump($db->insert('pokus', $cv));
}

foreach ($db->query('pokus') as $key => $value) {
    var_dump($value->popisek);
}
*/


/*
#import:
$ mysql -u root -pgeniv trainz-cz < ~/Downloads/out.sql

#export:
$ mysqldump -u root -pgeniv trainz-cz pokus > ~/Downloads/out.sql
*/
//TODO poupravit unit testy!!!!!
$bcp = new classes\SqlBackup(array(
    // 'driver' => 'SQLite2',
    // 'driver' => 'SQLite3',
    'driver' => 'MySQL',
    'dbname' => 'trainz-cz',
    'user' => 'root',
    'password' => 'geniv',
    'port' => null,
    // 'host' => 'hovno.cz',
    // 'host' => __DIR__ . '/pokus.sqlite2',
    // 'host' => __DIR__ . '/pokusX1.sqlite2',
    // 'host' => __DIR__ . '/pokus.sqlite3',
    // 'host' => __DIR__ . '/pokusX1.sqlite3',

    // 'output' => __DIR__ . '/backup_sqlite2.sql',
    // 'output' => __DIR__ . '/backup_sqlite3.sql',
    // 'output' => __DIR__ . '/backup_mysql.sql',
    // 'gzip' => true,
    ));
$bcp->setOutput('vystup.sql');
var_dump($bcp->export());
// classes\Core::getDownloadFile($bcp->export());
// var_dump($bcp->import(__DIR__ . '/backup_mysql.sql'));
// var_dump($bcp->import(__DIR__ . '/backup_mysql.sql.gz'));
// var_dump($bcp->import(__DIR__ . '/backup_sqlite2.sql'));
// var_dump($bcp->import(__DIR__ . '/backup_sqlite2.sql.gz'));
// var_dump($bcp->import(__DIR__ . '/backup_sqlite3.sql'));
// var_dump($bcp->import(__DIR__ . '/backup_sqlite3.sql.gz'));

//~ var_dump($pole['driver']('localhost', 'root', 'geniv')->getDatabase());
// var_dump($PSC);
/*
    preg_match('/(?<address>.*),( )+(?<psc>^[0-9]{3}\s?[0-9]{2})\n(?<lokalita>.*)/', $adr, $m);   // vyparsrovani adresy
    $Address = trim($m['address']);
    $PSC = trim($m['psc']);
    $Lokalita = trim($m['lokalita']);
    // var_dump($adr, $m);
*/
# parser.sh
# //TODO toto bude sh skript s napojenim na cli php...

# $ wget http://www.netfirmy.cz/katalog/ -q -O - | grep -Po '(?<=href=")[^"]*' | egrep '/katalog/[a-zA-Z0-9]{2,}'

# dokud neco vraci: (tu max 132)
# $ wget http://www.netfirmy.cz/katalog/auto/?page=135 -q -O - | grep -Po '(?<=href=")[^"]*' | egrep '?page='

# generovani po (do page pripocitavat dokud je co!):
# http://www.netfirmy.cz/katalog/auto/?page=1

# separace firem ze stranky:
# $ wget http://www.netfirmy.cz/katalog/auto/?page=2 -q -O - | grep -Po '(?<=href=")[^"]*' | grep '/firma' | uniq

# parsrovani obsahu napr z:
# http://www.netfirmy.cz/firma/2738-autodily-skorepa-sro/

# `Id` ,
# `Company` ,
# `DetailUrl` ,
# `Description` ,
# `Web` ,
# `GPSlat` ,
# `GPSlong` ,
# `Address` ,
# `PSC` ,
# `Lokalita` ,
# `Tel1` ,
# `Tel2` ,
# `Email` ,
# `Zarazeni` ,
# `KategorieParser` ,
# `Page`


# zdroje:
# http://www.cyberciti.biz/faq/grep-regular-expressions/
# http://unixhelp.ed.ac.uk/CGI/man-cgi?grep
# http://unixhelp.ed.ac.uk/CGI/man-cgi?wget
# http://stackoverflow.com/questions/21867458/wget-grep-sed-to-extract-links-and-save-them-to-a-file
// $x = new SimpleXMLElement('<comment />');
// $x->body = '<div>aho novy svete!!!</div>';
$x = new SimpleXMLElement('<request />');
$x->comment->body = '<div>CBA: <strong>'.date('Y-d-m H:i:s').'</strong>!!!!</div>';
// var_dump($x->asXML());

$rq = '<?xml version="1.0" encoding="UTF-8"?>
<comment>
  <author-id type="integer">11029033</author-id>
  <author-name>Radek Fry&#353;t&#225;k</author-name>
  <body>&lt;div&gt;CBA&lt;br /&gt;&lt;/div&gt;</body>
  <commentable-id type="integer">181343796</commentable-id>
  <commentable-type>TodoItem</commentable-type>
  <created-at type="datetime">2014-04-07T21:15:56Z</created-at>
  <emailed-from nil="true"></emailed-from>
  <id type="integer">275400268</id>
  <project-id type="integer">11952190</project-id>
  <use-textile type="boolean">false</use-textile>
  <attachments-count type="integer">0</attachments-count>
  <attachments type="array"/>
</comment>';


// vlastni autoloader (BC + Zend) kdyz neni nikdo schopny ho dodat
//TODO skusit eraplikovat na lokalu s tim ze se prida a pomenu rucne adresy na praci!!!!
/*
function __autoload($name) {

    if (preg_match('/Zend_.+/', $name, $match)) {
        // Zend loader
        $file = dirname(dirname(__DIR__)) . '/lib/' . str_replace('_', '/', $match[0]).'.php';
        // var_dump($file);
    } else {
        // BC loader
        $file = dirname(dirname(__DIR__)) . '/lib/' . str_replace('\\', '/', $name) . '.php';
        // var_dump($file, $name, file_exists($file));
    }

    if (file_exists($file)) {
        require($file);
    }
}
*/

$url = 'http://q2interactive.basecamphq.com';
$c = new classes\Curl($url);
$c->setAuthorize('', '')
    ->setHeader(true)
    // ->get($url.'/projects.xml')          // vypis projektu
    // ->get($url.'/projects/count.xml')    // "statistika" projektu
    // ->get($url.'/todo_lists/25382576/todo_items.xml')   //todo realizace szdc
    // ->get($url.'/todo_items/181343796.xml') //konkretni id todo listu (181343796): modul železničář roku (8h)
    // ->get($url.'/comments/275380583.xml')   // nacteni konkretniho komentare
    // ->get($url.'/comments/275380583/edit.xml')   // nacetni edit skeletonu?
    // ->url($url.'/comments/275380583.xml')->delete()    // smazani konkretniho komentare
    // ->url($url.'/comments/275400268.xml')->put()->file($x->asXML())
    // ->url($url.'/comments/275400268.xml')->put()->file($comm)
    // ->url($url.'/todo_items//181343796/comments.xml')->post()->file($x->asXML())
    ->url($url.'/todo_items/181343796/comments.xml')->post()->file($rq)
  ;

//https://q2interactive.basecamphq.com/projects/11952190-szdc/todo_lists/25382576
//GET /todo_lists/#{todo_list_id}/todo_items.xml

var_dump($c->getUrl());

$result = $c->exec();

var_dump($result);
// var_dump($c->getInfo());

// $xml = new SimpleXMLElement($result);
// var_dump($xml);
// var_dump(strval($xml->body));

/*
$xmlx = new SimpleXMLElement('<request />');//($xml->asXML());
$xmlx->comment->body = $xml->body.'<strong>'.date('Y-d-m H:i:s').'</strong>';
// var_dump($xmlx->asXML());


$cx = new classes\Curl($url);
$cx->setAuthorize('', '')
    ->url($url.'/comments/275380583.xml')
    ->put($xmlx->asXML())
    ;
var_dump($cx->exec());
*/
 if ($url) {
                    $this->url = $url;
                }
 public function addFile($index, $file) {
            $this->addPostFileds(array($index => new \CURLFile($file)));

// var_dump($this->options[CURLOPT_POSTFIELDS]);
            // if (!isset($this->options[CURLOPT_POSTFIELDS][$index])) {
                // $this->options[CURLOPT_POSTFIELDS] = array($index => new \CURLFile($file));
                // $this->options[CURLOPT_POSTFIELDS][$index] = new \CURLFile($file);
            // }

/*
            $stat = @fstat($data);
            if($stat) {
                CONTENT_LENGTH = 'Content-Length';
                $this->setHeaders(self::CONTENT_LENGTH, $stat['size']);
            }
*/
            //TODO musi jen pridavat index do postu!!!

//TODO odzkouset na necem smysluplnem!!!!!

// var_dump(file_exists($data));

// $this->options[CURLOPT_POST] = true;
// $this->options[CURLOPT_POSTFIELDS] = array('test_file' => new \CURLFile($data));
// $this->options[CURLOPT_HTTPHEADER] = array(
//     'Content-Type: application/xml',
//     'Accept: application/xml',
//     );
// $this->options[CURLOPT_FOLLOWLOCATION] = false;
            return $this;
        }
// $this->options[CURLOPT_POSTFIELDS] = $argv;    // pricitani argumentu
// https:
// curl_setopt($ch, CURLOPT_POST,1);
// curl_setopt($ch, CURLOPT_POSTFIELDS,$params);
// curl_setopt($ch, CURLOPT_URL,"http://www.abc.com");
// curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
// curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
// curl_setopt($ch, CURLOPT_USERPWD, 'username:password'); // IF required
// curl_setopt($ch, CURLOPT_SSL_VERIFYHOST,0);
// curl_setopt($ch, CURLOPT_SSL_VERIFYPEER,0);
//
        $this->aa = array(
            rand() => 'a',
            rand() => 'b',
            rand() => 'c',
            );

        $this->ff =  new \Nette\Application\UI\Form($this, 'pokusForm');
        $this->ff->addText('aa', 'lol');
        $this->ff->addRadioList('bb', 'super otazka', $this->aa)
                    // ->setRequired('povinne!!')
                    ;

        $this->ff->addSubmit('send', 'frr');

        // jak dostat nahodna data pres odesilani formularu
        $this->ff->onSuccess[] = function(\Nette\Application\UI\Form $form, $values) {
            dump('odeslano!!', $values);
        };
/*
        $form->addHidden('History1Question', $pid);
        $pp = array(
            $pid + rand() => 'a',
            $pid + rand() => 'b',
            $pid + rand() => 'c',
            );
        $form->addRadioList('History1Answer', 'staticka otazka?', $pp)
                ->addRule(Nette\Application\UI\Form::FILLED, 'Je potřeba zodpovědět otázku.');
        // dump($_POST);
*/
    {form hlavaForm}
        {label History1Answer /}:<br>
        {input History1Answer}

        {input Send, class=>'myBtn blue'}

<ul class="errors" n:if="$form->hasErrors()">
        <li n:foreach="$form->errors as $error">{$error}</li>
</ul>
    {/form}
{*
    <hr />
TESTOVACI MOD:<br/>
    testovaci vypis vsech otazek:<br /><br />
    {foreach $questionAll as $question}
        {$question->Question} <em>-- (body: {$question->Scoring}b) -- category: {$question->Category} -- ID: {$question->Id}</em><br />
        <ul>
        {foreach $model->getAnswer($question->Id) as $answer}
            <li type='a'>{$answer->Answer} <em>-- ({$answer->Correct ? 'YES' : 'NO'})</em></li>
        {/foreach}
        </ul>
        <hr />
    {/foreach}
    <hr />
 *}
//TODO nejaky renderer na test vypisu otazek ktery bude v produkcni verzi zakomentovany
// dump($this->model->isVoted($this->round, $this->getUser()->getId()));
        {*label Type /}<br />
        {input Type}
<br />

    <div class="control-group clearfix" id="fotosel">
        {label TypeContentFoto /}
        <div class="frmform-Marketing1Positive">{input TypeContentFoto, class=>"text"}</div>
    </div>
    <div class="control-group clearfix" id="videosel">
        {label TypeContentVideo /}
        <div class="frmform-Marketing1Negative">{input TypeContentVideo, class=>"text"}</div>
    </div>

        {label Text /}<br />
        {input Text}
<br />*}
//FIXME ne! vsechno spatne!! musi byt komponenta!!
        /*$profil = $this->getContext()->createProfil($this->lang);
        if ($profil->isCompleteProfile($this->getUser()->getId())) {
            $form->addText('Name', 'Jméno a příjmení')
                    ->setAttribute('placeholder', 'Jméno a příjmení')
                    ->addRule(UI\Form::FILLED, 'Zadejte prosím jméno a příjmení');

            $form->addText('Email', 'Email:')
                    ->setRequired('Zadejte prosím email')
                    ->addRule(Nette\Forms\Form::EMAIL, 'Zadadaná adresa není validní.');

            $form->addText('Position', 'Pozice')
                    ->setAttribute('placeholder', 'Pozice')
                    ->addRule(UI\Form::FILLED, 'Zadejte prosím pozici');
        }*/
//TODO doplnit i email???
//TODO zobrazovat a skryvat pokud je nevyplneno!!!!7
{*
<br /><br />

    <div>
        login: <strong>{$user->getIdentity()->getData()['Login']}</strong><br />
        pozice: <strong>{$user->getIdentity()->getData()['Position']}</strong><br />
        <a href="{link loginForm:logOut!}" onclick="return confirm('Opravdu se chcete odhlásit?');">odhlasit se</a>
    </div>
 *}
        // $this->getPresenter()->template->likeUp = 100;

        // $this->payload->likeUp = 100;
        // if ($this->getPresenter()->isAjax()) {

        //     $this->getPresenter()->invalidateControl('ajaxLikeUp');

        //     // var_dump($this->template);
        // }
    /**
     * pricteni lajku
     */
    public function handleLike($id) {
        $this->getContext()->createJsmeKoleje($this->lang)
                ->addLike($id);
        $this->redirect('this');
    }
// lajkovani oddelit!!!
    /**
     * pricteni lajku
     */
    /*public function addLike($id, $direct) {
        $r = $this->DBconn->select('`Like`, LikeIp')
                    ->from($this->tableName)
                    ->where('Id=?', $id)
                    ->fetch();

        if ($r->LikeIp != $_SERVER['REMOTE_ADDR']) {    // pokud se hlasuje z jine IP
            $arr = array(
                'Like' => $r->Like + 1,
                'LikeIp' => $_SERVER['REMOTE_ADDR']
                );
            $this->DBconn->update($this->tableName, $arr)
                        ->where('Id=?', $id)
                        ->execute();
        }
    }*/
{label Name /}{input Name}
    /**
     * pricteni lajku
     */
    public function handleLike($id) {
        $this->getContext()->createMotivacePribehem($this->lang)
                ->addLike($id);
        $this->redirect('this');
    }
    /**
     * pricteni lajku
     */
    public function addLike($id) {
        $r = $this->DBconn->select('`Like`, LikeIp')
                    ->from($this->tableName.'_item')
                    ->where('Id=?', $id)
                    ->fetch();

        if ($r->LikeIp != $_SERVER['REMOTE_ADDR']) {    // pokud se hlasuje z jine IP
            $arr = array(
                'Like' => $r->Like + 1,
                'LikeIp' => $_SERVER['REMOTE_ADDR']
                );
            $this->DBconn->update($this->tableName.'_item', $arr)
                        ->where('Id=?', $id)
                        ->execute();
        }
    }
<div class="col-lg-4">
                            {input Name}
                        </div>
                        <div class="col-lg-4">
                            {input Position}
                        </div>
                        <div class="col-lg-4">
                            {input Department}
                        </div>
        // $form->addText('Name', 'Jméno:')->setRequired('Zadejte prosím jméno.')->setAttribute("placeholder","Jméno");
        // $form->addText('Position', 'Pozice:')->setRequired('Zadejte prosím pozici.')->setAttribute("placeholder","Pozice");
        // $form->addText('Department', 'Odbor:')->setRequired('Zadejte prosím odbor.')->setAttribute("placeholder","Odbor");
 {* {label Name /} *}
$form->addText('Name', 'Vaše jméno:')->setRequired('Zadejte prosím jméno')->setAttribute("placeholder","Vaše jméno");
        // $form->addText('idcislo', 'Vaše id číslo:')->setRequired('Zadejte prosím id');
{if !$isCompleteProfile}
    <div class="box">je třeby vyplnit chybějící udaje v profilu!!!</div>
{/if}
        // if () {
        //     $this->flashMessage('nemáte vyplněné udaje, přejděte prosím do <a href="profil/">profilu</a> a tam si je doplňte jinak budou doplněny během soutěží');
        // }
dump($this->getUser()->isLoggedIn() , $profil->isCompleteProfile($uid) , ($data->CountLogin % 2) == 0);
// 'Foto' => $foto,
 /**
     * pridani polozky
     */
    /*public function addItem($values, $foto, $idUser) {
        $arr = array(
            'Added' => new DateTime,
            'Ip'=> $_SERVER['REMOTE_ADDR'],
            'Foto' => $foto,
            'IdUser' => $idUser,
            );
        $this->DBconn->insert($this->tableName, $values + $arr)->execute();
    }*/

    /**
     * pricteni lajku
     */
    /*public function addLike($id) {
        $r = $this->DBconn->select('`Like`')->from($this->tableName)->where('Id=?', $id)->fetch();
        $this->DBconn->query('UPDATE `'.$this->tableName.'` SET ', array('Like' => $r->Like + 1), 'WHERE `Id`=?', $id);
    }*/

    /**
     * nacteni polozek
     */
    /*public function getListItems() {
        return $this->DBconn->select('Id, Foto, Text, `Like`')
                        ->from($this->tableName);
    }*/
    /**
     * formular
     */
    /*protected function createComponentNaseNovinyForm($name) {
        $form = new UI\Form($this, $name);
        $form->setTranslator($this->translator);

        $form->addUpload('Foto', 'Fotka:');
        $form->addTextArea('Text', 'Text:')->setRequired('Zadejte prosím dotaz.');

        $form->addSubmit('Odeslat', 'Odeslat formulář');
        $form->onSuccess[] = $this->processNaseNovinyForm;

        return $form;
    }*/

    /**
     * zpracovani formulare
     */
    /*public function processNaseNovinyForm(UI\Form $form) {
        $values = $form->getValues(true);

        $foto = null;
        if ($values['Foto']->isOk() && $values['Foto']->isImage()) {
            $foto = date('Y-m-d_H-i-s').'_'.$values['Foto']->getSanitizedName();    // tvorba jmena na ulozeni
            $values['Foto']->move(WWW_DIR.'/files/image/nasenoviny/'.$foto);
        }
        unset($values['Foto']);
        $this->getContext()->createNaseNoviny($this->lang)->addItem($values, $foto, $this->getUser()->getId());

        $this->flashMessage('Formulář byl úspěšně zpracován. Děkujeme.');
        $this->redirect('this');
    }*/

    /**
     * pricteni lajku
     */
    /*public function handleLike($id) {
        $this->getContext()->createNaseNoviny($this->lang)->addLike($id);
        $this->redirect('this');
    }*/
   {* {widget htmlText:Text 'pojdteDoTohoText'} *}
{*
    Jsme koleje ...
we_track
1. Jsme koleje- zde budou lidi umisťovat videa a fotky s popisky, ostatní můžou vidět a likovat

            -  jednofázové (co vložím to se objeví)

            - formulář: vkládám video + vkládám obrázek, krátkej popisek

            - každý like button
{$presenter->getName()}
*}
/*
$this->tableName.'_intrigued'
$this->tableName.'_invite_your_colleagues'
$this->tableName.'_written_about_us'
$this->tableName.'_written_about_us_comments'
$this->tableName.'_your_ideas'
$this->tableName.'_your_ideas_comments'
 */
// dump($this->getPresenter()->getName());
// $this->formLogger->log($this->getName(), FormLogger::LOGIN);
// FormLogger::factory($this->getPresenter())->log($this->getName(), FormLogger::LOGIN);

